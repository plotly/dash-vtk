/*! For license information please see async-ReactVTK.js.LICENSE.txt */
(window.webpackJsonpdash_vtk=window.webpackJsonpdash_vtk||[]).push([[0],[,,,function(e,t,n){"use strict";(function(e){var t=n(11),Q=n(27),B=n(44),a=n(49);Object(t.c)("/$$rollup_base$$/node_modules/readable-stream/lib/_stream_duplex.js",(function(t,n){var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=g;var r=B.a,U=a.a;Object(Q.a)(g,r);for(var F=s(U.prototype),l=0;l<F.length;l++){var o=F[l];g.prototype[o]||(g.prototype[o]=U.prototype[o])}function g(e){if(!(this instanceof g))return new g(e);r.call(this,e),U.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||e.nextTick(c,this)}function c(e){e.end()}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}))}).call(this,n(21))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return W})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return V})),n.d(t,"f",(function(){return N})),n.d(t,"g",(function(){return J})),n.d(t,"h",(function(){return G})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return A})),n.d(t,"l",(function(){return d})),n.d(t,"m",(function(){return I})),n.d(t,"n",(function(){return u}));var Q=n(15),B=n(28),a=n(5),s=n(9),r=(n(3),n(16));function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=0,o=Symbol("void"),g={};function i(){}["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach((function(e){g[e]=i})),e.console=console.hasOwnProperty("log")?console:g;var c={debug:i,error:e.console.error||i,info:e.console.info||i,log:e.console.log||i,warn:e.console.warn||i};function d(){c.debug.apply(c,arguments)}function I(){c.error.apply(c,arguments)}function u(){c.warn.apply(c,arguments)}var C={};var m={Float32Array:Float32Array,Float64Array:Float64Array,Uint8Array:Uint8Array,Int8Array:Int8Array,Uint16Array:Uint16Array,Int16Array:Int16Array,Uint32Array:Uint32Array,Int32Array:Int32Array};function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}function S(e){Object.keys(e).forEach((function(t){Array.isArray(e[t])&&(e[t]=[].concat(e[t]))}))}function y(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}function Z(e){return e.isA?e.getState():e}function x(e){setTimeout(e,0)}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S(t);var n=[];function Q(e){n[e]=null}function B(e){return Object.freeze({unsubscribe:function(){Q(e)}})}return Number.isInteger(t.mtime)||(t.mtime=++l),t.classHierarchy=["vtkObject"],e.isDeleted=function(){return!!t.deleted},e.modified=function(Q){t.deleted?I("instance deleted - cannot call any method"):Q&&Q<e.getMTime()||(t.mtime=++l,n.forEach((function(t){return t&&t(e)})))},e.onModified=function(e){if(t.deleted)return I("instance deleted - cannot call any method"),null;var Q=n.length;return n.push(e),B(Q)},e.getMTime=function(){return t.mtime},e.isA=function(e){for(var n=t.classHierarchy.length;n--;)if(t.classHierarchy[n]===e)return!0;return!1},e.getClassName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.classHierarchy[t.classHierarchy.length-1-e]},e.set=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Q=arguments.length>1&&void 0!==arguments[1]&&arguments[1],B=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!1;return Object.keys(n).forEach((function(r){var U=B?null:e["set".concat(b(r))];U&&Array.isArray(n[r])&&U.length>1?a=U.apply(void 0,Object(s.a)(n[r]))||a:U?a=U(n[r])||a:(-1!==["mtime"].indexOf(r)||Q||u("Warning: Set value to model directly ".concat(r,", ").concat(n[r])),t[r]=n[r],a=!0)})),a},e.get=function(){for(var e=arguments.length,n=new Array(e),Q=0;Q<e;Q++)n[Q]=arguments[Q];if(!n.length)return t;var B={};return n.forEach((function(e){B[e]=t[e]})),B},e.getReferenceByName=function(e){return t[e]},e.delete=function(){Object.keys(t).forEach((function(e){return delete t[e]})),n.forEach((function(e,t){return Q(t)})),t.deleted=!0},e.getState=function(){var n=F(F({},t),{},{vtkClass:e.getClassName()});Object.keys(n).forEach((function(e){null===n[e]||void 0===n[e]?delete n[e]:n[e].isA?n[e]=n[e].getState():Array.isArray(n[e])&&(n[e]=n[e].map(Z))}));var Q={};return Object.keys(n).sort().forEach((function(e){Q[e]=n[e]})),Q.mtime&&delete Q.mtime,Q},e.shallowCopy=function(n){var Q=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.getClassName()!==e.getClassName())throw new Error("Cannot ShallowCopy ".concat(n.getClassName()," into ").concat(e.getClassName()));var B=n.get(),a=Object.keys(t).sort(),s=Object.keys(B).sort();s.forEach((function(e){var n=a.indexOf(e);-1===n?Q&&d("add ".concat(e," in shallowCopy")):a.splice(n,1),t[e]=B[e]})),a.length&&Q&&d("Untouched keys: ".concat(a.join(", "))),e.modified()},e}function V(e,t,n){n.forEach((function(n){"object"===Object(B.a)(n)?e["get".concat(b(n.name))]=function(){return t[n.name]}:e["get".concat(b(n))]=function(){return t[n]}}))}var R={enum:function(e,t,n){return function(Q){if("string"==typeof Q){if(void 0!==n.enum[Q])return t[n.name]!==n.enum[Q]&&(t[n.name]=n.enum[Q],e.modified(),!0);throw I("Set Enum with invalid argument ".concat(n,", ").concat(Q)),new RangeError("Set Enum with invalid string argument")}if("number"==typeof Q){if(t[n.name]!==Q){if(-1!==Object.keys(n.enum).map((function(e){return n.enum[e]})).indexOf(Q))return t[n.name]=Q,e.modified(),!0;throw I("Set Enum outside numeric range ".concat(n,", ").concat(Q)),new RangeError("Set Enum outside numeric range")}return!1}throw I("Set Enum with invalid argument (String/Number) ".concat(n,", ").concat(Q)),new TypeError("Set Enum with invalid argument (String/Number)")}}};function L(e){if("object"===Object(B.a)(e)){var t=R[e.type];if(t)return function(n,Q){return t(n,Q,e)};throw I("No setter for field ".concat(e)),new TypeError("No setter for field")}return function(t,n){return function(Q){return n.deleted?(I("instance deleted - cannot call any method"),!1):n[e]!==Q&&(n[e]=Q,t.modified(),!0)}}}function p(e,t,n){n.forEach((function(n){"object"===Object(B.a)(n)?e["set".concat(b(n.name))]=L(n)(e,t):e["set".concat(b(n))]=L(n)(e,t)}))}function h(e,t,n){V(e,t,n),p(e,t,n)}function N(e,t,n){n.forEach((function(n){e["get".concat(b(n))]=function(){return[].concat(t[n])},e["get".concat(b(n),"ByReference")]=function(){return t[n]}}))}function D(e,t,n,Q){var B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;n.forEach((function(n){e["set".concat(b(n))]=function(){if(t.deleted)return I("instance deleted - cannot call any method"),!1;for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var U=s;if(1===U.length&&Array.isArray(U[0])&&(U=U[0]),U.length!==Q){if(!(U.length<Q&&void 0!==B))throw new RangeError("Invalid number of values for array setter (".concat(n,")"));for(U=[].concat(U);U.length<Q;)U.push(B)}var F=!1;return t[n].forEach((function(e,t){if(e!==U[t]){if(F)return;F=!0}})),!(!F&&t[n].length===U.length||(t[n]=[].concat(U),e.modified(),0))},e["set".concat(b(n),"From")]=function(e){var Q=t[n];e.forEach((function(e,t){Q[t]=e}))}}))}function A(e,t,n,Q){var B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;N(e,t,n),D(e,t,n,Q,B)}var E=Symbol("Event abort");function f(e,t,n){var B=[],a=e.delete,s=1;function r(e){for(var t=0;t<B.length;++t)if(Object(Q.a)(B[t],1)[0]===e)return void B.splice(t,1)}function U(e){return Object.freeze({unsubscribe:function(){r(e)}})}e["invoke".concat(b(n))]=function(){var n=arguments;if(t.deleted)I("instance deleted - cannot call any method");else for(var a=B.slice(),s=function(t){var B=Object(Q.a)(a[t],3),s=B[1],r=B[2];if(!s)return"continue";if(r<0)setTimeout((function(){return s.apply(e,n)}),1-r);else if(s.apply(e,n)===E)return"break"},r=0;r<a.length;++r){var U=s(r);if("continue"!==U&&"break"===U)break}},e["on".concat(b(n))]=function(e){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e.apply)return console.error("Invalid callback for event ".concat(n)),null;if(t.deleted)return I("instance deleted - cannot call any method"),null;var a=s++;return B.push([a,e,Q]),B.sort((function(e,t){return t[2]-e[2]})),U(a)},e.delete=function(){a(),B.forEach((function(e){return r(Object(Q.a)(e,1)[0])}))}}function J(e,t){var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},Q={};return e(Q,n,t),Object.freeze(Q)};return t&&r.a.register(t,n),n}function v(e){return e&&e.isA&&e.isA("vtkObject")}function W(e,t,n){var Q,B=this;return function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var U=B,F=function(){Q=null,n||e.apply(U,s)},l=n&&!Q;clearTimeout(Q),Q=setTimeout(F,t),l&&e.apply(U,s)}}function X(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.keystore=Object.assign(t.keystore||{},n),e.setKey=function(e,n){t.keystore[e]=n},e.getKey=function(e){return t.keystore[e]},e.getAllKeys=function(){return Object.keys(t.keystore)},e.deleteKey=function(e){return delete t.keystore[e]},e.clearKeystore=function(){return e.getAllKeys().forEach((function(e){return delete t.keystore[e]}))}}var H=1;var k={algo:function(e,t,n,Q){function B(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.deleted?I("instance deleted - cannot call any method"):Q>=t.numberOfInputs?I("algorithm ".concat(e.getClassName()," only has ").concat(t.numberOfInputs," input ports. To add more input ports, use addInputData()")):(t.inputData[Q]!==n||t.inputConnection[Q])&&(t.inputData[Q]=n,t.inputConnection[Q]=null,e.modified&&e.modified())}function a(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.deleted)I("instance deleted - cannot call any method");else{if(Q>=t.numberOfInputs){var B="algorithm ".concat(e.getClassName()," only has ");return B+="".concat(t.numberOfInputs),void I(B+=" input ports. To add more input ports, use addInputConnection()")}t.inputData[Q]=null,t.inputConnection[Q]=n}}function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.deleted?(I("instance deleted - cannot call any method"),null):(e.shouldUpdate()&&e.update(),t.output[n])}if(t.inputData?t.inputData=t.inputData.map(r.a):t.inputData=[],t.inputConnection?t.inputConnection=t.inputConnection.map(r.a):t.inputConnection=[],t.output?t.output=t.output.map(r.a):t.output=[],t.inputArrayToProcess?t.inputArrayToProcess=t.inputArrayToProcess.map(r.a):t.inputArrayToProcess=[],t.numberOfInputs=n,e.shouldUpdate=function(){for(var n=e.getMTime(),B=Q,a=1/0;B--;){if(!t.output[B])return!0;var s=t.output[B].getMTime();if(s<n)return!0;s<a&&(a=s)}for(B=t.numberOfInputs;B--;)if(t.inputConnection[B]&&t.inputConnection[B].filter.shouldUpdate())return!0;for(B=t.numberOfInputs;B--;)if(e.getInputData(B)&&e.getInputData(B).getMTime()>a)return!0;return!1},t.numberOfInputs){for(var U=t.numberOfInputs;U--;)t.inputData.push(null),t.inputConnection.push(null);e.setInputData=B,e.setInputConnection=a,e.addInputData=function(e){t.deleted?I("instance deleted - cannot call any method"):(t.numberOfInputs++,B(e,t.numberOfInputs-1))},e.addInputConnection=function(e){t.deleted?I("instance deleted - cannot call any method"):(t.numberOfInputs++,a(e,t.numberOfInputs-1))},e.getInputData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]&&(t.inputData[e]=t.inputConnection[e]()),t.inputData[e]},e.getInputConnection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]}}Q&&(e.getOutputData=s,e.getOutputPort=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=function(){return s(t)};return n.filter=e,n}),e.update=function(){var n=[];if(t.numberOfInputs)for(var Q=0;Q<t.numberOfInputs;)n[Q]=e.getInputData(Q),Q++;e.shouldUpdate()&&e.requestData&&e.requestData(n,t.output)},e.getNumberOfInputPorts=function(){return t.numberOfInputs},e.getNumberOfOutputPorts=function(){return Q||t.output.length},e.getInputArrayToProcess=function(e){var n=t.inputArrayToProcess[e],Q=t.inputData[e];return n&&Q?Q["get".concat(n.fieldAssociation)]().getArray(n.arrayName):null},e.setInputArrayToProcess=function(e,n,Q){for(var B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Scalars";t.inputArrayToProcess.length<e;)t.inputArrayToProcess.push(null);t.inputArrayToProcess[e]={arrayName:n,fieldAssociation:Q,attributeType:B}}},capitalize:b,chain:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),Q=0;Q<e;Q++)n[Q]=arguments[Q];return t.filter((function(e){return!!e})).map((function(e){return e.apply(void 0,n)}))}},debounce:W,enumToString:function(e,t){return Object.keys(e).find((function(n){return e[n]===t}))},event:f,EVENT_ABORT:E,formatBytesToProperUnit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,Q=["TB","GB","MB","KB"],B=Number(e),a="B";B>n;)B/=n,a=Q.pop();return"".concat(B.toFixed(t)," ").concat(a)},formatNumbersWithThousandSeparator:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=[],Q=e;Q>1e3;)n.push("000".concat(Q%1e3).slice(-3)),Q=Math.floor(Q/1e3);return Q>0&&n.push(Q),n.reverse(),n.join(t)},get:V,getArray:N,getCurrentGlobalMTime:function(){return l},getStateArrayMapFunc:Z,isVtkObject:v,keystore:X,newInstance:J,normalizeWheel:function(e){var t=0,n=0,Q=0,B=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),Q=10*t,B=10*n,"deltaY"in e&&(B=e.deltaY),"deltaX"in e&&(Q=e.deltaX),(Q||B)&&e.deltaMode&&(1===e.deltaMode?(Q*=40,B*=40):(Q*=800,B*=800)),Q&&!t&&(t=Q<1?-1:1),B&&!n&&(n=B<1?-1:1),{spinX:t,spinY:n,pixelX:Q,pixelY:B}},obj:G,proxy:function(e,t){X(e,t);var n=e.delete;t.proxyId="".concat(H++),t.ui=JSON.parse(JSON.stringify(t.ui||[])),V(e,t,["proxyId","proxyGroup","proxyName"]),h(e,t,["proxyManager"]);var Q={},B={};function s(e,t){B[t]||(B[t]=[]);for(var n=B[t],a=0;a<e.length;a++)n.push(e[a].name),Q[e[a].name]=e[a],e[a].children&&e[a].children.length&&s(e[a].children,e[a].name)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"__root__";return B[e]}function U(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"__root__",Q=[],B=t.proxyId,a=r(n)||[],s=0;s<a.length;s++){var F=a[s],l=e["get".concat(b(F))],o=l?l():void 0,g={id:B,name:F,value:o},i=U(F);i.length&&(g.children=i),Q.push(g)}return Q}s(t.ui,"__root__"),e.updateUI=function(n){t.ui=JSON.parse(JSON.stringify(n||[])),Object.keys(Q).forEach((function(e){return delete Q[e]})),Object.keys(B).forEach((function(e){return delete B[e]})),s(t.ui,"__root__"),e.modified()},e.updateProxyProperty=function(e,t){var n=Q[e];n?Object.assign(n,t):Q[e]=F({},t)},e.activate=function(){if(t.proxyManager){var n="setActive".concat(b(e.getProxyGroup().slice(0,-1)));t.proxyManager[n]&&t.proxyManager[n](e)}},t.propertyLinkSubscribers={},e.registerPropertyLinkForGC=function(e,n){n in t.propertyLinkSubscribers||(t.propertyLinkSubscribers[n]=[]),t.propertyLinkSubscribers[n].push(e)},e.gcPropertyLinks=function(n){for(var Q=t.propertyLinkSubscribers[n]||[];Q.length;)Q.pop().unbind(e)},t.propertyLinkMap={},e.getPropertyLink=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.propertyLinkMap[e])return t.propertyLinkMap[e];var Q=null,B=[],s=0,r=!1;function U(n){var U=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r)return null;var F=[],l=null;for(s=B.length;s--;){var o=B[s];o.instance===n?l=o:F.push(o)}if(!l)return null;var g=l.instance["get".concat(b(l.propertyName))]();if(!y(g,Q)||U){for(Q=g,r=!0;F.length;){var i=F.pop();i.instance.set(Object(a.a)({},i.propertyName,Q))}r=!1}return t.propertyLinkMap[e].persistent&&(t.propertyLinkMap[e].value=g),g}function F(e,t){var n=[];for(s=B.length;s--;){var Q=B[s];Q.instance!==e||Q.propertyName!==t&&void 0!==t||(Q.subscription.unsubscribe(),n.push(s))}for(;n.length;)B.splice(n.pop(),1)}function l(n,Q){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n.onModified(U),l=B[0];return B.push({instance:n,propertyName:Q,subscription:r}),s&&(t.propertyLinkMap[e].persistent&&void 0!==t.propertyLinkMap[e].value?n.set(Object(a.a)({},Q,t.propertyLinkMap[e].value)):l&&U(l.instance,!0)),{unsubscribe:function(){return F(n,Q)}}}function o(){for(;B.length;)B.pop().subscription.unsubscribe()}var g={bind:l,unbind:F,unsubscribe:o,persistent:n};return t.propertyLinkMap[e]=g,g},e.listPropertyNames=function(){return U().map((function(e){return e.name}))},e.getPropertyByName=function(e){return U().find((function(t){return t.name===e}))},e.getPropertyDomainByName=function(e){return(Q[e]||{}).domain},e.getProxySection=function(){return{id:t.proxyId,name:t.proxyGroup,ui:t.ui,properties:U()}},e.delete=function(){for(var Q=Object.keys(t.propertyLinkMap),B=Q.length;B--;)t.propertyLinkMap[Q[B]].unsubscribe();Object.keys(t.propertyLinkSubscribers).forEach(e.gcPropertyLinks),n()},x((function(){if(t.links)for(var n=0;n<t.links.length;n++){var Q=t.links[n],B=Q.link,a=Q.property,s=Q.persistent,r=Q.updateOnBind;if("application"===Q.type){var U=t.proxyManager.getPropertyLink(B,s);e.registerPropertyLinkForGC(U,"application"),U.bind(e,a,r)}}}))},proxyPropertyMapping:function(e,t,n){for(var Q=e.delete,B=[],a=Object.keys(n),s=a.length;s--;){var r=a[s],U=n[r],F=U.modelKey,l=U.property,o=U.modified,g=void 0===o||o,i=b(l),c=b(r);e["get".concat(c)]=t[F]["get".concat(i)],e["set".concat(c)]=t[F]["set".concat(i)],g&&B.push(t[F].onModified(e.modified))}e.delete=function(){for(;B.length;)B.pop().unsubscribe();Q()}},proxyPropertyState:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};function B(e){for(var n=Object.keys(e),Q=n.length;Q--;){var B=n[Q];t[B].set(e[B])}}t.this=e;for(var a=Object.keys(Q),s=a.length,r=function(){var r=a[s];t[r]=Q[r];var U=n[r];e["set".concat(b(r))]=function(n){n!==t[r]&&(t[r]=n,B(U[n]),e.modified())}};s--;)r();a.length&&V(e,t,a)},safeArrays:S,set:p,setArray:D,setGet:h,setGetArray:A,setImmediate:x,setLoggerFunction:function(e,t){c[e]&&(c[e]=t||i)},throttle:function(e,t){var n=!1,Q=null;function B(){n=!1,null!==Q&&(a.apply(void 0,Object(s.a)(Q)),Q=null)}function a(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];n?Q=s:(n=!0,e.apply(void 0,s),setTimeout(B,t))}return a},traverseInstanceTree:function e(t,n){var Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(v(t)){if(B.indexOf(t)>=0)return Q;B.push(t);var a=n(t);void 0!==a&&Q.push(a);var s=t.get();Object.keys(s).forEach((function(t){var a=s[t];Array.isArray(a)?a.forEach((function(t){e(t,n,Q,B)})):e(a,n,Q,B)}))}return Q},TYPED_ARRAYS:m,uncapitalize:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},VOID:o,vtkDebugMacro:d,vtkErrorMacro:I,vtkInfoMacro:function(){c.info.apply(c,arguments)},vtkLogMacro:function(){c.log.apply(c,arguments)},vtkOnceErrorMacro:function(e){C[e]||(c.error(e),C[e]=!0)},vtkWarningMacro:u};t.c=k}).call(this,n(23))},function(e,t,n){"use strict";t.a=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return J})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return W})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return N})),n.d(t,"f",(function(){return D})),n.d(t,"g",(function(){return F})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return H})),n.d(t,"k",(function(){return Z})),n.d(t,"l",(function(){return E})),n.d(t,"m",(function(){return g})),n.d(t,"n",(function(){return x})),n.d(t,"o",(function(){return V})),n.d(t,"p",(function(){return f})),n.d(t,"q",(function(){return I})),n.d(t,"r",(function(){return v})),n.d(t,"s",(function(){return b})),n.d(t,"t",(function(){return d})),n.d(t,"u",(function(){return h})),n.d(t,"v",(function(){return X})),n.d(t,"w",(function(){return u})),n.d(t,"x",(function(){return c})),n.d(t,"y",(function(){return m})),n.d(t,"z",(function(){return y})),n.d(t,"A",(function(){return C})),n.d(t,"B",(function(){return r})),n.d(t,"C",(function(){return L})),n.d(t,"D",(function(){return A})),n.d(t,"E",(function(){return i})),n.d(t,"F",(function(){return U}));var Q=n(15),B=(n(3),n(4)),a=(n(41),B.c.vtkWarningMacro);function s(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=[];t.length<e;)t.push(0);return t}function r(e){return e/180*Math.PI}function U(e){return 180*e/Math.PI}var F=Math.floor;function l(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Q=1/0,B=-1/0,a=t,s=e.length;a<s;a+=n)e[a]<Q&&(Q=e[a]),B<e[a]&&(B=e[a]);return[Q,B]}function o(e){for(var t=1;t<e;)t*=2;return t}function g(e){return e===o(e)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t-e;return e+n*Math.random()}function c(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function d(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function I(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function u(e,t,n){var Q=e[1]*t[2]-e[2]*t[1],B=e[2]*t[0]-e[0]*t[2],a=e[0]*t[1]-e[1]*t[0];return n[0]=Q,n[1]=B,n[2]=a,n}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(t){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:for(var n=0,Q=0;Q<t;Q++)n+=e[Q]*e[Q];return Math.sqrt(n)}}function m(e){var t=C(e);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t),t}function b(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2])}function S(e){var t=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}(e);return 0!==t&&(e[0]/=t,e[1]/=t),t}function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 2===t.length?t[0][0]*t[1][1]-t[1][0]*t[0][1]:4===t.length?t[0]*t[3]-t[1]*t[2]:Number.NaN}function Z(e,t,n){var Q=e[0][0]*t[0]+e[0][1]*t[1]+e[0][2]*t[2],B=e[1][0]*t[0]+e[1][1]*t[1]+e[1][2]*t[2],a=e[2][0]*t[0]+e[2][1]*t[1]+e[2][2]*t[2];n[0]=Q,n[1]=B,n[2]=a}var x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;if(e.length!==t.length)return!1;function Q(e,Q){return Math.abs(e-t[Q])<=n}return e.every(Q)};function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!"".concat(e).includes("e"))return+"".concat(Math.round("".concat(e,"e+").concat(t)),"e-").concat(t);var n="".concat(e).split("e"),Q="";return+n[1]+t>0&&(Q="+"),+"".concat(Math.round("".concat(+n[0],"e").concat(Q).concat(+n[1]+t)),"e-").concat(t)}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[0]=G(e[0],n),t[1]=G(e[1],n),t[2]=G(e[2],n),t}function R(e,t,n){var Q,B,r,U,F,l,o,g=0,i=s(n);for(Q=0;Q<n;Q++){for(U=0,B=0;B<n;B++)(o=Math.abs(e[Q][B]))>U&&(U=o);if(0===U)return a("Unable to factor linear system"),0;i[Q]=1/U}for(B=0;B<n;B++){for(Q=0;Q<B;Q++){for(F=e[Q][B],r=0;r<Q;r++)F-=e[Q][r]*e[r][B];e[Q][B]=F}for(U=0,Q=B;Q<n;Q++){for(F=e[Q][B],r=0;r<B;r++)F-=e[Q][r]*e[r][B];e[Q][B]=F,(l=i[Q]*Math.abs(F))>=U&&(U=l,g=Q)}if(B!==g){for(r=0;r<n;r++)l=e[g][r],e[g][r]=e[B][r],e[B][r]=l;i[g]=i[B]}if(t[B]=g,Math.abs(e[B][B])<=1e-12)return a("Unable to factor linear system"),0;if(B!==n-1)for(l=1/e[B][B],Q=B+1;Q<n;Q++)e[Q][B]*=l}return 1}function L(e,t,n){if(2===n){var Q=s(2),B=y(e[0][0],e[0][1],e[1][0],e[1][1]);return 0===B?0:(Q[0]=(e[1][1]*t[0]-e[0][1]*t[1])/B,Q[1]=(-e[1][0]*t[0]+e[0][0]*t[1])/B,t[0]=Q[0],t[1]=Q[1],1)}if(1===n)return 0===e[0][0]?0:(t[0]/=e[0][0],1);var a=s(n);return 0===R(e,a,n)?0:(function(e,t,n,Q){var B,a,s,r,U;for(s=-1,B=0;B<Q;B++){if(U=n[r=t[B]],n[r]=n[B],s>=0)for(a=s;a<=B-1;a++)U-=e[B][a]*n[a];else 0!==U&&(s=B);n[B]=U}for(B=Q-1;B>=0;B--){for(U=n[B],a=B+1;a<Q;a++)U-=e[B][a]*n[a];n[B]=U/e[B][B]}}(e,a,t,n),1)}function p(e,t){var n,B,a=Object(Q.a)(e,3),s=a[0],r=a[1],U=a[2],F=s,l=s;r>F?F=r:r<l&&(l=r),U>F?F=U:U<l&&(l=U);var o=F;(B=o>0?(F-l)/F:0)>0?(n=s===F?1/6*(r-U)/(F-l):r===F?1/3+1/6*(U-s)/(F-l):2/3+1/6*(s-r)/(F-l))<0&&(n+=1):n=0,t[0]=n,t[1]=B,t[2]=o}function h(e,t){var n,B,a,s=Object(Q.a)(e,3),r=s[0],U=s[1],F=s[2],l=1/3,o=1/6,g=2/3;r>o&&r<=l?(B=1,n=(l-r)/o,a=0):r>l&&r<=.5?(B=1,a=(r-l)/o,n=0):r>.5&&r<=g?(a=1,B=(g-r)/o,n=0):r>g&&r<=5/6?(a=1,n=(r-g)/o,B=0):r>5/6&&r<=1?(n=1,a=(1-r)/o,B=0):(n=1,B=r/o,a=0),n=U*n+(1-U),B=U*B+(1-U),a=U*a+(1-U),n*=F,B*=F,a*=F,t[0]=n,t[1]=B,t[2]=a}function N(e,t){var n=[0,0,0];(function(e,t){var n=Object(Q.a)(e,3),B=n[0],a=n[1],s=n[2];B>.04045?B=Math.pow((B+.055)/1.055,2.4):B/=12.92,a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,s>.04045?s=Math.pow((s+.055)/1.055,2.4):s/=12.92,t[0]=.4124*B+.3576*a+.1805*s,t[1]=.2126*B+.7152*a+.0722*s,t[2]=.0193*B+.1192*a+.9505*s})(e,n),function(e,t){var n=Object(Q.a)(e,3),B=n[0]/.9505,a=n[1]/1,s=n[2]/1.089;B=B>.008856?Math.pow(B,1/3):7.787*B+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,t[0]=116*a-16,t[1]=500*(B-a),t[2]=200*(a-s)}(n,t)}function D(e,t){var n=[0,0,0];(function(e,t){var n=Object(Q.a)(e,3),B=(n[0]+16)/116,a=n[1]/500+B,s=B-n[2]/200;B=Math.pow(B,3)>.008856?Math.pow(B,3):(B-16/116)/7.787,a=Math.pow(a,3)>.008856?Math.pow(a,3):(a-16/116)/7.787,s=Math.pow(s,3)>.008856?Math.pow(s,3):(s-16/116)/7.787,t[0]=.9505*a,t[1]=1*B,t[2]=1.089*s})(e,n),function(e,t){var n=Object(Q.a)(e,3),B=n[0],a=n[1],s=n[2],r=3.2406*B+-1.5372*a+-.4986*s,U=-.9689*B+1.8758*a+.0415*s,F=.0557*B+-.204*a+1.057*s;r>.0031308?r=1.055*Math.pow(r,1/2.4)-.055:r*=12.92,U>.0031308?U=1.055*Math.pow(U,1/2.4)-.055:U*=12.92,F>.0031308?F=1.055*Math.pow(F,1/2.4)-.055:F*=12.92;var l=r;l<U&&(l=U),l<F&&(l=F),l>1&&(r/=l,U/=l,F/=l),r<0&&(r=0),U<0&&(U=0),F<0&&(F=0),t[0]=r,t[1]=U,t[2]=F}(n,t)}function A(e){e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1}function E(e){return!(e[1]-e[0]<0)}function f(e,t,n){n[0]=Math.min(e[0],t[0]),n[1]=Math.max(e[0],t[0]),n[2]=Math.min(e[1],t[1]),n[3]=Math.max(e[1],t[1]),n[4]=Math.min(e[2],t[2]),n[5]=Math.max(e[2],t[2])}function J(e,t,n){return e<t?t:e>n?n:e}function v(e,t,n){var Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Q[0]=J(e[0],t[0],n[0]),Q[1]=J(e[1],t[1],n[1]),Q[2]=J(e[2],t[2],n[2]),Q}var W=function(e){return!Number.isFinite(e)},X=Number.isNaN;function H(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}},function(e,t,n){"use strict";var Q=n(5),B=(n(3),n(4)),a=n(17),s=n(6);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(Q.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=a.b.DefaultDataType,l=[];function o(){var e=Number.MAX_VALUE,t=-Number.MAX_VALUE,n=0,Q=0;return{add:function(B){e>B&&(e=B),t<B&&(t=B),n++,Q+=B},get:function(){return{min:e,max:t,count:n,sum:Q,mean:Q/n}},getRange:function(){return{min:e,max:t}}}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Q=o(),B=e.length,a=0;if(t<0&&n>1){for(var s=0;s<B;s+=n){a=0;for(var r=0;r<n;r++)a+=e[s+r]*e[s+r];a=Math.pow(a,.5),Q.add(a)}return Q.getRange()}for(var U=t<0?0:t,F=U;F<B;F+=n)Q.add(e[F]);return Q.getRange()}function i(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e||[];n.length<=t;)n.push(null);return n}function c(e){return Object.prototype.toString.call(e).slice(8,-1)}var d={computeRange:g,createRangeHelper:o,getDataType:c,getMaxNorm:function(e){for(var t=e.getNumberOfComponents(),n=0,Q=0;Q<e.getNumberOfTuples();++Q){var B=Object(s.A)(e.getTuple(Q),t);B>n&&(n=B)}return n}};function I(e,t){function n(){t.ranges=null,e.modified()}t.classHierarchy.push("vtkDataArray"),e.getElementComponentSize=function(){return t.values.BYTES_PER_ELEMENT},e.getComponent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+n]},e.setComponent=function(e,Q,B){B!==t.values[e*t.numberOfComponents+Q]&&(t.values[e*t.numberOfComponents+Q]=B,n())},e.getData=function(){return t.values},e.getRange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=e<0?t.numberOfComponents:e,Q=null;return t.ranges||(t.ranges=i(t.ranges,t.numberOfComponents)),(Q=t.ranges[n])?(t.rangeTuple[0]=Q.min,t.rangeTuple[1]=Q.max,t.rangeTuple):(Q=g(t.values,e,t.numberOfComponents),t.ranges[n]=Q,t.rangeTuple[0]=Q.min,t.rangeTuple[1]=Q.max,t.rangeTuple)},e.setRange=function(e,n){t.ranges||(t.ranges=i(t.ranges,t.numberOfComponents));var Q={min:e.min,max:e.max};return t.ranges[n]=Q,t.rangeTuple[0]=Q.min,t.rangeTuple[1]=Q.max,t.rangeTuple},e.setTuple=function(e,n){for(var Q=e*t.numberOfComponents,B=0;B<t.numberOfComponents;B++)t.values[Q+B]=n[B]},e.getTuple=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,Q=t.numberOfComponents||1;n.length!==Q&&(n.length=Q);var B=e*Q;if(1===Q)n[0]=t.values[B];else if(2===Q)n[0]=t.values[B],n[1]=t.values[B+1];else if(3===Q)n[0]=t.values[B],n[1]=t.values[B+1],n[2]=t.values[B+2];else if(4===Q)n[0]=t.values[B],n[1]=t.values[B+1],n[2]=t.values[B+2],n[3]=t.values[B+3];else for(var a=0;a<Q;a++)n[a]=t.values[B+a];return n},e.getTupleLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e*t.numberOfComponents},e.getNumberOfComponents=function(){return t.numberOfComponents},e.getNumberOfValues=function(){return t.values.length},e.getNumberOfTuples=function(){return t.values.length/t.numberOfComponents},e.getDataType=function(){return t.dataType},e.newClone=function(){return m({empty:!0,name:t.name,dataType:t.dataType,numberOfComponents:t.numberOfComponents})},e.getName=function(){return t.name||(e.modified(),t.name="vtkDataArray".concat(e.getMTime())),t.name},e.setData=function(e,Q){t.values=e,t.size=e.length,t.dataType=c(e),Q&&(t.numberOfComponents=Q),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),n()},e.getState=function(){var n=U(U({},t),{},{vtkClass:e.getClassName()});n.values=Array.from(n.values),delete n.buffer,Object.keys(n).forEach((function(e){n[e]||delete n[e]}));var Q={};return Object.keys(n).sort().forEach((function(e){Q[e]=n[e]})),Q.mtime&&delete Q.mtime,Q}}var u={name:"",numberOfComponents:1,size:0,dataType:F,rangeTuple:[0,0]};function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,u,n),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");t.values?Array.isArray(t.values)&&(t.values=window[t.dataType].from(t.values)):t.values=new window[t.dataType](t.size),t.values&&(t.size=t.values.length,t.dataType=c(t.values)),Object(B.h)(e,t),Object(B.i)(e,t,["name","numberOfComponents"]),I(e,t)}var m=Object(B.g)(C,"vtkDataArray"),b=U(U({newInstance:m,extend:C},d),a.b);t.a=b},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return B})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return r})),n.d(t,"h",(function(){return a})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return Z})),n.d(t,"l",(function(){return U})),n.d(t,"m",(function(){return m})),n.d(t,"n",(function(){return y})),n.d(t,"o",(function(){return b})),n.d(t,"p",(function(){return R})),n.d(t,"q",(function(){return o})),n.d(t,"r",(function(){return l})),n.d(t,"s",(function(){return F}));var Q=n(19);function B(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function s(e,t){if(e===t){var n=t[1],Q=t[2],B=t[3],a=t[6],s=t[7],r=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=Q,e[9]=a,e[11]=t[14],e[12]=B,e[13]=s,e[14]=r}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function r(e,t){var n=t[0],Q=t[1],B=t[2],a=t[3],s=t[4],r=t[5],U=t[6],F=t[7],l=t[8],o=t[9],g=t[10],i=t[11],c=t[12],d=t[13],I=t[14],u=t[15],C=n*r-Q*s,m=n*U-B*s,b=n*F-a*s,S=Q*U-B*r,y=Q*F-a*r,Z=B*F-a*U,x=l*d-o*c,G=l*I-g*c,V=l*u-i*c,R=o*I-g*d,L=o*u-i*d,p=g*u-i*I,h=C*p-m*L+b*R+S*V-y*G+Z*x;return h?(h=1/h,e[0]=(r*p-U*L+F*R)*h,e[1]=(B*L-Q*p-a*R)*h,e[2]=(d*Z-I*y+u*S)*h,e[3]=(g*y-o*Z-i*S)*h,e[4]=(U*V-s*p-F*G)*h,e[5]=(n*p-B*V+a*G)*h,e[6]=(I*b-c*Z-u*m)*h,e[7]=(l*Z-g*b+i*m)*h,e[8]=(s*L-r*V+F*x)*h,e[9]=(Q*V-n*L-a*x)*h,e[10]=(c*y-d*b+u*C)*h,e[11]=(o*b-l*y-i*C)*h,e[12]=(r*G-s*R-U*x)*h,e[13]=(n*R-Q*G+B*x)*h,e[14]=(d*m-c*S-I*C)*h,e[15]=(l*S-o*m+g*C)*h,e):null}function U(e,t,n){var Q=t[0],B=t[1],a=t[2],s=t[3],r=t[4],U=t[5],F=t[6],l=t[7],o=t[8],g=t[9],i=t[10],c=t[11],d=t[12],I=t[13],u=t[14],C=t[15],m=n[0],b=n[1],S=n[2],y=n[3];return e[0]=m*Q+b*r+S*o+y*d,e[1]=m*B+b*U+S*g+y*I,e[2]=m*a+b*F+S*i+y*u,e[3]=m*s+b*l+S*c+y*C,m=n[4],b=n[5],S=n[6],y=n[7],e[4]=m*Q+b*r+S*o+y*d,e[5]=m*B+b*U+S*g+y*I,e[6]=m*a+b*F+S*i+y*u,e[7]=m*s+b*l+S*c+y*C,m=n[8],b=n[9],S=n[10],y=n[11],e[8]=m*Q+b*r+S*o+y*d,e[9]=m*B+b*U+S*g+y*I,e[10]=m*a+b*F+S*i+y*u,e[11]=m*s+b*l+S*c+y*C,m=n[12],b=n[13],S=n[14],y=n[15],e[12]=m*Q+b*r+S*o+y*d,e[13]=m*B+b*U+S*g+y*I,e[14]=m*a+b*F+S*i+y*u,e[15]=m*s+b*l+S*c+y*C,e}function F(e,t,n){var Q,B,a,s,r,U,F,l,o,g,i,c,d=n[0],I=n[1],u=n[2];return t===e?(e[12]=t[0]*d+t[4]*I+t[8]*u+t[12],e[13]=t[1]*d+t[5]*I+t[9]*u+t[13],e[14]=t[2]*d+t[6]*I+t[10]*u+t[14],e[15]=t[3]*d+t[7]*I+t[11]*u+t[15]):(Q=t[0],B=t[1],a=t[2],s=t[3],r=t[4],U=t[5],F=t[6],l=t[7],o=t[8],g=t[9],i=t[10],c=t[11],e[0]=Q,e[1]=B,e[2]=a,e[3]=s,e[4]=r,e[5]=U,e[6]=F,e[7]=l,e[8]=o,e[9]=g,e[10]=i,e[11]=c,e[12]=Q*d+r*I+o*u+t[12],e[13]=B*d+U*I+g*u+t[13],e[14]=a*d+F*I+i*u+t[14],e[15]=s*d+l*I+c*u+t[15]),e}function l(e,t,n){var Q=n[0],B=n[1],a=n[2];return e[0]=t[0]*Q,e[1]=t[1]*Q,e[2]=t[2]*Q,e[3]=t[3]*Q,e[4]=t[4]*B,e[5]=t[5]*B,e[6]=t[6]*B,e[7]=t[7]*B,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(e,t,n,B){var a,s,r,U,F,l,o,g,i,c,d,I,u,C,m,b,S,y,Z,x,G,V,R,L,p=B[0],h=B[1],N=B[2],D=Math.hypot(p,h,N);return D<Q.b?null:(p*=D=1/D,h*=D,N*=D,a=Math.sin(n),r=1-(s=Math.cos(n)),U=t[0],F=t[1],l=t[2],o=t[3],g=t[4],i=t[5],c=t[6],d=t[7],I=t[8],u=t[9],C=t[10],m=t[11],b=p*p*r+s,S=h*p*r+N*a,y=N*p*r-h*a,Z=p*h*r-N*a,x=h*h*r+s,G=N*h*r+p*a,V=p*N*r+h*a,R=h*N*r-p*a,L=N*N*r+s,e[0]=U*b+g*S+I*y,e[1]=F*b+i*S+u*y,e[2]=l*b+c*S+C*y,e[3]=o*b+d*S+m*y,e[4]=U*Z+g*x+I*G,e[5]=F*Z+i*x+u*G,e[6]=l*Z+c*x+C*G,e[7]=o*Z+d*x+m*G,e[8]=U*V+g*R+I*L,e[9]=F*V+i*R+u*L,e[10]=l*V+c*R+C*L,e[11]=o*V+d*R+m*L,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function g(e,t,n){var Q=Math.sin(n),B=Math.cos(n),a=t[4],s=t[5],r=t[6],U=t[7],F=t[8],l=t[9],o=t[10],g=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*B+F*Q,e[5]=s*B+l*Q,e[6]=r*B+o*Q,e[7]=U*B+g*Q,e[8]=F*B-a*Q,e[9]=l*B-s*Q,e[10]=o*B-r*Q,e[11]=g*B-U*Q,e}function i(e,t,n){var Q=Math.sin(n),B=Math.cos(n),a=t[0],s=t[1],r=t[2],U=t[3],F=t[8],l=t[9],o=t[10],g=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*B-F*Q,e[1]=s*B-l*Q,e[2]=r*B-o*Q,e[3]=U*B-g*Q,e[8]=a*Q+F*B,e[9]=s*Q+l*B,e[10]=r*Q+o*B,e[11]=U*Q+g*B,e}function c(e,t,n){var Q=Math.sin(n),B=Math.cos(n),a=t[0],s=t[1],r=t[2],U=t[3],F=t[4],l=t[5],o=t[6],g=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*B+F*Q,e[1]=s*B+l*Q,e[2]=r*B+o*Q,e[3]=U*B+g*Q,e[4]=F*B-a*Q,e[5]=l*B-s*Q,e[6]=o*B-r*Q,e[7]=g*B-U*Q,e}function d(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function I(e,t,n){var B,a,s,r=n[0],U=n[1],F=n[2],l=Math.hypot(r,U,F);return l<Q.b?null:(r*=l=1/l,U*=l,F*=l,B=Math.sin(t),s=1-(a=Math.cos(t)),e[0]=r*r*s+a,e[1]=U*r*s+F*B,e[2]=F*r*s-U*B,e[3]=0,e[4]=r*U*s-F*B,e[5]=U*U*s+a,e[6]=F*U*s+r*B,e[7]=0,e[8]=r*F*s+U*B,e[9]=U*F*s-r*B,e[10]=F*F*s+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function u(e,t,n){var Q=t[0],B=t[1],a=t[2],s=t[3],r=Q+Q,U=B+B,F=a+a,l=Q*r,o=Q*U,g=Q*F,i=B*U,c=B*F,d=a*F,I=s*r,u=s*U,C=s*F;return e[0]=1-(i+d),e[1]=o+C,e[2]=g-u,e[3]=0,e[4]=o-C,e[5]=1-(l+d),e[6]=c+I,e[7]=0,e[8]=g+u,e[9]=c-I,e[10]=1-(l+i),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function C(e,t){var n=t[0],Q=t[1],B=t[2],a=t[4],s=t[5],r=t[6],U=t[8],F=t[9],l=t[10];return e[0]=Math.hypot(n,Q,B),e[1]=Math.hypot(a,s,r),e[2]=Math.hypot(U,F,l),e}function m(e,t){var n=new Q.a(3);C(n,t);var B=1/n[0],a=1/n[1],s=1/n[2],r=t[0]*B,U=t[1]*a,F=t[2]*s,l=t[4]*B,o=t[5]*a,g=t[6]*s,i=t[8]*B,c=t[9]*a,d=t[10]*s,I=r+o+d,u=0;return I>0?(u=2*Math.sqrt(I+1),e[3]=.25*u,e[0]=(g-c)/u,e[1]=(i-F)/u,e[2]=(U-l)/u):r>o&&r>d?(u=2*Math.sqrt(1+r-o-d),e[3]=(g-c)/u,e[0]=.25*u,e[1]=(U+l)/u,e[2]=(i+F)/u):o>d?(u=2*Math.sqrt(1+o-r-d),e[3]=(i-F)/u,e[0]=(U+l)/u,e[1]=.25*u,e[2]=(g+c)/u):(u=2*Math.sqrt(1+d-r-o),e[3]=(U-l)/u,e[0]=(i+F)/u,e[1]=(g+c)/u,e[2]=.25*u),e}function b(e,t,n,Q){var B=t[0],a=t[1],s=t[2],r=t[3],U=B+B,F=a+a,l=s+s,o=B*U,g=B*F,i=B*l,c=a*F,d=a*l,I=s*l,u=r*U,C=r*F,m=r*l,b=Q[0],S=Q[1],y=Q[2];return e[0]=(1-(c+I))*b,e[1]=(g+m)*b,e[2]=(i-C)*b,e[3]=0,e[4]=(g-m)*S,e[5]=(1-(o+I))*S,e[6]=(d+u)*S,e[7]=0,e[8]=(i+C)*y,e[9]=(d-u)*y,e[10]=(1-(o+c))*y,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function S(e,t){var n=t[0],Q=t[1],B=t[2],a=t[3],s=n+n,r=Q+Q,U=B+B,F=n*s,l=Q*s,o=Q*r,g=B*s,i=B*r,c=B*U,d=a*s,I=a*r,u=a*U;return e[0]=1-o-c,e[1]=l+u,e[2]=g-I,e[3]=0,e[4]=l-u,e[5]=1-F-c,e[6]=i+d,e[7]=0,e[8]=g+I,e[9]=i-d,e[10]=1-F-o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function y(e,t,n,Q,B,a,s){var r=1/(t-n),U=1/(Q-B),F=1/(a-s);return e[0]=-2*r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*U,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*F,e[11]=0,e[12]=(t+n)*r,e[13]=(B+Q)*U,e[14]=(s+a)*F,e[15]=1,e}function Z(e,t,n,B){var s,r,U,F,l,o,g,i,c,d,I=t[0],u=t[1],C=t[2],m=B[0],b=B[1],S=B[2],y=n[0],Z=n[1],x=n[2];return Math.abs(I-y)<Q.b&&Math.abs(u-Z)<Q.b&&Math.abs(C-x)<Q.b?a(e):(g=I-y,i=u-Z,c=C-x,s=b*(c*=d=1/Math.hypot(g,i,c))-S*(i*=d),r=S*(g*=d)-m*c,U=m*i-b*g,(d=Math.hypot(s,r,U))?(s*=d=1/d,r*=d,U*=d):(s=0,r=0,U=0),F=i*U-c*r,l=c*s-g*U,o=g*r-i*s,(d=Math.hypot(F,l,o))?(F*=d=1/d,l*=d,o*=d):(F=0,l=0,o=0),e[0]=s,e[1]=F,e[2]=g,e[3]=0,e[4]=r,e[5]=l,e[6]=i,e[7]=0,e[8]=U,e[9]=o,e[10]=c,e[11]=0,e[12]=-(s*I+r*u+U*C),e[13]=-(F*I+l*u+o*C),e[14]=-(g*I+i*u+c*C),e[15]=1,e)}function x(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}var G=U,V=x,R=Object.freeze({__proto__:null,create:function(){var e=new Q.a(16);return Q.a!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},clone:function(e){var t=new Q.a(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:B,fromValues:function(e,t,n,B,a,s,r,U,F,l,o,g,i,c,d,I){var u=new Q.a(16);return u[0]=e,u[1]=t,u[2]=n,u[3]=B,u[4]=a,u[5]=s,u[6]=r,u[7]=U,u[8]=F,u[9]=l,u[10]=o,u[11]=g,u[12]=i,u[13]=c,u[14]=d,u[15]=I,u},set:function(e,t,n,Q,B,a,s,r,U,F,l,o,g,i,c,d,I){return e[0]=t,e[1]=n,e[2]=Q,e[3]=B,e[4]=a,e[5]=s,e[6]=r,e[7]=U,e[8]=F,e[9]=l,e[10]=o,e[11]=g,e[12]=i,e[13]=c,e[14]=d,e[15]=I,e},identity:a,transpose:s,invert:r,adjoint:function(e,t){var n=t[0],Q=t[1],B=t[2],a=t[3],s=t[4],r=t[5],U=t[6],F=t[7],l=t[8],o=t[9],g=t[10],i=t[11],c=t[12],d=t[13],I=t[14],u=t[15];return e[0]=r*(g*u-i*I)-o*(U*u-F*I)+d*(U*i-F*g),e[1]=-(Q*(g*u-i*I)-o*(B*u-a*I)+d*(B*i-a*g)),e[2]=Q*(U*u-F*I)-r*(B*u-a*I)+d*(B*F-a*U),e[3]=-(Q*(U*i-F*g)-r*(B*i-a*g)+o*(B*F-a*U)),e[4]=-(s*(g*u-i*I)-l*(U*u-F*I)+c*(U*i-F*g)),e[5]=n*(g*u-i*I)-l*(B*u-a*I)+c*(B*i-a*g),e[6]=-(n*(U*u-F*I)-s*(B*u-a*I)+c*(B*F-a*U)),e[7]=n*(U*i-F*g)-s*(B*i-a*g)+l*(B*F-a*U),e[8]=s*(o*u-i*d)-l*(r*u-F*d)+c*(r*i-F*o),e[9]=-(n*(o*u-i*d)-l*(Q*u-a*d)+c*(Q*i-a*o)),e[10]=n*(r*u-F*d)-s*(Q*u-a*d)+c*(Q*F-a*r),e[11]=-(n*(r*i-F*o)-s*(Q*i-a*o)+l*(Q*F-a*r)),e[12]=-(s*(o*I-g*d)-l*(r*I-U*d)+c*(r*g-U*o)),e[13]=n*(o*I-g*d)-l*(Q*I-B*d)+c*(Q*g-B*o),e[14]=-(n*(r*I-U*d)-s*(Q*I-B*d)+c*(Q*U-B*r)),e[15]=n*(r*g-U*o)-s*(Q*g-B*o)+l*(Q*U-B*r),e},determinant:function(e){var t=e[0],n=e[1],Q=e[2],B=e[3],a=e[4],s=e[5],r=e[6],U=e[7],F=e[8],l=e[9],o=e[10],g=e[11],i=e[12],c=e[13],d=e[14],I=e[15];return(t*s-n*a)*(o*I-g*d)-(t*r-Q*a)*(l*I-g*c)+(t*U-B*a)*(l*d-o*c)+(n*r-Q*s)*(F*I-g*i)-(n*U-B*s)*(F*d-o*i)+(Q*U-B*r)*(F*c-l*i)},multiply:U,translate:F,scale:l,rotate:o,rotateX:g,rotateY:i,rotateZ:c,fromTranslation:d,fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotation:I,fromXRotation:function(e,t){var n=Math.sin(t),Q=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=Q,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=Q,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromYRotation:function(e,t){var n=Math.sin(t),Q=Math.cos(t);return e[0]=Q,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=Q,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:function(e,t){var n=Math.sin(t),Q=Math.cos(t);return e[0]=Q,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=Q,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotationTranslation:u,fromQuat2:function(e,t){var n=new Q.a(3),B=-t[0],a=-t[1],s=-t[2],r=t[3],U=t[4],F=t[5],l=t[6],o=t[7],g=B*B+a*a+s*s+r*r;return g>0?(n[0]=2*(U*r+o*B+F*s-l*a)/g,n[1]=2*(F*r+o*a+l*B-U*s)/g,n[2]=2*(l*r+o*s+U*a-F*B)/g):(n[0]=2*(U*r+o*B+F*s-l*a),n[1]=2*(F*r+o*a+l*B-U*s),n[2]=2*(l*r+o*s+U*a-F*B)),u(e,t,n),e},getTranslation:function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},getScaling:C,getRotation:m,fromRotationTranslationScale:b,fromRotationTranslationScaleOrigin:function(e,t,n,Q,B){var a=t[0],s=t[1],r=t[2],U=t[3],F=a+a,l=s+s,o=r+r,g=a*F,i=a*l,c=a*o,d=s*l,I=s*o,u=r*o,C=U*F,m=U*l,b=U*o,S=Q[0],y=Q[1],Z=Q[2],x=B[0],G=B[1],V=B[2],R=(1-(d+u))*S,L=(i+b)*S,p=(c-m)*S,h=(i-b)*y,N=(1-(g+u))*y,D=(I+C)*y,A=(c+m)*Z,E=(I-C)*Z,f=(1-(g+d))*Z;return e[0]=R,e[1]=L,e[2]=p,e[3]=0,e[4]=h,e[5]=N,e[6]=D,e[7]=0,e[8]=A,e[9]=E,e[10]=f,e[11]=0,e[12]=n[0]+x-(R*x+h*G+A*V),e[13]=n[1]+G-(L*x+N*G+E*V),e[14]=n[2]+V-(p*x+D*G+f*V),e[15]=1,e},fromQuat:S,frustum:function(e,t,n,Q,B,a,s){var r=1/(n-t),U=1/(B-Q),F=1/(a-s);return e[0]=2*a*r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*U,e[6]=0,e[7]=0,e[8]=(n+t)*r,e[9]=(B+Q)*U,e[10]=(s+a)*F,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*a*2*F,e[15]=0,e},perspective:function(e,t,n,Q,B){var a,s=1/Math.tan(t/2);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=B&&B!==1/0?(a=1/(Q-B),e[10]=(B+Q)*a,e[14]=2*B*Q*a):(e[10]=-1,e[14]=-2*Q),e},perspectiveFromFieldOfView:function(e,t,n,Q){var B=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),r=Math.tan(t.rightDegrees*Math.PI/180),U=2/(s+r),F=2/(B+a);return e[0]=U,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=F,e[6]=0,e[7]=0,e[8]=-(s-r)*U*.5,e[9]=(B-a)*F*.5,e[10]=Q/(n-Q),e[11]=-1,e[12]=0,e[13]=0,e[14]=Q*n/(n-Q),e[15]=0,e},ortho:y,lookAt:Z,targetTo:function(e,t,n,Q){var B=t[0],a=t[1],s=t[2],r=Q[0],U=Q[1],F=Q[2],l=B-n[0],o=a-n[1],g=s-n[2],i=l*l+o*o+g*g;i>0&&(l*=i=1/Math.sqrt(i),o*=i,g*=i);var c=U*g-F*o,d=F*l-r*g,I=r*o-U*l;return(i=c*c+d*d+I*I)>0&&(c*=i=1/Math.sqrt(i),d*=i,I*=i),e[0]=c,e[1]=d,e[2]=I,e[3]=0,e[4]=o*I-g*d,e[5]=g*c-l*I,e[6]=l*d-o*c,e[7]=0,e[8]=l,e[9]=o,e[10]=g,e[11]=0,e[12]=B,e[13]=a,e[14]=s,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},subtract:x,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},multiplyScalarAndAdd:function(e,t,n,Q){return e[0]=t[0]+n[0]*Q,e[1]=t[1]+n[1]*Q,e[2]=t[2]+n[2]*Q,e[3]=t[3]+n[3]*Q,e[4]=t[4]+n[4]*Q,e[5]=t[5]+n[5]*Q,e[6]=t[6]+n[6]*Q,e[7]=t[7]+n[7]*Q,e[8]=t[8]+n[8]*Q,e[9]=t[9]+n[9]*Q,e[10]=t[10]+n[10]*Q,e[11]=t[11]+n[11]*Q,e[12]=t[12]+n[12]*Q,e[13]=t[13]+n[13]*Q,e[14]=t[14]+n[14]*Q,e[15]=t[15]+n[15]*Q,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},equals:function(e,t){var n=e[0],B=e[1],a=e[2],s=e[3],r=e[4],U=e[5],F=e[6],l=e[7],o=e[8],g=e[9],i=e[10],c=e[11],d=e[12],I=e[13],u=e[14],C=e[15],m=t[0],b=t[1],S=t[2],y=t[3],Z=t[4],x=t[5],G=t[6],V=t[7],R=t[8],L=t[9],p=t[10],h=t[11],N=t[12],D=t[13],A=t[14],E=t[15];return Math.abs(n-m)<=Q.b*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(B-b)<=Q.b*Math.max(1,Math.abs(B),Math.abs(b))&&Math.abs(a-S)<=Q.b*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(s-y)<=Q.b*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(r-Z)<=Q.b*Math.max(1,Math.abs(r),Math.abs(Z))&&Math.abs(U-x)<=Q.b*Math.max(1,Math.abs(U),Math.abs(x))&&Math.abs(F-G)<=Q.b*Math.max(1,Math.abs(F),Math.abs(G))&&Math.abs(l-V)<=Q.b*Math.max(1,Math.abs(l),Math.abs(V))&&Math.abs(o-R)<=Q.b*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(g-L)<=Q.b*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(i-p)<=Q.b*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(c-h)<=Q.b*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(d-N)<=Q.b*Math.max(1,Math.abs(d),Math.abs(N))&&Math.abs(I-D)<=Q.b*Math.max(1,Math.abs(I),Math.abs(D))&&Math.abs(u-A)<=Q.b*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(C-E)<=Q.b*Math.max(1,Math.abs(C),Math.abs(E))},mul:G,sub:V})},function(e,t,n){"use strict";var Q=n(35),B=function(e){if(Array.isArray(e))return Object(Q.a)(e)},a=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},s=n(36),r=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};t.a=function(e){return B(e)||a(e)||Object(s.a)(e)||r()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return F})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return I})),n.d(t,"f",(function(){return Z})),n.d(t,"g",(function(){return U})),n.d(t,"h",(function(){return x})),n.d(t,"i",(function(){return u})),n.d(t,"j",(function(){return a})),n.d(t,"k",(function(){return o})),n.d(t,"l",(function(){return C})),n.d(t,"m",(function(){return y})),n.d(t,"n",(function(){return B})),n.d(t,"o",(function(){return s})),n.d(t,"p",(function(){return r})),n.d(t,"q",(function(){return S})),n.d(t,"r",(function(){return E}));var Q=n(19);function B(){var e=new Q.a(3);return Q.a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function a(e){var t=e[0],n=e[1],Q=e[2];return Math.hypot(t,n,Q)}function s(e,t,n){var B=new Q.a(3);return B[0]=e,B[1]=t,B[2]=n,B}function r(e,t,n,Q){return e[0]=t,e[1]=n,e[2]=Q,e}function U(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function F(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function l(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function o(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function g(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function i(e,t){var n=t[0]-e[0],Q=t[1]-e[1],B=t[2]-e[2];return Math.hypot(n,Q,B)}function c(e,t){var n=t[0]-e[0],Q=t[1]-e[1],B=t[2]-e[2];return n*n+Q*Q+B*B}function d(e){var t=e[0],n=e[1],Q=e[2];return t*t+n*n+Q*Q}function I(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function u(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function C(e,t){var n=t[0],Q=t[1],B=t[2],a=n*n+Q*Q+B*B;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function m(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function b(e,t,n){var Q=t[0],B=t[1],a=t[2],s=n[0],r=n[1],U=n[2];return e[0]=B*U-a*r,e[1]=a*s-Q*U,e[2]=Q*r-B*s,e}function S(e,t,n){var Q=t[0],B=t[1],a=t[2],s=n[3]*Q+n[7]*B+n[11]*a+n[15];return s=s||1,e[0]=(n[0]*Q+n[4]*B+n[8]*a+n[12])/s,e[1]=(n[1]*Q+n[5]*B+n[9]*a+n[13])/s,e[2]=(n[2]*Q+n[6]*B+n[10]*a+n[14])/s,e}function y(e,t,n){var Q=t[0],B=t[1],a=t[2];return e[0]=Q*n[0]+B*n[3]+a*n[6],e[1]=Q*n[1]+B*n[4]+a*n[7],e[2]=Q*n[2]+B*n[5]+a*n[8],e}function Z(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function x(e,t){var n=e[0],B=e[1],a=e[2],s=t[0],r=t[1],U=t[2];return Math.abs(n-s)<=Q.b*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(B-r)<=Q.b*Math.max(1,Math.abs(B),Math.abs(r))&&Math.abs(a-U)<=Q.b*Math.max(1,Math.abs(a),Math.abs(U))}var G,V=F,R=l,L=o,p=i,h=c,N=a,D=d,A=(G=B(),function(e,t,n,Q,B,a){var s,r;for(t||(t=3),n||(n=0),r=Q?Math.min(Q*t+n,e.length):e.length,s=n;s<r;s+=t)G[0]=e[s],G[1]=e[s+1],G[2]=e[s+2],B(G,G,a),e[s]=G[0],e[s+1]=G[1],e[s+2]=G[2];return e}),E=Object.freeze({__proto__:null,create:B,clone:function(e){var t=new Q.a(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},length:a,fromValues:s,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:r,add:U,subtract:F,multiply:l,divide:o,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:g,scaleAndAdd:function(e,t,n,Q){return e[0]=t[0]+n[0]*Q,e[1]=t[1]+n[1]*Q,e[2]=t[2]+n[2]*Q,e},distance:i,squaredDistance:c,squaredLength:d,negate:I,inverse:u,normalize:C,dot:m,cross:b,lerp:function(e,t,n,Q){var B=t[0],a=t[1],s=t[2];return e[0]=B+Q*(n[0]-B),e[1]=a+Q*(n[1]-a),e[2]=s+Q*(n[2]-s),e},hermite:function(e,t,n,Q,B,a){var s=a*a,r=s*(2*a-3)+1,U=s*(a-2)+a,F=s*(a-1),l=s*(3-2*a);return e[0]=t[0]*r+n[0]*U+Q[0]*F+B[0]*l,e[1]=t[1]*r+n[1]*U+Q[1]*F+B[1]*l,e[2]=t[2]*r+n[2]*U+Q[2]*F+B[2]*l,e},bezier:function(e,t,n,Q,B,a){var s=1-a,r=s*s,U=a*a,F=r*s,l=3*a*r,o=3*U*s,g=U*a;return e[0]=t[0]*F+n[0]*l+Q[0]*o+B[0]*g,e[1]=t[1]*F+n[1]*l+Q[1]*o+B[1]*g,e[2]=t[2]*F+n[2]*l+Q[2]*o+B[2]*g,e},random:function(e,t){t=t||1;var n=2*Object(Q.c)()*Math.PI,B=2*Object(Q.c)()-1,a=Math.sqrt(1-B*B)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=B*t,e},transformMat4:S,transformMat3:y,transformQuat:function(e,t,n){var Q=n[0],B=n[1],a=n[2],s=n[3],r=t[0],U=t[1],F=t[2],l=B*F-a*U,o=a*r-Q*F,g=Q*U-B*r,i=B*g-a*o,c=a*l-Q*g,d=Q*o-B*l,I=2*s;return l*=I,o*=I,g*=I,i*=2,c*=2,d*=2,e[0]=r+l+i,e[1]=U+o+c,e[2]=F+g+d,e},rotateX:function(e,t,n,Q){var B=[],a=[];return B[0]=t[0]-n[0],B[1]=t[1]-n[1],B[2]=t[2]-n[2],a[0]=B[0],a[1]=B[1]*Math.cos(Q)-B[2]*Math.sin(Q),a[2]=B[1]*Math.sin(Q)+B[2]*Math.cos(Q),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},rotateY:function(e,t,n,Q){var B=[],a=[];return B[0]=t[0]-n[0],B[1]=t[1]-n[1],B[2]=t[2]-n[2],a[0]=B[2]*Math.sin(Q)+B[0]*Math.cos(Q),a[1]=B[1],a[2]=B[2]*Math.cos(Q)-B[0]*Math.sin(Q),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},rotateZ:function(e,t,n,Q){var B=[],a=[];return B[0]=t[0]-n[0],B[1]=t[1]-n[1],B[2]=t[2]-n[2],a[0]=B[0]*Math.cos(Q)-B[1]*Math.sin(Q),a[1]=B[0]*Math.sin(Q)+B[1]*Math.cos(Q),a[2]=B[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},angle:function(e,t){var n=e[0],Q=e[1],B=e[2],a=t[0],s=t[1],r=t[2],U=Math.sqrt(n*n+Q*Q+B*B)*Math.sqrt(a*a+s*s+r*r),F=U&&m(e,t)/U;return Math.acos(Math.min(Math.max(F,-1),1))},zero:function(e){return e[0]=0,e[1]=0,e[2]=0,e},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:Z,equals:x,sub:V,mul:R,div:L,dist:p,sqrDist:h,len:N,sqrLen:D,forEach:A})},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return Q})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return B}));var Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function B(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var Q=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,Q.get?Q:{enumerable:!0,get:function(){return e[n]}})})),t}function a(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return c(e,null==t?n.path:t)}},n.exports),n.exports}function s(e,t){r[e]=t}const r=Object.create(null),U=Object.create(null),F={id:"<rollup>",exports:{},parent:void 0,filename:null,loaded:!1,children:[],paths:[]},l=["",".js",".json"];function o(e){const t=(e=e.replace(/\\/g,"/")).split("/"),n=""===t[0];for(let e=1;e<t.length;e++)"."!==t[e]&&""!==t[e]||t.splice(e--,1);for(let e=1;e<t.length;e++)".."===t[e]&&e>0&&".."!==t[e-1]&&"."!==t[e-1]&&(t.splice(--e,2),e--);return e=t.join("/"),n&&"/"!==e[0]?e="/"+e:0===e.length&&(e="."),e}function g(){if(0===arguments.length)return".";let e;for(let t=0;t<arguments.length;++t){let n=arguments[t];n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":e}function i(e){if(0===e.length)return".";let t=e.length-1;for(;t>0;){const n=e.charCodeAt(t);if((47===n||92===n)&&t!==e.length-1)break;t--}return t>0?e.substr(0,t):47===e.chartCodeAt(0)||92===e.chartCodeAt(0)?e.charAt(0):"."}function c(e,t){const B=function(e){let t=e[0];if("/"===t||"\\"===t)return!1;let n=e[1],Q=e[2];return!(!("."!==t||n&&"/"!==n&&"\\"!==n)||!("."!==t||"."!==n||Q&&"/"!==Q&&"\\"!==Q))&&(":"!==n||"/"!==Q&&"\\"!==Q)}(e);let a;for(e=o(e);;){a=B?o(t?t+"/node_modules/"+e:g("node_modules",e)):t?o(t+"/"+e):e;for(let e=0;e<l.length;e++){const t=a+l[e];let n=U[t];if(n)return n.exports;const B=r[t];if(B){U[t]=n={id:t,filename:t,path:i(t),exports:{},parent:F,loaded:!1,children:[],paths:[],require:function(e,t){return c(e,null==t?n.path:t)}};try{B.call(Q,n,n.exports)}catch(e){throw delete U[t],e}return n.loaded=!0,n.exports}}if(!B)break;const n=o(t+"/..");if(n===t)break;t=n}return n(43)(e)}c.cache=U}).call(this,n(23))},function(e,t,n){"use strict";var Q=n(5),B=(n(3),n(16)),a=n(4),s=n(30),r=n(9),U=n(6),F=n(22);function l(e,t){t.classHierarchy.push("vtkCell"),e.initialize=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n){t.pointsIds=n;var Q=t.points.getData();Q.length!==3*t.pointsIds.length&&(Q=new(window[e.getDataType()])(3*t.pointsIds.length));var B=e.getData();t.pointsIds.forEach((function(e,t){var n=3*e,a=3*t;Q[a]=B[n],Q[++a]=B[++n],Q[++a]=B[++n]})),t.points.setData(Q)}else{t.points=e,t.pointsIds=new Array(e.getNumberOfPoints());for(var a=e.getNumberOfPoints()-1;a>=0;--a)t.pointsIds[a]=a}},e.getBounds=function(){var e=t.points.getNumberOfPoints(),n=[];if(e){t.points.getPoint(0,n),t.bounds[0]=n[0],t.bounds[1]=n[0],t.bounds[2]=n[1],t.bounds[3]=n[1],t.bounds[4]=n[2],t.bounds[5]=n[2];for(var Q=1;Q<e;Q++)t.points.getPoint(Q,n),t.bounds[0]=n[0]<t.bounds[0]?n[0]:t.bounds[0],t.bounds[1]=n[0]>t.bounds[1]?n[0]:t.bounds[1],t.bounds[2]=n[1]<t.bounds[2]?n[1]:t.bounds[2],t.bounds[3]=n[1]>t.bounds[3]?n[1]:t.bounds[3],t.bounds[4]=n[2]<t.bounds[4]?n[2]:t.bounds[4],t.bounds[5]=n[2]>t.bounds[5]?n[2]:t.bounds[5]}else Object(U.D)(t.bounds);return t.bounds},e.getLength2=function(){e.getBounds();for(var n=0,Q=0,B=0;B<3;B++)n+=(Q=t.bounds[2*B+1]-t.bounds[2*B])*Q;return n},e.getParametricDistance=function(e){for(var t,n=0,Q=0;Q<3;Q++)(t=e[Q]<0?-e[Q]:e[Q]>1?e[Q]-1:0)>n&&(n=t);return n},e.getNumberOfPoints=function(){return t.points.getNumberOfPoints()},e.deepCopy=function(e){e.initialize(t.points,t.pointsIds)},e.getCellDimension=function(){},e.intersectWithLine=function(e,t,n,Q,B,a,s){},e.evaluatePosition=function(e,t,n,Q,B,a){}}var o={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,o,n),a.c.obj(e,t),t.points||(t.points=F.a.newInstance()),a.c.get(e,t,["points","pointsIds"]),l(e,t)}var i={newInstance:a.c.newInstance(g,"vtkCell"),extend:g};function c(e,t){t.classHierarchy.push("vtkCellLinks"),e.buildLinks=function(n){var Q=n.getPoints().getNumberOfPoints(),B=n.getNumberOfCells(),a=new Uint32Array(Q);if(n.isA("vtkPolyData")){for(var s=0;s<B;++s)n.getCellPoints(s).cellPointIds.forEach((function(t){e.incrementLinkCount(t)}));e.allocateLinks(Q),t.maxId=Q-1;for(var r=function(t){n.getCellPoints(t).cellPointIds.forEach((function(n){e.insertCellReference(n,a[n]++,t)}))},U=0;U<B;++U)r(U)}else{for(var F=0;F<B;F++)i.newInstance().getPointsIds().forEach((function(t){e.incrementLinkCount(t)}));e.allocateLinks(Q),t.maxId=Q-1;for(var l=function(t){i.newInstance().getPointsIds().forEach((function(n){e.insertCellReference(n,a[n]++,t)}))},o=0;o<B;++o)l(o)}},e.allocate=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.array=Array(e).fill().map((function(){return{ncells:0,cells:null}})),t.extend=n,t.maxId=-1},e.initialize=function(){t.array=null},e.getLink=function(e){return t.array[e]},e.getNcells=function(e){return t.array[e].ncells},e.getCells=function(e){return t.array[e].cells},e.insertNextPoint=function(e){t.array.push({ncells:e,cells:Array(e)}),++t.maxId},e.insertNextCellReference=function(e,n){t.array[e].cells[t.array[e].ncells++]=n},e.deletePoint=function(e){t.array[e].ncells=0,t.array[e].cells=null},e.removeCellReference=function(e,n){t.array[n].cells=t.array[n].cells.filter((function(t){return t!==e})),t.array[n].ncells=t.array[n].cells.length},e.addCellReference=function(e,n){t.array[n].cells[t.array[n].ncells++]=e},e.resizeCellList=function(e,n){t.array[e].cells.length=n},e.squeeze=function(){!function(e,t){var n=t;for(t>=e.array.length&&(n+=e.array.length);n>e.array.length;)e.array.push({ncells:0,cells:null});e.array.length=n}(t,t.maxId+1)},e.reset=function(){t.maxId=-1},e.deepCopy=function(e){t.array=Object(r.a)(e.array),t.extend=e.extend,t.maxId=e.maxId},e.incrementLinkCount=function(e){++t.array[e].ncells},e.allocateLinks=function(e){for(var n=0;n<e;++n)t.array[n].cells=new Array(t.array[n].ncells)},e.insertCellReference=function(e,n,Q){t.array[e].cells[n]=Q}}var d={array:null,maxId:0,extend:0};function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d,n),a.c.obj(e,t),c(e,t)}var u={newInstance:a.c.newInstance(I,"vtkCellLinks"),extend:I},C=0,m=1,b=2,S=3,y=4,Z=5,x=6,G=7,V=9,R=21,L=41,p=42,h=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var D={getClassNameFromTypeId:function(e){return e<h.length?h[e]:"UnknownClass"},getTypeIdFromClassName:function(e){return h.findIndex(e)},isLinear:function(e){return e<R||e===L||e===p}};function A(e,t){t.classHierarchy.push("vtkCellTypes"),e.allocate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.size=e>0?e:1,t.extend=n>0?n:1,t.maxId=-1,t.typeArray=new Uint8Array(e),t.locationArray=new Uint32Array(e)},e.insertCell=function(e,n,Q){t.typeArray[e]=n,t.locationArray[e]=Q,e>t.maxId&&(t.maxId=e)},e.insertNextCell=function(n,Q){return e.insertCell(++t.maxId,n,Q),t.maxId},e.setCellTypes=function(e,n,Q){t.size=e,t.typeArray=n,t.locationArray=Q,t.maxId=e-1},e.getCellLocation=function(e){return t.locationArray[e]},e.deleteCell=function(e){t.typeArray[e]=C},e.getNumberOfTypes=function(){return t.maxId+1},e.isType=function(t){for(var n=e.getNumberOfTypes(),Q=0;Q<n;++Q)if(t===e.getCellType(Q))return!0;return!1},e.insertNextType=function(t){return e.insertNextCell(t,-1)},e.getCellType=function(e){return t.typeArray[e]},e.reset=function(){t.maxId=-1},e.deepCopy=function(n){e.allocate(n.getSize(),n.getExtend()),t.typeArray.set(n.getTypeArray()),t.locationArray.set(n.getLocationArray()),t.maxId=n.getMaxId()}}var E={size:0,maxId:-1,extend:1e3};function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,E,n),a.c.obj(e,t),a.c.get(e,t,["size","maxId","extend"]),a.c.getArray(e,t,["typeArray","locationArray"]),A(e,t)}var J=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(Q.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(f,"vtkCellTypes"),extend:f},D),v={IntersectionState:{NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2}};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Object(Q.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=v.IntersectionState;function k(e,t,n){var Q,B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a={t:Number.MIN_VALUE,distance:0},s=[];s[0]=n[0]-t[0],s[1]=n[1]-t[1],s[2]=n[2]-t[2];var r=s[0]*(e[0]-t[0])+s[1]*(e[1]-t[1])+s[2]*(e[2]-t[2]),F=Object(U.q)(s,s),l=1e-5*r;return 0!==F&&(a.t=r/F),l<0&&(l=-l),-l<F&&F<l||F<=0||a.t<0?Q=t:a.t>1?Q=n:(Q=s,s[0]=t[0]+a.t*s[0],s[1]=t[1]+a.t*s[1],s[2]=t[2]+a.t*s[2]),B&&(B[0]=Q[0],B[1]=Q[1],B[2]=Q[2]),a.distance=Object(U.s)(Q,e),a}function T(e,t,n,Q,B,a){var s=[],r=[],F=[];B[0]=0,a[0]=0,s[0]=t[0]-e[0],s[1]=t[1]-e[1],s[2]=t[2]-e[2],r[0]=Q[0]-n[0],r[1]=Q[1]-n[1],r[2]=Q[2]-n[2],F[0]=n[0]-e[0],F[1]=n[1]-e[1],F[2]=n[2]-e[2];var l=[];l[0]=[Object(U.q)(s,s),-Object(U.q)(s,r)],l[1]=[l[0][1],Object(U.q)(r,r)];var o=[];if(o[0]=Object(U.q)(s,F),o[1]=-Object(U.q)(r,F),0===Object(U.C)(l,o,2)){for(var g,i=Number.MAX_VALUE,c=[e,t,n,Q],d=[n,n,e,e],I=[Q,Q,t,t],u=[a[0],a[0],B[0],B[0]],C=[B[0],B[0],a[0],a[0]],m=0;m<4;m++)(g=k(c[m],d[m],I[m])).distance<i&&(i=g.distance,u[m]=g.t,C[m]=m%2);return H.ON_LINE}return B[0]=o[0],a[0]=o[1],B[0]>=0&&B[0]<=1&&a[0]>=0&&a[0]<=1?H.YES_INTERSECTION:H.NO_INTERSECTION}var M={distanceToLine:k,intersection:T};function Y(e,t){t.classHierarchy.push("vtkLine"),e.getCellDimension=function(){return 1},e.intersectWithLine=function(e,n,Q,B,a){var s={intersect:0,t:Number.MIN_VALUE,subId:0};a[1]=0,a[2]=0;var r=[],F=[],l=[];t.points.getPoint(0,F),t.points.getPoint(1,l);var o=[],g=[],i=T(e,n,F,l,o,g);if(s.t=o[0],a[0]=g[0],i===H.YES_INTERSECTION){for(var c=0;c<3;c++)B[c]=F[c]+a[0]*(l[c]-F[c]),r[c]=e[c]+s.t*(n[c]-e[c]);if(Object(U.s)(B,r)<=Q*Q)return s.intersect=1,s}else{var d;if(s.t<0)return s.t=0,d=k(e,F,l,B),a[0]=d.t,d.distance<=Q*Q?(s.intersect=1,s):s;if(s.t>1)return s.t=1,d=k(n,F,l,B),a[0]=d.t,d.distance<=Q*Q?(s.intersect=1,s):s;if(a[0]<0)return a[0]=0,d=k(F,e,n,B),s.t=d.t,d.distance<=Q*Q?(s.intersect=1,s):s;if(a[1]>1)return a[1]=1,d=k(l,e,n,B),s.t=d.t,d.distance<=Q*Q?(s.intersect=1,s):s}return s},e.evaluatePosition=function(e,t,n,Q,B,a){}}var w={};function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,w,n),i.extend(e,t,n),Y(e,t)}var z=X(X({newInstance:a.c.newInstance(O,"vtkLine"),extend:O},M),v),P=n(25);function K(e,t){t.classHierarchy.push("vtkPointSet"),t.points?t.points=Object(B.a)(t.points):t.points=F.a.newInstance(),e.getNumberOfPoints=function(){return t.points.getNumberOfPoints()},e.getBounds=function(){return t.points.getBounds()},e.computeBounds=function(){e.getBounds()};var n=e.shallowCopy;e.shallowCopy=function(e){var Q=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,Q),t.points=F.a.newInstance(),t.points.shallowCopy(e.getPoints())}}var j={};function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,j,n),P.a.extend(e,t,n),a.c.setGet(e,t,["points"]),K(e,t)}var q={newInstance:a.c.newInstance(_,"vtkPointSet"),extend:_},$=n(33);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function te(e,t,n,Q){var B=n[0]-t[0],a=n[1]-t[1],s=n[2]-t[2],r=e[0]-t[0],U=e[1]-t[1],F=e[2]-t[2];Q[0]=a*F-s*U,Q[1]=s*r-B*F,Q[2]=B*U-a*r}function ne(e,t,n,Q){te(e,t,n,Q);var B=Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1]+Q[2]*Q[2]);0!==B&&(Q[0]/=B,Q[1]/=B,Q[2]/=B)}var Qe={computeNormalDirection:te,computeNormal:ne};function Be(e,t){t.classHierarchy.push("vtkTriangle"),e.getCellDimension=function(){return 2},e.intersectWithLine=function(n,Q,B,a,s){var r={subId:0,t:0,intersect:-1};s[2]=0;var F=B*B,l=[],o=[],g=[];t.points.getPoint(0,l),t.points.getPoint(1,o),t.points.getPoint(2,g);var i=[];if(ne(l,o,g,i),0!==i[0]||0!==i[1]||0!==i[2]){var c=$.a.intersectWithLine(n,Q,l,i);if(r.t=c.t,a[0]=c.x[0],a[1]=c.x[1],a[2]=c.x[2],!c.intersection)return s[0]=0,s[1]=0,r.intersect=0,r;var d=e.evaluatePosition(a,[],s,[]);if(d.evaluation>=0)return d.dist2<=F?(r.intersect=1,r):(r.intersect=d.evaluation,r)}var I=Object(U.s)(l,o),u=Object(U.s)(o,g),C=Object(U.s)(g,l);if(t.line||(t.line=z.newInstance()),I>u&&I>C?(t.line.getPoints().setPoint(0,l),t.line.getPoints().setPoint(1,o)):u>C&&u>I?(t.line.getPoints().setPoint(0,o),t.line.getPoints().setPoint(1,g)):(t.line.getPoints().setPoint(0,g),t.line.getPoints().setPoint(1,l)),t.line.intersectWithLine(n,Q,B,a,s).intersect){for(var m=[],b=[],S=[],y=0;y<3;y++)m[y]=l[y]-g[y],b[y]=o[y]-g[y],S[y]=a[y]-g[y];return s[0]=Object(U.q)(S,m)/C,s[1]=Object(U.q)(S,b)/u,r.evaluation=1,r}return s[0]=0,s[1]=0,r.evaluation=0,r},e.evaluatePosition=function(e,n,Q,B){var a,s,r,F,l,o,g,i={subId:0,dist2:0,evaluation:-1},c=[],d=[],I=[],u=[],C=[],m=[],b=[],S=0,y=[],Z=[],x=[],G=[],V=[];i.subId=0,Q[2]=0,t.points.getPoint(1,c),t.points.getPoint(2,d),t.points.getPoint(0,I),te(c,d,I,u),$.a.generalizedProjectPoint(e,c,u,V);var R=0;for(a=0;a<3;a++)(r=u[a]<0?-u[a]:u[a])>R&&(R=r,S=a);for(s=0,a=0;a<3;a++)a!==S&&(y[s++]=a);for(a=0;a<2;a++)C[a]=V[y[a]]-I[y[a]],m[a]=c[y[a]]-I[y[a]],b[a]=d[y[a]]-I[y[a]];if(0===(F=Object(U.z)(m,b)))return Q[0]=0,Q[1]=0,i.evaluation=-1,i;if(Q[0]=Object(U.z)(C,b)/F,Q[1]=Object(U.z)(m,C)/F,B[0]=1-(Q[0]+Q[1]),B[1]=Q[0],B[2]=Q[1],B[0]>=0&&B[0]<=1&&B[1]>=0&&B[1]<=1&&B[2]>=0&&B[2]<=1)n&&(i.dist2=Object(U.s)(V,e),n[0]=V[0],n[1]=V[1],n[2]=V[2]),i.evaluation=1;else{var L;if(n)if(B[1]<0&&B[2]<0)for(l=Object(U.s)(e,I),o=z.distanceToLine(e,c,I,L,x),g=z.distanceToLine(e,I,d,L,G),l<o?(i.dist2=l,Z=I):(i.dist2=o,Z=x),g<i.dist2&&(i.dist2=g,Z=G),a=0;a<3;a++)n[a]=Z[a];else if(B[2]<0&&B[0]<0)for(l=Object(U.s)(e,c),o=z.distanceToLine(e,c,I,L,x),g=z.distanceToLine(e,c,d,L,G),l<o?(i.dist2=l,Z=c):(i.dist2=o,Z=x),g<i.dist2&&(i.dist2=g,Z=G),a=0;a<3;a++)n[a]=Z[a];else if(B[1]<0&&B[0]<0)for(l=Object(U.s)(e,d),o=z.distanceToLine(e,d,I,L,x),g=z.distanceToLine(e,c,d,L,G),l<o?(i.dist2=l,Z=d):(i.dist2=o,Z=x),g<i.dist2&&(i.dist2=g,Z=G),a=0;a<3;a++)n[a]=Z[a];else if(B[0]<0){var p=z.distanceToLine(e,c,d,n);i.dist2=p.distance}else if(B[1]<0){var h=z.distanceToLine(e,d,I,n);i.dist2=h.distance}else if(B[2]<0){var N=z.distanceToLine(e,c,I,n);i.dist2=N.distance}i.evaluation=0}return i},e.evaluateLocation=function(e,n,Q){var B=[],a=[],s=[];t.points.getPoint(0,B),t.points.getPoint(1,a),t.points.getPoint(2,s);for(var r=1-e[0]-e[1],U=0;U<3;U++)n[U]=B[U]*r+a[U]*e[0]+s[U]*e[1];Q[0]=r,Q[1]=e[0],Q[2]=e[1]},e.getParametricDistance=function(e){var t,n=0,Q=[];Q[0]=e[0],Q[1]=e[1],Q[2]=1-e[0]-e[1];for(var B=0;B<3;B++)(t=Q[B]<0?-Q[B]:Q[B]>1?Q[B]-1:0)>n&&(n=t);return n}}var ae={};function se(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ae,n),i.extend(e,t,n),Be(e,t)}var re,Ue=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){Object(Q.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(se,"vtkTriangle"),extend:se},Qe),Fe=["verts","lines","polys","strips"],le=a.c.vtkWarningMacro,oe=(Object(Q.a)(re={},S,z),Object(Q.a)(re,y,z),Object(Q.a)(re,Z,Ue),re);function ge(e,t){t.classHierarchy.push("vtkPolyData"),Fe.forEach((function(n){var Q;e["getNumberOf".concat((Q=n,Q.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e){return e.toUpperCase()})).replace(/\s+/g,"")))]=function(){return t[n].getNumberOfCells()},t[n]?t[n]=Object(B.a)(t[n]):t[n]=s.a.newInstance()})),e.getNumberOfCells=function(){return Fe.reduce((function(e,n){return e+t[n].getNumberOfCells()}),0)};var n=e.shallowCopy;e.shallowCopy=function(e){var Q=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,Q),Fe.forEach((function(n){t[n]=s.a.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))}))},e.buildCells=function(){var n=e.getNumberOfVerts(),Q=e.getNumberOfLines(),B=e.getNumberOfPolys(),a=e.getNumberOfStrips(),s=n+Q+B+a,r=new Uint8Array(s),U=r,F=new Uint32Array(s),l=F;if(n){var o=0;t.verts.getCellSizes().forEach((function(e,t){l[t]=o,U[t]=e>1?b:m,o+=e+1})),l=l.subarray(n),U=U.subarray(n)}if(Q){var g=0;t.lines.getCellSizes().forEach((function(e,t){l[t]=g,U[t]=e>2?y:S,1===e&&le("Building VTK_LINE ",t," with only one point, but VTK_LINE needs at least two points. Check the input."),g+=e+1})),l=l.subarray(Q),U=U.subarray(Q)}if(B){var i=0;t.polys.getCellSizes().forEach((function(e,t){switch(l[t]=i,e){case 3:U[t]=Z;break;case 4:U[t]=V;break;default:U[t]=G}e<3&&le("Building VTK_TRIANGLE ",t," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),i+=e+1})),l+=l.subarray(B),U+=U.subarray(B)}if(a){var c=0;U.fill(x,0,a),t.strips.getCellSizes().forEach((function(e,t){l[t]=c,c+=e+1}))}t.cells=J.newInstance(),t.cells.setCellTypes(s,r,F)},e.buildLinks=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;void 0===t.cells&&e.buildCells(),t.links=u.newInstance(),n>0?t.links.allocate(n):t.links.allocate(e.getPoints().getNumberOfPoints()),t.links.buildLinks(e)},e.getCellPoints=function(e){var n=t.cells.getCellType(e),Q=null;switch(n){case m:case b:Q=t.verts;break;case S:case y:Q=t.lines;break;case Z:case V:case G:Q=t.polys;break;case x:Q=t.strips;break;default:return Q=null,{type:0,cellPointIds:null}}var B=t.cells.getCellLocation(e);return{cellType:n,cellPointIds:Q.getCell(B)}},e.getPointCells=function(e){return t.links.getCells(e)},e.getCellEdgeNeighbors=function(e,n,Q){var B=t.links.getLink(n),a=t.links.getLink(Q);return B.cells.filter((function(t){return t!==e&&-1!==a.cells.indexOf(t)}))},e.getCell=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Q=e.getCellPoints(t),B=n||oe[Q.cellType].newInstance();return B.initialize(e.getPoints(),Q.cellPointIds),B}}var ie={};function ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ie,n),q.extend(e,t,n),a.c.get(e,t,["cells","links"]),a.c.setGet(e,t,["verts","lines","polys","strips"]),ge(e,t)}var de={newInstance:a.c.newInstance(ce,"vtkPolyData"),extend:ce};t.a=de},function(e,t,n){"use strict";t.a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function Q(e,t){for(var n=0;n<t.length;n++){var Q=t[n];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(e,Q.key,Q)}}t.a=function(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),e}},function(e,t,n){"use strict";var Q=function(e){if(Array.isArray(e))return e},B=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],Q=!0,B=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(Q=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);Q=!0);}catch(e){B=!0,a=e}finally{try{Q||null==r.return||r.return()}finally{if(B)throw a}}return n}},a=n(36),s=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};t.a=function(e,t){return Q(e)||B(e,t)||Object(a.a)(e,t)||s()}},function(e,t,n){"use strict";(function(e){var Q=n(28),B=n(5);n(3);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var s={vtkObject:function(){return null}};function r(t){if(null==t)return t;if(t.isA)return t;if(!t.vtkClass)return e.console&&e.console.error&&e.console.error("Invalid VTK object"),null;var n=s[t.vtkClass];if(!n)return e.console&&e.console.error&&e.console.error("No vtk class found for Object of type ".concat(t.vtkClass)),null;var U=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(B.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);Object.keys(U).forEach((function(e){U[e]&&"object"===Object(Q.a)(U[e])&&U[e].vtkClass&&(U[e]=r(U[e]))}));var F=n(U);return F&&F.modified&&F.modified(),F}r.register=function(e,t){s[e]=t},t.a=r}).call(this,n(23))},function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));n(3);var Q={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},B={DefaultDataType:Q.FLOAT,DataTypeByteSize:{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},VtkDataTypes:Q};t.b=B},function(e,t,n){"use strict";var Q=n(9),B=(n(3),n(6)),a=n(13),s=n(14),r=n(19),U=n(8),F=n(10),l=function(e){return e},o=Object(U.h)(new Float64Array(16)),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(a.a)(this,e),this.matrix=Object(U.h)(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=t?r.d:l}return Object(s.a)(e,[{key:"rotateFromDirections",value:function(e,t){var n=new Float64Array(3),Q=new Float64Array(3),B=new Float64Array(16);Object(F.p)(n,e[0],e[1],e[2]),Object(F.p)(Q,t[0],t[1],t[2]),Object(F.l)(n,n),Object(F.l)(Q,Q);var a=Object(F.d)(n,Q);return a>=1||(Object(F.c)(this.tmp,n,Q),Object(F.j)(this.tmp)<1e-6&&(Object(F.c)(this.tmp,[1,0,0],e),Object(F.j)(this.tmp)<1e-6&&Object(F.c)(this.tmp,[0,1,0],e)),Object(U.f)(B,Math.acos(a),this.tmp),Object(U.l)(this.matrix,this.matrix,B)),this}},{key:"rotate",value:function(e,t){return F.p.apply(F.r,[this.tmp].concat(Object(Q.a)(t))),Object(F.l)(this.tmp,this.tmp),Object(U.q)(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}},{key:"rotateX",value:function(e){return Object(U.a)(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateY",value:function(e){return Object(U.b)(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateZ",value:function(e){return Object(U.c)(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"translate",value:function(e,t,n){return Object(F.p)(this.tmp,e,t,n),Object(U.s)(this.matrix,this.matrix,this.tmp),this}},{key:"scale",value:function(e,t,n){return Object(F.p)(this.tmp,e,t,n),Object(U.r)(this.matrix,this.matrix,this.tmp),this}},{key:"multiply",value:function(e){return Object(U.l)(this.matrix,this.matrix,e),this}},{key:"identity",value:function(){return Object(U.h)(this.matrix),this}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(Object(B.n)(o,this.matrix))return this;for(var Q=-1===n?e.length:t+3*n,a=t;a<Q;a+=3)Object(F.p)(this.tmp,e[a],e[a+1],e[a+2]),Object(F.q)(this.tmp,this.tmp,this.matrix),e[a]=this.tmp[0],e[a+1]=this.tmp[1],e[a+2]=this.tmp[2];return this}},{key:"getMatrix",value:function(){return this.matrix}},{key:"setMatrix",value:function(e){return e&&16===e.length&&Object(U.d)(this.matrix,e),this}}]),e}(),i={buildFromDegree:function(){return new g(!0)},buildFromRadian:function(){return new g(!1)}};t.a=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return B})),n.d(t,"b",(function(){return Q})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r}));var Q=1e-6,B="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random,s=Math.PI/180;function r(e){return e*s}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},function(e,t,n){"use strict";n(3);var Q={};var B={get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Q[e](t)},registerType:function(e,t){Q[e]=t}};t.a=B},function(e,t){var n,Q,B=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function r(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{Q="function"==typeof clearTimeout?clearTimeout:s}catch(e){Q=s}}();var U,F=[],l=!1,o=-1;function g(){l&&U&&(l=!1,U.length?F=U.concat(F):o=-1,F.length&&i())}function i(){if(!l){var e=r(g);l=!0;for(var t=F.length;t;){for(U=F,F=[];++o<t;)U&&U[o].run();o=-1,t=F.length}U=null,l=!1,function(e){if(Q===clearTimeout)return clearTimeout(e);if((Q===s||!Q)&&clearTimeout)return Q=clearTimeout,clearTimeout(e);try{Q(e)}catch(t){try{return Q.call(null,e)}catch(t){return Q.call(this,e)}}}(e)}}function c(e,t){this.fun=e,this.array=t}function d(){}B.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];F.push(new c(e,t)),1!==F.length||l||r(i)},c.prototype.run=function(){this.fun.apply(null,this.array)},B.title="browser",B.browser=!0,B.env={},B.argv=[],B.version="",B.versions={},B.on=d,B.addListener=d,B.once=d,B.off=d,B.removeListener=d,B.removeAllListeners=d,B.emit=d,B.prependListener=d,B.prependOnceListener=d,B.listeners=function(e){return[]},B.binding=function(e){throw new Error("process.binding is not supported")},B.cwd=function(){return"/"},B.chdir=function(e){throw new Error("process.chdir is not supported")},B.umask=function(){return 0}},function(e,t,n){"use strict";n(3);var Q=n(4),B=n(17),a=n(7),s=Q.c.vtkErrorMacro,r=[1,-1,1,-1,1,-1];function U(e,t){t.classHierarchy.push("vtkPoints"),e.getNumberOfPoints=e.getNumberOfTuples,e.setNumberOfPoints=function(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e.getNumberOfPoints()!==n&&(t.size=n*Q,t.values=new window[t.dataType](t.size),e.setNumberOfComponents(Q),e.modified())},e.setPoint=function(e){for(var n=e*t.numberOfComponents,Q=0;Q<t.numberOfComponents;Q++)t.values[n+Q]=Q+1<1||arguments.length<=Q+1?void 0:arguments[Q+1]},e.getPoint=e.getTuple,e.getBounds=function(){if(3===e.getNumberOfComponents()){var n=e.getRange(0);t.bounds[0]=n[0],t.bounds[1]=n[1];var Q=e.getRange(1);t.bounds[2]=Q[0],t.bounds[3]=Q[1];var B=e.getRange(2);return t.bounds[4]=B[0],t.bounds[5]=B[1],t.bounds}if(2!==e.getNumberOfComponents())return s("getBounds called on an array with components of\n        ".concat(e.getNumberOfComponents())),r;var a=e.getRange(0);t.bounds[0]=a[0],t.bounds[1]=a[1];var U=e.getRange(1);return t.bounds[2]=U[0],t.bounds[3]=U[1],t.bounds[4]=0,t.bounds[5]=0,t.bounds},e.computeBounds=e.getBounds,e.setNumberOfComponents(t.numberOfComponents<2?3:t.numberOfComponents)}var F={empty:!0,numberOfComponents:3,dataType:B.a.FLOAT,bounds:[1,-1,1,-1,1,-1]};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,F,n),a.a.extend(e,t,n),U(e,t)}var o={newInstance:Q.c.newInstance(l,"vtkPoints"),extend:l};t.a=o},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var Q={};function B(e,t,n){n||(n=Error);var B=function(e){var n,Q;function B(n,Q,B){return e.call(this,function(e,n,Q){return"string"==typeof t?t:t(e,n,Q)}(n,Q,B))||this}return Q=e,(n=B).prototype=Object.create(Q.prototype),n.prototype.constructor=n,n.__proto__=Q,B}(n);B.prototype.name=n.name,B.prototype.code=e,Q[e]=B}function a(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}B("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),B("ERR_INVALID_ARG_TYPE",(function(e,t,n){var Q,B,s;if("string"==typeof t&&(B="not ",t.substr(0,B.length)===B)?(Q="must not be",t=t.replace(/^not /,"")):Q="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(Q," ").concat(a(t,"type"));else{var r=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+".".length>e.length)&&-1!==e.indexOf(".",n)}(e)?"property":"argument";s='The "'.concat(e,'" ').concat(r," ").concat(Q," ").concat(a(t,"type"))}return s+". Received type ".concat(typeof n)}),TypeError),B("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),B("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),B("ERR_STREAM_PREMATURE_CLOSE","Premature close"),B("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),B("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),B("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),B("ERR_STREAM_WRITE_AFTER_END","write after end"),B("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),B("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),B("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");var s={codes:Q}},function(e,t,n){"use strict";var Q=n(5),B=(n(3),n(16)),a=n(4),s=n(7);function r(e,t){t.classHierarchy.push("vtkFieldData");var n=e.getState;t.arrays&&(t.arrays=t.arrays.map((function(e){return{data:Object(B.a)(e.data)}}))),e.initialize=function(){e.initializeFields(),e.copyAllOn(),e.clearFieldFlags()},e.initializeFields=function(){t.arrays=[],t.copyFieldFlags={},e.modified()},e.copyStructure=function(n){e.initializeFields(),t.copyFieldFlags=n.getCopyFieldFlags().map((function(e){return e})),t.arrays=n.arrays().map((function(e){return{array:e}}))},e.getNumberOfArrays=function(){return t.arrays.length},e.getNumberOfActiveArrays=function(){return t.arrays.length},e.addArray=function(e){return t.arrays=[].concat(t.arrays,{data:e}),t.arrays.length-1},e.removeAllArrays=function(){t.arrays=[]},e.removeArray=function(e){t.arrays=t.arrays.filter((function(t){return e!==t.data.getName()}))},e.removeArrayByIndex=function(e){t.arrays=t.arrays.filter((function(t,n){return n!==e}))},e.getArrays=function(){return t.arrays.map((function(e){return e.data}))},e.getArray=function(t){return"number"==typeof t?e.getArrayByIndex(t):e.getArrayByName(t)},e.getArrayByName=function(e){return t.arrays.reduce((function(t,n,Q){return n.data.getName()===e?n.data:t}),null)},e.getArrayWithIndex=function(e){return t.arrays.reduce((function(t,n,Q){return n.data&&n.data.getName()===e?{array:n.data,index:Q}:t}),{array:null,index:-1})},e.getArrayByIndex=function(e){return e>=0&&e<t.arrays.length?t.arrays[e].data:null},e.hasArray=function(t){return e.getArrayWithIndex(t).index>=0},e.getArrayName=function(e){var n=t.arrays[e];return n?n.data.getName():""},e.getCopyFieldFlags=function(){return t.copyFieldFlags},e.getFlag=function(e){return t.copyFieldFlags[e]},e.passData=function(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;n.getArrays().forEach((function(n){var a=e.getFlag(n.getName());if(!1!==a&&(!t.doCopyAllOff||!0===a)&&n){var r=e.getArrayByName(n.getName());if(r){if(n.getNumberOfComponents()===r.getNumberOfComponents())if(Q>-1&&Q<n.getNumberOfTuples()){var U=B>-1?B:Q;r.setTuple(U,n.getTuple(Q))}else for(var F=0;F<n.getNumberOfTuples();++F)r.setTuple(F,n.getTuple(F))}else if(Q<0||Q>n.getNumberOfTuples())e.addArray(n);else{var l=n.getNumberOfComponents(),o=n.getNumberOfValues(),g=B>-1?B:Q;o<g*l&&(o=(g+1)*l),(r=s.a.newInstance({name:n.getName(),dataType:n.getDataType(),numberOfComponents:n.getNumberOfComponents(),size:o})).setTuple(g,n.getTuple(Q)),e.addArray(r)}}}))},e.copyFieldOn=function(e){t.copyFieldFlags[e]=!0},e.copyFieldOff=function(e){t.copyFieldFlags[e]=!1},e.copyAllOn=function(){t.doCopyAllOn&&!t.doCopyAllOff||(t.doCopyAllOn=!0,t.doCopyAllOff=!1,e.modified())},e.copyAllOff=function(){!t.doCopyAllOn&&t.doCopyAllOff||(t.doCopyAllOn=!1,t.doCopyAllOff=!0,e.modified())},e.clearFieldFlags=function(){t.copyFieldFlags={}},e.deepCopy=function(e){t.arrays=e.getArrays().map((function(e){var t=e.newClone();return t.deepCopy(e),{data:t}}))},e.copyFlags=function(e){return e.getCopyFieldFlags().map((function(e){return e}))},e.reset=function(){return t.arrays.forEach((function(e){return e.data.reset()}))},e.getMTime=function(){return t.arrays.reduce((function(e,t){return t.data.getMTime()>e?t.data.getMTime():e}),t.mtime)},e.getNumberOfComponents=function(){return t.arrays.reduce((function(e,t){return e+t.data.getNumberOfComponents()}),0)},e.getNumberOfTuples=function(){return t.arrays.length>0?t.arrays[0].getNumberOfTuples():0},e.getState=function(){var e=n();return e.arrays=t.arrays.map((function(e){return{data:e.data.getState()}})),e}}var U={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,U,n),a.c.obj(e,t),r(e,t)}var l={newInstance:a.c.newInstance(F,"vtkFieldData"),extend:F},o=n(31);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var i=o.c.AttributeTypes,c=o.c.AttributeCopyOperations,d=a.c.vtkWarningMacro;function I(e,t){var n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function Q(e){var t=n.find((function(t){return i[t.toUpperCase()]===e||"number"!=typeof e&&t.toLowerCase()===e.toLowerCase()}));return void 0===t&&(t=null),t}t.classHierarchy.push("vtkDataSetAttributes"),e.checkNumberOfComponents=function(e){return!0},e.setAttribute=function(n,B){var a=Q(B);if(n&&"PEDIGREEIDS"===a.toUpperCase()&&!n.isA("vtkDataArray"))return d("Cannot set attribute ".concat(a,". The attribute must be a vtkDataArray.")),-1;if(n&&!e.checkNumberOfComponents(n,a))return d("Cannot set attribute ".concat(a,". Incorrect number of components.")),-1;var s=t["active".concat(a)];if(s>=0&&s<t.arrays.length){if(t.arrays[s]===n)return s;e.removeArrayByIndex(s)}return n?(s=e.addArray(n),t["active".concat(a)]=s):t["active".concat(a)]=-1,e.modified(),t["active".concat(a)]},e.setActiveAttributeByName=function(t,n){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n)},e.setActiveAttributeByIndex=function(n,B){var a=Q(B);if(n>=0&&n<t.arrays.length){if("PEDIGREEIDS"!==a.toUpperCase()){var s=e.getArrayByIndex(n);if(!s.isA("vtkDataArray"))return d("Cannot set attribute ".concat(a,". Only vtkDataArray subclasses can be set as active attributes.")),-1;if(!e.checkNumberOfComponents(s,a))return d("Cannot set attribute ".concat(a,". Incorrect number of components.")),-1}return t["active".concat(a)]=n,e.modified(),n}return-1===n&&(t["active".concat(a)]=n,e.modified()),-1},e.getActiveAttribute=function(t){var n=Q(t);return e["get".concat(n)]()},e.removeAllArrays=function(){t.arrays=[],n.forEach((function(e){t["active".concat(e)]=-1}))},e.removeArray=function(e){t.arrays=t.arrays.filter((function(Q,B){return e!==Q.data.getName()||(n.forEach((function(e){B===t["active".concat(e)]&&(t["active".concat(e)]=-1)})),!1)}))},e.removeArrayByIndex=function(e){t.arrays=t.arrays.filter((function(t,n){return n!==e})),n.forEach((function(n){e===t["active".concat(n)]&&(t["active".concat(n)]=-1)}))},n.forEach((function(n){var Q="active".concat(n);e["get".concat(n)]=function(){return e.getArrayByIndex(t[Q])},e["set".concat(n)]=function(t){return e.setAttribute(t,n)},e["setActive".concat(n)]=function(t){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n)},e["copy".concat(n,"Off")]=function(){var e=n.toUpperCase();t.copyAttributeFlags[c.PASSDATA][i[e]]=!1}})),e.initializeAttributeCopyFlags=function(){t.copyAttributeFlags=[],Object.keys(c).filter((function(e){return"ALLCOPY"!==e})).forEach((function(e){t.copyAttributeFlags[c[e]]=Object.keys(i).filter((function(e){return"NUM_ATTRIBUTES"!==e})).reduce((function(e,t){return e[i[t]]=!0,e}),[])})),t.copyAttributeFlags[c.COPYTUPLE][i.GLOBALIDS]=!1,t.copyAttributeFlags[c.INTERPOLATE][i.GLOBALIDS]=!1,t.copyAttributeFlags[c.COPYTUPLE][i.PEDIGREEIDS]=!1},e.initialize=a.c.chain(e.initialize,e.initializeAttributeCopyFlags),t.dataArrays&&Object.keys(t.dataArrays).length&&Object.keys(t.dataArrays).forEach((function(n){t.dataArrays[n].ref||"vtkDataArray"!==t.dataArrays[n].type||e.addArray(s.a.newInstance(t.dataArrays[n]))}));var B=e.shallowCopy;e.shallowCopy=function(e,n){B(e,n),t.arrays=e.getArrays().map((function(e){var t=e.newClone();return t.shallowCopy(e,n),{data:t}}))},e.initializeAttributeCopyFlags()}var u={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,u,n),l.extend(e,t,n),a.c.setGet(e,t,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),t.arrays||(t.arrays={}),I(e,t)}var m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(Q.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(C,"vtkDataSetAttributes"),extend:C},o.c),b=n(32);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var y=["pointData","cellData","fieldData"];function Z(e,t){t.classHierarchy.push("vtkDataSet"),y.forEach((function(e){t[e]?t[e]=Object(B.a)(t[e]):t[e]=m.newInstance()}));var n=e.shallowCopy;e.shallowCopy=function(e){var Q=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,Q),y.forEach((function(n){t[n]=m.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))}))}}var x={};function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,x,n),a.c.obj(e,t),a.c.setGet(e,t,y),Z(e,t)}var V=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(Q.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(G,"vtkDataSet"),extend:G},b.c);t.a=V},function(e,t,n){"use strict";for(var Q=n(11),B=[],a=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=0,F=r.length;U<F;++U)B[U]=r[U],a[r.charCodeAt(U)]=U;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function o(e,t,n){for(var Q,a,s=[],r=t;r<n;r+=3)Q=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(255&e[r+2]),s.push(B[(a=Q)>>18&63]+B[a>>12&63]+B[a>>6&63]+B[63&a]);return s.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;var g=function(e){var t,n,Q=l(e),B=Q[0],r=Q[1],U=new s(function(e,t,n){return 3*(t+n)/4-n}(0,B,r)),F=0,o=r>0?B-4:B;for(n=0;n<o;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],U[F++]=t>>16&255,U[F++]=t>>8&255,U[F++]=255&t;return 2===r&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,U[F++]=255&t),1===r&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,U[F++]=t>>8&255,U[F++]=255&t),U},i=function(e){for(var t,n=e.length,Q=n%3,a=[],s=16383,r=0,U=n-Q;r<U;r+=s)a.push(o(e,r,r+s>U?U:r+s));return 1===Q?(t=e[n-1],a.push(B[t>>2]+B[t<<4&63]+"==")):2===Q&&(t=(e[n-2]<<8)+e[n-1],a.push(B[t>>10]+B[t>>4&63]+B[t<<2&63]+"=")),a.join("")},c=function(e,t,n,Q,B){var a,s,r=8*B-Q-1,U=(1<<r)-1,F=U>>1,l=-7,o=n?B-1:0,g=n?-1:1,i=e[t+o];for(o+=g,a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+o],o+=g,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=Q;l>0;s=256*s+e[t+o],o+=g,l-=8);if(0===a)a=1-F;else{if(a===U)return s?NaN:1/0*(i?-1:1);s+=Math.pow(2,Q),a-=F}return(i?-1:1)*s*Math.pow(2,a-Q)},d=function(e,t,n,Q,B,a){var s,r,U,F=8*a-B-1,l=(1<<F)-1,o=l>>1,g=23===B?Math.pow(2,-24)-Math.pow(2,-77):0,i=Q?0:a-1,c=Q?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(U=Math.pow(2,-s))<1&&(s--,U*=2),(t+=s+o>=1?g/U:g*Math.pow(2,1-o))*U>=2&&(s++,U/=2),s+o>=l?(r=0,s=l):s+o>=1?(r=(t*U-1)*Math.pow(2,B),s+=o):(r=t*Math.pow(2,o-1)*Math.pow(2,B),s=0));B>=8;e[n+i]=255&r,i+=c,r/=256,B-=8);for(s=s<<B|r,F+=B;F>0;e[n+i]=255&s,i+=c,s/=256,F-=8);e[n+i-c]|=128*d};n.d(t,"a",(function(){return I}));var I=Object(Q.d)((function(e,t){const n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50;const Q=2147483647;function B(e){if(e>Q)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return U(e)}return s(e,t,n)}function s(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|I(e,t);let Q=B(n);const s=Q.write(e,t);return s!==n&&(Q=Q.slice(0,s)),Q}(e,t);if(ArrayBuffer.isView(e))return function(e){if(j(e,Uint8Array)){const t=new Uint8Array(e);return l(t.buffer,t.byteOffset,t.byteLength)}return F(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer))return l(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return l(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const Q=e.valueOf&&e.valueOf();if(null!=Q&&Q!==e)return a.from(Q,t,n);const s=function(e){if(a.isBuffer(e)){const t=0|o(e.length),n=B(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||_(e.length)?B(0):F(e):"Buffer"===e.type&&Array.isArray(e.data)?F(e.data):void 0}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function r(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function U(e){return r(e),B(e<0?0:0|o(e))}function F(e){const t=e.length<0?0:0|o(e.length),n=B(t);for(let Q=0;Q<t;Q+=1)n[Q]=255&e[Q];return n}function l(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let Q;return Q=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(Q,a.prototype),Q}function o(e){if(e>=Q)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Q.toString(16)+" bytes");return 0|e}function I(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,Q=arguments.length>2&&!0===arguments[2];if(!Q&&0===n)return 0;let B=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(e).length;default:if(B)return Q?-1:z(e).length;t=(""+t).toLowerCase(),B=!0}}function u(e,t,n){let Q=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return p(this,t,n);case"latin1":case"binary":return h(this,t,n);case"base64":return V(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(Q)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),Q=!0}}function C(e,t,n){const Q=e[t];e[t]=e[n],e[n]=Q}function m(e,t,n,Q,B){if(0===e.length)return-1;if("string"==typeof n?(Q=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),_(n=+n)&&(n=B?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(B)return-1;n=e.length-1}else if(n<0){if(!B)return-1;n=0}if("string"==typeof t&&(t=a.from(t,Q)),a.isBuffer(t))return 0===t.length?-1:b(e,t,n,Q,B);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?B?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,Q,B);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,Q,B){let a,s=1,r=e.length,U=t.length;if(void 0!==Q&&("ucs2"===(Q=String(Q).toLowerCase())||"ucs-2"===Q||"utf16le"===Q||"utf-16le"===Q)){if(e.length<2||t.length<2)return-1;s=2,r/=2,U/=2,n/=2}function F(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(B){let Q=-1;for(a=n;a<r;a++)if(F(e,a)===F(t,-1===Q?0:a-Q)){if(-1===Q&&(Q=a),a-Q+1===U)return Q*s}else-1!==Q&&(a-=a-Q),Q=-1}else for(n+U>r&&(n=r-U),a=n;a>=0;a--){let n=!0;for(let Q=0;Q<U;Q++)if(F(e,a+Q)!==F(t,Q)){n=!1;break}if(n)return a}return-1}function S(e,t,n,Q){n=Number(n)||0;const B=e.length-n;Q?(Q=Number(Q))>B&&(Q=B):Q=B;const a=t.length;let s;for(Q>a/2&&(Q=a/2),s=0;s<Q;++s){const Q=parseInt(t.substr(2*s,2),16);if(_(Q))return s;e[n+s]=Q}return s}function y(e,t,n,Q){return K(z(t,e.length-n),e,n,Q)}function Z(e,t,n,Q){return K(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,Q)}function x(e,t,n,Q){return K(P(t),e,n,Q)}function G(e,t,n,Q){return K(function(e,t){let n,Q,B;const a=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),Q=n>>8,B=n%256,a.push(B),a.push(Q);return a}(t,e.length-n),e,n,Q)}function V(e,t,n){return 0===t&&n===e.length?i(e):i(e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);const Q=[];let B=t;for(;B<n;){const t=e[B];let a=null,s=t>239?4:t>223?3:t>191?2:1;if(B+s<=n){let n,Q,r,U;switch(s){case 1:t<128&&(a=t);break;case 2:n=e[B+1],128==(192&n)&&(U=(31&t)<<6|63&n,U>127&&(a=U));break;case 3:n=e[B+1],Q=e[B+2],128==(192&n)&&128==(192&Q)&&(U=(15&t)<<12|(63&n)<<6|63&Q,U>2047&&(U<55296||U>57343)&&(a=U));break;case 4:n=e[B+1],Q=e[B+2],r=e[B+3],128==(192&n)&&128==(192&Q)&&128==(192&r)&&(U=(15&t)<<18|(63&n)<<12|(63&Q)<<6|63&r,U>65535&&U<1114112&&(a=U))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,Q.push(a>>>10&1023|55296),a=56320|1023&a),Q.push(a),B+=s}return function(e){const t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);let n="",Q=0;for(;Q<t;)n+=String.fromCharCode.apply(String,e.slice(Q,Q+=L));return n}(Q)}t.kMaxLength=Q,a.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return r(e),e<=0?B(e):void 0!==t?"string"==typeof n?B(e).fill(t,n):B(e).fill(t):B(e)}(e,t,n)},a.allocUnsafe=function(e){return U(e)},a.allocUnsafeSlow=function(e){return U(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(j(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,Q=t.length;for(let B=0,a=Math.min(n,Q);B<a;++B)if(e[B]!==t[B]){n=e[B],Q=t[B];break}return n<Q?-1:Q<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const Q=a.allocUnsafe(t);let B=0;for(n=0;n<e.length;++n){let t=e[n];if(j(t,Uint8Array))B+t.length>Q.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(Q,B)):Uint8Array.prototype.set.call(Q,t,B);else{if(!a.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(Q,B)}B+=t.length}return Q},a.byteLength=I,a.prototype._isBuffer=!0,a.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)C(this,t,t+1);return this},a.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},a.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},a.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?R(this,0,e):u.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(e,t,n,Q,B){if(j(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===Q&&(Q=0),void 0===B&&(B=this.length),t<0||n>e.length||Q<0||B>this.length)throw new RangeError("out of range index");if(Q>=B&&t>=n)return 0;if(Q>=B)return-1;if(t>=n)return 1;if(this===e)return 0;let s=(B>>>=0)-(Q>>>=0),r=(n>>>=0)-(t>>>=0);const U=Math.min(s,r),F=this.slice(Q,B),l=e.slice(t,n);for(let e=0;e<U;++e)if(F[e]!==l[e]){s=F[e],r=l[e];break}return s<r?-1:r<s?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},a.prototype.write=function(e,t,n,Q){if(void 0===t)Q="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)Q=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===Q&&(Q="utf8")):(Q=n,n=void 0)}const B=this.length-t;if((void 0===n||n>B)&&(n=B),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let a=!1;for(;;)switch(Q){case"hex":return S(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":case"latin1":case"binary":return Z(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),a=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const L=4096;function p(e,t,n){let Q="";n=Math.min(e.length,n);for(let B=t;B<n;++B)Q+=String.fromCharCode(127&e[B]);return Q}function h(e,t,n){let Q="";n=Math.min(e.length,n);for(let B=t;B<n;++B)Q+=String.fromCharCode(e[B]);return Q}function N(e,t,n){const Q=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>Q)&&(n=Q);let B="";for(let Q=t;Q<n;++Q)B+=q[e[Q]];return B}function D(e,t,n){const Q=e.slice(t,n);let B="";for(let e=0;e<Q.length-1;e+=2)B+=String.fromCharCode(Q[e]+256*Q[e+1]);return B}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,n,Q,B,s){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>B||t<s)throw new RangeError('"value" argument is out of bounds');if(n+Q>e.length)throw new RangeError("Index out of range")}function f(e,t,n,Q,B){M(t,Q,B,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function J(e,t,n,Q,B){M(t,Q,B,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function v(e,t,n,Q,B,a){if(n+Q>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(e,t,n,Q,B){return t=+t,n>>>=0,B||v(e,0,n,4),d(e,t,n,Q,23,4),n+4}function X(e,t,n,Q,B){return t=+t,n>>>=0,B||v(e,0,n,8),d(e,t,n,Q,52,8),n+8}a.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const Q=this.subarray(e,t);return Object.setPrototypeOf(Q,a.prototype),Q},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let Q=this[e],B=1,a=0;for(;++a<t&&(B*=256);)Q+=this[e+a]*B;return Q},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let Q=this[e+--t],B=1;for(;t>0&&(B*=256);)Q+=this[e+--t]*B;return Q},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=$((function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||w(e,this.length-8);const Q=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,B=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(Q)+(BigInt(B)<<BigInt(32))})),a.prototype.readBigUInt64BE=$((function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||w(e,this.length-8);const Q=t*2**24+65536*this[++e]+256*this[++e]+this[++e],B=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(Q)<<BigInt(32))+BigInt(B)})),a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let Q=this[e],B=1,a=0;for(;++a<t&&(B*=256);)Q+=this[e+a]*B;return B*=128,Q>=B&&(Q-=Math.pow(2,8*t)),Q},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let Q=t,B=1,a=this[e+--Q];for(;Q>0&&(B*=256);)a+=this[e+--Q]*B;return B*=128,a>=B&&(a-=Math.pow(2,8*t)),a},a.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=$((function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||w(e,this.length-8);const Q=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(Q)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),a.prototype.readBigInt64BE=$((function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||w(e,this.length-8);const Q=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(Q)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),c(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),c(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),c(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),c(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,Q){e=+e,t>>>=0,n>>>=0,Q||E(this,e,t,n,Math.pow(2,8*n)-1,0);let B=1,a=0;for(this[t]=255&e;++a<n&&(B*=256);)this[t+a]=e/B&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,Q){e=+e,t>>>=0,n>>>=0,Q||E(this,e,t,n,Math.pow(2,8*n)-1,0);let B=n-1,a=1;for(this[t+B]=255&e;--B>=0&&(a*=256);)this[t+B]=e/a&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=$((function(e,t=0){return f(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=$((function(e,t=0){return J(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(e,t,n,Q){if(e=+e,t>>>=0,!Q){const Q=Math.pow(2,8*n-1);E(this,e,t,n,Q-1,-Q)}let B=0,a=1,s=0;for(this[t]=255&e;++B<n&&(a*=256);)e<0&&0===s&&0!==this[t+B-1]&&(s=1),this[t+B]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,Q){if(e=+e,t>>>=0,!Q){const Q=Math.pow(2,8*n-1);E(this,e,t,n,Q-1,-Q)}let B=n-1,a=1,s=0;for(this[t+B]=255&e;--B>=0&&(a*=256);)e<0&&0===s&&0!==this[t+B+1]&&(s=1),this[t+B]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=$((function(e,t=0){return f(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=$((function(e,t=0){return J(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(e,t,n){return W(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return W(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return X(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return X(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,Q){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),Q||0===Q||(Q=this.length),t>=e.length&&(t=e.length),t||(t=0),Q>0&&Q<n&&(Q=n),Q===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),e.length-t<Q-n&&(Q=e.length-t+n);const B=Q-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,Q):Uint8Array.prototype.set.call(e,this.subarray(n,Q),t),B},a.prototype.fill=function(e,t,n,Q){if("string"==typeof e){if("string"==typeof t?(Q=t,t=0,n=this.length):"string"==typeof n&&(Q=n,n=this.length),void 0!==Q&&"string"!=typeof Q)throw new TypeError("encoding must be a string");if("string"==typeof Q&&!a.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(1===e.length){const t=e.charCodeAt(0);("utf8"===Q&&t<128||"latin1"===Q)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let B;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(B=t;B<n;++B)this[B]=e;else{const s=a.isBuffer(e)?e:a.from(e,Q),r=s.length;if(0===r)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(B=0;B<n-t;++B)this[B+t]=s[B%r]}return this};const H={};function k(e,t,n){H[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function T(e){let t="",n=e.length;const Q="-"===e[0]?1:0;for(;n>=Q+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function M(e,t,n,Q,B,a){if(e>n||e<t){const Q="bigint"==typeof t?"n":"";let B;throw B=a>3?0===t||t===BigInt(0)?`>= 0${Q} and < 2${Q} ** ${8*(a+1)}${Q}`:`>= -(2${Q} ** ${8*(a+1)-1}${Q}) and < 2 ** ${8*(a+1)-1}${Q}`:`>= ${t}${Q} and <= ${n}${Q}`,new H.ERR_OUT_OF_RANGE("value",B,e)}!function(e,t,n){Y(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||w(t,e.length-(n+1))}(Q,B,a)}function Y(e,t){if("number"!=typeof e)throw new H.ERR_INVALID_ARG_TYPE(t,"number",e)}function w(e,t,n){if(Math.floor(e)!==e)throw Y(e,n),new H.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new H.ERR_BUFFER_OUT_OF_BOUNDS;throw new H.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}k("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?e+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"}),RangeError),k("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),k("ERR_OUT_OF_RANGE",(function(e,t,n){let Q=`The value of "${e}" is out of range.`,B=n;return Number.isInteger(n)&&Math.abs(n)>2**32?B=T(String(n)):"bigint"==typeof n&&(B=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(B=T(B)),B+="n"),Q+=` It must be ${t}. Received ${B}`,Q}),RangeError);const O=/[^+/0-9A-Za-z-_]/g;function z(e,t){let n;t=t||1/0;const Q=e.length;let B=null;const a=[];for(let s=0;s<Q;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!B){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===Q){(t-=3)>-1&&a.push(239,191,189);continue}B=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),B=n;continue}n=65536+(B-55296<<10|n-56320)}else B&&(t-=3)>-1&&a.push(239,191,189);if(B=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function P(e){return g(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,n,Q){let B;for(B=0;B<Q&&!(B+n>=t.length||B>=e.length);++B)t[B+n]=e[B];return B}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function _(e){return e!=e}const q=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const Q=16*n;for(let B=0;B<16;++B)t[Q+B]=e[n]+e[B]}return t}();function $(e){return"undefined"==typeof BigInt?ee:e}function ee(){throw new Error("BigInt not supported")}}),"/$$rollup_base$$/node_modules/buffer")},function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var Q=n(11),B=Object(Q.d)((function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),"/$$rollup_base$$/node_modules/inherits")},function(e,t,n){"use strict";var Q=n(29),B=Object(Q.a)((function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t}));t.a=B},function(e,t,n){"use strict";function Q(e){var t={exports:{}};return e(t,t.exports),t.exports}n.d(t,"a",(function(){return Q}))},function(e,t,n){"use strict";var Q=n(5),B=(n(3),n(4)),a=n(17),s=n(7);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(Q.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=0;return e.filter((function(e,n){return n===t&&(t+=e+1,!0)}))}var l={extractCellSizes:F,getNumberOfCells:function(e){return F(e).length}};function o(e,t){t.classHierarchy.push("vtkCellArray"),e.getNumberOfCells=function(e){return void 0===t.numberOfCells||e?(t.cellSizes=F(t.values),t.numberOfCells=t.cellSizes.length,t.numberOfCells):t.numberOfCells},e.getCellSizes=function(e){return void 0===t.cellSizes||e?(t.cellSizes=F(t.values),t.cellSizes):t.cellSizes};var n=e.setData;e.setData=function(e){n(e,1),t.numberOfCells=void 0,t.cellSizes=void 0},e.getCell=function(e){var n=e,Q=t.values[n++];return t.values.subarray(n,n+Q)}}function g(e){return U({empty:!0,numberOfComponents:1,dataType:a.a.UNSIGNED_INT},e)}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s.a.extend(e,t,g(n)),o(e,t)}var c=U({newInstance:B.c.newInstance(i,"vtkCellArray"),extend:i},l);t.a=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return Q})),n.d(t,"b",(function(){return B}));n(3);var Q={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},B={DEFAULT:0,SINGLE:1,DOUBLE:2},a={AttributeCopyOperations:{COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},AttributeLimitTypes:{MAX:0,EXACT:1,NOLIMIT:2},AttributeTypes:Q,CellGhostTypes:{DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},DesiredOutputPrecision:B,PointGhostTypes:{DUPLICATEPOINT:1,HIDDENPOINT:2},ghostArrayName:"vtkGhostType"};t.c=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return B})),n.d(t,"b",(function(){return Q}));n(3);var Q={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},B={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7},a={FieldDataTypes:Q,FieldAssociations:B};t.c=a},function(e,t,n){"use strict";var Q=n(5),B=(n(3),n(4)),a=n(6);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function r(e,t,n){var Q=n[0]*(e[0]-t[0])+n[1]*(e[1]-t[1])+n[2]*(e[2]-t[2]);return Math.abs(Q)}function U(e,t,n,Q){var B=[];Object(a.t)(e,t,B);var s=Object(a.q)(n,B);Q[0]=e[0]-s*n[0],Q[1]=e[1]-s*n[1],Q[2]=e[2]-s*n[2]}function F(e,t,n){var Q=Object(a.q)(e,t),B=Object(a.q)(t,t);return 0===B&&(B=1),n[0]=e[0]-Q*t[0]/B,n[1]=e[1]-Q*t[1]/B,n[2]=e[2]-Q*t[2]/B,n}function l(e,t,n,Q){var B=[];Object(a.t)(e,t,B);var s=Object(a.q)(n,B),r=Object(a.q)(n,n);0!==r?(Q[0]=e[0]-s*n[0]/r,Q[1]=e[1]-s*n[1]/r,Q[2]=e[2]-s*n[2]/r):(Q[0]=e[0],Q[1]=e[1],Q[2]=e[2])}function o(e,t,n,Q){var B={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},s=[],r=[];Object(a.t)(t,e,s),Object(a.t)(n,e,r);var U=Object(a.q)(Q,r),F=Object(a.q)(Q,s);return(F<0?-F:F)<=(U<0?1e-6*-U:1e-6*U)||(B.t=U/F,B.x[0]=e[0]+B.t*s[0],B.x[1]=e[1]+B.t*s[1],B.x[2]=e[2]+B.t*s[2],B.intersection=!0,B.betweenPoints=B.t>=0&&B.t<=1),B}function g(e,t,n,Q){var B={intersection:!1,l0:[],l1:[],error:null},s=[];Object(a.w)(t,Q,s);var r,U=s.map((function(e){return Math.abs(e)}));if(U[0]+U[1]+U[2]<1e-6){var F=[];return Object(a.t)(e,n,F),0===Object(a.q)(t,F)?B.error="coincide":B.error="disjoint",B}r=U[0]>U[1]&&U[0]>U[2]?"x":U[1]>U[2]?"y":"z";var l=[],o=-Object(a.q)(t,e),g=-Object(a.q)(Q,n);switch(r){case"x":l[0]=0,l[1]=(g*t[2]-o*Q[2])/s[0],l[2]=(o*Q[1]-g*t[1])/s[0];break;case"y":l[0]=(o*Q[2]-g*t[2])/s[1],l[1]=0,l[2]=(g*t[0]-o*Q[0])/s[1];break;case"z":l[0]=(g*t[1]-o*Q[1])/s[2],l[1]=(o*Q[0]-g*t[0])/s[2],l[2]=0}return B.l0=l,Object(a.x)(l,s,B.l1),B.intersection=!0,B}var i={evaluate:function(e,t,n){return e[0]*(n[0]-t[0])+e[1]*(n[1]-t[1])+e[2]*(n[2]-t[2])},distanceToPlane:r,projectPoint:U,projectVector:F,generalizedProjectPoint:l,intersectWithLine:o,intersectWithPlane:g,DISJOINT:"disjoint",COINCIDE:"coincide"};function c(e,t){t.classHierarchy.push("vtkPlane"),e.distanceToPlane=function(e){return r(e,t.origin,t.normal)},e.projectPoint=function(e,n){U(e,t.origin,t.normal,n)},e.projectVector=function(e,n){return F(e,t.normal,n)},e.push=function(e){if(0!==e)for(var n=0;n<3;n++)t.origin[n]+=e*t.normal[n]},e.generalizedProjectPoint=function(e,n){l(e,t.origin,t.normal,n)},e.evaluateFunction=function(e,n,Q){return Array.isArray(e)?t.normal[0]*(e[0]-t.origin[0])+t.normal[1]*(e[1]-t.origin[1])+t.normal[2]*(e[2]-t.origin[2]):t.normal[0]*(e-t.origin[0])+t.normal[1]*(n-t.origin[1])+t.normal[2]*(Q-t.origin[2])},e.evaluateGradient=function(e){return[t.normal[0],t.normal[1],t.normal[2]]},e.intersectWithLine=function(e,n){return o(e,n,t.origin,t.normal)},e.intersectWithPlane=function(e,n){return g(e,n,t.origin,t.normal)}}var d={normal:[0,0,1],origin:[0,0,0]};function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d,n),B.c.obj(e,t),B.c.setGetArray(e,t,["normal","origin"],3),c(e,t)}var u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(Q.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:B.c.newInstance(I,"vtkPlane"),extend:I},i);t.a=u},function(e,t,n){"use strict";n(3);function Q(e){if("TextDecoder"in window)return new TextDecoder("latin1").decode(e);for(var t=new Uint8Array(e),n=[],Q=0;Q<t.length;++Q)n[Q]=String.fromCharCode(t[Q]);return n.join("")}var B={arrayBufferToString:Q,extractBinary:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,B=Q(e),a=t.exec(B);if(!a)return{text:B};var s=a.index+a[0].length,r=B.substring(0,s),U=null,F=n?n.exec(B):null;if(F){var l=B.substr(F.index);U={text:r+l,binaryBuffer:e.slice(s,F.index)}}else U={text:r,binaryBuffer:e.slice(s)};return U}};t.a=B},function(e,t,n){"use strict";t.a=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,Q=new Array(t);n<t;n++)Q[n]=e[n];return Q}},function(e,t,n){"use strict";var Q=n(35);t.a=function(e,t){if(e){if("string"==typeof e)return Object(Q.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(Q.a)(e,t):void 0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var Q,B="object"==typeof Reflect?Reflect:null,a=B&&"function"==typeof B.apply?B.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};Q=B&&"function"==typeof B.ownKeys?B.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}var U=r;r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var F=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function o(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function g(e,t,n,Q){var B,a,s,r;if(l(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),void 0===s)s=a[t]=n,++e._eventsCount;else if("function"==typeof s?s=a[t]=Q?[n,s]:[s,n]:Q?s.unshift(n):s.push(n),(B=o(e))>0&&s.length>B&&!s.warned){s.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=e,U.type=t,U.count=s.length,r=U,console&&console.warn&&console.warn(r)}return e}function i(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var Q={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},B=i.bind(Q);return B.listener=n,Q.wrapFn=B,B}function d(e,t,n){var Q=e._events;if(void 0===Q)return[];var B=Q[t];return void 0===B?[]:"function"==typeof B?n?[B.listener||B]:[B]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(B):u(B,B.length)}function I(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function u(e,t){for(var n=new Array(t),Q=0;Q<t;++Q)n[Q]=e[Q];return n}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return F},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");F=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return o(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var Q="error"===e,B=this._events;if(void 0!==B)Q=Q&&void 0===B.error;else if(!Q)return!1;if(Q){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var r=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw r.context=s,r}var U=B[e];if(void 0===U)return!1;if("function"==typeof U)a(U,this,t);else{var F=U.length,l=u(U,F);for(n=0;n<F;++n)a(l[n],this,t)}return!0},r.prototype.addListener=function(e,t){return g(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return g(this,e,t,!0)},r.prototype.once=function(e,t){return l(t),this.on(e,c(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,c(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,Q,B,a,s;if(l(t),void 0===(Q=this._events))return this;if(void 0===(n=Q[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete Q[e],Q.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(B=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,B=a;break}if(B<0)return this;0===B?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,B),1===n.length&&(Q[e]=n[0]),void 0!==Q.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,Q;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var B,a=Object.keys(n);for(Q=0;Q<a.length;++Q)"removeListener"!==(B=a[Q])&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(Q=t.length-1;Q>=0;Q--)this.removeListener(e,t[Q]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):I.call(e,t)},r.prototype.listenerCount=I,r.prototype.eventNames=function(){return this._eventsCount>0?Q(this._events):[]},U.once=function(e,t){return new Promise((function(n,Q){function B(){void 0!==a&&e.removeListener("error",a),n([].slice.call(arguments))}var a;"error"!==t&&(a=function(n){e.removeListener(t,B),Q(n)},e.once("error",a)),e.once(t,B)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var Q=n(37).a.EventEmitter},function(e,t,n){"use strict";(function(e){function Q(e,t){a(e,t),B(e)}function B(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}n.d(t,"a",(function(){return s}));var s={destroy:function(t,n){var s=this,r=this._readableState&&this._readableState.destroyed,U=this._writableState&&this._writableState.destroyed;return r||U?(n?n(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(a,this,t)):e.nextTick(a,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!n&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(B,s):(s._writableState.errorEmitted=!0,e.nextTick(Q,s,t)):e.nextTick(Q,s,t):n?(e.nextTick(B,s),n(t)):e.nextTick(B,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,Q=e._writableState;n&&n.autoDestroy||Q&&Q.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,n(21))},function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var Q=n(24).a.codes.ERR_INVALID_OPT_VALUE,B={getHighWaterMark:function(e,t,n,B){var a=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,B,n);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new Q(B?n:"highWaterMark",a);return Math.floor(a)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";var Q=n(11),B=Object(Q.d)((function(e){!function(e,t,n){function Q(e){var t,n=this,Q=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var Q=.02519603282416938*(t+=e.charCodeAt(n));Q-=t=Q>>>0,t=(Q*=t)>>>0,t+=4294967296*(Q-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=Q(" "),n.s1=Q(" "),n.s2=Q(" "),n.s0-=Q(e),n.s0<0&&(n.s0+=1),n.s1-=Q(e),n.s1<0&&(n.s1+=1),n.s2-=Q(e),n.s2<0&&(n.s2+=1),Q=null}function B(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var n=new Q(e),a=t&&t.state,s=n.next;return s.int32=function(){return 4294967296*n.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,a&&("object"==typeof a&&B(a,n),s.state=function(){return B(n,{})}),s}t&&t.exports?t.exports=a:this.alea=a}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),a=Object(Q.d)((function(e){!function(e,t,n){function Q(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var Q=0;Q<n.length+64;Q++)t.x^=0|n.charCodeAt(Q),t.next()}function B(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var n=new Q(e),a=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,a&&("object"==typeof a&&B(a,n),s.state=function(){return B(n,{})}),s}t&&t.exports?t.exports=a:this.xor128=a}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),s=Object(Q.d)((function(e){!function(e,t,n){function Q(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var Q=0;Q<n.length+64;Q++)t.x^=0|n.charCodeAt(Q),Q==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function B(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var n=new Q(e),a=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,a&&("object"==typeof a&&B(a,n),s.state=function(){return B(n,{})}),s}t&&t.exports?t.exports=a:this.xorwow=a}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),r=Object(Q.d)((function(e){!function(e,t,n){function Q(e){var t=this;t.next=function(){var e,n,Q=t.x,B=t.i;return e=Q[B],n=(e^=e>>>7)^e<<24,n^=(e=Q[B+1&7])^e>>>10,n^=(e=Q[B+3&7])^e>>>3,n^=(e=Q[B+4&7])^e<<7,e=Q[B+7&7],n^=(e^=e<<13)^e<<9,Q[B]=n,t.i=B+1&7,n},function(e,t){var n,Q=[];if(t===(0|t))Q[0]=t;else for(t=""+t,n=0;n<t.length;++n)Q[7&n]=Q[7&n]<<15^t.charCodeAt(n)+Q[n+1&7]<<13;for(;Q.length<8;)Q.push(0);for(n=0;n<8&&0===Q[n];++n);for(8==n&&(Q[7]=-1),e.x=Q,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function B(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var n=new Q(e),a=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,a&&(a.x&&B(a,n),s.state=function(){return B(n,{})}),s}t&&t.exports?t.exports=a:this.xorshift7=a}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),U=Object(Q.d)((function(e){!function(e,t,n){function Q(e){var t=this;t.next=function(){var e,n,Q=t.w,B=t.X,a=t.i;return t.w=Q=Q+1640531527|0,n=B[a+34&127],e=B[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=B[a]=n^e,t.i=a,n+(Q^Q>>>16)|0},function(e,t){var n,Q,B,a,s,r=[],U=128;for(t===(0|t)?(Q=t,t=null):(t+="\0",Q=0,U=Math.max(U,t.length)),B=0,a=-32;a<U;++a)t&&(Q^=t.charCodeAt((a+32)%t.length)),0===a&&(s=Q),Q^=Q<<10,Q^=Q>>>15,Q^=Q<<4,Q^=Q>>>13,a>=0&&(s=s+1640531527|0,B=0==(n=r[127&a]^=Q+s)?B+1:0);for(B>=128&&(r[127&(t&&t.length||0)]=-1),B=127,a=512;a>0;--a)Q=r[B+34&127],n=r[B=B+1&127],Q^=Q<<13,n^=n<<17,Q^=Q>>>15,n^=n>>>12,r[B]=Q^n;e.w=s,e.X=r,e.i=B}(t,e)}function B(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var n=new Q(e),a=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,a&&(a.X&&B(a,n),s.state=function(){return B(n,{})}),s}t&&t.exports?t.exports=a:this.xor4096=a}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),F=Object(Q.d)((function(e){!function(e,t,n){function Q(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,Q=t.d,B=t.a;return e=e<<25^e>>>7^n,n=n-Q|0,Q=Q<<24^Q>>>8^B,B=B-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-Q|0,t.d=Q<<16^n>>>16^B,t.a=B-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var Q=0;Q<n.length+20;Q++)t.b^=0|n.charCodeAt(Q),t.next()}function B(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var n=new Q(e),a=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,a&&("object"==typeof a&&B(a,n),s.state=function(){return B(n,{})}),s}t&&t.exports?t.exports=a:this.tychei=a}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),l=Object.freeze({__proto__:null,default:{}}),o=Object(Q.e)(l),g=Object(Q.d)((function(e){!function(t,n,Q){var B,a=256,s=Q.pow(a,6),r=Q.pow(2,52),U=2*r,F=255;function l(e,F,l){var o=[],I=c(function e(t,n){var Q,B=[],a=typeof t;if(n&&"object"==a)for(Q in t)try{B.push(e(t[Q],n-1))}catch(t){}return B.length?B:"string"==a?t:t+"\0"}((F=1==F?{entropy:!0}:F||{}).entropy?[e,d(n)]:null==e?function(){try{var e;return B&&(e=B.randomBytes)?e=e(a):(e=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(e)),d(e)}catch(e){var Q=t.navigator,s=Q&&Q.plugins;return[+new Date,t,s,t.screen,d(n)]}}():e,3),o),u=new g(o),C=function(){for(var e=u.g(6),t=s,n=0;e<r;)e=(e+n)*a,t*=a,n=u.g(1);for(;e>=U;)e/=2,t/=2,n>>>=1;return(e+n)/t};return C.int32=function(){return 0|u.g(4)},C.quick=function(){return u.g(4)/4294967296},C.double=C,c(d(u.S),n),(F.pass||l||function(e,t,n,B){return B&&(B.S&&i(B,u),e.state=function(){return i(u,{})}),n?(Q.random=e,t):e})(C,I,"global"in F?F.global:this==Q,F.state)}function g(e){var t,n=e.length,Q=this,B=0,s=Q.i=Q.j=0,r=Q.S=[];for(n||(e=[n++]);B<a;)r[B]=B++;for(B=0;B<a;B++)r[B]=r[s=F&s+e[B%n]+(t=r[B])],r[s]=t;(Q.g=function(e){for(var t,n=0,B=Q.i,s=Q.j,r=Q.S;e--;)t=r[B=F&B+1],n=n*a+r[F&(r[B]=r[s=F&s+t])+(r[s]=t)];return Q.i=B,Q.j=s,n})(a)}function i(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function c(e,t){for(var n,Q=e+"",B=0;B<Q.length;)t[F&B]=F&(n^=19*t[F&B])+Q.charCodeAt(B++);return d(t)}function d(e){return String.fromCharCode.apply(0,e)}if(c(Q.random(),n),e.exports){e.exports=l;try{B=o}catch(e){}}else Q.seedrandom=l}("undefined"!=typeof self?self:Q.b,[],Math)}),"/$$rollup_base$$/node_modules/seedrandom");n.d(t,"a",(function(){return i})),g.alea=B,g.xor128=a,g.xorwow=s,g.xorshift7=r,g.xor4096=U,g.tychei=F;var i=g},function(e,t,n){"use strict";var Q=n(11),B=Object.freeze({__proto__:null,default:{}});n.d(t,"a",(function(){return a}));var a=Object(Q.e)(B)},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=43},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return I}));var Q,B=n(11),a=(n(37),n(38)),s=n(26),r=n(42),U=n(45),F=n(39),l=n(24),o=n(40),g=n(27),i=n(52),c=n(46),d=n(48),I=A;A.ReadableState=D;var u,C=function(e,t){return e.listeners(t).length},m=s.a.Buffer,b=B.b.Uint8Array||function(){};u=r.a&&r.a.debuglog?r.a.debuglog("stream"):function(){};var S,y,Z,x=o.a.getHighWaterMark,G=l.a.codes,V=G.ERR_INVALID_ARG_TYPE,R=G.ERR_STREAM_PUSH_AFTER_EOF,L=G.ERR_METHOD_NOT_IMPLEMENTED,p=G.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Object(g.a)(A,a.a);var h=F.a.errorOrDestroy,N=["error","close","destroy","pause","resume"];function D(e,t,n){Q=Q||Object(B.a)("./_stream_duplex","/$$rollup_base$$/node_modules/readable-stream/lib"),e=e||{},"boolean"!=typeof n&&(n=t instanceof Q),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=x(this,e,"readableHighWaterMark",n),this.buffer=new U.a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(S||(S=i.a.StringDecoder),this.decoder=new S(e.encoding),this.encoding=e.encoding)}function A(e){if(Q=Q||Object(B.a)("./_stream_duplex","/$$rollup_base$$/node_modules/readable-stream/lib"),!(this instanceof A))return new A(e);var t=this instanceof Q;this._readableState=new D(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.a.call(this)}function E(e,t,n,Q,B){u("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(u("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?v(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,W(e)))}}(e,s);else if(B||(a=function(e,t){var n,Q;return Q=t,m.isBuffer(Q)||Q instanceof b||"string"==typeof t||void 0===t||e.objectMode||(n=new V("chunk",["string","Buffer","Uint8Array"],t)),n}(s,t)),a)h(e,a);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===m.prototype||(t=function(e){return m.from(e)}(t)),Q)s.endEmitted?h(e,new p):f(e,s,t,!0);else if(s.ended)h(e,new R);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?f(e,s,t,!1):X(e,s)):f(e,s,t,!1)}else Q||(s.reading=!1,X(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function f(e,t,n,Q){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,Q?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&v(e)),X(e,t)}function J(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function v(t){var n=t._readableState;u("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(u("emitReadable",n.flowing),n.emittedReadable=!0,e.nextTick(W,t))}function W(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Y(e)}function X(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(H,t,n))}function H(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function k(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function T(e){u("readable nexttick read 0"),e.read(0)}function M(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),Y(e),t.flowing&&!t.reading&&e.read(0)}function Y(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function O(t){var n=t._readableState;u("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,e.nextTick(z,n,t))}function z(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function P(e,t){for(var n=0,Q=e.length;n<Q;n++)if(e[n]===t)return n;return-1}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),A.prototype.destroy=F.a.destroy,A.prototype._undestroy=F.a.undestroy,A.prototype._destroy=function(e,t){t(e)},A.prototype.push=function(e,t){var n,Q=this._readableState;return Q.objectMode?n=!0:"string"==typeof e&&((t=t||Q.defaultEncoding)!==Q.encoding&&(e=m.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},A.prototype.unshift=function(e){return E(this,e,null,!0,!1)},A.prototype.isPaused=function(){return!1===this._readableState.flowing},A.prototype.setEncoding=function(e){S||(S=i.a.StringDecoder);var t=new S(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,Q="";null!==n;)Q+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==Q&&this._readableState.buffer.push(Q),this._readableState.length=Q.length,this},A.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):v(this),null;if(0===(e=J(e,t))&&t.ended)return 0===t.length&&O(this),null;var Q,B=t.needReadable;return u("need readable",B),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",B=!0),t.ended||t.reading?u("reading or ended",B=!1):B&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=J(n,t))),null===(Q=e>0?w(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==Q&&this.emit("data",Q),Q},A.prototype._read=function(e){h(this,new L("_read()"))},A.prototype.pipe=function(t,n){var Q=this,B=this._readableState;switch(B.pipesCount){case 0:B.pipes=t;break;case 1:B.pipes=[B.pipes,t];break;default:B.pipes.push(t)}B.pipesCount+=1,u("pipe count=%d opts=%j",B.pipesCount,n);var a=n&&!1===n.end||t===e.stdout||t===e.stderr?i:s;function s(){u("onend"),t.end()}B.endEmitted?e.nextTick(a):Q.once("end",a),t.on("unpipe",(function e(n,a){u("onunpipe"),n===Q&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,u("cleanup"),t.removeListener("close",o),t.removeListener("finish",g),t.removeListener("drain",r),t.removeListener("error",l),t.removeListener("unpipe",e),Q.removeListener("end",s),Q.removeListener("end",i),Q.removeListener("data",F),U=!0,!B.awaitDrain||t._writableState&&!t._writableState.needDrain||r())}));var r=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&C(e,"data")&&(t.flowing=!0,Y(e))}}(Q);t.on("drain",r);var U=!1;function F(e){u("ondata");var n=t.write(e);u("dest.write",n),!1===n&&((1===B.pipesCount&&B.pipes===t||B.pipesCount>1&&-1!==P(B.pipes,t))&&!U&&(u("false write response, pause",B.awaitDrain),B.awaitDrain++),Q.pause())}function l(e){u("onerror",e),i(),t.removeListener("error",l),0===C(t,"error")&&h(t,e)}function o(){t.removeListener("finish",g),i()}function g(){u("onfinish"),t.removeListener("close",o),i()}function i(){u("unpipe"),Q.unpipe(t)}return Q.on("data",F),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(t,"error",l),t.once("close",o),t.once("finish",g),t.emit("pipe",Q),B.flowing||(u("pipe resume"),Q.resume()),t},A.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var Q=t.pipes,B=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<B;a++)Q[a].emit("unpipe",this,{hasUnpiped:!1});return this}var s=P(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},A.prototype.on=function(t,n){var Q=a.a.prototype.on.call(this,t,n),B=this._readableState;return"data"===t?(B.readableListening=this.listenerCount("readable")>0,!1!==B.flowing&&this.resume()):"readable"===t&&(B.endEmitted||B.readableListening||(B.readableListening=B.needReadable=!0,B.flowing=!1,B.emittedReadable=!1,u("on readable",B.length,B.reading),B.length?v(this):B.reading||e.nextTick(T,this))),Q},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(t,n){var Q=a.a.prototype.removeListener.call(this,t,n);return"readable"===t&&e.nextTick(k,this),Q},A.prototype.removeAllListeners=function(t){var n=a.a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||e.nextTick(k,this),n},A.prototype.resume=function(){var t=this._readableState;return t.flowing||(u("resume"),t.flowing=!t.readableListening,function(t,n){n.resumeScheduled||(n.resumeScheduled=!0,e.nextTick(M,t,n))}(this,t)),t.paused=!1,this},A.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},A.prototype.wrap=function(e){var t=this,n=this._readableState,Q=!1;for(var B in e.on("end",(function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(B){u("wrapped data"),n.decoder&&(B=n.decoder.write(B)),n.objectMode&&null==B||(n.objectMode||B&&B.length)&&(t.push(B)||(Q=!0,e.pause()))})),e)void 0===this[B]&&"function"==typeof e[B]&&(this[B]=function(t){return function(){return e[t].apply(e,arguments)}}(B));for(var a=0;a<N.length;a++)e.on(N[a],this.emit.bind(this,N[a]));return this._read=function(t){u("wrapped _read",t),Q&&(Q=!1,e.resume())},this},"function"==typeof Symbol&&(A.prototype[Symbol.asyncIterator]=function(){return void 0===y&&(y=c.a),y(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),A._fromList=w,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(A.from=function(e,t){return void 0===Z&&(Z=d.a),Z(A,e,t)})}).call(this,n(21))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var Q=n(26),B=n(42);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=Q.a.Buffer,U=B.a.inspect,F=U&&U.custom||"inspect",l=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},t.concat=function(e){if(0===this.length)return r.alloc(0);for(var t,n,Q,B=r.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=B,Q=s,r.prototype.copy.call(t,n,Q),s+=a.data.length,a=a.next;return B},t.consume=function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,n=1,Q=t.data;for(e-=Q.length;t=t.next;){var B=t.data,a=e>B.length?B.length:e;if(a===B.length?Q+=B:Q+=B.slice(0,e),0==(e-=a)){a===B.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=B.slice(a));break}++n}return this.length-=n,Q},t._getBuffer=function(e){var t=r.allocUnsafe(e),n=this.head,Q=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var B=n.data,a=e>B.length?B.length:e;if(B.copy(t,t.length-e,0,a),0==(e-=a)){a===B.length?(++Q,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=B.slice(a));break}++Q}return this.length-=Q,t},t[F]=function(e,t){return U(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))},e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C}));var Q,B=n(47);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=Symbol("lastResolve"),r=Symbol("lastReject"),U=Symbol("error"),F=Symbol("ended"),l=Symbol("lastPromise"),o=Symbol("handlePromise"),g=Symbol("stream");function i(e,t){return{value:e,done:t}}function c(e){var t=e[s];if(null!==t){var n=e[g].read();null!==n&&(e[l]=null,e[s]=null,e[r]=null,t(i(n,!1)))}}function d(t){e.nextTick(c,t)}var I=Object.getPrototypeOf((function(){})),u=Object.setPrototypeOf((a(Q={get stream(){return this[g]},next:function(){var t=this,n=this[U];if(null!==n)return Promise.reject(n);if(this[F])return Promise.resolve(i(void 0,!0));if(this[g].destroyed)return new Promise((function(n,Q){e.nextTick((function(){t[U]?Q(t[U]):n(i(void 0,!0))}))}));var Q,B=this[l];if(B)Q=new Promise(function(e,t){return function(n,Q){e.then((function(){t[F]?n(i(void 0,!0)):t[o](n,Q)}),Q)}}(B,this));else{var a=this[g].read();if(null!==a)return Promise.resolve(i(a,!1));Q=new Promise(this[o])}return this[l]=Q,Q}},Symbol.asyncIterator,(function(){return this})),a(Q,"return",(function(){var e=this;return new Promise((function(t,n){e[g].destroy(null,(function(e){e?n(e):t(i(void 0,!0))}))}))})),Q),I),C=function(e){var t,n=Object.create(u,(a(t={},g,{value:e,writable:!0}),a(t,s,{value:null,writable:!0}),a(t,r,{value:null,writable:!0}),a(t,U,{value:null,writable:!0}),a(t,F,{value:e._readableState.endEmitted,writable:!0}),a(t,o,{value:function(e,t){var Q=n[g].read();Q?(n[l]=null,n[s]=null,n[r]=null,e(i(Q,!1))):(n[s]=e,n[r]=t)},writable:!0}),t));return n[l]=null,Object(B.a)(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[r];return null!==t&&(n[l]=null,n[s]=null,n[r]=null,t(e)),void(n[U]=e)}var Q=n[s];null!==Q&&(n[l]=null,n[s]=null,n[r]=null,Q(i(void 0,!0))),n[F]=!0})),e.on("readable",d.bind(null,n)),n}}).call(this,n(21))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var Q=n(24).a.codes.ERR_STREAM_PREMATURE_CLOSE;function B(){}var a=function e(t,n,a){if("function"==typeof n)return e(t,null,n);n||(n={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,Q=new Array(n),B=0;B<n;B++)Q[B]=arguments[B];e.apply(this,Q)}}}(a||B);var s=n.readable||!1!==n.readable&&t.readable,r=n.writable||!1!==n.writable&&t.writable,U=function(){t.writable||l()},F=t._writableState&&t._writableState.finished,l=function(){r=!1,F=!0,s||a.call(t)},o=t._readableState&&t._readableState.endEmitted,g=function(){s=!1,o=!0,r||a.call(t)},i=function(e){a.call(t,e)},c=function(){var e;return s&&!o?(t._readableState&&t._readableState.ended||(e=new Q),a.call(t,e)):r&&!F?(t._writableState&&t._writableState.ended||(e=new Q),a.call(t,e)):void 0},d=function(){t.req.on("finish",l)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",l),t.on("abort",c),t.req?d():t.on("request",d)):r&&!t._writableState&&(t.on("end",U),t.on("close",U)),t.on("end",g),t.on("finish",l),!1!==n.error&&t.on("error",i),t.on("close",c),function(){t.removeListener("complete",l),t.removeListener("abort",c),t.removeListener("request",d),t.req&&t.req.removeListener("finish",l),t.removeListener("end",U),t.removeListener("close",U),t.removeListener("finish",l),t.removeListener("end",g),t.removeListener("error",i),t.removeListener("close",c)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var Q=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var Q,B=n(11),a=n(38),s=n(26),r=n(39),U=n(24),F=n(40),l=n(27),o=n(50),g=N;function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var Q=e.entry;for(e.entry=null;Q;){var B=Q.callback;t.pendingcb--,B(void 0),Q=Q.next}t.corkedRequestsFree.next=e}(t,e)}}N.WritableState=h;var c,d={deprecate:o.a},I=s.a.Buffer,u=B.b.Uint8Array||function(){},C=F.a.getHighWaterMark,m=U.a.codes,b=m.ERR_INVALID_ARG_TYPE,S=m.ERR_METHOD_NOT_IMPLEMENTED,y=m.ERR_MULTIPLE_CALLBACK,Z=m.ERR_STREAM_CANNOT_PIPE,x=m.ERR_STREAM_DESTROYED,G=m.ERR_STREAM_NULL_VALUES,V=m.ERR_STREAM_WRITE_AFTER_END,R=m.ERR_UNKNOWN_ENCODING,L=r.a.errorOrDestroy;function p(){}function h(t,n,a){Q=Q||Object(B.a)("./_stream_duplex","/$$rollup_base$$/node_modules/readable-stream/lib"),t=t||{},"boolean"!=typeof a&&(a=n instanceof Q),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=C(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,n){var Q=t._writableState,B=Q.sync,a=Q.writecb;if("function"!=typeof a)throw new y;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(Q),n)!function(t,n,Q,B,a){--n.pendingcb,Q?(e.nextTick(a,B),e.nextTick(v,t,n),t._writableState.errorEmitted=!0,L(t,B)):(a(B),t._writableState.errorEmitted=!0,L(t,B),v(t,n))}(t,Q,B,n,a);else{var s=f(Q)||t.destroyed;s||Q.corked||Q.bufferProcessing||!Q.bufferedRequest||E(t,Q),B?e.nextTick(A,t,Q,s,a):A(t,Q,s,a)}}(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function N(e){var t=this instanceof(Q=Q||Object(B.a)("./_stream_duplex","/$$rollup_base$$/node_modules/readable-stream/lib"));if(!t&&!c.call(N,this))return new N(e);this._writableState=new h(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.a.call(this)}function D(e,t,n,Q,B,a,s){t.writelen=Q,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new x("write")):n?e._writev(B,t.onwrite):e._write(B,a,t.onwrite),t.sync=!1}function A(e,t,n,Q){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,Q(),v(e,t)}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var Q=t.bufferedRequestCount,B=new Array(Q),a=t.corkedRequestsFree;a.entry=n;for(var s=0,r=!0;n;)B[s]=n,n.isBuf||(r=!1),n=n.next,s+=1;B.allBuffers=r,D(e,t,!0,t.length,B,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var U=n.chunk,F=n.encoding,l=n.callback;if(D(e,t,!1,t.objectMode?1:U.length,U,F,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function f(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function J(e,t){e._final((function(n){t.pendingcb--,n&&L(e,n),t.prefinished=!0,e.emit("prefinish"),v(e,t)}))}function v(t,n){var Q=f(n);if(Q&&(function(t,n){n.prefinished||n.finalCalled||("function"!=typeof t._final||n.destroyed?(n.prefinished=!0,t.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,e.nextTick(J,t,n)))}(t,n),0===n.pendingcb&&(n.finished=!0,t.emit("finish"),n.autoDestroy))){var B=t._readableState;(!B||B.autoDestroy&&B.endEmitted)&&t.destroy()}return Q}Object(l.a)(N,a.a),h.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(h.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(N,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===N&&e&&e._writableState instanceof h}})):c=function(e){return e instanceof this},N.prototype.pipe=function(){L(this,new Z)},N.prototype.write=function(t,n,Q){var B,a=this._writableState,s=!1,r=!a.objectMode&&(B=t,I.isBuffer(B)||B instanceof u);return r&&!I.isBuffer(t)&&(t=function(e){return I.from(e)}(t)),"function"==typeof n&&(Q=n,n=null),r?n="buffer":n||(n=a.defaultEncoding),"function"!=typeof Q&&(Q=p),a.ending?function(t,n){var Q=new V;L(t,Q),e.nextTick(n,Q)}(this,Q):(r||function(t,n,Q,B){var a;return null===Q?a=new G:"string"==typeof Q||n.objectMode||(a=new b("chunk",["string","Buffer"],Q)),!a||(L(t,a),e.nextTick(B,a),!1)}(this,a,t,Q))&&(a.pendingcb++,s=function(e,t,n,Q,B,a){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=I.from(t,n)),t}(t,Q,B);Q!==s&&(n=!0,B="buffer",Q=s)}var r=t.objectMode?1:Q.length;t.length+=r;var U=t.length<t.highWaterMark;if(U||(t.needDrain=!0),t.writing||t.corked){var F=t.lastBufferedRequest;t.lastBufferedRequest={chunk:Q,encoding:B,isBuf:n,callback:a,next:null},F?F.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else D(e,t,!1,r,Q,B,a);return U}(this,a,r,t,n,Q)),s},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||E(this,e))},N.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new R(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(N.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),N.prototype._write=function(e,t,n){n(new S("_write()"))},N.prototype._writev=null,N.prototype.end=function(t,n,Q){var B=this._writableState;return"function"==typeof t?(Q=t,t=null,n=null):"function"==typeof n&&(Q=n,n=null),null!=t&&this.write(t,n),B.corked&&(B.corked=1,this.uncork()),B.ending||function(t,n,Q){n.ending=!0,v(t,n),Q&&(n.finished?e.nextTick(Q):t.once("finish",Q)),n.ended=!0,t.writable=!1}(this,B,Q),this},Object.defineProperty(N.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),N.prototype.destroy=r.a.destroy,N.prototype._undestroy=r.a.undestroy,N.prototype._destroy=function(e,t){t(e)}}).call(this,n(21))},function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var Q=n(11),B=function(e,t){if(a("noDeprecation"))return e;var n=!1;return function(){if(!n){if(a("throwDeprecation"))throw new Error(t);a("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}};function a(e){try{if(!Q.b.localStorage)return!1}catch(e){return!1}var t=Q.b.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}},function(e,t,n){"use strict";(function(e){n(3);var t=n(4),Q=n(7),B=n(18),a=n(12),s=n(20),r=n(34),U=t.c.vtkErrorMacro;function F(e,t){for(var n=0;n<e.length;n++)t.push(e[n])}function l(e,t,n,Q,B){var a=e[t];if(void 0===a)return-1;if(-1!==a.indexOf("endfacet"))return t+1;if(-1===a.indexOf("facet"))return t+1;var s=0,r=2,U=n.length/3;for(F(a.split(/[ \t]+/).filter((function(e){return e})).slice(-3).map(Number),B);-1!==e[t+r].indexOf("vertex");)F(e[t+r].split(/[ \t]+/).filter((function(e){return e})).slice(-3).map(Number),n),s++,r++;Q.push(s);for(var l=0;l<s;l++)Q.push(U+l);for(;e[t+r]&&-1!==e[t+r].indexOf("endfacet");)r++;return t+r+2}function o(t,n){function F(e){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},B=n.compression,a=n.progressCallback;return Q.binary?n.dataAccessHelper.fetchBinary(e,{compression:B,progressCallback:a}):n.dataAccessHelper.fetchText(t,e,{compression:B,progressCallback:a})}n.classHierarchy.push("vtkSTLReader"),n.dataAccessHelper||(n.dataAccessHelper=s.a.get("http")),t.setUrl=function(e){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{binary:!0};n.url=e;var B=e.split("/");return B.pop(),n.baseURL=B.join("/"),n.compression=Q.compression,t.loadData({progressCallback:Q.progressCallback,binary:!!Q.binary})},t.loadData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Q=F(n.url,e);return Q.then(t.parse),Q},t.parse=function(e){"string"==typeof e?t.parseAsText(e):t.parseAsArrayBuffer(e)},t.parseAsArrayBuffer=function(s){if(s&&s!==n.parseData)if(t.modified(),n.parseData=s,84+50*new DataView(s,0,84).getUint32(80,!0)===s.byteLength){var F=s.slice(0,80),l=function(e){for(var t=e.split(" ").filter((function(e){return e.indexOf("=")>-1})),n={},Q=0;Q<t.length;++Q){var B=t[Q].split("=");2===B.length&&(n[B[0]]=B[1])}return n}(r.a.arrayBufferToString(F)),o=new DataView(s,84);e.dataview=o;for(var g=(s.byteLength-84)/50,i=new Float32Array(9*g),c=new Float32Array(3*g),d=new Uint32Array(4*g),I=new Uint16Array(g),u=0,C=0;C<g;C++){var m=50*C;c[3*C+0]=o.getFloat32(m+0,!0),c[3*C+1]=o.getFloat32(m+4,!0),c[3*C+2]=o.getFloat32(m+8,!0),i[9*C+0]=o.getFloat32(m+12,!0),i[9*C+1]=o.getFloat32(m+16,!0),i[9*C+2]=o.getFloat32(m+20,!0),i[9*C+3]=o.getFloat32(m+24,!0),i[9*C+4]=o.getFloat32(m+28,!0),i[9*C+5]=o.getFloat32(m+32,!0),i[9*C+6]=o.getFloat32(m+36,!0),i[9*C+7]=o.getFloat32(m+40,!0),i[9*C+8]=o.getFloat32(m+44,!0),d[u++]=3,d[u++]=3*C+0,d[u++]=3*C+1,d[u++]=3*C+2,I[C]=o.getUint16(m+48,!0)}if("SPACE"in l&&"LPS"!==l.SPACE){var b=l.SPACE,S=new Float32Array(16);switch(S[15]=1,b[0]){case"L":S[0]=1;break;case"R":S[0]=-1;break;default:return void U("Can not convert STL file from ".concat(b," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}switch(b[1]){case"P":S[5]=1;break;case"A":S[5]=-1;break;default:return void U("Can not convert STL file from ".concat(b," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}switch(b[2]){case"S":S[10]=1;break;case"I":S[10]=-1;break;default:return void U("Can not convert STL file from ".concat(b," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}B.a.buildFromDegree().setMatrix(S).apply(i).apply(c)}var y=a.a.newInstance();y.getPoints().setData(i,3),y.getPolys().setData(d),y.getCellData().setScalars(Q.a.newInstance({name:"Attribute",values:I})),y.getCellData().setNormals(Q.a.newInstance({name:"Normals",values:c,numberOfComponents:3})),n.output[0]=y}else t.parseAsText(r.a.arrayBufferToString(s))},t.parseAsText=function(e){if(e&&e!==n.parseData){t.modified(),n.parseData=e;for(var B=e.split("\n"),s=1,r=[],U=[],F=[];-1!==s;)s=l(B,s,r,U,F);var o=a.a.newInstance();o.getPoints().setData(Float32Array.from(r),3),o.getPolys().setData(Uint32Array.from(U)),o.getCellData().setNormals(Q.a.newInstance({name:"Normals",values:Float32Array.from(F),numberOfComponents:3})),n.output[0]=o}},t.requestData=function(e,Q){t.parse(n.parseData)}}var g={};t.c.newInstance((function(e,n){var Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,g,Q),t.c.obj(e,n),t.c.get(e,n,["url","baseURL"]),t.c.setGet(e,n,["dataAccessHelper"]),t.c.algo(e,n,0,1),o(e,n),n.compression||(n.compression=null),n.progressCallback||(n.progressCallback=null)}),"vtkSTLReader")}).call(this,n(23))},function(e,t,n){"use strict";var Q=n(11),B=n(26),a=Object(Q.d)((function(e,t){var n=B.a.Buffer;function Q(e,t){for(var n in e)t[n]=e[n]}function a(e,t,Q){return n(e,t,Q)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=B.a:(Q(B.a,t),t.Buffer=a),Q(n,a),a.from=function(e,t,Q){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,Q)},a.alloc=function(e,t,Q){if("number"!=typeof e)throw new TypeError("Argument must be a number");var B=n(e);return void 0!==t?"string"==typeof Q?B.fill(t,Q):B.fill(t):B.fill(0),B},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return B.a.SlowBuffer(e)}}),"/$$rollup_base$$/node_modules/safe-buffer");n.d(t,"a",(function(){return C}));var s=a.Buffer,r=s.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},U=F;function F(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(s.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=g,this.end=i,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:return this.write=I,void(this.end=u)}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(t)}function l(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function g(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var Q=n.charCodeAt(n.length-1);if(Q>=55296&&Q<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function i(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function I(e){return e.toString(this.encoding)}function u(e){return e&&e.length?this.write(e):""}F.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},F.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},F.prototype.text=function(e,t){var n=function(e,t,n){var Q=t.length-1;if(Q<n)return 0;var B=l(t[Q]);return B>=0?(B>0&&(e.lastNeed=B-1),B):--Q<n||-2===B?0:(B=l(t[Q]))>=0?(B>0&&(e.lastNeed=B-2),B):--Q<n||-2===B?0:(B=l(t[Q]))>=0?(B>0&&(2===B?B=0:e.lastNeed=B-3),B):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var Q=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,Q),e.toString("utf8",t,Q)},F.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var C={StringDecoder:U}},function(e,t,n){"use strict";n.r(t);var Q={};n.r(Q),n.d(Q,"default",(function(){return Bm})),n.d(Q,"Algorithm",(function(){return qC})),n.d(Q,"Calculator",(function(){return $C})),n.d(Q,"CellData",(function(){return em})),n.d(Q,"Contexts",(function(){return Qm})),n.d(Q,"DataArray",(function(){return jC})),n.d(Q,"FieldData",(function(){return _C})),n.d(Q,"GeometryRepresentation",(function(){return zC})),n.d(Q,"GlyphRepresentation",(function(){return PC})),n.d(Q,"ImageData",(function(){return KC})),n.d(Q,"PointCloudRepresentation",(function(){return tm})),n.d(Q,"PointData",(function(){return TC})),n.d(Q,"PolyData",(function(){return MC})),n.d(Q,"Reader",(function(){return YC})),n.d(Q,"ShareDataSet",(function(){return wC})),n.d(Q,"SliceRepresentation",(function(){return HC})),n.d(Q,"View",(function(){return OC})),n.d(Q,"VolumeController",(function(){return kC})),n.d(Q,"VolumeDataRepresentation",(function(){return nm})),n.d(Q,"VolumeRepresentation",(function(){return XC}));var B=n(9),a=(n(3),n(4)),s=n(7),r=n(18),U=n(12);function F(e,t){function n(){for(;t.cellFields.length<t.radius.length;)t.cellFields.push(t.cellFields.length)}t.classHierarchy.push("vtkConcentricCylinderSource"),e.clearRadius=function(){t.radius=[],t.cellFields=[],e.modified()},e.addRadius=function(Q,B){t.radius.push(Q),void 0!==B&&t.cellFields.push(B),n(),e.modified()},e.getNumberOfRadius=function(){return t.radius.length},e.getRadius=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.radius[e]},e.setRadius=function(n,Q){t.radius[n]=Q,e.modified()},e.setCellField=function(n,Q){t.cellFields[n]=Q,e.modified()},e.removeMask=function(){t.mask=null,e.modified()},e.setMaskLayer=function(n,Q){var B=!1;!t.mask&&Q&&(B=!0,t.mask=[]),t.mask&&(!t.mask[n]!=!Q&&(B=!0),t.mask[n]=Q),B&&e.modified()},e.getMaskLayer=function(e){return void 0===e?t.mask:t.mask[e]},e.requestData=function(e,Q){var a;if(!t.deleted&&t.radius.length){n();var F=Q[0],l=t.radius.length,o=t.height/2,g=0,i=0,c=t.startTheta<t.endTheta?t.startTheta:t.endTheta;c*=Math.PI/180;var d=t.endTheta>t.startTheta?t.endTheta:t.startTheta;d*=Math.PI/180;var I=t.resolution,u=!1;d>=c+2*Math.PI?d=c+2*Math.PI:(++I,u=!0);var C=(d-c)/t.resolution,m=I*l*2+2;if(t.skipInnerFaces||t.mask)if(!t.skipInnerFaces&&t.mask){t.mask[0]||(g+=2*(I+1)+5*I+(u?10:0),i+=2+I+(u?2:0));for(var b=1;b<l;b++)t.mask[b]||(g+=20*I+(u?10:0),i+=4*I+(u?2:0))}else{t.skipInnerFaces&&t.mask&&t.mask[0]||(g+=2*(I+1)+(u?10:0),i+=2+(u?2:0),(1===t.radius.length||!t.skipInnerFaces||t.mask&&t.mask[1])&&(g+=5*I,i+=I));for(var S=1;S<l;S++)if(!t.skipInnerFaces||!t.mask||!t.mask[S]){var y=l-1===S;g+=10*I+(u?10:0),i+=2*I+(u?2:0),(!t.skipInnerFaces||t.mask&&t.mask[S-1])&&(g+=5*I,i+=I),(y||!t.skipInnerFaces||t.mask&&t.mask[S+1])&&(g+=5*I,i+=I)}}else g=2*(I+1)+5*I+(l-1)*I*20+(u?10*l:0),i=2+I+4*(l-1)*I+(u?2*l:0);var Z=0,x=new window[t.pointType](3*m),G=0,V=new Uint32Array(g),R=0,L=new Float32Array(i);x[3*Z+0]=0,x[3*Z+1]=0,x[3*Z+2]=o,x[3*++Z+0]=0,x[3*Z+1]=0,x[3*Z+2]=-o,Z++;for(var p=0;p<l;p++){for(var h=t.radius[p],N=0;N<I;N++){var D=c+N*C;x[3*Z+0]=h*Math.cos(D),x[3*Z+1]=h*Math.sin(D),x[3*Z+2]=o,Z++}for(var A=0;A<I;A++){var E=c+A*C;x[3*Z+0]=h*Math.cos(E),x[3*Z+1]=h*Math.sin(E),x[3*Z+2]=-o,Z++}}var f=t.cellFields[0];if(!t.mask||!t.mask[0]){L[R++]=f,V[G++]=I+(u?1:0),u&&(V[G++]=0);for(var J=0;J<I;J++)V[G++]=J+2;L[R++]=f,V[G++]=I+(u?1:0),u&&(V[G++]=1);for(var v=0;v<I;v++)V[G++]=2*I-v-1+2;if(!t.skipInnerFaces||t.mask&&t.mask[1]||1===l)for(var W=0;W<t.resolution;W++)V[G++]=4,V[G++]=(W+1)%I+2,V[G++]=W+2,V[G++]=W+I+2,V[G++]=(W+1)%I+I+2,L[R++]=f;u&&(V[G++]=4,V[G++]=2,V[G++]=0,V[G++]=1,V[G++]=I+2,L[R++]=f,V[G++]=4,V[G++]=0,V[G++]=I+1,V[G++]=2*I+1,V[G++]=1,L[R++]=f)}for(var X=1;X<l;X++)if(!t.mask||!t.mask[X]){var H=2*I*(X-1)+2,k=H+2*I,T=l-1===X;f=t.cellFields[X];for(var M=0;M<t.resolution;M++)V[G++]=4,V[G++]=M+H,V[G++]=(M+1)%I+H,V[G++]=(M+1)%I+k,V[G++]=M+k,L[R++]=f;for(var Y=0;Y<t.resolution;Y++)V[G++]=4,V[G++]=(Y+1)%I+H+I,V[G++]=Y+H+I,V[G++]=Y+k+I,V[G++]=(Y+1)%I+k+I,L[R++]=f;if(!t.skipInnerFaces||t.mask&&t.mask[X-1])for(var w=0;w<t.resolution;w++)V[G++]=4,V[G++]=w+H,V[G++]=(w+1)%I+H,V[G++]=(w+1)%I+I+H,V[G++]=w+I+H,L[R++]=f;if(!t.skipInnerFaces||T||t.mask&&(t.mask[X+1]||T))for(var O=0;O<t.resolution;O++)V[G++]=4,V[G++]=(O+1)%I+k,V[G++]=O+k,V[G++]=O+I+k,V[G++]=(O+1)%I+I+k,L[R++]=f;u&&(V[G++]=4,V[G++]=k,V[G++]=H,V[G++]=I+H,V[G++]=I+k,L[R++]=f,V[G++]=4,V[G++]=t.resolution+k,V[G++]=t.resolution+H,V[G++]=t.resolution+I+H,V[G++]=t.resolution+I+k,L[R++]=f)}(a=r.a.buildFromRadian()).translate.apply(a,Object(B.a)(t.center)).rotateFromDirections([0,0,1],t.direction).apply(x),(F=U.a.newInstance()).getPoints().setData(x,3),F.getPolys().setData(V,1),F.getCellData().setScalars(s.a.newInstance({name:"layer",values:L})),Q[0]=F}}}var l={height:1,radius:[.5],cellFields:[1],resolution:6,startTheta:0,endTheta:360,center:[0,0,0],direction:[0,0,1],skipInnerFaces:!0,mask:null,pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,l,n),a.c.obj(e,t),a.c.setGet(e,t,["height","resolution","startTheta","endTheta","skipInnerFaces"]),a.c.setGetArray(e,t,["center","direction"],3),a.c.getArray(e,t,["cellFields"]),a.c.algo(e,t,0,1),F(e,t)}),"vtkConcentricCylinderSource");function o(e,t){t.classHierarchy.push("vtkConeSource"),e.requestData=function(e,n){var Q;if(!t.deleted){var a=n[0],s=2*Math.PI/t.resolution,F=-t.height/2,l=t.resolution+1,o=4*t.resolution+1+t.resolution,g=0,i=new window[t.pointType](3*l),c=0,d=new Uint32Array(o);i[0]=t.height/2,i[1]=0,i[2]=0,t.capping&&(d[c++]=t.resolution);for(var I=0;I<t.resolution;I++)i[3*++g+0]=F,i[3*g+1]=t.radius*Math.cos(I*s),i[3*g+2]=t.radius*Math.sin(I*s),t.capping&&(d[t.resolution-c+++1]=g);for(var u=0;u<t.resolution;u++)d[c++]=3,d[c++]=0,d[c++]=u+1,d[c++]=u+2>t.resolution?1:u+2;(Q=r.a.buildFromRadian()).translate.apply(Q,Object(B.a)(t.center)).rotateFromDirections([1,0,0],t.direction).apply(i),(a=U.a.newInstance()).getPoints().setData(i,3),a.getPolys().setData(d,1),n[0]=a}}}var g={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g,n),a.c.obj(e,t),a.c.setGet(e,t,["height","radius","resolution","capping"]),a.c.setGetArray(e,t,["center","direction"],3),a.c.algo(e,t,0,1),o(e,t)}),"vtkConeSource");function i(e,t){t.classHierarchy.push("vtkCubeSource"),e.setBounds=function(){var e=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))e=arguments.length<=0?void 0:arguments[0];else for(var n=0;n<arguments.length;n++)e.push(n<0||arguments.length<=n?void 0:arguments[n]);6===e.length&&(t.xLength=e[1]-e[0],t.yLength=e[3]-e[2],t.zLength=e[5]-e[4],t.center=[(e[0]+e[1])/2,(e[2]+e[3])/2,(e[4]+e[5])/2])},e.requestData=function(e,n){var Q;if(!t.deleted){var a=U.a.newInstance();n[0]=a;var F=new window[t.pointType](72);a.getPoints().setData(F,3);var l=new window[t.pointType](72),o=s.a.newInstance({name:"Normals",values:l,numberOfComponents:3});a.getPointData().setNormals(o);var g=2;!0===t.generate3DTextureCoordinates&&(g=3);var i=new window[t.pointType](24*g),c=s.a.newInstance({name:"TextureCoordinates",values:i,numberOfComponents:g});a.getPointData().setTCoords(c);var d=[0,0,0],I=[0,0,0],u=[0,0],C=0;d[0]=-t.xLength/2,I[0]=-1,I[1]=0,I[2]=0;for(var m=0;m<2;m++){d[1]=-t.yLength/2;for(var b=0;b<2;b++){u[1]=d[1]+.5,d[2]=-t.zLength/2;for(var S=0;S<2;S++)u[0]=(d[2]+.5)*(1-2*m),F[3*C]=d[0],F[3*C+1]=d[1],F[3*C+2]=d[2],l[3*C]=I[0],l[3*C+1]=I[1],l[3*C+2]=I[2],2===g?(i[C*g]=u[0],i[C*g+1]=u[1]):(i[C*g]=2*m-1,i[C*g+1]=2*b-1,i[C*g+2]=2*S-1),C++,d[2]+=t.zLength;d[1]+=t.yLength}d[0]+=t.xLength,I[0]+=2}d[1]=-t.yLength/2,I[1]=-1,I[0]=0,I[2]=0;for(var y=0;y<2;y++){d[0]=-t.xLength/2;for(var Z=0;Z<2;Z++){u[0]=(d[0]+.5)*(2*y-1),d[2]=-t.zLength/2;for(var x=0;x<2;x++)u[1]=-1*(d[2]+.5),F[3*C]=d[0],F[3*C+1]=d[1],F[3*C+2]=d[2],l[3*C]=I[0],l[3*C+1]=I[1],l[3*C+2]=I[2],2===g?(i[C*g]=u[0],i[C*g+1]=u[1]):(i[C*g]=2*Z-1,i[C*g+1]=2*y-1,i[C*g+2]=2*x-1),C++,d[2]+=t.zLength;d[0]+=t.xLength}d[1]+=t.yLength,I[1]+=2}d[2]=-t.zLength/2,I[2]=-1,I[0]=0,I[1]=0;for(var G=0;G<2;G++){d[1]=-t.yLength/2;for(var V=0;V<2;V++){u[1]=d[1]+.5,d[0]=-t.xLength/2;for(var R=0;R<2;R++)u[0]=(d[0]+.5)*(2*G-1),F[3*C]=d[0],F[3*C+1]=d[1],F[3*C+2]=d[2],l[3*C]=I[0],l[3*C+1]=I[1],l[3*C+2]=I[2],2===g?(i[C*g]=u[0],i[C*g+1]=u[1]):(i[C*g]=2*R-1,i[C*g+1]=2*V-1,i[C*g+2]=2*G-1),C++,d[0]+=t.xLength;d[1]+=t.yLength}d[2]+=t.zLength,I[2]+=2}r.a.buildFromDegree().rotateX(t.rotations[0]).rotateY(t.rotations[1]).rotateZ(t.rotations[2]).apply(F).apply(l),(Q=r.a.buildFromRadian()).translate.apply(Q,Object(B.a)(t.center)).apply(F);var L=new window[t.pointType](30);a.getPolys().setData(L,1);var p=0;L[p++]=4,L[p++]=0,L[p++]=1,L[p++]=3,L[p++]=2,L[p++]=4,L[p++]=4,L[p++]=6,L[p++]=7,L[p++]=5,L[p++]=4,L[p++]=8,L[p++]=10,L[p++]=11,L[p++]=9,L[p++]=4,L[p++]=12,L[p++]=13,L[p++]=15,L[p++]=14,L[p++]=4,L[p++]=16,L[p++]=18,L[p++]=19,L[p++]=17,L[p++]=4,L[p++]=20,L[p++]=21,L[p++]=23,L[29]=22}}}var c={xLength:1,yLength:1,zLength:1,center:[0,0,0],rotations:[0,0,0],pointType:"Float32Array",generate3DTextureCoordinates:!1};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c,n),a.c.obj(e,t),a.c.setGet(e,t,["xLength","yLength","zLength","generate3DTextureCoordinates"]),a.c.setGetArray(e,t,["center","rotations"],3),a.c.algo(e,t,0,1),i(e,t)}),"vtkCubeSource");function d(e,t){t.classHierarchy.push("vtkCylinderSource"),e.requestData=function(e,n){var Q,a;if(!t.deleted){var F=n[0],l=2*Math.PI/t.resolution,o=2*t.resolution,g=5*t.resolution;t.capping&&(o=4*t.resolution,g=7*t.resolution+2);for(var i=new window[t.pointType](3*o),c=0,d=new Uint32Array(g),I=new Float32Array(3*o),u=s.a.newInstance({numberOfComponents:3,values:I,name:"Normals"}),C=new Float32Array(2*o),m=s.a.newInstance({numberOfComponents:2,values:C,name:"TCoords"}),b=[0,0,0],S=[0,0,0],y=[0,0,0],Z=[0,0,0],x=[0,0],G=[0,0],V=0;V<t.resolution;V++){b[0]=Math.cos(V*l),S[0]=b[0],y[0]=t.radius*b[0]+t.center[0],Z[0]=y[0],x[0]=Math.abs(2*V/t.resolution-1),G[0]=x[0],y[1]=.5*t.height+t.center[1],Z[1]=-.5*t.height+t.center[1],x[1]=0,G[1]=1,b[2]=-Math.sin(V*l),S[2]=b[2],y[2]=t.radius*b[2]+t.center[2],Z[2]=y[2];for(var R=2*V,L=0;L<3;L++)I[3*R+L]=b[L],I[3*(R+1)+L]=S[L],i[3*R+L]=y[L],i[3*(R+1)+L]=Z[L],L<2&&(C[2*R+L]=x[L],C[2*(R+1)+L]=G[L])}for(var p=0;p<t.resolution;p++){d[c++]=4,d[c++]=2*p,d[c++]=2*p+1;var h=(2*p+3)%(2*t.resolution);d[c++]=h,d[c++]=h-1}if(t.capping){for(var N=0;N<t.resolution;N++){y[0]=t.radius*Math.cos(N*l),Z[0]=y[0],x[0]=y[0],G[0]=y[0],y[0]+=t.center[0],Z[0]+=t.center[0],b[1]=1,S[1]=-1,y[1]=.5*t.height+t.center[1],Z[1]=-.5*t.height+t.center[1],y[2]=-t.radius*Math.sin(N*l),Z[2]=y[2],x[1]=y[2],G[1]=y[2],y[2]+=t.center[2],Z[2]+=t.center[2];for(var D=2*t.resolution+N,A=3*t.resolution+t.resolution-N-1,E=0;E<3;E++)I[3*D+E]=b[E],I[3*A+E]=S[E],i[3*D+E]=y[E],i[3*A+E]=Z[E],E<2&&(C[2*D+E]=x[E],C[2*A+E]=G[E])}d[c++]=t.resolution;for(var f=0;f<t.resolution;f++)d[c++]=2*t.resolution+f;d[c++]=t.resolution;for(var J=0;J<t.resolution;J++)d[c++]=3*t.resolution+J}(Q=(a=r.a.buildFromRadian()).translate.apply(a,Object(B.a)(t.center)).rotateFromDirections([0,1,0],t.direction)).translate.apply(Q,Object(B.a)(t.center.map((function(e){return-1*e})))).apply(i),(F=U.a.newInstance()).getPoints().setData(i,3),F.getPolys().setData(d,1),F.getPointData().setNormals(u),F.getPointData().setTCoords(m),n[0]=F}}}var I={height:1,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,I,n),a.c.obj(e,t),a.c.setGet(e,t,["height","radius","resolution","capping"]),a.c.setGetArray(e,t,["center","direction"],3),a.c.algo(e,t,0,1),d(e,t)}),"vtkCylinderSource");var u=n(6),C=a.c.vtkWarningMacro;function m(e,t){t.classHierarchy.push("vtkLineSource"),e.requestData=function(e,n){if(!t.deleted){var Q=n[0],B=Q?Q.getPoints().getDataType():"Float32Array",a=U.a.newInstance(),s=new Float32Array(3);if(Object(u.t)(t.point2,t.point1,s),Object(u.A)(s)<=0)C("Zero-length line definition");else{var r=t.resolution,F=r+1,l=new window[B](3*F);a.getPoints().setData(l,3);var o=new Uint32Array(F+1);a.getLines().setData(o,1);for(var g=0,i=0,c=0;c<r+1;c++)i=c/r,l[3*g]=t.point1[0]+i*s[0],l[3*g+1]=t.point1[1]+i*s[1],l[3*g+2]=t.point1[2]+i*s[2],g++;g=0,o[0]=F;for(var d=0;d<F;d++)o[d+1]=d;n[0]=a}}}}var b={resolution:10,point1:[-1,0,0],point2:[1,0,0],pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,b,n),a.c.obj(e,t),a.c.setGet(e,t,["resolution"]),a.c.setGetArray(e,t,["point1","point2"],3),a.c.algo(e,t,0,1),m(e,t)}),"vtkLineSource");var S=n(8),y=n(10),Z=a.c.vtkWarningMacro;function x(e,t){t.classHierarchy.push("vtkPlaneSource"),e.requestData=function(n,Q){if(!t.deleted){var B=Q[0],a=B?B.getPoints().getDataType():"Float32Array",r=U.a.newInstance(),F=new Float32Array(3),l=new Float32Array(3);if(Object(u.t)(t.point1,t.origin,F),Object(u.t)(t.point2,t.origin,l),e.updatePlane(F,l)){var o=t.xResolution,g=t.yResolution,i=(o+1)*(g+1),c=o*g,d=new window[a](3*i);r.getPoints().setData(d,3);var I=new Uint32Array(5*c);r.getPolys().setData(I,1);var C=new Float32Array(3*i),m=s.a.newInstance({numberOfComponents:3,values:C,name:"Normals"});r.getPointData().setNormals(m);var b=new Float32Array(2*i),S=s.a.newInstance({numberOfComponents:2,values:b,name:"TextureCoordinates"});r.getPointData().setTCoords(S);for(var y=new Float32Array(2),x=0,G=0;G<g+1;G++){y[1]=G/g;for(var V=0;V<o+1;V++)y[0]=V/o,d[3*x]=t.origin[0]+y[0]*F[0]+y[1]*l[0],d[3*x+1]=t.origin[1]+y[0]*F[1]+y[1]*l[1],d[3*x+2]=t.origin[2]+y[0]*F[2]+y[1]*l[2],b[2*x]=y[0],b[2*x+1]=y[1],C[3*x]=t.normal[0],C[3*x+1]=t.normal[1],C[3*x+2]=t.normal[2],x++}x=0;for(var R=0;R<g;R++)for(var L=0;L<o;L++)I[5*x+0]=4,I[5*x+1]=L+R*(o+1),I[5*x+2]=I[5*x+1]+1,I[5*x+3]=I[5*x+1]+o+2,I[5*x+4]=I[5*x+1]+o+1,x++;Q[0]=r}else Z("Bad plane definition")}},e.setNormal=function(){var n=[];if(1===arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=Object(B.a)(arguments.length<=0?void 0:arguments[0]):3===arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),0!==Object(u.y)(n)){var Q=Object(u.q)(t.normal,n),a=0,s=[];Q<1&&(Q<=-1?(a=Object(u.B)(180),Object(u.t)(t.point1,t.origin,s)):(Object(u.w)(t.normal,n,s),a=Math.acos(Q)),e.rotate(a,s))}},e.rotate=function(n,Q){if(!(Math.abs(n)<1e-6)){var B=Object(S.h)(new Float64Array(16)),a=[];Object(y.e)(a,t.center),Object(S.s)(B,B,t.center),Object(S.q)(B,B,n,Q),Object(S.s)(B,B,a),Object(y.q)(t.origin,t.origin,B),Object(y.q)(t.point1,t.point1,B),Object(y.q)(t.point2,t.point2,B),r.a.buildFromRadian().rotate(n,Q).apply(t.normal),e.modified()}},e.setCenter=function(){var n=[];if(1===arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=Object(B.a)(arguments.length<=0?void 0:arguments[0]):3===arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Object(y.f)(n,t.center)){var Q=[];Object(u.t)(t.point1,t.origin,Q);var a=[];Object(u.t)(t.point2,t.origin,a);for(var s=0;s<3;s++)t.center[s]=n[s],t.origin[s]=t.center[s]-.5*(Q[s]+a[s]),t.point1[s]=t.origin[s]+Q[s],t.point2[s]=t.origin[s]+a[s];e.modified()}},e.setPoint1=function(){var n=[];if(1===arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=Object(B.a)(arguments.length<=0?void 0:arguments[0]):3===arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Object(y.f)(n,t.point1)){var Q=[],a=[];t.point1=Object(B.a)(n),Object(u.t)(t.point1,t.origin,Q),Object(u.t)(t.point2,t.origin,a),e.updatePlane(Q,a),e.modified()}},e.setPoint2=function(){var n=[];if(1===arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=Object(B.a)(arguments.length<=0?void 0:arguments[0]):3===arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Object(y.f)(n,t.point2)){var Q=[],a=[];t.point2=Object(B.a)(n),Object(u.t)(t.point1,t.origin,Q),Object(u.t)(t.point2,t.origin,a),e.updatePlane(Q,a),e.modified()}},e.updatePlane=function(e,n){for(var Q=0;Q<3;Q++)t.center[Q]=t.origin[Q]+.5*(e[Q]+n[Q]);return Object(u.w)(e,n,t.normal),0!==Object(u.y)(t.normal)}}var G={xResolution:10,yResolution:10,origin:[0,0,0],point1:[1,0,0],point2:[0,1,0],pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,G,n),t.normal=[0,0,1],t.center=[0,0,0],a.c.obj(e,t),a.c.setGet(e,t,["xResolution","yResolution"]),a.c.setGetArray(e,t,["origin"],3),a.c.getArray(e,t,["point1","point2","normal","center"],3),a.c.algo(e,t,0,1),x(e,t),e.setPoint1(t.point1),e.setPoint2(t.point2)}),"vtkPlaneSource");function V(e,t){t.classHierarchy.push("vtkPointSource"),e.requestData=function(e,n){if(!t.deleted){var Q=n[0],B=Q?Q.getPoints().getDataType():"Float32Array",a=U.a.newInstance(),s=t.numberOfPoints,r=new window[B](3*s);a.getPoints().setData(r,3);var F,l,o,g,i,c=new Uint32Array(s+1);a.getVerts().setData(c,1);for(var d=0;d<s;d++)F=1-2*Object(u.E)(),l=Math.sqrt(1-F*F),g=(o=t.radius*Math.pow(Object(u.E)(),.33333333))*l,i=2*Math.PI*Object(u.E)(),r[3*d]=t.center[0]+g*Math.cos(i),r[3*d+1]=t.center[1]+g*Math.sin(i),r[3*d+2]=t.center[2]+o*F;c[0]=s;for(var I=0;I<s;I++)c[I+1]=I;n[0]=a}}}var R={numberOfPoints:10,center:[0,0,0],radius:.5,pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,R,n),a.c.obj(e,t),a.c.setGet(e,t,["numberOfPoints","radius"]),a.c.setGetArray(e,t,["center"],3),a.c.algo(e,t,0,1),V(e,t)}),"vtkPointSource");function L(e,t){t.classHierarchy.push("vtkSphereSource"),e.requestData=function(e,n){if(!t.deleted){var Q=n[0],B=Q?Q.getPoints().getDataType():"Float32Array";Q=U.a.newInstance();var a=0,r=t.thetaResolution,F=t.startTheta<t.endTheta?t.startTheta:t.endTheta;F*=Math.PI/180;var l=t.endTheta>t.startTheta?t.endTheta:t.startTheta;l*=Math.PI/180;var o=t.startPhi<t.endPhi?t.startPhi:t.endPhi;o*=Math.PI/180;var g=t.endPhi>t.startPhi?t.endPhi:t.startPhi;g*=Math.PI/180,Math.abs(F-l)<2*Math.PI&&++r;var i=(l-F)/t.thetaResolution,c=t.startPhi<=0?1:0,d=t.phiResolution+(t.endPhi>=180?-1:0),I=t.phiResolution*r+2,u=2*t.phiResolution*t.thetaResolution,C=0,m=new window[B](3*I),b=new Float32Array(3*I),S=0,y=new Uint32Array(5*u);t.startPhi<=0&&(m[3*C+0]=t.center[0],m[3*C+1]=t.center[1],m[3*C+2]=t.center[2]+t.radius,b[3*C+0]=0,b[3*C+1]=0,b[3*C+2]=1,C++,a++),t.endPhi>=180&&(m[3*C+0]=t.center[0],m[3*C+1]=t.center[1],m[3*C+2]=t.center[2]-t.radius,b[3*C+0]=0,b[3*C+1]=0,b[3*C+2]=-1,C++,a++);for(var Z=t.phiResolution-a,x=(g-o)/(t.phiResolution-1),G=0;G<r;G++)for(var V=F+G*i,R=c;R<d;R++){var L=o+R*x,p=t.radius*Math.sin(L);b[3*C+0]=p*Math.cos(V),b[3*C+1]=p*Math.sin(V),b[3*C+2]=t.radius*Math.cos(L),m[3*C+0]=b[3*C+0]+t.center[0],m[3*C+1]=b[3*C+1]+t.center[1],m[3*C+2]=b[3*C+2]+t.center[2];var h=Math.sqrt(b[3*C+0]*b[3*C+0]+b[3*C+1]*b[3*C+1]+b[3*C+2]*b[3*C+2]);h=0===h?1:h,b[3*C+0]/=h,b[3*C+1]/=h,b[3*C+2]/=h,C++}var N=Z*r;if(Math.abs(F-l)<2*Math.PI&&--r,t.startPhi<=0)for(var D=0;D<r;D++)y[S++]=3,y[S++]=Z*D+a,y[S++]=Z*(D+1)%N+a,y[S++]=0;if(t.endPhi>=180)for(var A=Z-1+a,E=0;E<r;E++)y[S++]=3,y[S++]=Z*E+A,y[S++]=a-1,y[S++]=Z*(E+1)%N+A;for(var f=0;f<r;f++)for(var J=0;J<Z-1;J++){var v=Z*f+J+a,W=v+1,X=(Z*(f+1)+J)%N+a+1;t.latLongTessellation?(y[S++]=4,y[S++]=v,y[S++]=W,y[S++]=X,y[S++]=X-1):(y[S++]=3,y[S++]=v,y[S++]=W,y[S++]=X,y[S++]=3,y[S++]=v,y[S++]=X,y[S++]=X-1)}m=m.subarray(0,3*C),Q.getPoints().setData(m,3),b=b.subarray(0,3*C);var H=s.a.newInstance({name:"Normals",values:b,numberOfComponents:3});Q.getPointData().setNormals(H),y=y.subarray(0,S),Q.getPolys().setData(y,1),n[0]=Q}}}var p={radius:.5,latLongTessellation:!1,thetaResolution:8,startTheta:0,endTheta:360,phiResolution:8,startPhi:0,endPhi:180,center:[0,0,0],pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,p,n),a.c.obj(e,t),a.c.setGet(e,t,["radius","latLongTessellation","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"]),a.c.setGetArray(e,t,["center"],3),a.c.algo(e,t,0,1),L(e,t)}),"vtkSphereSource");var h=n(16),N=n(22),D=a.c.vtkDebugMacro,A=a.c.vtkErrorMacro;function E(e,t){t.classHierarchy.push("vtkWarpScalar"),e.requestData=function(n,Q){var B=n[0];if(!B)return A("Invalid or missing input"),1;var a=B.getPoints(),s=B.getPointData().getNormals(),r=e.getInputArrayToProcess(0);if(!a||!r)return D("No data to warp",!!a,!!r),Q[0]=n[0],1;var U=a.getNumberOfPoints(),F=null,l=[0,0,1];s&&!t.useNormal?(F=function(e,t){return[t.getData()[3*e],t.getData()[3*e+1],t.getData()[3*e+2]]},D("Using data normals")):e.getXyPlane()?(F=function(e,t){return l},D("Using x-y plane normal")):(F=function(e,n){return t.normal},D("Using Normal instance variable"));for(var o=new Float32Array(3*U),g=a.getData(),i=0,c=[0,0,1],d=1,I=r.getData(),u=r.getNumberOfComponents(),C=0;C<U;++C)i=3*C,c=F(C,s),d=t.xyPlane?g[i+2]:I[C*u],o[i]=g[i]+t.scaleFactor*d*c[0],o[i+1]=g[i+1]+t.scaleFactor*d*c[1],o[i+2]=g[i+2]+t.scaleFactor*d*c[2];var m=Object(h.a)({vtkClass:B.getClassName()});m.shallowCopy(B);var b=N.a.newInstance();return b.setData(o,3),m.setPoints(b),Q[0]=m,1}}var f={scaleFactor:1,useNormal:!1,normal:[0,0,1],xyPlane:!1};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,n),a.c.obj(e,t),a.c.algo(e,t,1,1),a.c.setGet(e,t,["scaleFactor","useNormal","xyPlane"]),a.c.setGetArray(e,t,["normal"],3),E(e,t)}),"vtkWarpScalar");var J=n(17),v=n(30),W=n(31),X={VaryRadius:{VARY_RADIUS_OFF:0,VARY_RADIUS_BY_SCALAR:1,VARY_RADIUS_BY_VECTOR:2,VARY_RADIUS_BY_ABSOLUTE_SCALAR:3},GenerateTCoords:{TCOORDS_OFF:0,TCOORDS_FROM_NORMALIZED_LENGTH:1,TCOORDS_FROM_LENGTH:2,TCOORDS_FROM_SCALARS:3}},H=X.VaryRadius,k=X.GenerateTCoords,T=a.c.vtkDebugMacro,M=a.c.vtkErrorMacro,Y=a.c.vtkWarningMacro;function w(e,t){function n(e,n){var Q=e;return t.sidesShareVertices?Q+=t.numberOfSides*n:Q+=2*t.numberOfSides*n,t.capping&&(Q+=2*t.numberOfSides),Q}function Q(e,t,n){for(var Q=t[n],B=e.slice(3*Q,3*(Q+1)),a=n+1;a<t.length;){var s=t[a];if(B!==e.slice(3*s,3*(s+1)))return a-1;++a}return t.length}function B(e,t,n){for(var B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=[0,0,1],s=t,r=s[0],U=0;U<s.length;U+=r+1)if(1===(r=s[U]))n.setTuple(s[U+1],a);else if(r>1){var F=0,l=[0,0,0],o=[0,0,0],g=s.slice(U+1,U+1+r);if((F=Q(e,g,0))!==r)!function(){var t=g[F],s=e.slice(3*t,3*(t+1)),U=g[F+1],i=e.slice(3*U,3*(U+1));if(l=i.map((function(e,t){return e-s[t]})),Object(u.y)(l),B)a=B;else{for(;++F<r;)if((F=Q(e,g,F))!==r){t=g[F],s=e.slice(3*t,3*(t+1)),U=g[F+1],i=e.slice(3*U,3*(U+1));for(var c=0;c<3;++c)o[c]=i[c]-s[c];Object(u.y)(o);var d=[0,0,0];if(Object(u.w)(l,o,d),Object(u.A)(d)>.001){a=d,l=o;break}}if(F>=r)for(var I=0;I<3;++I)if(0!==l[I]){a[(I+2)%3]=0,a[(I+1)%3]=1,a[I]=-l[(I+1)%3]/l[I];break}}Object(u.y)(a);for(var C=0;++F<r&&(F=Q(e,g,F))!==r;){t=g[F],s=e.slice(3*t,3*(t+1)),U=g[F+1],i=e.slice(3*U,3*(U+1));for(var m=0;m<3;++m)o[m]=i[m]-s[m];Object(u.y)(o);var b=[0,0,0];if(Object(u.w)(l,a,b),0!==Object(u.y)(b)){var S=[0,0,0];if(Object(u.w)(o,l,S),0!==Object(u.y)(S)){var y=Object(u.q)(S,a),Z=1-y*y;Z=Z>0?Math.sqrt(Z):0;for(var x=[0,0,0],G=0;G<3;++G)x[G]=o[G]+l[G];Object(u.y)(x),Object(u.w)(x,S,b),Object(u.w)(l,S,x),Object(u.q)(a,x)*Object(u.q)(b,x)<0&&(Z*=-1);for(var V=C;V<F;++V)n.setTuple(g[V],a);C=F,l=o,a=y*S+Z*b}}}for(var R=C;R<r;++R)n.setTuple(g[R],a)}();else for(var i=0;i<r;++i)n.setTuple(g[i],a)}return 1}function a(e,n,Q,B,a,s,r,U,F,l,o,g,i,c){for(var d=[0,0,0],I=[0,0,0],C=[0,0,0],m=[0,0,0],b=[0,0,0],S=[0,0,0],y=[0,0,0],Z=[0,0,0],x=[0,0,0],G=[0,0,0],V=[0,0,0],R=1,L=e,p=0;p<n;++p){if(0===p){b=B.slice(3*Q[0],3*(Q[0]+1)),S=B.slice(3*Q[1],3*(Q[1]+1));for(var h=0;h<3;++h)d[h]=S[h]-b[h],I[h]=d[h],C[h]=-I[h];Object(u.y)(C)}else if(p===n-1){for(var N=0;N<3;++N)I[N]=d[N],b[N]=S[N],m[N]=d[N];Object(u.y)(m)}else{for(var D=0;D<3;++D)b[D]=S[D];S=B.slice(3*Q[p+1],3*(Q[p+1]+1));for(var A=0;A<3;++A)I[A]=d[A],d[A]=S[A]-b[A]}if(0===Object(u.y)(d))return Y("Coincident points!"),0;for(var E=0;E<3;++E)y[E]=(I[E]+d[E])/2;if(Z=i.slice(3*Q[p],3*(Q[p]+1)),0===Object(u.y)(y)&&(Object(u.w)(I,Z,y),0===Object(u.y)(y)&&T("Using alternate bevel vector")),Object(u.w)(y,Z,x),0===Object(u.y)(x)){var f="Bad normal: s = ";return f+="".concat(y[0],",  ").concat(y[1],", ").concat(y[2]),f+=" n = ".concat(Z[0],",  ").concat(Z[1],", ").concat(Z[2]),Y(f),0}if(Object(u.w)(x,y,G),Object(u.y)(G),F&&t.varyRadius===H.VARY_RADIUS_BY_SCALAR)R=1+(t.radiusFactor-1)*(F.getComponent(Q[p],0)-l[0])/(l[1]-l[0]);else if(o&&t.varyRadius===H.VARY_RADIUS_BY_VECTOR)(R=Math.sqrt(g/Object(u.A)(o.getTuple(Q[p]))))>t.radiusFactor&&(R=t.radiusFactor);else if(F&&t.varyRadius===H.VARY_RADIUS_BY_ABSOLUTE_SCALAR&&(R=F.getComponent(Q[p],0))<0)return Y("Scalar value less than zero, skipping line"),0;if(t.sidesShareVertices)for(var J=0;J<t.numberOfSides;++J){for(var v=0;v<3;++v)V[v]=x[v]*Math.cos(J*c)+G[v]*Math.sin(J*c),y[v]=b[v]+t.radius*R*V[v],a[3*L+v]=y[v],U[3*L+v]=V[v];r.passData(s,Q[p],L),L++}else for(var W=[0,0,0],X=[0,0,0],k=0;k<t.numberOfSides;++k){for(var M=0;M<3;++M)V[M]=x[M]*Math.cos(k*c)+G[M]*Math.sin(k*c),W[M]=x[M]*Math.cos((k-.5)*c)+G[M]*Math.sin((k-.5)*c),X[M]=x[M]*Math.cos((k+.5)*c)+G[M]*Math.sin((k+.5)*c),y[M]=b[M]+t.radius*R*V[M],a[3*L+M]=y[M],U[3*L+M]=W[M],a[3*(L+1)+M]=y[M],U[3*(L+1)+M]=X[M];r.passData(s,Q[p],L+1),L+=2}}if(t.capping){var w=t.numberOfSides,O=1;t.sidesShareVertices||(w=2*t.numberOfSides,O=2);for(var z=0;z<w;z+=O){y=a.slice(3*(e+z),3*(e+z+1));for(var P=0;P<3;++P)a[3*L+P]=y[P],U[3*L+P]=C[P];r.passData(s,Q[0],L),L++}var K=e+(n-1)*t.numberOfSides;t.sidesShareVertices||(K=e+2*(n-1)*t.numberOfSides);for(var j=0;j<w;j+=O){y=a.slice(3*(K+j),3*(K+j+1));for(var _=0;_<3;++_)a[3*L+_]=y[_],U[3*L+_]=m[_];r.passData(s,Q[n-1],L),L++}}return 1}function r(e,n,Q,B,a,s,r){for(var U=0,F=0,l=0,o=B,g=0,i=r.getData(),c=0;g<i.length&&c!==B;)g+=i[g]+1,c++;if(t.sidesShareVertices)for(var d=e;d<t.numberOfSides+e;d+=t.onRatio){U=d%t.numberOfSides,F=(d+1)%t.numberOfSides,i[g++]=2*n;for(var I=0;I<n;++I)l=I*t.numberOfSides,i[g++]=e+F+l,i[g++]=e+U+l;s.passData(a,Q,o++)}else for(var u=e;u<t.numberOfSides+e;u+=t.onRatio){U=u%t.numberOfSides*2+1,F=(u+1)%t.numberOfSides*2,i[g]=2*n,g++;for(var C=0;C<n;++C)l=2*C*t.numberOfSides,i[g++]=e+F+l,i[g++]=e+U+l;s.passData(a,Q,o++)}if(t.capping){var m=e+n*t.numberOfSides,b=0;t.sidesShareVertices||(m=e+2*n*t.numberOfSides),i[g++]=t.numberOfSides,i[g++]=m,i[g++]=m+1;var S=0;for(U=t.numberOfSides-1,F=2,S=0;S<t.numberOfSides-2;++S)S%2?(b=m+F,i[g++]=b,F++):(b=m+U,i[g++]=b,U--);for(s.passData(a,Q,o++),m+=t.numberOfSides,i[g++]=t.numberOfSides,i[g++]=m,i[g++]=m+t.numberOfSides-1,U=t.numberOfSides-2,F=1,S=0;S<t.numberOfSides-2;++S)S%2?(b=m+U,i[g++]=b,U--):(b=m+F,i[g++]=b,F++);s.passData(a,Q,o++)}return o}function F(e,n,Q,B,a,s){var r=t.numberOfSides;t.sidesShareVertices||(r=2*t.numberOfSides);var U=0,F=0,l=a.getData();if(t.generateTCoords===k.TCOORDS_FROM_SCALARS){F=l[Q[0]];for(var o=0;o<n;++o){U=(l[Q[o]]-F)/t.textureLength;for(var g=0;g<r;++g){var i=g/(r-1),c=2*(e+o*r+g);s[c]=U,s[c+1]=i}}}else if(t.generateTCoords===k.TCOORDS_FROM_LENGTH)for(var d=0,I=B.slice(3*Q[0],3*(Q[0]+1)),C=0;C<n;++C){var m=B.slice(3*Q[C],3*(Q[C]+1));U=(d+=Math.sqrt(Object(u.s)(m,I)))/t.textureLength;for(var b=0;b<r;++b){var S=b/(r-1),y=2*(e+C*r+b);s[y]=U,s[y+1]=S}for(var Z=0;Z<3;++Z)I[Z]=m[Z]}else if(t.generateTCoords===k.TCOORDS_FROM_NORMALIZED_LENGTH){for(var x=0,G=0,V=B.slice(3*Q[0],3*(Q[0]+1)),R=0;R<n;++R){var L=B.slice(3*Q[R],3*(Q[R]+1));G+=Math.sqrt(Object(u.s)(L,V));for(var p=0;p<3;++p)V[p]=L[p]}V=B.slice(3*Q[0],3*(Q[0]+1));for(var h=0;h<n;++h){var N=B.slice(3*Q[h],3*(Q[h]+1));U=(x+=Math.sqrt(Object(u.s)(N,V)))/G;for(var D=0;D<r;++D){var A=D/(r-1),E=2*(e+h*r+D);s[E]=U,s[E+1]=A}for(var f=0;f<3;++f)V[f]=N[f]}}if(t.capping){for(var J=e+n*r,v=0;v<t.numberOfSides;++v){var W=2*(J+v);s[W]=0,s[W+1]=0}for(var X=0;X<t.numberOfSides;++X){var H=2*(J+t.numberOfSides+X);s[H]=0,s[H+1]=0}}}t.classHierarchy.push("vtkTubeFilter"),e.requestData=function(Q,l){var o=U.a.newInstance();l[0]=o;var g=Q[0];if(g){var i=g.getPoints();if(i){var c=i.getNumberOfPoints();if(!(c<1)){var d=g.getLines();if(d){var I=d.getNumberOfCells();if(!(I<1)){var u=c*t.numberOfSides;t.capping&&(u=(c+2*I)*t.numberOfSides);var C=i.getDataType();t.outputPointsPrecision===W.b.SINGLE?C=J.a.FLOAT:t.outputPointsPrecision===W.b.DOUBLE&&(C=J.a.DOUBLE);var m=N.a.newInstance({dataType:C,size:3*u,numberOfComponents:3}),b=3*u;t.capping&&(b=3*(u+2*t.numberOfSides));for(var S=new Float32Array(b),y=s.a.newInstance({numberOfComponents:3,values:S,name:"TubeNormals"}),Z=0,x=d.getData(),G=x[0],V=0;V<x.length;V+=G+1)Z+=(2*(G=x[V])+1)*Math.ceil(t.numberOfSides/t.onRatio),t.capping&&(Z+=2*(t.numberOfSides+1));var R=new Uint32Array(Z),L=v.a.newInstance({values:R}),p=0,h=g.getPointData().getNormals(),D=null,A=!1;h&&!t.useDefaultNormal||(D=new Float32Array(3*c),h=s.a.newInstance({numberOfComponents:3,values:D,name:"Normals"}),t.useDefaultNormal?D=D.map((function(e,n){var Q=n%3;return t.defaultNormal[Q]})):A=!0);for(var E=g.getPointData().getNumberOfArrays(),f=null,X=null,T=0;T<E;T++)f=g.getPointData().getArrayByIndex(T),X=s.a.newInstance({name:f.getName(),dataType:f.getDataType(),numberOfComponents:f.getNumberOfComponents(),size:u*f.getNumberOfComponents()}),o.getPointData().removeArrayByIndex(0),o.getPointData().addArray(X);var w=d.getNumberOfCells()*t.numberOfSides;t.capping&&(w+=2);for(var O=g.getCellData().getNumberOfArrays(),z=0;z<O;z++)f=g.getCellData().getArrayByIndex(z),X=s.a.newInstance({name:f.getName(),dataType:f.getDataType(),numberOfComponents:f.getNumberOfComponents(),size:w*f.getNumberOfComponents()}),o.getCellData().removeArrayByIndex(0),o.getCellData().addArray(X);var P=e.getInputArrayToProcess(0),K=null,j=[];P&&(K=s.a.newInstance({name:P.getName(),dataType:P.getDataType(),numberOfComponents:P.getNumberOfComponents(),size:u*P.getNumberOfComponents()}),(j=P.getRange())[1]-j[0]==0&&(t.varyRadius===H.VARY_RADIUS_BY_SCALAR&&Y("Scalar range is zero!"),j[1]=j[0]+1));var _=e.getInputArrayToProcess(1),q=0;_&&(q=_.getMaxNorm());var $=o.getCellData();$.copyNormalsOff(),$.passData(g.getCellData());var ee=o.getPointData();null!==ee.getNormals()&&ee.copyNormalsOff(),P&&K&&ee.setScalars(K);var te=null;if(t.generateTCoords===k.TCOORDS_FROM_SCALARS&&P||t.generateTCoords===k.TCOORDS_FROM_LENGTH||t.generateTCoords===k.TCOORDS_FROM_NORMALIZED_LENGTH){var ne=new Float32Array(2*u);te=s.a.newInstance({numberOfComponents:2,values:ne,name:"TCoords"}),ee.copyTCoordsOff()}ee.passData(g.getPointData());var Qe=2*Math.PI/t.numberOfSides;G=x[0];for(var Be=0,ae=g.getVerts().getNumberOfCells(),se=0;se<x.length;se+=G+1){G=x[se];var re=x.slice(se+1,se+1+G);if(G>1&&A){var Ue=x.slice(se,se+G+1);B(i.getData(),Ue,h)}a(Be,G,re,i.getData(),m.getData(),g.getPointData(),ee,S,P,j,_,q,D,Qe)?(p=r(Be,G,ae,p,g.getCellData(),$,L),te&&F(Be,G,re,i.getData(),P,te.getData())):Y("Could not generate points"),Be=n(Be,G),ae++}o.setPoints(m),o.setStrips(L),o.setPointData(ee),ee.setNormals(y),l[0]=o}}}}}else M("Invalid or missing input")}}var O={outputPointsPrecision:W.b.DEFAULT,radius:.5,varyRadius:H.VARY_RADIUS_OFF,numberOfSides:3,radiusFactor:10,defaultNormal:[0,0,1],useDefaultNormal:!1,sidesShareVertices:!0,capping:!1,onRatio:1,offset:0,generateTCoords:k.TCOORDS_OFF,textureLength:1};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,O,n),a.c.setGet(e,t,["outputPointsPrecision","radius","varyRadius","numberOfSides","radiusFactor","defaultNormal","useDefaultNormal","sidesShareVertices","capping","onRatio","offset","generateTCoords","textureLength"]),a.c.obj(e,t),a.c.algo(e,t,1,1),w(e,t)}),"vtkTubeFilter");var z=n(20),P=n(34),K={diffuse_red:"red",diffuse_green:"green",diffuse_blue:"blue"},j={patternHeader:/ply([\s\S]*)end_header\r?\n/,patternBody:/end_header\s([\s\S]*)$/};function _(e){var t="",n=0,Q=j.patternHeader.exec(e);null!==Q&&(t=Q[1],n=Q[0].length);for(var B,a,s,r={comments:[],elements:[],headerLength:n},U=t.split("\n"),F=0;F<U.length;F++){var l=U[F];if(""!==(l=l.trim())){var o=void 0;switch(a=(s=l.split(/\s+/)).shift(),l=s.join(" "),a){case"format":r.format=s[0],r.version=s[1];break;case"comment":r.comments.push(l);break;case"element":void 0!==B&&r.elements.push(B),(B={}).name=s[0],B.count=parseInt(s[1],10),B.properties=[];break;case"property":"list"===(o={type:s[0]}).type?(o.name=s[3],o.countType=s[1],o.itemType=s[2]):o.name=s[1],o.name in K&&(o.name=K[o.name]),B.properties.push(o);break;case"obj_info":r.objInfo=l;break;default:console.warn("unhandled",a,s)}}}return void 0!==B&&r.elements.push(B),r}function q(e,t){var n=t.find((function(e){return"vertex"===e.name})),Q=t.find((function(e){return"face"===e.name})),B=0,a=0;n&&(B=n.count),Q&&(a=Q.count);for(var r=new Float32Array(3*B),F=new Uint8Array(3*B),l=new Float32Array(2*B),o=new Float32Array(3*B),g=e.colors.length>0,i=e.uvs.length>0,c=e.normals.length>0,d=e.faceVertexUvs.length>0,I=0;I<B;I++){var u=3*I+0,C=3*I+1,m=3*I+2;r[u]=e.vertices[u],r[C]=e.vertices[C],r[m]=e.vertices[m],g&&(F[u]=e.colors[u],F[C]=e.colors[C],F[m]=e.colors[m]),i&&(C=2*I+1,l[u=2*I+0]=e.uvs[u],l[C]=e.uvs[C]),c&&(o[u]=e.normals[u],o[C]=e.normals[C],o[m]=e.normals[m])}if(!i&&d)for(var b=0,S=0,y=0;y<a;++y){var Z=e.indices[b++],x=e.faceVertexUvs[S++];if(x&&2*Z===x.length)for(var G=0;G<Z;++G){var V=e.indices[b++];l[2*V+0]=x[2*G+0],l[2*V+1]=x[2*G+1]}else b+=Z}var R=U.a.newInstance();if(R.getPoints().setData(r,3),g&&R.getPointData().setScalars(s.a.newInstance({numberOfComponents:3,values:F,name:"Scalars"})),i||d){var L=s.a.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"}),p=R.getPointData();p.addArray(L),p.setActiveTCoords(L.getName())}return c&&R.getPointData().setNormals(s.a.newInstance({numberOfComponents:3,name:"Normals",values:o})),R.getPolys().setData(Uint32Array.from(e.indices)),R}function $(e,t){var n;switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":n=parseInt(e,10);break;case"float":case"double":case"float32":case"float64":n=parseFloat(e);break;default:console.log("Unsupported type")}return n}function ee(e,t){for(var n=t.split(/\s+/),Q={},B=0;B<e.length;B++)if("list"===e[B].type){for(var a=[],s=$(n.shift(),e[B].countType),r=0;r<s;r++)a.push($(n.shift(),e[B].itemType));Q[e[B].name]=a}else Q[e[B].name]=$(n.shift(),e[B].type);return Q}function te(e,t,n){if("vertex"===t)e.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&e.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n?e.uvs.push(n.s,n.t):"u"in n&&"v"in n?e.uvs.push(n.u,n.v):"texture_u"in n&&"texture_v"in n&&e.uvs.push(n.texture_u,n.texture_v),"red"in n&&"green"in n&&"blue"in n&&e.colors.push(n.red,n.green,n.blue);else if("face"===t){var Q=n.vertex_indices||n.vertex_index,B=n.texcoord;Q&&Q.length>0&&(e.indices.push(Q.length),Q.forEach((function(t,n){e.indices.push(t)}))),e.faceVertexUvs.push(B)}}function ne(e,t,n,Q){var B;switch(n){case"int8":case"char":B=[e.getInt8(t),1];break;case"uint8":case"uchar":B=[e.getUint8(t),1];break;case"int16":case"short":B=[e.getInt16(t,Q),2];break;case"uint16":case"ushort":B=[e.getUint16(t,Q),2];break;case"int32":case"int":B=[e.getInt32(t,Q),4];break;case"uint32":case"uint":B=[e.getUint32(t,Q),4];break;case"float32":case"float":B=[e.getFloat32(t,Q),4];break;case"float64":case"double":B=[e.getFloat64(t,Q),8];break;default:console.log("Unsupported type")}return B}function Qe(e,t,n,Q){for(var B,a={},s=0,r=0;r<n.length;r++)if("list"===n[r].type){var U=[],F=(B=ne(e,t+s,n[r].countType,Q))[0];s+=B[1];for(var l=0;l<F;l++)B=ne(e,t+s,n[r].itemType,Q),U.push(B[0]),s+=B[1];a[n[r].name]=U}else B=ne(e,t+s,n[r].type,Q),a[n[r].name]=B[0],s+=B[1];return[a,s]}function Be(e,t){function n(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},B=t.compression,a=t.progressCallback;return Q.binary?t.dataAccessHelper.fetchBinary(n,{compression:B,progressCallback:a}):t.dataAccessHelper.fetchText(e,n,{compression:B,progressCallback:a})}t.classHierarchy.push("vtkPLYReader"),t.dataAccessHelper||(t.dataAccessHelper=z.a.get("http")),e.setUrl=function(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{binary:!0};t.url=n;var B=n.split("/");return B.pop(),t.baseURL=B.join("/"),t.compression=Q.compression,e.loadData({progressCallback:Q.progressCallback,binary:!!Q.binary})},e.loadData=function(){var Q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},B=n(t.url,Q);return B.then(e.parse),B},e.parse=function(t){"string"==typeof t?e.parseAsText(t):e.parseAsArrayBuffer(t)},e.parseAsArrayBuffer=function(n){if(n&&n!==t.parseData){e.modified();var Q=_(P.a.arrayBufferToString(n));if("ascii"!==Q.format){t.parseData=n;for(var B,a={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},s="binary_little_endian"===Q.format,r=n instanceof ArrayBuffer?n:n.buffer,U=new DataView(r,Q.headerLength),F=0,l=0;l<Q.elements.length;l++)for(var o=0;o<Q.elements[l].count;o++){F+=(B=Qe(U,F,Q.elements[l].properties,s))[1];var g=B[0];te(a,Q.elements[l].name,g)}var i=q(a,Q.elements);t.output[0]=i}else e.parseAsText(n)}},e.parseAsText=function(n){if(n&&n!==t.parseData){e.modified(),t.parseData=n;var Q=P.a.arrayBufferToString(n),B=_(Q);if("ascii"!==B.format)e.parseAsArrayBuffer(n);else{var a={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},s=j.patternBody.exec(Q),r="";null!==s&&(r=s[1]);for(var U=r.split("\n"),F=0,l=0,o=0;o<U.length;o++){var g=U[o];if(""!==(g=g.trim())){l>=B.elements[F].count&&(F++,l=0);var i=ee(B.elements[F].properties,g);te(a,B.elements[F].name,i),l++}}var c=q(a,B.elements);t.output[0]=c}}},e.requestData=function(n,Q){e.parse(t.parseData)}}var ae={};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ae,n),a.c.obj(e,t),a.c.get(e,t,["url","baseURL"]),a.c.setGet(e,t,["dataAccessHelper"]),a.c.algo(e,t,0,1),Be(e,t),t.compression||(t.compression=null),t.progressCallback||(t.progressCallback=null)}),"vtkPLYReader"),n(51);function se(e,t){t.classHierarchy.push("vtkElevationReader"),t.dataAccessHelper||(t.dataAccessHelper=z.a.get("http")),e.setUrl=function(n,Q){return t.url=n,e.loadData(Q)},e.loadData=function(n){return function(n,Q){return t.dataAccessHelper.fetchText(e,n,Q)}(t.url,n).then((function(t){return e.parseAsText(t),!0}))},e.parseAsText=function(n){t.csv=n,t.elevation=[],t.csv.split("\n").forEach((function(e,n){t.elevation.push(e.split(",").map((function(e){return Number(e)})))})),e.modified()},e.requestData=function(e,n){var Q=U.a.newInstance();if(Q.getPoints().setData(new Float32Array(0,0,0,1,1,1),3),t.elevation){var B=t.elevation.length,a=t.elevation[0].length,r=Q.getPoints();r.setNumberOfPoints(a*B,3);var F=r.getData(),l=v.a.newInstance({size:5*(a-1)*(B-1)});Q.setPolys(l);var o=l.getData(),g=0,i=new Float32Array(a*B*2),c=s.a.newInstance({numberOfComponents:2,values:i,name:"TextureCoordinates"});Q.getPointData().setTCoords(c);for(var d=0;d<B;d++)for(var I=0;I<a;I++){var u=d*a+I,C=3*u;F[C+0]=t.origin[0]+I*t.xSpacing*t.xDirection,F[C+1]=t.origin[1]+d*t.ySpacing*t.yDirection,F[C+2]=t.origin[2]+t.elevation[d][I]*t.zScaling,i[2*u]=I/(a-1),i[2*u+1]=1-d/(B-1),I>0&&d>0&&(o[g++]=4,o[g++]=u,o[g++]=u-1,o[g++]=u-1-a,o[g++]=u-a)}}t.output[0]=Q},e.isBusy=function(){return!!t.requestCount}}var re={origin:[0,0,0],xSpacing:1,ySpacing:1,zScaling:1,xDirection:1,yDirection:-1,requestCount:0};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,re,n),a.c.obj(e,t),a.c.get(e,t,["url"]),a.c.setGet(e,t,["dataAccessHelper","xSpacing","ySpacing","zScaling","xDirection","yDirection"]),a.c.algo(e,t,0,1),a.c.event(e,t,"busy"),se(e,t)}),"vtkElevationReader");var Ue=n(15),Fe={};function le(e,t,n,Q){for(var B=0;B<Q;B++)n.push(e[t+B])}function oe(e){if("#"!==e[0]){var t,n,Q=e.split(/[ \t]+/);if(Q[0]===Fe.splitOn)Q.shift(),Fe.pieces.push(Q.join(" ").trim()),Fe.f.push([]),Fe.size++;else if("v"===Q[0])Fe.v.push(Number(Q[1])),Fe.v.push(Number(Q[2])),Fe.v.push(Number(Q[3]));else if("vt"===Q[0])Fe.vt.push(Number(Q[1])),Fe.vt.push(Number(Q[2]));else if("vn"===Q[0])Fe.vn.push(Number(Q[1])),Fe.vn.push(Number(Q[2])),Fe.vn.push(Number(Q[3]));else if("f"===Q[0]){0===Fe.size&&Fe.size++;var B=Fe.f[Fe.size-1];Q.shift();var a=Q.filter((function(e){return e.length>0&&"\r"!==e})),s=a.length;B.push(s);for(var r=0;r<s;r++)B.push((void 0,void 0,[n=(t=a[r].split("/").map((function(e){return Number(e)})))[0]-1,t[1]?t[1]-1:n,t[2]?t[2]-1:n]))}}}function ge(e,t){function n(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dataAccessHelper.fetchText(e,n,Q)}t.classHierarchy.push("vtkOBJReader"),t.dataAccessHelper||(t.dataAccessHelper=z.a.get("http")),e.setUrl=function(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(-1!==n.indexOf(".obj")||Q.fullpath){t.url=n;var B=n.split("/");B.pop(),t.baseURL=B.join("/")}else t.baseURL=n,t.url="".concat(n,"/index.obj");return e.loadData(Q)},e.loadData=function(){var Q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(t.url,Q).then(e.parseAsText)},e.parseAsText=function(n){return!n||(n!==t.parseData&&e.modified(),t.parseData=n,t.numberOfOutputs=0,Q=t.splitMode,Fe.splitOn=Q,Fe.pieces=[],Fe.v=[],Fe.vt=[],Fe.vn=[],Fe.f=[[]],Fe.size=0,n.split("\n").forEach(oe),function(e){var t=!!Fe.vt.length,n=!!Fe.vn.length;if(e.splitMode){e.numberOfOutputs=Fe.size;for(var Q=0;Q<Fe.size;Q++){for(var B={},a=U.a.newInstance({name:Fe.pieces[Q]}),r=[],F=[],l=[],o=[],g=Fe.f[Q],i=g.length,c=0;c<i;){var d=g[c];o.push(d);for(var I=0;I<d;I++){var u=Object(Ue.a)(g[c+I+1],3),C=u[0],m=u[1],b=u[2],S="".concat(C,"/").concat(m,"/").concat(b);void 0===B[S]&&(B[S]=r.length/3,le(Fe.v,3*C,r,3),t&&le(Fe.vt,2*m,F,2),n&&le(Fe.vn,3*b,l,3)),o.push(B[S])}c+=d+1}if(a.getPoints().setData(Float32Array.from(r),3),a.getPolys().setData(Uint32Array.from(o)),t){var y=s.a.newInstance({numberOfComponents:2,values:Float32Array.from(F),name:"TextureCoordinates"});a.getPointData().setTCoords(y)}if(n){var Z=s.a.newInstance({numberOfComponents:3,values:Float32Array.from(l),name:"Normals"});a.getPointData().setNormals(Z)}e.output[Q]=a}}else{e.numberOfOutputs=1;var x=U.a.newInstance();if(x.getPoints().setData(Float32Array.from(Fe.v),3),t&&Fe.v.length/3==Fe.vt.length/2){var G=s.a.newInstance({numberOfComponents:2,values:Float32Array.from(Fe.vt),name:"TextureCoordinates"});x.getPointData().setTCoords(G)}if(n&&Fe.v.length===Fe.vn.length){var V=s.a.newInstance({numberOfComponents:3,values:Float32Array.from(Fe.vn),name:"Normals"});x.getPointData().setNormals(V)}for(var R=[],L=Fe.f[0],p=L.length,h=0;h<p;){var N=L[h];R.push(N);for(var D=0;D<N;D++){var A=Object(Ue.a)(L[h+D+1],1)[0];R.push(A)}h+=N+1}x.getPolys().setData(Uint32Array.from(R)),e.output[0]=x}}(t),!0);var Q},e.requestData=function(n,Q){e.parseAsText(t.parseData)},e.isBusy=function(){return!!t.requestCount},e.getNumberOfOutputPorts=function(){return t.numberOfOutputs}}var ie={numberOfOutputs:1,requestCount:0,splitMode:null};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ie,n),a.c.obj(e,t),a.c.get(e,t,["url","baseURL"]),a.c.setGet(e,t,["dataAccessHelper","splitMode"]),a.c.algo(e,t,0,1),a.c.event(e,t,"busy"),ge(e,t)}),"vtkOBJReader");var ce=["chemical json","name","inchi","formula","atoms","bonds","properties"];function de(e,t){t.classHierarchy.push("vtkMolecule")}var Ie={"chemical json":0,name:"",inchi:"",formula:"",atoms:null,bonds:null,properties:null};function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ie,n),a.c.obj(e,t),t.atoms||(t.atoms={}),t.bonds||(t.bonds={}),t.properties||(t.properties={}),a.c.setGet(e,t,ce),de(0,t)}var Ce={newInstance:a.c.newInstance(ue,"vtkMolecule"),extend:ue},me={H:[1],He:[2],Li:[3],Be:[4],B:[5],C:[6],N:[7],O:[8],F:[9],Ne:[10],Na:[11],Mg:[12],Al:[13],Si:[14],P:[15],S:[16],Cl:[17],Ar:[18],K:[19],Ca:[20],Sc:[21],Ti:[22],V:[23],Cr:[24],Mn:[25],Fe:[26],Co:[27],Ni:[28],Cu:[29],Zn:[30],Ga:[31],Ge:[32],As:[33],Se:[34],Br:[35],Kr:[36],Rb:[37],Sr:[38],Y:[39],Zr:[40],Nb:[41],Mo:[42],Tc:[43],Ru:[44],Rh:[45],Pd:[46],Ag:[47],Cd:[48],In:[49],Sn:[50],Sb:[51],Te:[52],I:[53],Xe:[54],Cs:[55],Ba:[56],La:[57],Ce:[58],Pr:[59],Nd:[60],Pm:[61],Sm:[62],Eu:[63],Gd:[64],Tb:[65],Dy:[66],Ho:[67],Er:[68],Tm:[69],Yb:[70],Lu:[71],Hf:[72],Ta:[73],W:[74],Re:[75],Os:[76],Ir:[77],Pt:[78],Au:[79],Hg:[80],Tl:[81],Pb:[82],Bi:[83],Po:[84],At:[85],Rn:[86],Fr:[87],Ra:[88],Ac:[89],Th:[90],Pa:[91],U:[92],Np:[93],Pu:[94],Am:[95],Cm:[96],Bk:[97],Cf:[98],Es:[99],Fm:[100],Md:[101],No:[102],Lr:[103],Rf:[104],Db:[105],Sg:[106],Bh:[107],Hs:[108],Mt:[109],Ds:[110],Rg:[111],Cn:[112],Uut:[113],Uuq:[114],Uup:[115],Uuh:[116],Uus:[117],Uuo:[118]};function be(e,t){t.classHierarchy.push("vtkPDBReader"),t.dataAccessHelper||(t.dataAccessHelper=z.a.get("http")),e.setUrl=function(n,Q){if(-1===n.indexOf(".pdb"))t.baseURL=n,t.url="".concat(n);else{t.url=n;var B=n.split("/");B.pop(),t.baseURL=B.join("/")}return e.loadData(Q)},e.loadData=function(n){return function(n,Q){return t.dataAccessHelper.fetchText(e,n,Q)}(t.url,n).then(e.parseAsText)},e.parseAsText=function(n){return t.pdb=n,t.molecule=[],t.molecule=t.pdb.split("\n"),e.modified(),!0},e.requestData=function(e,n){var Q=Ce.newInstance();if(t.molecule){var B=t.molecule.length,a=[],s=[];t.numberOfAtoms=0;for(var r=0;r<B&&"END"!==t.molecule[r];){var U=t.molecule[r].length,F=t.molecule[r],l=F.substr(0,6).replace(/\s+/g,"");if(l.toUpperCase(),"ATOM"===l||"HETATM"===l){var o=F.substr(12,4).replace(/\s+/g,""),g=F.substr(30,8).replace(/\s+/g,""),i=F.substr(38,8).replace(/\s+/g,""),c=F.substr(46,8).replace(/\s+/g,""),d="";U>=78&&(d=F.substr(76,2).replace(/\s+/g,"")),""===d&&(d=o.substr(0,2).replace(/\d/g,"")),a.push(g),a.push(i),a.push(c);var I=Object(Ue.a)(me[d],1)[0];s.push(I),t.numberOfAtoms++}r++}Q.getAtoms().elements={},Q.getAtoms().elements.number=Int8Array.from(s),Q.getAtoms().coords={},Q.getAtoms().coords["3d"]=Float32Array.from(a)}t.output[0]=Q},e.isBusy=function(){return!!t.requestCount}}var Se={numberOfAtoms:0,requestCount:0};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Se,n),a.c.obj(e,t),a.c.get(e,t,["url","baseURL","numberOfAtoms","requestCount"]),a.c.setGet(e,t,["dataAccessHelper"]),a.c.algo(e,t,0,1),a.c.event(e,t,"busy"),be(e,t)}),"vtkPDBReader");var ye=n(5),Ze=n(13),xe=n(14),Ge=n(33);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var Re=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function Le(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function pe(e){return e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function he(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ne(e){return he(e,Re)}function De(e){var t=Object(Ue.a)(e,6),n=t[0],Q=t[1],B=t[2],a=t[3],s=t[4],r=t[5];e[0]=n<(arguments.length<=1?void 0:arguments[1])?n:arguments.length<=1?void 0:arguments[1],e[1]=Q>(arguments.length<=1?void 0:arguments[1])?Q:arguments.length<=1?void 0:arguments[1],e[2]=B<(arguments.length<=2?void 0:arguments[2])?B:arguments.length<=2?void 0:arguments[2],e[3]=a>(arguments.length<=2?void 0:arguments[2])?a:arguments.length<=2?void 0:arguments[2],e[4]=s<(arguments.length<=3?void 0:arguments[3])?s:arguments.length<=3?void 0:arguments[3],e[5]=r>(arguments.length<=3?void 0:arguments[3])?r:arguments.length<=3?void 0:arguments[3]}function Ae(e,t,n,Q,B,a,s){var r=Object(Ue.a)(e,6),U=r[0],F=r[1],l=r[2],o=r[3],g=r[4],i=r[5];void 0===s?(e[0]=Math.min(t[0],U),e[1]=Math.max(t[1],F),e[2]=Math.min(t[2],l),e[3]=Math.max(t[3],o),e[4]=Math.min(t[4],g),e[5]=Math.max(t[5],i)):(e[0]=Math.min(t,U),e[1]=Math.max(n,F),e[2]=Math.min(Q,l),e[3]=Math.max(B,o),e[4]=Math.min(a,g),e[5]=Math.max(s,i))}function Ee(e,t,n,Q){var B=Object(Ue.a)(e,6),a=B[0],s=B[1],r=B[2],U=B[3],F=B[4],l=B[5];return e[0]=t,e[1]=t>s?t:s,e[2]=n,e[3]=n>U?n:U,e[4]=Q,e[5]=Q>l?Q:l,a!==t||r!==n||F!==Q}function fe(e,t,n,Q){var B=Object(Ue.a)(e,6),a=B[0],s=B[1],r=B[2],U=B[3],F=B[4],l=B[5];return e[0]=t<a?t:a,e[1]=t,e[2]=n<r?n:r,e[3]=n,e[4]=Q<F?Q:F,e[5]=Q,s!==t||U!==n||l!==Q}function Je(e,t){e[0]-=t,e[1]+=t,e[2]-=t,e[3]+=t,e[4]-=t,e[5]+=t}function ve(e,t,n,Q){return!!pe(e)&&(t>=0?(e[0]*=t,e[1]*=t):(e[0]=t*e[1],e[1]=t*e[0]),n>=0?(e[2]*=n,e[3]*=n):(e[2]=n*e[3],e[3]=n*e[2]),Q>=0?(e[4]*=Q,e[5]*=Q):(e[4]=Q*e[5],e[5]=Q*e[4]),!0)}function We(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function Xe(e,t){return e[2*t+1]-e[2*t]}function He(e){return[Xe(e,0),Xe(e,1),Xe(e,2)]}function ke(e){return e.slice(0,2)}function Te(e){return e.slice(2,4)}function Me(e){return e.slice(4,6)}function Ye(e){var t=He(e);return t[0]>t[1]?t[0]>t[2]?t[0]:t[2]:t[1]>t[2]?t[1]:t[2]}function we(e){if(pe(e)){var t=He(e);return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}return null}function Oe(e){return[e[0],e[2],e[4]]}function ze(e){return[e[1],e[3],e[5]]}function Pe(e,t){return e<=0&&t>=0||e>=0&&t<=0}function Ke(e,t){for(var n=0,Q=0;Q<2;Q++)for(var B=2;B<4;B++)for(var a=4;a<6;a++)t[n]=[e[Q],e[B],e[a]],n++}function je(e,t,n){t[0]=e[0],t[1]=e[2],t[2]=e[4],n[0]=e[1],n[1]=e[3],n[2]=e[5]}function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=We(e);return t[0]=e[1]-n[0],t[1]=e[3]-n[1],t[2]=e[5]-n[2],t}function qe(e,t,n,Q){for(var B=[].concat(Re),a=e.getData(),s=0;s<a.length;s+=3){var r=[a[s],a[s+1],a[s+2]],U=Object(u.q)(r,t);B[0]=Math.min(U,B[0]),B[1]=Math.max(U,B[1]);var F=Object(u.q)(r,n);B[2]=Math.min(F,B[2]),B[3]=Math.max(F,B[3]);var l=Object(u.q)(r,Q);B[4]=Math.min(l,B[4]),B[5]=Math.max(l,B[5])}return B}function $e(e,t,n,Q,B){for(var a=!0,s=[],r=0,U=[],F=[0,0,0],l=0;l<3;l++)t[l]<e[2*l]?(s[l]=1,F[l]=e[2*l],a=!1):t[l]>e[2*l+1]?(s[l]=0,F[l]=e[2*l+1],a=!1):s[l]=2;if(a)return Q[0]=t[0],Q[1]=t[1],Q[2]=t[2],B[0]=0,1;for(var o=0;o<3;o++)2!==s[o]&&0!==n[o]?U[o]=(F[o]-t[o])/n[o]:U[o]=-1;for(var g=0;g<3;g++)U[r]<U[g]&&(r=g);if(U[r]>1||U[r]<0)return 0;B[0]=U[r];for(var i=0;i<3;i++)if(r!==i){if(Q[i]=t[i]+U[r]*n[i],Q[i]<e[2*i]||Q[i]>e[2*i+1])return 0}else Q[i]=F[i];return 1}function et(e,t,n){for(var Q=[],B=0,a=1,s=1,r=4;r<=5;++r){Q[2]=e[r];for(var U=2;U<=3;++U){Q[1]=e[U];for(var F=0;F<=1;++F)if(Q[0]=e[F],B=Ge.a.evaluate(n,t,Q),s&&(a=B>=0?1:-1,s=0),0===B||a>0&&B<0||a<0&&B>0)return 1}}return 0}function tt(e,t){if(!pe(e)||!pe(t))return!1;for(var n,Q=[0,0,0,0,0,0],B=0;B<3;B++)if(n=!1,t[2*B]>=e[2*B]&&t[2*B]<=e[2*B+1]?(n=!0,Q[2*B]=t[2*B]):e[2*B]>=t[2*B]&&e[2*B]<=t[2*B+1]&&(n=!0,Q[2*B]=e[2*B]),t[2*B+1]>=e[2*B]&&t[2*B+1]<=e[2*B+1]?(n=!0,Q[2*B+1]=t[2*B+1]):e[2*B+1]>=t[2*B]&&e[2*B+1]<=t[2*B+1]&&(n=!0,Q[2*B+1]=e[2*B+1]),!n)return!1;return e[0]=Q[0],e[1]=Q[1],e[2]=Q[2],e[3]=Q[3],e[4]=Q[4],e[5]=Q[5],!0}function nt(e,t){if(!pe(e)||!pe(t))return!1;for(var n=0;n<3;n++)if(!(t[2*n]>=e[2*n]&&t[2*n]<=e[2*n+1]||e[2*n]>=t[2*n]&&e[2*n]<=t[2*n+1]||t[2*n+1]>=e[2*n]&&t[2*n+1]<=e[2*n+1]||e[2*n+1]>=t[2*n]&&e[2*n+1]<=t[2*n+1]))return!1;return!0}function Qt(e,t,n,Q){return!(t<e[0]||t>e[1]||n<e[2]||n>e[3]||Q<e[4]||Q>e[5])}function Bt(e,t,n){for(var Q=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],B=[0,0,0,0,0,0,0,0],a=0,s=0;s<2;s++)for(var r=2;r<4;r++)for(var U=4;U<6;U++){var F=[e[s],e[r],e[U]];B[a++]=Ge.a.evaluate(n,t,F)}for(var l=2;l--&&!(Pe(B[Q[l][0]],B[Q[l][4]])&&Pe(B[Q[l][1]],B[Q[l][5]])&&Pe(B[Q[l][2]],B[Q[l][6]])&&Pe(B[Q[l][3]],B[Q[l][7]])););if(l<0)return!1;for(var o=Math.sign(n[l]),g=Math.abs((e[2*l+1]-e[2*l])*n[l]),i=o>0?1:0,c=0;c<4;c++)if(0!==g){var d=Math.abs(B[Q[l][c]])/g;o>0&&d<i&&(i=d),o<0&&d>i&&(i=d)}var I=(1-i)*e[2*l]+i*e[2*l+1];return o>0?e[2*l]=I:e[2*l+1]=I,!0}var at=function(){function e(t){Object(Ze.a)(this,e),this.bounds=t,this.bounds||(this.bounds=new Float64Array(6),he(this.bounds,Re))}return Object(xe.a)(e,[{key:"getBounds",value:function(){return this.bounds}},{key:"equals",value:function(e){return Le(this.bounds,e)}},{key:"isValid",value:function(){return pe(this.bounds)}},{key:"setBounds",value:function(e){return he(this.bounds,e)}},{key:"reset",value:function(){return Ne(this.bounds)}},{key:"addPoint",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return De(this.bounds,t)}},{key:"addBounds",value:function(e,t,n,Q,B,a){return Ae(this.bounds,e,t,n,Q,B,a)}},{key:"setMinPoint",value:function(e,t,n){return Ee(this.bounds,e,t,n)}},{key:"setMaxPoint",value:function(e,t,n){return fe(this.bounds,e,t,n)}},{key:"inflate",value:function(e){return Je(this.bounds,e)}},{key:"scale",value:function(e,t,n){return ve(this.bounds,e,t,n)}},{key:"getCenter",value:function(){return We(this.bounds)}},{key:"getLength",value:function(e){return Xe(this.bounds,e)}},{key:"getLengths",value:function(){return He(this.bounds)}},{key:"getMaxLength",value:function(){return Ye(this.bounds)}},{key:"getDiagonalLength",value:function(){return we(this.bounds)}},{key:"getMinPoint",value:function(){return Oe(this.bounds)}},{key:"getMaxPoint",value:function(){return ze(this.bounds)}},{key:"getXRange",value:function(){return ke(this.bounds)}},{key:"getYRange",value:function(){return Te(this.bounds)}},{key:"getZRange",value:function(){return Me(this.bounds)}},{key:"getCorners",value:function(e){return Ke(this.bounds,e)}},{key:"computeCornerPoints",value:function(e,t){return je(this.bounds,e,t)}},{key:"computeLocalBounds",value:function(e,t,n){return qe(this.bounds,e,t,n)}},{key:"computeScale3",value:function(e){return _e(this.bounds,e)}},{key:"cutWithPlane",value:function(e,t){return Bt(this.bounds,e,t)}},{key:"intersectBox",value:function(e,t,n,Q){return $e(this.bounds,e,t,n,Q)}},{key:"intersectPlane",value:function(e,t){return et(this.bounds,e,t)}},{key:"intersect",value:function(e){return tt(this.bounds,e)}},{key:"intersects",value:function(e){return nt(this.bounds,e)}},{key:"containsPoint",value:function(e,t,n){return Qt(this.bounds,e,t,n)}},{key:"contains",value:function(e){return nt(this.bounds,e)}}]),e}(),st=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:function(e){var t=e&&e.bounds;return new at(t)}},{equals:Le,isValid:pe,setBounds:he,reset:Ne,addPoint:De,addBounds:Ae,setMinPoint:Ee,setMaxPoint:fe,inflate:Je,scale:ve,getCenter:We,getLength:Xe,getLengths:He,getMaxLength:Ye,getDiagonalLength:we,getMinPoint:Oe,getMaxPoint:ze,getXRange:ke,getYRange:Te,getZRange:Me,getCorners:Ke,computeCornerPoints:je,computeLocalBounds:qe,computeScale3:_e,cutWithPlane:Bt,intersectBox:$e,intersectPlane:et,intersect:tt,intersects:nt,containsPoint:Qt,contains:function(e,t){return!!nt(e,t)&&!!Qt.apply(void 0,[e].concat(Object(B.a)(Oe(t))))&&!!Qt.apply(void 0,[e].concat(Object(B.a)(ze(t))))},INIT_BOUNDS:Re}),rt=n(25),Ut={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9},Ft={StructuredType:Ut};function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var ot=Ft.StructuredType;var gt=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({getDataDescriptionFromExtent:function(e){for(var t=0,n=0;n<3;++n)e[2*n]<e[2*n+1]&&t++;return e[0]>e[1]||e[2]>e[3]||e[4]>e[5]?ot.EMPTY:3===t?ot.XYZ_GRID:2===t?e[0]===e[1]?ot.YZ_PLANE:e[2]===e[3]?ot.XZ_PLANE:ot.XY_PLANE:1===t?e[0]<e[1]?ot.X_LINE:e[2]<e[3]?ot.Y_LINE:ot.Z_LINE:ot.SINGLE_POINT}},Ft),it=n(19);function ct(){var e=new it.a(9);return it.a!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function dt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function It(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ut(e,t){if(e===t){var n=t[1],Q=t[2],B=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=Q,e[7]=B}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Ct(e,t){var n=t[0],Q=t[1],B=t[2],a=t[3],s=t[4],r=t[5],U=t[6],F=t[7],l=t[8],o=l*s-r*F,g=-l*a+r*U,i=F*a-s*U,c=n*o+Q*g+B*i;return c?(c=1/c,e[0]=o*c,e[1]=(-l*Q+B*F)*c,e[2]=(r*Q-B*s)*c,e[3]=g*c,e[4]=(l*n-B*U)*c,e[5]=(-r*n+B*a)*c,e[6]=i*c,e[7]=(-F*n+Q*U)*c,e[8]=(s*n-Q*a)*c,e):null}function mt(e,t,n){var Q=t[0],B=t[1],a=t[2],s=t[3],r=t[4],U=t[5],F=t[6],l=t[7],o=t[8],g=n[0],i=n[1],c=n[2],d=n[3],I=n[4],u=n[5],C=n[6],m=n[7],b=n[8];return e[0]=g*Q+i*s+c*F,e[1]=g*B+i*r+c*l,e[2]=g*a+i*U+c*o,e[3]=d*Q+I*s+u*F,e[4]=d*B+I*r+u*l,e[5]=d*a+I*U+u*o,e[6]=C*Q+m*s+b*F,e[7]=C*B+m*r+b*l,e[8]=C*a+m*U+b*o,e}function bt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}var St=mt,yt=bt,Zt=Object.freeze({__proto__:null,create:ct,fromMat4:dt,clone:function(e){var t=new it.a(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},fromValues:function(e,t,n,Q,B,a,s,r,U){var F=new it.a(9);return F[0]=e,F[1]=t,F[2]=n,F[3]=Q,F[4]=B,F[5]=a,F[6]=s,F[7]=r,F[8]=U,F},set:function(e,t,n,Q,B,a,s,r,U,F){return e[0]=t,e[1]=n,e[2]=Q,e[3]=B,e[4]=a,e[5]=s,e[6]=r,e[7]=U,e[8]=F,e},identity:It,transpose:ut,invert:Ct,adjoint:function(e,t){var n=t[0],Q=t[1],B=t[2],a=t[3],s=t[4],r=t[5],U=t[6],F=t[7],l=t[8];return e[0]=s*l-r*F,e[1]=B*F-Q*l,e[2]=Q*r-B*s,e[3]=r*U-a*l,e[4]=n*l-B*U,e[5]=B*a-n*r,e[6]=a*F-s*U,e[7]=Q*U-n*F,e[8]=n*s-Q*a,e},determinant:function(e){var t=e[0],n=e[1],Q=e[2],B=e[3],a=e[4],s=e[5],r=e[6],U=e[7],F=e[8];return t*(F*a-s*U)+n*(-F*B+s*r)+Q*(U*B-a*r)},multiply:mt,translate:function(e,t,n){var Q=t[0],B=t[1],a=t[2],s=t[3],r=t[4],U=t[5],F=t[6],l=t[7],o=t[8],g=n[0],i=n[1];return e[0]=Q,e[1]=B,e[2]=a,e[3]=s,e[4]=r,e[5]=U,e[6]=g*Q+i*s+F,e[7]=g*B+i*r+l,e[8]=g*a+i*U+o,e},rotate:function(e,t,n){var Q=t[0],B=t[1],a=t[2],s=t[3],r=t[4],U=t[5],F=t[6],l=t[7],o=t[8],g=Math.sin(n),i=Math.cos(n);return e[0]=i*Q+g*s,e[1]=i*B+g*r,e[2]=i*a+g*U,e[3]=i*s-g*Q,e[4]=i*r-g*B,e[5]=i*U-g*a,e[6]=F,e[7]=l,e[8]=o,e},scale:function(e,t,n){var Q=n[0],B=n[1];return e[0]=Q*t[0],e[1]=Q*t[1],e[2]=Q*t[2],e[3]=B*t[3],e[4]=B*t[4],e[5]=B*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},fromRotation:function(e,t){var n=Math.sin(t),Q=Math.cos(t);return e[0]=Q,e[1]=n,e[2]=0,e[3]=-n,e[4]=Q,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:function(e,t){var n=t[0],Q=t[1],B=t[2],a=t[3],s=n+n,r=Q+Q,U=B+B,F=n*s,l=Q*s,o=Q*r,g=B*s,i=B*r,c=B*U,d=a*s,I=a*r,u=a*U;return e[0]=1-o-c,e[3]=l-u,e[6]=g+I,e[1]=l+u,e[4]=1-F-c,e[7]=i-d,e[2]=g-I,e[5]=i+d,e[8]=1-F-o,e},normalFromMat4:function(e,t){var n=t[0],Q=t[1],B=t[2],a=t[3],s=t[4],r=t[5],U=t[6],F=t[7],l=t[8],o=t[9],g=t[10],i=t[11],c=t[12],d=t[13],I=t[14],u=t[15],C=n*r-Q*s,m=n*U-B*s,b=n*F-a*s,S=Q*U-B*r,y=Q*F-a*r,Z=B*F-a*U,x=l*d-o*c,G=l*I-g*c,V=l*u-i*c,R=o*I-g*d,L=o*u-i*d,p=g*u-i*I,h=C*p-m*L+b*R+S*V-y*G+Z*x;return h?(h=1/h,e[0]=(r*p-U*L+F*R)*h,e[1]=(U*V-s*p-F*G)*h,e[2]=(s*L-r*V+F*x)*h,e[3]=(B*L-Q*p-a*R)*h,e[4]=(n*p-B*V+a*G)*h,e[5]=(Q*V-n*L-a*x)*h,e[6]=(d*Z-I*y+u*S)*h,e[7]=(I*b-c*Z-u*m)*h,e[8]=(c*y-d*b+u*C)*h,e):null},projection:function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},subtract:bt,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},multiplyScalarAndAdd:function(e,t,n,Q){return e[0]=t[0]+n[0]*Q,e[1]=t[1]+n[1]*Q,e[2]=t[2]+n[2]*Q,e[3]=t[3]+n[3]*Q,e[4]=t[4]+n[4]*Q,e[5]=t[5]+n[5]*Q,e[6]=t[6]+n[6]*Q,e[7]=t[7]+n[7]*Q,e[8]=t[8]+n[8]*Q,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){var n=e[0],Q=e[1],B=e[2],a=e[3],s=e[4],r=e[5],U=e[6],F=e[7],l=e[8],o=t[0],g=t[1],i=t[2],c=t[3],d=t[4],I=t[5],u=t[6],C=t[7],m=t[8];return Math.abs(n-o)<=it.b*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(Q-g)<=it.b*Math.max(1,Math.abs(Q),Math.abs(g))&&Math.abs(B-i)<=it.b*Math.max(1,Math.abs(B),Math.abs(i))&&Math.abs(a-c)<=it.b*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-d)<=it.b*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(r-I)<=it.b*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(U-u)<=it.b*Math.max(1,Math.abs(U),Math.abs(u))&&Math.abs(F-C)<=it.b*Math.max(1,Math.abs(F),Math.abs(C))&&Math.abs(l-m)<=it.b*Math.max(1,Math.abs(l),Math.abs(m))},mul:St,sub:yt}),xt=a.c.vtkErrorMacro;function Gt(e,t){t.classHierarchy.push("vtkImageData"),e.setExtent=function(){if(t.deleted)return xt("instance deleted - cannot call any method"),!1;for(var n=arguments.length,Q=new Array(n),B=0;B<n;B++)Q[B]=arguments[B];var a=1===Q.length?Q[0]:Q;if(6!==a.length)return!1;var s=!1;return t.extent.forEach((function(e,t){if(e!==a[t]){if(s)return;s=!0}})),s&&(t.extent=a.slice(),t.dataDescription=gt.getDataDescriptionFromExtent(t.extent),e.modified()),s},e.setDimensions=function(){var n,Q,B;if(t.deleted)xt("instance deleted - cannot call any method");else{if(1===arguments.length){var a=arguments.length<=0?void 0:arguments[0];n=a[0],Q=a[1],B=a[2]}else{if(3!==arguments.length)return void xt("Bad dimension specification");n=arguments.length<=0?void 0:arguments[0],Q=arguments.length<=1?void 0:arguments[1],B=arguments.length<=2?void 0:arguments[2]}e.setExtent(0,n-1,0,Q-1,0,B-1)}},e.getDimensions=function(){return[t.extent[1]-t.extent[0]+1,t.extent[3]-t.extent[2]+1,t.extent[5]-t.extent[4]+1]},e.getNumberOfCells=function(){for(var t=e.getDimensions(),n=1,Q=0;Q<3;Q++){if(0===t[Q])return 0;t[Q]>1&&(n*=t[Q]-1)}return n},e.getNumberOfPoints=function(){var t=e.getDimensions();return t[0]*t[1]*t[2]},e.getPoint=function(n){var Q=e.getDimensions();if(0===Q[0]||0===Q[1]||0===Q[2])return xt("Requesting a point from an empty image."),null;var B=new Float64Array(3);switch(t.dataDescription){case Ut.EMPTY:return null;case Ut.SINGLE_POINT:break;case Ut.X_LINE:B[0]=n;break;case Ut.Y_LINE:B[1]=n;break;case Ut.Z_LINE:B[2]=n;break;case Ut.XY_PLANE:B[0]=n%Q[0],B[1]=n/Q[0];break;case Ut.YZ_PLANE:B[1]=n%Q[1],B[2]=n/Q[1];break;case Ut.XZ_PLANE:B[0]=n%Q[0],B[2]=n/Q[0];break;case Ut.XYZ_GRID:B[0]=n%Q[0],B[1]=n/Q[0]%Q[1],B[2]=n/(Q[0]*Q[1]);break;default:xt("Invalid dataDescription")}var a=[0,0,0];return e.indexToWorld(B,a),a},e.getBounds=function(){return e.extentToBounds(t.extent)},e.extentToBounds=function(t){var n=[t[0],t[2],t[4],t[1],t[2],t[4],t[0],t[3],t[4],t[1],t[3],t[4],t[0],t[2],t[5],t[1],t[2],t[5],t[0],t[3],t[5],t[1],t[3],t[5]],Q=new Float64Array([n[0],n[1],n[2]]),B=new Float64Array(3);e.indexToWorld(Q,B);for(var a=[B[0],B[0],B[1],B[1],B[2],B[2]],s=3;s<24;s+=3)Object(y.p)(Q,n[s],n[s+1],n[s+2]),e.indexToWorld(Q,B),B[0]<a[0]&&(a[0]=B[0]),B[1]<a[2]&&(a[2]=B[1]),B[2]<a[4]&&(a[4]=B[2]),B[0]>a[1]&&(a[1]=B[0]),B[1]>a[3]&&(a[3]=B[1]),B[2]>a[5]&&(a[5]=B[2]);return a},e.computeTransforms=function(){Object(S.e)(t.indexToWorld,t.origin),t.indexToWorld[0]=t.direction[0],t.indexToWorld[1]=t.direction[1],t.indexToWorld[2]=t.direction[2],t.indexToWorld[4]=t.direction[3],t.indexToWorld[5]=t.direction[4],t.indexToWorld[6]=t.direction[5],t.indexToWorld[8]=t.direction[6],t.indexToWorld[9]=t.direction[7],t.indexToWorld[10]=t.direction[8],Object(S.r)(t.indexToWorld,t.indexToWorld,t.spacing),Object(S.g)(t.worldToIndex,t.indexToWorld)},e.setDirection=function(){if(t.deleted)return xt("instance deleted - cannot call any method"),!1;for(var n=arguments.length,Q=new Array(n),B=0;B<n;B++)Q[B]=arguments[B];var a=Q;if(1!==a.length||!Array.isArray(a[0])&&a[0].constructor!==Float32Array&&a[0].constructor!==Float64Array||(a=a[0]),9!==a.length)throw new RangeError("Invalid number of values for array setter");var s=!1;if(t.direction.forEach((function(e,t){if(e!==a[t]){if(s)return;s=!0}})),s){for(var r=0;r<9;++r)t.direction[r]=a[r];e.modified()}return!0},e.indexToWorld=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(y.q)(n,e,t.indexToWorld),n},e.indexToWorldVec3=e.indexToWorld,e.worldToIndex=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(y.q)(n,e,t.worldToIndex),n},e.worldToIndexVec3=e.worldToIndex,e.indexToWorldBounds=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],Q=[0,0,0],B=[0,0,0];st.computeCornerPoints(e,Q,B);var a=[0,0,0],s=[0,0,0];return Object(y.q)(a,Q,t.indexToWorld),Object(y.q)(s,B,t.indexToWorld),Object(u.p)(a,s,n),n},e.worldToIndexBounds=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],Q=[0,0,0],B=[0,0,0];st.computeCornerPoints(e,Q,B);var a=[0,0,0],s=[0,0,0];return Object(y.q)(a,Q,t.worldToIndex),Object(y.q)(s,B,t.worldToIndex),Object(u.p)(a,s,n),n},e.onModified(e.computeTransforms),e.computeTransforms(),e.getCenter=function(){for(var t=e.getBounds(),n=[],Q=0;Q<3;Q++)n[Q]=(t[2*Q+1]+t[2*Q])/2;return n},e.computeHistogram=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Q=[0,0,0,0,0,0];e.worldToIndexBounds(t,Q);var B=[0,0,0],a=[0,0,0];st.computeCornerPoints(Q,B,a),Object(u.o)(B,B),Object(u.o)(a,a);var s=e.getDimensions();Object(u.r)(B,[0,0,0],[s[0]-1,s[1]-1,s[2]-1],B),Object(u.r)(a,[0,0,0],[s[0]-1,s[1]-1,s[2]-1],a);for(var r=s[0],U=s[0]*s[1],F=e.getPointData().getScalars().getData(),l=-1/0,o=1/0,g=0,i=0,c=0,d=B[2];d<=a[2];d++)for(var I=B[1];I<=a[1];I++)for(var C=B[0]+I*r+d*U,m=B[0];m<=a[0];m++){if(!n||n([m,I,d],Q)){var b=F[C];b>l&&(l=b),b<o&&(o=b),g+=b*b,i+=b,c+=1}++C}var S=c>0?i/c:0,y=g-S*S,Z=Math.sqrt(y);return{minimum:o,maximum:l,average:S,variance:y,sigma:Z}},e.computeIncrements=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],Q=t,B=0;B<3;++B)n[B]=Q,Q*=e[2*B+1]-e[2*B]+1;return n},e.computeOffsetIndex=function(t){var n=Object(Ue.a)(t,3),Q=n[0],B=n[1],a=n[2],s=e.getExtent(),r=e.getPointData().getScalars().getNumberOfComponents(),U=e.computeIncrements(s,r);return Math.floor((Math.round(Q)-s[0])*U[0]+(Math.round(B)-s[2])*U[1]+(Math.round(a)-s[4])*U[2])},e.getOffsetIndexFromWorld=function(t){for(var n=e.getExtent(),Q=e.worldToIndex(t),B=0;B<3;++B)if(Q[B]<n[2*B]||Q[B]>n[2*B+1])return xt("GetScalarPointer: Pixel ".concat(Q," is not in memory. Current extent = ").concat(n)),NaN;return e.computeOffsetIndex(Q)},e.getScalarValueFromWorld=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Q=e.getPointData().getScalars().getNumberOfComponents();if(n<0||n>=Q)return xt("GetScalarPointer: Scalar Component ".concat(n," is not within bounds. Current Scalar numberOfComponents: ").concat(Q)),NaN;var B=e.getOffsetIndexFromWorld(t);return Number.isNaN(B)?B:e.getPointData().getScalars().getComponent(B,n)}}var Vt={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Ut.EMPTY};function Rt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Vt,n),rt.a.extend(e,t,n),t.direction?Array.isArray(t.direction)&&(t.direction=new Float64Array(t.direction.slice(0,9))):t.direction=It(new Float64Array(9)),t.indexToWorld=new Float64Array(16),t.worldToIndex=new Float64Array(16),a.c.get(e,t,["direction","indexToWorld","worldToIndex"]),a.c.setGetArray(e,t,["origin","spacing"],3),a.c.getArray(e,t,["extent"],6),Gt(e,t)}var Lt={newInstance:a.c.newInstance(Rt,"vtkImageData"),extend:Rt},pt=[];pt["-".charCodeAt(0)]=62,pt["_".charCodeAt(0)]=63;for(var ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nt=0;Nt<ht.length;Nt++)pt[ht.charCodeAt(Nt)]=Nt;function Dt(e){return void 0!==pt[e.charCodeAt(0)]}function At(e,t,n,Q){for(var B=t.start,a=t.count,s=a%4,r=Math.floor(a/4),U=B,F=null,l=n,o=0;o<r;o++){for(;!Dt(e[U]);)U++;for(F=pt[e.charCodeAt(U++)]<<18;!Dt(e[U]);)U++;for(F|=pt[e.charCodeAt(U++)]<<12;!Dt(e[U]);)U++;for(F|=pt[e.charCodeAt(U++)]<<6;!Dt(e[U]);)U++;F|=pt[e.charCodeAt(U++)],Q[l++]=F>>16&255,Q[l++]=F>>8&255,Q[l++]=255&F}switch(s){case 3:for(;!Dt(e[U]);)U++;for(F=pt[e.charCodeAt(U++)]<<10;!Dt(e[U]);)U++;for(F|=pt[e.charCodeAt(U++)]<<4;!Dt(e[U]);)U++;F|=pt[e.charCodeAt(U++)]>>2,Q[l++]=F>>8&255,Q[l++]=255&F;break;case 2:for(;!Dt(e[U]);)U++;for(F=pt[e.charCodeAt(U++)]<<2;!Dt(e[U]);)U++;F|=pt[e.charCodeAt(U++)]>>4,Q[l++]=255&F;break;case 1:throw new Error("BASE64: remain 1 should not happen")}return l}var Et={toArrayBuffer:function(e){for(var t=function(e){for(var t=e.length,n=[],Q=null,B=0;B<t;B++)Dt(e[B])?(Q||(Q={start:B,count:0}),Q.count++,Q.end=B):"="===e[B]&&Q&&(n.push(Q),Q=null);return Q&&n.push(Q),n}(e),n=t[t.length-1].end+1,Q=(4-n%4)%4,B=new ArrayBuffer(3*(n+Q)/4-Q),a=new Uint8Array(B),s=0,r=0;r<t.length;r++)s+=At(e,t[r],s,a),s+=(4-t[r].count%4)%4;return B}};function ft(e){let t=e.length;for(;--t>=0;)e[t]=0}const Jt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),vt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Wt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Xt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ht=new Array(576);ft(Ht);const kt=new Array(60);ft(kt);const Tt=new Array(512);ft(Tt);const Mt=new Array(256);ft(Mt);const Yt=new Array(29);ft(Yt);const wt=new Array(30);function Ot(e,t,n,Q,B){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=Q,this.max_length=B,this.has_stree=e&&e.length}let zt,Pt,Kt;function jt(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ft(wt);const _t=e=>e<256?Tt[e]:Tt[256+(e>>>7)],qt=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},$t=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,qt(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},en=(e,t,n)=>{$t(e,n[2*t],n[2*t+1])},tn=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},nn=(e,t,n)=>{const Q=new Array(16);let B,a,s=0;for(B=1;B<=15;B++)Q[B]=s=s+n[B-1]<<1;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=tn(Q[t]++,t))}},Qn=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},Bn=e=>{e.bi_valid>8?qt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},an=(e,t,n,Q)=>{const B=2*t,a=2*n;return e[B]<e[a]||e[B]===e[a]&&Q[t]<=Q[n]},sn=(e,t,n)=>{const Q=e.heap[n];let B=n<<1;for(;B<=e.heap_len&&(B<e.heap_len&&an(t,e.heap[B+1],e.heap[B],e.depth)&&B++,!an(t,Q,e.heap[B],e.depth));)e.heap[n]=e.heap[B],n=B,B<<=1;e.heap[n]=Q},rn=(e,t,n)=>{let Q,B,a,s,r=0;if(0!==e.last_lit)do{Q=e.pending_buf[e.d_buf+2*r]<<8|e.pending_buf[e.d_buf+2*r+1],B=e.pending_buf[e.l_buf+r],r++,0===Q?en(e,B,t):(a=Mt[B],en(e,a+256+1,t),s=Jt[a],0!==s&&(B-=Yt[a],$t(e,B,s)),Q--,a=_t(Q),en(e,a,n),s=vt[a],0!==s&&(Q-=wt[a],$t(e,Q,s)))}while(r<e.last_lit);en(e,256,t)},Un=(e,t)=>{const n=t.dyn_tree,Q=t.stat_desc.static_tree,B=t.stat_desc.has_stree,a=t.stat_desc.elems;let s,r,U,F=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<a;s++)0!==n[2*s]?(e.heap[++e.heap_len]=F=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)U=e.heap[++e.heap_len]=F<2?++F:0,n[2*U]=1,e.depth[U]=0,e.opt_len--,B&&(e.static_len-=Q[2*U+1]);for(t.max_code=F,s=e.heap_len>>1;s>=1;s--)sn(e,n,s);U=a;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],sn(e,n,1),r=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=r,n[2*U]=n[2*s]+n[2*r],e.depth[U]=(e.depth[s]>=e.depth[r]?e.depth[s]:e.depth[r])+1,n[2*s+1]=n[2*r+1]=U,e.heap[1]=U++,sn(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,Q=t.max_code,B=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,r=t.stat_desc.extra_base,U=t.stat_desc.max_length;let F,l,o,g,i,c,d=0;for(g=0;g<=15;g++)e.bl_count[g]=0;for(n[2*e.heap[e.heap_max]+1]=0,F=e.heap_max+1;F<573;F++)l=e.heap[F],g=n[2*n[2*l+1]+1]+1,g>U&&(g=U,d++),n[2*l+1]=g,l>Q||(e.bl_count[g]++,i=0,l>=r&&(i=s[l-r]),c=n[2*l],e.opt_len+=c*(g+i),a&&(e.static_len+=c*(B[2*l+1]+i)));if(0!==d){do{for(g=U-1;0===e.bl_count[g];)g--;e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[U]--,d-=2}while(d>0);for(g=U;0!==g;g--)for(l=e.bl_count[g];0!==l;)o=e.heap[--F],o>Q||(n[2*o+1]!==g&&(e.opt_len+=(g-n[2*o+1])*n[2*o],n[2*o+1]=g),l--)}})(e,t),nn(n,F,e.bl_count)},Fn=(e,t,n)=>{let Q,B,a=-1,s=t[1],r=0,U=7,F=4;for(0===s&&(U=138,F=3),t[2*(n+1)+1]=65535,Q=0;Q<=n;Q++)B=s,s=t[2*(Q+1)+1],++r<U&&B===s||(r<F?e.bl_tree[2*B]+=r:0!==B?(B!==a&&e.bl_tree[2*B]++,e.bl_tree[32]++):r<=10?e.bl_tree[34]++:e.bl_tree[36]++,r=0,a=B,0===s?(U=138,F=3):B===s?(U=6,F=3):(U=7,F=4))},ln=(e,t,n)=>{let Q,B,a=-1,s=t[1],r=0,U=7,F=4;for(0===s&&(U=138,F=3),Q=0;Q<=n;Q++)if(B=s,s=t[2*(Q+1)+1],!(++r<U&&B===s)){if(r<F)do{en(e,B,e.bl_tree)}while(0!=--r);else 0!==B?(B!==a&&(en(e,B,e.bl_tree),r--),en(e,16,e.bl_tree),$t(e,r-3,2)):r<=10?(en(e,17,e.bl_tree),$t(e,r-3,3)):(en(e,18,e.bl_tree),$t(e,r-11,7));r=0,a=B,0===s?(U=138,F=3):B===s?(U=6,F=3):(U=7,F=4)}};let on=!1;const gn=(e,t,n,Q)=>{$t(e,0+(Q?1:0),3),((e,t,n,Q)=>{Bn(e),qt(e,n),qt(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n)};var cn={_tr_init:e=>{on||((()=>{let e,t,n,Q,B;const a=new Array(16);for(n=0,Q=0;Q<28;Q++)for(Yt[Q]=n,e=0;e<1<<Jt[Q];e++)Mt[n++]=Q;for(Mt[n-1]=Q,B=0,Q=0;Q<16;Q++)for(wt[Q]=B,e=0;e<1<<vt[Q];e++)Tt[B++]=Q;for(B>>=7;Q<30;Q++)for(wt[Q]=B<<7,e=0;e<1<<vt[Q]-7;e++)Tt[256+B++]=Q;for(t=0;t<=15;t++)a[t]=0;for(e=0;e<=143;)Ht[2*e+1]=8,e++,a[8]++;for(;e<=255;)Ht[2*e+1]=9,e++,a[9]++;for(;e<=279;)Ht[2*e+1]=7,e++,a[7]++;for(;e<=287;)Ht[2*e+1]=8,e++,a[8]++;for(nn(Ht,287,a),e=0;e<30;e++)kt[2*e+1]=5,kt[2*e]=tn(e,5);zt=new Ot(Ht,Jt,257,286,15),Pt=new Ot(kt,vt,0,30,15),Kt=new Ot(new Array(0),Wt,0,19,7)})(),on=!0),e.l_desc=new jt(e.dyn_ltree,zt),e.d_desc=new jt(e.dyn_dtree,Pt),e.bl_desc=new jt(e.bl_tree,Kt),e.bi_buf=0,e.bi_valid=0,Qn(e)},_tr_stored_block:gn,_tr_flush_block:(e,t,n,Q)=>{let B,a,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Un(e,e.l_desc),Un(e,e.d_desc),s=(e=>{let t;for(Fn(e,e.dyn_ltree,e.l_desc.max_code),Fn(e,e.dyn_dtree,e.d_desc.max_code),Un(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Xt[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),B=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=B&&(B=a)):B=a=n+5,n+4<=B&&-1!==t?gn(e,t,n,Q):4===e.strategy||a===B?($t(e,2+(Q?1:0),3),rn(e,Ht,kt)):($t(e,4+(Q?1:0),3),((e,t,n,Q)=>{let B;for($t(e,t-257,5),$t(e,n-1,5),$t(e,Q-4,4),B=0;B<Q;B++)$t(e,e.bl_tree[2*Xt[B]+1],3);ln(e,e.dyn_ltree,t-1),ln(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),rn(e,e.dyn_ltree,e.dyn_dtree)),Qn(e),Q&&Bn(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Mt[n]+256+1)]++,e.dyn_dtree[2*_t(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{$t(e,2,3),en(e,256,Ht),(e=>{16===e.bi_valid?(qt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},dn=(e,t,n,Q)=>{let B=65535&e|0,a=e>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{B=B+t[Q++]|0,a=a+B|0}while(--s);B%=65521,a%=65521}return B|a<<16|0};const In=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var Q=0;Q<8;Q++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var un=(e,t,n,Q)=>{const B=In,a=Q+n;e^=-1;for(let n=Q;n<a;n++)e=e>>>8^B[255&(e^t[n])];return-1^e},Cn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},mn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:bn,_tr_stored_block:Sn,_tr_flush_block:yn,_tr_tally:Zn,_tr_align:xn}=cn,{Z_NO_FLUSH:Gn,Z_PARTIAL_FLUSH:Vn,Z_FULL_FLUSH:Rn,Z_FINISH:Ln,Z_BLOCK:pn,Z_OK:hn,Z_STREAM_END:Nn,Z_STREAM_ERROR:Dn,Z_DATA_ERROR:An,Z_BUF_ERROR:En,Z_DEFAULT_COMPRESSION:fn,Z_FILTERED:Jn,Z_HUFFMAN_ONLY:vn,Z_RLE:Wn,Z_FIXED:Xn,Z_DEFAULT_STRATEGY:Hn,Z_UNKNOWN:kn,Z_DEFLATED:Tn}=mn,Mn=(e,t)=>(e.msg=Cn[t],t),Yn=e=>(e<<1)-(e>4?9:0),wn=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let On=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const zn=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Pn=(e,t)=>{yn(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,zn(e.strm)},Kn=(e,t)=>{e.pending_buf[e.pending++]=t},jn=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},_n=(e,t,n,Q)=>{let B=e.avail_in;return B>Q&&(B=Q),0===B?0:(e.avail_in-=B,t.set(e.input.subarray(e.next_in,e.next_in+B),n),1===e.state.wrap?e.adler=dn(e.adler,t,B,n):2===e.state.wrap&&(e.adler=un(e.adler,t,B,n)),e.next_in+=B,e.total_in+=B,B)},qn=(e,t)=>{let n,Q,B=e.max_chain_length,a=e.strstart,s=e.prev_length,r=e.nice_match;const U=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,F=e.window,l=e.w_mask,o=e.prev,g=e.strstart+258;let i=F[a+s-1],c=F[a+s];e.prev_length>=e.good_match&&(B>>=2),r>e.lookahead&&(r=e.lookahead);do{if(n=t,F[n+s]===c&&F[n+s-1]===i&&F[n]===F[a]&&F[++n]===F[a+1]){a+=2,n++;do{}while(F[++a]===F[++n]&&F[++a]===F[++n]&&F[++a]===F[++n]&&F[++a]===F[++n]&&F[++a]===F[++n]&&F[++a]===F[++n]&&F[++a]===F[++n]&&F[++a]===F[++n]&&a<g);if(Q=258-(g-a),a=g-258,Q>s){if(e.match_start=t,s=Q,Q>=r)break;i=F[a+s-1],c=F[a+s]}}}while((t=o[t&l])>U&&0!=--B);return s<=e.lookahead?s:e.lookahead},$n=e=>{const t=e.w_size;let n,Q,B,a,s;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,Q=e.hash_size,n=Q;do{B=e.head[--n],e.head[n]=B>=t?B-t:0}while(--Q);Q=t,n=Q;do{B=e.prev[--n],e.prev[n]=B>=t?B-t:0}while(--Q);a+=t}if(0===e.strm.avail_in)break;if(Q=_n(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=Q,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=On(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=On(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},eQ=(e,t)=>{let n,Q;for(;;){if(e.lookahead<262){if($n(e),e.lookahead<262&&t===Gn)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=On(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=qn(e,n)),e.match_length>=3)if(Q=Zn(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=On(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=On(e,e.ins_h,e.window[e.strstart+1]);else Q=Zn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(Q&&(Pn(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Ln?(Pn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Pn(e,!1),0===e.strm.avail_out)?1:2},tQ=(e,t)=>{let n,Q,B;for(;;){if(e.lookahead<262){if($n(e),e.lookahead<262&&t===Gn)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=On(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=qn(e,n),e.match_length<=5&&(e.strategy===Jn||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){B=e.strstart+e.lookahead-3,Q=Zn(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=B&&(e.ins_h=On(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,Q&&(Pn(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(Q=Zn(e,0,e.window[e.strstart-1]),Q&&Pn(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(Q=Zn(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Ln?(Pn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Pn(e,!1),0===e.strm.avail_out)?1:2};function nQ(e,t,n,Q,B){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=Q,this.func=B}const QQ=[new nQ(0,0,0,0,(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if($n(e),0===e.lookahead&&t===Gn)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const Q=e.block_start+n;if((0===e.strstart||e.strstart>=Q)&&(e.lookahead=e.strstart-Q,e.strstart=Q,Pn(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(Pn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ln?(Pn(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(Pn(e,!1),e.strm.avail_out),1)}),new nQ(4,4,8,4,eQ),new nQ(4,5,16,8,eQ),new nQ(4,6,32,32,eQ),new nQ(4,4,16,16,tQ),new nQ(8,16,32,32,tQ),new nQ(8,16,128,128,tQ),new nQ(8,32,128,256,tQ),new nQ(32,128,258,1024,tQ),new nQ(32,258,258,4096,tQ)];function BQ(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Tn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),wn(this.dyn_ltree),wn(this.dyn_dtree),wn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),wn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),wn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const aQ=e=>{if(!e||!e.state)return Mn(e,Dn);e.total_in=e.total_out=0,e.data_type=kn;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=Gn,bn(t),hn},sQ=e=>{const t=aQ(e);var n;return t===hn&&((n=e.state).window_size=2*n.w_size,wn(n.head),n.max_lazy_match=QQ[n.level].max_lazy,n.good_match=QQ[n.level].good_length,n.nice_match=QQ[n.level].nice_length,n.max_chain_length=QQ[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},rQ=(e,t,n,Q,B,a)=>{if(!e)return Dn;let s=1;if(t===fn&&(t=6),Q<0?(s=0,Q=-Q):Q>15&&(s=2,Q-=16),B<1||B>9||n!==Tn||Q<8||Q>15||t<0||t>9||a<0||a>Xn)return Mn(e,Dn);8===Q&&(Q=9);const r=new BQ;return e.state=r,r.strm=e,r.wrap=s,r.gzhead=null,r.w_bits=Q,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=B+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+3-1)/3),r.window=new Uint8Array(2*r.w_size),r.head=new Uint16Array(r.hash_size),r.prev=new Uint16Array(r.w_size),r.lit_bufsize=1<<B+6,r.pending_buf_size=4*r.lit_bufsize,r.pending_buf=new Uint8Array(r.pending_buf_size),r.d_buf=1*r.lit_bufsize,r.l_buf=3*r.lit_bufsize,r.level=t,r.strategy=a,r.method=n,sQ(e)};var UQ=rQ,FQ=(e,t)=>e&&e.state?2!==e.state.wrap?Dn:(e.state.gzhead=t,hn):Dn,lQ=(e,t)=>{let n,Q;if(!e||!e.state||t>pn||t<0)return e?Mn(e,Dn):Dn;const B=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===B.status&&t!==Ln)return Mn(e,0===e.avail_out?En:Dn);B.strm=e;const a=B.last_flush;if(B.last_flush=t,42===B.status)if(2===B.wrap)e.adler=0,Kn(B,31),Kn(B,139),Kn(B,8),B.gzhead?(Kn(B,(B.gzhead.text?1:0)+(B.gzhead.hcrc?2:0)+(B.gzhead.extra?4:0)+(B.gzhead.name?8:0)+(B.gzhead.comment?16:0)),Kn(B,255&B.gzhead.time),Kn(B,B.gzhead.time>>8&255),Kn(B,B.gzhead.time>>16&255),Kn(B,B.gzhead.time>>24&255),Kn(B,9===B.level?2:B.strategy>=vn||B.level<2?4:0),Kn(B,255&B.gzhead.os),B.gzhead.extra&&B.gzhead.extra.length&&(Kn(B,255&B.gzhead.extra.length),Kn(B,B.gzhead.extra.length>>8&255)),B.gzhead.hcrc&&(e.adler=un(e.adler,B.pending_buf,B.pending,0)),B.gzindex=0,B.status=69):(Kn(B,0),Kn(B,0),Kn(B,0),Kn(B,0),Kn(B,0),Kn(B,9===B.level?2:B.strategy>=vn||B.level<2?4:0),Kn(B,3),B.status=113);else{let t=Tn+(B.w_bits-8<<4)<<8,n=-1;n=B.strategy>=vn||B.level<2?0:B.level<6?1:6===B.level?2:3,t|=n<<6,0!==B.strstart&&(t|=32),t+=31-t%31,B.status=113,jn(B,t),0!==B.strstart&&(jn(B,e.adler>>>16),jn(B,65535&e.adler)),e.adler=1}if(69===B.status)if(B.gzhead.extra){for(n=B.pending;B.gzindex<(65535&B.gzhead.extra.length)&&(B.pending!==B.pending_buf_size||(B.gzhead.hcrc&&B.pending>n&&(e.adler=un(e.adler,B.pending_buf,B.pending-n,n)),zn(e),n=B.pending,B.pending!==B.pending_buf_size));)Kn(B,255&B.gzhead.extra[B.gzindex]),B.gzindex++;B.gzhead.hcrc&&B.pending>n&&(e.adler=un(e.adler,B.pending_buf,B.pending-n,n)),B.gzindex===B.gzhead.extra.length&&(B.gzindex=0,B.status=73)}else B.status=73;if(73===B.status)if(B.gzhead.name){n=B.pending;do{if(B.pending===B.pending_buf_size&&(B.gzhead.hcrc&&B.pending>n&&(e.adler=un(e.adler,B.pending_buf,B.pending-n,n)),zn(e),n=B.pending,B.pending===B.pending_buf_size)){Q=1;break}Q=B.gzindex<B.gzhead.name.length?255&B.gzhead.name.charCodeAt(B.gzindex++):0,Kn(B,Q)}while(0!==Q);B.gzhead.hcrc&&B.pending>n&&(e.adler=un(e.adler,B.pending_buf,B.pending-n,n)),0===Q&&(B.gzindex=0,B.status=91)}else B.status=91;if(91===B.status)if(B.gzhead.comment){n=B.pending;do{if(B.pending===B.pending_buf_size&&(B.gzhead.hcrc&&B.pending>n&&(e.adler=un(e.adler,B.pending_buf,B.pending-n,n)),zn(e),n=B.pending,B.pending===B.pending_buf_size)){Q=1;break}Q=B.gzindex<B.gzhead.comment.length?255&B.gzhead.comment.charCodeAt(B.gzindex++):0,Kn(B,Q)}while(0!==Q);B.gzhead.hcrc&&B.pending>n&&(e.adler=un(e.adler,B.pending_buf,B.pending-n,n)),0===Q&&(B.status=103)}else B.status=103;if(103===B.status&&(B.gzhead.hcrc?(B.pending+2>B.pending_buf_size&&zn(e),B.pending+2<=B.pending_buf_size&&(Kn(B,255&e.adler),Kn(B,e.adler>>8&255),e.adler=0,B.status=113)):B.status=113),0!==B.pending){if(zn(e),0===e.avail_out)return B.last_flush=-1,hn}else if(0===e.avail_in&&Yn(t)<=Yn(a)&&t!==Ln)return Mn(e,En);if(666===B.status&&0!==e.avail_in)return Mn(e,En);if(0!==e.avail_in||0!==B.lookahead||t!==Gn&&666!==B.status){let n=B.strategy===vn?((e,t)=>{let n;for(;;){if(0===e.lookahead&&($n(e),0===e.lookahead)){if(t===Gn)return 1;break}if(e.match_length=0,n=Zn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Pn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ln?(Pn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Pn(e,!1),0===e.strm.avail_out)?1:2})(B,t):B.strategy===Wn?((e,t)=>{let n,Q,B,a;const s=e.window;for(;;){if(e.lookahead<=258){if($n(e),e.lookahead<=258&&t===Gn)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(B=e.strstart-1,Q=s[B],Q===s[++B]&&Q===s[++B]&&Q===s[++B])){a=e.strstart+258;do{}while(Q===s[++B]&&Q===s[++B]&&Q===s[++B]&&Q===s[++B]&&Q===s[++B]&&Q===s[++B]&&Q===s[++B]&&Q===s[++B]&&B<a);e.match_length=258-(a-B),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Zn(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Zn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Pn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ln?(Pn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Pn(e,!1),0===e.strm.avail_out)?1:2})(B,t):QQ[B.level].func(B,t);if(3!==n&&4!==n||(B.status=666),1===n||3===n)return 0===e.avail_out&&(B.last_flush=-1),hn;if(2===n&&(t===Vn?xn(B):t!==pn&&(Sn(B,0,0,!1),t===Rn&&(wn(B.head),0===B.lookahead&&(B.strstart=0,B.block_start=0,B.insert=0))),zn(e),0===e.avail_out))return B.last_flush=-1,hn}return t!==Ln?hn:B.wrap<=0?Nn:(2===B.wrap?(Kn(B,255&e.adler),Kn(B,e.adler>>8&255),Kn(B,e.adler>>16&255),Kn(B,e.adler>>24&255),Kn(B,255&e.total_in),Kn(B,e.total_in>>8&255),Kn(B,e.total_in>>16&255),Kn(B,e.total_in>>24&255)):(jn(B,e.adler>>>16),jn(B,65535&e.adler)),zn(e),B.wrap>0&&(B.wrap=-B.wrap),0!==B.pending?hn:Nn)},oQ=e=>{if(!e||!e.state)return Dn;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?Mn(e,Dn):(e.state=null,113===t?Mn(e,An):hn)},gQ=(e,t)=>{let n=t.length;if(!e||!e.state)return Dn;const Q=e.state,B=Q.wrap;if(2===B||1===B&&42!==Q.status||Q.lookahead)return Dn;if(1===B&&(e.adler=dn(e.adler,t,n,0)),Q.wrap=0,n>=Q.w_size){0===B&&(wn(Q.head),Q.strstart=0,Q.block_start=0,Q.insert=0);let e=new Uint8Array(Q.w_size);e.set(t.subarray(n-Q.w_size,n),0),t=e,n=Q.w_size}const a=e.avail_in,s=e.next_in,r=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,$n(Q);Q.lookahead>=3;){let e=Q.strstart,t=Q.lookahead-2;do{Q.ins_h=On(Q,Q.ins_h,Q.window[e+3-1]),Q.prev[e&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=e,e++}while(--t);Q.strstart=e,Q.lookahead=2,$n(Q)}return Q.strstart+=Q.lookahead,Q.block_start=Q.strstart,Q.insert=Q.lookahead,Q.lookahead=0,Q.match_length=Q.prev_length=2,Q.match_available=0,e.next_in=s,e.input=r,e.avail_in=a,Q.wrap=B,hn};const iQ=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var cQ=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)iQ(n,t)&&(e[t]=n[t])}}return e},dQ=e=>{let t=0;for(let n=0,Q=e.length;n<Q;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,Q=0,B=e.length;t<B;t++){let B=e[t];n.set(B,Q),Q+=B.length}return n};let IQ=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(qI){IQ=!1}const uQ=new Uint8Array(256);for(let e=0;e<256;e++)uQ[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;uQ[254]=uQ[254]=1;var CQ=e=>{let t,n,Q,B,a,s=e.length,r=0;for(B=0;B<s;B++)n=e.charCodeAt(B),55296==(64512&n)&&B+1<s&&(Q=e.charCodeAt(B+1),56320==(64512&Q)&&(n=65536+(n-55296<<10)+(Q-56320),B++)),r+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(r),a=0,B=0;a<r;B++)n=e.charCodeAt(B),55296==(64512&n)&&B+1<s&&(Q=e.charCodeAt(B+1),56320==(64512&Q)&&(n=65536+(n-55296<<10)+(Q-56320),B++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},mQ=(e,t)=>{let n,Q;const B=t||e.length,a=new Array(2*B);for(Q=0,n=0;n<B;){let t=e[n++];if(t<128){a[Q++]=t;continue}let s=uQ[t];if(s>4)a[Q++]=65533,n+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&n<B;)t=t<<6|63&e[n++],s--;s>1?a[Q++]=65533:t<65536?a[Q++]=t:(t-=65536,a[Q++]=55296|t>>10&1023,a[Q++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&IQ)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let Q=0;Q<t;Q++)n+=String.fromCharCode(e[Q]);return n})(a,Q)},bQ=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+uQ[e[n]]>t?n:t},SQ=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const yQ=Object.prototype.toString,{Z_NO_FLUSH:ZQ,Z_SYNC_FLUSH:xQ,Z_FULL_FLUSH:GQ,Z_FINISH:VQ,Z_OK:RQ,Z_STREAM_END:LQ,Z_DEFAULT_COMPRESSION:pQ,Z_DEFAULT_STRATEGY:hQ,Z_DEFLATED:NQ}=mn;function DQ(e){this.options=cQ({level:pQ,method:NQ,chunkSize:16384,windowBits:15,memLevel:8,strategy:hQ},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new SQ,this.strm.avail_out=0;let n=UQ(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==RQ)throw new Error(Cn[n]);if(t.header&&FQ(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?CQ(t.dictionary):"[object ArrayBuffer]"===yQ.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=gQ(this.strm,e),n!==RQ)throw new Error(Cn[n]);this._dict_set=!0}}function AQ(e,t){const n=new DQ(t);if(n.push(e,!0),n.err)throw n.msg||Cn[n.err];return n.result}DQ.prototype.push=function(e,t){const n=this.strm,Q=this.options.chunkSize;let B,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?VQ:ZQ,"string"==typeof e?n.input=CQ(e):"[object ArrayBuffer]"===yQ.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(Q),n.next_out=0,n.avail_out=Q),(a===xQ||a===GQ)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(B=lQ(n,a),B===LQ)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),B=oQ(this.strm),this.onEnd(B),this.ended=!0,B===RQ;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},DQ.prototype.onData=function(e){this.chunks.push(e)},DQ.prototype.onEnd=function(e){e===RQ&&(this.result=dQ(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var EQ={Deflate:DQ,deflate:AQ,deflateRaw:function(e,t){return(t=t||{}).raw=!0,AQ(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,AQ(e,t)},constants:mn},fQ=function(e,t){let n,Q,B,a,s,r,U,F,l,o,g,i,c,d,I,u,C,m,b,S,y,Z,x,G;const V=e.state;n=e.next_in,x=e.input,Q=n+(e.avail_in-5),B=e.next_out,G=e.output,a=B-(t-e.avail_out),s=B+(e.avail_out-257),r=V.dmax,U=V.wsize,F=V.whave,l=V.wnext,o=V.window,g=V.hold,i=V.bits,c=V.lencode,d=V.distcode,I=(1<<V.lenbits)-1,u=(1<<V.distbits)-1;e:do{i<15&&(g+=x[n++]<<i,i+=8,g+=x[n++]<<i,i+=8),C=c[g&I];t:for(;;){if(m=C>>>24,g>>>=m,i-=m,m=C>>>16&255,0===m)G[B++]=65535&C;else{if(!(16&m)){if(0==(64&m)){C=c[(65535&C)+(g&(1<<m)-1)];continue t}if(32&m){V.mode=12;break e}e.msg="invalid literal/length code",V.mode=30;break e}b=65535&C,m&=15,m&&(i<m&&(g+=x[n++]<<i,i+=8),b+=g&(1<<m)-1,g>>>=m,i-=m),i<15&&(g+=x[n++]<<i,i+=8,g+=x[n++]<<i,i+=8),C=d[g&u];n:for(;;){if(m=C>>>24,g>>>=m,i-=m,m=C>>>16&255,!(16&m)){if(0==(64&m)){C=d[(65535&C)+(g&(1<<m)-1)];continue n}e.msg="invalid distance code",V.mode=30;break e}if(S=65535&C,m&=15,i<m&&(g+=x[n++]<<i,i+=8,i<m&&(g+=x[n++]<<i,i+=8)),S+=g&(1<<m)-1,S>r){e.msg="invalid distance too far back",V.mode=30;break e}if(g>>>=m,i-=m,m=B-a,S>m){if(m=S-m,m>F&&V.sane){e.msg="invalid distance too far back",V.mode=30;break e}if(y=0,Z=o,0===l){if(y+=U-m,m<b){b-=m;do{G[B++]=o[y++]}while(--m);y=B-S,Z=G}}else if(l<m){if(y+=U+l-m,m-=l,m<b){b-=m;do{G[B++]=o[y++]}while(--m);if(y=0,l<b){m=l,b-=m;do{G[B++]=o[y++]}while(--m);y=B-S,Z=G}}}else if(y+=l-m,m<b){b-=m;do{G[B++]=o[y++]}while(--m);y=B-S,Z=G}for(;b>2;)G[B++]=Z[y++],G[B++]=Z[y++],G[B++]=Z[y++],b-=3;b&&(G[B++]=Z[y++],b>1&&(G[B++]=Z[y++]))}else{y=B-S;do{G[B++]=G[y++],G[B++]=G[y++],G[B++]=G[y++],b-=3}while(b>2);b&&(G[B++]=G[y++],b>1&&(G[B++]=G[y++]))}break}}break}}while(n<Q&&B<s);b=i>>3,n-=b,i-=b<<3,g&=(1<<i)-1,e.next_in=n,e.next_out=B,e.avail_in=n<Q?Q-n+5:5-(n-Q),e.avail_out=B<s?s-B+257:257-(B-s),V.hold=g,V.bits=i};const JQ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),vQ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),WQ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),XQ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var HQ=(e,t,n,Q,B,a,s,r)=>{const U=r.bits;let F,l,o,g,i,c,d=0,I=0,u=0,C=0,m=0,b=0,S=0,y=0,Z=0,x=0,G=null,V=0;const R=new Uint16Array(16),L=new Uint16Array(16);let p,h,N,D=null,A=0;for(d=0;d<=15;d++)R[d]=0;for(I=0;I<Q;I++)R[t[n+I]]++;for(m=U,C=15;C>=1&&0===R[C];C--);if(m>C&&(m=C),0===C)return B[a++]=20971520,B[a++]=20971520,r.bits=1,0;for(u=1;u<C&&0===R[u];u++);for(m<u&&(m=u),y=1,d=1;d<=15;d++)if(y<<=1,y-=R[d],y<0)return-1;if(y>0&&(0===e||1!==C))return-1;for(L[1]=0,d=1;d<15;d++)L[d+1]=L[d]+R[d];for(I=0;I<Q;I++)0!==t[n+I]&&(s[L[t[n+I]]++]=I);if(0===e?(G=D=s,c=19):1===e?(G=JQ,V-=257,D=vQ,A-=257,c=256):(G=WQ,D=XQ,c=-1),x=0,I=0,d=u,i=a,b=m,S=0,o=-1,Z=1<<m,g=Z-1,1===e&&Z>852||2===e&&Z>592)return 1;for(;;){p=d-S,s[I]<c?(h=0,N=s[I]):s[I]>c?(h=D[A+s[I]],N=G[V+s[I]]):(h=96,N=0),F=1<<d-S,l=1<<b,u=l;do{l-=F,B[i+(x>>S)+l]=p<<24|h<<16|N|0}while(0!==l);for(F=1<<d-1;x&F;)F>>=1;if(0!==F?(x&=F-1,x+=F):x=0,I++,0==--R[d]){if(d===C)break;d=t[n+s[I]]}if(d>m&&(x&g)!==o){for(0===S&&(S=m),i+=u,b=d-S,y=1<<b;b+S<C&&(y-=R[b+S],!(y<=0));)b++,y<<=1;if(Z+=1<<b,1===e&&Z>852||2===e&&Z>592)return 1;o=x&g,B[o]=m<<24|b<<16|i-a|0}}return 0!==x&&(B[i+x]=d-S<<24|64<<16|0),r.bits=m,0};const{Z_FINISH:kQ,Z_BLOCK:TQ,Z_TREES:MQ,Z_OK:YQ,Z_STREAM_END:wQ,Z_NEED_DICT:OQ,Z_STREAM_ERROR:zQ,Z_DATA_ERROR:PQ,Z_MEM_ERROR:KQ,Z_BUF_ERROR:jQ,Z_DEFLATED:_Q}=mn,qQ=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function $Q(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const eB=e=>{if(!e||!e.state)return zQ;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,YQ},tB=e=>{if(!e||!e.state)return zQ;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,eB(e)},nB=(e,t)=>{let n;if(!e||!e.state)return zQ;const Q=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?zQ:(null!==Q.window&&Q.wbits!==t&&(Q.window=null),Q.wrap=n,Q.wbits=t,tB(e))},QB=(e,t)=>{if(!e)return zQ;const n=new $Q;e.state=n,n.window=null;const Q=nB(e,t);return Q!==YQ&&(e.state=null),Q};let BB,aB,sB=!0;const rB=e=>{if(sB){BB=new Int32Array(512),aB=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(HQ(1,e.lens,0,288,BB,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;HQ(2,e.lens,0,32,aB,0,e.work,{bits:5}),sB=!1}e.lencode=BB,e.lenbits=9,e.distcode=aB,e.distbits=5},UB=(e,t,n,Q)=>{let B;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),Q>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(B=a.wsize-a.wnext,B>Q&&(B=Q),a.window.set(t.subarray(n-Q,n-Q+B),a.wnext),(Q-=B)?(a.window.set(t.subarray(n-Q,n),0),a.wnext=Q,a.whave=a.wsize):(a.wnext+=B,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=B))),0};var FB=tB,lB=QB,oB=(e,t)=>{let n,Q,B,a,s,r,U,F,l,o,g,i,c,d,I,u,C,m,b,S,y,Z,x=0;const G=new Uint8Array(4);let V,R;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return zQ;n=e.state,12===n.mode&&(n.mode=13),s=e.next_out,B=e.output,U=e.avail_out,a=e.next_in,Q=e.input,r=e.avail_in,F=n.hold,l=n.bits,o=r,g=U,Z=YQ;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;l<16;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}if(2&n.wrap&&35615===F){n.check=0,G[0]=255&F,G[1]=F>>>8&255,n.check=un(n.check,G,2,0),F=0,l=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&F)<<8)+(F>>8))%31){e.msg="incorrect header check",n.mode=30;break}if((15&F)!==_Q){e.msg="unknown compression method",n.mode=30;break}if(F>>>=4,l-=4,y=8+(15&F),0===n.wbits)n.wbits=y;else if(y>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&F?10:12,F=0,l=0;break;case 2:for(;l<16;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}if(n.flags=F,(255&n.flags)!==_Q){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=F>>8&1),512&n.flags&&(G[0]=255&F,G[1]=F>>>8&255,n.check=un(n.check,G,2,0)),F=0,l=0,n.mode=3;case 3:for(;l<32;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}n.head&&(n.head.time=F),512&n.flags&&(G[0]=255&F,G[1]=F>>>8&255,G[2]=F>>>16&255,G[3]=F>>>24&255,n.check=un(n.check,G,4,0)),F=0,l=0,n.mode=4;case 4:for(;l<16;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}n.head&&(n.head.xflags=255&F,n.head.os=F>>8),512&n.flags&&(G[0]=255&F,G[1]=F>>>8&255,n.check=un(n.check,G,2,0)),F=0,l=0,n.mode=5;case 5:if(1024&n.flags){for(;l<16;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}n.length=F,n.head&&(n.head.extra_len=F),512&n.flags&&(G[0]=255&F,G[1]=F>>>8&255,n.check=un(n.check,G,2,0)),F=0,l=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(i=n.length,i>r&&(i=r),i&&(n.head&&(y=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(Q.subarray(a,a+i),y)),512&n.flags&&(n.check=un(n.check,Q,i,a)),r-=i,a+=i,n.length-=i),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===r)break e;i=0;do{y=Q[a+i++],n.head&&y&&n.length<65536&&(n.head.name+=String.fromCharCode(y))}while(y&&i<r);if(512&n.flags&&(n.check=un(n.check,Q,i,a)),r-=i,a+=i,y)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===r)break e;i=0;do{y=Q[a+i++],n.head&&y&&n.length<65536&&(n.head.comment+=String.fromCharCode(y))}while(y&&i<r);if(512&n.flags&&(n.check=un(n.check,Q,i,a)),r-=i,a+=i,y)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;l<16;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}if(F!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}F=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;l<32;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}e.adler=n.check=qQ(F),F=0,l=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=U,e.next_in=a,e.avail_in=r,n.hold=F,n.bits=l,OQ;e.adler=n.check=1,n.mode=12;case 12:if(t===TQ||t===MQ)break e;case 13:if(n.last){F>>>=7&l,l-=7&l,n.mode=27;break}for(;l<3;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}switch(n.last=1&F,F>>>=1,l-=1,3&F){case 0:n.mode=14;break;case 1:if(rB(n),n.mode=20,t===MQ){F>>>=2,l-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}F>>>=2,l-=2;break;case 14:for(F>>>=7&l,l-=7&l;l<32;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}if((65535&F)!=(F>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&F,F=0,l=0,n.mode=15,t===MQ)break e;case 15:n.mode=16;case 16:if(i=n.length,i){if(i>r&&(i=r),i>U&&(i=U),0===i)break e;B.set(Q.subarray(a,a+i),s),r-=i,a+=i,U-=i,s+=i,n.length-=i;break}n.mode=12;break;case 17:for(;l<14;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}if(n.nlen=257+(31&F),F>>>=5,l-=5,n.ndist=1+(31&F),F>>>=5,l-=5,n.ncode=4+(15&F),F>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;l<3;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}n.lens[L[n.have++]]=7&F,F>>>=3,l-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,V={bits:n.lenbits},Z=HQ(0,n.lens,0,19,n.lencode,0,n.work,V),n.lenbits=V.bits,Z){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;x=n.lencode[F&(1<<n.lenbits)-1],I=x>>>24,u=x>>>16&255,C=65535&x,!(I<=l);){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}if(C<16)F>>>=I,l-=I,n.lens[n.have++]=C;else{if(16===C){for(R=I+2;l<R;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}if(F>>>=I,l-=I,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}y=n.lens[n.have-1],i=3+(3&F),F>>>=2,l-=2}else if(17===C){for(R=I+3;l<R;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}F>>>=I,l-=I,y=0,i=3+(7&F),F>>>=3,l-=3}else{for(R=I+7;l<R;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}F>>>=I,l-=I,y=0,i=11+(127&F),F>>>=7,l-=7}if(n.have+i>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;i--;)n.lens[n.have++]=y}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,V={bits:n.lenbits},Z=HQ(1,n.lens,0,n.nlen,n.lencode,0,n.work,V),n.lenbits=V.bits,Z){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,V={bits:n.distbits},Z=HQ(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,V),n.distbits=V.bits,Z){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,t===MQ)break e;case 20:n.mode=21;case 21:if(r>=6&&U>=258){e.next_out=s,e.avail_out=U,e.next_in=a,e.avail_in=r,n.hold=F,n.bits=l,fQ(e,g),s=e.next_out,B=e.output,U=e.avail_out,a=e.next_in,Q=e.input,r=e.avail_in,F=n.hold,l=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;x=n.lencode[F&(1<<n.lenbits)-1],I=x>>>24,u=x>>>16&255,C=65535&x,!(I<=l);){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}if(u&&0==(240&u)){for(m=I,b=u,S=C;x=n.lencode[S+((F&(1<<m+b)-1)>>m)],I=x>>>24,u=x>>>16&255,C=65535&x,!(m+I<=l);){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}F>>>=m,l-=m,n.back+=m}if(F>>>=I,l-=I,n.back+=I,n.length=C,0===u){n.mode=26;break}if(32&u){n.back=-1,n.mode=12;break}if(64&u){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&u,n.mode=22;case 22:if(n.extra){for(R=n.extra;l<R;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}n.length+=F&(1<<n.extra)-1,F>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;x=n.distcode[F&(1<<n.distbits)-1],I=x>>>24,u=x>>>16&255,C=65535&x,!(I<=l);){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}if(0==(240&u)){for(m=I,b=u,S=C;x=n.distcode[S+((F&(1<<m+b)-1)>>m)],I=x>>>24,u=x>>>16&255,C=65535&x,!(m+I<=l);){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}F>>>=m,l-=m,n.back+=m}if(F>>>=I,l-=I,n.back+=I,64&u){e.msg="invalid distance code",n.mode=30;break}n.offset=C,n.extra=15&u,n.mode=24;case 24:if(n.extra){for(R=n.extra;l<R;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}n.offset+=F&(1<<n.extra)-1,F>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===U)break e;if(i=g-U,n.offset>i){if(i=n.offset-i,i>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}i>n.wnext?(i-=n.wnext,c=n.wsize-i):c=n.wnext-i,i>n.length&&(i=n.length),d=n.window}else d=B,c=s-n.offset,i=n.length;i>U&&(i=U),U-=i,n.length-=i;do{B[s++]=d[c++]}while(--i);0===n.length&&(n.mode=21);break;case 26:if(0===U)break e;B[s++]=n.length,U--,n.mode=21;break;case 27:if(n.wrap){for(;l<32;){if(0===r)break e;r--,F|=Q[a++]<<l,l+=8}if(g-=U,e.total_out+=g,n.total+=g,g&&(e.adler=n.check=n.flags?un(n.check,B,g,s-g):dn(n.check,B,g,s-g)),g=U,(n.flags?F:qQ(F))!==n.check){e.msg="incorrect data check",n.mode=30;break}F=0,l=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;l<32;){if(0===r)break e;r--,F+=Q[a++]<<l,l+=8}if(F!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}F=0,l=0}n.mode=29;case 29:Z=wQ;break e;case 30:Z=PQ;break e;case 31:return KQ;case 32:default:return zQ}return e.next_out=s,e.avail_out=U,e.next_in=a,e.avail_in=r,n.hold=F,n.bits=l,(n.wsize||g!==e.avail_out&&n.mode<30&&(n.mode<27||t!==kQ))&&UB(e,e.output,e.next_out,g-e.avail_out),o-=e.avail_in,g-=e.avail_out,e.total_in+=o,e.total_out+=g,n.total+=g,n.wrap&&g&&(e.adler=n.check=n.flags?un(n.check,B,g,e.next_out-g):dn(n.check,B,g,e.next_out-g)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===o&&0===g||t===kQ)&&Z===YQ&&(Z=jQ),Z},gB=e=>{if(!e||!e.state)return zQ;let t=e.state;return t.window&&(t.window=null),e.state=null,YQ},iB=(e,t)=>{if(!e||!e.state)return zQ;const n=e.state;return 0==(2&n.wrap)?zQ:(n.head=t,t.done=!1,YQ)},cB=(e,t)=>{const n=t.length;let Q,B,a;return e&&e.state?(Q=e.state,0!==Q.wrap&&11!==Q.mode?zQ:11===Q.mode&&(B=1,B=dn(B,t,n,0),B!==Q.check)?PQ:(a=UB(e,t,n,n),a?(Q.mode=31,KQ):(Q.havedict=1,YQ))):zQ},dB=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const IB=Object.prototype.toString,{Z_NO_FLUSH:uB,Z_FINISH:CB,Z_OK:mB,Z_STREAM_END:bB,Z_NEED_DICT:SB,Z_STREAM_ERROR:yB,Z_DATA_ERROR:ZB,Z_MEM_ERROR:xB}=mn;function GB(e){this.options=cQ({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new SQ,this.strm.avail_out=0;let n=lB(this.strm,t.windowBits);if(n!==mB)throw new Error(Cn[n]);if(this.header=new dB,iB(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=CQ(t.dictionary):"[object ArrayBuffer]"===IB.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=cB(this.strm,t.dictionary),n!==mB)))throw new Error(Cn[n])}function VB(e,t){const n=new GB(t);if(n.push(e),n.err)throw n.msg||Cn[n.err];return n.result}GB.prototype.push=function(e,t){const n=this.strm,Q=this.options.chunkSize,B=this.options.dictionary;let a,s,r;if(this.ended)return!1;for(s=t===~~t?t:!0===t?CB:uB,"[object ArrayBuffer]"===IB.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(Q),n.next_out=0,n.avail_out=Q),a=oB(n,s),a===SB&&B&&(a=cB(n,B),a===mB?a=oB(n,s):a===ZB&&(a=SB));n.avail_in>0&&a===bB&&n.state.wrap>0&&0!==e[n.next_in];)FB(n),a=oB(n,s);switch(a){case yB:case ZB:case SB:case xB:return this.onEnd(a),this.ended=!0,!1}if(r=n.avail_out,n.next_out&&(0===n.avail_out||a===bB))if("string"===this.options.to){let e=bQ(n.output,n.next_out),t=n.next_out-e,B=mQ(n.output,e);n.next_out=t,n.avail_out=Q-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(B)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==mB||0!==r){if(a===bB)return a=gB(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},GB.prototype.onData=function(e){this.chunks.push(e)},GB.prototype.onEnd=function(e){e===mB&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=dQ(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var RB={Inflate:GB,inflate:VB,inflateRaw:function(e,t){return(t=t||{}).raw=!0,VB(e,t)},ungzip:VB,constants:mn};const{Deflate:LB,deflate:pB,deflateRaw:hB,gzip:NB}=EQ,{Inflate:DB,inflate:AB,inflateRaw:EB,ungzip:fB}=RB;var JB={Deflate:LB,deflate:pB,deflateRaw:hB,gzip:NB,Inflate:DB,inflate:AB,inflateRaw:EB,ungzip:fB,constants:mn},vB={Int8:Int8Array,UInt8:Uint8Array,Int16:Int16Array,UInt16:Uint16Array,Int32:Int32Array,UInt32:Uint32Array,Int64:Int32Array,UInt64:Uint32Array,Float32:Float32Array,Float64:Float64Array},WB={Int8:1,UInt8:1,Int16:2,UInt16:2,Int32:4,UInt32:4,Int64:8,UInt64:8,Float32:4,Float64:8};function XB(e){var t=e.length-1;return e.filter((function(e,n){return n<t&&n%2==0}))}function HB(e,t){if("UInt64"===t){var n=new Uint32Array(e.buffer,0,6),Q=n[0],B=[8,Q,n[2],n[4]];n=new Uint32Array(e.buffer,24,2*Q);for(var a=0;a<Q;a++)B.push(n[2*a]);return B}var s=new Uint32Array(e.buffer,0,3),r=s[0],U=[4,r,s[1],s[2]];s=new Uint32Array(e.buffer,12,r);for(var F=0;F<r;F++)U.push(s[F]);return U}function kB(e,t){var n=JB.inflate(e);t.uint8.set(n,t.offset),t.offset+=n.length}function TB(e,t,n,Q,B,a){var s=t.getAttribute("type"),r=t.getAttribute("Name"),U=t.getAttribute("format"),F=Number(t.getAttribute("NumberOfComponents")||"1"),l=null;if("ascii"===U){l=new vB[s](e*F);var o=0;t.firstChild.nodeValue.split(/[\\t \\n]+/).forEach((function(e){e.trim().length&&(l[o++]=Number(e))}))}else if("binary"===U){var g=new Uint8Array(Et.toArrayBuffer(t.firstChild.nodeValue.trim()));if("vtkZLibDataCompressor"===n){var i=new ArrayBuffer(WB[s]*e*F);l=new vB[s](i);for(var c={offset:0,uint8:new Uint8Array(i)},d=HB(g,B),I=d[1],u=g.length-(d.reduce((function(e,t){return e+t}),0)-(d[0]+d[1]+d[2]+d[3])),C=0;C<I;C++){var m=d[4+C];kB(new Uint8Array(g.buffer,u,m),c),u+=m}-1!==s.indexOf("Int64")&&(l=XB(l))}else l=new vB[s](g.buffer,WB[B]),-1!==s.indexOf("Int64")&&(l=XB(l))}else if("appended"===U){var b,S=Number(t.getAttribute("offset")),y=(b=S%WB[B]==0?new vB[B](a,S,1):new vB[B](a.slice(S,S+WB[B])))[0]/WB[s];-1!==s.indexOf("Int64")&&(y*=2),l=(S+=WB[B])%WB[s]==0?new vB[s](a,S,y):new vB[s](a.slice(S,S+b[0])),-1!==s.indexOf("Int64")&&(l=XB(l))}else console.error("Format not supported",U);return{name:r,values:l,numberOfComponents:F}}function MB(e,t){function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dataAccessHelper.fetchBinary(e,n)}t.classHierarchy.push("vtkXMLReader"),t.dataAccessHelper||(t.dataAccessHelper=z.a.get("http")),e.setUrl=function(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.url=n;var B=n.split("/");return B.pop(),t.baseURL=B.join("/"),e.loadData(Q)},e.loadData=function(){var Q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(t.url,Q).then(e.parseAsArrayBuffer)},e.parseAsArrayBuffer=function(n){if(!n)return!1;if(n===t.rawDataBuffer)return!0;e.modified();var Q=function(e){return P.a.extractBinary(e,/^\s*<AppendedData\s+encoding="raw">\s*_/m,/\n\s*<\/AppendedData>/m)}(n),B=Q.text,a=Q.binaryBuffer;t.rawDataBuffer=n,t.binaryBuffer=a;var s=function(e){if(window.ActiveXObject){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t}return(new DOMParser).parseFromString(e,"application/xml")}(B).firstChild,r=s.getAttribute("type"),U=s.getAttribute("compressor"),F=s.getAttribute("byte_order"),l=s.getAttribute("header_type")||"UInt32";if(U&&"vtkZLibDataCompressor"!==U)return console.error("Invalid compressor",U),!1;if(F&&"LittleEndian"!==F)return console.error("Only LittleEndian encoding is supported"),!1;if(r!==t.dataType)return console.error("Invalid data type",r,"expecting",t.dataType),!1;if(s.querySelector("AppendedData")){var o=s.querySelector("AppendedData"),g=o.getAttribute("encoding"),i=s.querySelectorAll("DataArray"),c=t.binaryBuffer;"base64"===g&&(c=o.textContent.trim().substr(1));for(var d=[],I=0;I<i.length;++I){var u,C=Number(i[I].getAttribute("offset"));u=I===i.length-1?c.length||c.byteLength:Number(i[I+1].getAttribute("offset")),"base64"===g?d.push(new Uint8Array(Et.toArrayBuffer(c.substring(C,u)))):d.push(new Uint8Array(c.slice(C,u)))}if("vtkZLibDataCompressor"===U)for(var m=0;m<d.length;++m){var b,S=d[m],y=HB(S,l),Z=y[1],x=S.length-(y.reduce((function(e,t){return e+t}),0)-(y[0]+y[1]+y[2]+y[3]));b=Z>0?0===y[3]?new ArrayBuffer(y[2]*Z):new ArrayBuffer(y[2]*(Z-1)+y[3]):new ArrayBuffer(0);for(var G=new Uint8Array(b),V={offset:0,uint8:G},R=0;R<Z;R++){var L=y[4+R];kB(new Uint8Array(S.buffer,x,L),V),x+=L}var p=new Uint8Array(G.length+WB[l]);new vB[l](p.buffer,0,1)[0]=G.length,p.set(G,WB[l]),d[m]=p}for(var h=d.reduce((function(e,t){return e+t.length}),0),N=new ArrayBuffer(h),D=new Uint8Array(N),A=0,E=0;A<d.length;++A)i[A].setAttribute("offset",E),D.set(d[A],E),E+=d[A].length;if(t.binaryBuffer=N,!t.binaryBuffer)return console.error("Processing appended data format: requires binaryBuffer to parse"),!1}return e.parseXML(s,r,U,F,l),!0},e.requestData=function(n,Q){e.parseAsArrayBuffer(t.rawDataBuffer)}}var YB={};var wB={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,YB,n),a.c.obj(e,t),a.c.get(e,t,["url","baseURL"]),a.c.setGet(e,t,["dataAccessHelper"]),a.c.algo(e,t,0,1),MB(e,t)},processDataArray:TB,processFieldData:function(e,t,n,Q,B,a,r){if(t){var U={};["Scalars","Vectors","Normals","Tensors","TCoords"].forEach((function(e){var Q=t.getAttribute(e);Q&&(U[Q]=n["set".concat(e)])}));for(var F=t.getElementsByTagName("DataArray"),l=F.length,o=0;o<l;o++){var g=F[o],i=s.a.newInstance(TB(e,g,Q,0,a,r)),c=i.getName();(U[c]||n.addArray)(i)}}},processCells:function(e,t,n,Q,B,a){for(var s={},r=t.getElementsByTagName("DataArray"),U=0;U<r.length;U++){var F=r[U];s[F.getAttribute("Name")]=F}var l=TB(e,s.offsets,n,0,B,a).values,o=l[l.length-1],g=TB(o,s.connectivity,n,0,B,a).values,i=new Uint32Array(e+o),c=0,d=0;return l.forEach((function(e){var t=e-d;i[c++]=t;for(var n=0;n<t;n++)i[c++]=g[d+n];d=e})),i}};function OB(e,t){t.classHierarchy.push("vtkXMLImageDataReader"),e.parseXML=function(e,n,Q,B,a){for(var s=e.getElementsByTagName(t.dataType)[0],r=s.getAttribute("Origin").split(" ").map((function(e){return Number(e)})),U=s.getAttribute("Spacing").split(" ").map((function(e){return Number(e)})),F=s.getElementsByTagName("Piece"),l=F.length,o=0;o<l;o++){var g=F[o],i=g.getAttribute("Extent").split(" ").map((function(e){return Number(e)})),c=Lt.newInstance({origin:r,spacing:U,extent:i});wB.processFieldData(c.getNumberOfPoints(),g.getElementsByTagName("PointData")[0],c.getPointData(),Q,B,a,t.binaryBuffer),wB.processFieldData(c.getNumberOfCells(),g.getElementsByTagName("CellData")[0],c.getCellData(),Q,B,a,t.binaryBuffer),t.output[o]=c}}}var zB={dataType:"ImageData"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zB,n),wB.extend(e,t,n),OB(e,t)}),"vtkXMLImageDataReader");function PB(e,t){t.classHierarchy.push("vtkXMLPolyDataReader"),e.parseXML=function(e,n,Q,a,r){var F=e.getElementsByTagName(t.dataType)[0],l=F.getElementsByTagName("FieldData")[0],o=F.getElementsByTagName("Piece"),g=o.length,i=[];l&&(i=Object(B.a)(l.getElementsByTagName("DataArray")).map((function(e){return function(e,t,n,Q,B){var a=Number(e.getAttribute("NumberOfTuples"));return s.a.newInstance(wB.processDataArray(a,e,t,n,Q,B))}(e,Q,a,r,t.binaryBuffer)})));for(var c=function(e){var n=U.a.newInstance(),B=o[e],s=function(e,t,n,Q,B,a,s){var r=Number(n.getAttribute("NumberOf".concat(t)));if(r>0){var U=n.getElementsByTagName(t)[0].getElementsByTagName("DataArray")[0],F=wB.processDataArray(r,U,Q,B,a,s),l=F.values,o=F.numberOfComponents;e["get".concat(t)]().setData(l,o)}return r}(n,"Points",B,Q,a,r,t.binaryBuffer),F=0;["Verts","Lines","Strips","Polys"].forEach((function(e){F+=function(e,t,n,Q,B,a,s){var r=Number(n.getAttribute("NumberOf".concat(t)));if(r>0){var U=wB.processCells(r,n.getElementsByTagName(t)[0],Q,B,a,s);e["get".concat(t)]().setData(U)}return r}(n,e,B,Q,a,r,t.binaryBuffer)})),wB.processFieldData(s,B.getElementsByTagName("PointData")[0],n.getPointData(),Q,a,r,t.binaryBuffer),wB.processFieldData(F,B.getElementsByTagName("CellData")[0],n.getCellData(),Q,a,r,t.binaryBuffer);for(var l=n.getFieldData(),g=0;g<i.length;g++)l.addArray(i[g]);t.output[e]=n},d=0;d<g;d++)c(d)}}var KB={dataType:"PolyData"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,KB,n),wB.extend(e,t,n),PB(e,t)}),"vtkXMLPolyDataReader");var jB=n(29),_B=Object(jB.a)((function(e){function t(n,Q){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,Q)}e.exports=t})),qB=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_B(e,t)},$B=n(28),ea=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},ta=function(e,t){return!t||"object"!==Object($B.a)(t)&&"function"!=typeof t?ea(e):t},na=Object(jB.a)((function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t})),Qa=n(1),Ba=n.n(Qa),aa=n(0),sa=n.n(aa),ra=a.c.vtkErrorMacro;function Ua(e,t){t.classHierarchy.push("vtkViewNode"),e.build=function(e){},e.render=function(e){},e.traverse=function(n){var Q=n.getTraverseOperation(),B=e[Q];if(B)B(n);else{e.apply(n,!0);for(var a=0;a<t.children.length;a++)t.children[a].traverse(n);e.apply(n,!1)}},e.apply=function(t,n){var Q=e[t.getOperation()];Q&&Q(n,t)},e.getViewNodeFor=function(n){if(t.renderable===n)return e;for(var Q=0;Q<t.children.length;++Q){var B=t.children[Q].getViewNodeFor(n);if(B)return B}},e.getFirstAncestorOfType=function(e){return t.parent?t.parent.isA(e)?t.parent:t.parent.getFirstAncestorOfType(e):null},e.addMissingNode=function(n){if(n){var Q=t.renderableChildMap.get(n);if(void 0!==Q)Q.setVisited(!0);else{var B=e.createViewNode(n);B&&(B.setParent(e),B.setVisited(!0),t.renderableChildMap.set(n,B),t.children.push(B))}}},e.addMissingNodes=function(n){if(n&&n.length)for(var Q=0;Q<n.length;++Q){var B=n[Q],a=t.renderableChildMap.get(B);if(void 0!==a)a.setVisited(!0);else{var s=e.createViewNode(B);s&&(s.setParent(e),s.setVisited(!0),t.renderableChildMap.set(B,s),t.children.push(s))}}},e.prepareNodes=function(){for(var e=0;e<t.children.length;++e)t.children[e].setVisited(!1)},e.setVisited=function(e){t.visited=e},e.removeUnusedNodes=function(){for(var e=null,n=0;n<t.children.length;++n){var Q=t.children[n];if(Q.getVisited())Q.setVisited(!1);else{var B=Q.getRenderable();B&&t.renderableChildMap.delete(B),e||(e=[]),e.push(Q)}}e&&(t.children=t.children.filter((function(t){return!e.includes(t)})))},e.createViewNode=function(e){if(!t.myFactory)return ra("Cannot create view nodes without my own factory"),null;var n=t.myFactory.createNode(e);return n&&n.setRenderable(e),n}}var Fa={parent:null,renderable:null,myFactory:null,children:[],visited:!1};function la(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fa,n),a.c.obj(e,t),a.c.event(e,t,"event"),t.renderableChildMap=new Map,a.c.get(e,t,["visited"]),a.c.setGet(e,t,["parent","renderable","myFactory"]),a.c.getArray(e,t,["children"]),Ua(e,t)}var oa={newInstance:a.c.newInstance(la,"vtkViewNode"),extend:la,PASS_TYPES:["Build","Render"]},ga=navigator.gpu?"WebGPU":"WebGL",ia=Object.create(null);function ca(e,t){ia[e]=t}function da(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ia[e]&&ia[e](t)}function Ia(e,t){t.classHierarchy.push("vtkRenderWindow"),e.addRenderer=function(n){e.hasRenderer(n)||(n.setRenderWindow(e),t.renderers.push(n),e.modified())},e.removeRenderer=function(n){t.renderers=t.renderers.filter((function(e){return e!==n})),e.modified()},e.hasRenderer=function(e){return-1!==t.renderers.indexOf(e)},e.newAPISpecificView=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return da(e||t.defaultViewAPI,n)},e.addView=function(n){e.hasView(n)||(n.setRenderable(e),t.views.push(n),e.modified())},e.removeView=function(n){t.views=t.views.filter((function(e){return e!==n})),e.modified()},e.hasView=function(e){return-1!==t.views.indexOf(e)},e.render=function(){t.interactor?t.interactor.render():t.views.forEach((function(e){return e.traverseAllPasses()}))},e.getStatistics=function(){var e={propCount:0,invisiblePropCount:0};return t.renderers.forEach((function(t){t.getViewProps().forEach((function(t){if(t.getVisibility()){e.propCount+=1;var n=t.getMapper&&t.getMapper();if(n&&n.getPrimitiveCount){var Q=n.getPrimitiveCount();Object.keys(Q).forEach((function(t){e[t]||(e[t]=0),e[t]+=Q[t]}))}}else e.invisiblePropCount+=1}))})),e.str=Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t])})).join("\n"),e},e.captureImages=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return a.c.setImmediate(e.render),t.views.map((function(e){return e.captureNextImage?e.captureNextImage(n):void 0})).filter((function(e){return!!e}))}}var ua={defaultViewAPI:ga,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1};function Ca(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ua,n),a.c.obj(e,t),a.c.setGet(e,t,["interactor","numberOfLayers","views","defaultViewAPI"]),a.c.get(e,t,["neverRendered"]),a.c.getArray(e,t,["renderers"]),a.c.event(e,t,"completion"),Ia(e,t)}var ma={newInstance:a.c.newInstance(Ca,"vtkRenderWindow"),extend:Ca,registerViewConstructor:ca,listViewAPIs:function(){return Object.keys(ia)},newAPISpecificView:da};function ba(e,t){t.classHierarchy.push("vtkRenderPass"),e.getOperation=function(){return t.currentOperation},e.setCurrentOperation=function(e){t.currentOperation=e,t.currentTraverseOperation="traverse".concat(a.c.capitalize(t.currentOperation))},e.getTraverseOperation=function(){return t.currentTraverseOperation},e.traverse=function(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.deleted||(t.currentParent=Q,t.preDelegateOperations.forEach((function(t){e.setCurrentOperation(t),n.traverse(e)})),t.delegates.forEach((function(t){t.traverse(n,e)})),t.postDelegateOperations.forEach((function(t){e.setCurrentOperation(t),n.traverse(e)})))}}var Sa={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function ya(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Sa,n),a.c.obj(e,t),a.c.get(e,t,["currentOperation"]),a.c.setGet(e,t,["delegates","currentParent","preDelegateOperations","postDelegateOperations"]),ba(e,t)}var Za={newInstance:a.c.newInstance(ya,"vtkRenderPass"),extend:ya},xa={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},Ga={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5},Va={Wrap:xa,Filter:Ga};function Ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var La=Va.Wrap,pa=Va.Filter,ha=s.a.VtkDataTypes,Na=a.c.vtkDebugMacro,Da=a.c.vtkErrorMacro,Aa=a.c.vtkWarningMacro;function Ea(e,t){var n=this;function Q(e,n){var Q=[];if(e!==ha.FLOAT&&t.openGLDataType===t.context.FLOAT)for(var B=t.width*t.height*t.components,a=0;a<n.length;a++){for(var s=new Float32Array(B),r=0;r<B;r++)s[r]=n[a][r];Q.push(s)}if(e!==ha.UNSIGNED_CHAR&&t.openGLDataType===t.context.UNSIGNED_BYTE)for(var U=t.width*t.height*t.components,F=0;F<n.length;F++){for(var l=new Uint8Array(U),o=0;o<U;o++)l[o]=n[F][o];Q.push(l)}if(0===Q.length)for(var g=0;g<n.length;g++)Q.push(n[g]);return Q}function B(e){if(t.openGLRenderWindow.getWebgl2())return e;var n=[],Q=t.width,B=t.height,a=t.components;if(e&&(!Object(u.m)(Q)||!Object(u.m)(B)))for(var s=Object(u.h)(Q),r=Object(u.h)(B),U=s*r*t.components,F=0;F<e.length;F++)if(null!==e[F]){var l=null;switch(t.openGLDataType){case t.context.FLOAT:l=new Float32Array(U);break;default:case t.context.UNSIGNED_BYTE:l=new Uint8Array(U)}for(var o=B/r,g=Q/s,i=0;i<r;i++){var c=i*s*a,d=i*o,I=Math.floor(d),C=Math.ceil(d);C>=B&&(C=B-1);var m=d-I,b=1-m;I=I*Q*a,C=C*Q*a;for(var S=0;S<s;S++){var y=S*a,Z=S*g,x=Math.floor(Z),G=Math.ceil(Z);G>=Q&&(G=Q-1);var V=Z-x;x*=a,G*=a;for(var R=0;R<a;R++)l[c+y+R]=e[F][I+x+R]*b*(1-V)+e[F][I+G+R]*b*V+e[F][C+x+R]*m*(1-V)+e[F][C+G+R]*m*V}}n.push(l),t.width=s,t.height=r}else n.push(null);if(0===n.length)for(var L=0;L<e.length;L++)n.push(e[L]);return n}function a(e,t,n){for(var Q=[],B=[],a=0;a<e;++a)Q[a]=n[a],B[a]=n[a];for(var s=0,r=0;r<t;++r)for(var U=0;U<e;++U)n[s]<Q[U]&&(Q[U]=n[s]),n[s]>B[U]&&(B[U]=n[s]),s++;for(var F=[],l=[],o=0;o<e;++o)Q[o]===B[o]&&(B[o]=Q[o]+1),F[o]=Q[o],l[o]=B[o]-Q[o];return{scale:l,offset:F}}t.classHierarchy.push("vtkOpenGLTexture"),e.render=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(n?t.openGLRenderWindow=n:(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent()),t.context=t.openGLRenderWindow.getContext(),t.renderable.getInterpolate()?(t.generateMipmap?e.setMinificationFilter(pa.LINEAR_MIPMAP_LINEAR):e.setMinificationFilter(pa.LINEAR),e.setMagnificationFilter(pa.LINEAR)):(e.setMinificationFilter(pa.NEAREST),e.setMagnificationFilter(pa.NEAREST)),t.renderable.getRepeat()&&(e.setWrapR(La.REPEAT),e.setWrapS(La.REPEAT),e.setWrapT(La.REPEAT)),t.renderable.getInputData()&&t.renderable.setImage(null),!t.handle||t.renderable.getMTime()>t.textureBuildTime.getMTime()){null!==t.renderable.getImage()&&(t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(pa.LINEAR_MIPMAP_LINEAR)),t.renderable.getImage()&&t.renderable.getImageLoaded()&&(e.create2DFromImage(t.renderable.getImage()),e.activate(),e.sendParameters(),t.textureBuildTime.modified()));var Q=t.renderable.getInputData(0);if(Q&&Q.getPointData().getScalars()){for(var B=Q.getExtent(),a=Q.getPointData().getScalars(),s=[],r=0;r<t.renderable.getNumberOfInputPorts();++r){var U=t.renderable.getInputData(r),F=U?U.getPointData().getScalars().getData():null;F&&s.push(F)}t.renderable.getInterpolate()&&4===a.getNumberOfComponents()&&(t.generateMipmap=!0,e.setMinificationFilter(pa.LINEAR_MIPMAP_LINEAR)),s.length%6==0?e.createCubeFromRaw(B[1]-B[0]+1,B[3]-B[2]+1,a.getNumberOfComponents(),a.getDataType(),s):e.create2DFromRaw(B[1]-B[0]+1,B[3]-B[2]+1,a.getNumberOfComponents(),a.getDataType(),a.getData()),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}}t.handle&&e.activate()},e.destroyTexture=function(){e.deactivate(),t.context&&t.handle&&t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.components=0,t.width=0,t.height=0,t.depth=0,e.resetFormatAndType()},e.createTexture=function(){t.handle||(t.handle=t.context.createTexture(),t.target&&(t.context.bindTexture(t.target,t.handle),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.bindTexture(t.target,null)))},e.getTextureUnit=function(){return t.openGLRenderWindow?t.openGLRenderWindow.getTextureUnitForTexture(e):-1},e.activate=function(){t.openGLRenderWindow.activateTexture(e),e.bind()},e.deactivate=function(){t.openGLRenderWindow&&t.openGLRenderWindow.deactivateTexture(e)},e.releaseGraphicsResources=function(n){n&&t.handle&&(n.activateTexture(e),n.deactivateTexture(e),t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.internalFormat=0,t.format=0,t.openGLDataType=0,t.components=0,t.width=0,t.height=0,t.depth=0),t.shaderProgram&&(t.shaderProgram.releaseGraphicsResources(n),t.shaderProgram=null)},e.bind=function(){t.context.bindTexture(t.target,t.handle),t.autoParameters&&e.getMTime()>t.sendParametersTime.getMTime()&&e.sendParameters()},e.isBound=function(){var e=!1;if(t.context&&t.handle){var n=0;switch(t.target){case t.context.TEXTURE_2D:n=t.context.TEXTURE_BINDING_2D;break;default:Aa("impossible case")}e=t.context.getIntegerv(n)===t.handle}return e},e.sendParameters=function(){t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.openGLRenderWindow.getWebgl2()&&(t.context.texParameteri(t.target,t.context.TEXTURE_BASE_LEVEL,t.baseLevel),t.context.texParameteri(t.target,t.context.TEXTURE_MAX_LEVEL,t.maxLevel)),t.sendParametersTime.modified()},e.getInternalFormat=function(n,Q){return t.internalFormat||(t.internalFormat=e.getDefaultInternalFormat(n,Q)),t.internalFormat||Na("Unable to find suitable internal format for T=".concat(n," NC= ").concat(Q)),t.internalFormat},e.getDefaultInternalFormat=function(e,Q){var B=0;return(B=t.openGLRenderWindow.getDefaultTextureInternalFormat(e,Q,!1))||(B=n.openGLRenderWindow.getDefaultTextureInternalFormat(e,Q,!0))||(Na("Unsupported internal texture type!"),Na("Unable to find suitable internal format for T=".concat(e," NC= ").concat(Q))),B},e.setInternalFormat=function(n){n!==t.internalFormat&&(t.internalFormat=n,e.modified())},e.getFormat=function(n,Q){return t.format=e.getDefaultFormat(n,Q),t.format},e.getDefaultFormat=function(e,n){if(t.openGLRenderWindow.getWebgl2())switch(n){case 1:return t.context.RED;case 2:return t.context.RG;case 3:return t.context.RGB;case 4:return t.context.RGBA;default:return t.context.RGB}else switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:return t.context.RGBA;default:return t.context.RGB}},e.resetFormatAndType=function(){t.format=0,t.internalFormat=0,t.openGLDataType=0},e.getDefaultDataType=function(e){if(t.openGLRenderWindow.getWebgl2())switch(e){case ha.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case ha.FLOAT:case ha.VOID:default:return t.context.FLOAT}switch(e){case ha.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case ha.FLOAT:case ha.VOID:default:return t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?t.context.FLOAT:t.context.UNSIGNED_BYTE}},e.getOpenGLDataType=function(n){return t.openGLDataType=e.getDefaultDataType(n),t.openGLDataType},e.getShiftAndScale=function(){var e=0,n=1;switch(t.openGLDataType){case t.context.BYTE:e=(n=127.5)-128;break;case t.context.UNSIGNED_BYTE:n=255,e=0;break;case t.context.SHORT:e=(n=32767.5)-32768;break;case t.context.UNSIGNED_SHORT:n=65536,e=0;break;case t.context.INT:e=(n=2147483647.5)-2147483648;break;case t.context.UNSIGNED_INT:n=4294967295,e=0;break;case t.context.FLOAT:}return{shift:e,scale:n}},e.getOpenGLFilterMode=function(e){switch(e){case pa.NEAREST:return t.context.NEAREST;case pa.LINEAR:return t.context.LINEAR;case pa.NEAREST_MIPMAP_NEAREST:return t.context.NEAREST_MIPMAP_NEAREST;case pa.NEAREST_MIPMAP_LINEAR:return t.context.NEAREST_MIPMAP_LINEAR;case pa.LINEAR_MIPMAP_NEAREST:return t.context.LINEAR_MIPMAP_NEAREST;case pa.LINEAR_MIPMAP_LINEAR:return t.context.LINEAR_MIPMAP_LINEAR;default:return t.context.NEAREST}},e.getOpenGLWrapMode=function(e){switch(e){case La.CLAMP_TO_EDGE:return t.context.CLAMP_TO_EDGE;case La.REPEAT:return t.context.REPEAT;case La.MIRRORED_REPEAT:return t.context.MIRRORED_REPEAT;default:return t.context.CLAMP_TO_EDGE}},e.create2DFromRaw=function(n,a,s,r,U){if(e.getOpenGLDataType(r),e.getInternalFormat(r,s),e.getFormat(r,s),!t.internalFormat||!t.format||!t.openGLDataType)return Da("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=s,t.width=n,t.height=a,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var F=B(Q(r,[U]));return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,F[0]),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.createCubeFromRaw=function(n,a,s,r,U){if(e.getOpenGLDataType(r),e.getInternalFormat(r,s),e.getFormat(r,s),!t.internalFormat||!t.format||!t.openGLDataType)return Da("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_CUBE_MAP,t.components=s,t.width=n,t.height=a,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),t.maxLevel=U.length/6-1,e.createTexture(),e.bind();for(var F=B(Q(r,U)),l=[],o=t.width,g=t.height,i=0;i<F.length;i++){i%6==0&&0!==i&&(o/=2,g/=2),l[i]=new window[r](g*o*t.components);for(var c=0;c<g;++c){var d=c*o*t.components,I=(g-c-1)*o*t.components;l[i].set(F[i].slice(I,I+o*t.components),d)}}t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1);for(var u=0;u<6;u++)for(var C=0,m=t.width,b=t.height;m>=1&&b>=1;){var S=null;C<=t.maxLevel&&(S=l[6*C+u]),t.context.texImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+u,C,t.internalFormat,m,b,0,t.format,t.openGLDataType,S),C++,m/=2,b/=2}return e.deactivate(),!0},e.createDepthFromRaw=function(n,Q,B,a){return e.getOpenGLDataType(B),t.format=t.context.DEPTH_COMPONENT,t.openGLRenderWindow.getWebgl2()?B===ha.FLOAT?t.internalFormat=t.context.DEPTH_COMPONENT32F:t.internalFormat=t.context.DEPTH_COMPONENT16:t.internalFormat=t.context.DEPTH_COMPONENT,t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_2D,t.components=1,t.width=n,t.height=Q,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,a),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0):(Da("Failed to determine texture parameters."),!1)},e.create2DFromImage=function(n){if(e.getOpenGLDataType(ha.UNSIGNED_CHAR),e.getInternalFormat(ha.UNSIGNED_CHAR,4),e.getFormat(ha.UNSIGNED_CHAR,4),!t.internalFormat||!t.format||!t.openGLDataType)return Da("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=4,t.width=n.width,t.height=n.height,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1);var Q=!Object(u.m)(n.width)||!Object(u.m)(n.height),B=document.createElement("canvas");B.width=Q?Object(u.h)(n.width):n.width,B.height=Q?Object(u.h)(n.height):n.height;var a=B.getContext("2d");a.translate(0,B.height),a.scale(1,-1),a.drawImage(n,0,0,n.width,n.height,0,0,B.width,B.height),navigator.userAgent.indexOf("Chrome/69")>=0&&a.getImageData(0,0,1,1);var s=B;return t.context.texImage2D(t.target,0,t.internalFormat,t.format,t.openGLDataType,s),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.create3DFromRaw=function(n,Q,B,a,s,r){return e.getOpenGLDataType(s),e.getInternalFormat(s,a),e.getFormat(s,a),t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_3D,t.components=a,t.width=n,t.height=Q,t.depth=B,t.numberOfDimensions=3,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.texImage3D(t.target,0,t.internalFormat,t.width,t.height,t.depth,0,t.format,t.openGLDataType,r),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0):(Da("Failed to determine texture parameters."),!1)},e.create3DFilterableFromRaw=function(n,Q,B,s,r,U){for(var F=n*Q*B,l=[],o=[],g=0;g<s;++g)l[g]=0,o[g]=1;if(t.volumeInfo={scale:o,offset:l,width:n,height:Q,depth:B},t.openGLRenderWindow.getWebgl2()){if(r===ha.FLOAT)return e.create3DFromRaw(n,Q,B,s,r,U);if(r===ha.UNSIGNED_CHAR){for(var i=0;i<s;++i)t.volumeInfo.scale[i]=255;return e.create3DFromRaw(n,Q,B,s,r,U)}var c=new Float32Array(F*s),d=a(s,F,U),I=d.offset,C=d.scale;t.volumeInfo.offset=I,t.volumeInfo.scale=C;for(var m=0,b=C.map((function(e){return 1/e})),S=0;S<F;S++)for(var y=0;y<s;y++)c[m]=(U[m]-I[y])*b[y],m++;return e.create3DFromRaw(n,Q,B,s,ha.FLOAT,c)}var Z=a(s,F,U),x=function(e,t,n,Q,B){e[t]=n},G=ha.UNSIGNED_CHAR;if(r===ha.UNSIGNED_CHAR)for(var V=0;V<s;++V)Z.offset[V]=0,Z.scale[V]=255;else t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?(G=ha.FLOAT,x=function(e,t,n,Q,B){e[t]=(n-Q)/B}):(G=ha.UNSIGNED_CHAR,x=function(e,t,n,Q,B){e[t]=255*(n-Q)/B});if(e.getOpenGLDataType(G),e.getInternalFormat(G,s),e.getFormat(G,s),!t.internalFormat||!t.format||!t.openGLDataType)return Da("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=s,t.depth=1,t.numberOfDimensions=2;var R=t.context.getParameter(t.context.MAX_TEXTURE_SIZE);R>4096&&(G===ha.FLOAT||s>=3)&&(R=4096);var L=1,p=1;F>R*R&&(p=L=Math.ceil(Math.sqrt(F/(R*R))));var h=Math.sqrt(F)/L;h=Object(u.h)(h);var N,D=Math.floor(h*L/n),A=Math.ceil(B/D),E=Object(u.h)(Q*A/p);t.width=h,t.height=E,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.volumeInfo.xreps=D,t.volumeInfo.yreps=A,t.volumeInfo.xstride=L,t.volumeInfo.ystride=p,t.volumeInfo.offset=Z.offset,t.volumeInfo.scale=Z.scale;var f=h*E*s;N=G===ha.FLOAT?new Float32Array(f):new Uint8Array(f);for(var J=0,v=Math.floor(n/L),W=Math.floor(Q/p),X=0;X<A;X++)for(var H=Math.min(D,B-X*D),k=s*(t.width-H*Math.floor(n/L)),T=0;T<W;T++){for(var M=0;M<H;M++)for(var Y=s*((X*D+M)*n*Q+p*T*n),w=0;w<v;w++)for(var O=0;O<s;O++)x(N,J,U[Y+L*w*s+O],Z.offset[O],Z.scale[O]),J++;J+=k}return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,N),e.deactivate(),!0},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.getMaximumTextureSize=function(e){return e&&e.isCurrent()?e.getIntegerv(e.MAX_TEXTURE_SIZE):-1}}var fa={openGLRenderWindow:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:La.CLAMP_TO_EDGE,wrapT:La.CLAMP_TO_EDGE,wrapR:La.CLAMP_TO_EDGE,minificationFilter:pa.NEAREST,magnificationFilter:pa.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1};function Ja(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fa,n),oa.extend(e,t,n),t.sendParametersTime={},a.c.obj(t.sendParametersTime,{mtime:0}),t.textureBuildTime={},a.c.obj(t.textureBuildTime,{mtime:0}),a.c.set(e,t,["format","openGLDataType"]),a.c.setGet(e,t,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap"]),a.c.get(e,t,["width","height","volumeInfo","components","handle","target"]),Ea(e,t)}var va=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ra(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ra(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(Ja,"vtkOpenGLTexture"),extend:Ja},Va);function Wa(e,t){t.classHierarchy.push("vtkFramebuffer"),e.getBothMode=function(){return t.context.FRAMEBUFFER},e.saveCurrentBindingsAndBuffers=function(t){var n=void 0!==t?t:e.getBothMode();e.saveCurrentBindings(n),e.saveCurrentBuffers(n)},e.saveCurrentBindings=function(e){var n=t.context;t.previousDrawBinding=n.getParameter(t.context.FRAMEBUFFER_BINDING),t.previousActiveFramebuffer=t.openGLRenderWindow.getActiveFramebuffer()},e.saveCurrentBuffers=function(e){},e.restorePreviousBindingsAndBuffers=function(t){var n=void 0!==t?t:e.getBothMode();e.restorePreviousBindings(n),e.restorePreviousBuffers(n)},e.restorePreviousBindings=function(e){var n=t.context;n.bindFramebuffer(n.FRAMEBUFFER,t.previousDrawBinding),t.openGLRenderWindow.setActiveFramebuffer(t.previousActiveFramebuffer)},e.restorePreviousBuffers=function(e){},e.bind=function(){t.context.bindFramebuffer(t.context.FRAMEBUFFER,t.glFramebuffer),t.colorTexture&&t.colorTexture.bind(),t.openGLRenderWindow.setActiveFramebuffer(e)},e.create=function(e,n){t.glFramebuffer=t.context.createFramebuffer(),t.glFramebuffer.width=e,t.glFramebuffer.height=n},e.setColorBuffer=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Q=t.context,B=Q.COLOR_ATTACHMENT0;if(n>0){if(!t.openGLRenderWindow.getWebgl2())return void Object(a.m)("Using multiple framebuffer attachments requires WebGL 2");B+=n}t.colorTexture=e,Q.framebufferTexture2D(Q.FRAMEBUFFER,B,Q.TEXTURE_2D,e.getHandle(),0)},e.removeColorBuffer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=t.context,Q=n.COLOR_ATTACHMENT0;if(e>0){if(!t.openGLRenderWindow.getWebgl2())return void Object(a.m)("Using multiple framebuffer attachments requires WebGL 2");Q+=e}n.framebufferTexture2D(n.FRAMEBUFFER,Q,n.TEXTURE_2D,null,0)},e.setDepthBuffer=function(e){if(t.openGLRenderWindow.getWebgl2()){var n=t.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,e.getHandle(),0)}else Object(a.m)("Attaching depth buffer textures to fbo requires WebGL 2")},e.removeDepthBuffer=function(){if(t.openGLRenderWindow.getWebgl2()){var e=t.context;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,null,0)}else Object(a.m)("Attaching depth buffer textures to framebuffers requires WebGL 2")},e.getGLFramebuffer=function(){return t.glFramebuffer},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.releaseGraphicsResources=function(){t.glFramebuffer&&t.context.deleteFramebuffer(t.glFramebuffer),t.colorTexture&&t.colorTexture.releaseGraphicsResources()},e.getSize=function(){var e=[0,0];return null!==t.glFramebuffer&&(e[0]=t.glFramebuffer.width,e[1]=t.glFramebuffer.height),e},e.populateFramebuffer=function(){e.bind();var n=t.context,Q=va.newInstance();Q.setOpenGLRenderWindow(t.openGLRenderWindow),Q.setMinificationFilter(Ga.LINEAR),Q.setMagnificationFilter(Ga.LINEAR),Q.create2DFromRaw(t.glFramebuffer.width,t.glFramebuffer.height,4,J.a.UNSIGNED_CHAR,null),e.setColorBuffer(Q),t.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,t.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t.glFramebuffer.width,t.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,t.depthTexture)}}var Xa={openGLRenderWindow:null,glFramebuffer:null,colorTexture:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function Ha(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xa,n),Object(a.h)(e,t),Object(a.j)(e,t,["colorTexture"]),Wa(e,t)}var ka={newInstance:Object(a.g)(Ha,"vtkFramebuffer"),extend:Ha};function Ta(e,t){t.classHierarchy.push("vtkForwardPass"),e.traverse=function(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t.deleted){t.currentParent=Q,e.setCurrentOperation("buildPass"),n.traverse(e);for(var B=n.getRenderable().getNumberOfLayers(),a=n.getChildren(),s=0;s<B;s++)for(var r=0;r<a.length;r++){var U=a[r],F=n.getRenderable().getRenderers()[r];if(F.getDraw()&&F.getLayer()===s){if(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumeCount=0,e.setCurrentOperation("queryPass"),U.traverse(e),t.opaqueActorCount>0&&t.volumeCount>0||t.depthRequested){var l=n.getFramebufferSize();null===t.framebuffer&&(t.framebuffer=ka.newInstance()),t.framebuffer.setOpenGLRenderWindow(n),t.framebuffer.saveCurrentBindingsAndBuffers();var o=t.framebuffer.getSize();null!==o&&o[0]===l[0]&&o[1]===l[1]||(t.framebuffer.create(l[0],l[1]),t.framebuffer.populateFramebuffer()),t.framebuffer.bind(),e.setCurrentOperation("opaqueZBufferPass"),U.traverse(e),t.framebuffer.restorePreviousBindingsAndBuffers(),t.depthRequested=!1}e.setCurrentOperation("cameraPass"),U.traverse(e),t.opaqueActorCount>0&&(e.setCurrentOperation("opaquePass"),U.traverse(e)),t.translucentActorCount>0&&(e.setCurrentOperation("translucentPass"),U.traverse(e)),t.volumeCount>0&&(e.setCurrentOperation("volumePass"),U.traverse(e))}}}},e.getZBufferTexture=function(){return t.framebuffer?t.framebuffer.getColorTexture():null},e.requestDepth=function(){t.depthRequested=!0},e.incrementOpaqueActorCount=function(){return t.opaqueActorCount++},e.incrementTranslucentActorCount=function(){return t.translucentActorCount++},e.incrementVolumeCount=function(){return t.volumeCount++}}var Ma={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,framebuffer:null,depthRequested:!1};function Ya(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ma,n),Za.extend(e,t,n),a.c.get(e,t,["framebuffer"]),Ta(e,t)}var wa={newInstance:a.c.newInstance(Ya,"vtkForwardPass"),extend:Ya};function Oa(e,t){t.classHierarchy.push("vtkGenericWidgetRepresentation")}var za={};function Pa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,za,n),oa.extend(e,t,n),Oa(0,t)}var Ka={newInstance:a.c.newInstance(Pa),extend:Pa};function ja(e,t){t.classHierarchy.push("vtkOpenGLActor"),e.buildPass=function(n){if(n){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t.openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes(),t.ogltextures=null,t.activeTextures=null;for(var Q=0;Q<t.children.length;Q++){var B=t.children[Q];B.isA("vtkOpenGLTexture")?(t.ogltextures||(t.ogltextures=[]),t.ogltextures.push(B)):t.oglmapper=B}}},e.traverseOpaqueZBufferPass=function(t){e.traverseOpaquePass(t)},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.activateTextures=function(){if(t.ogltextures){t.activeTextures=[];for(var e=0;e<t.ogltextures.length;e++){var n=t.ogltextures[e];n.render(),n.getHandle()&&t.activeTextures.push(n)}}},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.opaqueZBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaquePass=function(n,Q){if(n)t.openGLRenderWindow.enableDepthMask(),e.activateTextures();else if(t.activeTextures)for(var B=0;B<t.activeTextures.length;B++)t.activeTextures[B].deactivate()},e.translucentPass=function(n,Q){if(n)t.openGLRenderWindow.disableDepthMask(),e.activateTextures();else if(t.activeTextures)for(var B=0;B<t.activeTextures.length;B++)t.activeTextures[B].deactivate()},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),Object(S.d)(t.keyMatrices.mcwc,t.renderable.getMatrix()),Object(S.i)(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.renderable.getIsIdentity()?It(t.keyMatrices.normalMatrix):(dt(t.keyMatrices.normalMatrix,t.keyMatrices.mcwc),Ct(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),ut(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),t.keyMatrixTime.modified()),t.keyMatrices}}var _a={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function qa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_a,n),oa.extend(e,t,n),t.keyMatrixTime={},a.c.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:It(new Float64Array(9)),mcwc:Object(S.h)(new Float64Array(16))},a.c.setGet(e,t,["context"]),a.c.get(e,t,["activeTextures"]),ja(e,t)}var $a={newInstance:a.c.newInstance(qa),extend:qa};function es(e,t){t.classHierarchy.push("vtkOpenGLActor2D"),e.buildPass=function(n){if(n){if(!t.renderable)return;t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children.forEach((function(e){e.isA("vtkOpenGLTexture")||e.traverse(n)})),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.children.forEach((function(e){e.isA("vtkOpenGLTexture")||e.traverse(n)})),e.apply(n,!1))},e.activateTextures=function(){t.activeTextures=[],t.children.forEach((function(e){e.isA("vtkOpenGLTexture")&&(e.render(),e.getHandle()&&t.activeTextures.push(e))}))},e.opaquePass=function(n,Q){n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!0),e.activateTextures()):t.activeTextures.forEach((function(e){e.deactivate()}))},e.translucentPass=function(n,Q){n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1),e.activateTextures()):(t.activeTextures.forEach((function(e){e.deactivate()})),t.context.depthMask(!0))}}var ts={context:null,activeTextures:[]};function ns(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ts,n),oa.extend(e,t,n),Object(a.j)(e,t,["context"]),Object(a.e)(e,t,["activeTextures"]),es(e,t)}var Qs={newInstance:Object(a.g)(ns),extend:ns};function Bs(e,t){t.classHierarchy.push("vtkOpenGLCamera"),e.buildPass=function(n){n&&(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext())},e.opaquePass=function(e){if(e){var n=t.openGLRenderer.getTiledSizeAndOrigin();t.context.viewport(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize),t.context.scissor(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize)}},e.translucentPass=e.opaquePass,e.opaqueZBufferPass=e.opaquePass,e.volumePass=e.opaquePass,e.getKeyMatrices=function(n){if(n!==t.lastRenderer||t.openGLRenderWindow.getMTime()>t.keyMatrixTime.getMTime()||e.getMTime()>t.keyMatrixTime.getMTime()||n.getMTime()>t.keyMatrixTime.getMTime()||t.renderable.getMTime()>t.keyMatrixTime.getMTime()){Object(S.d)(t.keyMatrices.wcvc,t.renderable.getViewMatrix()),dt(t.keyMatrices.normalMatrix,t.keyMatrices.wcvc),Ct(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),Object(S.i)(t.keyMatrices.wcvc,t.keyMatrices.wcvc);var Q=t.openGLRenderer.getAspectRatio();Object(S.d)(t.keyMatrices.vcpc,t.renderable.getProjectionMatrix(Q,-1,1)),Object(S.i)(t.keyMatrices.vcpc,t.keyMatrices.vcpc),Object(S.l)(t.keyMatrices.wcpc,t.keyMatrices.vcpc,t.keyMatrices.wcvc),t.keyMatrixTime.modified(),t.lastRenderer=n}return t.keyMatrices}}var as={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function ss(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,as,n),oa.extend(e,t,n),t.keyMatrixTime={},Object(a.h)(t.keyMatrixTime),t.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},Object(a.j)(e,t,["context","keyMatrixTime"]),Bs(e,t)}var rs={newInstance:Object(a.g)(ss),extend:ss},Us={FLAT:0,GOURAUD:1,PHONG:2},Fs={POINTS:0,WIREFRAME:1,SURFACE:2},ls={Shading:Us,Representation:Fs,Interpolation:Us};function os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var gs=ls.Representation,is=ls.Interpolation;function cs(e){return function(){return a.c.vtkErrorMacro("vtkProperty::".concat(e," - NOT IMPLEMENTED"))}}function ds(e,t){t.classHierarchy.push("vtkProperty"),e.setColor=function(n,Q,B){Array.isArray(n)?t.color[0]===n[0]&&t.color[1]===n[1]&&t.color[2]===n[2]||(t.color[0]=n[0],t.color[1]=n[1],t.color[2]=n[2],e.modified()):t.color[0]===n&&t.color[1]===Q&&t.color[2]===B||(t.color[0]=n,t.color[1]=Q,t.color[2]=B,e.modified()),e.setDiffuseColor(t.color),e.setAmbientColor(t.color),e.setSpecularColor(t.color)},e.computeCompositeColor=cs("ComputeCompositeColor"),e.getColor=function(){var e=0;t.ambient+t.diffuse+t.specular>0&&(e=1/(t.ambient+t.diffuse+t.specular));for(var n=0;n<3;n++)t.color[n]=e*(t.ambient*t.ambientColor[n]+t.diffuse*t.diffuseColor[n]+t.specular*t.specularColor[n]);return[].concat(t.color)},e.addShaderVariable=cs("AddShaderVariable"),e.setInterpolationToFlat=function(){return e.setInterpolation(is.FLAT)},e.setInterpolationToGouraud=function(){return e.setInterpolation(is.GOURAUD)},e.setInterpolationToPhong=function(){return e.setInterpolation(is.PHONG)},e.getInterpolationAsString=function(){return a.c.enumToString(is,t.interpolation)},e.setRepresentationToWireframe=function(){return e.setRepresentation(gs.WIREFRAME)},e.setRepresentationToSurface=function(){return e.setRepresentation(gs.SURFACE)},e.setRepresentationToPoints=function(){return e.setRepresentation(gs.POINTS)},e.getRepresentationAsString=function(){return a.c.enumToString(gs,t.representation)}}var Is={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,specular:0,specularPower:1,opacity:1,interpolation:is.GOURAUD,representation:gs.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function us(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Is,n),a.c.obj(e,t),a.c.setGet(e,t,["lighting","interpolation","ambient","diffuse","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation"]),a.c.setGetArray(e,t,["ambientColor","specularColor","diffuseColor","edgeColor"],3),ds(e,t)}var Cs=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?os(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):os(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(us,"vtkProperty"),extend:us},ls),ms={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4},bs={VectorMode:{MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},ScalarMappingTarget:ms},Ss={ColorMode:{DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},GetArray:{BY_ID:0,BY_NAME:1},ScalarMode:{DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5}};function ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var Zs=bs.ScalarMappingTarget,xs=bs.VectorMode,Gs=s.a.VtkDataTypes,Vs=Ss.ColorMode,Rs=a.c.vtkErrorMacro;function Ls(e){return e}function ps(e){return Math.floor(255*e+.5)}function hs(e,t){t.classHierarchy.push("vtkScalarsToColors"),e.setVectorModeToMagnitude=function(){return e.setVectorMode(xs.MAGNITUDE)},e.setVectorModeToComponent=function(){return e.setVectorMode(xs.COMPONENT)},e.setVectorModeToRGBColors=function(){return e.setVectorMode(xs.RGBCOLORS)},e.build=function(){},e.isOpaque=function(){return!0},e.setAnnotations=function(n,Q){if(!(n&&!Q||!n&&Q))if(n&&Q&&n.length!==Q.length)Rs("Values and annotations do not have the same number of tuples so ignoring");else{if(t.annotationArray=[],Q&&n)for(var B=Q.length,a=0;a<B;a++)t.annotationArray.push({value:n[a],annotation:String(Q[a])});e.updateAnnotatedValueMap(),e.modified()}},e.setAnnotation=function(n,Q){var B=e.checkForAnnotatedValue(n),a=!1;return B>=0?t.annotationArray[B].annotation!==Q&&(t.annotationArray[B].annotation=Q,a=!0):(t.annotationArray.push({value:n,annotation:Q}),B=t.annotationArray.length-1,a=!0),a&&(e.updateAnnotatedValueMap(),e.modified()),B},e.getNumberOfAnnotatedValues=function(){return t.annotationArray.length},e.getAnnotatedValue=function(e){return e<0||e>=t.annotationArray.length?null:t.annotationArray[e].value},e.getAnnotation=function(e){return void 0===t.annotationArray[e]?null:t.annotationArray[e].annotation},e.getAnnotatedValueIndex=function(n){return t.annotationArray.length?e.checkForAnnotatedValue(n):-1},e.removeAnnotation=function(n){var Q=e.checkForAnnotatedValue(n),B=Q>=0;return B&&(t.annotationArray.splice(Q,1),e.updateAnnotatedValueMap(),e.modified()),B},e.resetAnnotations=function(){t.annotationArray=[],t.annotatedValueMap=[],e.modified()},e.getAnnotationColor=function(n,Q){if(t.indexedLookup){var B=e.getAnnotatedValueIndex(n);e.getIndexedColor(B,Q)}else e.getColor(parseFloat(n),Q),Q[3]=1},e.checkForAnnotatedValue=function(t){return e.getAnnotatedValueIndexInternal(t)},e.getAnnotatedValueIndexInternal=function(e){if(void 0!==t.annotatedValueMap[e]){var n=t.annotationArray.length;return t.annotatedValueMap[e]%n}return-1},e.getIndexedColor=function(e,t){t[0]=0,t[1]=0,t[2]=0,t[3]=0},e.updateAnnotatedValueMap=function(){t.annotatedValueMap=[];for(var e=t.annotationArray.length,n=0;n<e;n++)t.annotatedValueMap[t.annotationArray[n].value]=n},e.mapScalars=function(t,n,Q){var B=t.getNumberOfComponents(),a=null;if(n===Vs.DEFAULT&&t.getDataType()===Gs.UNSIGNED_CHAR||n===Vs.DIRECT_SCALARS&&t)a=e.convertToRGBA(t,B,t.getNumberOfTuples());else{var r={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:Gs.UNSIGNED_CHAR},U=new window[r.dataType](4*t.getNumberOfTuples());r.values=U,r.size=U.length,a=s.a.newInstance(r);var F=Q;F<0&&B>1?e.mapVectorsThroughTable(t,a,Zs.RGBA,-1,-1):(F<0&&(F=0),F>=B&&(F=B-1),e.mapScalarsThroughTable(t,a,Zs.RGBA,F))}return a},e.mapVectorsToMagnitude=function(e,t,n){for(var Q=e.getNumberOfTuples(),B=e.getNumberOfComponents(),a=t.getData(),s=e.getData(),r=0;r<Q;r++){for(var U=0,F=0;F<n;F++)U+=s[r*B+F]*s[r*B+F];a[r]=Math.sqrt(U)}},e.mapVectorsThroughTable=function(t,n,Q,B,a){var r=e.getVectorMode(),U=a,F=B,l=t.getNumberOfComponents();r===xs.COMPONENT?(-1===F&&(F=e.getVectorComponent()),F<0&&(F=0),F>=l&&(F=l-1)):(-1===U&&(U=e.getVectorSize()),U<=0?(F=0,U=l):(F<0&&(F=0),F>=l&&(F=l-1),F+U>l&&(U=l-F)),r!==xs.MAGNITUDE||1!==l&&1!==U||(r=xs.COMPONENT));var o=0;switch(F>0&&(o=F),r){case xs.COMPONENT:e.mapScalarsThroughTable(t,n,Q,o);break;default:case xs.MAGNITUDE:var g=s.a.newInstance({numberOfComponents:1,values:new Float32Array(t.getNumberOfTuples())});e.mapVectorsToMagnitude(t,g,U),e.mapScalarsThroughTable(g,n,Q,0);break;case xs.RGBCOLORS:}},e.luminanceToRGBA=function(e,t,n,Q){for(var B=Q(n),a=t.getData(),s=e.getData(),r=a.length,U=0,F=0;F<r;F+=1){var l=Q(a[F]);s[4*U]=l,s[4*U+1]=l,s[4*U+2]=l,s[4*U+3]=B,U++}},e.luminanceAlphaToRGBA=function(e,t,n,Q){for(var B=t.getData(),a=e.getData(),s=B.length,r=0,U=0;U<s;U+=2){var F=Q(B[U]);a[r]=F,a[r+1]=F,a[r+2]=F,a[r+3]=Q(B[U+1])*n,r+=4}},e.rGBToRGBA=function(e,t,n,Q){for(var B=ps(n),a=t.getData(),s=e.getData(),r=a.length,U=0,F=0;F<r;F+=3)s[4*U]=Q(a[F]),s[4*U+1]=Q(a[F+1]),s[4*U+2]=Q(a[F+2]),s[4*U+3]=B,U++},e.rGBAToRGBA=function(e,t,n,Q){for(var B=t.getData(),a=e.getData(),s=B.length,r=0,U=0;U<s;U+=4)a[4*r]=Q(B[U]),a[4*r+1]=Q(B[U+1]),a[4*r+2]=Q(B[U+2]),a[4*r+3]=Q(B[U+3])*n,r++},e.convertToRGBA=function(n,Q,B){var a=t.alpha;if(4===Q&&a>=1&&n.getDataType()===Gs.UNSIGNED_CHAR)return n;var r=s.a.newInstance({numberOfComponents:4,empty:!0,size:4*B,dataType:Gs.UNSIGNED_CHAR});if(B<=0)return r;a=(a=a>0?a:0)<1?a:1;var U=Ls;switch(n.getDataType()!==Gs.FLOAT&&n.getDataType()!==Gs.DOUBLE||(U=ps),Q){case 1:e.luminanceToRGBA(r,n,a,U);break;case 2:e.luminanceAlphaToRGBA(r,n,U);break;case 3:e.rGBToRGBA(r,n,a,U);break;case 4:e.rGBAToRGBA(r,n,a,U);break;default:return Rs("Cannot convert colors"),null}return r},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return 16777216},e.setRange=function(t,n){return e.setMappingRange(t,n)},e.getRange=function(t,n){return e.getMappingRange()}}var Ns={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:xs.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function Ds(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ns,n),a.c.obj(e,t),t.mappingRange=[0,255],t.annotationArray=[],t.annotatedValueMap=[],a.c.setGet(e,t,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),a.c.setArray(e,t,["mappingRange"],2),a.c.getArray(e,t,["mappingRange"]),hs(e,t)}var As=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ys(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(Ds,"vtkScalarsToColors"),extend:Ds},bs),Es=a.c.vtkErrorMacro;function fs(e,t){t.classHierarchy.push("vtkLookupTable"),e.isOpaque=function(){if(t.opaqueFlagBuildTime.getMTime()<e.getMTime()){var n=!0;t.nanColor[3]<1&&(n=0),t.useBelowRangeColor&&t.belowRangeColor[3]<1&&(n=0),t.useAboveRangeColor&&t.aboveRangeColor[3]<1&&(n=0);for(var Q=3;Q<t.table.length&&n;Q+=4)t.table[Q]<255&&(n=!1);t.opaqueFlag=n,t.opaqueFlagBuildTime.modified()}return t.opaqueFlag},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return t.table.length},e.linearIndexLookup=function(e,t){var n=0;return n=e<t.range[0]?t.maxIndex+0+1.5:e>t.range[1]?t.maxIndex+1+1.5:(n=(e+t.shift)*t.scale)<t.maxIndex?n:t.maxIndex,Math.floor(n)},e.linearLookup=function(t,n,Q){var B=4*(Object(u.v)(t)?Math.floor(Q.maxIndex+1.5+2):e.linearIndexLookup(t,Q));return[n[B],n[B+1],n[B+2],n[B+3]]},e.indexedLookupFunction=function(n,Q,B){var a=e.getAnnotatedValueIndexInternal(n);-1===a&&(a=t.numberOfColors+2);var s=4*a;return[Q[s],Q[s+1],Q[s+2],Q[s+3]]},e.lookupShiftAndScale=function(e,t){t.shift=-e[0],t.scale=Number.MAX_VALUE,e[1]>e[0]&&(t.scale=(t.maxIndex+1)/(e[1]-e[0]))},e.mapScalarsThroughTable=function(n,Q,B,a){var s=e.linearLookup;t.indexedLookup&&(s=e.indexedLookupFunction);var r=e.getMappingRange(),U={maxIndex:e.getNumberOfColors()-1,range:r,shift:0,scale:0};e.lookupShiftAndScale(r,U);var F=e.getAlpha(),l=n.getNumberOfTuples(),o=n.getNumberOfComponents(),g=Q.getData(),i=n.getData();if(F>=1){if(B===ms.RGBA)for(var c=0;c<l;c++){var d=s(i[c*o+a],t.table,U);g[4*c]=d[0],g[4*c+1]=d[1],g[4*c+2]=d[2],g[4*c+3]=d[3]}}else if(B===ms.RGBA)for(var I=0;I<l;I++){var u=s(i[I*o+a],t.table,U);g[4*I]=u[0],g[4*I+1]=u[1],g[4*I+2]=u[2],g[4*I+3]=Math.floor(u[3]*F+.5)}},e.forceBuild=function(){var n=0,Q=0,B=0,a=0,s=t.numberOfColors-1;s&&(n=(t.hueRange[1]-t.hueRange[0])/s,Q=(t.saturationRange[1]-t.saturationRange[0])/s,B=(t.valueRange[1]-t.valueRange[0])/s,a=(t.alphaRange[1]-t.alphaRange[0])/s);for(var r=[],U=[],F=0;F<=s;F++)r[0]=t.hueRange[0]+F*n,r[1]=t.saturationRange[0]+F*Q,r[2]=t.valueRange[0]+F*B,Object(u.u)(r,U),U[3]=t.alphaRange[0]+F*a,t.table[4*F]=255*U[0]+.5,t.table[4*F+1]=255*U[1]+.5,t.table[4*F+2]=255*U[2]+.5,t.table[4*F+3]=255*U[3]+.5;e.buildSpecialColors(),t.buildTime.modified()},e.setTable=function(n){if(4===n.getNumberOfComponents())if(n.getDataType()===J.a.UNSIGNED_CHAR){t.numberOfColors=n.getNumberOfTuples();for(var Q=n.getData(),B=0;B<Q.length;B++)t.table[B]=Q[B];e.buildSpecialColors(),t.insertTime.modified(),e.modified()}else Es("Expected unsigned char values for RGBA colors");else Es("Expected 4 components for RGBA colors")},e.buildSpecialColors=function(){var e=t.numberOfColors,n=t.table,Q=4*(e+0);t.useBelowRangeColor||0===e?(n[Q]=255*t.belowRangeColor[0]+.5,n[Q+1]=255*t.belowRangeColor[1]+.5,n[Q+2]=255*t.belowRangeColor[2]+.5,n[Q+3]=255*t.belowRangeColor[3]+.5):(n[Q]=n[0],n[Q+1]=n[1],n[Q+2]=n[2],n[Q+3]=n[3]),Q=4*(e+1),t.useAboveRangeColor||0===e?(n[Q]=255*t.aboveRangeColor[0]+.5,n[Q+1]=255*t.aboveRangeColor[1]+.5,n[Q+2]=255*t.aboveRangeColor[2]+.5,n[Q+3]=255*t.aboveRangeColor[3]+.5):(n[Q]=n[4*(e-1)+0],n[Q+1]=n[4*(e-1)+1],n[Q+2]=n[4*(e-1)+2],n[Q+3]=n[4*(e-1)+3]),n[Q=4*(e+2)]=255*t.nanColor[0]+.5,n[Q+1]=255*t.nanColor[1]+.5,n[Q+2]=255*t.nanColor[2]+.5,n[Q+3]=255*t.nanColor[3]+.5},e.build=function(){(t.table.length<1||e.getMTime()>t.buildTime.getMTime()&&t.insertTime.getMTime()<=t.buildTime.getMTime())&&e.forceBuild()},t.table.length>0&&t.insertTime.modified()}var Js={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function vs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Js,n),As.extend(e,t,n),t.table||(t.table=[]),t.buildTime={},a.c.obj(t.buildTime),t.opaqueFlagBuildTime={},a.c.obj(t.opaqueFlagBuildTime,{mtime:0}),t.insertTime={},a.c.obj(t.insertTime,{mtime:0}),a.c.get(e,t,["buildTime"]),a.c.setGet(e,t,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),a.c.setArray(e,t,["alphaRange","hueRange","saturationRange","valueRange"],2),a.c.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),a.c.getArray(e,t,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),fs(e,t)}var Ws={newInstance:a.c.newInstance(vs,"vtkLookupTable"),extend:vs};function Xs(e,t){e.update=function(){e.getInputData()},e.addClippingPlane=function(e){"vtkPlane"===e.getClassName()&&t.clippingPlanes.push(e)},e.getNumberOfClippingPlanes=function(){return t.clippingPlanes.length},e.removeAllClippingPlanes=function(){t.clippingPlanes.length=0},e.removeClippingPlane=function(e){e<0||e>=6||t.clippingPlanes.splice(e,1)},e.getClippingPlanes=function(){return t.clippingPlanes},e.setClippingPlanes=function(t){if(t)if(Array.isArray(t))for(var n=t.length,Q=0;Q<n&&Q<6;Q++)e.addClippingPlane(t[Q]);else e.addClippingPlane(t)}}var Hs={clippingPlanes:[]};var ks={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Hs,n),a.c.obj(e,t),a.c.algo(e,t,1,0),t.clippingPlanes||(t.clippingPlanes=[]),Xs(e,t)}};function Ts(e,t){e.getBounds=function(){return 0},e.getBounds=function(n){e.getBounds();for(var Q=0;Q<6;Q++)n[Q]=t.bounds[Q]},e.getCenter=function(){e.getBounds();for(var n=0;n<3;n++)t.center[n]=(t.bounds[2*n+1]+t.bounds[2*n])/2;return t.center.slice()},e.getLength=function(){var n=0,Q=0;e.getBounds();for(var B=0;B<3;B++)Q+=(n=t.bounds[2*B+1]-t.bounds[2*B])*n;return Math.sqrt(Q)},e.getClippingPlaneInDataCoords=function(e,n,Q){var B=t.clippingPlanes,s=e;if(B){var r=B.length;if(n>=0&&n<r){var U=B[n],F=U.getNormal(),l=U.getOrigin(),o=F[0],g=F[1],i=F[2],c=-(o*l[0]+g*l[1]+i*l[2]);return Q[0]=o*s[0]+g*s[4]+i*s[8]+c*s[12],Q[1]=o*s[1]+g*s[5]+i*s[9]+c*s[13],Q[2]=o*s[2]+g*s[6]+i*s[10]+c*s[14],void(Q[3]=o*s[3]+g*s[7]+i*s[11]+c*s[15])}}a.c.vtkErrorMacro("Clipping plane index ".concat(n," is out of range."))}}var Ms={bounds:[1,-1,1,-1,1,-1],center:[0,0,0]};var Ys={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ms,n),ks.extend(e,t,n),t.bounds||Object(u.D)(t.bounds),t.center||(t.center=[0,0,0]),Ts(e,t)}},ws=1,Os=0,zs=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function Ps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Os=e}var Ks={getResolveCoincidentTopologyAsString:function(){return zs[Os]},getResolveCoincidentTopologyPolygonOffsetFaces:function(){return ws},getResolveCoincidentTopology:function(){return Os},setResolveCoincidentTopology:Ps,setResolveCoincidentTopologyPolygonOffsetFaces:function(e){ws=e},setResolveCoincidentTopologyToDefault:function(){Ps(0)},setResolveCoincidentTopologyToOff:function(){Ps(0)},setResolveCoincidentTopologyToPolygonOffset:function(){Ps(1)}};function js(e,t,n){n.forEach((function(n){e["get".concat(n.method)]=function(){return t[n.key]},e["set".concat(n.method)]=function(e,Q){t[n.key]={factor:e,offset:Q}}}))}var _s=["Polygon","Line","Point"],qs={};js(qs,{Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},_s.map((function(e){return{key:e,method:"ResolveCoincidentTopology".concat(e,"OffsetParameters")}})));var $s={implementCoincidentTopologyMethods:function(e,t){void 0===t.resolveCoincidentTopology&&(t.resolveCoincidentTopology=!1),a.c.setGet(e,t,["resolveCoincidentTopology"]),t.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(Ks).forEach((function(t){e[t]=Ks[t]})),Object.keys(qs).forEach((function(t){e[t]=qs[t]})),js(e,t.topologyOffset,_s.map((function(e){return{key:e,method:"RelativeCoincidentTopology".concat(e,"OffsetParameters")}}))),e.getCoincidentTopologyPolygonOffsetParameters=function(){var t=qs.getResolveCoincidentTopologyPolygonOffsetParameters(),n=e.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyLineOffsetParameters=function(){var t=qs.getResolveCoincidentTopologyLineOffsetParameters(),n=e.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyPointOffsetParameter=function(){var t=qs.getResolveCoincidentTopologyPointOffsetParameters(),n=e.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}}},staticOffsetAPI:qs,otherStaticMethods:Ks,CATEGORIES:_s};function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nr=$s.staticOffsetAPI,Qr=$s.otherStaticMethods,Br=Ss.ColorMode,ar=Ss.ScalarMode,sr=Ss.GetArray,rr=bs.VectorMode,Ur=s.a.VtkDataTypes;function Fr(e){return function(){return a.c.vtkErrorMacro("vtkMapper::".concat(e," - NOT IMPLEMENTED"))}}function lr(e,t){t.classHierarchy.push("vtkMapper"),e.getBounds=function(){var n=e.getInputData();return n?(t.static||e.update(),t.bounds=n.getBounds()):t.bounds=Object(u.j)(),t.bounds},e.setForceCompileOnly=function(e){t.forceCompileOnly=e},e.createDefaultLookupTable=function(){t.lookupTable=Ws.newInstance()},e.getColorModeAsString=function(){return a.c.enumToString(Br,t.colorMode)},e.setColorModeToDefault=function(){return e.setColorMode(0)},e.setColorModeToMapScalars=function(){return e.setColorMode(1)},e.setColorModeToDirectScalars=function(){return e.setColorMode(2)},e.getScalarModeAsString=function(){return a.c.enumToString(ar,t.scalarMode)},e.setScalarModeToDefault=function(){return e.setScalarMode(0)},e.setScalarModeToUsePointData=function(){return e.setScalarMode(1)},e.setScalarModeToUseCellData=function(){return e.setScalarMode(2)},e.setScalarModeToUsePointFieldData=function(){return e.setScalarMode(3)},e.setScalarModeToUseCellFieldData=function(){return e.setScalarMode(4)},e.setScalarModeToUseFieldData=function(){return e.setScalarMode(5)},e.getAbstractScalars=function(e,n,Q,B,a){if(!e||!t.scalarVisibility)return{scalars:null,cellFLag:!1};var s=null,r=!1;if(n===ar.DEFAULT)(s=e.getPointData().getScalars())||(s=e.getCellData().getScalars(),r=!0);else if(n===ar.USE_POINT_DATA)s=e.getPointData().getScalars();else if(n===ar.USE_CELL_DATA)s=e.getCellData().getScalars(),r=!0;else if(n===ar.USE_POINT_FIELD_DATA){var U=e.getPointData();s=Q===sr.BY_ID?U.getArrayByIndex(B):U.getArrayByName(a)}else if(n===ar.USE_CELL_FIELD_DATA){var F=e.getCellData();r=!0,s=Q===sr.BY_ID?F.getArrayByIndex(B):F.getArrayByName(a)}else if(n===ar.USE_FIELD_DATA){var l=e.getFieldData();s=Q===sr.BY_ID?l.getArrayByIndex(B):l.getArrayByName(a)}return{scalars:s,cellFlag:r}},e.mapScalars=function(n,Q){var B=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(!B)return t.colorCoordinates=null,t.colorTextureMap=null,void(t.colorMapColors=null);var a="".concat(e.getMTime()).concat(B.getMTime()).concat(Q);if(t.colorBuildString!==a){if(t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),e.canUseTextureMapForColoring(n))e.mapScalarsToTexture(B,Q);else{t.colorCoordinates=null,t.colorTextureMap=null;var s=e.getLookupTable();s&&(s.build(),t.colorMapColors=s.mapScalars(B,t.colorMode,-1))}t.colorBuildString="".concat(e.getMTime()).concat(B.getMTime()).concat(Q)}},e.scalarToTextureCoordinate=function(e,t,n){var Q=.5,B=1;return Object(u.v)(e)||(B=.49,(Q=(e-t)*n)>1e3?Q=1e3:Q<-1e3&&(Q=-1e3)),{texCoordS:Q,texCoordT:B}},e.createColorTextureCoordinates=function(t,n,Q,B,a,s,r,U,F){var l=(s[1]-s[0])/U,o=[];o[0]=s[0]-l,o[1]=s[1]+l;var g=1/(o[1]-o[0]),i=n.getData(),c=t.getData(),d=0,I=0;if(a<0||a>=B)for(var u=0;u<Q;++u){for(var C=0,m=0;m<B;++m)C+=c[d]*c[d],d++;var b=Math.sqrt(C);F&&(b=Ws.applyLogScale(b,r,s));var S=e.scalarToTextureCoordinate(b,o[0],g);i[I]=S.texCoordS,i[I+1]=S.texCoordT,I+=2}else{d+=a;for(var y=0;y<Q;++y){var Z=c[d];F&&(Z=Ws.applyLogScale(Z,r,s));var x=e.scalarToTextureCoordinate(Z,o[0],g);i[I]=x.texCoordS,i[I+1]=x.texCoordT,I+=2,d+=B}}},e.mapScalarsToTexture=function(n,Q){var B=t.lookupTable.getRange(),a=t.lookupTable.usingLogScale();a&&Ws.getLogRange(B,B);var r=t.lookupTable.getAlpha();if(t.colorMapColors=null,null==t.colorTextureMap||e.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getAlpha()!==Q){t.lookupTable.setAlpha(Q),t.colorTextureMap=null,t.lookupTable.build();var U=t.lookupTable.getNumberOfAvailableColors();U>4094&&(U=4094),U+=2;for(var F=(B[1]-B[0])/(U-1-2),l=new Float64Array(2*U),o=0;o<U;++o)l[o]=B[0]+o*F-F,a&&(l[o]=Math.pow(10,l[o]));for(var g=0;g<U;++g)l[g+U]=NaN;t.colorTextureMap=Lt.newInstance(),t.colorTextureMap.setExtent(0,U-1,0,1,0,0);var i=s.a.newInstance({numberOfComponents:1,values:l});t.colorTextureMap.getPointData().setScalars(t.lookupTable.mapScalars(i,t.colorMode,0)),t.lookupTable.setAlpha(r)}if(!t.colorCoordinates||e.getMTime()>t.colorCoordinates.getMTime()||e.getInputData(0).getMTime()>t.colorCoordinates.getMTime()||t.lookupTable.getMTime()>t.colorCoordinates.getMTime()){t.colorCoordinates=null;var c=n.getNumberOfComponents(),d=n.getNumberOfTuples();t.colorCoordinates=s.a.newInstance({numberOfComponents:2,values:new Float32Array(2*d)});var I=t.lookupTable.getVectorComponent();t.lookupTable.getVectorMode()===rr.MAGNITUDE&&n.getNumberOfComponents()>1&&(I=-1),e.createColorTextureCoordinates(n,t.colorCoordinates,d,c,I,B,t.lookupTable.getRange(),t.colorTextureMap.getPointData().getScalars().getNumberOfTuples()/2-2,a)}},e.getIsOpaque=function(){var t=e.getLookupTable();return!t||(t.build(),t.isOpaque())},e.canUseTextureMapForColoring=function(n){if(!t.interpolateScalarsBeforeMapping)return!1;if(t.lookupTable&&t.lookupTable.getIndexedLookup())return!1;var Q=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName),B=Q.scalars;return!(!B||Q.cellFlag||t.colorMode===Br.DEFAULT&&B.getDataType()===Ur.UNSIGNED_CHAR||t.colorMode===Br.DIRECT_SCALARS)},e.clearColorArrays=function(){t.colorMapColors=null,t.colorCoordinates=null,t.colorTextureMap=null},e.getLookupTable=function(){return t.lookupTable||e.createDefaultLookupTable(),t.lookupTable},e.getMTime=function(){var e=t.mtime;if(null!==t.lookupTable){var n=t.lookupTable.getMTime();e=n>e?n:e}return e},e.getPrimitiveCount=function(){var t=e.getInputData();return{points:t.getPoints().getNumberOfValues()/3,verts:t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells(),lines:t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells(),triangles:t.getPolys().getNumberOfValues()-3*t.getLines().getNumberOfCells()}},e.acquireInvertibleLookupTable=Fr("AcquireInvertibleLookupTable"),e.valueToColor=Fr("ValueToColor"),e.colorToValue=Fr("ColorToValue"),e.useInvertibleColorFor=Fr("UseInvertibleColorFor"),e.clearInvertibleColor=Fr("ClearInvertibleColor")}var or={colorMapColors:null,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,viewSpecificProperties:null,customShaderAttributes:[]};function gr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,or,n),Ys.extend(e,t,n),a.c.get(e,t,["colorCoordinates","colorMapColors","colorTextureMap"]),a.c.setGet(e,t,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),a.c.setGetArray(e,t,["scalarRange"],2),t.viewSpecificProperties||(t.viewSpecificProperties={}),$s.implementCoincidentTopologyMethods(e,t),lr(e,t)}var ir=tr(tr(tr({newInstance:a.c.newInstance(gr,"vtkMapper"),extend:gr},nr),Qr),Ss),cr=a.c.vtkErrorMacro;function dr(e,t){t.classHierarchy.push("vtkShader"),e.compile=function(){var e=t.context.VERTEX_SHADER;if(!t.source||!t.source.length||"Unknown"===t.shaderType)return!1;switch(0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0),t.shaderType){case"Fragment":e=t.context.FRAGMENT_SHADER;break;case"Vertex":default:e=t.context.VERTEX_SHADER}if(t.handle=t.context.createShader(e),t.context.shaderSource(t.handle,t.source),t.context.compileShader(t.handle),!t.context.getShaderParameter(t.handle,t.context.COMPILE_STATUS)){var n=t.context.getShaderInfoLog(t.handle);return cr("Error compiling shader '".concat(t.source,"': ").concat(n)),t.context.deleteShader(t.handle),t.handle=0,!1}return!0},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0,t.dirty=!0)}}var Ir={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function ur(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ir,n),a.c.obj(e,t),a.c.setGet(e,t,["shaderType","source","error","handle","context"]),dr(e,t)}var Cr={newInstance:a.c.newInstance(ur,"vtkShader"),extend:ur},mr=a.c.vtkErrorMacro;function br(e,t){t.classHierarchy.push("vtkShaderProgram"),e.compileShader=function(){return t.vertexShader.compile()?t.fragmentShader.compile()?e.attachShader(t.vertexShader)&&e.attachShader(t.fragmentShader)?e.link()?(e.setCompiled(!0),1):(mr("Links failed: ".concat(t.error)),0):(mr(t.error),0):(mr(t.fragmentShader.getSource().split("\n").map((function(e,t){return"".concat(t,": ").concat(e)})).join("\n")),mr(t.fragmentShader.getError()),0):(mr(t.vertexShader.getSource().split("\n").map((function(e,t){return"".concat(t,": ").concat(e)})).join("\n")),mr(t.vertexShader.getError()),0)},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0)},e.bind=function(){return!(!t.linked&&!e.link()||(t.context.useProgram(t.handle),e.setBound(!0),0))},e.isBound=function(){return!!t.bound},e.release=function(){t.context.useProgram(null),e.setBound(!1)},e.setContext=function(e){t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.link=function(){if(t.inked)return!0;if(0===t.handle)return t.error="Program has not been initialized, and/or does not have shaders.",!1;if(t.uniformLocs={},t.context.linkProgram(t.handle),!t.context.getProgramParameter(t.handle,t.context.LINK_STATUS)){var n=t.context.getProgramInfoLog(t.handle);return mr("Error linking shader ".concat(n)),t.handle=0,!1}return e.setLinked(!0),t.attributeLocs={},!0},e.setUniformMatrix=function(n,Q){var B=e.findUniform(n);if(-1===B)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;var a=new Float32Array(Q);return t.context.uniformMatrix4fv(B,!1,a),!0},e.setUniformMatrix3x3=function(n,Q){var B=e.findUniform(n);if(-1===B)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;var a=new Float32Array(Q);return t.context.uniformMatrix3fv(B,!1,a),!0},e.setUniformf=function(n,Q){var B=e.findUniform(n);return-1===B?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1f(B,Q),!0)},e.setUniformfv=function(n,Q){var B=e.findUniform(n);return-1===B?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1fv(B,Q),!0)},e.setUniformi=function(n,Q){var B=e.findUniform(n);return-1===B?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1i(B,Q),!0)},e.setUniformiv=function(n,Q){var B=e.findUniform(n);return-1===B?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1iv(B,Q),!0)},e.setUniform2f=function(n,Q,B){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===B)throw new RangeError("Invalid number of values for array");return t.context.uniform2f(a,Q,B),!0},e.setUniform2fv=function(n,Q){var B=e.findUniform(n);return-1===B?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2fv(B,Q),!0)},e.setUniform2i=function(n,Q,B){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===B)throw new RangeError("Invalid number of values for array");return t.context.uniform2i(a,Q,B),!0},e.setUniform2iv=function(n,Q){var B=e.findUniform(n);return-1===B?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2iv(B,Q),!0)},e.setUniform3f=function(n,Q,B,a){var s=e.findUniform(n);if(-1===s)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===a)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(s,Q,B,a),!0},e.setUniform3fArray=function(n,Q){var B=e.findUniform(n);if(-1===B)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(!Array.isArray(Q)||3!==Q.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(B,Q[0],Q[1],Q[2]),!0},e.setUniform3fv=function(n,Q){var B=e.findUniform(n);return-1===B?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3fv(B,Q),!0)},e.setUniform3i=function(n){var Q=e.findUniform(n);if(-1===Q)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var B=arguments.length,a=new Array(B>1?B-1:0),s=1;s<B;s++)a[s-1]=arguments[s];var r=a;if(1===r.length&&Array.isArray(r[0])&&(r=r[0]),3!==r.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3i(Q,r[0],r[1],r[2]),!0},e.setUniform3iv=function(n,Q){var B=e.findUniform(n);return-1===B?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3iv(B,Q),!0)},e.setUniform4f=function(n){var Q=e.findUniform(n);if(-1===Q)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var B=arguments.length,a=new Array(B>1?B-1:0),s=1;s<B;s++)a[s-1]=arguments[s];var r=a;if(1===r.length&&Array.isArray(r[0])&&(r=r[0]),4!==r.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4f(Q,r[0],r[1],r[2],r[3]),!0},e.setUniform4fv=function(n,Q){var B=e.findUniform(n);return-1===B?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4fv(B,Q),!0)},e.setUniform4i=function(n){var Q=e.findUniform(n);if(-1===Q)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var B=arguments.length,a=new Array(B>1?B-1:0),s=1;s<B;s++)a[s-1]=arguments[s];var r=a;if(1===r.length&&Array.isArray(r[0])&&(r=r[0]),4!==r.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4i(Q,r[0],r[1],r[2],r[3]),!0},e.setUniform4iv=function(n,Q){var B=e.findUniform(n);return-1===B?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4iv(B,Q),!0)},e.setUniform4fv=function(n,Q,B){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4fv(a,B),!0)},e.findUniform=function(e){if(!e||!t.linked)return-1;var n=t.uniformLocs[e];return void 0!==n?n:null===(n=t.context.getUniformLocation(t.handle,e))?(t.error="Uniform ".concat(e," not found in current shader program."),t.uniformLocs[e]=-1,-1):(t.uniformLocs[e]=n,n)},e.isUniformUsed=function(e){if(!e)return!1;var n=t.uniformLocs[e];return void 0!==n?null!==n:t.linked?(n=t.context.getUniformLocation(t.handle,e),t.uniformLocs[e]=n,null!==n):(mr("attempt to find uniform when the shader program is not linked"),!1)},e.isAttributeUsed=function(e){if(!e)return!1;var n=Object.keys(t.attributeLocs).indexOf(e);return-1!==n||(t.linked?-1!==(n=t.context.getAttribLocation(t.handle,e))&&(t.attributeLocs[e]=n,!0):(mr("attempt to find uniform when the shader program is not linked"),!1))},e.attachShader=function(n){if(0===n.getHandle())return t.error="Shader object was not initialized, cannot attach it.",!1;if("Unknown"===n.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;if(0===t.handle){var Q=t.context.createProgram();if(0===Q)return t.error="Could not create shader program.",!1;t.handle=Q,t.linked=!1}return"Vertex"===n.getShaderType()&&(0!==t.vertexShaderHandle&&t.comntext.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=n.getHandle()),"Fragment"===n.getShaderType()&&(0!==t.fragmentShaderHandle&&t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=n.getHandle()),t.context.attachShader(t.handle,n.getHandle()),e.setLinked(!1),!0},e.detachShader=function(e){if(0===e.getHandle())return t.error="shader object was not initialized, cannot attach it.",!1;if("Unknown"===e.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;switch(0===t.handle&&(t.error="This shader program has not been initialized yet."),e.getShaderType()){case"Vertex":return t.vertexShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.vertexShaderHandle=0,t.linked=!1,!0);case"Fragment":return t.fragmentShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.fragmentShaderHandle=0,t.linked=!1,!0);default:return!1}},e.setContext=function(e){t.context=e,t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.setLastCameraMTime=function(e){t.lastCameraMTime=e}}var Sr={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function yr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Sr,n),t.attributesLocs={},t.uniformLocs={},t.vertexShader=Cr.newInstance(),t.vertexShader.setShaderType("Vertex"),t.fragmentShader=Cr.newInstance(),t.fragmentShader.setShaderType("Fragment"),t.geometryShader=Cr.newInstance(),t.geometryShader.setShaderType("Geometry"),a.c.obj(e,t),a.c.get(e,t,["lastCameraMTime"]),a.c.setGet(e,t,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),br(e,t)}var Zr,xr={newInstance:a.c.newInstance(yr,"vtkShaderProgram"),extend:yr,substitute:function(e,t,n){var Q=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],B=Array.isArray(n)?n.join("\n"):n,a=!1;-1!==e.search(t)&&(a=!0);var s="";Q&&(s="g");var r=new RegExp(t,s),U=e.replace(r,B);return{replace:a,result:U}}};function Gr(e,t,n){var Q=t[0],B=t[1],a=t[2],s=t[3];return e[0]=n[0]*Q+n[4]*B+n[8]*a+n[12]*s,e[1]=n[1]*Q+n[5]*B+n[9]*a+n[13]*s,e[2]=n[2]*Q+n[6]*B+n[10]*a+n[14]*s,e[3]=n[3]*Q+n[7]*B+n[11]*a+n[15]*s,e}function Vr(){var e=new it.a(4);return it.a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Rr(e,t,n){n*=.5;var Q=Math.sin(n);return e[0]=Q*t[0],e[1]=Q*t[1],e[2]=Q*t[2],e[3]=Math.cos(n),e}function Lr(e,t,n){var Q=t[0],B=t[1],a=t[2],s=t[3],r=n[0],U=n[1],F=n[2],l=n[3];return e[0]=Q*l+s*r+B*F-a*U,e[1]=B*l+s*U+a*r-Q*F,e[2]=a*l+s*F+Q*U-B*r,e[3]=s*l-Q*r-B*U-a*F,e}Zr=new it.a(4),it.a!=Float32Array&&(Zr[0]=0,Zr[1]=0,Zr[2]=0,Zr[3]=0);var pr=function(e,t,n,Q){var B=new it.a(4);return B[0]=e,B[1]=t,B[2]=n,B[3]=Q,B};Object(y.n)(),Object(y.o)(1,0,0),Object(y.o)(0,1,0),Vr(),Vr(),ct();var hr={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2},Nr={ObjectType:hr};function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Er=Nr.ObjectType;function fr(e,t){function n(e){switch(e){case Er.ELEMENT_ARRAY_BUFFER:return t.context.ELEMENT_ARRAY_BUFFER;case Er.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in t.context)return t.context.TEXTURE_BUFFER;default:case Er.ARRAY_BUFFER:return t.context.ARRAY_BUFFER}}t.classHierarchy.push("vtkOpenGLBufferObject");var Q=null,B=null,a=!0,s="";e.getType=function(){return Q},e.setType=function(e){Q=e},e.getHandle=function(){return B},e.isReady=function(){return!1===a},e.generateBuffer=function(e){var a=n(e);return null===B&&(B=t.context.createBuffer(),Q=e),n(Q)===a},e.upload=function(r,U){return e.generateBuffer(U)?(t.context.bindBuffer(n(Q),B),t.context.bufferData(n(Q),r,t.context.STATIC_DRAW),a=!1,!0):(s="Trying to upload array buffer to incompatible buffer.",!1)},e.bind=function(){return!!B&&(t.context.bindBuffer(n(Q),B),!0)},e.release=function(){return!!B&&(t.context.bindBuffer(n(Q),null),!0)},e.releaseGraphicsResources=function(){null!==B&&(t.context.bindBuffer(n(Q),null),t.context.deleteBuffer(B),B=null)},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.getError=function(){return s}}var Jr={objectType:Er.ARRAY_BUFFER,openGLRenderWindow:null,context:null};function vr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jr,n),a.c.obj(e,t),a.c.get(e,t,["openGLRenderWindow"]),fr(e,t)}var Wr=Ar(Ar({newInstance:a.c.newInstance(vr),extend:vr},{}),Nr),Xr=a.c.vtkErrorMacro;function Hr(e,t){t.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),e.setType(hr.ARRAY_BUFFER),e.createVBO=function(n,Q,B,a){if(!n.getData()||!n.getData().length)return t.elementCount=0,0;t.blockSize=3,t.vertexOffset=0,t.normalOffset=0,t.tCoordOffset=0,t.tCoordComponents=0,t.colorComponents=0,t.colorOffset=0,t.customData=[];var s=a.points.getData(),r=null,U=null,F=null,l=a.colors?a.colors.getNumberOfComponents():0,o=a.tcoords?a.tcoords.getNumberOfComponents():0;a.normals&&(t.normalOffset=4*t.blockSize,t.blockSize+=3,r=a.normals.getData()),a.customAttributes&&a.customAttributes.forEach((function(e){e&&(t.customData.push({data:e.getData(),offset:4*t.blockSize,components:e.getNumberOfComponents(),name:e.getName()}),t.blockSize+=e.getNumberOfComponents())})),a.tcoords&&(t.tCoordOffset=4*t.blockSize,t.tCoordComponents=o,t.blockSize+=o,U=a.tcoords.getData()),a.colors?(t.colorComponents=a.colors.getNumberOfComponents(),t.colorOffset=0,F=a.colors.getData(),t.colorBO||(t.colorBO=Wr.newInstance()),t.colorBO.setOpenGLRenderWindow(t.openGLRenderWindow)):t.colorBO=null,t.stride=4*t.blockSize;var g,i=0,c=0,d=0,I=0,u=0,C=0,m={anythingToPoints:function(e,t,n){for(var Q=0;Q<e;++Q)g(t[n+Q])},linesToWireframe:function(e,t,n){for(var Q=0;Q<e-1;++Q)g(t[n+Q]),g(t[n+Q+1])},polysToWireframe:function(e,t,n){if(e>2)for(var Q=0;Q<e;++Q)g(t[n+Q]),g(t[n+(Q+1)%e])},stripsToWireframe:function(e,t,n){if(e>2){for(var Q=0;Q<e-1;++Q)g(t[n+Q]),g(t[n+Q+1]);for(var B=0;B<e-2;B++)g(t[n+B]),g(t[n+B+2])}},polysToSurface:function(e,t,n){for(var Q=0;Q<e-2;Q++)g(t[n+0]),g(t[n+Q+1]),g(t[n+Q+2])},stripsToSurface:function(e,t,n){for(var Q=0;Q<e-2;Q++)g(t[n+Q]),g(t[n+Q+1+Q%2]),g(t[n+Q+1+(Q+1)%2])}},b={anythingToPoints:function(e,t){return e},linesToWireframe:function(e,t){return e>1?2*(e-1):0},polysToWireframe:function(e,t){return e>2?2*e:0},stripsToWireframe:function(e,t){return e>2?4*e-6:0},polysToSurface:function(e,t){return e>2?3*(e-2):0},stripsToSurface:function(e,t,n){return e>2?3*(e-2):0}},S=null,y=null;B===Fs.POINTS||"verts"===Q?(S=m.anythingToPoints,y=b.anythingToPoints):B===Fs.WIREFRAME||"lines"===Q?(S=m["".concat(Q,"ToWireframe")],y=b["".concat(Q,"ToWireframe")]):(S=m["".concat(Q,"ToSurface")],y=b["".concat(Q,"ToSurface")]);for(var Z=n.getData(),x=Z.length,G=0,V=0;V<x;)G+=y(Z[V],Z),V+=Z[V]+1;var R=null,L=new Float32Array(G*t.blockSize);F&&(R=new Uint8Array(4*G));for(var p=0,h=0,N=0,D=0,A=0;A<3;++A){var E=a.points.getRange(A),f=E[1]-E[0];N+=f*f;var J=.5*(E[1]+E[0]);D+=J*J}if(N>0&&(Math.abs(D)/N>1e6||Math.abs(Math.log10(N))>3||0===N&&D>1e6)){for(var v=new Float64Array(3),W=new Float64Array(3),X=0;X<3;++X){var H=a.points.getRange(X),k=H[1]-H[0];v[X]=.5*(H[1]+H[0]),W[X]=k>0?1/k:1}e.setCoordShiftAndScale(v,W)}else!0===t.coordShiftAndScaleEnabled&&e.setCoordShiftAndScale(null,null);g=function(e){if(i=3*e,t.coordShiftAndScaleEnabled?(L[p++]=(s[i++]-t.coordShift[0])*t.coordScale[0],L[p++]=(s[i++]-t.coordShift[1])*t.coordScale[1],L[p++]=(s[i++]-t.coordShift[2])*t.coordScale[2]):(L[p++]=s[i++],L[p++]=s[i++],L[p++]=s[i++]),null!==r&&(c=a.haveCellNormals?3*(C+a.cellOffset):3*e,L[p++]=r[c++],L[p++]=r[c++],L[p++]=r[c++]),t.customData.forEach((function(t){u=e*t.components;for(var n=0;n<t.components;++n)L[p++]=t.data[u++]})),null!==U){d=e*o;for(var n=0;n<o;++n)L[p++]=U[d++]}null!==F&&(I=a.haveCellScalars?(C+a.cellOffset)*l:e*l,R[h++]=F[I++],R[h++]=F[I++],R[h++]=F[I++],R[h++]=4===l?F[I++]:255)};for(var T=0;T<x;)S(Z[T],Z,T+1),T+=Z[T]+1,C++;return t.elementCount=G,e.upload(L,hr.ARRAY_BUFFER),t.colorBO&&(t.colorBOStride=4,t.colorBO.upload(R,hr.ARRAY_BUFFER)),C},e.setCoordShiftAndScale=function(e,n){null===e||e.constructor===Float64Array&&3===e.length?null===n||n.constructor===Float64Array&&3===n.length?(null!==t.coordShift&&null!==e&&Object(y.h)(e,t.coordShift)||(t.coordShift=e),null!==t.coordScale&&null!==n&&Object(y.h)(n,t.coordScale)||(t.coordScale=n),t.coordShiftAndScaleEnabled=function(e,t){return null!==e&&null!==t&&!(Object(y.f)(e,[0,0,0])&&Object(y.f)(t,[1,1,1]))}(t.coordShift,t.coordScale),t.coordShiftAndScaleEnabled?t.inverseShiftAndScaleMatrix=function(e,t){var n=new Float64Array(3);Object(y.i)(n,t);var Q=new Float64Array(16);return Object(S.o)(Q,Vr(),e,n),Q}(t.coordShift,t.coordScale):t.inverseShiftAndScaleMatrix=null):Xr("Wrong type for coordScale, expected vec3 or null"):Xr("Wrong type for coordShift, expected vec3 or null")}}var kr={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function Tr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kr,n),Wr.extend(e,t,n),a.c.setGet(e,t,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),a.c.get(e,t,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),Hr(e,t)}var Mr={newInstance:a.c.newInstance(Tr),extend:Tr};function Yr(e,t){t.classHierarchy.push("vtkOpenGLVertexArrayObject"),e.exposedMethod=function(){},e.initialize=function(){t.instancingExtension=null,t.openGLRenderWindow.getWebgl2()||(t.instancingExtension=t.context.getExtension("ANGLE_instanced_arrays")),!t.forceEmulation&&t.openGLRenderWindow&&t.openGLRenderWindow.getWebgl2()?(t.extension=null,t.supported=!0,t.handleVAO=t.context.createVertexArray()):(t.extension=t.context.getExtension("OES_vertex_array_object"),!t.forceEmulation&&t.extension?(t.supported=!0,t.handleVAO=t.extension.createVertexArrayOES()):t.supported=!1)},e.isReady=function(){return 0!==t.handleVAO||!1===t.supported},e.bind=function(){if(e.isReady()||e.initialize(),e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(t.handleVAO):t.context.bindVertexArray(t.handleVAO);else if(e.isReady())for(var n=t.context,Q=0;Q<t.buffers.length;++Q){var B=t.buffers[Q];t.context.bindBuffer(n.ARRAY_BUFFER,B.buffer);for(var a=0;a<B.attributes.length;++a)for(var s=B.attributes[a],r=s.isMatrix?s.size:1,U=0;U<r;++U)n.enableVertexAttribArray(s.index+U),n.vertexAttribPointer(s.index+U,s.size,s.type,s.normalize,s.stride,s.offset+s.stride*U/s.size),s.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(s.index+U,1):n.vertexAttribDivisor(s.index+U,1))}},e.release=function(){if(e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(null):t.context.bindVertexArray(null);else if(e.isReady())for(var n=t.context,Q=0;Q<t.buffers.length;++Q){var B=t.buffers[Q];t.context.bindBuffer(n.ARRAY_BUFFER,B.buffer);for(var a=0;a<B.attributes.length;++a)for(var s=B.attributes[a],r=s.isMatrix?s.size:1,U=0;U<r;++U)n.enableVertexAttribArray(s.index+U),n.vertexAttribPointer(s.index+U,s.size,s.type,s.normalize,s.stride,s.offset+s.stride*U/s.size),s.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(s.index+U,0):n.vertexAttribDivisor(s.index+U,0)),n.disableVertexAttribArray(s.index+U)}},e.shaderProgramChanged=function(){e.release(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.handleProgram=0},e.releaseGraphicsResources=function(){e.shaderProgramChanged(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.supported=!0,t.handleProgram=0},e.addAttributeArray=function(t,n,Q,B,a,s,r,U){return e.addAttributeArrayWithDivisor(t,n,Q,B,a,s,r,U,0,!1)},e.addAttributeArrayWithDivisor=function(n,Q,B,a,s,r,U,F,l,o){if(!n)return!1;if(!n.isBound()||0===Q.getHandle()||Q.getType()!==hr.ARRAY_BUFFER)return!1;if(0===t.handleProgram&&(t.handleProgram=n.getHandle()),e.isReady()||e.initialize(),!e.isReady()||t.handleProgram!==n.getHandle())return!1;var g=t.context,i={};if(i.name=B,i.index=g.getAttribLocation(t.handleProgram,B),i.offset=a,i.stride=s,i.type=r,i.size=U,i.normalize=F,i.isMatrix=o,i.divisor=l,-1===i.Index)return!1;if(Q.bind(),g.enableVertexAttribArray(i.index),g.vertexAttribPointer(i.index,i.size,i.type,i.normalize,i.stride,i.offset),l>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(i.index,1):g.vertexAttribDivisor(i.index,1)),i.buffer=Q.getHandle(),!t.supported){for(var c=!1,d=0;d<t.buffers.length;++d){var I=t.buffers[d];if(I.buffer===i.buffer){c=!0;for(var u=!1,C=0;C<I.attributes.length;++C)I.attributes[C].name===B&&(u=!0,I.attributes[C]=i);u||I.attributes.push(i)}}c||t.buffers.push({buffer:i.buffer,attributes:[i]})}return!0},e.addAttributeMatrixWithDivisor=function(n,Q,B,a,s,r,U,F,l){var o=e.addAttributeArrayWithDivisor(n,Q,B,a,s,r,U,F,l,!0);if(!o)return o;for(var g=t.context,i=g.getAttribLocation(t.handleProgram,B),c=1;c<U;c++)g.enableVertexAttribArray(i+c),g.vertexAttribPointer(i+c,U,r,F,s,a+s*c/U),l>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(i+c,1):g.vertexAttribDivisor(i+c,1));return!0},e.removeAttributeArray=function(n){if(!e.isReady()||0===t.handleProgram)return!1;if(!t.supported)for(var Q=0;Q<t.buffers.length;++Q)for(var B=t.buffers[Q],a=0;a<B.attributes.length;++a)if(B.attributes[a].name===n)return B.attributes.splice(a,1),B.attributes.length||t.buffers.splice(Q,1),!0;return!0},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))}}var wr={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null,openGLRenderWindow:null};function Or(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wr,n),t.buffers=[],a.c.obj(e,t),a.c.get(e,t,["supported"]),a.c.setGet(e,t,["forceEmulation"]),Yr(e,t)}var zr={newInstance:a.c.newInstance(Or,"vtkOpenGLVertexArrayObject"),extend:Or};function Pr(e,t){t.classHierarchy.push("vtkOpenGLHelper"),e.setOpenGLRenderWindow=function(e){t.program.setContext(e.getContext()),t.VAO.setOpenGLRenderWindow(e),t.CABO.setOpenGLRenderWindow(e)},e.releaseGraphicsResources=function(e){t.VAO.releaseGraphicsResources(),t.CABO.releaseGraphicsResources(),t.CABO.setElementCount(0)}}var Kr={program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0};function jr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Kr,n),a.c.obj(e,t),t.shaderSourceTime={},a.c.obj(t.shaderSourceTime),t.attributeUpdateTime={},a.c.obj(t.attributeUpdateTime),a.c.setGet(e,t,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType"]),t.program=xr.newInstance(),t.VAO=zr.newInstance(),t.CABO=Mr.newInstance(),Pr(e,t)}var _r={newInstance:a.c.newInstance(jr),extend:jr},qr="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexMC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// picking support\n//VTK::Picking::Dec\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::PrimID::Impl\n\n  //VTK::PositionVC::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::Picking::Impl\n}\n",$r="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\nuniform int PrimitiveIDOffset;\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// optional color passed in from the vertex shader, vertexColor\n//VTK::Color::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// Depth Peeling Support\n//VTK::DepthPeeling::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\n//VTK::ZBuffer::Dec\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\n  //VTK::Depth::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::Color::Impl\n\n  // Generate the normal if we are not passed in one\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n\n  //VTK::ZBuffer::Impl\n}\n",eU={implementReplaceShaderCoincidentOffset:function(e,t){e.replaceShaderCoincidentOffset=function(n,Q,B){var a=e.getCoincidentParameters(Q,B);if(a&&(0!==a.factor||0!==a.offset)){var s=n.Fragment;s=xr.substitute(s,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,t.context.getExtension("EXT_frag_depth")&&(0!==a.factor?(s=xr.substitute(s,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,s=xr.substitute(s,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):s=xr.substitute(s,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),t.openGLRenderWindow.getWebgl2()&&(0!==a.factor?(s=xr.substitute(s,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,s=xr.substitute(s,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):s=xr.substitute(s,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=s}}}},tU={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6},nU=Cs.Representation,QU=Cs.Shading,BU=ir.ScalarMode,aU=va.Filter,sU=va.Wrap,rU=a.c.vtkErrorMacro,UU={type:"StartEvent"},FU={type:"EndEvent"};function lU(e,t){function n(e,t,n){return t.identity(n),e.reduce((function(e,n,Q){return 0===Q?n?t.copy(e,n):t.identity(e):n?t.multiply(e,e,n):e}),n)}t.classHierarchy.push("vtkOpenGLPolyDataMapper"),e.buildPass=function(n){n&&(t.openGLActor=e.getFirstAncestorOfType("vtkOpenGLActor"),t.openGLRenderer=t.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.openGLCamera=t.openGLRenderer.getViewNodeFor(t.openGLRenderer.getRenderable().getActiveCamera()))},e.translucentPass=function(t){t&&e.render()},e.opaqueZBufferPass=function(n){n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaquePass=function(t){t&&e.render()},e.render=function(){var n=t.openGLRenderWindow.getContext();if(t.context!==n){t.context=n;for(var Q=tU.Start;Q<tU.End;Q++)t.primitives[Q].setOpenGLRenderWindow(t.openGLRenderWindow)}var B=t.openGLActor.getRenderable(),a=t.openGLRenderer.getRenderable();e.renderPiece(a,B)},e.buildShaders=function(n,Q,B){e.getShaderTemplate(n,Q,B);var a=t.renderable.getViewSpecificProperties().OpenGL,s=null;if(a&&(s=a.ShaderReplacements),s)for(var r=0;r<s.length;r++){var U=s[r];if(U.replaceFirst){var F=U.shaderType,l=n[F],o=xr.substitute(l,U.originalValue,U.replacementValue,U.replaceAll);n[F]=o.result}}if(e.replaceShaderValues(n,Q,B),s)for(var g=0;g<s.length;g++){var i=s[g];if(!i.replaceFirst){var c=i.shaderType,d=n[c],I=xr.substitute(d,i.originalValue,i.replacementValue,i.replaceAll);n[c]=I.result}}},e.getShaderTemplate=function(e,n,Q){var B=t.renderable.getViewSpecificProperties().OpenGL,a=qr;if(B){var s=B.VertexShaderCode;void 0!==s&&""!==s&&(a=s)}e.Vertex=a;var r=$r;if(B){var U=B.FragmentShaderCode;void 0!==U&&""!==U&&(r=U)}e.Fragment=r;var F="";if(B){var l=B.GeometryShaderCode;void 0!==l&&(F=l)}e.Geometry=F},e.replaceShaderColor=function(e,n,Q){var B=e.Vertex,a=e.Geometry,s=e.Fragment,r=t.lastBoundBO.getReferenceByName("lastLightComplexity"),U=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];r&&(U=U.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var F=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];r&&(F=F.concat(["  vec3 specularColor;","  float specularPower;"])),F=F.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),r&&(F=F.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges||(U=U.concat(["varying vec4 vertexColorVSOutput;"]),B=xr.substitute(B,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,B=xr.substitute(B,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,a=xr.substitute(a,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,a=xr.substitute(a,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges?t.renderable.getInterpolateScalarsBeforeMapping()&&t.renderable.getColorCoordinates()&&!t.drawingEdges?s=xr.substitute(s,"//VTK::Color::Impl",F.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(Q.getBackfaceProperty()&&!t.drawingEdges&&(U=U.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),r?(U=U.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),F=F.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):F=F.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),t.haveCellScalars&&!t.drawingEdges&&(U=U.concat(["uniform samplerBuffer texture1;"])),s=xr.substitute(s,"//VTK::Color::Impl",F).result):s=xr.substitute(s,"//VTK::Color::Impl",F.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result,s=xr.substitute(s,"//VTK::Color::Dec",U).result,e.Vertex=B,e.Geometry=a,e.Fragment=s},e.replaceShaderLight=function(e,n,Q){var B=e.Fragment,a=t.lastBoundBO.getReferenceByName("lastLightComplexity"),s=t.lastBoundBO.getReferenceByName("lastLightCount"),r=[];switch(a){case 0:B=xr.substitute(B,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:B=xr.substitute(B,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(var U=0;U<s;++U)r=r.concat(["uniform vec3 lightColor".concat(U,";"),"uniform vec3 lightDirectionVC".concat(U,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(U,"; // normalized")]);B=xr.substitute(B,"//VTK::Light::Dec",r).result,r=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(var F=0;F<s;++F)r=r.concat(["  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC".concat(F,"));"),"  diffuseL += ((df".concat("",") * lightColor").concat(F,");"),"  if (dot(normalVCVSOutput, lightDirectionVC".concat(F,") < 0.0)"),"    {","    float sf = pow( max(0.0, dot(lightHalfAngleVC".concat(F,",normalVCVSOutput)), specularPower);"),"    specularL += ((sf".concat("",") * lightColor").concat(F,");"),"    }"]);r=r.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),B=xr.substitute(B,"//VTK::Light::Impl",r,!1).result;break;case 3:for(var l=0;l<s;++l)r=r.concat(["uniform vec3 lightColor".concat(l,";"),"uniform vec3 lightDirectionVC".concat(l,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(l,"; // normalized"),"uniform vec3 lightPositionVC".concat(l,";"),"uniform vec3 lightAttenuation".concat(l,";"),"uniform float lightConeAngle".concat(l,";"),"uniform float lightExponent".concat(l,";"),"uniform int lightPositional".concat(l,";")]);B=xr.substitute(B,"//VTK::Light::Dec",r).result,r=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(var o=0;o<s;++o)r=r.concat(["  attenuation = 1.0;","  if (lightPositional".concat(o," == 0)"),"    {","      vertLightDirectionVC = lightDirectionVC".concat(o,";"),"    }","  else","    {","    vertLightDirectionVC = vertexVC.xyz - lightPositionVC".concat(o,";"),"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /","      (lightAttenuation".concat(o,".x"),"       + lightAttenuation".concat(o,".y * distanceVC"),"       + lightAttenuation".concat(o,".z * distanceVC * distanceVC);"),"    // per OpenGL standard cone angle is 90 or less for a spot light","    if (lightConeAngle".concat(o," <= 90.0)"),"      {","      float coneDot = dot(vertLightDirectionVC, lightDirectionVC".concat(o,");"),"      // if inside the cone","      if (coneDot >= cos(radians(lightConeAngle".concat(o,")))"),"        {","        attenuation = attenuation * pow(coneDot, lightExponent".concat(o,");"),"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));","    diffuseL += ((df".concat("",") * lightColor").concat(o,");"),"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {","      float sf = attenuation*pow( max(0.0, dot(lightHalfAngleVC".concat(o,",normalVCVSOutput)), specularPower);"),"    specularL += ((sf".concat("",") * lightColor").concat(o,");"),"    }"]);r=r.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),B=xr.substitute(B,"//VTK::Light::Impl",r,!1).result;break;default:rU("bad light complexity")}e.Fragment=B},e.replaceShaderNormal=function(n,Q,B){if(t.lastBoundBO.getReferenceByName("lastLightComplexity")>0){var a=n.Vertex,s=n.Geometry,r=n.Fragment;t.lastBoundBO.getCABO().getNormalOffset()?(a=xr.substitute(a,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,a=xr.substitute(a,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,s=xr.substitute(s,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,s=xr.substitute(s,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,r=xr.substitute(r,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,r=xr.substitute(r,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):t.haveCellNormals?(r=xr.substitute(r,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,r=xr.substitute(r,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.getOpenGLMode(B.getProperty().getRepresentation(),t.lastBoundBO.getPrimitiveType())===t.context.LINES?(r=xr.substitute(r,"//VTK::UniformFlow::Impl",["  vec3 fdx = vec3(dFdx(vertexVC.x),dFdx(vertexVC.y),dFdx(vertexVC.z));","  vec3 fdy = vec3(dFdy(vertexVC.x),dFdy(vertexVC.y),dFdy(vertexVC.z));","  //VTK::UniformFlow::Impl"]).result,r=xr.substitute(r,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  fdx = normalize(fdx);","  fdy = normalize(fdy);","  if (abs(fdx.x) > 0.0)","    { normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(r=xr.substitute(r,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,r=xr.substitute(r,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,r=xr.substitute(r,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),n.Vertex=a,n.Geometry=s,n.Fragment=r}},e.replaceShaderPositionVC=function(e,n,Q){var B=e.Vertex,a=e.Geometry,s=e.Fragment;Q.getProperty().getRepresentation()!==nU.POINTS&&t.lastBoundBO.getPrimitiveType()!==tU.Points||(B=xr.substitute(B,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = ".concat(Q.getProperty().getPointSize(),".0;")],!1).result),t.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(B=xr.substitute(B,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,B=xr.substitute(B,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,B=xr.substitute(B,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,a=xr.substitute(a,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,a=xr.substitute(a,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,s=xr.substitute(s,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,s=xr.substitute(s,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(B=xr.substitute(B,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,B=xr.substitute(B,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),e.Vertex=B,e.Geometry=a,e.Fragment=s},e.replaceShaderTCoord=function(e,n,Q){if(t.lastBoundBO.getCABO().getTCoordOffset()){var B=e.Vertex,a=e.Geometry,s=e.Fragment;if(t.drawingEdges)return;B=xr.substitute(B,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var r=t.openGLActor.getActiveTextures(),U=2,F=2;if(r&&r.length>0&&(U=r[0].getComponents(),r[0].getTarget()===t.context.TEXTURE_CUBE_MAP&&(F=3)),t.renderable.getColorTextureMap()&&(U=t.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),F=2),2===F){if(B=xr.substitute(B,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,a=xr.substitute(a,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,a=xr.substitute(a,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,s=xr.substitute(s,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,r&&r.length>=1)switch(U){case 1:s=xr.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:s=xr.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:s=xr.substitute(s,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*texture2D(texture1, tcoordVCVSOutput.st);").result}}else switch(B=xr.substitute(B,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,a=xr.substitute(a,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,a=xr.substitute(a,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,s=xr.substitute(s,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,U){case 1:s=xr.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:s=xr.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:s=xr.substitute(s,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*textureCube(texture1, tcoordVCVSOutput);").result}e.Vertex=B,e.Geometry=a,e.Fragment=s}},e.replaceShaderClip=function(e,n,Q){var B=e.Vertex,s=e.Fragment;if(t.renderable.getNumberOfClippingPlanes()){var r=t.renderable.getNumberOfClippingPlanes();r>6&&(a.c.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),r=6),B=xr.substitute(B,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,B=xr.substitute(B,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=xr.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,s=xr.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}e.Vertex=B,e.Fragment=s},e.getCoincidentParameters=function(e,n){var Q=null,B=n.getProperty();if(t.renderable.getResolveCoincidentTopology()||B.getEdgeVisibility()&&B.getRepresentation()===nU.SURFACE){var a=t.lastBoundBO.getPrimitiveType();a===tU.Points||B.getRepresentation()===nU.POINTS?Q=t.renderable.getCoincidentTopologyPointOffsetParameter():a===tU.Lines||B.getRepresentation()===nU.WIREFRAME?Q=t.renderable.getCoincidentTopologyLineOffsetParameters():a!==tU.Tris&&a!==tU.TriStrips||(Q=t.renderable.getCoincidentTopologyPolygonOffsetParameters()),a!==tU.TrisEdges&&a!==tU.TriStripsEdges||((Q=t.renderable.getCoincidentTopologyPolygonOffsetParameters()).factor/=2,Q.offset/=2)}return Q},e.replaceShaderPicking=function(e,t,n){var Q=e.Fragment;Q=xr.substitute(Q,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,Q=xr.substitute(Q,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,e.Fragment=Q},e.replaceShaderValues=function(n,Q,B){if(e.replaceShaderColor(n,Q,B),e.replaceShaderNormal(n,Q,B),e.replaceShaderLight(n,Q,B),e.replaceShaderTCoord(n,Q,B),e.replaceShaderPicking(n,Q,B),e.replaceShaderClip(n,Q,B),e.replaceShaderCoincidentOffset(n,Q,B),e.replaceShaderPositionVC(n,Q,B),t.haveSeenDepthRequest){var a=n.Fragment;a=xr.substitute(a,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,a=xr.substitute(a,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,n.Fragment=a}},e.getNeedToRebuildShaders=function(n,Q,B){var a=0,s=0,r=n.getPrimitiveType(),U=t.currentInput,F=!1,l=U.getPointData().getNormals(),o=U.getCellData().getNormals(),g=B.getProperty().getInterpolation()===QU.FLAT,i=B.getProperty().getRepresentation(),c=e.getOpenGLMode(i,r);if(c===t.context.TRIANGLES||o&&!l||!g&&l?F=!0:g||c!==t.context.LINES||(F=!0),B.getProperty().getLighting()&&F){a=0;for(var d=Q.getLightsByReference(),I=0;I<d.length;++I){var u=d[I];u.getSwitch()>0&&(s++,0===a&&(a=1)),1===a&&(s>1||1!==u.getIntensity()||!u.lightTypeIsHeadLight())&&(a=2),a<3&&u.getPositional()&&(a=3)}}var C=!1,m=t.lastBoundBO.getReferenceByName("lastLightComplexity"),b=t.lastBoundBO.getReferenceByName("lastLightCount");return m===a&&b===s||(t.lastBoundBO.set({lastLightComplexity:a},!0),t.lastBoundBO.set({lastLightCount:s},!0),C=!0),!!(t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||0===n.getProgram()||n.getShaderSourceTime().getMTime()<e.getMTime()||n.getShaderSourceTime().getMTime()<B.getMTime()||n.getShaderSourceTime().getMTime()<t.renderable.getMTime()||n.getShaderSourceTime().getMTime()<t.currentInput.getMTime()||C)&&(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,!0)},e.updateShaders=function(n,Q,B){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,Q,B)){var a={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(a,Q,B);var s=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);s!==n.getProgram()&&(n.setProgram(s),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,Q,B),e.setPropertyShaderParameters(n,Q,B),e.setCameraShaderParameters(n,Q,B),e.setLightingShaderParameters(n,Q,B);var r=t.renderable.getViewSpecificProperties().ShadersCallbacks;r&&r.forEach((function(e){e.callback(e.userData,n,Q,B)}))},e.setMapperShaderParameters=function(n,Q,B){if(n.getProgram().isUniformUsed("PrimitiveIDOffset")&&n.getProgram().setUniformi("PrimitiveIDOffset",t.primitiveIDOffset),n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){var s=t.lastBoundBO.getReferenceByName("lastLightComplexity");n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,!1)||rU("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("normalMC")&&n.getCABO().getNormalOffset()&&s>0?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"normalMC",n.getCABO().getNormalOffset(),n.getCABO().getStride(),t.context.FLOAT,3,!1)||rU("Error setting normalMC in shader VAO."):n.getVAO().removeAttributeArray("normalMC"),t.renderable.getCustomShaderAttributes().forEach((function(e,Q){n.getProgram().isAttributeUsed("".concat(e,"MC"))&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"".concat(e,"MC"),n.getCABO().getCustomData()[Q].offset,n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getCustomData()[Q].components,!1)||rU("Error setting ".concat(e,"MC in shader VAO.")))})),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getTCoordComponents(),!1)||rU("Error setting tcoordMC in shader VAO."):n.getVAO().removeAttributeArray("tcoordMC"),n.getProgram().isAttributeUsed("scalarColor")&&n.getCABO().getColorComponents()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO().getColorBO(),"scalarColor",n.getCABO().getColorOffset(),n.getCABO().getColorBOStride(),t.context.UNSIGNED_BYTE,4,!0)||rU("Error setting scalarColor in shader VAO."):n.getVAO().removeAttributeArray("scalarColor"),n.getAttributeUpdateTime().modified()}if(t.renderable.getNumberOfClippingPlanes()){var r=t.renderable.getNumberOfClippingPlanes();r>6&&(a.c.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),r=6);for(var U=[],F=0;F<r;F++){var l=[];t.renderable.getClippingPlaneInDataCoords(B.getMatrix(),F,l);for(var o=0;o<4;o++)U.push(l[o])}n.getProgram().setUniformi("numClipPlanes",r),n.getProgram().setUniform4fv("clipPlanes",6,U)}t.internalColorTexture&&n.getProgram().isUniformUsed("texture1")&&n.getProgram().setUniformi("texture1",t.internalColorTexture.getTextureUnit());var g=t.openGLActor.getActiveTextures();if(g)for(var i=0;i<g.length;++i){var c=g[i].getTextureUnit(),d="texture".concat(c+1);n.getProgram().isUniformUsed(d)&&n.getProgram().setUniformi(d,c)}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",t.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){var I=e.getCoincidentParameters(Q,B);n.getProgram().setUniformf("coffset",I.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",I.factor)}var u=t.openGLRenderer.getSelector();n.getProgram().setUniform3fArray("mapperIndex",u?u.getPropColorValue():[0,0,0]),n.getProgram().setUniformi("picking",u?u.getCurrentPass()+1:0)},e.setLightingShaderParameters=function(e,n,Q){var a=t.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(a<2)){for(var s=e.getProgram(),r=0,U=n.getLightsByReference(),F=0;F<U.length;++F){var l=U[F];if(l.getSwitch()>0){var o=l.getColorByReference(),g=l.getIntensity();t.lightColor[0]=o[0]*g,t.lightColor[1]=o[1]*g,t.lightColor[2]=o[2]*g;var i=l.getDirection(),c=n.getActiveCamera().getViewMatrix(),d=Object(B.a)(i);l.lightTypeIsSceneLight()&&(d[0]=c[0]*i[0]+c[1]*i[1]+c[2]*i[2],d[1]=c[4]*i[0]+c[5]*i[1]+c[6]*i[2],d[2]=c[8]*i[0]+c[9]*i[1]+c[10]*i[2],Object(u.y)(d)),t.lightDirection[0]=d[0],t.lightDirection[1]=d[1],t.lightDirection[2]=d[2],t.lightHalfAngle[0]=-t.lightDirection[0],t.lightHalfAngle[1]=-t.lightDirection[1],t.lightHalfAngle[2]=1-t.lightDirection[2],Object(u.y)(t.lightDirection),s.setUniform3fArray("lightColor".concat(r),t.lightColor),s.setUniform3fArray("lightDirectionVC".concat(r),t.lightDirection),s.setUniform3fArray("lightHalfAngleVC".concat(r),t.lightHalfAngle),r++}}if(!(a<3)){var I=n.getActiveCamera().getViewMatrix();Object(S.i)(I,I),r=0;for(var C=0;C<U.length;++C){var m=U[C];if(m.getSwitch()>0){var b=m.getTransformedPosition(),Z=new Float64Array(3);Object(y.q)(Z,b,I),s.setUniform3fArray("lightAttenuation".concat(r),m.getAttenuationValuesByReference()),s.setUniformi("lightPositional".concat(r),m.getPositional()),s.setUniformf("lightExponent".concat(r),m.getExponent()),s.setUniformf("lightConeAngle".concat(r),m.getConeAngle()),s.setUniform3fArray("lightPositionVC".concat(r),[Z[0],Z[1],Z[2]]),r++}}}}},e.setCameraShaderParameters=function(e,Q,B){var a=e.getProgram(),s=t.openGLCamera.getKeyMatrices(Q),r=Q.getActiveCamera(),U=t.openGLCamera.getKeyMatrixTime().getMTime(),F=a.getLastCameraMTime(),l=e.getCABO().getCoordShiftAndScaleEnabled()?e.getCABO().getInverseShiftAndScaleMatrix():null,o=B.getIsIdentity(),g=o?{mcwc:null,normalMatrix:null}:t.openGLActor.getKeyMatrices();a.setUniformMatrix("MCPCMatrix",n([s.wcpc,g.mcwc,l],S.p,t.tmpMat4)),a.isUniformUsed("MCVCMatrix")&&a.setUniformMatrix("MCVCMatrix",n([s.wcvc,g.mcwc,l],S.p,t.tmpMat4)),a.isUniformUsed("normalMatrix")&&a.setUniformMatrix3x3("normalMatrix",n([s.normalMatrix,g.normalMatrix],Zt,t.tmpMat3)),F!==U&&(a.isUniformUsed("cameraParallel")&&a.setUniformi("cameraParallel",r.getParallelProjection()),a.setLastCameraMTime(U)),o||a.setLastCameraMTime(0)},e.setPropertyShaderParameters=function(e,n,Q){var B=e.getProgram(),a=Q.getProperty(),s=a.getOpacity(),r=t.drawingEdges?a.getEdgeColorByReference():a.getAmbientColorByReference(),U=t.drawingEdges?a.getEdgeColorByReference():a.getDiffuseColorByReference(),F=t.drawingEdges?1:a.getAmbient(),l=t.drawingEdges?0:a.getDiffuse(),o=t.drawingEdges?0:a.getSpecular(),g=a.getSpecularPower();B.setUniformf("opacityUniform",s),B.setUniform3fArray("ambientColorUniform",r),B.setUniform3fArray("diffuseColorUniform",U),B.setUniformf("ambient",F),B.setUniformf("diffuse",l);var i=t.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(i<1)){var c=a.getSpecularColorByReference();if(B.setUniform3fArray("specularColorUniform",c),B.setUniformf("specularPowerUniform",g),B.isUniformUsed("ambientIntensityBF")){if(s=(a=Q.getBackfaceProperty()).getOpacity(),r=a.getAmbientColor(),F=a.getAmbient(),U=a.getDiffuseColor(),l=a.getDiffuse(),c=a.getSpecularColor(),o=a.getSpecular(),B.setUniformf("ambientIntensityBF",F),B.setUniformf("diffuseIntensityBF",l),B.setUniformf("opacityUniformBF",s),B.setUniform3fArray("ambientColorUniformBF",r),B.setUniform3fArray("diffuseColorUniformBF",U),i<1)return;B.setUniformf("specularIntensityBF",o),B.setUniform3fArray("specularColorUniformBF",c),B.setUniformf("specularPowerUniformBF",g)}}},e.renderPieceStart=function(n,Q){t.primitiveIDOffset=0,t.openGLRenderer.getSelector()&&(t.openGLRenderer.getSelector().getCurrentPass(),t.openGLRenderer.getSelector().renderProp(Q)),e.updateBufferObjects(n,Q),t.renderable.getColorTextureMap()&&t.internalColorTexture.activate(),t.lastBoundBO=null},e.renderPieceDraw=function(n,Q){var B=Q.getProperty().getRepresentation(),a=t.context,s=Q.getProperty().getEdgeVisibility()&&B===nU.SURFACE;a.lineWidth(Q.getProperty().getLineWidth());for(var r=tU.Start;r<tU.End;r++){var U=t.primitives[r].getCABO();if(U.getElementCount()){t.drawingEdges=s&&(r===tU.TrisEdges||r===tU.TriStripsEdges);var F=e.getOpenGLMode(B,r);t.drawingEdges&&t.renderDepth||(e.updateShaders(t.primitives[r],n,Q),a.drawArrays(F,0,U.getElementCount()));var l=(F===a.POINTS?1:0)||(F===a.LINES?2:3);t.primitiveIDOffset+=U.getElementCount()/l}}a.lineWidth(1)},e.getOpenGLMode=function(e,n){return e===nU.POINTS||n===tU.Points?t.context.POINTS:e===nU.WIREFRAME||n===tU.Lines||n===tU.TrisEdges||n===tU.TriStripsEdges?t.context.LINES:t.context.TRIANGLES},e.renderPieceFinish=function(e,n){t.LastBoundBO&&t.LastBoundBO.getVAO().release(),t.renderable.getColorTextureMap()&&t.internalColorTexture.deactivate()},e.renderPiece=function(n,Q){if(e.invokeEvent(UU),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent(FU),t.currentInput){if(t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()){var B=t.context,a=Q.getProperty().getBackfaceCulling(),s=Q.getProperty().getFrontfaceCulling();a||s?s?(t.openGLRenderWindow.enableCullFace(),B.cullFace(B.FRONT)):(t.openGLRenderWindow.enableCullFace(),B.cullFace(B.BACK)):t.openGLRenderWindow.disableCullFace(),e.renderPieceStart(n,Q),e.renderPieceDraw(n,Q),e.renderPieceFinish(n,Q)}}else rU("No input!")},e.computeBounds=function(n,Q){e.getInput()?t.bounds=e.getInput().getBounds():Object(u.D)(t.bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,Q){var B=t.VBOBuildTime.getMTime();return B<e.getMTime()||B<t.renderable.getMTime()||B<Q.getMTime()||B<t.currentInput.getMTime()},e.buildBufferObjects=function(e,n){var Q=t.currentInput;if(null!==Q){t.renderable.mapScalars(Q,1);var B=t.renderable.getColorMapColors();t.haveCellScalars=!1;var a=t.renderable.getScalarMode();t.renderable.getScalarVisibility()&&(a!==BU.USE_CELL_DATA&&a!==BU.USE_CELL_FIELD_DATA&&a!==BU.USE_FIELD_DATA&&Q.getPointData().getScalars()||a===BU.USE_POINT_FIELD_DATA||!B||(t.haveCellScalars=!0));var s=n.getProperty().getInterpolation()!==QU.FLAT?Q.getPointData().getNormals():null;null===s&&Q.getCellData().getNormals()&&(t.haveCellNormals=!0,s=Q.getCellData().getNormals());var r=n.getProperty().getRepresentation(),U=Q.getPointData().getTCoords();if(t.openGLActor.getActiveTextures()||(U=null),t.renderable.getColorCoordinates()){U=t.renderable.getColorCoordinates(),t.internalColorTexture||(t.internalColorTexture=va.newInstance());var F=t.internalColorTexture;F.setMinificationFilter(aU.NEAREST),F.setMagnificationFilter(aU.NEAREST),F.setWrapS(sU.CLAMP_TO_EDGE),F.setWrapT(sU.CLAMP_TO_EDGE),F.setOpenGLRenderWindow(t.openGLRenderWindow);var l=t.renderable.getColorTextureMap(),o=l.getExtent(),g=l.getPointData().getScalars();F.create2DFromRaw(o[1]-o[0]+1,o[3]-o[2]+1,g.getNumberOfComponents(),g.getDataType(),g.getData()),F.activate(),F.sendParameters(),F.deactivate()}var i="".concat(Q.getMTime(),"A").concat(r,"B").concat(Q.getMTime())+"C".concat(s?s.getMTime():1,"D").concat(B?B.getMTime():1)+"E".concat(n.getProperty().getEdgeVisibility())+"F".concat(U?U.getMTime():1);if(t.VBOBuildString!==i){var c=Q.getPoints(),d={points:c,normals:s,tcoords:U,colors:B,cellOffset:0,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals,customAttributes:t.renderable.getCustomShaderAttributes().map((function(e){return Q.getPointData().getArrayByName(e)}))};d.cellOffset+=t.primitives[tU.Points].getCABO().createVBO(Q.getVerts(),"verts",r,d),d.cellOffset+=t.primitives[tU.Lines].getCABO().createVBO(Q.getLines(),"lines",r,d),d.cellOffset+=t.primitives[tU.Tris].getCABO().createVBO(Q.getPolys(),"polys",r,d),d.cellOffset+=t.primitives[tU.TriStrips].getCABO().createVBO(Q.getStrips(),"strips",r,d),n.getProperty().getEdgeVisibility()&&r===nU.SURFACE?(t.primitives[tU.TrisEdges].getCABO().createVBO(Q.getPolys(),"polys",nU.WIREFRAME,{points:c,normals:s,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1}),t.primitives[tU.TriStripsEdges].getCABO().createVBO(Q.getStrips(),"strips",nU.WIREFRAME,{points:c,normals:s,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1})):(t.primitives[tU.TrisEdges].releaseGraphicsResources(t.openGLRenderWindow),t.primitives[tU.TriStripsEdges].releaseGraphicsResources(t.openGLRenderWindow)),t.VBOBuildTime.modified(),t.VBOBuildString=i}}}}var oU={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightHalfAngle:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1};function gU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,oU,n),oa.extend(e,t,n),eU.implementReplaceShaderCoincidentOffset(e,t,n),t.primitives=[],t.primTypes=tU,t.tmpMat3=It(new Float64Array(9)),t.tmpMat4=Object(S.h)(new Float64Array(16));for(var Q=tU.Start;Q<tU.End;Q++)t.primitives[Q]=_r.newInstance(),t.primitives[Q].setPrimitiveType(Q),t.primitives[Q].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);a.c.setGet(e,t,["context"]),t.VBOBuildTime={},a.c.obj(t.VBOBuildTime,{mtime:0}),lU(e,t)}var iU={newInstance:a.c.newInstance(gU,"vtkOpenGLPolyDataMapper"),extend:gU},cU={SelectionContent:{GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},SelectionField:{CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5}};function dU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function IU(e,t){t.classHierarchy.push("vtkSelectionNode"),e.getBounds=function(){return t.points.getBounds()}}var uU={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function CU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,uU,n),a.c.obj(e,t),t.properties={},a.c.setGet(e,t,["contentType","fieldType","properties","selectionList"]),IU(e,t)}var mU=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dU(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(CU,"vtkSelectionNode"),extend:CU},cU),bU={PassTypes:{MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,MAX_KNOWN_PASS:2}};function SU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var yU=bU.PassTypes,ZU=mU.SelectionContent,xU=mU.SelectionField,GU=rt.a.FieldAssociations,VU=a.c.vtkErrorMacro;function RU(e,t){t.classHierarchy.push("vtkOpenGLHardwareSelector"),e.releasePixBuffers=function(){t.pixBuffer=[],t.zBuffer=null},e.beginSelection=function(){t.openGLRenderer=t.openGLRenderWindow.getViewNodeFor(t.renderer),t.maxAttributeId=0;var n=t.openGLRenderWindow.getSize();if(t.framebuffer){t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers();var Q=t.framebuffer.getSize();Q[0]!==n[0]||Q[1]!==n[1]?(t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer()):t.framebuffer.bind()}else t.framebuffer=ka.newInstance(),t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer();t.openGLRenderer.clear(),t.openGLRenderer.setSelector(e),t.hitProps={},t.props=[],e.releasePixBuffers()},e.endSelection=function(){t.hitProps={},t.openGLRenderer.setSelector(null),t.framebuffer.restorePreviousBindingsAndBuffers()},e.preCapturePass=function(){},e.postCapturePass=function(){},e.select=function(){var n=null;return e.captureBuffers()&&(n=e.generateSelection(t.area[0],t.area[1],t.area[2],t.area[3]),e.releasePixBuffers()),n},e.captureBuffers=function(){if(!t.renderer||!t.openGLRenderWindow)return VU("Renderer and view must be set before calling Select."),!1;t.openGLRenderer=t.openGLRenderWindow.getViewNodeFor(t.renderer),e.invokeEvent({type:"StartEvent"}),t.originalBackground=t.renderer.getBackgroundByReference(),t.renderer.setBackground(0,0,0);var n=t.openGLRenderWindow.getRenderPasses();for(e.beginSelection(),t.currentPass=yU.MIN_KNOWN_PASS;t.currentPass<=yU.COMPOSITE_INDEX_PASS;t.currentPass++)e.passRequired(t.currentPass)&&(e.preCapturePass(t.currentPass),t.captureZValues&&t.currentPass===yU.ACTOR_PASS&&"function"==typeof n[0].requestDepth&&"function"==typeof n[0].getFramebuffer?(n[0].requestDepth(),t.openGLRenderWindow.traverseAllPasses()):t.openGLRenderWindow.traverseAllPasses(),e.postCapturePass(t.currentPass),e.savePixelBuffer(t.currentPass));return e.endSelection(),t.renderer.setBackground(t.originalBackground),e.invokeEvent({type:"EndEvent"}),!0},e.passRequired=function(e){return!0},e.savePixelBuffer=function(n){if(t.pixBuffer[n]=t.openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),n===yU.ACTOR_PASS){if(t.captureZValues){var Q=t.openGLRenderWindow.getRenderPasses();if("function"==typeof Q[0].requestDepth&&"function"==typeof Q[0].getFramebuffer){var B=Q[0].getFramebuffer();B.saveCurrentBindingsAndBuffers(),B.bind(),t.zBuffer=t.openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),B.restorePreviousBindingsAndBuffers()}}e.buildPropHitList(t.pixBuffer[n])}},e.buildPropHitList=function(n){for(var Q=0;Q<=t.area[3]-t.area[1];Q++)for(var B=0;B<=t.area[2]-t.area[0];B++){var a=e.convert(B,Q,n);a>0&&(--a in t.hitProps||(t.hitProps[a]=!0))}},e.renderProp=function(n){t.currentPass===yU.ACTOR_PASS&&(e.setPropColorValueFromInt(t.props.length+t.idOffset),t.props.push(n))},e.renderCompositeIndex=function(n){t.currentPass===yU.COMPOSITE_INDEX_PASS&&e.setPropColorValueFromInt(n+t.idOffset)},e.renderAttributeId=function(e){e<0||(t.maxAttributeId=e>t.maxAttributeId?e:t.maxAttributeId)},e.getPropFromID=function(e){return e>=0&&e<t.props.length?t.props[e]:null},e.passTypeToString=function(e){return a.c.enumToString(yU,e)},e.isPropHit=function(e){return Boolean(t.hitProps[e])},e.convert=function(e,n,Q){if(!Q)return 0;var B=4*(n*(t.area[2]-t.area[0]+1)+e),a=[];a[0]=Q[B],a[1]=Q[B+1],a[2]=Q[B+2];var s=a[2];return s*=256,s+=a[1],(s*=256)+a[0]},e.setPropColorValueFromInt=function(e){t.propColorValue[0]=e%256/255,t.propColorValue[1]=Math.floor(e/256)%256/255,t.propColorValue[2]=Math.floor(e/65536)%256/255},e.getPixelInformation=function(n,Q,B){var a=Q<0?0:Q;if(0===a){if(B[0]=n[0],B[1]=n[1],n[0]<t.area[0]||n[0]>t.area[2]||n[1]<t.area[1]||n[1]>t.area[3])return null;var s=[n[0]-t.area[0],n[1]-t.area[1]],r=e.convert(s[0],s[1],t.pixBuffer[yU.ACTOR_PASS]);if(r<=0)return null;var U={valid:!0};U.propID=r-t.idOffset,U.prop=e.getPropFromID(U.propID);var F=e.convert(s[0],s[1],t.pixBuffer[yU.COMPOSITE_INDEX_PASS]);if((F<0||F>16777215)&&(F=0),U.compositeID=F-t.idOffset,t.captureZValues){var l=4*(s[1]*(t.area[2]-t.area[0]+1)+s[0]);U.zValue=(256*t.zBuffer[l]+t.zBuffer[l+1])/65535,U.displayPosition=n}return U}var o=[n[0],n[1]],g=[0,0],i=e.getPixelInformation(n,0,B);if(i&&i.valid)return i;for(var c=1;c<a;++c){for(var d=o[1]>c?o[1]-c:0;d<=o[1]+c;++d){if(g[1]=d,o[0]>=c&&(g[0]=o[0]-c,(i=e.getPixelInformation(g,0,B))&&i.valid))return i;if(g[0]=o[0]+c,(i=e.getPixelInformation(g,0,B))&&i.valid)return i}for(var I=o[0]>=c?o[0]-(c-1):0;I<=o[0]+(c-1);++I){if(g[0]=I,o[1]>=c&&(g[1]=o[1]-c,(i=e.getPixelInformation(g,0,B))&&i.valid))return i;if(g[1]=o[1]+c,(i=e.getPixelInformation(g,0,B))&&i.valid)return i}}return B[0]=n[0],B[1]=n[1],null},e.convertSelection=function(e,n){var Q=[],B=0;return n.forEach((function(n,a){var s=mU.newInstance();switch(s.setContentType(ZU.INDICES),e){case GU.FIELD_ASSOCIATION_CELLS:s.setFieldType(xU.CELL);break;case GU.FIELD_ASSOCIATION_POINTS:s.setFieldType(xU.POINT);break;default:VU("Unknown field association")}s.getProperties().propID=n.info.propID,s.getProperties().prop=n.info.prop,s.getProperties().compositeID=n.info.compositeID,s.getProperties().pixelCount=n.pixelCount,t.captureZValues&&(s.getProperties().displayPosition=[n.info.displayPosition[0],n.info.displayPosition[1],n.info.zValue],s.getProperties().worldPosition=t.openGLRenderWindow.displayToWorld(n.info.displayPosition[0],n.info.displayPosition[1],n.info.zValue,t.renderer)),s.setSelectionList(n.attributeIDs),Q[B]=s,B++})),Q},e.getInfoHash=function(e){return"".concat(e.propID," ").concat(e.compositeID)},e.generateSelection=function(n,Q,B,a){for(var s=Math.floor(n),r=Math.floor(Q),U=Math.floor(B),F=Math.floor(a),l=new Map,o=[0,0],g=r;g<=F;g++)for(var i=s;i<=U;i++){var c=[i,g],d=e.getPixelInformation(c,0,o);if(d&&d.valid){var I=e.getInfoHash(d);if(l.has(I)){var u=l.get(I);u.pixelCount++,t.captureZValues&&d.zValue<u.info.zValue&&(u.info=d),-1===u.attributeIDs.indexOf(d.attributeID)&&u.attributeIDs.push(d.attributeID)}else l.set(I,{info:d,pixelCount:1,attributeIDs:[d.attributeID]})}}return e.convertSelection(t.fieldAssociation,l)},e.attach=function(e,n){t.openGLRenderWindow=e,t.renderer=n};var n=e.setArea;e.setArea=function(){return!!n.apply(void 0,arguments)&&(t.area[0]=Math.floor(t.area[0]),t.area[1]=Math.floor(t.area[1]),t.area[2]=Math.floor(t.area[2]),t.area[3]=Math.floor(t.area[3]),!0)}}var LU={fieldAssociation:GU.FIELD_ASSOCIATION_CELLS,renderer:null,area:null,openGLRenderWindow:null,openGLRenderer:null,currentPass:-1,propColorValue:null,props:null,idOffset:1,captureZValues:!1};function pU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,LU,n),a.c.obj(e,t),t.area=[0,0,0,0],t.propColorValue=[0,0,0],t.props=[],a.c.setGet(e,t,["fieldAssociation","renderer","currentPass","captureZValues"]),a.c.setGetArray(e,t,["area"],4),a.c.setGetArray(e,t,["propColorValue"],3),a.c.event(e,t,"event"),RU(e,t)}var hU=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SU(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(pU,"vtkOpenGLHardwareSelector"),extend:pU},bU);function NU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var DU=a.c.vtkErrorMacro,AU=Cs.Representation,EU=Wr.ObjectType,fU=hU.PassTypes,JU={type:"StartEvent"},vU={type:"EndEvent"};function WU(e,t){t.classHierarchy.push("vtkOpenGLGlyph3DMapper");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NU(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.renderPiece=function(n,Q){if(e.invokeEvent(JU),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(1),e.invokeEvent(vU),t.currentInput){if(t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()){var B=t.context;t.openGLRenderWindow.getWebgl2()?(t.hardwareSupport=!0,t.extension=null):t.extension||(t.extension=t.context.getExtension("ANGLE_instanced_arrays"),t.hardwareSupport=!!t.extension);var a=Q.getProperty().getBackfaceCulling(),s=Q.getProperty().getFrontfaceCulling();a||s?s?(t.openGLRenderWindow.enableCullFace(),B.cullFace(B.FRONT)):(t.openGLRenderWindow.enableCullFace(),B.cullFace(B.BACK)):t.openGLRenderWindow.disableCullFace(),e.renderPieceStart(n,Q),e.renderPieceDraw(n,Q),e.renderPieceFinish(n,Q)}}else DU("No input!")},e.multiply4x4WithOffset=function(e,t,n,Q){var B=t[0],a=t[1],s=t[2],r=t[3],U=t[4],F=t[5],l=t[6],o=t[7],g=t[8],i=t[9],c=t[10],d=t[11],I=t[12],u=t[13],C=t[14],m=t[15],b=n[Q],S=n[Q+1],y=n[Q+2],Z=n[Q+3];e[0]=b*B+S*U+y*g+Z*I,e[1]=b*a+S*F+y*i+Z*u,e[2]=b*s+S*l+y*c+Z*C,e[3]=b*r+S*o+y*d+Z*m,b=n[Q+4],S=n[Q+5],y=n[Q+6],Z=n[Q+7],e[4]=b*B+S*U+y*g+Z*I,e[5]=b*a+S*F+y*i+Z*u,e[6]=b*s+S*l+y*c+Z*C,e[7]=b*r+S*o+y*d+Z*m,b=n[Q+8],S=n[Q+9],y=n[Q+10],Z=n[Q+11],e[8]=b*B+S*U+y*g+Z*I,e[9]=b*a+S*F+y*i+Z*u,e[10]=b*s+S*l+y*c+Z*C,e[11]=b*r+S*o+y*d+Z*m,b=n[Q+12],S=n[Q+13],y=n[Q+14],Z=n[Q+15],e[12]=b*B+S*U+y*g+Z*I,e[13]=b*a+S*F+y*i+Z*u,e[14]=b*s+S*l+y*c+Z*C,e[15]=b*r+S*o+y*d+Z*m},e.replaceShaderNormal=function(e,Q,B){if(t.hardwareSupport&&t.lastBoundBO.getReferenceByName("lastLightComplexity")>0){var a=e.Vertex;t.lastBoundBO.getCABO().getNormalOffset()&&(a=xr.substitute(a,"//VTK::Normal::Dec",["attribute vec3 normalMC;","attribute mat3 gNormal;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,a=xr.substitute(a,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * gNormal * normalMC;"]).result),e.Vertex=a}n.replaceShaderNormal(e,Q,B)},e.replaceShaderColor=function(e,Q,B){if(t.hardwareSupport&&t.renderable.getColorArray()){var a=e.Vertex,s=e.Geometry,r=e.Fragment,U=t.lastBoundBO.getReferenceByName("lastLightComplexity"),F=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity"];U&&(F=F.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var l=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];U&&(l=l.concat(["  vec3 specularColor;","  float specularPower;"])),l=l.concat(["  opacity = opacityUniform;"]),U&&(l=l.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),t.drawingEdges||(F=F.concat(["varying vec4 vertexColorVSOutput;"]),a=xr.substitute(a,"//VTK::Color::Dec",["attribute vec4 gColor;","varying vec4 vertexColorVSOutput;"]).result,a=xr.substitute(a,"//VTK::Color::Impl",["vertexColorVSOutput = gColor;"]).result,s=xr.substitute(s,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,s=xr.substitute(s,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,l=l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])),r=xr.substitute(r,"//VTK::Color::Impl",l).result,r=xr.substitute(r,"//VTK::Color::Dec",F).result,e.Vertex=a,e.Geometry=s,e.Fragment=r}n.replaceShaderColor(e,Q,B)},e.replaceShaderPositionVC=function(e,Q,B){if(t.hardwareSupport){var a=e.Vertex;t.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(a=xr.substitute(a,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","vertexVCVSOutput = MCVCMatrix * gVertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result,a=xr.substitute(a,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result):(a=xr.substitute(a,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;"]).result,a=xr.substitute(a,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result),e.Vertex=a}n.replaceShaderPositionVC(e,Q,B)},e.replaceShaderPicking=function(e,Q,B){if(t.hardwareSupport){var a=e.Fragment,s=e.Vertex;s=xr.substitute(s,"//VTK::Picking::Dec",["attribute vec3 mapperIndexVS;","varying vec3 mapperIndexVSOutput;"]).result,s=xr.substitute(s,"//VTK::Picking::Impl","  mapperIndexVSOutput = mapperIndexVS;").result,e.Vertex=s,a=xr.substitute(a,"//VTK::Picking::Dec",["varying vec3 mapperIndexVSOutput;","uniform vec3 mapperIndex;","uniform int picking;"]).result,a=xr.substitute(a,"//VTK::Picking::Impl",["  vec4 pickColor = picking == 2 ? vec4(mapperIndexVSOutput,1.0) : vec4(mapperIndex,1.0);","  gl_FragData[0] = picking != 0 ? pickColor : gl_FragData[0];"]).result,e.Fragment=a}else n.replaceShaderPicking(e,Q,B)},e.updateGlyphShaderParameters=function(n,Q,B,a,s,r,U,F){var l=B.getProgram();if(n){var o=t.normalMatrix,g=r,i=9*U,c=t.tmpMat3,d=o[0],I=o[1],u=o[2],C=o[3],m=o[4],b=o[5],S=o[6],y=o[7],Z=o[8],x=g[i],G=g[i+1],V=g[i+2],R=g[i+3],L=g[i+4],p=g[i+5],h=g[i+6],N=g[i+7],D=g[i+8];c[0]=x*d+G*C+V*S,c[1]=x*I+G*m+V*y,c[2]=x*u+G*b+V*Z,c[3]=R*d+L*C+p*S,c[4]=R*I+L*m+p*y,c[5]=R*u+L*b+p*Z,c[6]=h*d+N*C+D*S,c[7]=h*I+N*m+D*y,c[8]=h*u+N*b+D*Z,l.setUniformMatrix3x3("normalMatrix",t.tmpMat3)}if(e.multiply4x4WithOffset(t.tmpMat4,t.mcpcMatrix,s,16*U),l.setUniformMatrix("MCPCMatrix",t.tmpMat4),Q&&(e.multiply4x4WithOffset(t.tmpMat4,t.mcvcMatrix,s,16*U),l.setUniformMatrix("MCVCMatrix",t.tmpMat4)),a){var A=a.getData();t.tmpColor[0]=A[4*U]/255,t.tmpColor[1]=A[4*U+1]/255,t.tmpColor[2]=A[4*U+2]/255,l.setUniform3fArray("ambientColorUniform",t.tmpColor),l.setUniform3fArray("diffuseColorUniform",t.tmpColor)}F&&l.setUniform3fArray("mapperIndex",F.getPropColorValue())},e.renderPieceDraw=function(n,Q){var B=Q.getProperty().getRepresentation(),a=t.context,s=Q.getProperty().getEdgeVisibility()&&B===AU.SURFACE,r=t.openGLCamera.getKeyMatrices(n),U=t.openGLActor.getKeyMatrices();mt(t.normalMatrix,r.normalMatrix,U.normalMatrix),Object(S.l)(t.mcpcMatrix,r.wcpc,U.mcwc),Object(S.l)(t.mcvcMatrix,r.wcvc,U.mcwc);var F=t.renderable.getMatrixArray(),l=t.renderable.getNormalArray(),o=t.renderable.getColorArray(),g=F.length/16,i=!1;t.openGLRenderer.getSelector()&&t.openGLRenderer.getSelector().getCurrentPass()===fU.COMPOSITE_INDEX_PASS&&(i=!0);for(var c=t.primTypes.Start;c<t.primTypes.End;c++){var d=t.primitives[c].getCABO();if(d.getElementCount()){t.drawingEdges=s&&(c===t.primTypes.TrisEdges||c===t.primTypes.TriStripsEdges),e.updateShaders(t.primitives[c],n,Q);var I=t.primitives[c].getProgram(),u=e.getOpenGLMode(B,c),C=I.isUniformUsed("normalMatrix"),m=I.isUniformUsed("MCVCMatrix");if(t.hardwareSupport)t.extension?t.extension.drawArraysInstancedANGLE(u,0,d.getElementCount(),g):a.drawArraysInstanced(u,0,d.getElementCount(),g);else for(var b=0;b<g;++b)i&&t.openGLRenderer.getSelector().renderCompositeIndex(b),e.updateGlyphShaderParameters(C,m,t.primitives[c],o,F,l,b,i?t.openGLRenderer.getSelector():null),a.drawArrays(u,0,d.getElementCount())}}},e.setMapperShaderParameters=function(e,Q,B){if(e.getCABO().getElementCount()&&(t.glyphBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime()))return e.getProgram().isAttributeUsed("gMatrix")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),t.matrixBuffer,"gMatrix",0,64,t.context.FLOAT,4,!1,1)||DU("Error setting gMatrix in shader VAO."):e.getVAO().removeAttributeArray("gMatrix"),e.getProgram().isAttributeUsed("gNormal")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),t.normalBuffer,"gNormal",0,36,t.context.FLOAT,3,!1,1)||DU("Error setting gNormal in shader VAO."):e.getVAO().removeAttributeArray("gNormal"),e.getProgram().isAttributeUsed("gColor")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),t.colorBuffer,"gColor",0,4,t.context.UNSIGNED_BYTE,4,!0,1,!1)||DU("Error setting gColor in shader VAO."):e.getVAO().removeAttributeArray("gColor"),e.getProgram().isAttributeUsed("mapperIndexVS")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),t.pickBuffer,"mapperIndexVS",0,4,t.context.UNSIGNED_BYTE,4,!0,1,!1)||DU("Error setting mapperIndexVS in shader VAO."):e.getVAO().removeAttributeArray("mapperIndexVS"),n.setMapperShaderParameters(e,Q,B),void e.getAttributeUpdateTime().modified();n.setMapperShaderParameters(e,Q,B)},e.getNeedToRebuildBufferObjects=function(e,Q){return t.renderable.buildArrays(),t.VBOBuildTime.getMTime()<t.renderable.getBuildTime().getMTime()||n.getNeedToRebuildBufferObjects(e,Q)},e.buildBufferObjects=function(e,Q){if(t.hardwareSupport){var B=t.renderable.getMatrixArray(),a=t.renderable.getNormalArray(),s=t.renderable.getColorArray();if(t.matrixBuffer||(t.matrixBuffer=Wr.newInstance(),t.matrixBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.normalBuffer=Wr.newInstance(),t.normalBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorBuffer=Wr.newInstance(),t.colorBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.pickBuffer=Wr.newInstance(),t.pickBuffer.setOpenGLRenderWindow(t.openGLRenderWindow)),t.renderable.getBuildTime().getMTime()>t.glyphBOBuildTime.getMTime()){t.matrixBuffer.upload(B,EU.ARRAY_BUFFER),t.normalBuffer.upload(a,EU.ARRAY_BUFFER),s?t.colorBuffer.upload(s.getData(),EU.ARRAY_BUFFER):t.colorBuffer.releaseGraphicsResources();for(var r=B.length/16,U=new Uint8Array(4*r),F=0;F<r;++F){var l=F+1,o=4*F;U[o]=l%256,l-=U[o],l/=256,U[o+1]=l%256,l-=U[o+1],l/=256,U[o+2]=l%256,U[o+3]=255}t.pickBuffer.upload(U,EU.ARRAY_BUFFER),t.glyphBOBuildTime.modified()}}return n.buildBufferObjects(e,Q)}}var XU={normalMatrix:null,mcpcMatrix:null,mcwcMatrix:null};function HU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,XU,n),iU.extend(e,t,n),t.tmpMat3=It(new Float64Array(9)),t.normalMatrix=It(new Float64Array(9)),t.mcpcMatrix=Object(S.h)(new Float64Array(16)),t.mcvcMatrix=Object(S.h)(new Float64Array(16)),t.tmpColor=[],t.glyphBOBuildTime={},a.c.obj(t.glyphBOBuildTime,{mtime:0}),WU(e,t)}var kU={newInstance:a.c.newInstance(HU,"vtkOpenGLGlyph3DMapper"),extend:HU},TU={SlicingMode:{NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5}},MU={NEAREST:0,LINEAR:1},YU={InterpolationType:MU},wU=a.c.vtkErrorMacro,OU=TU.SlicingMode;function zU(e,t,n){if(t.apply(e)){var Q=e.getIndependentComponents();return"".concat(e.getMTime(),"-").concat(Q,"-").concat(n)}return"0"}function PU(e,t){t.classHierarchy.push("vtkOpenGLImageMapper"),e.buildPass=function(n){if(n){t.openGLImageSlice=e.getFirstAncestorOfType("vtkOpenGLImageSlice"),t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.pwfTexture.setOpenGLRenderWindow(t.openGLRenderWindow);var Q=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(Q.getActiveCamera()),t.renderable.getSliceAtFocalPoint()&&t.renderable.setSliceFromCamera(Q.getActiveCamera())}},e.translucentPass=function(t){t&&e.render()},e.opaqueZBufferPass=function(n){n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaquePass=function(t){t&&e.render()},e.getCoincidentParameters=function(e,n){return t.renderable.getResolveCoincidentTopology()?t.renderable.getCoincidentTopologyPolygonOffsetParameters():null},e.render=function(){var n=t.openGLImageSlice.getRenderable(),Q=t.openGLRenderer.getRenderable();e.renderPiece(Q,n)},e.buildShaders=function(t,n,Q){e.getShaderTemplate(t,n,Q),e.replaceShaderValues(t,n,Q)},e.getShaderTemplate=function(e,t,n){e.Vertex=qr,e.Fragment=$r,e.Geometry=""},e.replaceShaderValues=function(n,Q,B){var a=n.Vertex,s=n.Fragment;a=xr.substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,a=xr.substitute(a,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result,a=xr.substitute(a,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result,a=xr.substitute(a,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result;var r=t.openGLTexture.getComponents(),U=B.getProperty().getIndependentComponents(),F=["varying vec2 tcoordVCVSOutput;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;"];if(U){for(var l=1;l<r;l++)F=F.concat(["uniform float cshift".concat(l,";"),"uniform float cscale".concat(l,";"),"uniform float pwfshift".concat(l,";"),"uniform float pwfscale".concat(l,";")]);switch(r){case 1:F=F.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:F=F.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:F=F.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:F=F.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:wU("Unsupported number of independent coordinates.")}}if(s=xr.substitute(s,"//VTK::TCoord::Dec",F).result,U){for(var o=["r","g","b","a"],g=["vec4 tvalue = texture2D(texture1, tcoordVCVSOutput);"],i=0;i<r;i++)g=g.concat(["vec3 tcolor".concat(i," = mix").concat(i," * texture2D(colorTexture1, vec2(tvalue.").concat(o[i]," * cscale").concat(i," + cshift").concat(i,", height").concat(i,")).rgb;"),"float compWeight".concat(i," = mix").concat(i," * texture2D(pwfTexture1, vec2(tvalue.").concat(o[i]," * pwfscale").concat(i," + pwfshift").concat(i,", height").concat(i,")).r;")]);switch(r){case 1:g=g.concat(["gl_FragData[0] = vec4(tcolor0.rgb, opacity);"]);break;case 2:g=g.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:g=g.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:g=g.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:wU("Unsupported number of independent coordinates.")}s=xr.substitute(s,"//VTK::TCoord::Impl",g).result}else switch(r){case 1:s=xr.substitute(s,"//VTK::TCoord::Impl",["float intensity = texture2D(texture1, tcoordVCVSOutput).r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]).result;break;case 2:s=xr.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tcolor.g + pwfshift0);"]).result;break;default:s=xr.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}t.haveSeenDepthRequest&&(s=xr.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=xr.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=a,n.Fragment=s,e.replaceShaderCoincidentOffset(n,Q,B)},e.getNeedToRebuildShaders=function(e,n,Q){var B=t.openGLTexture.getComponents(),a=Q.getProperty().getIndependentComponents();return(t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||0===e.getProgram()||t.lastTextureComponents!==B||t.lastIndependentComponents!==a)&&(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,t.lastTextureComponents=B,t.lastIndependentComponents=a,!0)},e.updateShaders=function(n,Q,B){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,Q,B)){var a={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(a,Q,B);var s=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);s!==n.getProgram()&&(n.setProgram(s),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,Q,B),e.setCameraShaderParameters(n,Q,B),e.setPropertyShaderParameters(n,Q,B)},e.setMapperShaderParameters=function(n,Q,B){n.getCABO().getElementCount()&&(t.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||wU("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getTCoordComponents(),t.context.FALSE)||wU("Error setting tcoordMC in shader VAO.")),n.getAttributeUpdateTime().modified());var a=t.openGLTexture.getTextureUnit();n.getProgram().setUniformi("texture1",a);var s=t.openGLTexture.getComponents(),r=B.getProperty().getIndependentComponents();if(r)for(var U=0;U<s;U++)n.getProgram().setUniformf("mix".concat(U),B.getProperty().getComponentWeight(U));for(var F=t.openGLTexture.getShiftAndScale(),l=0;l<s;l++){var o=B.getProperty().getColorWindow(),g=B.getProperty().getColorLevel(),i=r?l:0,c=B.getProperty().getRGBTransferFunction(i);if(c){var d=c.getRange();o=d[1]-d[0],g=.5*(d[1]+d[0])}var I=F.scale/o,u=(F.shift-g)/o+.5;n.getProgram().setUniformf("cshift".concat(l),u),n.getProgram().setUniformf("cscale".concat(l),I)}for(var C=0;C<s;C++){var m=1,b=0,S=r?C:0,y=B.getProperty().getPiecewiseFunction(S);if(y){var Z=y.getRange(),x=Z[1]-Z[0],G=.5*(Z[0]+Z[1]);m=F.scale/x,b=(F.shift-G)/x+.5}n.getProgram().setUniformf("pwfshift".concat(C),b),n.getProgram().setUniformf("pwfscale".concat(C),m)}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",t.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){var V=e.getCoincidentParameters(Q,B);n.getProgram().setUniformf("coffset",V.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",V.factor)}var R=t.colorTexture.getTextureUnit();n.getProgram().setUniformi("colorTexture1",R);var L=t.pwfTexture.getTextureUnit();n.getProgram().setUniformi("pwfTexture1",L)},e.setCameraShaderParameters=function(e,n,Q){var B=e.getProgram(),a=t.openGLImageSlice.getKeyMatrices(),s=t.currentInput.getIndexToWorld();Object(S.l)(t.imagemat,a.mcwc,s);var r=t.openGLCamera.getKeyMatrices(n);if(Object(S.l)(t.imagemat,r.wcpc,t.imagemat),e.getCABO().getCoordShiftAndScaleEnabled()){var U=e.getCABO().getInverseShiftAndScaleMatrix();Object(S.l)(t.imagemat,t.imagemat,U)}B.setUniformMatrix("MCPCMatrix",t.imagemat)},e.setPropertyShaderParameters=function(e,t,n){var Q=e.getProgram(),B=n.getProperty().getOpacity();Q.setUniformf("opacity",B)},e.renderPieceStart=function(n,Q){e.updateBufferObjects(n,Q),t.lastBoundBO=null},e.renderPieceDraw=function(n,Q){var B=t.context;t.openGLTexture.activate(),t.colorTexture.activate(),t.pwfTexture.activate(),t.tris.getCABO().getElementCount()&&(e.updateShaders(t.tris,n,Q),B.drawArrays(B.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release()),t.openGLTexture.deactivate(),t.colorTexture.deactivate(),t.pwfTexture.deactivate()},e.renderPieceFinish=function(e,t){},e.renderPiece=function(n,Q){e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),t.currentInput?(e.renderPieceStart(n,Q),e.renderPieceDraw(n,Q),e.renderPieceFinish(n,Q)):wU("No input!")},e.computeBounds=function(n,Q){e.getInput()?t.bounds=e.getInput().getBounds():Object(u.D)(t.bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,Q){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<Q.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<Q.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(n,Q){var B=t.currentInput;if(B){var a=B.getPointData()&&B.getPointData().getScalars();if(a){var r=Q.getProperty(),U=r.getInterpolationType();U===MU.NEAREST?(t.colorTexture.setMinificationFilter(Ga.NEAREST),t.colorTexture.setMagnificationFilter(Ga.NEAREST),t.pwfTexture.setMinificationFilter(Ga.NEAREST),t.pwfTexture.setMagnificationFilter(Ga.NEAREST)):(t.colorTexture.setMinificationFilter(Ga.LINEAR),t.colorTexture.setMagnificationFilter(Ga.LINEAR),t.pwfTexture.setMinificationFilter(Ga.LINEAR),t.pwfTexture.setMagnificationFilter(Ga.LINEAR));var F=a.getNumberOfComponents(),l=r.getIndependentComponents(),o=l?F:1,g=l?2*o:1,i=zU(r,r.getRGBTransferFunction,o);if(t.colorTextureString!==i){var c=1024,d=new Uint8Array(c*g*3),I=r.getRGBTransferFunction();if(I){for(var u=new Float32Array(3072),C=0;C<o;C++){var m=(I=r.getRGBTransferFunction(C)).getRange();if(I.getTable(m[0],m[1],c,u,1),l)for(var b=0;b<3072;b++)d[C*c*6+b]=255*u[b],d[C*c*6+b+3072]=255*u[b];else for(var S=0;S<3072;S++)d[C*c*6+S]=255*u[S]}t.colorTexture.create2DFromRaw(c,g,3,J.a.UNSIGNED_CHAR,d)}else{for(var y=0;y<3072;++y)d[y]=255*y/3069,d[y+1]=255*y/3069,d[y+2]=255*y/3069;t.colorTexture.create2DFromRaw(c,1,3,J.a.UNSIGNED_CHAR,d)}t.colorTextureString=i}var Z=zU(r,r.getPiecewiseFunction,o);if(t.pwfTextureString!==Z){var x=1024,G=x*g,V=new Uint8Array(G),R=r.getPiecewiseFunction();if(t.pwfTexture.resetFormatAndType(),R){for(var L=new Float32Array(G),p=new Float32Array(x),h=0;h<o;++h)if(null===(R=r.getPiecewiseFunction(h)))L.fill(1);else{var N=R.getRange();if(R.getTable(N[0],N[1],x,p,1),l)for(var D=0;D<x;D++)L[h*x*2+D]=p[D],L[h*x*2+D+x]=p[D];else for(var A=0;A<x;A++)L[h*x*2+A]=p[A]}t.pwfTexture.create2DFromRaw(x,g,1,J.a.FLOAT,L)}else V.fill(255),t.pwfTexture.create2DFromRaw(x,1,1,J.a.UNSIGNED_CHAR,V);t.pwfTextureString=Z}var E=t.renderable.getClosestIJKAxis().ijkMode,f=t.renderable.getSlice();E!==t.renderable.getSlicingMode()&&(f=t.renderable.getSliceAtPosition(f));var v,W=B.getExtent();E===OU.I&&(v=f-W[0]),E===OU.J&&(v=f-W[2]),E!==OU.K&&E!==OU.NONE||(v=f-W[4]);var X="".concat(f,"A").concat(B.getMTime(),"A").concat(a.getMTime(),"B").concat(e.getMTime(),"C").concat(t.renderable.getSlicingMode(),"D").concat(Q.getProperty().getMTime());if(t.VBOBuildString!==X){var H=B.getDimensions();U===MU.NEAREST?(4===F?(t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(Ga.NEAREST)):t.openGLTexture.setMinificationFilter(Ga.NEAREST),t.openGLTexture.setMagnificationFilter(Ga.NEAREST)):(4===F?(t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(Ga.LINEAR_MIPMAP_LINEAR)):t.openGLTexture.setMinificationFilter(Ga.LINEAR),t.openGLTexture.setMagnificationFilter(Ga.LINEAR)),t.openGLTexture.setWrapS(xa.CLAMP_TO_EDGE),t.openGLTexture.setWrapT(xa.CLAMP_TO_EDGE);for(var k=H[0]*H[1]*F,T=new Float32Array(12),M=new Float32Array(8),Y=0;Y<4;Y++)M[2*Y]=Y%2?1:0,M[2*Y+1]=Y>1?1:0;var w=a.getData(),O=null;if(E===OU.I){O=new w.constructor(H[2]*H[1]*F);for(var z=0,P=0;P<H[2];P++)for(var K=0;K<H[1];K++){var j=(v+K*H[0]+P*H[0]*H[1])*F;z=(P*H[1]+K)*F,O.set(w.subarray(j,j+F),z)}H[0]=H[1],H[1]=H[2],T[0]=f,T[1]=W[2],T[2]=W[4],T[3]=f,T[4]=W[3],T[5]=W[4],T[6]=f,T[7]=W[2],T[8]=W[5],T[9]=f,T[10]=W[3],T[11]=W[5]}else if(E===OU.J){O=new w.constructor(H[2]*H[0]*F);for(var _=0,q=0;q<H[2];q++)for(var $=0;$<H[0];$++){var ee=($+v*H[0]+q*H[0]*H[1])*F;_=(q*H[0]+$)*F,O.set(w.subarray(ee,ee+F),_)}H[1]=H[2],T[0]=W[0],T[1]=f,T[2]=W[4],T[3]=W[1],T[4]=f,T[5]=W[4],T[6]=W[0],T[7]=f,T[8]=W[5],T[9]=W[1],T[10]=f,T[11]=W[5]}else E===OU.K||E===OU.NONE?(O=w.subarray(v*k,(v+1)*k),T[0]=W[0],T[1]=W[2],T[2]=f,T[3]=W[1],T[4]=W[2],T[5]=f,T[6]=W[0],T[7]=W[3],T[8]=f,T[9]=W[1],T[10]=W[3],T[11]=f):wU("Reformat slicing not yet supported.");t.openGLTexture.create2DFromRaw(H[0],H[1],F,a.getDataType(),O),t.openGLTexture.activate(),t.openGLTexture.sendParameters(),t.openGLTexture.deactivate();var te=s.a.newInstance({numberOfComponents:3,values:T});te.setName("points");var ne=s.a.newInstance({numberOfComponents:2,values:M});ne.setName("tcoords");var Qe=new Uint16Array(8);Qe[0]=3,Qe[1]=0,Qe[2]=1,Qe[3]=3,Qe[4]=3,Qe[5]=0,Qe[6]=3,Qe[7]=2;var Be=s.a.newInstance({numberOfComponents:1,values:Qe});t.tris.getCABO().createVBO(Be,"polys",Fs.SURFACE,{points:te,tcoords:ne,cellOffset:0}),t.VBOBuildTime.modified(),t.VBOBuildString=X}}}}}var KU={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,colorTexture:null,pwfTexture:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0};function jU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,KU,n),oa.extend(e,t,n),eU.implementReplaceShaderCoincidentOffset(e,t,n),t.tris=_r.newInstance(),t.openGLTexture=va.newInstance(),t.colorTexture=va.newInstance(),t.pwfTexture=va.newInstance(),t.imagemat=Object(S.h)(new Float64Array(16)),a.c.setGet(e,t,[]),t.VBOBuildTime={},a.c.obj(t.VBOBuildTime),PU(e,t)}var _U={newInstance:a.c.newInstance(jU,"vtkOpenGLImageMapper"),extend:jU};function qU(e,t){t.classHierarchy.push("vtkOpenGLImageSlice"),e.buildPass=function(n){if(t.renderable&&t.renderable.getVisibility()&&n){if(!t.renderable)return;t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseOpaqueZBufferPass=function(t){e.traverseOpaquePass(t)},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children.forEach((function(e){e.traverse(n)})),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.children.forEach((function(e){e.traverse(n)})),e.apply(n,!1))},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.opaqueZBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaquePass=function(n,Q){n&&(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!0))},e.translucentPass=function(n,Q){n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1)):t.context.depthMask(!0)},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(Object(S.d)(t.keyMatrices.mcwc,t.renderable.getMatrix()),Object(S.i)(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.keyMatrixTime.modified()),t.keyMatrices}}var $U={context:null,keyMatrixTime:null,keyMatrices:null};function eF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$U,n),oa.extend(e,t,n),t.keyMatrixTime={},a.c.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={mcwc:Object(S.h)(new Float64Array(16))},a.c.setGet(e,t,["context"]),qU(e,t)}var tF={newInstance:a.c.newInstance(eF,"vtkOpenGLImageSlice"),extend:eF},nF=a.c.vtkDebugMacro;function QF(e,t){t.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),e.opaquePass=function(n,Q){t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent();var B=t.openGLRenderer.getAspectRatio(),a=t.openGLRenderer?t.openGLRenderer.getRenderable().getActiveCamera():null,s=t.openGLRenderer.getTiledSizeAndOrigin(),r=null;if(t.renderable.getUseZValues()){var U=Q.getZBufferTexture(),F=Math.floor(U.getWidth()),l=Math.floor(U.getHeight()),o=t.openGLRenderWindow.getContext();U.bind();var g=Q.getFramebuffer();g?g.saveCurrentBindingsAndBuffers():nF("No framebuffer to save/restore");var i=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,i),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,U.getHandle(),0),o.checkFramebufferStatus(o.FRAMEBUFFER)===o.FRAMEBUFFER_COMPLETE&&(r=new Uint8Array(F*l*4),o.viewport(0,0,F,l),o.readPixels(0,0,F,l,o.RGBA,o.UNSIGNED_BYTE,r)),g&&g.restorePreviousBindingsAndBuffers(),o.deleteFramebuffer(i)}t.renderable.invokeCallback(t.renderable.getInputData(),a,B,s,r)},e.queryPass=function(e,n){e&&t.renderable.getUseZValues()&&n.requestDepth()}}var BF={};function aF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,BF,n),oa.extend(e,t,n),QF(e,t)}var sF={newInstance:a.c.newInstance(aF,"vtkOpenGLPixelSpaceCallbackMapper"),extend:aF},rF=a.c.vtkDebugMacro;function UF(e,t){t.classHierarchy.push("vtkOpenGLRenderer"),e.buildPass=function(n){if(n){if(!t.renderable)return;t.renderable.isActiveCameraCreated()||t.renderable.resetCamera(),e.updateLights(),e.prepareNodes(),e.addMissingNode(t.renderable.getActiveCamera()),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps()),e.removeUnusedNodes()}},e.updateLights=function(){for(var e=0,n=t.renderable.getLightsByReference(),Q=0;Q<n.length;++Q)n[Q].getSwitch()>0&&e++;return e||(rF("No lights are on, creating one."),t.renderable.createLight()),e},e.opaqueZBufferPass=function(n){if(n){var Q=0,B=t.context;t.renderable.getTransparent()||(t.context.clearColor(1,0,0,1),Q|=B.COLOR_BUFFER_BIT),t.renderable.getPreserveDepthBuffer()||(B.clearDepth(1),Q|=B.DEPTH_BUFFER_BIT,B.depthMask(!0));var a=e.getTiledSizeAndOrigin();B.enable(B.SCISSOR_TEST),B.scissor(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),B.viewport(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),B.colorMask(!0,!0,!0,!0),B.clear(Q),B.enable(B.DEPTH_TEST)}},e.cameraPass=function(t){t&&e.clear()},e.getAspectRatio=function(){var e=t.parent.getSizeByReference(),n=t.renderable.getViewportByReference();return e[0]*(n[2]-n[0])/((n[3]-n[1])*e[1])},e.getTiledSizeAndOrigin=function(){var e=t.renderable.getViewportByReference(),n=[0,0,1,1],Q=Object(u.a)(e[0]-n[0],0,1),B=Object(u.a)(e[1]-n[1],0,1),a=t.parent.normalizedDisplayToDisplay(Q,B),s=Math.round(a[0]),r=Math.round(a[1]),U=Object(u.a)(e[2]-n[0],0,1),F=Object(u.a)(e[3]-n[1],0,1);U>n[2]-n[0]&&(U=n[2]-n[0]),F>n[3]-n[1]&&(F=n[3]-n[1]);var l=t.parent.normalizedDisplayToDisplay(U,F),o=Math.round(l[0])-s,g=Math.round(l[1])-r;return o<0&&(o=0),g<0&&(g=0),{usize:o,vsize:g,lowerLeftU:s,lowerLeftV:r}},e.clear=function(){var n=0,Q=t.context;if(!t.renderable.getTransparent()){var B=t.renderable.getBackgroundByReference();t.context.clearColor(B[0],B[1],B[2],B[3]),n|=Q.COLOR_BUFFER_BIT}t.renderable.getPreserveDepthBuffer()||(Q.clearDepth(1),n|=Q.DEPTH_BUFFER_BIT,Q.depthMask(!0)),Q.colorMask(!0,!0,!0,!0);var a=e.getTiledSizeAndOrigin();Q.enable(Q.SCISSOR_TEST),Q.scissor(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),Q.viewport(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),Q.clear(n),Q.enable(Q.DEPTH_TEST)},e.releaseGraphicsResources=function(){null!==t.selector&&t.selector.releaseGraphicsResources()},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))}}var FF={context:null,openGLRenderWindow:null,selector:null};function lF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,FF,n),oa.extend(e,t,n),a.c.get(e,t,["shaderCache"]),a.c.setGet(e,t,["selector"]),UF(e,t)}var oF={newInstance:a.c.newInstance(lF,"vtkOpenGLRenderer"),extend:lF},gF=a.c.vtkErrorMacro;function iF(e,t){t.classHierarchy.push("vtkOpenGLSkybox"),e.buildPass=function(n){if(n){t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t.openGLRenderWindow);var Q=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(Q.getActiveCamera())}},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;n.incrementOpaqueActorCount()}},e.opaquePass=function(n,Q){if(n&&!t.openGLRenderer.getSelector()){e.updateBufferObjects(),t.openGLRenderWindow.enableDepthMask(),t.openGLRenderWindow.getShaderCache().readyShaderProgram(t.tris.getProgram()),t.openGLTexture.render(t.openGLRenderWindow);var B=t.openGLTexture.getTextureUnit();t.tris.getProgram().setUniformi("sbtexture",B);var a=t.openGLRenderer.getRenderable(),s=t.openGLCamera.getKeyMatrices(a),r=new Float64Array(16);if(Object(S.g)(r,s.wcpc),t.tris.getProgram().setUniformMatrix("IMCPCMatrix",r),"box"===t.lastFormat){var U=a.getActiveCamera().getPosition();t.tris.getProgram().setUniform3f("camPos",U[0],U[1],U[2])}t.tris.getVAO().bind(),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.openGLTexture.deactivate()}},e.updateBufferObjects=function(){if(!t.tris.getCABO().getElementCount()){for(var e=new Float32Array(12),n=0;n<4;n++)e[3*n]=n%2*2-1,e[3*n+1]=n>1?1:-1,e[3*n+2]=1;var Q=s.a.newInstance({numberOfComponents:3,values:e});Q.setName("points");var B=new Uint16Array(8);B[0]=3,B[1]=0,B[2]=1,B[3]=3,B[4]=3,B[5]=0,B[6]=3,B[7]=2;var a=s.a.newInstance({numberOfComponents:1,values:B});t.tris.getCABO().createVBO(a,"polys",Fs.SURFACE,{points:Q,cellOffset:0})}t.renderable.getFormat()!==t.lastFormat&&(t.lastFormat=t.renderable.getFormat(),"box"===t.lastFormat&&t.tris.setProgram(t.openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec3 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = wpos.xyz/wpos.w;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec3 TexCoords;\n             uniform samplerCube sbtexture;\n             uniform vec3 camPos;\n             void main () {\n               // skybox looks from inside out\n               // which means we have to adjust\n               // our tcoords. Otherwise text would\n               // be flipped\n               vec3 tc = normalize(TexCoords - camPos);\n               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))\n               {\n                 tc = vec3(1.0, 1.0, -1.0) * tc;\n               }\n               else\n               {\n                 tc = vec3(-1.0, 1.0, 1.0) * tc;\n               }\n               gl_FragData[0] = textureCube(sbtexture, tc);\n             }","")),"background"===t.lastFormat&&t.tris.setProgram(t.openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec2 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec2 TexCoords;\n             uniform sampler2D sbtexture;\n             void main () {\n               gl_FragData[0] = texture2D(sbtexture, TexCoords);\n             }","")),t.tris.getShaderSourceTime().modified(),t.tris.getVAO().bind(),t.tris.getVAO().addAttributeArray(t.tris.getProgram(),t.tris.getCABO(),"vertexMC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||gF("Error setting vertexMC in shader VAO."));var r=t.renderable.getTextures();r.length||gF("vtkSkybox requires a texture map"),t.openGLTexture.getRenderable()!==r[0]&&(t.openGLTexture.releaseGraphicsResources(t.openGLRenderWindow),t.openGLTexture.setRenderable(r[0]))}}var cF={context:null};function dF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cF,n),oa.extend(e,t,n),t.openGLTexture=va.newInstance(),t.tris=_r.newInstance(),t.keyMatrixTime={},a.c.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:It(new Float64Array(9)),mcwc:Object(S.h)(new Float64Array(16))},a.c.setGet(e,t,["context"]),a.c.get(e,t,["activeTextures"]),iF(e,t)}var IF={newInstance:a.c.newInstance(dF),extend:dF};function uF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var CF=a.c.vtkErrorMacro;function mF(e,t){t.classHierarchy.push("vtkOpenGLSphereMapper");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uF(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.getShaderTemplate=function(e,t,n){e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkSphereMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Spheres\n\nattribute vec4 vertexMC;\nattribute vec2 offsetMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying vec3 centerVCVSOutput;\n\nuniform int cameraParallel;\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  // compute the projected vertex position\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = length(offsetMC)*0.5;\n\n  // make the triangle face the camera\n  if (cameraParallel == 0)\n    {\n    vec3 dir = normalize(-vertexVCVSOutput.xyz);\n    vec3 base2 = normalize(cross(dir,vec3(1.0,0.0,0.0)));\n    vec3 base1 = cross(base2,dir);\n    vertexVCVSOutput.xyz = vertexVCVSOutput.xyz + offsetMC.x*base1 + offsetMC.y*base2;\n    }\n  else\n    {\n    // add in the offset\n    vertexVCVSOutput.xy = vertexVCVSOutput.xy + offsetMC;\n    }\n\n  gl_Position = VCPCMatrix * vertexVCVSOutput;\n}\n",e.Fragment=$r,e.Geometry=""},e.replaceShaderValues=function(e,Q,B){var a=e.Vertex,s=e.Fragment;a=xr.substitute(a,"//VTK::Camera::Dec",["uniform mat4 VCPCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,s=xr.substitute(s,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,s=xr.substitute(s,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;\n"]).result,s=xr.substitute(s,"//VTK::Normal::Dec",["uniform float invertedDepth;\n","uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCPCMatrix;\n"]).result;var r="";t.context.getExtension("EXT_frag_depth")&&(r="gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),t.openGLRenderWindow.getWebgl2()&&(r="gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;\n"),s=xr.substitute(s,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float b = 2.0*dot(EyePos,EyeDir);\n","  float c = dot(EyePos,EyePos) - 1.0;\n","  float d = b*b - 4.0*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t = (-b - invertedDepth*sqrt(d))*0.5;\n","    normalVCVSOutput = invertedDepth*normalize(EyePos + t*EyeDir);\n","    vertexVC.xyz = normalVCVSOutput*radiusVCVSOutput + centerVCVSOutput;\n","    }\n","  vec4 pos = VCPCMatrix * vertexVC;\n",r]).result,s=xr.substitute(s,"//VTK::Normal::Impl","").result,t.haveSeenDepthRequest&&(s=xr.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=a,e.Fragment=s,n.replaceShaderValues(e,Q,B)},e.setMapperShaderParameters=function(e,Q,B){e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"offsetMC",12,e.getCABO().getStride(),t.context.FLOAT,2,!1)||CF("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isUniformUsed("invertedDepth")&&e.getProgram().setUniformf("invertedDepth",t.invert?-1:1),n.setMapperShaderParameters(e,Q,B)},e.setCameraShaderParameters=function(e,n,Q){var B=e.getProgram(),a=n.getActiveCamera(),s=t.openGLCamera.getKeyMatrices(n);if(B.isUniformUsed("VCPCMatrix")&&B.setUniformMatrix("VCPCMatrix",s.vcpc),B.isUniformUsed("MCVCMatrix"))if(Q.getIsIdentity())B.setUniformMatrix("MCVCMatrix",s.wcvc);else{var r=t.openGLActor.getKeyMatrices(),U=new Float64Array(16);Object(S.l)(U,s.wcvc,r.mcwc),B.setUniformMatrix("MCVCMatrix",U)}B.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",a.getParallelProjection())},e.getOpenGLMode=function(e,n){return t.context.TRIANGLES},e.buildBufferObjects=function(e,n){var Q=t.currentInput;if(null!==Q){t.renderable.mapScalars(Q,1);var B=t.renderable.getColorMapColors(),a=t.primitives[t.primTypes.Tris].getCABO(),s=Q.getPointData(),r=Q.getPoints(),U=r.getNumberOfPoints(),F=r.getData(),l=null;null!=t.renderable.getScaleArray()&&s.hasArray(t.renderable.getScaleArray())&&(l=s.getArray(t.renderable.getScaleArray()).getData());var o=null,g=0,i=null;B?(g=B.getNumberOfComponents(),a.setColorOffset(0),a.setColorBOStride(4),o=B.getData(),i=new Uint8Array(3*U*4),a.getColorBO()||a.setColorBO(Wr.newInstance()),a.getColorBO().setOpenGLRenderWindow(t.openGLRenderWindow)):a.getColorBO()&&a.setColorBO(null),a.setColorComponents(g);var c=new Float32Array(5*U*3);a.setStride(20);for(var d=Math.cos(Object(u.B)(30)),I=0,C=0,m=0,b=0,S=0;S<U;++S){var y=t.renderable.getRadius();l&&(y=l[S]),I=3*S,c[m++]=F[I++],c[m++]=F[I++],c[m++]=F[I++],c[m++]=-2*y*d,c[m++]=-y,o&&(C=S*g,i[b++]=o[C],i[b++]=o[C+1],i[b++]=o[C+2],i[b++]=o[C+3]),I=3*S,c[m++]=F[I++],c[m++]=F[I++],c[m++]=F[I++],c[m++]=2*y*d,c[m++]=-y,o&&(i[b++]=o[C],i[b++]=o[C+1],i[b++]=o[C+2],i[b++]=o[C+3]),I=3*S,c[m++]=F[I++],c[m++]=F[I++],c[m++]=F[I++],c[m++]=0,c[m++]=2*y,o&&(i[b++]=o[C],i[b++]=o[C+1],i[b++]=o[C+2],i[b++]=o[C+3])}a.setElementCount(m/5),a.upload(c,hr.ARRAY_BUFFER),B&&a.getColorBO().upload(i,hr.ARRAY_BUFFER),t.VBOBuildTime.modified()}}}var bF={};function SF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,bF,n),iU.extend(e,t,n),mF(e,t)}var yF={newInstance:a.c.newInstance(SF,"vtkOpenGLSphereMapper"),extend:SF};function ZF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var xF=a.m;function GF(e,t){t.classHierarchy.push("vtkOpenGLStickMapper");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZF(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.getShaderTemplate=function(e,t,n){e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkStickMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Sticks\n\nattribute vec4 vertexMC;\nattribute vec3 orientMC;\nattribute vec4 offsetMC;\nattribute float radiusMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n//VTK::Picking::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying float lengthVCVSOutput;\nvarying vec3 centerVCVSOutput;\nvarying vec3 orientVCVSOutput;\n\nuniform int cameraParallel;\n\nvoid main()\n{\n  //VTK::Picking::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = radiusMC;\n  lengthVCVSOutput = length(orientMC);\n  orientVCVSOutput = normalMatrix * normalize(orientMC);\n\n  // make sure it is pointing out of the screen\n  if (orientVCVSOutput.z < 0.0)\n    {\n    orientVCVSOutput = -orientVCVSOutput;\n    }\n\n  // make the basis\n  vec3 xbase;\n  vec3 ybase;\n  vec3 dir = vec3(0.0,0.0,1.0);\n  if (cameraParallel == 0)\n    {\n    dir = normalize(-vertexVCVSOutput.xyz);\n    }\n  if (abs(dot(dir,orientVCVSOutput)) == 1.0)\n    {\n    xbase = normalize(cross(vec3(0.0,1.0,0.0),orientVCVSOutput));\n    ybase = cross(xbase,orientVCVSOutput);\n    }\n  else\n    {\n    xbase = normalize(cross(orientVCVSOutput,dir));\n    ybase = cross(orientVCVSOutput,xbase);\n    }\n\n  vec3 offsets = offsetMC.xyz*2.0-1.0;\n  vertexVCVSOutput.xyz = vertexVCVSOutput.xyz +\n    radiusVCVSOutput*offsets.x*xbase +\n    radiusVCVSOutput*offsets.y*ybase +\n    0.5*lengthVCVSOutput*offsets.z*orientVCVSOutput;\n\n  gl_Position = VCPCMatrix * vertexVCVSOutput;\n}\n",e.Fragment=$r,e.Geometry=""},e.replaceShaderValues=function(e,Q,B){var a=e.Vertex,s=e.Fragment;a=xr.substitute(a,"//VTK::Camera::Dec",["uniform mat4 VCPCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,s=xr.substitute(s,"//VTK::PositionVC::Dec","varying vec4 vertexVCVSOutput;").result,s=xr.substitute(s,"//VTK::PositionVC::Impl","  vec4 vertexVC = vertexVCVSOutput;\n").result,s=xr.substitute(s,"//VTK::Normal::Dec",["uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 orientVCVSOutput;\n","varying float lengthVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCPCMatrix;\n"]).result;var r="";t.context.getExtension("EXT_frag_depth")&&(r="  gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),t.openGLRenderWindow.getWebgl2()&&(r="gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;\n"),s=xr.substitute(s,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  vec3 base1;\n","  if (abs(orientVCVSOutput.z) < 0.99) {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,0.0,1.0))); }\n","  else {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,1.0,0.0))); }\n","  vec3 base2 = cross(orientVCVSOutput,base1);\n","  EyePos = vec3(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,orientVCVSOutput));\n","  EyeDir = vec3(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,orientVCVSOutput));\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float a = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;\n","  float b = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);\n","  float c = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;\n","  float d = b*b - 4.0*a*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t =  (-b - sqrt(d))/(2.0*a);\n","    float tz = EyePos.z + t*EyeDir.z;\n","    vec3 iPoint = EyePos + t*EyeDir;\n","    if (abs(iPoint.z)*radiusVCVSOutput > lengthVCVSOutput*0.5) {\n","      float t2 = (-b + sqrt(d))/(2.0*a);\n","      float tz2 = EyePos.z + t2*EyeDir.z;\n","      if (tz2*radiusVCVSOutput > lengthVCVSOutput*0.5 || tz*radiusVCVSOutput < -0.5*lengthVCVSOutput) { discard; }\n","      else {\n","        normalVCVSOutput = orientVCVSOutput;\n","        float t3 = (lengthVCVSOutput*0.5/radiusVCVSOutput - EyePos.z)/EyeDir.z;\n","        iPoint = EyePos + t3*EyeDir;\n","        vertexVC.xyz = radiusVCVSOutput*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","        }\n","      }\n","    else {\n","      normalVCVSOutput = iPoint.x*base1 + iPoint.y*base2;\n","      vertexVC.xyz = radiusVCVSOutput*(normalVCVSOutput + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","      }\n","    }\n","  vec4 pos = VCPCMatrix * vertexVC;\n",r]).result,s=xr.substitute(s,"//VTK::Normal::Impl","").result,t.haveSeenDepthRequest&&(s=xr.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=a,e.Fragment=s,n.replaceShaderValues(e,Q,B)},e.setMapperShaderParameters=function(e,Q,B){e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(e.getProgram().isAttributeUsed("orientMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"orientMC",12,e.getCABO().getStride(),t.context.FLOAT,3,!1)||xF("Error setting 'orientMC' in shader VAO.")),e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO().getColorBO(),"offsetMC",0,e.getCABO().getColorBOStride(),t.context.UNSIGNED_BYTE,3,!0)||xF("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isAttributeUsed("radiusMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"radiusMC",24,e.getCABO().getStride(),t.context.FLOAT,1,!1)||xF("Error setting 'radiusMC' in shader VAO."))),n.setMapperShaderParameters(e,Q,B)},e.setCameraShaderParameters=function(e,n,Q){var B=e.getProgram(),a=n.getActiveCamera(),s=t.openGLCamera.getKeyMatrices(n);if(B.isUniformUsed("VCPCMatrix")&&B.setUniformMatrix("VCPCMatrix",s.vcpc),Q.getIsIdentity())B.isUniformUsed("MCVCMatrix")&&B.setUniformMatrix("MCVCMatrix",s.wcvc),B.isUniformUsed("normalMatrix")&&B.setUniformMatrix3x3("normalMatrix",s.normalMatrix);else{var r=t.openGLActor.getKeyMatrices();if(B.isUniformUsed("MCVCMatrix")){var U=new Float64Array(16);Object(S.l)(U,s.wcvc,r.mcwc),B.setUniformMatrix("MCVCMatrix",U)}if(B.isUniformUsed("normalMatrix")){var F=new Float64Array(9);mt(F,s.normalMatrix,r.normalMatrix),B.setUniformMatrix3x3("normalMatrix",F)}}B.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",a.getParallelProjection())},e.getOpenGLMode=function(e,n){return t.context.TRIANGLES},e.buildBufferObjects=function(e,n){var Q=t.currentInput;if(null!==Q){t.renderable.mapScalars(Q,1);var B=t.renderable.getColorMapColors(),a=t.primitives[t.primTypes.Tris].getCABO(),s=Q.getPointData(),r=Q.getPoints(),U=r.getNumberOfPoints(),F=r.getData(),l=null,o=0;a.setColorBOStride(4),a.getColorBO()||a.setColorBO(Wr.newInstance()),a.getColorBO().setOpenGLRenderWindow(t.openGLRenderWindow),B&&(o=B.getNumberOfComponents(),a.setColorOffset(4),l=B.getData(),a.setColorBOStride(8)),a.setColorComponents(o),a.setStride(28);var g=new Float32Array(7*U*12),i=new Uint8Array(12*U*(l?8:4)),c=null,d=null;null!=t.renderable.getScaleArray()&&s.hasArray(t.renderable.getScaleArray())&&(c=s.getArray(t.renderable.getScaleArray()).getData()),null!=t.renderable.getOrientationArray()&&s.hasArray(t.renderable.getOrientationArray())?d=s.getArray(t.renderable.getOrientationArray()).getData():xF(["Error setting orientationArray.\n","You have to specify the stick orientation"]);for(var I=[0,1,3,0,3,2,2,3,5,2,5,4],u=0,C=0,m=0,b=0,S=0;S<U;++S){var y=t.renderable.getLength(),Z=t.renderable.getRadius();c&&(y=c[2*S],Z=c[2*S+1]);for(var x=0;x<I.length;++x)u=3*S,g[m++]=F[u++],g[m++]=F[u++],g[m++]=F[u++],u=3*S,g[m++]=d[u++]*y,g[m++]=d[u++]*y,g[m++]=d[u++]*y,g[m++]=Z,i[b++]=I[x]%2*255,i[b++]=I[x]>=4?255:0,i[b++]=I[x]>=2?255:0,i[b++]=255,C=S*o,l&&(i[b++]=l[C],i[b++]=l[C+1],i[b++]=l[C+2],i[b++]=l[C+3])}a.setElementCount(m/7),a.upload(g,hr.ARRAY_BUFFER),a.getColorBO().upload(i,hr.ARRAY_BUFFER),t.VBOBuildTime.modified()}}}var VF={};function RF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,VF,n),iU.extend(e,t,n),GF(e,t)}var LF={newInstance:Object(a.g)(RF,"vtkOpenGLStickMapper"),extend:RF},pF=1,hF=2,NF=3,DF=0,AF=1;function EF(e,t){t.classHierarchy.push("vtkSurfaceLICInterface")}var fF={enableLIC:!1,nuberOfSteps:40,stepSize:.25,transformVectors:!0,normalizeVectors:!0,maskOnSurface:!1,maskThreshold:0,maskColor:[0,0,0],maskIntensity:0,enhancedLIC:!0,enhanceContrast:0,lowLICContrastEnhancementFactor:0,highLICContrastEnhancementFactor:0,lowColorContrastEnhancementFactor:0,highColorContrastEnhancementFactor:0,antiAlias:0,colorMode:0,LICIntensity:1,mapModeBias:0,noiseTextureSize:200,noiseTextureType:AF,noiseGrainSize:8,noiseImpulseProbability:.1,noiseImpulseBackgroundValue:0,noiseGeneratorSeed:0,minNoiseValue:0,maxNoiseValue:1,numberOfNoiseLevels:2,shadersNeedBuilding:!0,reallocateTextures:!0,rebuildNoiseTexture:!1,viewPortScale:1};function JF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fF,n),a.c.obj(e,t),a.c.setGet(e,t,["enableLIC","numberOfSteps","stepSize","normalizeVectors","transformVectors","maskOnSurface","maskThreshold","maskColor","maskIntensity","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor","antiAlias","colorMode","LICIntensity","mapModeBias","noiseTextureSize","noiseTextureType","noiseGrainSize","minNoiseValue","maxNoiseValue","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","noiseGeneratorSeed","viewPortScale","rebuildNoiseTexture"]),EF(0,t)}var vF={newInstance:a.c.newInstance(JF,"vtkSurfaceLICInterface"),extend:JF},WF=n(41),XF="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtktextureObjectVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexDC;\nattribute vec2 tcoordDC;\nvarying vec2 tcoordVC;\n\nvoid main()\n{\n  tcoordVC = tcoordDC;\n  gl_Position = vertexDC;\n}\n",HF=Cs.Representation;function kF(e,t,n,Q){var B=Object(Ue.a)(t,2),a=B[0],s=B[1],r=e.getContext(),U=va.newInstance({autoParameters:!1,wrapS:Q,wrapT:Q,minificationFilter:n,magnificationFilter:n,generateMipmap:!1,openGLDataType:r.FLOAT,baseLevel:0,maxLevel:0});return U.setOpenGLRenderWindow(e),U.setInternalFormat(r.RGBA32F),U.create2DFromRaw(a,s,4,"Float32Array",null),U.activate(),U.sendParameters(),U.deactivate(),U}function TF(e,t){return kF(e,t,va.Filter.NEAREST,va.Wrap.CLAMP_TO_EDGE)}function MF(e,t){t.classHierarchy.push("vtkLICPingPongBufferManager"),t.openGLRenderWindow?(t.quad=function(e){var t=_r.newInstance();t.setOpenGLRenderWindow(e);for(var n=new Float32Array(12),Q=0;Q<4;Q++)n[3*Q]=Q%2*2-1,n[3*Q+1]=Q>1?1:-1,n[3*Q+2]=0;var B=new Float32Array([0,0,1,0,0,1,1,1]),a=new Uint16Array(8);a[0]=3,a[1]=0,a[2]=1,a[3]=3,a[4]=3,a[5]=0,a[6]=3,a[7]=2;var r=s.a.newInstance({numberOfComponents:3,values:n});r.setName("points");var U=s.a.newInstance({numberOfComponents:1,values:a}),F=s.a.newInstance({numberOfComponents:2,values:B});return t.getCABO().createVBO(U,"polys",HF.SURFACE,{points:r,cellOffset:0,tcoords:F}),t}(t.openGLRenderWindow),t.context=t.openGLRenderWindow.getContext(),t.licTexture0=TF(t.openGLRenderWindow,t.size),t.seedTexture0=TF(t.openGLRenderWindow,t.size),t.licTexture1=TF(t.openGLRenderWindow,t.size),t.seedTexture1=TF(t.openGLRenderWindow,t.size),t.eeTexture=t.doEEPass?kF(t.openGLRenderWindow,t.size,va.Filter.NEAREST,va.Wrap.CLAMP_TO_EDGE):null,t.imageVectorTexture=t.doVTPass?function(e,t){return kF(e,t,va.Filter.LINEAR,va.Wrap.CLAMP_TO_EDGE)}(t.openGLRenderWindow,t.size):null,t.pingTextures[0]=t.licTexture0,t.pingTextures[1]=t.seedTexture0,t.pongTextures[0]=t.licTexture1,t.pongTextures[1]=t.seedTexture1,t.textures[0]=t.pingTextures,t.textures[1]=t.pongTextures,e.swap=function(){t.readIndex=1-t.readIndex},e.renderQuad=function(e,n){var Q=t.quad,B=t.context,a=t.quadVAO;a||((a=zr.newInstance()).setOpenGLRenderWindow(t.openGLRenderWindow),t.quadVAO=a),t.previousProgramHash!==n.getMd5Hash()&&(a.shaderProgramChanged(),Q.getCABO().bind(),a.addAttributeArray(n,Q.getCABO(),"vertexDC",Q.getCABO().getVertexOffset(),Q.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE),a.addAttributeArray(n,Q.getCABO(),"tcoordDC",Q.getCABO().getTCoordOffset(),Q.getCABO().getStride(),t.context.FLOAT,2,t.context.FALSE),t.previousProgramHash=n.getMd5Hash()),B.drawArrays(B.TRIANGLES,0,Q.getCABO().getElementCount()),a.release()},e.getLastLICBuffer=function(){return 0===t.readIndex?t.licTexture0:t.licTexture1},e.getLastSeedBuffer=function(){return 0===t.readIndex?t.seedTexture0:t.seedTexture1},e.getLICBuffer=function(){return 1-t.readIndex==0?t.licTexture0:t.licTexture1},e.getSeedBuffer=function(){return 1-t.readIndex==0?t.seedTexture0:t.seedTexture1},e.getLICTextureUnit=function(){var e=t.textures[t.readIndex][0];return e.activate(),e.getTextureUnit()},e.getSeedTextureUnit=function(){var e=t.textures[t.readIndex][1];return e.activate(),e.getTextureUnit()},e.getNoiseTextureUnit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e?(t.noiseTexture.activate(),t.noiseTexture.getTextureUnit()):(t.eeTexture.activate(),t.eeTexture.getTextureUnit())},e.getVectorTextureUnit=function(){return t.vectorTexture.activate(),t.vectorTexture.getTextureUnit()},e.getImageVectorTextureUnit=function(){return t.imageVectorTexture?(t.imageVectorTexture.activate(),t.imageVectorTexture.getTextureUnit()):e.getVectorTextureUnit()},e.getMaskVectorTextureUnit=function(){return t.maskVectorTexture?(t.maskVectorTexture.activate(),t.maskVectorTexture.getTextureUnit()):e.getImageVectorTextureUnit()},e.clearBuffers=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.framebuffer,Q=t.context;n.removeColorBuffer(0),n.removeColorBuffer(1),n.removeColorBuffer(2),n.removeColorBuffer(3),n.setColorBuffer(t.licTexture0,0),n.setColorBuffer(t.seedTexture0,1),n.setColorBuffer(t.licTexture1,2),n.setColorBuffer(t.seedTexture1,3);var B=[Q.COLOR_ATTACHMENT0,Q.COLOR_ATTACHMENT1,Q.COLOR_ATTACHMENT2,Q.COLOR_ATTACHMENT3];e&&(n.removeColorBuffer(4),n.setColorBuffer(t.eeTexture,4),B.push(Q.COLOR_ATTACHMENT4)),Q.drawBuffers(B),Q.clearColor(0,1,0,0),Q.disable(Q.SCISSOR_TEST),Q.disable(Q.BLEND),Q.clear(Q.COLOR_BUFFER_BIT),n.removeColorBuffer(0),n.removeColorBuffer(1),n.removeColorBuffer(2),n.removeColorBuffer(3),e&&n.removeColorBuffer(4),Q.drawBuffers([Q.NONE])},e.clearBuffer=function(e){var n=t.framebuffer,Q=t.context;n.removeColorBuffer(0),n.setColorBuffer(e,0),Q.drawBuffers([Q.COLOR_ATTACHMENT0]),Q.clearColor(0,1,0,0),Q.disable(Q.SCISSOR_TEST),Q.disable(Q.BLEND),Q.clear(Q.COLOR_BUFFER_BIT),n.removeColorBuffer(e,0),Q.drawBuffers([Q.NONE])},e.activateVectorTextures=function(){t.imageVectorTexture?t.imageVectorTexture.activate():t.vectorTexture.activate(),t.maskVectorTexture&&t.maskVectorTexture.activate()},e.deactivateVectorTextures=function(){t.imageVectorTexture?t.imageVectorTexture.deactivate():t.vectorTexture.deactivate(),t.maskVectorTexture&&t.maskVectorTexture.deactivate()},e.activateNoiseTexture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case 0:t.noiseTexture.activate();break;case 1:t.eeTexture.activate();break;default:console.error("Wrong LIC pass number")}},e.deactivateNoiseTexture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case 0:t.noiseTexture.deactivate();break;case 1:t.eeTexture.deactivate();break;default:console.error("Wrong LIC pass number")}},e.attachLICBuffers=function(){var e=t.textures[t.readIndex],n=t.textures[1-t.readIndex],Q=t.framebuffer,B=t.context;e[0].activate(),e[1].activate(),Q.removeColorBuffer(0),Q.removeColorBuffer(1),Q.setColorBuffer(n[0],0),Q.setColorBuffer(n[1],1),B.drawBuffers([B.COLOR_ATTACHMENT0,B.COLOR_ATTACHMENT1])},e.detachLICBuffers=function(){var e=t.textures[t.readIndex],n=t.context,Q=t.framebuffer;e[0].deactivate(),e[1].deactivate(),Q.removeColorBuffer(0),Q.removeColorBuffer(1),n.drawBuffers([n.NONE])},e.attachImageVectorBuffer=function(){var e=t.framebuffer,n=t.context;t.vectorTexture.activate(),e.removeColorBuffer(0),e.setColorBuffer(t.imageVectorTexture,0),n.drawBuffers([n.COLOR_ATTACHMENT0])},e.detachImageVectorBuffer=function(){var e=t.context,n=t.framebuffer;t.vectorTexture.deactivate(),n.removeColorBuffer(0),e.drawBuffers([e.NONE])},e.attachEEBuffer=function(){t.textures[t.readIndex][0].activate(),t.framebuffer.removeColorBuffer(0),t.framebuffer.setColorBuffer(t.eeTexture,0);var e=t.context;e.drawBuffers([e.COLOR_ATTACHMENT0])},e.detachEEBuffer=function(){var e=t.context;t.framebuffer.removeColorBuffer(0),e.drawBuffers([e.NONE]),t.textures[t.readIndex][0].deactivate()},e.detachBuffers=function(){var e=t.context,n=t.framebuffer;n.removeColorBuffer(0),n.removeColorBuffer(1),e.drawBuffers([e.NONE]);var Q=t.textures[t.readIndex],B=t.textures[1-t.readIndex];Q[0]&&Q[0].deactivate(),Q[1]&&Q[1].deactivate(),B[0]&&B[0].deactivate(),B[1]&&B[1].deactivate(),t.eeTexture&&t.eeTexture.deactivate(),t.noiseTexture&&t.noiseTexture.deactivate()},e.getWriteIndex=function(){return 1-t.readIndex},e.detachBuffers()):console.error("Pass renderwindow to ping pong manager")}var YF={openGLRenderWindow:null,vectorTexture:null,maskVectorTexture:null,noiseTexture:null,doEEPass:!1,doVTPass:!1,readIndex:0,quad:null,lastProgramHash:null,framebuffer:null,size:null,pingTextures:[],pongTextures:[],textures:[]};function wF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,YF,n),a.c.obj(e,t),a.c.get(e,t,["readIndex"]),a.c.setGet(e,t,["doEEPass","doVTPass","openGLRenderWindow","vectorTexture","maskVectorTexture","noiseTexture","framebuffer","size"]),MF(e,t)}var OF={newInstance:a.c.newInstance(wF,"vtkLICPingPongBufferManager"),extend:wF};function zF(e,t){function n(e,t){e.setUniformi("texLIC",t.getLICTextureUnit()),e.setUniformi("texSeedPts",t.getSeedTextureUnit())}function Q(e,t,n){e.attachLICBuffers(),e.renderQuad(t,n),e.detachLICBuffers(),e.swap()}t.classHierarchy.push("vtkLineIntegralConvolution2D"),e.buildAShader=function(e){return t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(XF,e,"")},e.dumpTextureValues=function(e,n){var Q=Object(Ue.a)(n,2),B=Q[0],a=Q[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.context,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.openGLRenderWindow,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,F=ka.newInstance(),l=s,o=null;return F.setOpenGLRenderWindow(r),F.saveCurrentBindingsAndBuffers(),F.create(B,a),F.populateFramebuffer(),F.setColorBuffer(e),o=new Float32Array(B*a*U),l.readPixels(0,0,B,a,4===U?l.RGBA:l.RGB,l.FLOAT,o),F.restorePreviousBindingsAndBuffers(),o},e.getTextureMinMax=function(n,Q){for(var B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.context,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.openGLRenderWindow,s=e.dumpTextureValues(n,Q,B,a,4),r=Number.MAX_VALUE,U=Number.MIN_VALUE,F=0;F<s.length;F+=4)if(0===s[F+1]){var l=s[F];l<r&&(r=l),l>U&&(U=l)}return{min:r,max:U}},e.getComponentSelectionProgram=function(e){var t="xyzw";return".".concat(t[e[0]]).concat(t[e[1]])},e.buildShaders=function(){t.LIC0ShaderProgram=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_LIC0.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n/**\nThis shader initializes the convolution for the LIC computation.\n*/\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\nuniform sampler2D texMaskVectors;\nuniform sampler2D texNoise;\nuniform sampler2D texLIC;\n\nuniform int   uStepNo;         // in step 0 initialize lic and seeds, else just seeds\nuniform int   uPassNo;         // in pass 1 hpf of pass 0 is convolved.\nuniform float uMaskThreshold;  // if |V| < uMaskThreshold render transparent\nuniform vec2  uNoiseBoundsPt1; // tc of upper right pt of noise texture\n\nin vec2 tcoordVC;\n\n// convert from vector coordinate space to noise coordinate space.\n// the noise texture is tiled across the *whole* domain\nvec2 VectorTCToNoiseTC(vec2 vectc)\n{\n  return vectc/uNoiseBoundsPt1;\n}\n\n// get the texture coordidnate to lookup noise value. this\n// depends on the pass number.\nvec2 getNoiseTC(vec2 vectc)\n{\n  // in pass 1 : convert from vector tc to noise tc\n  // in pass 2 : use vector tc\n  if (uPassNo == 0)\n    {\n    return VectorTCToNoiseTC(vectc);\n    }\n  else\n    {\n    return vectc;\n    }\n}\n\n// look up noise value at the given location. The location\n// is supplied in vector texture coordinates, hence the\n// need to convert to noise texture coordinates.\nfloat getNoise(vec2 vectc)\n{\n  return texture2D(texNoise, getNoiseTC(vectc)).r;\n}\n\nvoid main(void)\n{\n  vec2 vectc = tcoordVC.st;\n\n  // lic => (convolution, mask, 0, step count)\n  if (uStepNo == 0)\n    {\n    float maskCriteria = length(texture2D(texMaskVectors, vectc).xyz);\n    float maskFlag;\n    if (maskCriteria <= uMaskThreshold)\n      {\n      maskFlag = 1.0;\n      }\n    else\n      {\n      maskFlag = 0.0;\n      }\n    float noise = getNoise(vectc);\n    LICOutput = vec4(noise, maskFlag, 0.0, 1.0);\n    }\n  else\n    {\n    LICOutput = texture2D(texLIC, vectc);\n    }\n\n  // initial seed\n  SeedOutput = vec4(vectc, 0.0, 1.0);\n}\n");var n=xr.substitute("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_VT.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// move vector field to normalized image space\n// pre-processing for vtkLineIntegralConvolution2D\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Fragment shader used by the gaussian blur filter render pass.\n\nuniform sampler2D texVectors; // input texture\nuniform vec2      uTexSize;   // size of texture\n\nin vec2 tcoordVC;\n\nvoid main(void)\n{\n  //VTK::LICComponentSelection::Impl\n  V = V/uTexSize;\n  gl_FragData[0] = vec4(V, 0.0, 1.0);\n}\n","//VTK::LICComponentSelection::Impl","vec2 V = texture2D(texVectors, tcoordVC.st)".concat(e.getComponentSelectionProgram(t.componentIds),";")).result;t.VTProgram=e.buildAShader(n);var Q=xr.substitute("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_fs1.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\nuniform sampler2D  texVectors;\nuniform sampler2D  texNoise;\nuniform sampler2D  texLIC;\nuniform sampler2D  texSeedPts;\n\nuniform int   uPassNo;          // in pass 1 hpf of pass 0 is convolved.\nuniform float uStepSize;        // step size in parametric space\n\nuniform vec2  uNoiseBoundsPt1;  // tc of upper right pt of noise texture\n\nin vec2 tcoordVC;\n\n//VTK::LICVectorLookup::Impl\n\n// We need to do this manually since CLAMP_TO_BORDER and and borderColor\n// are very poorly supported in webgl\nvec2 clampToBorder(vec2 uv){\n  if(uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0)\n  {\n    return vec2(0.0, 0.0);\n  }\n  return getVector(uv);\n}\n\n// convert from vector coordinate space to noise coordinate space.\n// the noise texture is tiled across the whole domain\nvec2 VectorTCToNoiseTC(vec2 vectc)\n{\n  return vectc/uNoiseBoundsPt1;\n}\n\n// get the texture coordidnate to lookup noise value.\n// in pass 1 repeatedly tile the noise texture across\n// the computational domain.\nvec2 getNoiseTC(vec2 tc)\n{\n  if (uPassNo == 0)\n    {\n    return VectorTCToNoiseTC(tc);\n    }\n  else\n    {\n    return tc;\n    }\n}\n\n// look up noise value at the given location. The location\n// is supplied in vector texture coordinates, hence the need\n// to convert to either noise or lic texture coordinates in\n// pass 1 and 2 respectively.\nfloat getNoise(vec2 vectc)\n{\n  return texture2D(texNoise, getNoiseTC(vectc)).r;\n}\n\n// fourth-order Runge-Kutta streamline integration\n// no bounds checks are made, therefore it's essential\n// to have the entire texture initialized to 0\n// and set clamp to border and have border color 0\n// an integer is set if the step was taken, keeping\n// an accurate step count is necessary to prevent\n// boundary artifacts. Don't count the step if\n// all vector lookups are identically 0. This is\n// a proxy for \"stepped outside valid domain\"\nvec2 rk4(vec2 pt0, float dt, out bool count)\n{\n  count=true;\n  float dtHalf = dt * 0.5;\n  vec2 pt1;\n\n  vec2 v0 = clampToBorder(pt0);\n  pt1 = pt0 + v0 * dtHalf;\n\n  vec2 v1 = clampToBorder(pt1);\n  pt1 = pt0 + v1 * dtHalf;\n\n  vec2 v2 = clampToBorder(pt1);\n  pt1 = pt0 + v2 * dt;\n\n  vec2 v3 = clampToBorder(pt1);\n  vec2 vSum = v0 + v1 + v1 + v2 + v2 + v3;\n\n  if (vSum == vec2(0.0, 0.0))\n    {\n      count = false;\n    }\n\n  pt1 = pt0 + (vSum) * (dt * (1.0/6.0));\n\n return pt1;\n}\n\nvoid main(void)\n{\n  vec2 lictc = tcoordVC.st;\n  vec4 lic = texture2D(texLIC, lictc);\n  vec2 pt0 = texture2D(texSeedPts, lictc).st;\n\n  bool count;\n  vec2 pt1 = rk4(pt0, uStepSize, count);\n\n  if (count)\n    {\n    // accumulate lic step\n    // (lic, mask, 0, step count)\n    float noise = getNoise(pt1);\n    LICOutput = vec4(lic.r + noise, lic.g, 0.0, lic.a + 1.0);\n    SeedOutput = vec4(pt1, 0.0, 1.0);\n    }\n  else\n    {\n    // keep existing values\n    LICOutput = lic;\n    SeedOutput = vec4(pt0, 0.0, 1.0);\n    }\n}\n","//VTK::LICVectorLookup::Impl",function(){var e="\n    vec2 getVector( vec2 vectc )\n\n      {\n\n      vec2 V = texture2D( texVectors, vectc ).xy;\n\n      // normalize if |V| not 0\n\n      float lenV = length( V );\n\n      if ( lenV > 1.0e-8 )\n\n        {\n\n        return V/lenV;\n\n        }\n\n      else\n\n        {\n\n        return vec2( 0.0, 0.0 );\n\n        }\n\n      }\n\n    ",t="\n    vec2 getVector( vec2 vectc )\n\n      {\n\n      return texture2D( texVectors, vectc ).xy;\n\n      }\n\n    ";return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?t:e}(t.normalizeVectors),!0).result;t.LICIShaderProgram=e.buildAShader(Q),t.LICNShaderProgram=e.buildAShader(" //VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_LICN.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\n/**\nThis shader finalizes the convolution for the LIC computation\napplying the normalization. eg. if box kernel is used the this\nis the number of steps taken.\n*/\n\nuniform sampler2D texLIC;\n\nin vec2 tcoordVC;\n\nvoid main(void)\n{\n  vec4 conv = texture2D(texLIC, tcoordVC.st);\n  conv.r = conv.r/conv.a;\n  // lic => (convolution, mask, 0, 1)\n  LICOutput = vec4(conv.rg , 0.0, 1.0);\n  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);\n}\n"),t.CEProgram=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_CE.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// gray scale contrast enhance stage implemented via histogram stretching\n// if the min and max are tweaked it can generate out-of-range values\n// these will be clamped in 0 to 1\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\n\nuniform sampler2D texLIC;  // most recent lic pass\nuniform float uMin;        // min gray scale color value\nuniform float uMaxMinDiff; // max-min\n\nin vec2 tcoordVC;\n\nvoid main( void )\n{\n  vec4 lic = texture2D(texLIC, tcoordVC.st);\n  if (lic.g!=0.0)\n    {\n    LICOutput = lic;\n    }\n  else\n    {\n    float CElic = clamp((lic.r - uMin)/uMaxMinDiff, 0.0, 1.0);\n    LICOutput = vec4(CElic, lic.gb, 1.0);\n    }\n    SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);\n}\n"),t.EEProgram=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_fs2.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// high-pass filter stage employed by vtkLineIntegralConvolution2D\n// between LIC pass 1 and LIC pass 2. filtered LIC pass 1, becomes\n// noise for pass2.\n\n// the output of this shader\nlayout(location = 0) out vec4 EEOutput;\n\nuniform sampler2D texLIC; // most recent lic pass\nuniform float     uDx;    // fragment size\nuniform float     uDy;    // fragment size\n\nin vec2 tcoordVC;\n\n// kernel for simple laplace edge enhancement.\n// p=Laplace(p)+p\nfloat K[9] = float[9](\n  -1.0, -1.0, -1.0,\n  -1.0,  9.0, -1.0,\n  -1.0, -1.0, -1.0\n  );\n\n// determine if the fragment was masked\nbool Masked(float val) { return val != 0.0; }\n\nvoid main(void)\n{\n  // tex coord neighbor offsets\n  vec2 fragDx[9] = vec2[9](\n    vec2(-uDx, uDy), vec2(0.0, uDy), vec2(uDx, uDy),\n    vec2(-uDx, 0.0), vec2(0.0, 0.0), vec2(uDx, 0.0),\n    vec2(-uDx,-uDy), vec2(0.0,-uDy), vec2(uDx,-uDy)\n    );\n\n  vec2 lictc = tcoordVC.st;\n\n  // compute the convolution but don't use convovled values if\n  // any masked fragments on the stencil. Fragments outside\n  // the valid domain are masked during initialization, and\n  // texture wrap parameters are clamp to border with border\n  // color that contains masked flag\n  float conv = 0.0;\n  bool dontUse = false;\n  for (int i=0; i<9; ++i)\n    {\n    vec2 tc = lictc + fragDx[i];\n    vec4 lic = texture2D(texLIC, tc);\n    dontUse = dontUse || Masked(lic.g);\n    conv = conv + K[i] * lic.r;\n    }\n\n  if (dontUse)\n    {\n    EEOutput = vec4(texture2D(texLIC, lictc).rg, 0.0, 1.0);\n    }\n  else\n    {\n    conv = clamp(conv, 0.0, 1.0);\n    EEOutput = vec4(conv,texture2D(texLIC, lictc).g, 0.0, 1.0);\n    }\n\n}\n"),t.AAHProgram=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_AAH.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// Anti-alias stage in vtkLineIntegralConvolution2D\n// horizontal pass of a Gaussian convolution\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\nuniform sampler2D texLIC; // input texture\nuniform float     uDx;    // fragment size\n\nin vec2 tcoordVC;\n\n// factored 3x3 Gaussian kernel\n// K^T*K = G\nfloat K[3] = float[3](0.141421356, 0.707106781, 0.141421356);\n\n// determine if the fragment was masked\nbool Masked(float val){ return val != 0.0; }\n\nvoid main(void)\n{\n// neighbor offsets\nvec2 fragDx[3] = vec2[3](vec2(-uDx,0.0), vec2(0.0,0.0), vec2(uDx,0.0));\n\n  vec2 lictc = tcoordVC.st;\n  vec4 lic[3];\n  bool dontUse = false;\n  float conv = 0.0;\n  for (int i=0; i<3; ++i)\n    {\n    vec2 tc = lictc + fragDx[i];\n    lic[i] = texture2D(texLIC, tc);\n    dontUse = dontUse || Masked(lic[i].g);\n    conv = conv + K[i] * lic[i].r;\n    }\n  // output is (conv, mask, skip, 1)\n  if (dontUse)\n    {\n    LICOutput = vec4(lic[1].rg, 1.0, 1.0);\n    }\n  else\n    {\n    LICOutput = vec4(conv, lic[1].gb, 1.0);\n    }\n  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);\n}\n"),t.AAVProgram=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_AAV.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// Anti-alias stage in vtkLineIntegralConvolution2D\n// vertical pass of a Gaussian convolution\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\nuniform sampler2D texLIC; // input texture\nuniform float     uDy;    // fragment size\n\nin vec2 tcoordVC;\n\n\n// factored 3x3 Gaussian kernel\n// K^T*K = G\nfloat K[3] = float[3](0.141421356, 0.707106781, 0.141421356);\n\n// determine if the fragment was masked\nbool Masked(float val){ return val != 0.0; }\n\nvoid main(void)\n{\n// neighbor offsets\nvec2 fragDy[3] = vec2[3](vec2(0.0,-uDy), vec2(0.0,0.0), vec2(0.0,uDy));\n\n\n  vec2 lictc = tcoordVC.st;\n  vec4 lic[3];\n  bool dontUse = false;\n  float conv = 0.0;\n  for (int i=0; i<3; ++i)\n    {\n    vec2 tc = lictc + fragDy[i];\n    lic[i] = texture2D(texLIC, tc);\n    dontUse = dontUse || Masked(lic[i].g);\n    conv = conv + K[i] * lic[i].r;\n    }\n  // output is (conv, mask, skip, 1)\n  if (dontUse)\n    {\n    LICOutput = vec4(lic[1].rg, 1.0, 1.0);\n    }\n  else\n    {\n    LICOutput = vec4(conv, lic[1].gb, 1.0);\n    }\n  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);\n}\n")},e.executeLIC=function(a,s,r,U,F,l){if(t.openGLRenderWindow=F,t.context=F.getContext(),Object.assign(t,l),a[0]<=0||a[1]<=0)return null;var o=[1/a[0],1/a[1]],g=t.stepSize*Math.sqrt(o[0]*o[0]+o[1]*o[1]);g<=0&&(g=1e-10);var i,c=t.context,d=t.framebuffer;d&&a[0]===d.getSize()[0]&&a[1]===d.getSize()[1]||((d=ka.newInstance()).setOpenGLRenderWindow(t.openGLRenderWindow),d.saveCurrentBindingsAndBuffers(),(i=d).create.apply(i,Object(B.a)(a)),d.populateFramebuffer(),d.restorePreviousBindingsAndBuffers(),t.framebuffer=d),d.saveCurrentBindingsAndBuffers(),d.bind(),c.viewport.apply(c,[0,0].concat(Object(B.a)(a))),c.scissor.apply(c,[0,0].concat(Object(B.a)(a))),t.shadersNeedBuild&&(e.buildShaders(),t.shadersNeedBuild=!1),t.bufs?(t.bufs.setVectorTexture(s),t.bufs.setMaskVectorTexture(r),t.bufs.setNoiseTexture(U)):t.bufs=OF.newInstance({openGLRenderWindow:F,doEEPass:t.enhancedLIC,doVTPass:t.transformVectors,vectorTexture:s,maskVectorTexture:r,noiseTexture:U,framebuffer:d,size:a});var I=[(U.getWidth()+1)/a[0],(U.getHeight()+1)/a[1]],u=1/a[0],C=1/a[1],m=t.openGLRenderWindow.getShaderCache();if(t.transformVectors){var b=t.VTProgram;m.readyShaderProgram(b),t.bufs.attachImageVectorBuffer(),b.setUniform2f.apply(b,["uTexSize"].concat(Object(B.a)(a))),b.setUniformi("texVectors",t.bufs.getVectorTextureUnit()),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),t.bufs.renderQuad(a,b),t.bufs.detachImageVectorBuffer()}t.bufs.clearBuffers(t.enhancedLIC),t.bufs.activateVectorTextures(),t.bufs.activateNoiseTexture(0);var S=t.LIC0ShaderProgram;m.readyShaderProgram(S),S.setUniformi("uStepNo",0),S.setUniformi("uPassNo",0),S.setUniformf("uMaskThreshold",t.maskThreshold),S.setUniform2f.apply(S,["uNoiseBoundsPt1"].concat(I)),S.setUniformi("texMaskVectors",t.bufs.getMaskVectorTextureUnit()),S.setUniformi("texLIC",t.bufs.getLICTextureUnit()),S.setUniformi("texNoise",t.bufs.getNoiseTextureUnit(0)),Q(t.bufs,a,S);var y=t.LICIShaderProgram;m.readyShaderProgram(y),y.setUniformi("uPassNo",0),y.setUniformf("uStepSize",-g),y.setUniform2f.apply(y,["uNoiseBoundsPt1"].concat(I)),y.setUniformi("texVectors",t.bufs.getImageVectorTextureUnit()),y.setUniformi("texNoise",t.bufs.getNoiseTextureUnit(0));for(var Z=0;Z<t.numberOfSteps;++Z)n(y,t.bufs),Q(t.bufs,a,y);m.readyShaderProgram(S),S.setUniformi("uStepNo",1),n(S,t.bufs),Q(t.bufs,a,S),m.readyShaderProgram(y),y.setUniformf("uStepSize",g);for(var x=0;x<t.numberOfSteps;++x)n(y,t.bufs),Q(t.bufs,a,y);t.bufs.deactivateNoiseTexture(0),t.bufs.deactivateVectorTextures();var G=t.LICNShaderProgram;if(m.readyShaderProgram(G),G.setUniformi("texLIC",t.bufs.getLICTextureUnit()),Q(t.bufs,a,G),t.enhancedLIC){t.enhanceContrast!==pF&&t.enhanceContrast!==NF||e.contrastEnhance(!1,a),t.bufs.attachEEBuffer();var V=t.EEProgram;m.readyShaderProgram(V),V.setUniformi("texLIC",t.bufs.getLICTextureUnit()),V.setUniformf("uDx",u),V.setUniformf("uDy",C),t.bufs.renderQuad(a,V),t.bufs.detachEEBuffer(),t.bufs.detachBuffers(),t.bufs.clearBuffers(!1),t.bufs.activateVectorTextures(),t.bufs.activateNoiseTexture(1),m.readyShaderProgram(S),S.setUniformi("uStepNo",0),S.setUniformi("uPassNo",1),n(S,t.bufs),S.setUniformi("texNoise",t.bufs.getNoiseTextureUnit(1)),Q(t.bufs,a,S),m.readyShaderProgram(y),y.setUniformi("uPassNo",1),y.setUniformf("uStepSize",-g),y.setUniformi("texNoise",t.bufs.getNoiseTextureUnit(1));for(var R=t.numberOfSteps/2,L=0;L<R;++L)n(y,t.bufs),Q(t.bufs,a,y);m.readyShaderProgram(S),S.setUniformi("uStepNo",1),n(S,t.bufs),Q(t.bufs,a,S),m.readyShaderProgram(y),y.setUniformf("uStepSize",g);for(var p=0;p<R;++p)n(y,t.bufs),Q(t.bufs,a,y);t.bufs.deactivateNoiseTexture(1),t.bufs.deactivateVectorTextures(),m.readyShaderProgram(G),G.setUniformi("texLIC",t.bufs.getLICTextureUnit()),G.setUniformi("texSeedPts",t.bufs.getSeedTextureUnit()),Q(t.bufs,a,G)}if(t.antiAlias){var h=t.AAHProgram;m.readyShaderProgram(h),h.setUniformi("texLIC",t.bufs.getLICTextureUnit()),h.setUniformf("uDx",u);var N=t.AAVProgram;m.readyShaderProgram(N),N.setUniformi("texLIC",t.bufs.getLICTextureUnit()),N.setUniformf("uDy",C);for(var D=0;D<t.antiAlias;++D)m.readyShaderProgram(h),n(h,t.bufs),Q(t.bufs,a,h),m.readyShaderProgram(N),n(N,t.bufs),Q(t.bufs,a,N)}return t.enhanceContrast!==pF&&t.enhanceContrast!==NF||e.contrastEnhance(!0,a),t.bufs.detachBuffers(),d.restorePreviousBindingsAndBuffers(),t.bufs.getLastLICBuffer()},e.contrastEnhance=function(n,B){var a=t.openGLRenderWindow.getShaderCache(),s=e.getTextureMinMax(t.bufs.getLastLICBuffer(),B,t.context,t.openGLRenderWindow),r=s.min,U=s.max;(U<=r||U>1||r<0)&&(console.error("Invalid color range: ",r,U),r=0,U=1);var F=U-r;n&&(r+=F*t.lowLICContrastEnhancementFactor,F=(U-=F*t.highLICContrastEnhancementFactor)-r);var l=t.CEProgram;a.readyShaderProgram(l),l.setUniformi("texLIC",t.bufs.getLICTextureUnit()),l.setUniformf("uMin",r),l.setUniformf("uMaxMinDiff",F),Q(t.bufs,B,l)}}var PF={shadersNeedBuild:!0,stepSize:1,numberOfSteps:10,enhancedLIC:!0,enhanceContrast:!1,lowContrastEnhancementFactor:0,highContrastEnhancementFactor:0,antiAlias:0,componentIds:[0,1],normalizeVectors:!0,maskThreshold:0,transformVectors:!0,bufs:null,isComposite:!0};function KF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,PF,n),a.c.obj(e,t),a.c.setGet(e,t,["context","openGLRenderWindow","nuberOfSteps","stepSize","normalizeVectors","maskThreshold","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","componentIds","isComposite"]),zF(e,t)}var jF={newInstance:a.c.newInstance(KF,"vtkLineIntegralConvolution2D"),extend:KF},_F=Cs.Representation;function qF(e,t){t.classHierarchy.push("vtkOpenGLSurfaceLICInterface"),e.renderQuad=function(e,n){var Q=t.licQuad,B=t.context,a=t.licQuadVAO;a||((a=zr.newInstance()).setOpenGLRenderWindow(t.openGLRenderWindow),t.licQuadVAO=a),t.previousProgramHash!==n.getMd5Hash()&&(a.shaderProgramChanged(),Q.getCABO().bind(),a.addAttributeArray(n,Q.getCABO(),"vertexDC",Q.getCABO().getVertexOffset(),Q.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE),a.addAttributeArray(n,Q.getCABO(),"tcoordDC",Q.getCABO().getTCoordOffset(),Q.getCABO().getStride(),t.context.FLOAT,2,t.context.FALSE),t.previousProgramHash=n.getMd5Hash()),B.drawArrays(B.TRIANGLES,0,Q.getCABO().getElementCount()),a.release()},e.generateNoiseTexture=function(e){if(!t.noiseTexture||t.licInterface.getRebuildNoiseTexture()){t.licInterface.setRebuildNoiseTexture(!1),t.noiseTexture&&t.noiseTexture.releaseGraphicsResources(),Object(WF.a)(t.noiseGeneratorSeed,{global:!0});var n=[],Q=t.licInterface.get("noiseTextureType","noiseGrainSize","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","minNoiseValue","maxNoiseValue"),B=Q.noiseTextureType,a=Q.noiseGrainSize,s=Q.numberOfNoiseLevels,r=Q.noiseImpulseProbability,U=Q.noiseImpulseBackgroundValue,F=Q.minNoiseValue,l=Q.maxNoiseValue;switch(B){case AF:n=function(e,t,n,Q,B,a){var s=Math.max(0,Math.min(1,n)),r=Float32Array.from({length:e*e},(function(){var e=0;if(1===s||Math.random()>1-s)for(var t=0;t<2048;++t)e+=Math.random();return e})),U=0,F=2049;r.forEach((function(e){F=1===s?e<F?e:F:e<F&&e>0?e:F,U=e>U?e:U}));var l=U-F;0===l&&(F=0,l=0===U?1:U);var o=t-1,g=0!==o?1/o:0,i=a-B;return r.map((function(e){var n=e<F?e:(e-F)/l,s=Math.floor(n*t);return e>=F?1===t?a:B+(s>o?o:s)*g*i:Q}))}(Math.floor(e/a),s,r,U,F,l);break;case DF:default:n=function(e,t,n,Q){var B=Object(Ue.a)(e,2),a=B[0],s=B[1],r=Q-n;return Float32Array.from({length:a*s},(function(){var e=Math.random();return(e=(e=Math.floor(e*t)/t)*r+n)>1?1:e<0?0:e}))}([Math.ceil(e/a),Math.ceil(e/a)],s,F,l)}var o=1/a,g=Float32Array.from({length:e*e*4},(function(t,Q){var B=Q/4;if(Q%4==0){var s=Math.floor(B%e*o),r=Math.floor(B/e*o);return n[r*(e/a)+s]}return Q%4==1||Q%4==3?1:0})),i=va.newInstance({wrapS:va.Wrap.REPEAT,wrapT:va.Wrap.REPEAT,minificationFilter:va.Filter.NEAREST,magnificationFilter:va.Filter.NEAREST,generateMipMap:!1,openGLDataType:t.context.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});i.setOpenGLRenderWindow(t.openGLRenderWindow),i.create2DFromRaw(e,e,4,"Float32Array",g),i.activate(),i.sendParameters(),i.deactivate(),t.noiseTexture=i}},e.buildAShader=function(e){return t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(XF,e,"")},e.allocateTextures=function(){var n=va.Filter.NEAREST,Q=va.Filter.LINEAR,B=t.openGLRenderWindow;t.geometryImage||(t.geometryImage=e.allocateTexture(B,n)),t.vectorImage||(t.vectorImage=e.allocateTexture(B,Q)),t.maskVectorImage||(t.maskVectorImage=e.allocateTexture(B,Q)),t.LICImage||(t.LICImage=e.allocateTexture(B,n)),t.RGBColorImage||(t.RGBColorImage=e.allocateTexture(B,n)),t.HSLColorImage||(t.HSLColorImage=e.allocateTexture(B,n)),t.depthTexture||(t.depthTexture=e.allocateDepthTexture(B))},e.allocateTexture=function(e,n){var Q=t.context,a=va.newInstance({wrapS:va.Wrap.CLAMP_TO_EDGE,wrapT:va.Wrap.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:n,generateMipmap:!1,openGLDataType:Q.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});return a.setOpenGLRenderWindow(e),a.setInternalFormat(Q.RGBA32F),a.create2DFromRaw.apply(a,Object(B.a)(t.size).concat([4,"Float32Array",null])),a.activate(),a.sendParameters(),a.deactivate(),a},e.allocateDepthTexture=function(e){var n=t.context,Q=va.newInstance({generateMipmap:!1,openGLDataType:n.FLOAT,autoParameters:!1});return Q.setOpenGLRenderWindow(e),Q.createDepthFromRaw.apply(Q,Object(B.a)(t.size).concat(["Float32Array",null])),Q.activate(),Q.sendParameters(),Q.deactivate(),Q},e.createFBO=function(){if(!t.framebuffer){t.licHelper=null;var e=ka.newInstance();e.setOpenGLRenderWindow(t.openGLRenderWindow),e.saveCurrentBindingsAndBuffers(),e.create.apply(e,Object(B.a)(t.size)),e.populateFramebuffer(),t.framebuffer=e,e.restorePreviousBindingsAndBuffers()}},e.completedGeometry=function(){var e=t.context,n=t.framebuffer;n.removeColorBuffer(0),n.removeColorBuffer(1),n.removeColorBuffer(2),n.removeDepthBuffer(),e.drawBuffers([e.NONE]),n.restorePreviousBindingsAndBuffers()},e.buildAllShaders=function(){t.shadersNeedBuilding&&(t.licColorPass=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkSurfaceLICMapper_fs2.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// This shader combines surface geometry, LIC, and  scalar colors.\n\n// the output of this shader\nlayout(location = 0) out vec4 RGBOutput;\nlayout(location = 1) out vec4 HSLOutput;\n\nuniform sampler2D texVectors;       // vectors, depth\nuniform sampler2D texGeomColors;    // scalar colors + lighting\nuniform sampler2D texLIC;           // image lic\nuniform int       uScalarColorMode; // select between blend, and map shader\nuniform float     uLICIntensity;    // blend shader: blending factor for lic'd colors\nuniform float     uMapBias;         // map shader: adjust the brightness of the result\nuniform float     uMaskIntensity;   // blending factor for mask color\nuniform vec3      uMaskColor;       // color for the masked out fragments\n\nin vec2 tcoordVC;\n\n/**\nConvert from RGB color space into HSL colorspace.\n*/\nvec3 RGBToHSL(vec3 RGB)\n{\n  vec3 HSL = vec3(0.0, 0.0, 0.0);\n\n  float RGBMin = min(min(RGB.r, RGB.g), RGB.b);\n  float RGBMax = max(max(RGB.r, RGB.g), RGB.b);\n  float RGBMaxMinDiff = RGBMax - RGBMin;\n\n  HSL.z = (RGBMax + RGBMin) / 2.0;\n\n  if (RGBMaxMinDiff == 0.0)\n    {\n    // Gray scale\n    HSL.x = 0.0;\n    HSL.y = 0.0;\n    }\n  else\n    {\n    // Color\n    if (HSL.z < 0.5)\n      HSL.y = RGBMaxMinDiff / (RGBMax + RGBMin);\n    else\n      HSL.y = RGBMaxMinDiff / (2.0 - RGBMax - RGBMin);\n\n    float dR\n      = (((RGBMax - RGB.r) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;\n    float dG\n      = (((RGBMax - RGB.g) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;\n    float dB\n      = (((RGBMax - RGB.b) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;\n\n    if (RGB.r == RGBMax)\n      HSL.x = dB - dG;\n    else\n    if (RGB.g == RGBMax)\n      HSL.x = (1.0 / 3.0) + dR - dB;\n    else\n    if (RGB.b == RGBMax)\n      HSL.x = (2.0 / 3.0) + dG - dR;\n\n    if (HSL.x < 0.0)\n      HSL.x += 1.0;\n\n    if (HSL.x > 1.0)\n      HSL.x -= 1.0;\n    }\n\n  return HSL;\n}\n\n/**\nHelper for HSL to RGB conversion.\n*/\nfloat Util(float v1, float v2, float vH)\n{\n  if (vH < 0.0)\n    vH += 1.0;\n\n  if (vH > 1.0)\n     vH -= 1.0;\n\n  if ((6.0 * vH) < 1.0)\n    return (v1 + (v2 - v1) * 6.0 * vH);\n\n  if ((2.0 * vH) < 1.0)\n    return (v2);\n\n  if ((3.0 * vH) < 2.0)\n    return (v1 + (v2 - v1) * ((2.0 / 3.0) - vH) * 6.0);\n\n  return v1;\n}\n\n/**\nConvert from HSL space into RGB space.\n*/\nvec3 HSLToRGB(vec3 HSL)\n{\n  vec3 RGB;\n  if (HSL.y == 0.0)\n    {\n    // Gray\n    RGB.r = HSL.z;\n    RGB.g = HSL.z;\n    RGB.b = HSL.z;\n    }\n  else\n    {\n    // Chromatic\n    float v2;\n    if (HSL.z < 0.5)\n      v2 = HSL.z * (1.0 + HSL.y);\n    else\n      v2 = (HSL.z + HSL.y) - (HSL.y * HSL.z);\n\n    float v1 = 2.0 * HSL.z - v2;\n\n    RGB.r = Util(v1, v2, HSL.x + (1.0 / 3.0));\n    RGB.g = Util(v1, v2, HSL.x);\n    RGB.b = Util(v1, v2, HSL.x - (1.0 / 3.0));\n    }\n\n  return RGB.rgb;\n}\n\nvoid main()\n{\n  vec4 lic = texture2D(texLIC, tcoordVC.st);\n  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);\n\n  // depth is used to determine which fragment belong to us\n  // and we can change\n  float depth = texture2D(texVectors, tcoordVC.st).a;\n\n  vec3 fragColorRGB;\n  float valid;\n  if (depth > 1.0e-3)\n    {\n    // we own it\n    // shade LIC'ed geometry, or apply mask\n    if (lic.g!=0.0)\n      {\n      // it's masked\n      // apply fragment mask\n      fragColorRGB = uMaskIntensity * uMaskColor + (1.0 - uMaskIntensity) * geomColor.rgb;\n      valid = 0.0;\n      }\n    else\n      {\n      if (uScalarColorMode==0)\n        {\n        // blend with scalars\n        fragColorRGB = lic.rrr * uLICIntensity + geomColor.rgb * (1.0 - uLICIntensity);\n        }\n      else\n        {\n        // multiply with scalars\n        fragColorRGB = geomColor.rgb * clamp((uMapBias + lic.r), 0.0, 1.0);\n        }\n      if (lic.b != 0.0)\n        {\n        // didn't have the required guard pixels\n        // don't consider it in min max estimation\n        // for histpgram stretching\n        valid = 0.0;\n        }\n      else\n        {\n        // ok to use in min/max estimates for histogram\n        // stretching\n        valid = 1.0;\n        }\n      }\n    }\n  else\n    {\n    // we don't own it\n    // pass through scalars\n    fragColorRGB = geomColor.rgb;\n    valid = 0.0;\n    }\n\n  // if no further stages this texture is\n  // copied to the screen\n  RGBOutput = vec4(fragColorRGB, geomColor.a);\n\n  // if further stages, move to hsl space for contrast\n  // enhancement. encoding validity saves moving a texture to the cpu\n  vec3 fragColorHSL = RGBToHSL(fragColorRGB);\n  HSLOutput = vec4(fragColorHSL, valid);\n}\n"),t.licCopyPass=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkSurfaceLICMapper_DCpy.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// This shader copies fragments and depths to the output buffer\n\n// the output of this shader\n//VTK::Output::Dec\n\nuniform sampler2D texDepth;     // z values from vertex shader\nuniform sampler2D texRGBColors; // final rgb LIC colors\n\nin vec2 tcoordVC;\n\nvoid main()\n{\n  gl_FragDepth = texture2D(texDepth, tcoordVC).x;\n  gl_FragData[0] = texture2D(texRGBColors, tcoordVC);\n\n  // since we render a screen aligned quad\n  // we're going to be writing fragments\n  // not touched by the original geometry\n  // it's critical not to modify those\n  // fragments.\n  if (gl_FragDepth == 1.0)\n    {\n    discard;\n    }\n}\n"),t.enhanceContrastPass=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkSurfaceLICMapper_CE.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// color contrast enhance stage implemented via histogram stretching\n// on lightness channel. if the min and max are tweaked it can generate\n// out-of-range values these will be clamped in 0 to 1\n\n// the output of this shader\n//VTK::Output::Dec\n\nuniform sampler2D texGeomColors; // scalars + lighting\nuniform sampler2D texLIC;        // image lic, mask\nuniform sampler2D texHSLColors;  // hsla colors\n\nuniform float     uLMin;         // min lightness over all fragments\nuniform float     uLMaxMinDiff;  // max - min lightness over all fragments\n\nin vec2 tcoordVC;\n\nvec3 HSLToRGB(vec3 HSL)\n{\n  vec3 RGB;\n  float v;\n  float h = HSL.x;\n  float sl = HSL.y;\n  float l = HSL.z;\n\n  v = (l <= 0.5) ? (l * (1.0 + sl)) : (l + sl - l * sl);\n  if (v <= 0.0) {\n    RGB = vec3(0.0,0.0,0.0);\n  } else {\n    float m;\n    int sextant;\n    float fract, vsf, mid1, mid2;\n\n    m = l + l - v;\n    h *= 6.0;\n    sextant = int(h);\n    fract = h - float(sextant);\n\n    vsf = (v - m) * fract;\n    mid1 = m + vsf;\n    mid2 = v - vsf;\n    switch (sextant) {\n      case 0: RGB.r = v; RGB.g = mid1; RGB.b = m; break;\n      case 1: RGB.r = mid2; RGB.g = v; RGB.b = m; break;\n      case 2: RGB.r = m; RGB.g = v; RGB.b = mid1; break;\n      case 3: RGB.r = m; RGB.g = mid2; RGB.b = v; break;\n      case 4: RGB.r = mid1; RGB.g = m; RGB.b = v; break;\n      case 5: RGB.r = v; RGB.g = m; RGB.b = mid2; break;\n    }\n  }\n  return RGB;\n}\n\nvoid main()\n{\n  // lookup hsl color , mask\n  vec4 fragColor = texture2D(texHSLColors, tcoordVC.st);\n\n  // don't modify masked fragments (masked => lic.g==1)\n  vec4 lic = texture2D(texLIC, tcoordVC.st);\n  if (lic.g==0.0)\n    {\n    // normalize lightness channel\n    fragColor.z = clamp((fragColor.z - uLMin)/uLMaxMinDiff, 0.0, 1.0);\n    }\n\n  // back into rgb space\n  fragColor.rgb = HSLToRGB(fragColor.xyz);\n\n  // add alpha\n  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);\n  fragColor.a = geomColor.a;\n\n  gl_FragData[0] = fragColor;\n}\n"),t.shadersNeedBuilding=!1)},e.initializeResources=function(){e.createFBO(),e.generateNoiseTexture(t.licInterface.getNoiseTextureSize()),e.allocateTextures(),e.buildAllShaders(),t.licQuad||(t.licQuad=function(e){var t=_r.newInstance();t.setOpenGLRenderWindow(e);for(var n=new Float32Array(12),Q=0;Q<4;Q++)n[3*Q]=Q%2*2-1,n[3*Q+1]=Q>1?1:-1,n[3*Q+2]=0;var B=new Float32Array([0,0,1,0,0,1,1,1]),a=new Uint16Array(8);a[0]=3,a[1]=0,a[2]=1,a[3]=3,a[4]=3,a[5]=0,a[6]=3,a[7]=2;var r=s.a.newInstance({numberOfComponents:3,values:n});r.setName("points");var U=s.a.newInstance({numberOfComponents:1,values:a}),F=s.a.newInstance({numberOfComponents:2,values:B});return t.getCABO().createVBO(U,"polys",_F.SURFACE,{points:r,cellOffset:0,tcoords:F}),t}(t.openGLRenderWindow)),t.licHelper||(t.licHelper=jF.newInstance())},e.prepareForGeometry=function(){var e=t.framebuffer;e.saveCurrentBindingsAndBuffers(),e.bind(),t.geometryImage.activate(),t.vectorImage.activate(),t.maskVectorImage.activate(),e.removeColorBuffer(0),e.removeColorBuffer(1),e.removeColorBuffer(2),e.setColorBuffer(t.geometryImage,0),e.setColorBuffer(t.vectorImage,1),e.setColorBuffer(t.maskVectorImage,2),e.setDepthBuffer(t.depthTexture);var n=t.context;n.drawBuffers([n.COLOR_ATTACHMENT0,n.COLOR_ATTACHMENT1,n.COLOR_ATTACHMENT2]),n.viewport.apply(n,[0,0].concat(Object(B.a)(t.size))),n.scissor.apply(n,[0,0].concat(Object(B.a)(t.size))),n.disable(n.BLEND),n.disable(n.DEPTH_TEST),n.disable(n.SCISSOR_TEST),n.clearColor(0,0,0,0),n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT)},e.copyToScreen=function(n){t.RGBColorImage.activate(),t.depthTexture.activate(),t.licCopyPass||e.initializeResources();var Q=t.licCopyPass;t.openGLRenderWindow.getShaderCache().readyShaderProgram(Q);var a=t.context;a.viewport.apply(a,[0,0].concat(Object(B.a)(n))),a.scissor.apply(a,[0,0].concat(Object(B.a)(n))),a.disable(a.BLEND),a.enable(a.DEPTH_TEST),a.disable(a.SCISSOR_TEST),Q.setUniformi("texDepth",t.depthTexture.getTextureUnit()),Q.setUniformi("texRGBColors",t.RGBColorImage.getTextureUnit()),e.renderQuad(n,Q),t.RGBColorImage.deactivate(),t.depthTexture.deactivate()},e.combineColorsAndLIC=function(){var n=t.context,Q=t.framebuffer;Q.saveCurrentBindingsAndBuffers(),Q.bind(),Q.create.apply(Q,Object(B.a)(t.size)),Q.removeColorBuffer(0),Q.removeColorBuffer(1),Q.setColorBuffer(t.RGBColorImage,0),Q.setColorBuffer(t.HSLColorImage,1),n.drawBuffers([n.COLOR_ATTACHMENT0,n.COLOR_ATTACHMENT1]),n.disable(n.DEPTH_TEST),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),t.vectorImage.activate(),t.geometryImage.activate(),t.LICImage.activate(),t.licColorPass||e.initializeResources();var a=t.licColorPass;t.openGLRenderWindow.getShaderCache().readyShaderProgram(a),a.setUniformi("texVectors",t.vectorImage.getTextureUnit()),a.setUniformi("texGeomColors",t.geometryImage.getTextureUnit());var s=t.licInterface.get("colorMode","LICIntensity","mapModeBias","maskIntensity","maskColor","enhanceContrast","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor"),r=s.colorMode,U=s.LICIntensity,F=s.mapModeBias,l=s.maskIntensity,o=s.maskColor,g=s.enhanceContrast,i=s.lowColorContrastEnhancementFactor,c=s.highColorContrastEnhancementFactor;if(a.setUniformi("texLIC",t.LICImage.getTextureUnit()),a.setUniformi("uScalarColorMode",r),a.setUniformf("uLICIntensity",U),a.setUniformf("uMapBias",F),a.setUniformf("uMaskIntensity",l),a.setUniform3f.apply(a,["uMaskColor"].concat(Object(B.a)(o))),e.renderQuad(t.size,a),t.vectorImage.deactivate(),t.geometryImage.deactivate(),t.LICImage.deactivate(),Q.removeColorBuffer(0),Q.removeColorBuffer(1),n.drawBuffers([n.NONE]),g===hF||g===NF){var d=0,I=1,u=I-d;u=(I-=u*c)-(d+=u*i),Q.setColorBuffer(t.RGBColorImage),n.drawBuffers([n.COLOR_ATTACHMENT0]),t.geometryImage.activate(),t.HSLColorImage.activate(),t.LICImage.activate(),t.enhanceContrastPass||e.initializeResources();var C=t.enhanceContrastPass;t.openGLRenderWindow.getShaderCache().readyShaderProgram(C),C.setUniformi("texGeomColors",t.geometryImage.getTextureUnit()),C.setUniformi("texHSLColors",t.HSLColorImage.getTextureUnit()),C.setUniformi("texLIC",t.LICImage.getTextureUnit()),C.setUniformf("uLMin",d),C.setUniformf("uLMaxMinDiff",u),e.renderQuad(t.size,C),t.geometryImage.deactivate(),t.HSLColorImage.deactivate(),t.LICImage.deactivate(),Q.removeColorBuffer(0),n.drawBuffers([n.NONE])}Q.restorePreviousBindingsAndBuffers()},e.applyLIC=function(){var e=t.licInterface.get("stepSize","numberOfSteps","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","normalizeVectors","maskThreshold","transformVectors"),n=t.licHelper.executeLIC(t.size,t.vectorImage,t.maskVectorImage,t.noiseTexture,t.openGLRenderWindow,e);if(!n)return console.error("Failed to compute image LIC"),void(t.LICImage=null);t.LICImage=n},e.setSize=function(n){Array.isArray(n)&&2===n.length&&(t.size&&t.size[0]===n[0]&&t.size[1]===n[1]||(t.size=n,e.releaseGraphicsResources()))},e.releaseGraphicsResources=function(){t.geometryImage&&(t.geometryImage.releaseGraphicsResources(),t.geometryImage=null),t.vectorImage&&(t.vectorImage.releaseGraphicsResources(),t.vectorImage=null),t.maskVectorImage&&(t.maskVectorImage.releaseGraphicsResources(),t.maskVectorImage=null),t.LICImage&&(t.LICImage.releaseGraphicsResources(),t.LICImage=null),t.RGBColorImage&&(t.RGBColorImage.releaseGraphicsResources(),t.RGBColorImage=null),t.HSLColorImage&&(t.HSLColorImage.releaseGraphicsResources(),t.HSLColorImage=null),t.depthTexture&&(t.depthTexture.releaseGraphicsResources(),t.depthTexture=null),t.framebuffer&&(t.framebuffer.releaseGraphicsResources(),t.framebuffer=null)}}var $F={context:null,openGLRenderWindow:null,shadersNeedBuilding:!0,reallocateTextures:!0,size:null,licInterface:null};function el(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$F,n),vF.extend(e,t,n),a.c.obj(e,t),a.c.setGet(e,t,["context","openGLRenderWindow","reallocateTextures","licInterface","size"]),qF(e,t)}var tl={newInstance:a.c.newInstance(el,"vtkSurfaceLICInterface"),extend:el};function nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var Ql=a.c.vtkErrorMacro;function Bl(e,t){t.classHierarchy.push("vtkOpenGLSurfaceLICMapper");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nl(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.getNeedToRebuildShaders=function(e,Q,B){return t.rebuildLICShaders||n.getNeedToRebuildShaders(e,Q,B)},e.replaceShaderValues=function(e,Q,B){var a=t.lastBoundBO.getReferenceByName("lastLightComplexity"),s=e.Vertex,r=e.Fragment,U=t.renderable.getInputArrayToProcess(0);if(U&&t.canDrawLIC){r=xr.substitute(r,"//VTK::Output::Dec",["//VTK::Output::Dec","layout(location = 1) out vec4 vectorTexture;","layout(location = 2) out vec4 maskVectorTexture;"]).result;var F=U.getName(),l="".concat(F,"MC");0===a&&t.lastBoundBO.set({lastLightComplexity:1},!0),s=xr.substitute(s,"//VTK::TCoord::Dec",["attribute vec3 ".concat(l,";"),"out vec3 licOutput;","//VTK::TCoord::Dec"]).result,s=xr.substitute(s,"//VTK::TCoord::Impl",["licOutput = ".concat(l,";"),"//VTK::TCoord::Impl"]).result,r=xr.substitute(r,"//VTK::TCoord::Dec",["uniform int uMaskOnSurface;","uniform mat3 normalMatrix;","in vec3 licOutput;","//VTK::TCoord::Dec"]).result,r=xr.substitute(r,"//VTK::TCoord::Impl",["// projected vectors","  vec3 tcoordLIC = normalMatrix * licOutput;","  vec3 normN = normalize(normalVCVSOutput);","  float k = dot(tcoordLIC, normN);","  vec3 projected = (tcoordLIC - k*normN);","  vectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","// vectors for fragment masking","  if (uMaskOnSurface == 0)","    {","    maskVectorTexture = vec4(licOutput, 1.0);","    }","  else","    {","    maskVectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","    }","//VTK::TCoord::Impl"],!1).result,e.Vertex=s}t.rebuildLICShaders=!1,e.Fragment=r,n.replaceShaderValues(e,Q,B),t.lastBoundBO.set({lastLightComplexity:a},!0)},e.setMapperShaderParameters=function(e,Q,B){n.setMapperShaderParameters(e,Q,B),t.canDrawLIC&&e.getProgram().setUniformi("uMaskOnSurface",t.maskOnSurface)},e.getNeedToRebuildBufferObjects=function(e,Q){return t.rebuildLICBuffers||n.getNeedToRebuildBufferObjects(e,Q)},e.buildBufferObjects=function(e,Q){if(t.canDrawLIC){var B=t.renderable.getInputArrayToProcess(0);B&&B.getNumberOfComponents()>1&&t.renderable.setCustomShaderAttributes([B.getName()])}t.rebuildLICBuffers=!1,n.buildBufferObjects(e,Q)},e.pushState=function(e){var n;t.stateCache=(Object(ye.a)(n={},e.BLEND,e.isEnabled(e.BLEND)),Object(ye.a)(n,e.DEPTH_TEST,e.isEnabled(e.DEPTH_TEST)),Object(ye.a)(n,e.SCISSOR_TEST,e.isEnabled(e.SCISSOR_TEST)),n)},e.popState=function(e){var n=function(n){return t.stateCache[n]?e.enable(n):e.disable(n)};n(e.BLEND),n(e.DEPTH_TEST),n(e.SCISSOR_TEST)},e.renderPiece=function(Q,B){var a=!0;t.openGLRenderWindow.getWebgl2()||(Ql("SurfaceLICMapper Requires WebGL 2"),a=!1),t.context.getExtension("EXT_color_buffer_float")&&t.context.getExtension("OES_texture_float_linear")||(Ql("SurfaceLICMapper requires the EXT_color_buffer_float and OES_texture_float_linear WebGL2 extensions."),a=!1),t.currentInput=t.renderable.getInputData(),t.currentInput||(Ql("No input"),a=!1);var s=t.renderable.getLicInterface();s||(s=vF.newInstance(),t.renderable.setLicInterface(s)),t.openGLLicInterface||(t.openGLLicInterface=tl.newInstance()),s!==t.openGLLicInterface.getLicInterface()&&t.openGLLicInterface.setLicInterface(s);var r=t.renderable.getInputArrayToProcess(0);if(s.getEnableLIC()&&(!r||r.getNumberOfComponents()<2)&&(Ql("No vector input array"),a=!1),s.getEnableLIC()||(a=!1),t.canDrawLIC!==a&&(t.rebuildLICShaders=!0,t.rebuildLICBuffers=!0),t.canDrawLIC=a,a&&s.getEnableLIC()){var U=t.openGLRenderWindow.getSize(),F=U.map((function(e){return Math.round(e*s.getViewPortScale())}));t.openGLLicInterface.setSize(F),t.openGLLicInterface.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLLicInterface.setContext(t.context),e.pushState(t.context),t.openGLLicInterface.initializeResources(),t.openGLLicInterface.prepareForGeometry(),e.popState(t.context),n.renderPieceStart(Q,B),n.renderPieceDraw(Q,B),n.renderPieceFinish(Q,B),e.pushState(t.context),t.VBOBuildTime.modified(),t.openGLLicInterface.completedGeometry(),t.openGLLicInterface.applyLIC(),t.openGLLicInterface.combineColorsAndLIC(),t.openGLLicInterface.copyToScreen(U),e.popState(t.context)}else n.renderPiece(Q,B)}}var al={canDrawLIC:!1,rebuildLICShaders:!1,rebuildLICBuffers:!1,openGLLicInterface:null};function sl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,al,n),iU.extend(e,t,n),Bl(e,t),a.c.setGet(e,t,["openGLLicInterface"])}var rl={newInstance:a.c.newInstance(sl,"vtkOpenGLSurfaceLICMapper"),extend:sl};function Ul(e,t){t.classHierarchy.push("vtkOpenGLVolume"),e.buildPass=function(n){t.renderable&&t.renderable.getVisibility()&&n&&(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;n.incrementVolumeCount()}},e.traverseVolumePass=function(n){t.renderable&&t.renderable.getVisibility()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children[0].traverse(n),e.apply(n,!1))},e.volumePass=function(n){t.renderable&&t.renderable.getVisibility()&&(n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1)):t.context.depthMask(!0))},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),Object(S.d)(t.MCWCMatrix,t.renderable.getMatrix()),Object(S.i)(t.MCWCMatrix,t.MCWCMatrix),t.renderable.getIsIdentity()?It(t.normalMatrix):(dt(t.normalMatrix,t.MCWCMatrix),Ct(t.normalMatrix,t.normalMatrix)),t.keyMatrixTime.modified()),{mcwc:t.MCWCMatrix,normalMatrix:t.normalMatrix}}}var Fl={};function ll(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fl,n),oa.extend(e,t,n),t.keyMatrixTime={},a.c.obj(t.keyMatrixTime,{mtime:0}),t.normalMatrix=new Float64Array(9),t.MCWCMatrix=new Float64Array(16),a.c.setGet(e,t,["context"]),Ul(e,t)}var ol={newInstance:a.c.newInstance(ll,"vtkOpenGLVolume"),extend:ll},gl={NEAREST:0,LINEAR:1,FAST_LINEAR:2},il={FRACTIONAL:0,PROPORTIONAL:1},cl={InterpolationType:gl,OpacityMode:il},dl={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3},Il={BlendMode:dl};function ul(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var Cl=a.c.vtkWarningMacro,ml=a.c.vtkErrorMacro;function bl(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function Sl(e,t){t.classHierarchy.push("vtkOpenGLVolumeMapper"),e.buildPass=function(){t.zBufferTexture=null},e.opaqueZBufferPass=function(e,n){if(e){var Q=n.getZBufferTexture();Q!==t.zBufferTexture&&(t.zBufferTexture=Q)}},e.volumePass=function(n,Q){if(n){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.jitterTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.scalarTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.opacityTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLVolume=e.getFirstAncestorOfType("vtkOpenGLVolume");var B=t.openGLVolume.getRenderable();t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");var a=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(a.getActiveCamera()),e.renderPiece(a,B)}},e.buildShaders=function(t,n,Q){e.getShaderTemplate(t,n,Q),e.replaceShaderValues(t,n,Q)},e.getShaderTemplate=function(e,t,n){e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexDC;\n\nvarying vec3 vertexVCVSOutput;\nuniform mat4 PCVCMatrix;\n\nuniform float dcxmin;\nuniform float dcxmax;\nuniform float dcymin;\nuniform float dcymax;\n\nvoid main()\n{\n  // dcsmall is the device coords reduced to the\n  // x y area covered by the volume\n  vec4 dcsmall = vec4(\n    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),\n    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),\n    vertexDC.z,\n    vertexDC.w);\n  vec4 vcpos = PCVCMatrix * dcsmall;\n  vertexVCVSOutput = vcpos.xyz/vcpos.w;\n  gl_Position = dcsmall;\n}\n",e.Fragment="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkVolumeFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the volume mappers fragment shader\n\n// the output of this shader\n//VTK::Output::Dec\n\nvarying vec3 vertexVCVSOutput;\n\n// first declare the settings from the mapper\n// that impact the code paths in here\n\n// always set vtkNumComponents 1,2,3,4\n//VTK::NumComponents\n\n// possibly define vtkUseTriliear\n//VTK::TrilinearOn\n\n// possibly define vtkIndependentComponents\n//VTK::IndependentComponentsOn\n\n// possibly define any \"proportional\" components\n//VTK::vtkProportionalComponents\n\n// Define the blend mode to use\n#define vtkBlendMode //VTK::BlendMode\n\n// Possibly define vtkImageLabelOutlineOn\n//VTK::ImageLabelOutlineOn\n\n#ifdef vtkImageLabelOutlineOn\nuniform int outlineThickness;\nuniform float vpWidth;\nuniform float vpHeight;\nuniform mat4 PCWCMatrix;\nuniform mat4 vWCtoIDX;\n#endif\n\n// define vtkLightComplexity\n//VTK::LightComplexity\n#if vtkLightComplexity > 0\nuniform float vSpecularPower;\nuniform float vAmbient;\nuniform float vDiffuse;\nuniform float vSpecular;\n//VTK::Light::Dec\n#endif\n\n// possibly define vtkGradientOpacityOn\n//VTK::GradientOpacityOn\n#ifdef vtkGradientOpacityOn\nuniform float goscale0;\nuniform float goshift0;\nuniform float gomin0;\nuniform float gomax0;\n#if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\nuniform float goscale1;\nuniform float goshift1;\nuniform float gomin1;\nuniform float gomax1;\n#if vtkNumComponents >= 3\nuniform float goscale2;\nuniform float goshift2;\nuniform float gomin2;\nuniform float gomax2;\n#endif\n#if vtkNumComponents >= 4\nuniform float goscale3;\nuniform float goshift3;\nuniform float gomin3;\nuniform float gomax3;\n#endif\n#endif\n#endif\n\n// if you want to see the raw tiled\n// data in webgl1 uncomment the following line\n// #define debugtile\n\n// camera values\nuniform float camThick;\nuniform float camNear;\nuniform float camFar;\nuniform int cameraParallel;\n\n// values describing the volume geometry\nuniform vec3 vOriginVC;\nuniform vec3 vSpacing;\nuniform ivec3 volumeDimensions; // 3d texture dimensions\nuniform vec3 vPlaneNormal0;\nuniform float vPlaneDistance0;\nuniform vec3 vPlaneNormal1;\nuniform float vPlaneDistance1;\nuniform vec3 vPlaneNormal2;\nuniform float vPlaneDistance2;\nuniform vec3 vPlaneNormal3;\nuniform float vPlaneDistance3;\nuniform vec3 vPlaneNormal4;\nuniform float vPlaneDistance4;\nuniform vec3 vPlaneNormal5;\nuniform float vPlaneDistance5;\n\n//VTK::ClipPlane::Dec\n\n// opacity and color textures\nuniform sampler2D otexture;\nuniform float oshift0;\nuniform float oscale0;\nuniform sampler2D ctexture;\nuniform float cshift0;\nuniform float cscale0;\n\n// jitter texture\nuniform sampler2D jtexture;\n\n// some 3D texture values\nuniform float sampleDistance;\nuniform vec3 vVCToIJK;\n\n// the heights defined below are the locations\n// for the up to four components of the tfuns\n// the tfuns have a height of 2XnumComps pixels so the\n// values are computed to hit the middle of the two rows\n// for that component\n#ifdef vtkIndependentComponentsOn\n#if vtkNumComponents == 2\nuniform float mix0;\nuniform float mix1;\n#define height0 0.25\n#define height1 0.75\n#endif\n#if vtkNumComponents == 3\nuniform float mix0;\nuniform float mix1;\nuniform float mix2;\n#define height0 0.17\n#define height1 0.5\n#define height2 0.83\n#endif\n#if vtkNumComponents == 4\nuniform float mix0;\nuniform float mix1;\nuniform float mix2;\nuniform float mix3;\n#define height0 0.125\n#define height1 0.375\n#define height2 0.625\n#define height3 0.875\n#endif\n#endif\n\n#if vtkNumComponents >= 2\nuniform float oshift1;\nuniform float oscale1;\nuniform float cshift1;\nuniform float cscale1;\n#endif\n#if vtkNumComponents >= 3\nuniform float oshift2;\nuniform float oscale2;\nuniform float cshift2;\nuniform float cscale2;\n#endif\n#if vtkNumComponents >= 4\nuniform float oshift3;\nuniform float oscale3;\nuniform float cshift3;\nuniform float cscale3;\n#endif\n\n// declaration for intermixed geometry\n//VTK::ZBuffer::Dec\n\n// Lighting values\n//VTK::Light::Dec\n\n//=======================================================================\n// Webgl2 specific version of functions\n#if __VERSION__ == 300\n\nuniform highp sampler3D texture1;\n\nvec4 getTextureValue(vec3 pos)\n{\n  vec4 tmp = texture(texture1, pos);\n#if vtkNumComponents == 1\n  tmp.a = tmp.r;\n#endif\n#if vtkNumComponents == 2\n  tmp.a = tmp.g;\n#endif\n#if vtkNumComponents == 3\n  tmp.a = length(tmp.rgb);\n#endif\n  return tmp;\n}\n\n//=======================================================================\n// WebGL1 specific version of functions\n#else\n\nuniform sampler2D texture1;\n\nuniform float texWidth;\nuniform float texHeight;\nuniform int xreps;\nuniform int xstride;\nuniform int ystride;\n\n// if computing triliear values from multiple z slices\n#ifdef vtkTriliearOn\nvec4 getTextureValue(vec3 ijk)\n{\n  float zoff = 1.0/float(volumeDimensions.z);\n  vec4 val1 = getOneTextureValue(ijk);\n  vec4 val2 = getOneTextureValue(vec3(ijk.xy, ijk.z + zoff));\n\n  float indexZ = float(volumeDimensions)*ijk.z;\n  float zmix =  indexZ - floor(indexZ);\n\n  return mix(val1, val2, zmix);\n}\n\nvec4 getOneTextureValue(vec3 ijk)\n#else // nearest or fast linear\nvec4 getTextureValue(vec3 ijk)\n#endif\n{\n  vec3 tdims = vec3(volumeDimensions);\n\n#ifdef debugtile\n  vec2 tpos = vec2(ijk.x, ijk.y);\n  vec4 tmp = texture2D(texture1, tpos);\n  tmp.a = 1.0;\n\n#else\n  int z = int(ijk.z * tdims.z);\n  int yz = z / xreps;\n  int xz = z - yz*xreps;\n\n  int tileWidth = volumeDimensions.x/xstride;\n  int tileHeight = volumeDimensions.y/ystride;\n\n  xz *= tileWidth;\n  yz *= tileHeight;\n\n  float ni = float(xz) + (ijk.x*float(tileWidth));\n  float nj = float(yz) + (ijk.y*float(tileHeight));\n\n  vec2 tpos = vec2(ni/texWidth, nj/texHeight);\n\n  vec4 tmp = texture2D(texture1, tpos);\n\n#if vtkNumComponents == 1\n  tmp.a = tmp.r;\n#endif\n#if vtkNumComponents == 2\n  tmp.g = tmp.a;\n#endif\n#if vtkNumComponents == 3\n  tmp.a = length(tmp.rgb);\n#endif\n#endif\n\n  return tmp;\n}\n\n// End of Webgl1 specific code\n//=======================================================================\n#endif\n\n//=======================================================================\n// compute the normal and gradient magnitude for a position\nvec4 computeNormal(vec3 pos, float scalar, vec3 tstep)\n{\n  vec4 result;\n\n  result.x = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)).a - scalar;\n  result.y = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)).a - scalar;\n  result.z = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)).a - scalar;\n\n  // divide by spacing\n  result.xyz /= vSpacing;\n\n  result.w = length(result.xyz);\n\n  // rotate to View Coords\n  result.xyz =\n    result.x * vPlaneNormal0 +\n    result.y * vPlaneNormal2 +\n    result.z * vPlaneNormal4;\n\n  if (result.w > 0.0)\n  {\n    result.xyz /= result.w;\n  }\n  return result;\n}\n\n#ifdef vtkImageLabelOutlineOn\nvec3 fragCoordToIndexSpace(vec4 fragCoord) {\n  vec4 pcPos = vec4(\n    (fragCoord.x / vpWidth - 0.5) * 2.0,\n    (fragCoord.y / vpHeight - 0.5) * 2.0,\n    (fragCoord.z - 0.5) * 2.0,\n    1.0);\n\n  vec4 worldCoord = PCWCMatrix * pcPos;\n  vec4 vertex = (worldCoord/worldCoord.w);\n\n  return (vWCtoIDX * vertex).xyz / vec3(volumeDimensions);\n}\n#endif\n\n//=======================================================================\n// compute the normals and gradient magnitudes for a position\n// for independent components\nmat4 computeMat4Normal(vec3 pos, vec4 tValue, vec3 tstep)\n{\n  mat4 result;\n  vec4 distX = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)) - tValue;\n  vec4 distY = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)) - tValue;\n  vec4 distZ = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)) - tValue;\n\n  // divide by spacing\n  distX /= vSpacing.x;\n  distY /= vSpacing.y;\n  distZ /= vSpacing.z;\n\n  mat3 rot;\n  rot[0] = vPlaneNormal0;\n  rot[1] = vPlaneNormal2;\n  rot[2] = vPlaneNormal4;\n\n#if !defined(vtkComponent0Proportional)\n  result[0].xyz = vec3(distX.r, distY.r, distZ.r);\n  result[0].a = length(result[0].xyz);\n  result[0].xyz *= rot;\n  if (result[0].w > 0.0)\n  {\n    result[0].xyz /= result[0].w;\n  }\n#endif\n\n// optionally compute the 2nd component\n#if vtkNumComponents >= 2 && !defined(vtkComponent1Proportional)\n  result[1].xyz = vec3(distX.g, distY.g, distZ.g);\n  result[1].a = length(result[1].xyz);\n  result[1].xyz *= rot;\n  if (result[1].w > 0.0)\n  {\n    result[1].xyz /= result[1].w;\n  }\n#endif\n\n// optionally compute the 3rd component\n#if vtkNumComponents >= 3 && !defined(vtkComponent2Proportional)\n  result[2].xyz = vec3(distX.b, distY.b, distZ.b);\n  result[2].a = length(result[2].xyz);\n  result[2].xyz *= rot;\n  if (result[2].w > 0.0)\n  {\n    result[2].xyz /= result[2].w;\n  }\n#endif\n\n// optionally compute the 4th component\n#if vtkNumComponents >= 4 && !defined(vtkComponent3Proportional)\n  result[3].xyz = vec3(distX.a, distY.a, distZ.a);\n  result[3].a = length(result[3].xyz);\n  result[3].xyz *= rot;\n  if (result[3].w > 0.0)\n  {\n    result[3].xyz /= result[3].w;\n  }\n#endif\n\n  return result;\n}\n\n//=======================================================================\n// Given a normal compute the gradient opacity factors\n//\nfloat computeGradientOpacityFactor(\n  vec4 normal, float goscale, float goshift, float gomin, float gomax)\n{\n#if defined(vtkGradientOpacityOn)\n  return clamp(normal.a*goscale + goshift, gomin, gomax);\n#else\n  return 1.0;\n#endif\n}\n\n#if vtkLightComplexity > 0\nvoid applyLighting(inout vec3 tColor, vec4 normal)\n{\n  vec3 diffuse = vec3(0.0, 0.0, 0.0);\n  vec3 specular = vec3(0.0, 0.0, 0.0);\n  //VTK::Light::Impl\n  tColor.rgb = tColor.rgb*(diffuse*vDiffuse + vAmbient) + specular*vSpecular;\n}\n#endif\n\n//=======================================================================\n// Given a texture value compute the color and opacity\n//\nvec4 getColorForValue(vec4 tValue, vec3 posIS, vec3 tstep)\n{\n#ifdef vtkImageLabelOutlineOn\n  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord); // pos in texture space\n  vec4 centerValue = getTextureValue(centerPosIS);\n  bool pixelOnBorder = false;\n  vec4 tColor = texture2D(ctexture, vec2(centerValue.r * cscale0 + cshift0, 0.5));\n\n  // Get alpha of segment from opacity function.\n  tColor.a = texture2D(otexture, vec2(centerValue.r * oscale0 + oshift0, 0.5)).r;\n\n  // Only perform outline check on fragments rendering voxels that aren't invisible.\n  // Saves a bunch of needless checks on the background.\n  // TODO define epsilon when building shader?\n  if (float(tColor.a) > 0.01) {\n    for (int i = -outlineThickness; i <= outlineThickness; i++) {\n      for (int j = -outlineThickness; j <= outlineThickness; j++) {\n        if (i == 0 || j == 0) {\n          continue;\n        }\n\n        vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),\n          gl_FragCoord.y + float(j),\n          gl_FragCoord.z, gl_FragCoord.w);\n\n        vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);\n        vec4 value = getTextureValue(neighborPosIS);\n\n        // If any of my neighbours are not the same value as I\n        // am, this means I am on the border of the segment.\n        // We can break the loops\n        if (any(notEqual(value, centerValue))) {\n          pixelOnBorder = true;\n          break;\n        }\n      }\n\n      if (pixelOnBorder == true) {\n        break;\n      }\n    }\n\n    // If I am on the border, I am displayed at full opacity\n    if (pixelOnBorder == true) {\n      tColor.a = 1.0;\n    }\n  }\n\n#else\n  // compute the normal and gradient magnitude if needed\n  // We compute it as a vec4 if possible otherwise a mat4\n  //\n  vec4 goFactor = vec4(1.0,1.0,1.0,1.0);\n\n  // compute the normal vectors as needed\n  #if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)\n    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\n      mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);\n      #if !defined(vtkComponent0Proportional)\n        vec4 normal0 = normalMat[0];\n      #endif\n      #if !defined(vtkComponent1Proportional)\n        vec4 normal1 = normalMat[1];\n      #endif\n      #if vtkNumComponents > 2\n        #if !defined(vtkComponent2Proportional)\n          vec4 normal2 = normalMat[2];\n        #endif\n        #if vtkNumComponents > 3\n          #if !defined(vtkComponent3Proportional)\n            vec4 normal3 = normalMat[3];\n          #endif\n        #endif\n      #endif\n    #else\n      vec4 normal0 = computeNormal(posIS, tValue.a, tstep);\n    #endif\n  #endif\n\n  // compute gradient opacity factors as needed\n  #if defined(vtkGradientOpacityOn)\n    #if !defined(vtkComponent0Proportional)\n      goFactor.x =\n        computeGradientOpacityFactor(normal0, goscale0, goshift0, gomin0, gomax0);\n    #endif\n    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\n      #if !defined(vtkComponent1Proportional)\n        goFactor.y =\n          computeGradientOpacityFactor(normal1, goscale1, goshift1, gomin1, gomax1);\n      #endif\n      #if vtkNumComponents > 2\n        #if !defined(vtkComponent2Proportional)\n          goFactor.z =\n            computeGradientOpacityFactor(normal2, goscale2, goshift2, gomin2, gomax2);\n        #endif\n        #if vtkNumComponents > 3\n          #if !defined(vtkComponent3Proportional)\n            goFactor.w =\n              computeGradientOpacityFactor(normal3, goscale3, goshift3, gomin3, gomax3);\n          #endif\n        #endif\n      #endif\n    #endif\n  #endif\n\n  // single component is always independent\n  #if vtkNumComponents == 1\n    vec4 tColor = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, 0.5));\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;\n  #endif\n\n  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n    vec4 tColor = mix0*texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, height0));\n    #if !defined(vtkComponent0Proportional)\n      tColor.a = goFactor.x*mix0*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;\n    #else\n      float pwfValue = texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;\n      tColor *= pwfValue;\n      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix0));\n    #endif\n\n    vec3 tColor1 = mix1*texture2D(ctexture, vec2(tValue.g * cscale1 + cshift1, height1)).rgb;\n    #if !defined(vtkComponent1Proportional)\n      tColor.a += goFactor.y*mix1*texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;\n    #else\n      float pwfValue = texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;\n      tColor1 *= pwfValue;\n      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix1));\n    #endif\n\n    #if vtkNumComponents >= 3\n      vec3 tColor2 = mix2*texture2D(ctexture, vec2(tValue.b * cscale2 + cshift2, height2)).rgb;\n      #if !defined(vtkComponent2Proportional)\n        tColor.a += goFactor.z*mix2*texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;\n      #else\n        float pwfValue = texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;\n        tColor2 *= pwfValue;\n        tColor.a *= mix(pwfValue, 1.0, (1.0 - mix2));\n      #endif\n\n      #if vtkNumComponents >= 4\n        vec3 tColor3 = mix3*texture2D(ctexture, vec2(tValue.a * cscale3 + cshift3, height3)).rgb;\n        #if !defined(vtkComponent3Proportional)\n          tColor.a += goFactor.w*mix3*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;\n        #else\n          float pwfValue = texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;\n          tColor3 *= pwfValue;\n          tColor.a *= mix(pwfValue, 1.0, (1.0 - mix3));\n        #endif\n      #endif\n    #endif\n  #else // then not independent\n\n  #if vtkNumComponents == 2\n    float lum = tValue.r * cscale0 + cshift0;\n    float alpha = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale1 + oshift1, 0.5)).r;\n    vec4 tColor = vec4(lum, lum, lum, alpha);\n  #endif\n  #if vtkNumComponents == 3\n    vec4 tColor;\n    tColor.r = tValue.r * cscale0 + cshift0;\n    tColor.g = tValue.g * cscale1 + cshift1;\n    tColor.b = tValue.b * cscale2 + cshift2;\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale0 + oshift0, 0.5)).r;\n  #endif\n  #if vtkNumComponents == 4\n    vec4 tColor;\n    tColor.r = tValue.r * cscale0 + cshift0;\n    tColor.g = tValue.g * cscale1 + cshift1;\n    tColor.b = tValue.b * cscale2 + cshift2;\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, 0.5)).r;\n  #endif\n  #endif // dependent\n\n  // apply lighting if requested as appropriate\n  #if vtkLightComplexity > 0\n    #if !defined(vtkComponent0Proportional)\n      applyLighting(tColor.rgb, normal0);\n    #endif\n  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n    #if !defined(vtkComponent1Proportional)\n      applyLighting(tColor1, normal1);\n    #endif\n  #if vtkNumComponents >= 3\n    #if !defined(vtkComponent2Proportional)\n      applyLighting(tColor2, normal2);\n    #endif\n  #if vtkNumComponents >= 4\n    #if !defined(vtkComponent3Proportional)\n      applyLighting(tColor3, normal3);\n    #endif\n  #endif\n  #endif\n  #endif\n#endif\n\n// perform final independent blend as needed\n#if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n  tColor.rgb += tColor1;\n#if vtkNumComponents >= 3\n  tColor.rgb += tColor2;\n#if vtkNumComponents >= 4\n  tColor.rgb += tColor3;\n#endif\n#endif\n#endif\n\n#endif\n\n\n\n\n\n\n\nreturn tColor;\n}\n\n\n\n//=======================================================================\n// Apply the specified blend mode operation along the ray's path.\n//\nvoid applyBlend(vec3 posIS, vec3 endIS, float sampleDistanceIS, vec3 tdims)\n{\n  vec3 tstep = 1.0/tdims;\n\n  // start slightly inside and apply some jitter\n  vec3 delta = endIS - posIS;\n  vec3 stepIS = normalize(delta)*sampleDistanceIS;\n  float raySteps = length(delta)/sampleDistanceIS;\n\n  // avoid 0.0 jitter\n  float jitter = 0.01 + 0.99*texture2D(jtexture, gl_FragCoord.xy/32.0).r;\n  float stepsTraveled = jitter;\n\n  // local vars for the loop\n  vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 tValue;\n  vec4 tColor;\n\n  // if we have less than one step then pick the middle point\n  // as our value\n  // if (raySteps <= 1.0)\n  // {\n  //   posIS = (posIS + endIS)*0.5;\n  // }\n\n  // Perform initial step at the volume boundary\n  // compute the scalar\n  tValue = getTextureValue(posIS);\n\n  #if vtkBlendMode == 0 // COMPOSITE_BLEND\n    // now map through opacity and color\n    tColor = getColorForValue(tValue, posIS, tstep);\n\n    // handle very thin volumes\n    if (raySteps <= 1.0)\n    {\n      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps);\n      gl_FragData[0] = tColor;\n      return;\n    }\n\n    tColor.a = 1.0 - pow(1.0 - tColor.a, jitter);\n    color = vec4(tColor.rgb*tColor.a, tColor.a);\n    posIS += (jitter*stepIS);\n\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // now map through opacity and color\n      tColor = getColorForValue(tValue, posIS, tstep);\n\n      float mix = (1.0 - color.a);\n\n      // this line should not be needed but nvidia seems to not handle\n      // the break correctly on windows/chrome 58 angle\n      //mix = mix * sign(max(raySteps - stepsTraveled - 1.0, 0.0));\n\n      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;\n      stepsTraveled++;\n      posIS += stepIS;\n      if (color.a > 0.99) { color.a = 1.0; break; }\n    }\n\n    if (color.a < 0.99 && (raySteps - stepsTraveled) > 0.0)\n    {\n      posIS = endIS;\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // now map through opacity and color\n      tColor = getColorForValue(tValue, posIS, tstep);\n      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps - stepsTraveled);\n\n      float mix = (1.0 - color.a);\n      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;\n    }\n\n    gl_FragData[0] = vec4(color.rgb/color.a, color.a);\n  #endif\n  #if vtkBlendMode == 1 || vtkBlendMode == 2\n    // MAXIMUM_INTENSITY_BLEND || MINIMUM_INTENSITY_BLEND\n    // Find maximum/minimum intensity along the ray.\n\n    // Define the operation we will use (min or max)\n    #if vtkBlendMode == 1\n    #define OP max\n    #else\n    #define OP min\n    #endif\n\n    // If the clipping range is shorter than the sample distance\n    // we can skip the sampling loop along the ray.\n    if (raySteps <= 1.0)\n    {\n      gl_FragData[0] = getColorForValue(tValue, posIS, tstep);\n      return;\n    }\n\n    vec4 value = tValue;\n    posIS += (jitter*stepIS);\n\n    // Sample along the ray until MaximumSamplesValue,\n    // ending slightly inside the total distance\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // Update the maximum value if necessary\n      value = OP(tValue, value);\n\n      // Otherwise, continue along the ray\n      stepsTraveled++;\n      posIS += stepIS;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posIS = endIS;\n    tValue = getTextureValue(posIS);\n    value = OP(tValue, value);\n\n    // Now map through opacity and color\n    gl_FragData[0] = getColorForValue(value, posIS, tstep);\n  #endif\n  #if vtkBlendMode == 3 //AVERAGE_INTENSITY_BLEND\n    vec4 averageIPScalarRangeMin = vec4 (\n      //VTK::AverageIPScalarRangeMin,\n      //VTK::AverageIPScalarRangeMin,\n      //VTK::AverageIPScalarRangeMin,\n      1.0);\n    vec4 averageIPScalarRangeMax = vec4(\n      //VTK::AverageIPScalarRangeMax,\n      //VTK::AverageIPScalarRangeMax,\n      //VTK::AverageIPScalarRangeMax,\n      1.0);\n\n    vec4 sum = vec4(0.);\n\n    averageIPScalarRangeMin.a = tValue.a;\n    averageIPScalarRangeMax.a = tValue.a;\n\n    if (all(greaterThanEqual(tValue, averageIPScalarRangeMin)) &&\n    all(lessThanEqual(tValue, averageIPScalarRangeMax))) {\n      sum += tValue;\n    }\n\n    if (raySteps <= 1.0) {\n      gl_FragData[0] = getColorForValue(sum, posIS, tstep);\n      return;\n    }\n\n    posIS += (jitter*stepIS);\n\n    // Sample along the ray until MaximumSamplesValue,\n    // ending slightly inside the total distance\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation.\n      // Notes:\n      // - We are comparing all values in the texture to see if any of them\n      //   are outside of the scalar range. In the future we might want to allow\n      //   scalar ranges for each component.\n      // - We are setting the alpha channel for averageIPScalarRangeMin and\n      //   averageIPScalarRangeMax so that we do not trigger this 'continue'\n      //   based on the alpha channel comparison.\n      // - There might be a better way to do this. I'm not sure if there is an\n      //   equivalent of 'any' which only operates on RGB, though I suppose\n      //   we could write an 'anyRGB' function and see if that is faster.\n      averageIPScalarRangeMin.a = tValue.a;\n      averageIPScalarRangeMax.a = tValue.a;\n      if (any(lessThan(tValue, averageIPScalarRangeMin)) ||\n          any(greaterThan(tValue, averageIPScalarRangeMax))) {\n        continue;\n      }\n\n      // Sum the values across each step in the path\n      sum += tValue;\n\n      // Otherwise, continue along the ray\n      stepsTraveled++;\n      posIS += stepIS;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posIS = endIS;\n\n    // compute the scalar\n    tValue = getTextureValue(posIS);\n\n    // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation\n    if (all(greaterThanEqual(tValue, averageIPScalarRangeMin)) &&\n        all(lessThanEqual(tValue, averageIPScalarRangeMax))) {\n      sum += tValue;\n\n      stepsTraveled++;\n    }\n\n    sum /= vec4(stepsTraveled, stepsTraveled, stepsTraveled, 1.0);\n\n    gl_FragData[0] = getColorForValue(sum, posIS, tstep);\n  #endif\n}\n\n//=======================================================================\n// Compute a new start and end point for a given ray based\n// on the provided bounded clipping plane (aka a rectangle)\nvoid getRayPointIntersectionBounds(\n  vec3 rayPos, vec3 rayDir,\n  vec3 planeDir, float planeDist,\n  inout vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,\n  float vSize1, float vSize2)\n{\n  float result = dot(rayDir, planeDir);\n  if (result == 0.0)\n  {\n    return;\n  }\n  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;\n  vec3 xposVC = rayPos + rayDir*result;\n  vec3 vxpos = xposVC - vOriginVC;\n  vec2 vpos = vec2(\n    dot(vxpos, vPlaneX),\n    dot(vxpos, vPlaneY));\n\n  // on some apple nvidia systems this does not work\n  // if (vpos.x < 0.0 || vpos.x > vSize1 ||\n  //     vpos.y < 0.0 || vpos.y > vSize2)\n  // even just\n  // if (vpos.x < 0.0 || vpos.y < 0.0)\n  // fails\n  // so instead we compute a value that represents in and out\n  //and then compute the return using this value\n  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds\n  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out\n\n  tbounds = mix(\n   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value\n   tbounds, // out value\n   check);  // 0 in 1 out\n}\n\n//=======================================================================\n// given a\n// - ray direction (rayDir)\n// - starting point (vertexVCVSOutput)\n// - bounding planes of the volume\n// - optionally depth buffer values\n// - far clipping plane\n// compute the start/end distances of the ray we need to cast\nvec2 computeRayDistances(vec3 rayDir, vec3 tdims)\n{\n  vec2 dists = vec2(100.0*camFar, -1.0);\n\n  vec3 vSize = vSpacing*(tdims - 1.0);\n\n  // all this is in View Coordinates\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal0, vPlaneDistance0, dists, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal1, vPlaneDistance1, dists, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal2, vPlaneDistance2, dists, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal3, vPlaneDistance3, dists, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal4, vPlaneDistance4, dists, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal5, vPlaneDistance5, dists, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n\n  //VTK::ClipPlane::Impl\n\n  // do not go behind front clipping plane\n  dists.x = max(0.0,dists.x);\n\n  // do not go PAST far clipping plane\n  float farDist = -camThick/rayDir.z;\n  dists.y = min(farDist,dists.y);\n\n  // Do not go past the zbuffer value if set\n  // This is used for intermixing opaque geometry\n  //VTK::ZBuffer::Impl\n\n  return dists;\n}\n\n//=======================================================================\n// Compute the index space starting position (pos) and end\n// position\n//\nvoid computeIndexSpaceValues(out vec3 pos, out vec3 endPos, out float sampleDistanceIS, vec3 rayDir, vec2 dists)\n{\n  // compute starting and ending values in volume space\n  pos = vertexVCVSOutput + dists.x*rayDir;\n  pos = pos - vOriginVC;\n  // convert to volume basis and origin\n  pos = vec3(\n    dot(pos, vPlaneNormal0),\n    dot(pos, vPlaneNormal2),\n    dot(pos, vPlaneNormal4));\n\n  endPos = vertexVCVSOutput + dists.y*rayDir;\n  endPos = endPos - vOriginVC;\n  endPos = vec3(\n    dot(endPos, vPlaneNormal0),\n    dot(endPos, vPlaneNormal2),\n    dot(endPos, vPlaneNormal4));\n\n  float delta = length(endPos - pos);\n\n  pos *= vVCToIJK;\n  endPos *= vVCToIJK;\n\n  float delta2 = length(endPos - pos);\n  sampleDistanceIS = sampleDistance*delta2/delta;\n}\n\nvoid main()\n{\n\n  vec3 rayDirVC;\n\n  if (cameraParallel == 1)\n  {\n    // Camera is parallel, so the rayDir is just the direction of the camera.\n    rayDirVC = vec3(0.0, 0.0, -1.0);\n  } else {\n    // camera is at 0,0,0 so rayDir for perspective is just the vc coord\n    rayDirVC = normalize(vertexVCVSOutput);\n  }\n\n  vec3 tdims = vec3(volumeDimensions);\n\n  // compute the start and end points for the ray\n  vec2 rayStartEndDistancesVC = computeRayDistances(rayDirVC, tdims);\n\n  // do we need to composite? aka does the ray have any length\n  // If not, bail out early\n  if (rayStartEndDistancesVC.y <= rayStartEndDistancesVC.x)\n  {\n    discard;\n  }\n\n  // IS = Index Space\n  vec3 posIS;\n  vec3 endIS;\n  float sampleDistanceIS;\n  computeIndexSpaceValues(posIS, endIS, sampleDistanceIS, rayDirVC, rayStartEndDistancesVC);\n\n  // Perform the blending operation along the ray\n  applyBlend(posIS, endIS, sampleDistanceIS, tdims);\n}\n",e.Geometry=""},e.replaceShaderValues=function(n,Q,B){var a=n.Fragment;B.getProperty().getInterpolationType()===gl.LINEAR&&(a=xr.substitute(a,"//VTK::TrilinearOn","#define vtkTrilinearOn").result),!0===B.getProperty().getUseLabelOutline()&&(a=xr.substitute(a,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result);var s=t.scalarTexture.getComponents();a=xr.substitute(a,"//VTK::NumComponents","#define vtkNumComponents ".concat(s)).result;var r=B.getProperty().getIndependentComponents();if(r){a=xr.substitute(a,"//VTK::IndependentComponentsOn","#define vtkIndependentComponentsOn").result;for(var U=[],F=0;F<s;F++)B.getProperty().getOpacityMode(F)===il.PROPORTIONAL&&U.push("#define vtkComponent".concat(F,"Proportional"));U.length>0&&(a=xr.substitute(a,"//VTK::vtkProportionalComponents",U.join("\n")).result)}var l=t.currentInput.getExtent(),o=t.currentInput.getSpacing(),g=new Float64Array(3);Object(y.p)(g,(l[1]-l[0])*o[0],(l[3]-l[2])*o[1],(l[5]-l[4])*o[2]);var i=Object(y.j)(g)/t.renderable.getSampleDistance();a=xr.substitute(a,"//VTK::MaximumSamplesValue","".concat(Math.ceil(i))).result,a=xr.substitute(a,"//VTK::LightComplexity","#define vtkLightComplexity ".concat(t.lastLightComplexity)).result,t.gopacity=B.getProperty().getUseGradientOpacity(0);for(var c=1;r&&!t.gopacity&&c<s;++c)B.getProperty().getUseGradientOpacity(c)&&(t.gopacity=!0);t.gopacity&&(a=xr.substitute(a,"//VTK::GradientOpacityOn","#define vtkGradientOpacityOn").result),null!==t.zBufferTexture&&(a=xr.substitute(a,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpWidth;","uniform float vpHeight;"]).result,a=xr.substitute(a,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpWidth, gl_FragCoord.y/vpHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;","zdepth = -zdepth/rayDir.z;","dists.y = min(zdepth,dists.y);"]).result),a=xr.substitute(a,"//VTK::BlendMode","".concat(t.renderable.getBlendMode())).result;var d=t.renderable.getAverageIPScalarRange();a=xr.substitute(a,"//VTK::AverageIPScalarRangeMin","".concat(d[0],".0")).result,a=xr.substitute(a,"//VTK::AverageIPScalarRangeMax","".concat(d[1],".0")).result,n.Fragment=a,e.replaceShaderLight(n,Q,B),e.replaceShaderClippingPlane(n,Q,B)},e.replaceShaderLight=function(e,n,Q){var B=e.Fragment;switch(t.lastLightComplexity){default:case 0:break;case 1:case 2:case 3:var a=0;n.getLights().forEach((function(e){e.getSwitch()>0&&(B=xr.substitute(B,"//VTK::Light::Dec",["uniform vec3 lightColor".concat(a,";"),"uniform vec3 lightDirectionVC".concat(a,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(a,"; // normalized"),"//VTK::Light::Dec"],!1).result,B=xr.substitute(B,"//VTK::Light::Impl",["  float df = abs(dot(normal.rgb, -lightDirectionVC".concat(a,"));"),"  diffuse += ((df".concat("",") * lightColor").concat(a,");"),"    float sf = pow( abs(dot(lightHalfAngleVC".concat(a,",normal.rgb)), vSpecularPower);"),"    specular += ((sf".concat("",") * lightColor").concat(a,");"),"  //VTK::Light::Impl"],!1).result,a++)}))}e.Fragment=B},e.replaceShaderClippingPlane=function(e,n,Q){var B=e.Fragment;if(t.renderable.getClippingPlanes().length>0){var a=t.renderable.getClippingPlanes().length;B=xr.substitute(B,"//VTK::ClipPlane::Dec",["uniform vec3 vClipPlaneNormals[6];","uniform float vClipPlaneDistances[6];","//VTK::ClipPlane::Dec"],!1).result,B=xr.substitute(B,"//VTK::ClipPlane::Impl",["for(int i = 0; i < ".concat(a,"; i++) {"),"  float rayDirRatio = dot(rayDir, vClipPlaneNormals[i]);","  float equationResult = dot(vertexVCVSOutput, vClipPlaneNormals[i]) + vClipPlaneDistances[i];","  if (rayDirRatio == 0.0)","  {","    if (equationResult < 0.0) dists.x = dists.y;","    continue;","  }","  float result = -1.0 * equationResult / rayDirRatio;","  if (rayDirRatio < 0.0) dists.y = min(dists.y, result);","  else dists.x = max(dists.x, result);","}","//VTK::ClipPlane::Impl"],!1).result}e.Fragment=B},e.getNeedToRebuildShaders=function(n,Q,B){var a=0;B.getProperty().getShade()&&t.renderable.getBlendMode()===dl.COMPOSITE_BLEND&&(a=0,t.numberOfLights=0,Q.getLights().forEach((function(e){e.getSwitch()>0&&(t.numberOfLights++,0===a&&(a=1)),1===a&&(t.numberOfLights>1||1!==e.getIntensity()||!e.lightTypeIsHeadLight())&&(a=2),a<3&&e.getPositional()&&(a=3)})));var s=!1;t.lastLightComplexity!==a&&(t.lastLightComplexity=a,s=!0);var r=t.scalarTexture.getComponents(),U=B.getProperty().getIndependentComponents(),F=!1,l=[];if(U){for(var o=0;o<r;o++)l.push(B.getProperty().getOpacityMode(o));l.length>0&&(F=!0)}var g=t.currentInput.getExtent(),i=t.currentInput.getSpacing(),c=new Float64Array(3);Object(y.p)(c,(g[1]-g[0])*i[0],(g[3]-g[2])*i[1],(g[5]-g[4])*i[2]);var d=Object(y.j)(c)/t.renderable.getSampleDistance(),I={interpolationType:B.getProperty().getInterpolationType(),useLabelOutline:B.getProperty().getUseLabelOutline(),numComp:r,usesProportionalComponents:F,iComps:U,maxSamples:d,useGradientOpacity:B.getProperty().getUseGradientOpacity(0),blendMode:t.renderable.getBlendMode(),averageIPScalarMode:t.renderable.getAverageIPScalarRange(),proportionalComponents:l};return t.previousState&&t.previousState.interpolationType===I.interpolationType&&t.previousState.useLabelOutline===I.useLabelOutline&&t.previousState.numComp===I.numComp&&t.previousState.usesProportionalComponents===I.usesProportionalComponents&&t.previousState.iComps===I.iComps&&t.previousState.maxSamples===I.maxSamples&&t.previousState.useGradientOpacity===I.useGradientOpacity&&t.previousState.blendMode===I.blendMode&&bl(t.previousState.averageIPScalarMode,I.averageIPScalarMode)&&bl(t.previousState.proportionalComponents,I.proportionalComponents)?!!(0===n.getProgram()||s||t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||!!t.lastZBufferTexture!=!!t.zBufferTexture||n.getShaderSourceTime().getMTime()<e.getMTime()||n.getShaderSourceTime().getMTime()<t.renderable.getMTime())&&(t.lastZBufferTexture=t.zBufferTexture,!0):(t.previousState=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ul(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ul(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},I),!0)},e.updateShaders=function(n,Q,B){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,Q,B)){var a={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(a,Q,B);var s=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);s!==n.getProgram()&&(n.setProgram(s),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,Q,B),e.setCameraShaderParameters(n,Q,B),e.setPropertyShaderParameters(n,Q,B),e.getClippingPlaneShaderParameters(n,Q,B)},e.setMapperShaderParameters=function(n,Q,B){var a=n.getProgram();if(n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(a.isAttributeUsed("vertexDC")&&(n.getVAO().addAttributeArray(a,n.getCABO(),"vertexDC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||ml("Error setting vertexDC in shader VAO.")),n.getAttributeUpdateTime().modified()),a.setUniformi("texture1",t.scalarTexture.getTextureUnit()),a.setUniformf("sampleDistance",t.renderable.getSampleDistance()),null!==t.zBufferTexture){a.setUniformi("zBufferTexture",t.zBufferTexture.getTextureUnit());var s=e.getRenderTargetSize();a.setUniformf("vpWidth",s[0]),a.setUniformf("vpHeight",s[1])}},e.setCameraShaderParameters=function(n,Q,B){var a=t.openGLCamera.getKeyMatrices(Q),s=t.openGLVolume.getKeyMatrices();Object(S.l)(t.modelToView,a.wcvc,s.mcwc);var r=n.getProgram(),U=t.openGLCamera.getRenderable(),F=U.getClippingRange();r.setUniformf("camThick",F[1]-F[0]),r.setUniformf("camNear",F[0]),r.setUniformf("camFar",F[1]);for(var l=t.currentInput.getBounds(),o=t.currentInput.getDimensions(),g=new Float64Array(3),i=new Float64Array(3),c=1,d=-1,I=1,u=-1,C=0;C<8;++C){if(Object(y.p)(g,l[C%2],l[2+Math.floor(C/2)%2],l[4+Math.floor(C/4)]),Object(y.q)(g,g,t.modelToView),!U.getParallelProjection()){Object(y.l)(i,g);var m=-F[0]/g[2];Object(y.b)(g,i,m)}Object(y.q)(g,g,a.vcpc),c=Math.min(g[0],c),d=Math.max(g[0],d),I=Math.min(g[1],I),u=Math.max(g[1],u)}r.setUniformf("dcxmin",c),r.setUniformf("dcxmax",d),r.setUniformf("dcymin",I),r.setUniformf("dcymax",u),r.isUniformUsed("cameraParallel")&&r.setUniformi("cameraParallel",U.getParallelProjection());var b=t.currentInput.getExtent(),Z=t.currentInput.getSpacing(),x=new Float64Array(3);Object(y.p)(x,(b[1]-b[0]+1)*Z[0],(b[3]-b[2]+1)*Z[1],(b[5]-b[4]+1)*Z[2]),r.setUniform3f("vSpacing",Z[0],Z[1],Z[2]),Object(y.p)(g,b[0],b[2],b[4]),t.currentInput.indexToWorldVec3(g,g),Object(y.q)(g,g,t.modelToView),r.setUniform3f("vOriginVC",g[0],g[1],g[2]);var G=t.currentInput.getIndexToWorld();Object(S.l)(t.idxToView,t.modelToView,G),mt(t.idxNormalMatrix,a.normalMatrix,s.normalMatrix),mt(t.idxNormalMatrix,t.idxNormalMatrix,t.currentInput.getDirection());var V=Object(y.j)(x)/t.renderable.getSampleDistance();V>t.renderable.getMaximumSamplesPerRay()&&Cl("The number of steps required ".concat(Math.ceil(V)," is larger than the\n        specified maximum number of steps ").concat(t.renderable.getMaximumSamplesPerRay(),".\n        Please either change the\n        volumeMapper sampleDistance or its maximum number of samples."));var R=new Float64Array(3);if(Object(y.p)(R,1,1,1),Object(y.k)(R,R,x),r.setUniform3f("vVCToIJK",R[0],R[1],R[2]),r.setUniform3i("volumeDimensions",o[0],o[1],o[2]),!t.openGLRenderWindow.getWebgl2()){var L=t.scalarTexture.getVolumeInfo();r.setUniformf("texWidth",t.scalarTexture.getWidth()),r.setUniformf("texHeight",t.scalarTexture.getHeight()),r.setUniformi("xreps",L.xreps),r.setUniformi("xstride",L.xstride),r.setUniformi("ystride",L.ystride)}for(var p=new Float64Array(3),h=new Float64Array(3),N=0;N<6;++N){switch(N){default:case 0:Object(y.p)(p,1,0,0),Object(y.p)(h,b[1],b[3],b[5]);break;case 1:Object(y.p)(p,-1,0,0),Object(y.p)(h,b[0],b[2],b[4]);break;case 2:Object(y.p)(p,0,1,0),Object(y.p)(h,b[1],b[3],b[5]);break;case 3:Object(y.p)(p,0,-1,0),Object(y.p)(h,b[0],b[2],b[4]);break;case 4:Object(y.p)(p,0,0,1),Object(y.p)(h,b[1],b[3],b[5]);break;case 5:Object(y.p)(p,0,0,-1),Object(y.p)(h,b[0],b[2],b[4])}Object(y.m)(p,p,t.idxNormalMatrix),Object(y.q)(h,h,t.idxToView);var D=-1*Object(y.d)(h,p);if(r.setUniform3f("vPlaneNormal".concat(N),p[0],p[1],p[2]),r.setUniformf("vPlaneDistance".concat(N),D),B.getProperty().getUseLabelOutline()){var A=t.currentInput.getWorldToIndex();r.setUniformMatrix("vWCtoIDX",A),Object(S.g)(t.projectionToWorld,a.wcpc),r.setUniformMatrix("PCWCMatrix",t.projectionToWorld);var E=e.getRenderTargetSize();r.setUniformf("vpWidth",E[0]),r.setUniformf("vpHeight",E[1])}}switch(Object(S.g)(t.projectionToView,a.vcpc),r.setUniformMatrix("PCVCMatrix",t.projectionToView),t.lastLightComplexity){default:case 0:break;case 1:case 2:case 3:var f=0,J=[];Q.getLights().forEach((function(e){if(e.getSwitch()>0){var t=e.getColor(),n=e.getIntensity();J[0]=t[0]*n,J[1]=t[1]*n,J[2]=t[2]*n,r.setUniform3fArray("lightColor".concat(f),J);var Q=e.getDirection();Object(y.p)(p,Q[0],Q[1],Q[2]),Object(y.m)(p,p,a.normalMatrix),r.setUniform3f("lightDirectionVC".concat(f),p[0],p[1],p[2]);var B=[-.5*p[0],-.5*p[1],-.5*(p[2]-1)];r.setUniform3fArray("lightHalfAngleVC".concat(f),B),f++}}))}},e.setPropertyShaderParameters=function(e,n,Q){var B=e.getProgram();B.setUniformi("ctexture",t.colorTexture.getTextureUnit()),B.setUniformi("otexture",t.opacityTexture.getTextureUnit()),B.setUniformi("jtexture",t.jitterTexture.getTextureUnit());var a=t.scalarTexture.getVolumeInfo(),s=Q.getProperty(),r=t.scalarTexture.getComponents(),U=Q.getProperty().getIndependentComponents();if(U&&r>=2)for(var F=0;F<r;F++)B.setUniformf("mix".concat(F),Q.getProperty().getComponentWeight(F));for(var l=0;l<r;l++){var o=U?l:0,g=a.scale[l],i=s.getScalarOpacity(o).getRange(),c=g/(i[1]-i[0]),d=(a.offset[l]-i[0])/(i[1]-i[0]);B.setUniformf("oshift".concat(l),d),B.setUniformf("oscale".concat(l),c);var I=s.getRGBTransferFunction(o).getRange();B.setUniformf("cshift".concat(l),(a.offset[l]-I[0])/(I[1]-I[0])),B.setUniformf("cscale".concat(l),g/(I[1]-I[0]))}if(t.gopacity)if(U)for(var u=0;u<r;++u){var C=a.scale[u];if(s.getUseGradientOpacity(u)){var m=s.getGradientOpacityMinimumOpacity(u),b=s.getGradientOpacityMaximumOpacity(u);B.setUniformf("gomin".concat(u),m),B.setUniformf("gomax".concat(u),b);var S=[s.getGradientOpacityMinimumValue(u),s.getGradientOpacityMaximumValue(u)];B.setUniformf("goscale".concat(u),C*(b-m)/(S[1]-S[0])),B.setUniformf("goshift".concat(u),-S[0]*(b-m)/(S[1]-S[0])+m)}else B.setUniformf("gomin".concat(u),1),B.setUniformf("gomax".concat(u),1),B.setUniformf("goscale".concat(u),0),B.setUniformf("goshift".concat(u),1)}else{var y=a.scale[r-1],Z=s.getGradientOpacityMinimumOpacity(0),x=s.getGradientOpacityMaximumOpacity(0);B.setUniformf("gomin0",Z),B.setUniformf("gomax0",x);var G=[s.getGradientOpacityMinimumValue(0),s.getGradientOpacityMaximumValue(0)];B.setUniformf("goscale0",y*(x-Z)/(G[1]-G[0])),B.setUniformf("goshift0",-G[0]*(x-Z)/(G[1]-G[0])+Z)}if(!0===Q.getProperty().getUseLabelOutline()){var V=Q.getProperty().getLabelOutlineThickness();B.setUniformi("outlineThickness",V)}t.lastLightComplexity>0&&(B.setUniformf("vAmbient",s.getAmbient()),B.setUniformf("vDiffuse",s.getDiffuse()),B.setUniformf("vSpecular",s.getSpecular()),B.setUniformf("vSpecularPower",s.getSpecularPower()))},e.getClippingPlaneShaderParameters=function(e,n,Q){if(t.renderable.getClippingPlanes().length>0){for(var B=t.openGLCamera.getKeyMatrices(n),a=[],s=[],r=t.renderable.getClippingPlanes(),U=r.length,F=0;F<U;++F){var l=r[F].getNormal(),o=r[F].getOrigin();Object(y.m)(l,l,B.normalMatrix),Object(y.q)(o,o,B.wcvc);var g=-1*Object(y.d)(o,l);a.push(l[0]),a.push(l[1]),a.push(l[2]),s.push(g)}var i=e.getProgram();i.setUniform3fv("vClipPlaneNormals",a),i.setUniformfv("vClipPlaneDistances",s)}},e.getRenderTargetSize=function(){if(t.lastXYF>1.43){var e=t.framebuffer.getSize();return[t.fvp[0]*e[0],t.fvp[1]*e[1]]}return t.openGLRenderWindow.getFramebufferSize()},e.renderPieceStart=function(n,Q){if(t.renderable.getAutoAdjustSampleDistances()){var B=n.getVTKWindow().getInteractor(),a=B.getLastFrameTime();if(t.avgFrameTime=.97*t.avgFrameTime+.03*a,t.avgWindowArea=.97*t.avgWindowArea+.03/(t.lastXYF*t.lastXYF),n.getVTKWindow().getInteractor().isAnimating()){var s=Math.sqrt(t.avgFrameTime*B.getDesiredUpdateRate()/t.avgWindowArea);s>10&&(s=10),t.targetXYF=s}else t.targetXYF=Math.sqrt(t.avgFrameTime*B.getStillUpdateRate()/t.avgWindowArea);t.targetXYF<1.53&&t.targetXYF>1.33&&(t.targetXYF=t.lastXYF),Math.abs(1-t.targetXYF/t.lastXYF)<.1&&(t.targetXYF=t.lastXYF),t.lastXYF=t.targetXYF}else t.lastXYF=t.renderable.getImageSampleDistance();t.lastXYF<=1.43&&(t.lastXYF=1);var r=t.lastXYF,U=t.openGLRenderWindow.getFramebufferSize();if(r>1.43){if(t.framebuffer.saveCurrentBindingsAndBuffers(),null===t.framebuffer.getGLFramebuffer())t.framebuffer.create(Math.floor(.7*U[0]),Math.floor(.7*U[1])),t.framebuffer.populateFramebuffer();else{var F=t.framebuffer.getSize();F[0]===Math.floor(.7*U[0])&&F[1]===Math.floor(.7*U[1])||(t.framebuffer.create(Math.floor(.7*U[0]),Math.floor(.7*U[1])),t.framebuffer.populateFramebuffer())}t.framebuffer.bind();var l=t.context;l.clearColor(0,0,0,0),l.colorMask(!0,!0,!0,!0),l.clear(l.COLOR_BUFFER_BIT),l.viewport(0,0,U[0]/r,U[1]/r),t.fvp=[Math.floor(U[0]/r)/Math.floor(.7*U[0]),Math.floor(U[1]/r)/Math.floor(.7*U[1])]}t.context.disable(t.context.DEPTH_TEST),e.updateBufferObjects(n,Q),Q.getProperty().getInterpolationType()===gl.NEAREST?(t.scalarTexture.setMinificationFilter(Ga.NEAREST),t.scalarTexture.setMagnificationFilter(Ga.NEAREST)):(t.scalarTexture.setMinificationFilter(Ga.LINEAR),t.scalarTexture.setMagnificationFilter(Ga.LINEAR)),t.lastBoundBO=null,null!==t.zBufferTexture&&t.zBufferTexture.activate()},e.renderPieceDraw=function(n,Q){var B=t.context;t.scalarTexture.activate(),t.opacityTexture.activate(),t.colorTexture.activate(),t.jitterTexture.activate(),e.updateShaders(t.tris,n,Q),B.drawArrays(B.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.scalarTexture.deactivate(),t.colorTexture.deactivate(),t.opacityTexture.deactivate(),t.jitterTexture.deactivate()},e.renderPieceFinish=function(e,n){if(null!==t.zBufferTexture&&t.zBufferTexture.deactivate(),t.lastXYF>1.43){if(t.framebuffer.restorePreviousBindingsAndBuffers(),null===t.copyShader){t.copyShader=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join("\n"),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join("\n"),"");var Q=t.copyShader;t.copyVAO=zr.newInstance(),t.copyVAO.setOpenGLRenderWindow(t.openGLRenderWindow),t.tris.getCABO().bind(),t.copyVAO.addAttributeArray(Q,t.tris.getCABO(),"vertexDC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||ml("Error setting vertexDC in copy shader VAO.")}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(t.copyShader);var B=t.openGLRenderWindow.getFramebufferSize();t.context.viewport(0,0,B[0],B[1]);var a=t.framebuffer.getColorTexture();a.activate(),t.copyShader.setUniformi("texture",a.getTextureUnit()),t.copyShader.setUniform2f("tfactor",t.fvp[0],t.fvp[1]);var s=t.context;s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),a.deactivate(),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA)}},e.renderPiece=function(n,Q){e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),t.currentInput?(e.renderPieceStart(n,Q),e.renderPieceDraw(n,Q),e.renderPieceFinish(n,Q)):ml("No input!")},e.computeBounds=function(n,Q){e.getInput()?t.bounds=e.getInput().getBounds():Object(u.D)(t.Bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,Q){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<Q.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<Q.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(e,n){var Q=t.currentInput;if(Q){var B=Q.getPointData()&&Q.getPointData().getScalars();if(B){var a=n.getProperty();if(!t.jitterTexture.getHandle()){for(var r=new Uint8Array(1024),U=0;U<1024;++U)r[U]=255*Math.random();t.jitterTexture.setMinificationFilter(Ga.LINEAR),t.jitterTexture.setMagnificationFilter(Ga.LINEAR),t.jitterTexture.create2DFromRaw(32,32,1,J.a.UNSIGNED_CHAR,r)}var F=B.getNumberOfComponents(),l=a.getIndependentComponents()?F:1,o="".concat(a.getMTime());if(t.opacityTextureString!==o){for(var g=1024,i=2048*l,c=new Float32Array(i),d=new Float32Array(g),I=0;I<l;++I){var u=a.getScalarOpacity(I),C=t.renderable.getSampleDistance()/a.getScalarOpacityUnitDistance(I),m=u.getRange();u.getTable(m[0],m[1],g,d,1);for(var b=0;b<g;++b)c[I*g*2+b]=1-Math.pow(1-d[b],C),c[I*g*2+b+g]=c[I*g*2+b]}if(t.opacityTexture.releaseGraphicsResources(t.openGLRenderWindow),t.opacityTexture.setMinificationFilter(Ga.LINEAR),t.opacityTexture.setMagnificationFilter(Ga.LINEAR),t.openGLRenderWindow.getWebgl2()||t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear"))t.opacityTexture.create2DFromRaw(g,2*l,1,J.a.FLOAT,c);else{for(var S=new Uint8Array(i),y=0;y<i;++y)S[y]=255*c[y];t.opacityTexture.create2DFromRaw(g,2*l,1,J.a.UNSIGNED_CHAR,S)}t.opacityTextureString=o}if(o="".concat(a.getMTime()),t.colorTextureString!==o){for(var Z=1024,x=new Uint8Array(2048*l*3),G=new Float32Array(3072),V=0;V<l;++V){var R=a.getRGBTransferFunction(V),L=R.getRange();R.getTable(L[0],L[1],Z,G,1);for(var p=0;p<3072;++p)x[V*Z*6+p]=255*G[p],x[V*Z*6+p+3072]=255*G[p]}t.colorTexture.releaseGraphicsResources(t.openGLRenderWindow),t.colorTexture.setMinificationFilter(Ga.LINEAR),t.colorTexture.setMagnificationFilter(Ga.LINEAR),t.colorTexture.create2DFromRaw(Z,2*l,3,J.a.UNSIGNED_CHAR,x),t.colorTextureString=o}if(o="".concat(Q.getMTime()),t.scalarTextureString!==o){var h=Q.getDimensions();t.scalarTexture.releaseGraphicsResources(t.openGLRenderWindow),t.scalarTexture.resetFormatAndType(),t.scalarTexture.create3DFilterableFromRaw(h[0],h[1],h[2],F,B.getDataType(),B.getData()),t.scalarTextureString=o}if(!t.tris.getCABO().getElementCount()){for(var N=new Float32Array(12),D=0;D<4;D++)N[3*D]=D%2*2-1,N[3*D+1]=D>1?1:-1,N[3*D+2]=-1;var A=new Uint16Array(8);A[0]=3,A[1]=0,A[2]=1,A[3]=3,A[4]=3,A[5]=0,A[6]=3,A[7]=2;var E=s.a.newInstance({numberOfComponents:3,values:N});E.setName("points");var f=s.a.newInstance({numberOfComponents:1,values:A});t.tris.getCABO().createVBO(f,"polys",Fs.SURFACE,{points:E,cellOffset:0})}t.VBOBuildTime.modified()}}}}var yl={context:null,VBOBuildTime:null,scalarTexture:null,scalarTextureString:null,opacityTexture:null,opacityTextureString:null,colorTexture:null,colorTextureString:null,jitterTexture:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,lastLightComplexity:0,fullViewportTime:1,idxToView:null,idxNormalMatrix:null,modelToView:null,projectionToView:null,avgWindowArea:0,avgFrameTime:0};function Zl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yl,n),oa.extend(e,t,n),t.VBOBuildTime={},a.c.obj(t.VBOBuildTime,{mtime:0}),t.tris=_r.newInstance(),t.scalarTexture=va.newInstance(),t.opacityTexture=va.newInstance(),t.colorTexture=va.newInstance(),t.jitterTexture=va.newInstance(),t.jitterTexture.setWrapS(xa.REPEAT),t.jitterTexture.setWrapT(xa.REPEAT),t.framebuffer=ka.newInstance(),t.idxToView=Object(S.h)(new Float64Array(16)),t.idxNormalMatrix=It(new Float64Array(9)),t.modelToView=Object(S.h)(new Float64Array(16)),t.projectionToView=Object(S.h)(new Float64Array(16)),t.projectionToWorld=Object(S.h)(new Float64Array(16)),a.c.setGet(e,t,["context"]),Sl(e,t)}var xl={newInstance:a.c.newInstance(Zl,"vtkOpenGLVolumeMapper"),extend:Zl};function Gl(e,t){t.overrides={},t.classHierarchy.push("vtkViewNodeFactory"),e.createNode=function(n){if(n.isDeleted())return null;for(var Q=0,B=n.getClassName(Q++),a=!1,s=Object.keys(t.overrides);B&&!a;)-1!==s.indexOf(B)?a=!0:B=n.getClassName(Q++);if(!a)return null;var r=t.overrides[B]();return r.setMyFactory(e),r},e.registerOverride=function(e,n){t.overrides[e]=n}}var Vl={};function Rl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Vl,n),a.c.obj(e,t),Gl(e,t)}var Ll={newInstance:a.c.newInstance(Rl,"vtkViewNodeFactory"),extend:Rl};function pl(e,t){t.classHierarchy.push("vtkOpenGLViewNodeFactory")}var hl={};function Nl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hl,n),Ll.extend(e,t,n),pl(0,t),e.registerOverride("vtkActor",$a.newInstance),e.registerOverride("vtkActor2D",Qs.newInstance),e.registerOverride("vtkCamera",rs.newInstance),e.registerOverride("vtkGlyph3DMapper",kU.newInstance),e.registerOverride("vtkImageMapper",_U.newInstance),e.registerOverride("vtkImageSlice",tF.newInstance),e.registerOverride("vtkMapper",iU.newInstance),e.registerOverride("vtkPixelSpaceCallbackMapper",sF.newInstance),e.registerOverride("vtkRenderer",oF.newInstance),e.registerOverride("vtkSkybox",IF.newInstance),e.registerOverride("vtkSphereMapper",yF.newInstance),e.registerOverride("vtkStickMapper",LF.newInstance),e.registerOverride("vtkTexture",va.newInstance),e.registerOverride("vtkSurfaceLICMapper",rl.newInstance),e.registerOverride("vtkVolume",ol.newInstance),e.registerOverride("vtkVolumeMapper",xl.newInstance),e.registerOverride("vtkWidgetRepresentation",Ka.newInstance)}var Dl={newInstance:a.c.newInstance(Nl,"vtkOpenGLViewNodeFactory"),extend:Nl},Al=n(11),El=Object(Al.d)((function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Q(e,t,Q,B,a,s){return n((r=n(n(t,e),n(B,s)))<<(U=a)|r>>>32-U,Q);var r,U}function B(e,t,n,B,a,s,r){return Q(t&n|~t&B,e,t,a,s,r)}function a(e,t,n,B,a,s,r){return Q(t&B|n&~B,e,t,a,s,r)}function s(e,t,n,B,a,s,r){return Q(t^n^B,e,t,a,s,r)}function r(e,t,n,B,a,s,r){return Q(n^(t|~B),e,t,a,s,r)}function U(e,t){var Q,U,F,l,o;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var g=1732584193,i=-271733879,c=-1732584194,d=271733878;for(Q=0;Q<e.length;Q+=16)U=g,F=i,l=c,o=d,g=B(g,i,c,d,e[Q],7,-680876936),d=B(d,g,i,c,e[Q+1],12,-389564586),c=B(c,d,g,i,e[Q+2],17,606105819),i=B(i,c,d,g,e[Q+3],22,-1044525330),g=B(g,i,c,d,e[Q+4],7,-176418897),d=B(d,g,i,c,e[Q+5],12,1200080426),c=B(c,d,g,i,e[Q+6],17,-1473231341),i=B(i,c,d,g,e[Q+7],22,-45705983),g=B(g,i,c,d,e[Q+8],7,1770035416),d=B(d,g,i,c,e[Q+9],12,-1958414417),c=B(c,d,g,i,e[Q+10],17,-42063),i=B(i,c,d,g,e[Q+11],22,-1990404162),g=B(g,i,c,d,e[Q+12],7,1804603682),d=B(d,g,i,c,e[Q+13],12,-40341101),c=B(c,d,g,i,e[Q+14],17,-1502002290),g=a(g,i=B(i,c,d,g,e[Q+15],22,1236535329),c,d,e[Q+1],5,-165796510),d=a(d,g,i,c,e[Q+6],9,-1069501632),c=a(c,d,g,i,e[Q+11],14,643717713),i=a(i,c,d,g,e[Q],20,-373897302),g=a(g,i,c,d,e[Q+5],5,-701558691),d=a(d,g,i,c,e[Q+10],9,38016083),c=a(c,d,g,i,e[Q+15],14,-660478335),i=a(i,c,d,g,e[Q+4],20,-405537848),g=a(g,i,c,d,e[Q+9],5,568446438),d=a(d,g,i,c,e[Q+14],9,-1019803690),c=a(c,d,g,i,e[Q+3],14,-187363961),i=a(i,c,d,g,e[Q+8],20,1163531501),g=a(g,i,c,d,e[Q+13],5,-1444681467),d=a(d,g,i,c,e[Q+2],9,-51403784),c=a(c,d,g,i,e[Q+7],14,1735328473),g=s(g,i=a(i,c,d,g,e[Q+12],20,-1926607734),c,d,e[Q+5],4,-378558),d=s(d,g,i,c,e[Q+8],11,-2022574463),c=s(c,d,g,i,e[Q+11],16,1839030562),i=s(i,c,d,g,e[Q+14],23,-35309556),g=s(g,i,c,d,e[Q+1],4,-1530992060),d=s(d,g,i,c,e[Q+4],11,1272893353),c=s(c,d,g,i,e[Q+7],16,-155497632),i=s(i,c,d,g,e[Q+10],23,-1094730640),g=s(g,i,c,d,e[Q+13],4,681279174),d=s(d,g,i,c,e[Q],11,-358537222),c=s(c,d,g,i,e[Q+3],16,-722521979),i=s(i,c,d,g,e[Q+6],23,76029189),g=s(g,i,c,d,e[Q+9],4,-640364487),d=s(d,g,i,c,e[Q+12],11,-421815835),c=s(c,d,g,i,e[Q+15],16,530742520),g=r(g,i=s(i,c,d,g,e[Q+2],23,-995338651),c,d,e[Q],6,-198630844),d=r(d,g,i,c,e[Q+7],10,1126891415),c=r(c,d,g,i,e[Q+14],15,-1416354905),i=r(i,c,d,g,e[Q+5],21,-57434055),g=r(g,i,c,d,e[Q+12],6,1700485571),d=r(d,g,i,c,e[Q+3],10,-1894986606),c=r(c,d,g,i,e[Q+10],15,-1051523),i=r(i,c,d,g,e[Q+1],21,-2054922799),g=r(g,i,c,d,e[Q+8],6,1873313359),d=r(d,g,i,c,e[Q+15],10,-30611744),c=r(c,d,g,i,e[Q+6],15,-1560198380),i=r(i,c,d,g,e[Q+13],21,1309151649),g=r(g,i,c,d,e[Q+4],6,-145523070),d=r(d,g,i,c,e[Q+11],10,-1120210379),c=r(c,d,g,i,e[Q+2],15,718787259),i=r(i,c,d,g,e[Q+9],21,-343485551),g=n(g,U),i=n(i,F),c=n(c,l),d=n(d,o);return[g,i,c,d]}function F(e){var t,n="",Q=32*e.length;for(t=0;t<Q;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var Q=8*e.length;for(t=0;t<Q;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function o(e){var t,n,Q="0123456789abcdef",B="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),B+=Q.charAt(t>>>4&15)+Q.charAt(15&t);return B}function g(e){return unescape(encodeURIComponent(e))}function i(e){return function(e){return F(U(l(e),8*e.length))}(g(e))}function c(e,t){return function(e,t){var n,Q,B=l(e),a=[],s=[];for(a[15]=s[15]=void 0,B.length>16&&(B=U(B,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^B[n],s[n]=1549556828^B[n];return Q=U(a.concat(l(t)),512+8*t.length),F(U(s.concat(Q),640))}(g(e),g(t))}function d(e,t,n){return t?n?c(t,e):o(c(t,e)):n?i(e):o(i(e))}e.exports?e.exports=d:t.md5=d}(Al.b)}),"/$$rollup_base$$/node_modules/blueimp-md5/js"),fl=["lastShaderBound","context","openGLRenderWindow"];function Jl(e,t){t.classHierarchy.push("vtkShaderCache"),e.replaceShaderValues=function(e,n,Q){var B=n;Q.length>0&&(B=xr.substitute(B,"VSOut","GSOut").result);var a=t.openGLRenderWindow.getWebgl2(),s="\n",r="#version 100\n";a?r="#version 300 es\n#define attribute in\n#define textureCube texture\n#define texture2D texture\n#define textureCubeLod textureLod\n#define texture2DLod textureLod\n":(t.context.getExtension("OES_standard_derivatives"),t.context.getExtension("EXT_frag_depth")&&(s="#extension GL_EXT_frag_depth : enable\n"),t.context.getExtension("EXT_shader_texture_lod")&&(s+="#extension GL_EXT_shader_texture_lod : enable\n#define textureCubeLod textureCubeLodEXT\n#define texture2DLod texture2DLodEXT")),B=xr.substitute(B,"//VTK::System::Dec",["".concat(r,"\n"),a?"":"#extension GL_OES_standard_derivatives : enable\n",s,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;var U=xr.substitute(e,"//VTK::System::Dec",["".concat(r,"\n"),"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;return a&&(U=xr.substitute(U,"varying","out").result,B=xr.substitute(B,"varying","in").result,B=xr.substitute(B,"gl_FragData\\[0\\]","fragOutput0").result,B=xr.substitute(B,"//VTK::Output::Dec","layout(location = 0) out vec4 fragOutput0;").result),{VSSource:U,FSSource:B,GSSource:xr.substitute(Q,"//VTK::System::Dec",r).result}},e.readyShaderProgramArray=function(t,n,Q){var B=e.replaceShaderValues(t,n,Q),a=e.getShaderProgram(B.VSSource,B.FSSource,B.GSSource);return e.readyShaderProgram(a)},e.readyShaderProgram=function(t){return t&&(t.getCompiled()||t.compileShader())&&e.bindShader(t)?t:null},e.getShaderProgram=function(e,n,Q){var B="".concat(e).concat(n).concat(Q),a=El(B);if(-1===Object.keys(t.shaderPrograms).indexOf(a)){var s=xr.newInstance();return s.setContext(t.context),s.getVertexShader().setSource(e),s.getFragmentShader().setSource(n),Q&&s.getGeometryShader().setSource(Q),s.setMd5Hash(a),t.shaderPrograms[a]=s,s}return t.shaderPrograms[a]},e.releaseGraphicsResources=function(n){e.releaseCurrentShader(),Object.keys(t.shaderPrograms).map((function(e){return t.shaderPrograms[e]})).forEach((function(e){return e.releaseGraphicsResources(n)}))},e.releaseGraphicsResources=function(){t.astShaderBound&&(t.lastShaderBound.release(),t.lastShaderBound=null)},e.bindShader=function(e){return t.lastShaderBound===e||(t.lastShaderBound&&t.lastShaderBound.release(),e.bind(),t.lastShaderBound=e),1}}var vl={lastShaderBound:null,shaderPrograms:null,context:null,openGLRenderWindow:null};function Wl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(t,vl,n),t.shaderPrograms={},a.c.obj(e,t),a.c.setGet(e,t,fl),Jl(e,t),Object.freeze(e)}var Xl={newInstance:a.c.newInstance(Wl,"vtkShaderCache"),extend:Wl},Hl=a.c.vtkErrorMacro;function kl(e,t){t.classHierarchy.push("vtkOpenGLTextureUnitManager"),e.deleteTable=function(){for(var e=0;e<t.numberOfTextureUnits;++e)!0===t.textureUnits[e]&&Hl("some texture units  were not properly released");t.textureUnits=[],t.numberOfTextureUnits=0},e.setContext=function(n){if(t.context!==n){if(0!==t.context&&e.deleteTable(),t.context=n,t.context){t.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(var Q=0;Q<t.numberOfTextureUnits;++Q)t.textureUnits[Q]=!1}e.modified()}},e.allocate=function(){for(var n=0;n<t.numberOfTextureUnits;n++)if(!e.isAllocated(n))return t.textureUnits[n]=!0,n;return-1},e.allocateUnit=function(n){return e.isAllocated(n)?-1:(t.textureUnits[n]=!0,n)},e.isAllocated=function(e){return t.textureUnits[e]},e.free=function(e){t.textureUnits[e]=!1}}var Tl={context:null,numberOfTextureUnits:0,textureUnits:0};function Ml(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tl,n),a.c.obj(e,t),t.textureUnits=[],a.c.get(e,t,["numberOfTextureUnits"]),a.c.setGet(e,t,["context"]),kl(e,t)}var Yl={newInstance:a.c.newInstance(Ml,"vtkOpenGLTextureUnitManager"),extend:Ml},wl=a.c.vtkDebugMacro,Ol=a.c.vtkErrorMacro,zl=-1!==navigator.userAgent.indexOf("Chrome");function Pl(e,t,n){var Q=e.createFramebuffer(),B=e.createTexture();e.bindTexture(e.TEXTURE_2D,B),e.texImage2D(e.TEXTURE_2D,0,t,2,2,0,t,n,null),e.bindFramebuffer(e.FRAMEBUFFER,Q),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,B,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),a===e.FRAMEBUFFER_COMPLETE}var Kl=0,jl=[];function _l(){Kl++,jl.forEach((function(e){return e(Kl)}))}function ql(){Kl--,jl.forEach((function(e){return e(Kl)}))}function $l(e,t){t.classHierarchy.push("vtkOpenGLRenderWindow");var n=[0,0];e.onModified((function(){t.renderable&&(t.size[0]===n[0]&&t.size[1]===n[1]||(n[0]=t.size[0],n[1]=t.size[1],t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1]))),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none"),t.containerSize=null})),e.buildPass=function(n){if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.removeUnusedNodes(),e.initialize(),t.children.forEach((function(t){t.setOpenGLRenderWindow(e)}))}},e.initialize=function(){if(!t.initialized){t.context=e.get3DContext(),t.textureUnitManager=Yl.newInstance(),t.textureUnitManager.setContext(t.context),t.shaderCache.setContext(t.context);var n=t.context;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.depthFunc(n.LEQUAL),n.enable(n.BLEND),t.initialized=!0}},e.makeCurrent=function(){t.context.makeCurrent()},e.setContainer=function(n){t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&Ol("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&(t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage)),e.modified())},e.getContainer=function(){return t.el},e.getContainerSize=function(){if(!t.containerSize&&t.el){var e=t.el.getBoundingClientRect(),n=e.width,Q=e.height;t.containerSize=[n,Q]}return t.containerSize||t.size},e.getFramebufferSize=function(){return t.activeFramebuffer?t.activeFramebuffer.getSize():t.size},e.isInViewport=function(t,n,Q){var B=Q.getViewportByReference(),a=e.getFramebufferSize();return B[0]*a[0]<=t&&B[2]*a[0]>=t&&B[1]*a[1]<=n&&B[3]*a[1]>=n},e.getViewportSize=function(t){var n=t.getViewportByReference(),Q=e.getFramebufferSize();return[(n[2]-n[0])*Q[0],(n[3]-n[1])*Q[1]]},e.getViewportCenter=function(t){var n=e.getViewportSize(t);return[.5*n[0],.5*n[1]]},e.displayToNormalizedDisplay=function(t,n,Q){var B=e.getFramebufferSize();return[t/B[0],n/B[1],Q]},e.normalizedDisplayToDisplay=function(t,n,Q){var B=e.getFramebufferSize();return[t*B[0],n*B[1],Q]},e.worldToView=function(e,t,n,Q){return Q.worldToView(e,t,n)},e.viewToWorld=function(e,t,n,Q){return Q.viewToWorld(e,t,n)},e.worldToDisplay=function(t,n,Q,B){var a=B.worldToView(t,n,Q),s=e.getViewportSize(B),r=B.viewToProjection(a[0],a[1],a[2],s[0]/s[1]),U=B.projectionToNormalizedDisplay(r[0],r[1],r[2]);return e.normalizedDisplayToDisplay(U[0],U[1],U[2])},e.displayToWorld=function(t,n,Q,B){var a=e.displayToNormalizedDisplay(t,n,Q),s=B.normalizedDisplayToProjection(a[0],a[1],a[2]),r=e.getViewportSize(B),U=B.projectionToView(s[0],s[1],s[2],r[0]/r[1]);return B.viewToWorld(U[0],U[1],U[2])},e.normalizedDisplayToViewport=function(t,n,Q,B){var a=B.getViewportByReference();a=e.normalizedDisplayToDisplay(a[0],a[1],0);var s=e.normalizedDisplayToDisplay(t,n,Q);return[s[0]-a[0]-.5,s[1]-a[1]-.5,Q]},e.viewportToNormalizedViewport=function(t,n,Q,B){var a=e.getViewportSize(B);return a&&0!==a[0]&&0!==a[1]?[t/(a[0]-1),n/(a[1]-1),Q]:[t,n,Q]},e.normalizedViewportToViewport=function(t,n,Q){var B=e.getFramebufferSize();return[t*(B[0]-1),n*(B[1]-1),Q]},e.displayToLocalDisplay=function(t,n,Q){return[t,e.getFramebufferSize()[1]-n-1,Q]},e.viewportToNormalizedDisplay=function(t,n,Q,B){var a=B.getViewportByReference(),s=t+(a=e.normalizedDisplayToDisplay(a[0],a[1],0))[0]+.5,r=n+a[1]+.5;return e.displayToNormalizedDisplay(s,r,Q)},e.getPixelData=function(e,n,Q,B){var a=new Uint8Array((Q-e+1)*(B-n+1)*4);return t.context.readPixels(e,n,Q-e+1,B-n+1,t.context.RGBA,t.context.UNSIGNED_BYTE,a),a},e.get3DContext=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0},Q=null,B="undefined"!=typeof WebGL2RenderingContext;return t.webgl2=!1,t.defaultToWebgl2&&B&&(Q=t.canvas.getContext("webgl2",n))&&(t.webgl2=!0,wl("using webgl2")),Q||(wl("using webgl1"),Q=t.canvas.getContext("webgl",n)||t.canvas.getContext("experimental-webgl",n)),navigator.getVRDisplays&&navigator.getVRDisplays().then((function(n){n.length>0&&(t.vrDisplay=n[0],t.vrDisplay.depthNear=.01,t.vrDisplay.depthFar=100,e.invokeHaveVRDisplay())})),t.canvas.addEventListener("webglcontextlost",(function(e){e.preventDefault()}),!1),t.canvas.addEventListener("webglcontextrestored",e.restoreContext,!1),Q},e.startVR=function(){t.oldCanvasSize=t.size.slice(),t.vrDisplay.capabilities.canPresent?t.vrDisplay.requestPresent([{source:t.canvas}]).then((function(){if(t.el&&t.vrDisplay.capabilities.hasExternalDisplay&&t.hideCanvasInVR&&(t.el.style.display="none"),t.queryVRSize){var n=t.vrDisplay.getEyeParameters("left"),Q=t.vrDisplay.getEyeParameters("right"),B=Math.floor(n.renderWidth+Q.renderWidth),a=Math.floor(Math.max(n.renderHeight,Q.renderHeight));e.setSize(B,a)}else e.setSize(t.vrResolution);t.renderable.getRenderers()[0].resetCamera(),t.vrFrameData=new VRFrameData,t.renderable.getInteractor().switchToVRAnimation(),t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender),zl&&(t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender))})).catch((function(){console.error("failed to requestPresent")})):Ol("vrDisplay is not connected")},e.stopVR=function(){t.renderable.getInteractor().returnFromVRAnimation(),t.vrDisplay.exitPresent(),t.vrDisplay.cancelAnimationFrame(t.vrSceneFrame),e.setSize.apply(e,Object(B.a)(t.oldCanvasSize)),t.el&&t.vrDisplay.capabilities.hasExternalDisplay&&(t.el.style.display="block");var n=t.renderable.getRenderers()[0];n.getActiveCamera().setProjectionMatrix(null),n.setViewport(0,0,1,1),e.traverseAllPasses()},e.vrRender=function(){if(t.vrDisplay.isPresenting){t.renderable.getInteractor().updateGamepads(t.vrDisplay.displayId),t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender),t.vrDisplay.getFrameData(t.vrFrameData);var n=t.renderable.getRenderers()[0];n.setViewport(0,0,.5,1),n.getActiveCamera().computeViewParametersFromPhysicalMatrix(t.vrFrameData.leftViewMatrix),n.getActiveCamera().setProjectionMatrix(t.vrFrameData.leftProjectionMatrix),e.traverseAllPasses(),n.setViewport(.5,0,1,1),n.getActiveCamera().computeViewParametersFromPhysicalMatrix(t.vrFrameData.rightViewMatrix),n.getActiveCamera().setProjectionMatrix(t.vrFrameData.rightProjectionMatrix),e.traverseAllPasses(),t.vrDisplay.submitFrame()}},e.restoreContext=function(){var t=Za.newInstance();t.setCurrentOperation("Release"),t.traverse(e,null)},e.activateTexture=function(n){var Q=t.textureResourceIds.get(n);if(void 0===Q){var B=e.getTextureUnitManager().allocate();B<0?Ol("Hardware does not support the number of textures defined."):(t.textureResourceIds.set(n,B),t.context.activeTexture(t.context.TEXTURE0+B))}else t.context.activeTexture(t.context.TEXTURE0+Q)},e.deactivateTexture=function(n){var Q=t.textureResourceIds.get(n);void 0!==Q&&(e.getTextureUnitManager().free(Q),t.textureResourceIds.delete(n))},e.getTextureUnitForTexture=function(e){var n=t.textureResourceIds.get(e);return void 0!==n?n:-1},e.getDefaultTextureInternalFormat=function(e,n,Q){if(t.webgl2)switch(e){case J.a.UNSIGNED_CHAR:switch(n){case 1:return t.context.R8;case 2:return t.context.RG8;case 3:return t.context.RGB8;case 4:default:return t.context.RGBA8}default:case J.a.FLOAT:switch(n){case 1:return t.context.R16F;case 2:return t.context.RG16F;case 3:return t.context.RGB16F;case 4:default:return t.context.RGBA16F}}switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:default:return t.context.RGBA}},e.setBackgroundImage=function(e){t.bgImage.src=e.src},e.setUseBackgroundImage=function(e){t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";if(t.deleted)return null;t.imageFormat=n;var Q=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,new Promise((function(n,B){var a=e.onImageReady((function(e){t.notifyStartCaptureImage=Q,a.unsubscribe(),n(e)}))}))},e.getGLInformations=function(){for(var n=e.get3DContext(),Q=n.getExtension("OES_texture_float"),B=n.getExtension("OES_texture_half_float"),a=n.getExtension("WEBGL_debug_renderer_info"),s=n.getExtension("WEBGL_draw_buffers"),r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),U=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",n.getParameter(n.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",n.getParameter(n.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",n.getParameter(n.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",r&&n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",n.getParameter(n.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",n.getParameter(n.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",n.getParameter(n.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",n.getParameter(n.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",n.getParameter(n.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",n.getParameter(n.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",n.getParameter(n.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",n.getParameter(n.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",n.getParameter(n.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",n.getParameter(n.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",n.getParameter(n.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",n.getParameter(n.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",n.getParameter(n.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[Q&&Pl(n,n.RGBA,n.UNSIGNED_BYTE)?"RGBA":"",Q&&Pl(n,n.RGB,n.UNSIGNED_BYTE)?"RGB":"",Q&&Pl(n,n.LUMINANCE,n.UNSIGNED_BYTE)?"LUMINANCE":"",Q&&Pl(n,n.ALPHA,n.UNSIGNED_BYTE)?"ALPHA":"",Q&&Pl(n,n.LUMINANCE_ALPHA,n.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[B&&Pl(n,n.RGBA,B.HALF_FLOAT_OES)?"RGBA":"",B&&Pl(n,n.RGB,B.HALF_FLOAT_OES)?"RGB":"",B&&Pl(n,n.LUMINANCE,B.HALF_FLOAT_OES)?"LUMINANCE":"",B&&Pl(n,n.ALPHA,B.HALF_FLOAT_OES)?"ALPHA":"",B&&Pl(n,n.LUMINANCE_ALPHA,B.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[Q&&Pl(n,n.RGBA,n.FLOAT)?"RGBA":"",Q&&Pl(n,n.RGB,n.FLOAT)?"RGB":"",Q&&Pl(n,n.LUMINANCE,n.FLOAT)?"LUMINANCE":"",Q&&Pl(n,n.ALPHA,n.FLOAT)?"ALPHA":"",Q&&Pl(n,n.LUMINANCE_ALPHA,n.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",s?n.getParameter(s.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",n.getSupportedExtensions().join("<br/>\t\t\t\t\t    ")],["WebGL Renderer","RENDERER",n.getParameter(n.RENDERER)],["WebGL Vendor","VENDOR",n.getParameter(n.VENDOR)],["WebGL Version","VERSION",n.getParameter(n.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",n.getParameter(n.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",a&&n.getParameter(a.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",a&&n.getParameter(a.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",t.webgl2?2:1]],F={};U.length;){var l=U.pop(),o=Object(Ue.a)(l,3),g=o[0],i=o[1],c=o[2];i&&(F[i]={label:g,value:c})}return F},e.traverseAllPasses=function(){if(t.renderPasses)for(var n=0;n<t.renderPasses.length;++n)t.renderPasses[n].traverse(e,null);t.notifyStartCaptureImage&&function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.imageFormat,Q=document.createElement("canvas"),B=Q.getContext("2d");Q.width=t.canvas.width,Q.height=t.canvas.height,B.drawImage(t.canvas,0,0);var a=t.canvas.getBoundingClientRect();t.renderable.getRenderers().forEach((function(e){e.getViewProps().forEach((function(e){if(e.getContainer)for(var t=e.getContainer().getElementsByTagName("canvas"),n=0;n<t.length;n++){var Q=t[n],s=Q.getBoundingClientRect(),r=s.x-a.x,U=s.y-a.y;B.drawImage(Q,r,U)}}))}));var s=Q.toDataURL(n);Q.remove(),e.invokeImageReady(s)}()},e.disableDepthMask=function(){t.depthMaskEnabled&&(t.context.depthMask(!1),t.depthMaskEnabled=!1)},e.enableDepthMask=function(){t.depthMaskEnabled||(t.context.depthMask(!0),t.depthMaskEnabled=!0)},e.disableCullFace=function(){t.cullFaceEnabled&&(t.context.disable(t.context.CULL_FACE),t.cullFaceEnabled=!1)},e.enableCullFace=function(){t.cullFaceEnabled||(t.context.enable(t.context.CULL_FACE),t.cullFaceEnabled=!0)},e.setViewStream=function(n){return t.viewStream!==n&&(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream&&(t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady((function(t){return e.setBackgroundImage(t.image)})),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified()),!0)},e.delete=a.c.chain(e.delete,e.setViewStream,ql)}var eo={cullFaceEnabled:!1,depthMaskEnabled:!0,shaderCache:null,initialized:!1,context:null,canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,vrResolution:[2160,1200],queryVRSize:!1,hideCanvasInVR:!0,activeFramebuffer:null,vrDisplay:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function to(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,eo,n),t.canvas=document.createElement("canvas"),t.canvas.style.width="100%",_l(),t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",t.textureResourceIds=new Map,oa.extend(e,t,n),t.myFactory=Dl.newInstance(),t.myFactory.registerOverride("vtkRenderWindow",no),t.shaderCache=Xl.newInstance(),t.shaderCache.setOpenGLRenderWindow(e),t.renderPasses[0]=wa.newInstance(),a.c.event(e,t,"imageReady"),a.c.event(e,t,"haveVRDisplay"),a.c.get(e,t,["shaderCache","textureUnitManager","webgl2","vrDisplay","useBackgroundImage"]),a.c.setGet(e,t,["initialized","context","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","queryVRSize","hideCanvasInVR","useOffScreen","activeFramebuffer"]),a.c.setGetArray(e,t,["size","vrResolution"],2),$l(e,t)}var no=a.c.newInstance(to,"vtkOpenGLRenderWindow");ca("WebGL",no);var Qo={newInstance:no,extend:to,pushMonitorGLContextCount:function(e){jl.push(e)},popMonitorGLContextCount:function(e){return jl.pop()}},Bo={Device:{Unknown:0,LeftController:1,RightController:2},Input:{Unknown:0,Trigger:1,TrackPad:2,Grip:3,ApplicationMenu:4}};function ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ro=Bo.Device,Uo=Bo.Input,Fo=a.c.vtkWarningMacro,lo=a.c.vtkErrorMacro,oo=a.c.normalizeWheel,go=a.c.vtkOnceErrorMacro,io={"OpenVR Gamepad":[Uo.TrackPad,Uo.Trigger,Uo.Grip,Uo.ApplicationMenu]},co=["StartAnimation","Animation","EndAnimation","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteractionEvent","InteractionEvent","EndInteractionEvent"];function Io(e){return e.stopPropagation(),e.preventDefault(),!1}function uo(e,t){t.classHierarchy.push("vtkRenderWindowInteractor");var n=new Set,Q=0;function B(n,Q){t.currentRenderer=e.findPokedRenderer(n,Q)}function a(e){var n=t.container.getBoundingClientRect(),Q=t.view.getCanvas(),a=Q.width/n.width,s=Q.height/n.height,r={x:a*(e.clientX-n.left),y:s*(n.height-e.clientY+n.top),z:0};return B(r.x,r.y),r}function s(e){for(var t={},n=0;n<e.length;n++){var Q=e[n];t[Q.identifier]=a(Q)}return t}function r(e){return{controlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey}}function U(e){var t=r(e);return so({key:e.key,keyCode:e.charCode},t)}function F(n){var B=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=document,s=n?"addEventListener":"removeEventListener",r=n?"removeEventListener":"addEventListener";!B&&!n&&Q>0&&--Q,Q&&!B||(Q=0,t.container&&t.container[r]("mousemove",e.handleMouseMove),a[s]("mouseup",e.handleMouseUp),a[s]("mousemove",e.handleMouseMove),a[s]("touchend",e.handleTouchEnd,!1),a[s]("touchcancel",e.handleTouchEnd,!1),a[s]("touchmove",e.handleTouchMove,!1)),!B&&n&&++Q}function l(){t.view&&t.enabled&&t.enableRender&&(t.inRender=!0,t.view.traverseAllPasses(),t.inRender=!1),e.invokeRenderEvent()}e.start=function(){(t.initialized||(e.initialize(),t.initialized))&&e.startEventLoop()},e.setRenderWindow=function(e){lo("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},e.setInteractorStyle=function(n){t.interactorStyle!==n&&(null!=t.interactorStyle&&t.interactorStyle.setInteractor(null),t.interactorStyle=n,null!=t.interactorStyle&&t.interactorStyle.getInteractor()!==e&&t.interactorStyle.setInteractor(e))},e.initialize=function(){t.initialized=!0,e.enable(),e.render()},e.enable=function(){return e.setEnabled(!0)},e.disable=function(){return e.setEnabled(!1)},e.startEventLoop=function(){return Fo("empty event loop")},e.getCurrentRenderer=function(){return t.currentRenderer||B(0,0),t.currentRenderer},e.bindEvents=function(n){t.container=n,n.addEventListener("contextmenu",Io),n.addEventListener("wheel",e.handleWheel),n.addEventListener("DOMMouseScroll",e.handleWheel),n.addEventListener("mouseenter",e.handleMouseEnter),n.addEventListener("mouseleave",e.handleMouseLeave),n.addEventListener("mousemove",e.handleMouseMove),n.addEventListener("mousedown",e.handleMouseDown),document.querySelector("body").addEventListener("keypress",e.handleKeyPress),document.querySelector("body").addEventListener("keydown",e.handleKeyDown),document.querySelector("body").addEventListener("keyup",e.handleKeyUp),document.addEventListener("pointerlockchange",e.handlePointerLockChange),n.addEventListener("touchstart",e.handleTouchStart,!1)},e.unbindEvents=function(){F(!1,!0),t.container.removeEventListener("contextmenu",Io),t.container.removeEventListener("wheel",e.handleWheel),t.container.removeEventListener("DOMMouseScroll",e.handleWheel),t.container.removeEventListener("mouseenter",e.handleMouseEnter),t.container.removeEventListener("mouseleave",e.handleMouseLeave),t.container.removeEventListener("mousemove",e.handleMouseMove),t.container.removeEventListener("mousedown",e.handleMouseDown),document.querySelector("body").removeEventListener("keypress",e.handleKeyPress),document.querySelector("body").removeEventListener("keydown",e.handleKeyDown),document.querySelector("body").removeEventListener("keyup",e.handleKeyUp),document.removeEventListener("pointerlockchange",e.handlePointerLockChange),t.container.removeEventListener("touchstart",e.handleTouchStart),t.container=null},e.handleKeyPress=function(t){var n=U(t);e.keyPressEvent(n)},e.handleKeyDown=function(t){var n=U(t);e.keyDownEvent(n)},e.handleKeyUp=function(t){var n=U(t);e.keyUpEvent(n)},e.handleMouseDown=function(t){if(!(t.button>2)){F(!0),t.stopPropagation(),t.preventDefault();var n=so(so({},r(t)),{},{position:a(t)});switch(t.button){case 0:e.leftButtonPressEvent(n);break;case 1:e.middleButtonPressEvent(n);break;case 2:e.rightButtonPressEvent(n);break;default:lo("Unknown mouse button pressed: ".concat(t.button))}}},e.requestPointerLock=function(){e.getView().getCanvas().requestPointerLock()},e.exitPointerLock=function(){return document.exitPointerLock()},e.isPointerLocked=function(){return!!document.pointerLockElement},e.handlePointerLockChange=function(){e.isPointerLocked()?e.startPointerLockEvent():e.endPointerLockEvent()},e.requestAnimation=function(Q){void 0!==Q?n.has(Q)?Fo("requester is already registered for animating"):(n.add(Q),1===n.size&&(t.lastFrameTime=.1,t.lastFrameStart=Date.now(),t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())):lo("undefined requester, can not start animating")},e.isAnimating=function(){return t.vrAnimation||null!==t.animationRequest},e.cancelAnimation=function(Q){var B=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.has(Q))n.delete(Q),t.animationRequest&&0===n.size&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render());else if(!B){var a=Q&&Q.getClassName?Q.getClassName():Q;Fo("".concat(a," did not request an animation"))}},e.switchToVRAnimation=function(){t.animationRequest&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null),t.vrAnimation=!0},e.returnFromVRAnimation=function(){t.vrAnimation=!1,0!==n.size&&(t.FrameTime=-1,t.animationRequest=requestAnimationFrame(e.handleAnimation))},e.updateGamepads=function(n){for(var Q=navigator.getGamepads(),B=0;B<Q.length;++B){var a=Q[B];if(a&&a.displayId===n){a.index in t.lastGamepadValues||(t.lastGamepadValues[a.index]={buttons:{}});for(var s=0;s<a.buttons.length;++s)s in t.lastGamepadValues[a.index].buttons||(t.lastGamepadValues[a.index].buttons[s]=!1),t.lastGamepadValues[a.index].buttons[s]!==a.buttons[s].pressed&&(e.button3DEvent({gamepad:a,position:a.pose.position,orientation:a.pose.orientation,pressed:a.buttons[s].pressed,device:"left"===a.hand?ro.LeftController:ro.RightController,input:io[a.id]&&io[a.id][s]?io[a.id][s]:Uo.Trigger}),t.lastGamepadValues[a.index].buttons[s]=a.buttons[s].pressed),t.lastGamepadValues[a.index].buttons[s]&&e.move3DEvent({gamepad:a,position:a.pose.position,orientation:a.pose.orientation,device:"left"===a.hand?ro.LeftController:ro.RightController})}}},e.handleMouseMove=function(n){var Q=so(so({},r(n)),{},{position:a(n)});0===t.moveTimeoutID?e.startMouseMoveEvent(Q):(e.mouseMoveEvent(Q),clearTimeout(t.moveTimeoutID)),t.moveTimeoutID=setTimeout((function(){e.endMouseMoveEvent(),t.moveTimeoutID=0}),200)},e.handleAnimation=function(){var n=Date.now();-1===t.FrameTime?t.lastFrameTime=.1:t.lastFrameTime=(n-t.lastFrameStart)/1e3,t.lastFrameTime=Math.max(.01,t.lastFrameTime),t.lastFrameStart=n,e.animationEvent(),l(),t.animationRequest=requestAnimationFrame(e.handleAnimation)},e.handleWheel=function(n){n.stopPropagation(),n.preventDefault();var Q=so(so(so({},oo(n)),r(n)),{},{position:a(n)});0===t.wheelTimeoutID?e.startMouseWheelEvent(Q):(e.mouseWheelEvent(Q),clearTimeout(t.wheelTimeoutID)),t.wheelTimeoutID=setTimeout((function(){e.endMouseWheelEvent(),t.wheelTimeoutID=0}),200)},e.handleMouseEnter=function(t){var n=so(so({},r(t)),{},{position:a(t)});e.mouseEnterEvent(n)},e.handleMouseLeave=function(t){var n=so(so({},r(t)),{},{position:a(t)});e.mouseLeaveEvent(n)},e.handleMouseUp=function(t){F(!1),t.stopPropagation(),t.preventDefault();var n=so(so({},r(t)),{},{position:a(t)});switch(t.button){case 0:e.leftButtonReleaseEvent(n);break;case 1:e.middleButtonReleaseEvent(n);break;case 2:e.rightButtonReleaseEvent(n);break;default:lo("Unknown mouse button released: ".concat(t.button))}},e.handleTouchStart=function(n){if(F(!0),n.stopPropagation(),n.preventDefault(),t.recognizeGestures&&n.touches.length>1){var Q=s(n.touches);if(2===n.touches.length){var B={position:a(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(B)}e.recognizeGesture("TouchStart",Q)}else{var r={position:a(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonPressEvent(r)}},e.handleTouchMove=function(n){if(n.stopPropagation(),n.preventDefault(),t.recognizeGestures&&n.touches.length>1){var Q=s(n.touches);e.recognizeGesture("TouchMove",Q)}else{var B={position:a(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.mouseMoveEvent(B)}},e.handleTouchEnd=function(n){if(n.stopPropagation(),n.preventDefault(),t.recognizeGestures)if(0===n.touches.length)if(1===n.changedTouches.length){var Q={position:a(n.changedTouches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(Q),F(!1)}else{var B=s(n.changedTouches);e.recognizeGesture("TouchEnd",B),F(!1)}else if(1===n.touches.length){var r=s(n.changedTouches);e.recognizeGesture("TouchEnd",r);var U={position:a(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonPressEvent(U)}else{var l=s(n.touches);e.recognizeGesture("TouchMove",l)}else{var o={position:a(n.changedTouches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(o),F(!1)}},e.setView=function(n){t.view!==n&&(t.view=n,t.view.getRenderable().setInteractor(e),e.modified())},e.getFirstRenderer=function(){return t.view.getRenderable().getRenderersByReference()[0]},e.findPokedRenderer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t.view)return null;var Q=t.view.getRenderable().getRenderers();Q.sort((function(e,t){return e.getLayer()-t.getLayer()}));for(var B=null,a=null,s=null,r=Q.length;r--;){var U=Q[r];if(t.view.isInViewport(e,n,U)&&U.getInteractive()){s=U;break}null===B&&U.getInteractive()&&(B=U),null===a&&t.view.isInViewport(e,n,U)&&(a=U)}return null===s&&(s=B),null===s&&(s=a),null==s&&(s=Q[0]),s},e.render=function(){null!==t.animationRequest||t.inRender||l()},co.forEach((function(n){var Q=n.charAt(0).toLowerCase()+n.slice(1);e["".concat(Q,"Event")]=function(Q){if(t.enabled)if(e.getCurrentRenderer()){var B=so({type:n,pokedRenderer:t.currentRenderer,firstRenderer:e.getFirstRenderer()},Q);e["invoke".concat(n)](B)}else go("\n          Can not forward events without a current renderer on the interactor.\n        ")}})),e.recognizeGesture=function(n,Q){if(!(Object.keys(Q).length>2)){if(t.startingEventPositions||(t.startingEventPositions={}),"TouchStart"===n)return Object.keys(Q).forEach((function(e){t.startingEventPositions[e]=Q[e]})),void(t.currentGesture="Start");if("TouchEnd"===n)return"Pinch"===t.currentGesture&&(e.render(),e.endPinchEvent()),"Rotate"===t.currentGesture&&(e.render(),e.endRotateEvent()),"Pan"===t.currentGesture&&(e.render(),e.endPanEvent()),t.currentGesture="Start",void(t.startingEventPositions={});var B=0,a=[],s=[];Object.keys(Q).forEach((function(e){a[B]=Q[e],s[B]=t.startingEventPositions[e],B++}));var r=Math.sqrt((s[0].x-s[1].x)*(s[0].x-s[1].x)+(s[0].y-s[1].y)*(s[0].y-s[1].y)),U=Math.sqrt((a[0].x-a[1].x)*(a[0].x-a[1].x)+(a[0].y-a[1].y)*(a[0].y-a[1].y)),F=Object(u.F)(Math.atan2(s[1].y-s[0].y,s[1].x-s[0].x)),l=Object(u.F)(Math.atan2(a[1].y-a[0].y,a[1].x-a[0].x)),o=l-F;l=l+180>=360?l-180:l+180,F=F+180>=360?F-180:F+180,Math.abs(l-F)<Math.abs(o)&&(o=l-F);var g=[];if(g[0]=(a[0].x-s[0].x+a[1].x-s[1].x)/2,g[1]=(a[0].y-s[0].y+a[1].y-s[1].y)/2,"TouchMove"===n)if("Start"===t.currentGesture){var i=.01*Math.sqrt(t.container.clientWidth*t.container.clientWidth+t.container.clientHeight*t.container.clientHeight);i<15&&(i=15);var c=Math.abs(U-r),d=3.1415926*U*Math.abs(o)/360,I=Math.sqrt(g[0]*g[0]+g[1]*g[1]);if(c>i&&c>d&&c>I){t.currentGesture="Pinch";var C={scale:1,touches:Q};e.startPinchEvent(C)}else if(d>i&&d>I){t.currentGesture="Rotate";var m={rotation:0,touches:Q};e.startRotateEvent(m)}else if(I>i){t.currentGesture="Pan";var b={translation:[0,0],touches:Q};e.startPanEvent(b)}}else{if("Rotate"===t.currentGesture){var S={rotation:o,touches:Q};e.rotateEvent(S)}if("Pinch"===t.currentGesture){var y={scale:U/r,touches:Q};e.pinchEvent(y)}if("Pan"===t.currentGesture){var Z={translation:g,touches:Q};e.panEvent(Z)}}}},e.handleVisibilityChange=function(){t.lastFrameStart=Date.now()};var o=e.delete;e.delete=function(){for(;n.size;)e.cancelAnimation(n.values().next().value);void 0!==document.hidden&&document.removeEventListener("visibilitychange",e.handleVisibilityChange),o()},void 0!==document.hidden&&document.addEventListener("visibilitychange",e.handleVisibilityChange,!1)}var Co={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,view:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{}};function mo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Co,n),a.c.obj(e,t),a.c.event(e,t,"RenderEvent"),co.forEach((function(n){return a.c.event(e,t,n)})),a.c.get(e,t,["initialized","container","interactorStyle","lastFrameTime","view"]),a.c.setGet(e,t,["lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker"]),uo(e,t)}var bo=so({newInstance:a.c.newInstance(mo,"vtkRenderWindowInteractor"),extend:mo,handledEvents:co},Bo),So=a.c.vtkDebugMacro;function yo(e,t){t.classHierarchy.push("vtkCamera");var n=new Float64Array(3),Q=new Float64Array([0,0,-1]),a=new Float64Array([0,1,0]),s=Object(S.h)(new Float64Array(16)),r=new Float64Array(3),U=new Float64Array(3),F=new Float64Array(3),l=Object(S.h)(new Float64Array(16)),o=Object(S.h)(new Float64Array(16)),g=new Float64Array(3),i=new Float64Array(3);function c(){t.viewPlaneNormal[0]=-t.directionOfProjection[0],t.viewPlaneNormal[1]=-t.directionOfProjection[1],t.viewPlaneNormal[2]=-t.directionOfProjection[2]}e.orthogonalizeViewUp=function(){var n=e.getViewMatrix();t.viewUp[0]=n[4],t.viewUp[1]=n[5],t.viewUp[2]=n[6],e.modified()},e.setPosition=function(n,Q,B){n===t.position[0]&&Q===t.position[1]&&B===t.position[2]||(t.position[0]=n,t.position[1]=Q,t.position[2]=B,e.computeDistance(),e.modified())},e.setFocalPoint=function(n,Q,B){n===t.focalPoint[0]&&Q===t.focalPoint[1]&&B===t.focalPoint[2]||(t.focalPoint[0]=n,t.focalPoint[1]=Q,t.focalPoint[2]=B,e.computeDistance(),e.modified())},e.setDistance=function(n){if(t.distance!==n){t.distance=n,t.distance<1e-20&&(t.distance=1e-20,So("Distance is set to minimum."));var Q=t.directionOfProjection;t.focalPoint[0]=t.position[0]+Q[0]*t.distance,t.focalPoint[1]=t.position[1]+Q[1]*t.distance,t.focalPoint[2]=t.position[2]+Q[2]*t.distance,e.modified()}},e.computeDistance=function(){var e=t.focalPoint[0]-t.position[0],n=t.focalPoint[1]-t.position[1],Q=t.focalPoint[2]-t.position[2];if(t.distance=Math.sqrt(e*e+n*n+Q*Q),t.distance<1e-20){t.distance=1e-20,So("Distance is set to minimum.");var B=t.directionOfProjection;t.focalPoint[0]=t.position[0]+B[0]*t.distance,t.focalPoint[1]=t.position[1]+B[1]*t.distance,t.focalPoint[2]=t.position[2]+B[2]*t.distance}t.directionOfProjection[0]=e/t.distance,t.directionOfProjection[1]=n/t.distance,t.directionOfProjection[2]=Q/t.distance,c()},e.dolly=function(n){if(!(n<=0)){var Q=t.distance/n;e.setPosition(t.focalPoint[0]-Q*t.directionOfProjection[0],t.focalPoint[1]-Q*t.directionOfProjection[1],t.focalPoint[2]-Q*t.directionOfProjection[2])}},e.roll=function(n){var Q=t.position,B=t.focalPoint,a=t.viewUp,s=new Float64Array([a[0],a[1],a[2],0]);Object(S.h)(l);var r=new Float64Array([B[0]-Q[0],B[1]-Q[1],B[2]-Q[2]]);Object(S.q)(l,l,Object(u.B)(n),r),Gr(s,s,l),t.viewUp[0]=s[0],t.viewUp[1]=s[1],t.viewUp[2]=s[2],e.modified()},e.azimuth=function(n){var Q=t.focalPoint;Object(S.h)(o),Object(S.s)(o,o,Q),Object(S.q)(o,o,Object(u.B)(n),t.viewUp),Object(S.s)(o,o,[-Q[0],-Q[1],-Q[2]]),Object(y.q)(g,t.position,o),e.setPosition(g[0],g[1],g[2])},e.yaw=function(n){var Q=t.position;Object(S.h)(o),Object(S.s)(o,o,Q),Object(S.q)(o,o,Object(u.B)(n),t.viewUp),Object(S.s)(o,o,[-Q[0],-Q[1],-Q[2]]),Object(y.q)(i,t.focalPoint,o),e.setFocalPoint(i[0],i[1],i[2])},e.elevation=function(n){var Q=t.focalPoint,B=e.getViewMatrix(),a=[-B[0],-B[1],-B[2]];Object(S.h)(o),Object(S.s)(o,o,Q),Object(S.q)(o,o,Object(u.B)(n),a),Object(S.s)(o,o,[-Q[0],-Q[1],-Q[2]]),Object(y.q)(g,t.position,o),e.setPosition(g[0],g[1],g[2])},e.pitch=function(n){var Q=t.position,a=e.getViewMatrix(),s=[a[0],a[1],a[2]];Object(S.h)(o),Object(S.s)(o,o,Q),Object(S.q)(o,o,Object(u.B)(n),s),Object(S.s)(o,o,[-Q[0],-Q[1],-Q[2]]),Object(y.q)(i,t.focalPoint,o),e.setFocalPoint.apply(e,Object(B.a)(i))},e.zoom=function(n){n<=0||(t.parallelProjection?t.parallelScale/=n:t.viewAngle/=n,e.modified())},e.translate=function(n,Q,B){var a=[n,Q,B];Object(u.x)(t.position,a,t.position),Object(u.x)(t.focalPoint,a,t.focalPoint),e.computeDistance(),e.modified()},e.applyTransform=function(n){var Q=[].concat(Object(B.a)(t.viewUp),[1]),a=[],s=[],r=[];Q[0]+=t.position[0],Q[1]+=t.position[1],Q[2]+=t.position[2],Gr(a,[].concat(Object(B.a)(t.position),[1]),n),Gr(s,[].concat(Object(B.a)(t.focalPoint),[1]),n),Gr(r,Q,n),r[0]-=a[0],r[1]-=a[1],r[2]-=a[2],e.setPosition.apply(e,Object(B.a)(a.slice(0,3))),e.setFocalPoint.apply(e,Object(B.a)(s.slice(0,3))),e.setViewUp.apply(e,Object(B.a)(r.slice(0,3)))},e.getThickness=function(){return t.clippingRange[1]-t.clippingRange[0]},e.setThickness=function(n){var Q=n;Q<1e-20&&(Q=1e-20,So("Thickness is set to minimum.")),e.setClippingRange(t.clippingRange[0],t.clippingRange[0]+Q)},e.setThicknessFromFocalPoint=function(n){var Q=n;Q<1e-20&&(Q=1e-20,So("Thickness is set to minimum.")),e.setClippingRange(t.distance-Q/2,t.distance+Q/2)},e.setRoll=function(e){},e.getRoll=function(){},e.setObliqueAngles=function(e,t){},e.getOrientation=function(){},e.getOrientationWXYZ=function(){},e.getFrustumPlanes=function(e){},e.getCameraLightTransformMatrix=function(){},e.deepCopy=function(e){},e.physicalOrientationToWorldDirection=function(e){var t,n,Q=pr(e[0],e[1],e[2],e[3]),B=Vr(),a=pr(0,0,1,0);return n=Q,(t=B)[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],Lr(a,Q,a),Lr(a,a,B),[a[0],a[1],a[2]]},e.getPhysicalToWorldMatrix=function(t){e.getWorldToPhysicalMatrix(t),Object(S.g)(t,t)},e.getWorldToPhysicalMatrix=function(e){Object(S.h)(e);var n=[3];Object(u.w)(t.physicalViewNorth,t.physicalViewUp,n),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[4]=t.physicalViewUp[0],e[5]=t.physicalViewUp[1],e[6]=t.physicalViewUp[2],e[8]=-t.physicalViewNorth[0],e[9]=-t.physicalViewNorth[1],e[10]=-t.physicalViewNorth[2],Object(S.i)(e,e),Object(y.p)(r,1/t.physicalScale,1/t.physicalScale,1/t.physicalScale),Object(S.r)(e,e,r),Object(S.s)(e,e,t.physicalTranslation)},e.computeViewParametersFromViewMatrix=function(B){Object(S.g)(s,B),Object(y.q)(r,n,s),e.computeDistance();var l=t.distance;e.setPosition(r[0],r[1],r[2]),Object(y.q)(U,Q,s),Object(y.a)(U,U,r),Object(y.l)(U,U),e.setDirectionOfProjection(U[0],U[1],U[2]),Object(y.q)(F,a,s),Object(y.a)(F,F,r),Object(y.l)(F,F),e.setViewUp(F[0],F[1],F[2]),e.setDistance(l)},e.computeViewParametersFromPhysicalMatrix=function(t){e.getWorldToPhysicalMatrix(s),Object(S.l)(s,t,s),e.computeViewParametersFromViewMatrix(s)},e.setViewMatrix=function(n){t.viewMatrix=n,t.viewMatrix&&(Object(S.d)(s,t.viewMatrix),e.computeViewParametersFromViewMatrix(s),Object(S.i)(t.viewMatrix,t.viewMatrix))},e.getViewMatrix=function(){if(t.viewMatrix)return t.viewMatrix;Object(S.k)(s,t.position,t.focalPoint,t.viewUp),Object(S.i)(s,s);var e=new Float64Array(16);return Object(S.d)(e,s),e},e.setProjectionMatrix=function(e){t.projectionMatrix=e},e.getProjectionMatrix=function(e,n,Q){var B=new Float64Array(16);if(Object(S.h)(B),t.projectionMatrix){var a=1/t.physicalScale;return Object(y.p)(r,a,a,a),Object(S.d)(B,t.projectionMatrix),Object(S.r)(B,B,r),Object(S.i)(B,B),B}Object(S.h)(s);var U=t.clippingRange[1]-t.clippingRange[0],F=[t.clippingRange[0]+(n+1)*U/2,t.clippingRange[0]+(Q+1)*U/2];if(t.parallelProjection){var l=t.parallelScale*e,o=t.parallelScale,g=(t.windowCenter[0]-1)*l,i=(t.windowCenter[0]+1)*l,c=(t.windowCenter[1]-1)*o,d=(t.windowCenter[1]+1)*o;Object(S.n)(s,g,i,c,d,F[0],F[1]),Object(S.i)(s,s)}else{if(t.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");var I,C,m=Math.tan(Object(u.B)(t.viewAngle)/2);!0===t.useHorizontalViewAngle?(I=t.clippingRange[0]*m,C=t.clippingRange[0]*m/e):(I=t.clippingRange[0]*m*e,C=t.clippingRange[0]*m);var b=(t.windowCenter[0]-1)*I,Z=(t.windowCenter[0]+1)*I,x=(t.windowCenter[1]-1)*C,G=(t.windowCenter[1]+1)*C,V=F[0],R=F[1];s[0]=2*V/(Z-b),s[5]=2*V/(G-x),s[2]=(b+Z)/(Z-b),s[6]=(x+G)/(G-x),s[10]=-(V+R)/(R-V),s[14]=-1,s[11]=-2*V*R/(R-V),s[15]=0}return Object(S.d)(B,s),B},e.getCompositeProjectionMatrix=function(t,n,Q){var B=e.getViewMatrix(),a=e.getProjectionMatrix(t,n,Q);return Object(S.l)(a,B,a),a},e.setDirectionOfProjection=function(e,n,Q){if(t.directionOfProjection[0]!==e||t.directionOfProjection[1]!==n||t.directionOfProjection[2]!==Q){t.directionOfProjection[0]=e,t.directionOfProjection[1]=n,t.directionOfProjection[2]=Q;var B=t.directionOfProjection;t.focalPoint[0]=t.position[0]+B[0]*t.distance,t.focalPoint[1]=t.position[1]+B[1]*t.distance,t.focalPoint[2]=t.position[2]+B[2]*t.distance,c()}},e.setDeviceAngles=function(n,Q,B,a){var s=[3];Object(u.w)(t.physicalViewNorth,t.physicalViewUp,s);var r=Object(S.h)(new Float64Array(16));Object(S.q)(r,r,Object(u.B)(n),t.physicalViewUp),Object(S.q)(r,r,Object(u.B)(Q),s),Object(S.q)(r,r,Object(u.B)(B),t.physicalViewNorth),Object(S.q)(r,r,Object(u.B)(-a),t.physicalViewUp);var U=new Float64Array([-t.physicalViewUp[0],-t.physicalViewUp[1],-t.physicalViewUp[2]]),F=new Float64Array(t.physicalViewNorth);Object(y.q)(U,U,r),Object(y.q)(F,F,r),e.setDirectionOfProjection(U[0],U[1],U[2]),e.setViewUp(F[0],F[1],F[2]),e.modified()},e.setOrientationWXYZ=function(t,n,Q,a){var s=Object(S.h)(new Float64Array(16));if(0!==t&&(0!==n||0!==Q||0!==a)){var r=Object(u.B)(t),U=Vr();Rr(U,[n,Q,a],r),Object(S.j)(s,U)}var F=new Float64Array(3);Object(y.q)(F,[0,0,-1],s);var l=new Float64Array(3);Object(y.q)(l,[0,1,0],s),e.setDirectionOfProjection.apply(e,Object(B.a)(F)),e.setViewUp.apply(e,Object(B.a)(l)),e.modified()},e.computeClippingRange=function(e){var n,Q;n=t.viewPlaneNormal,Q=t.position;for(var B=-n[0],a=-n[1],s=-n[2],r=-(B*Q[0]+a*Q[1]+s*Q[2]),U=[B*e[0]+a*e[2]+s*e[4]+r,1e-18],F=0;F<2;F++)for(var l=0;l<2;l++)for(var o=0;o<2;o++){var g=B*e[o]+a*e[2+l]+s*e[4+F]+r;U[0]=g<U[0]?g:U[0],U[1]=g>U[1]?g:U[1]}return U}}var Zo={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function xo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zo,n),a.c.obj(e,t),a.c.get(e,t,["distance"]),a.c.setGet(e,t,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),a.c.getArray(e,t,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),a.c.setGetArray(e,t,["clippingRange","windowCenter"],2),a.c.setGetArray(e,t,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),yo(e,t)}var Go={newInstance:a.c.newInstance(xo,"vtkCamera"),extend:xo};function Vo(e,t){t.classHierarchy.push("vtkLight"),e.getTransformedPosition=function(){return t.transformMatrix?[]:[].concat(t.position)},e.getTransformedFocalPoint=function(){return t.transformMatrix?[]:[].concat(t.focalPoint)},e.getDirection=function(){return t.directionMTime<t.mtime&&(t.direction[0]=t.focalPoint[0]-t.position[0],t.direction[1]=t.focalPoint[1]-t.position[1],t.direction[2]=t.focalPoint[2]-t.position[2],Object(u.y)(t.direction),t.directionMTime=t.mtime),t.direction},e.setDirectionAngle=function(t,n){var Q=Object(u.B)(t),B=Object(u.B)(n);e.setPosition(Math.cos(Q)*Math.sin(B),Math.sin(Q),Math.cos(Q)*Math.cos(B)),e.setFocalPoint(0,0,0),e.setPositional(0)},e.setLightTypeToHeadLight=function(){e.setLightType("HeadLight")},e.setLightTypeToCameraLight=function(){e.setLightType("CameraLight")},e.setLightTypeToSceneLight=function(){e.setTransformMatrix(null),e.setLightType("SceneLight")},e.lightTypeIsHeadLight=function(){return"HeadLight"===t.lightType},e.lightTypeIsSceneLight=function(){return"SceneLight"===t.lightType},e.lightTypeIsCameraLight=function(){return"CameraLight"===t.lightType}}var Ro={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function Lo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ro,n),a.c.obj(e,t),a.c.setGet(e,t,["intensity","switch","positional","exponent","coneAngle","transformMatrix","lightType","shadowAttenuation"]),a.c.setGetArray(e,t,["color","position","focalPoint","attenuationValues"],3),Vo(e,t)}var po={newInstance:a.c.newInstance(Lo,"vtkLight"),extend:Lo,LIGHT_TYPES:["HeadLight","CameraLight","SceneLight"]},ho=a.c.vtkErrorMacro;function No(e,t){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.push(e);var Q=e.getNestedProps();if(Q&&Q.length)for(var B=0;B<Q.length;B++)n(Q[B],t);return t}t.classHierarchy.push("vtkViewport"),e.getViewProps=function(){return t.props},e.hasViewProp=function(e){return!!t.props.filter((function(t){return t===e})).length},e.addViewProp=function(n){n&&!e.hasViewProp(n)&&(t.props=t.props.concat(n))},e.removeViewProp=function(e){var n=t.props.filter((function(t){return t!==e}));t.props.length!==n.length&&(t.props=n)},e.removeAllViewProps=function(){t.props=[]},e.getViewPropsWithNestedProps=function(){for(var e=[],Q=0;Q<t.props.length;Q++)n(t.props[Q],e);return e},e.addActor2D=e.addViewProp,e.removeActor2D=function(t){e.removeViewProp(t)},e.getActors2D=function(){return t.actors2D=[],t.props.forEach((function(e){t.actors2D=t.actors2D.concat(e.getActors2D())})),t.actors2D},e.displayToView=function(){return ho("call displayToView on your view instead")},e.viewToDisplay=function(){return ho("callviewtodisplay on your view instead")},e.getSize=function(){return ho("call getSize on your View instead")},e.normalizedDisplayToProjection=function(t,n,Q){var B=e.normalizedDisplayToNormalizedViewport(t,n,Q);return e.normalizedViewportToProjection(B[0],B[1],B[2])},e.normalizedDisplayToNormalizedViewport=function(e,n,Q){var B=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[(e-t.viewport[0])/B[0],(n-t.viewport[1])/B[1],Q]},e.normalizedViewportToProjection=function(e,t,n){return[2*e-1,2*t-1,2*n-1]},e.projectionToNormalizedDisplay=function(t,n,Q){var B=e.projectionToNormalizedViewport(t,n,Q);return e.normalizedViewportToNormalizedDisplay(B[0],B[1],B[2])},e.normalizedViewportToNormalizedDisplay=function(e,n,Q){var B=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[e*B[0]+t.viewport[0],n*B[1]+t.viewport[1],Q]},e.projectionToNormalizedViewport=function(e,t,n){return[.5*(e+1),.5*(t+1),.5*(n+1)]},e.PickPropFrom=("PickPropFrom",function(){return ho("vtkViewport::".concat("PickPropFrom"," - NOT IMPLEMENTED"))})}var Do={vtkWindow:null,background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function Ao(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Do,n),a.c.obj(e,t),a.c.event(e,t,"event"),a.c.setGetArray(e,t,["viewport"],4),a.c.setGetArray(e,t,["background","background2"],3),No(e,t)}var Eo={newInstance:a.c.newInstance(Ao,"vtkViewport"),extend:Ao},fo=a.l,Jo=a.m,vo=a.n;function Wo(e){return function(){return Jo("vtkRenderer::".concat(e," - NOT IMPLEMENTED"))}}function Xo(e,t){for(t.classHierarchy.push("vtkRenderer"),t.background||(t.background=[0,0,0,1]);t.background.length<3;)t.background.push(0);3===t.background.length&&t.background.push(1);var n={type:"ComputeVisiblePropBoundsEvent",renderer:e},Q={type:"ResetCameraClippingRangeEvent",renderer:e},B={type:"ResetCameraEvent",renderer:e};e.updateCamera=function(){return t.activeCamera||(fo("No cameras are on, creating one."),e.getActiveCameraAndResetIfCreated()),t.activeCamera.render(e),!0},e.updateLightsGeometryToFollowCamera=function(){var n=e.getActiveCameraAndResetIfCreated();t.lights.forEach((function(e){e.lightTypeIsSceneLight()||e.lightTypeIsCameraLight()||(e.lightTypeIsHeadLight()?(e.setPositionFrom(n.getPositionByReference()),e.setFocalPointFrom(n.getFocalPointByReference()),e.modified(n.getMTime())):Jo("light has unknown light type",e.get()))}))},e.updateLightGeometry=function(){return!t.lightFollowCamera||e.updateLightsGeometryToFollowCamera()},e.allocateTime=Wo("allocateTime"),e.updateGeometry=Wo("updateGeometry"),e.getVTKWindow=function(){return t.renderWindow},e.setLayer=function(n){fo(e.getClassName(),e,"setting Layer to ",n),t.layer!==n&&(t.layer=n,e.modified()),e.setPreserveColorBuffer(!!n)},e.setActiveCamera=function(n){return t.activeCamera!==n&&(t.activeCamera=n,e.modified(),e.invokeEvent({type:"ActiveCameraEvent",camera:n}),!0)},e.makeCamera=function(){var t=Go.newInstance();return e.invokeEvent({type:"CreateCameraEvent",camera:t}),t},e.getActiveCamera=function(){return t.activeCamera||(t.activeCamera=e.makeCamera()),t.activeCamera},e.getActiveCameraAndResetIfCreated=function(){return t.activeCamera||(e.getActiveCamera(),e.resetCamera()),t.activeCamera},e.getActors=function(){return t.actors=[],t.props.forEach((function(e){t.actors=t.actors.concat(e.getActors())})),t.actors},e.addActor=e.addViewProp,e.removeActor=function(n){t.actors=t.actors.filter((function(e){return e!==n})),e.removeViewProp(n),e.modified()},e.removeAllActors=function(){e.getActors().forEach((function(t){e.removeViewProp(t)})),t.actors=[],e.modified()},e.getVolumes=function(){return t.volumes=[],t.props.forEach((function(e){t.volumes=t.volumes.concat(e.getVolumes())})),t.volumes},e.addVolume=e.addViewProp,e.removeVolume=function(n){t.volumes=t.volumes.filter((function(e){return e!==n})),e.removeViewProp(n),e.modified()},e.removeAllVolumes=function(){e.getVolumes().forEach((function(t){e.removeViewProp(t)})),t.volumes=[],e.modified()},e.addLight=function(n){t.lights=[].concat(t.lights,n),e.modified()},e.removeLight=function(n){t.lights=t.lights.filter((function(e){return e!==n})),e.modified()},e.removeAllLights=function(){t.lights=[],e.modified()},e.setLightCollection=function(n){t.lights=n,e.modified()},e.makeLight=po.newInstance,e.createLight=function(){t.automaticLightCreation&&(t.createdLight&&(e.removeLight(t.createdLight),t.createdLight.delete(),t.createdLight=null),t.createdLight=e.makeLight(),e.addLight(t.createdLight),t.createdLight.setLightTypeToHeadLight(),t.createdLight.setPosition(e.getActiveCamera().getPosition()),t.createdLight.setFocalPoint(e.getActiveCamera().getFocalPoint()))},e.normalizedDisplayToWorld=function(t,n,Q,B){var a=e.normalizedDisplayToProjection(t,n,Q);return a=e.projectionToView(a[0],a[1],a[2],B),e.viewToWorld(a[0],a[1],a[2])},e.worldToNormalizedDisplay=function(t,n,Q,B){var a=e.worldToView(t,n,Q);return a=e.viewToProjection(a[0],a[1],a[2],B),e.projectionToNormalizedDisplay(a[0],a[1],a[2])},e.viewToWorld=function(e,n,Q){if(null===t.activeCamera)return Jo("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var B=t.activeCamera.getViewMatrix();Object(S.g)(B,B),Object(S.i)(B,B);var a=new Float64Array([e,n,Q]);return Object(y.q)(a,a,B),a},e.projectionToView=function(e,n,Q,B){if(null===t.activeCamera)return Jo("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getProjectionMatrix(B,-1,1);Object(S.g)(a,a),Object(S.i)(a,a);var s=new Float64Array([e,n,Q]);return Object(y.q)(s,s,a),s},e.worldToView=function(e,n,Q){if(null===t.activeCamera)return Jo("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var B=t.activeCamera.getViewMatrix();Object(S.i)(B,B);var a=new Float64Array([e,n,Q]);return Object(y.q)(a,a,B),a},e.viewToProjection=function(e,n,Q,B){if(null===t.activeCamera)return Jo("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getProjectionMatrix(B,-1,1);Object(S.i)(a,a);var s=new Float64Array([e,n,Q]);return Object(y.q)(s,s,a),s},e.computeVisiblePropBounds=function(){t.allBounds[0]=st.INIT_BOUNDS[0],t.allBounds[1]=st.INIT_BOUNDS[1],t.allBounds[2]=st.INIT_BOUNDS[2],t.allBounds[3]=st.INIT_BOUNDS[3],t.allBounds[4]=st.INIT_BOUNDS[4],t.allBounds[5]=st.INIT_BOUNDS[5];var Q=!0;e.invokeEvent(n);for(var B=0;B<t.props.length;++B){var a=t.props[B];if(a.getVisibility()&&a.getUseBounds()){var s=a.getBounds();s&&Object(u.l)(s)&&(Q=!1,s[0]<t.allBounds[0]&&(t.allBounds[0]=s[0]),s[1]>t.allBounds[1]&&(t.allBounds[1]=s[1]),s[2]<t.allBounds[2]&&(t.allBounds[2]=s[2]),s[3]>t.allBounds[3]&&(t.allBounds[3]=s[3]),s[4]<t.allBounds[4]&&(t.allBounds[4]=s[4]),s[5]>t.allBounds[5]&&(t.allBounds[5]=s[5]))}}return Q&&(Object(u.D)(t.allBounds),fo("Can't compute bounds, no 3D props are visible")),t.allBounds},e.resetCamera=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,Q=n||e.computeVisiblePropBounds(),a=[0,0,0];if(!Object(u.l)(Q))return fo("Cannot reset camera!"),!1;var s=null;if(!e.getActiveCamera())return Jo("Trying to reset non-existent camera"),!1;s=t.activeCamera.getViewPlaneNormal(),t.activeCamera.setViewAngle(30),a[0]=(Q[0]+Q[1])/2,a[1]=(Q[2]+Q[3])/2,a[2]=(Q[4]+Q[5])/2;var r=Q[1]-Q[0],U=Q[3]-Q[2],F=Q[5]-Q[4],l=(r*=r)+(U*=U)+(F*=F);l=0===l?1:l,l=.5*Math.sqrt(l);var o=Object(u.B)(t.activeCamera.getViewAngle()),g=l,i=l/Math.sin(.5*o),c=t.activeCamera.getViewUp();return Math.abs(Object(u.q)(c,s))>.999&&(vo("Resetting view-up since view plane normal is parallel"),t.activeCamera.setViewUp(-c[2],c[0],c[1])),t.activeCamera.setFocalPoint(a[0],a[1],a[2]),t.activeCamera.setPosition(a[0]+i*s[0],a[1]+i*s[1],a[2]+i*s[2]),e.resetCameraClippingRange(Q),t.activeCamera.setParallelScale(g),t.activeCamera.setPhysicalScale(l),t.activeCamera.setPhysicalTranslation(-a[0],-a[1],-a[2]),e.invokeEvent(B),!0},e.resetCameraClippingRange=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,B=n||e.computeVisiblePropBounds();if(!Object(u.l)(B))return fo("Cannot reset camera clipping range!"),!1;if(e.getActiveCameraAndResetIfCreated(),!t.activeCamera)return Jo("Trying to reset clipping range of non-existent camera"),!1;var a=t.activeCamera.computeClippingRange(B),s=0;if(t.activeCamera.getParallelProjection())s=.1*t.activeCamera.getParallelScale();else{var r=Object(u.B)(t.activeCamera.getViewAngle());s=.2*Math.tan(r/2)*a[1]}return a[1]-a[0]<s&&(s=s-a[1]+a[0],a[1]+=s/2,a[0]-=s/2),a[0]<0&&(a[0]=0),a[0]=.99*a[0]-(a[1]-a[0])*t.clippingRangeExpansion,a[1]=1.01*a[1]+(a[1]-a[0])*t.clippingRangeExpansion,a[0]=a[0]>=a[1]?.01*a[1]:a[0],t.nearClippingPlaneTolerance||(t.nearClippingPlaneTolerance=.01),a[0]<t.nearClippingPlaneTolerance*a[1]&&(a[0]=t.nearClippingPlaneTolerance*a[1]),t.activeCamera.setClippingRange(a[0],a[1]),e.invokeEvent(Q),!1},e.setRenderWindow=function(e){e!==t.renderWindow&&(t.vtkWindow=e,t.renderWindow=e)},e.visibleActorCount=function(){return t.props.filter((function(e){return e.getVisibility()})).length},e.visibleVolumeCount=e.visibleActorCount,e.getMTime=function(){var e=t.mtime,n=t.activeCamera?t.activeCamera.getMTime():0;n>e&&(e=n);var Q=t.createdLight?t.createdLight.getMTime():0;return Q>e&&(e=Q),e},e.getTransparent=function(){return!!t.preserveColorBuffer},e.isActiveCameraCreated=function(){return!!t.activeCamera}}var Ho={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,createdLight:null,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:Object(u.j)(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,pass:0};function ko(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ho,n),Eo.extend(e,t,n),Object(a.e)(e,t,["renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),Object(a.j)(e,t,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","useShadows","pass"]),Object(a.f)(e,t,["actors","volumes","lights"]),Object(a.k)(e,t,["background"],4,1),Xo(e,t)}var To={newInstance:Object(a.g)(ko,"vtkRenderer"),extend:ko};function Mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wo=a.c.vtkErrorMacro,Oo=a.c.VOID;function zo(e,t){t.classHierarchy.push("vtkInteractorObserver");var n=Yo({},e);function Q(){for(;t.subscribedEvents.length;)t.subscribedEvents.pop().unsubscribe()}function B(){bo.handledEvents.forEach((function(n){e["handle".concat(n)]&&t.subscribedEvents.push(t.interactor["on".concat(n)]((function(Q){return t.processEvents?e["handle".concat(n)](Q):Oo}),t.priority))}))}e.setInteractor=function(n){n!==t.interactor&&(Q(),t.interactor=n,n&&t.enabled&&B(),e.modified())},e.setEnabled=function(n){n!==t.enabled&&(Q(),n&&(t.interactor?B():wo("\n          The interactor must be set before subscribing to events\n        ")),t.enabled=n,e.modified())},e.computeDisplayToWorld=function(e,n,Q,B){return e?t.interactor.getView().displayToWorld(n,Q,B,e):null},e.computeWorldToDisplay=function(e,n,Q,B){return e?t.interactor.getView().worldToDisplay(n,Q,B,e):null},e.setPriority=function(e){n.setPriority(e)&&t.interactor&&(Q(),B())}}var Po={enabled:!0,interactor:null,priority:0,processEvents:!0,subscribedEvents:[]};function Ko(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Po,n),a.c.obj(e,t),a.c.event(e,t,"InteractionEvent"),a.c.event(e,t,"StartInteractionEvent"),a.c.event(e,t,"EndInteractionEvent"),a.c.get(e,t,["interactor","enabled"]),a.c.setGet(e,t,["priority","processEvents"]),zo(e,t)}var jo=Yo({newInstance:a.c.newInstance(Ko,"vtkInteractorObserver"),extend:Ko},{computeWorldToDisplay:function(e,t,n,Q){return e.getRenderWindow().getViews()[0].worldToDisplay(t,n,Q,e)},computeDisplayToWorld:function(e,t,n,Q){return e.getRenderWindow().getViews()[0].displayToWorld(t,n,Q,e)}}),_o={States:{IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025}};function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var $o=_o.States,eg={Rotate:$o.IS_ROTATE,Pan:$o.IS_PAN,Spin:$o.IS_SPIN,Dolly:$o.IS_DOLLY,CameraPose:$o.IS_CAMERA_POSE,WindowLevel:$o.IS_WINDOW_LEVEL,Slice:$o.IS_SLICE};function tg(e,t){t.classHierarchy.push("vtkInteractorStyle"),Object.keys(eg).forEach((function(n){a.c.event(e,t,"Start".concat(n,"Event")),e["start".concat(n)]=function(){t.state===$o.IS_NONE&&(t.state=eg[n],t.interactor.requestAnimation(e),e.invokeStartInteractionEvent({type:"StartInteractionEvent"}),e["invokeStart".concat(n,"Event")]({type:"Start".concat(n,"Event")}))},a.c.event(e,t,"End".concat(n,"Event")),e["end".concat(n)]=function(){t.state===eg[n]&&(t.state=$o.IS_NONE,t.interactor.cancelAnimation(e),e.invokeEndInteractionEvent({type:"EndInteractionEvent"}),e["invokeEnd".concat(n,"Event")]({type:"End".concat(n,"Event")}),t.interactor.render())}})),e.handleKeyPress=function(e){var n=t.interactor;switch(e.key){case"r":case"R":e.pokedRenderer.resetCamera(),n.render();break;case"w":case"W":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToWireframe&&t.setRepresentationToWireframe()})),n.render();break;case"s":case"S":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToSurface&&t.setRepresentationToSurface()})),n.render();break;case"v":case"V":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToPoints&&t.setRepresentationToPoints()})),n.render()}}}var ng={state:$o.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function Qg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ng,n),jo.extend(e,t,n),tg(e,t)}var Bg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(Qg,"vtkInteractorStyle"),extend:Qg},_o);function ag(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var sg=a.c.vtkDebugMacro,rg=Bg.States,Ug={type:"StartInteractionEvent"},Fg={type:"InteractionEvent"},lg={type:"EndInteractionEvent"};function og(e,t,n,Q,B,a){var s=e.getActiveCamera(),r=s.getFocalPoint(),U=(r=t.getInteractorStyle().computeWorldToDisplay(e,r[0],r[1],r[2]))[2],F=t.getInteractorStyle().computeDisplayToWorld(e,n,Q,U),l=t.getInteractorStyle().computeDisplayToWorld(e,B,a,U),o=[l[0]-F[0],l[1]-F[1],l[2]-F[2]];r=s.getFocalPoint();var g=s.getPosition();s.setFocalPoint(o[0]+r[0],o[1]+r[1],o[2]+r[2]),s.setPosition(o[0]+g[0],o[1]+g[1],o[2]+g[2])}var gg={dollyToPosition:function(e,t,n,Q){var B=n.getActiveCamera();if(B.getParallelProjection()){var a=Q.getView().getSize(),s=a[0]/2,r=a[1]/2,U=t.x,F=t.y;og(n,Q,s,r,U,F),B.setParallelScale(B.getParallelScale()/e),og(n,Q,U,F,s,r)}else{var l=B.getFocalPoint(),o=B.getViewPlaneNormal();l=Q.getInteractorStyle().computeWorldToDisplay(n,l[0],l[1],l[2]);var g=Q.getInteractorStyle().computeDisplayToWorld(n,t.x,t.y,l[2]);B.setFocalPoint(g[0],g[1],g[2]),B.dolly(e),n.resetCameraClippingRange();var i=B.getPosition();l=B.getFocalPoint();var c=[0,0,0],d=o[0]*(l[0]-i[0])+o[1]*(l[1]-i[1])+o[2]*(l[2]-i[2]);d/=Math.pow(o[0],2)+Math.pow(o[1],2)+Math.pow(o[2],2),c[0]=i[0]+o[0]*d,c[1]=i[1]+o[1]*d,c[2]=i[2]+o[2]*d,B.setFocalPoint(c[0],c[1],c[2]),n.resetCameraClippingRange()}},translateCamera:og,dollyByFactor:function(e,t,n){if(!Number.isNaN(n)){var Q=t.getActiveCamera();Q.getParallelProjection()?Q.setParallelScale(Q.getParallelScale()/n):(Q.dolly(n),t.resetCameraClippingRange()),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}};function ig(e,t){t.classHierarchy.push("vtkInteractorStyleManipulator"),t.mouseManipulators=[],t.keyboardManipulators=[],t.vrManipulators=[],t.gestureManipulators=[],t.currentManipulator=null,t.currentWheelManipulator=null,t.centerOfRotation=[0,0,0],t.rotationFactor=1,e.removeAllManipulators=function(){e.removeAllMouseManipulators(),e.removeAllKeyboardManipulators(),e.removeAllVRManipulators(),e.removeAllGestureManipulators()},e.removeAllMouseManipulators=function(){t.mouseManipulators=[]},e.removeAllKeyboardManipulators=function(){t.keyboardManipulators=[]},e.removeAllVRManipulators=function(){t.vrManipulators=[]},e.removeAllGestureManipulators=function(){t.gestureManipulators=[]};var n=function(t,n){var Q=n.indexOf(t);return-1!==Q&&(n.splice(Q,1),e.modified(),!0)};e.removeMouseManipulator=function(e){return n(e,t.mouseManipulators)},e.removeKeyboardManipulator=function(e){return n(e,t.keyboardManipulators)},e.removeVRManipulator=function(e){return n(e,t.vrManipulators)},e.removeGestureManipulator=function(e){return n(e,t.gestureManipulators)};var Q=function(t,n){return-1===n.indexOf(t)&&(n.push(t),e.modified(),!0)};e.addMouseManipulator=function(e){return Q(e,t.mouseManipulators)},e.addKeyboardManipulator=function(e){return Q(e,t.keyboardManipulators)},e.addVRManipulator=function(e){return Q(e,t.vrManipulators)},e.addGestureManipulator=function(e){return Q(e,t.gestureManipulators)},e.getNumberOfMouseManipulators=function(){return t.mouseManipulators.length},e.getNumberOfKeyboardManipulators=function(){return t.keyboardManipulators.length},e.getNumberOfVRManipulators=function(){return t.vrManipulators.length},e.getNumberOfGestureManipulators=function(){return t.gestureManipulators.length},e.resetCurrentManipulator=function(){t.currentManipulator=null,t.currentWheelManipulator=null},e.handleLeftButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(1,n)},e.handleMiddleButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(2,n)},e.handleRightButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(3,n)},e.handleButton3D=function(n){n&&(t.currentManipulator=e.findVRManipulator(n.device,n.input,n.pressed),t.currentManipulator?(t.currentManipulator.onButton3D(e,n.pokedRenderer,t.state,n.device,n.input,n.pressed),n.pressed?e.startCameraPose():e.endCameraPose()):sg("No manipulator found"))},e.handleMove3D=function(n){t.currentManipulator&&t.state===rg.IS_CAMERA_POSE&&t.currentManipulator.onMove3D(e,n.pokedRenderer,t.state,n)},e.onButtonDown=function(n,Q){t.currentManipulator||(t.currentManipulator=e.findMouseManipulator(n,Q.shiftKey,Q.controlKey,Q.altKey),t.currentManipulator?(t.currentManipulator.setCenter&&t.currentManipulator.setCenter(t.centerOfRotation),t.currentManipulator.setRotationFactor&&t.currentManipulator.setRotationFactor(t.rotationFactor),t.currentManipulator.startInteraction(),t.currentManipulator.onButtonDown(t.interactor,Q.pokedRenderer,Q.position),t.interactor.requestAnimation(e.onButtonDown),e.invokeStartInteractionEvent(Ug)):sg("No manipulator found"))},e.findMouseManipulator=function(e,n,Q,B){for(var a=null,s=t.mouseManipulators.length;s--;){var r=t.mouseManipulators[s];r&&r.getButton()===e&&r.getShift()===n&&r.getControl()===Q&&r.getAlt()===B&&r.isDragEnabled()&&(a=r)}return a},e.findVRManipulator=function(e,n){for(var Q=null,B=t.vrManipulators.length;B--;){var a=t.vrManipulators[B];a&&a.getDevice()===e&&a.getInput()===n&&(Q=a)}return Q},e.handleLeftButtonRelease=function(){e.onButtonUp(1)},e.handleMiddleButtonRelease=function(){e.onButtonUp(2)},e.handleRightButtonRelease=function(){e.onButtonUp(3)},e.onButtonUp=function(n){t.currentManipulator&&t.currentManipulator.getButton&&t.currentManipulator.getButton()===n&&(t.currentManipulator.onButtonUp(t.interactor),t.currentManipulator.endInteraction(),t.currentManipulator=null,t.interactor.cancelAnimation(e.onButtonDown),e.invokeEndInteractionEvent(lg))},e.handleStartMouseWheel=function(n){if(!t.currentWheelManipulator){for(var Q=null,B=t.mouseManipulators.length;B--;){var a=t.mouseManipulators[B];a&&a.isScrollEnabled()&&a.getShift()===n.shiftKey&&a.getControl()===n.controlKey&&a.getAlt()===n.altKey&&(Q=a)}Q?(t.currentWheelManipulator=Q,t.currentWheelManipulator.onStartScroll(t.interactor,n.pokedRenderer,n.spinY),t.currentWheelManipulator.startInteraction(),t.interactor.requestAnimation(e.handleStartMouseWheel),e.invokeStartInteractionEvent(Ug)):sg("No manipulator found")}},e.handleEndMouseWheel=function(){t.currentWheelManipulator&&t.currentWheelManipulator.onEndScroll&&(t.currentWheelManipulator.onEndScroll(t.interactor),t.currentWheelManipulator.endInteraction(),t.currentWheelManipulator=null,t.interactor.cancelAnimation(e.handleStartMouseWheel),e.invokeEndInteractionEvent(lg))},e.handleMouseWheel=function(n){t.currentWheelManipulator&&t.currentWheelManipulator.onScroll&&(t.currentWheelManipulator.onScroll(t.interactor,n.pokedRenderer,n.spinY,t.cachedMousePosition),e.invokeInteractionEvent(Fg))},e.handleMouseMove=function(n){t.cachedMousePosition=n.position,t.currentManipulator&&t.currentManipulator.onMouseMove&&(t.currentManipulator.onMouseMove(t.interactor,n.pokedRenderer,n.position),e.invokeInteractionEvent(Fg))},e.handleKeyPress=function(n){t.keyboardManipulators.filter((function(e){return e.onKeyPress})).forEach((function(Q){Q.onKeyPress(t.interactor,n.pokedRenderer,n.key),e.invokeInteractionEvent(Fg)}))},e.handleKeyDown=function(n){t.keyboardManipulators.filter((function(e){return e.onKeyDown})).forEach((function(Q){Q.onKeyDown(t.interactor,n.pokedRenderer,n.key),e.invokeInteractionEvent(Fg)}))},e.handleKeyUp=function(n){t.keyboardManipulators.filter((function(e){return e.onKeyUp})).forEach((function(Q){Q.onKeyUp(t.interactor,n.pokedRenderer,n.key),e.invokeInteractionEvent(Fg)}))},e.handleStartPinch=function(n){e.startDolly();for(var Q=t.gestureManipulators.length;Q--;){var B=t.gestureManipulators[Q];B&&B.isPinchEnabled()&&(B.onStartPinch(t.interactor,n.scale),B.startInteraction())}t.interactor.requestAnimation(e.handleStartPinch),e.invokeStartInteractionEvent(Ug)},e.handleEndPinch=function(){e.endDolly();for(var n=t.gestureManipulators.length;n--;){var Q=t.gestureManipulators[n];Q&&Q.isPinchEnabled()&&(Q.onEndPinch(t.interactor),Q.endInteraction())}t.interactor.cancelAnimation(e.handleStartPinch),e.invokeEndInteractionEvent(lg)},e.handleStartRotate=function(n){e.startRotate();for(var Q=t.gestureManipulators.length;Q--;){var B=t.gestureManipulators[Q];B&&B.isRotateEnabled()&&(B.onStartRotate(t.interactor,n.rotation),B.startInteraction())}t.interactor.requestAnimation(e.handleStartRotate),e.invokeStartInteractionEvent(Ug)},e.handleEndRotate=function(){e.endRotate();for(var n=t.gestureManipulators.length;n--;){var Q=t.gestureManipulators[n];Q&&Q.isRotateEnabled()&&(Q.onEndRotate(t.interactor),Q.endInteraction())}t.interactor.cancelAnimation(e.handleStartRotate),e.invokeEndInteractionEvent(lg)},e.handleStartPan=function(n){e.startPan();for(var Q=t.gestureManipulators.length;Q--;){var B=t.gestureManipulators[Q];B&&B.isPanEnabled()&&(B.onStartPan(t.interactor,n.translation),B.startInteraction())}t.interactor.requestAnimation(e.handleStartPan),e.invokeStartInteractionEvent(Ug)},e.handleEndPan=function(){e.endPan();for(var n=t.gestureManipulators.length;n--;){var Q=t.gestureManipulators[n];Q&&Q.isPanEnabled()&&(Q.onEndPan(t.interactor),Q.endInteraction())}t.interactor.cancelAnimation(e.handleStartPan),e.invokeEndInteractionEvent(lg)},e.handlePinch=function(n){for(var Q=t.gestureManipulators.length,B=0;Q--;){var a=t.gestureManipulators[Q];a&&a.isPinchEnabled()&&(a.onPinch(t.interactor,n.pokedRenderer,n.scale),B++)}B&&e.invokeInteractionEvent(Fg)},e.handlePan=function(n){for(var Q=t.gestureManipulators.length,B=0;Q--;){var a=t.gestureManipulators[Q];a&&a.isPanEnabled()&&(a.onPan(t.interactor,n.pokedRenderer,n.translation),B++)}B&&e.invokeInteractionEvent(Fg)},e.handleRotate=function(n){for(var Q=t.gestureManipulators.length,B=0;Q--;){var a=t.gestureManipulators[Q];a&&a.isRotateEnabled()&&(a.onRotate(t.interactor,n.pokedRenderer,n.rotation),B++)}B&&e.invokeInteractionEvent(Fg)}}var cg={cachedMousePosition:null,currentManipulator:null,currentWheelManipulator:null,centerOfRotation:[0,0,0],rotationFactor:1};function dg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cg,n),Bg.extend(e,t,n),a.c.setGet(e,t,["rotationFactor"]),a.c.get(e,t,["mouseManipulators","keyboardManipulators","vrManipulators","gestureManipulators"]),a.c.setGetArray(e,t,["centerOfRotation"],3),ig(e,t)}var Ig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ag(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ag(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(dg,"vtkInteractorStyleManipulator"),extend:dg},gg);function ug(e){return function(){return a.c.vtkErrorMacro("vtkProp::".concat(e," - NOT IMPLEMENTED"))}}function Cg(e,t){t.classHierarchy.push("vtkProp"),e.getMTime=function(){for(var e=t.mtime,n=0;n<t.textures.length;++n){var Q=t.textures[n].getMTime();Q>e&&(e=Q)}return e},e.getNestedProps=function(){return null},e.getActors=function(){return[]},e.getActors2D=function(){return[]},e.getVolumes=function(){return[]},e.pick=ug("pick"),e.hasKey=ug("hasKey"),e.getRedrawMTime=function(){return t.mtime},e.setEstimatedRenderTime=function(e){t.estimatedRenderTime=e,t.savedEstimatedRenderTime=e},e.restoreEstimatedRenderTime=function(){t.estimatedRenderTime=t.savedEstimatedRenderTime},e.addEstimatedRenderTime=function(e){t.estimatedRenderTime+=e},e.setAllocatedRenderTime=function(e){t.allocatedRenderTime=e,t.savedEstimatedRenderTime=t.estimatedRenderTime,t.estimatedRenderTime=0},e.getSupportsSelection=function(){return!1},e.getTextures=function(){return t.textures},e.hasTexture=function(e){return-1!==t.textures.indexOf(e)},e.addTexture=function(n){n&&!e.hasTexture(n)&&(t.textures=t.textures.concat(n),e.modified())},e.removeTexture=function(n){var Q=t.textures.filter((function(e){return e!==n}));t.textures.length!==Q.length&&(t.textures=Q,e.modified())},e.removeAllTextures=function(){t.textures=[],e.modified()}}var mg={visibility:!0,pickable:!0,dragable:!0,useBounds:!0,allocatedRenderTime:10,estimatedRenderTime:0,savedEstimatedRenderTime:0,renderTimeMultiplier:1,paths:null,textures:[]};function bg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mg,n),a.c.obj(e,t),a.c.get(e,t,["estimatedRenderTime","allocatedRenderTime"]),a.c.setGet(e,t,["visibility","pickable","dragable","useBounds","renderTimeMultiplier"]),Cg(e,t)}var Sg={newInstance:a.c.newInstance(bg,"vtkProp"),extend:bg};function yg(e,t){t.classHierarchy.push("vtkProp3D"),e.addPosition=function(n){t.position=t.position.map((function(e,t){return e+n[t]})),e.modified()},e.getOrientationWXYZ=function(){var e=Vr();Object(S.m)(e,t.rotation);var n=new Float64Array(3),Q=function(e,t){var n=2*Math.acos(t[3]),Q=Math.sin(n/2);return Q>it.b?(e[0]=t[0]/Q,e[1]=t[1]/Q,e[2]=t[2]/Q):(e[0]=1,e[1]=0,e[2]=0),n}(n,e);return[Object(u.F)(Q),n[0],n[1],n[2]]},e.rotateX=function(n){0!==n&&(Object(S.a)(t.rotation,t.rotation,Object(u.B)(n)),e.modified())},e.rotateY=function(n){0!==n&&(Object(S.b)(t.rotation,t.rotation,Object(u.B)(n)),e.modified())},e.rotateZ=function(n){0!==n&&(Object(S.c)(t.rotation,t.rotation,Object(u.B)(n)),e.modified())},e.rotateWXYZ=function(n,Q,B,a){if(0!==n&&(0!==Q||0!==B||0!==a)){var s=Object(u.B)(n),r=Vr();Rr(r,[Q,B,a],s);var U=new Float64Array(16);Object(S.j)(U,r),Object(S.l)(t.rotation,t.rotation,U),e.modified()}},e.setOrientation=function(n,Q,B){return(n!==t.orientation[0]||Q!==t.orientation[1]||B!==t.orientation[2])&&(t.orientation=[n,Q,B],Object(S.h)(t.rotation),e.rotateZ(B),e.rotateX(n),e.rotateY(Q),e.modified(),!0)},e.setUserMatrix=function(n){Object(S.d)(t.userMatrix,n),e.modified()},e.getMatrix=function(){return e.computeMatrix(),t.matrix},e.computeMatrix=function(){if(e.getMTime()>t.matrixMTime.getMTime()){Object(S.h)(t.matrix),t.userMatrix&&Object(S.l)(t.matrix,t.matrix,t.userMatrix),Object(S.s)(t.matrix,t.matrix,t.origin),Object(S.s)(t.matrix,t.matrix,t.position),Object(S.l)(t.matrix,t.matrix,t.rotation),Object(S.r)(t.matrix,t.matrix,t.scale),Object(S.s)(t.matrix,t.matrix,[-t.origin[0],-t.origin[1],-t.origin[2]]),Object(S.i)(t.matrix,t.matrix),t.isIdentity=!0;for(var n=0;n<4;++n)for(var Q=0;Q<4;++Q)(n===Q?1:0)!==t.matrix[n+4*Q]&&(t.isIdentity=!1);t.matrixMTime.modified()}},e.getCenter=function(){return st.getCenter(t.bounds)},e.getLength=function(){return st.getLength(t.bounds)},e.getXRange=function(){return st.getXRange(t.bounds)},e.getYRange=function(){return st.getYRange(t.bounds)},e.getZRange=function(){return st.getZRange(t.bounds)},e.getUserMatrix=function(){return t.userMatrix},e.onModified((function(){e.computeMatrix()}))}var Zg={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function xg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zg,n),Sg.extend(e,t,n),t.matrixMTime={},a.c.obj(t.matrixMTime),a.c.get(e,t,["bounds","isIdentity"]),a.c.getArray(e,t,["orientation"]),a.c.setGetArray(e,t,["origin","position","scale"],3),t.matrix=Object(S.h)(new Float64Array(16)),t.rotation=Object(S.h)(new Float64Array(16)),t.userMatrix=Object(S.h)(new Float64Array(16)),t.transform=null,yg(e,t)}var Gg={newInstance:a.c.newInstance(xg,"vtkProp3D"),extend:xg};function Vg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var Rg=a.c.vtkDebugMacro;function Lg(e,t){t.classHierarchy.push("vtkActor");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vg(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.getActors=function(){return e},e.getIsOpaque=function(){if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.property||e.getProperty();var n=t.property.getOpacity()>=1;return(n=n&&(!t.texture||!t.texture.isTranslucent()))&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return null!==t.mapper&&(null===t.property&&e.setProperty(e.makeProperty()),!e.getIsOpaque())},e.makeProperty=Cs.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n=t.mapper.getBounds();if(!n||6!==n.length)return n;if(n[0]>n[1])return t.mapperBounds=n.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),n;if(!t.mapperBounds||n[0]!==t.mapperBounds[0]||n[1]!==t.mapperBounds[1]||n[2]!==t.mapperBounds[2]||n[3]!==t.mapperBounds[3]||n[4]!==t.mapperBounds[4]||n[5]!==t.mapperBounds[5]||e.getMTime()>t.boundsMTime.getMTime()){Rg("Recomputing bounds..."),t.mapperBounds=n.concat();var Q=[];st.getCorners(n,Q),e.computeMatrix();var B=new Float64Array(16);Object(S.i)(B,t.matrix),Q.forEach((function(e){return Object(y.q)(e,e,B)})),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map((function(e,t){return t%2==0?Q.reduce((function(e,n){return e>n[t/2]?n[t/2]:e}),e):Q.reduce((function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e}),e)})),t.boundsMTime.modified()}return t.bounds},e.getMTime=function(){var e=n.getMTime();if(null!==t.property){var Q=t.property.getMTime();e=Q>e?Q:e}if(null!==t.backfaceProperty){var B=t.backfaceProperty.getMTime();e=B>e?B:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()}}var pg={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function hg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pg,n),Gg.extend(e,t,n),t.boundsMTime={},a.c.obj(t.boundsMTime),a.c.set(e,t,["property"]),a.c.setGet(e,t,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),Lg(e,t)}var Ng={newInstance:a.c.newInstance(hg,"vtkActor"),extend:hg};function Dg(e,t){t.classHierarchy.push("vtkPixelSpaceCallbackMapper"),t.callback||(t.callback=function(){}),e.invokeCallback=function(e,n,Q,B,a){if(t.callback){var s=n.getCompositeProjectionMatrix(Q,-1,1);Object(S.i)(s,s);for(var r=e.getPoints(),U=new Float64Array(3),F=B.usize,l=B.vsize,o=F/2,g=l/2,i=[],c=0;c<r.getNumberOfPoints();c+=1){var d=r.getPoint(c);Object(y.q)(U,d,s);var I=[U[0]*o+o,U[1]*g+g,U[2],0];if(a){var u=4*(Math.floor(I[1])*F+Math.floor(I[0])),C=(a[u]/255*256+a[u+1]/255)/257;I[3]=2*C-1}i.push(I)}t.callback(i,n,Q,a,[F,l])}}}var Ag={callback:null,useZValues:!1};function Eg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ag,n),ir.extend(e,t,n),a.c.setGet(e,t,["callback","useZValues"]),Dg(e,t)}var fg={newInstance:a.c.newInstance(Eg,"vtkPixelSpaceCallbackMapper"),extend:Eg};function Jg(e,t){t.classHierarchy.push("vtkTexture"),e.imageLoaded=function(){t.image.removeEventListener("load",e.imageLoaded),t.imageLoaded=!0,e.modified()},e.setImage=function(n){t.image!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null)),t.image=n,t.imageLoaded=!1,n.complete?e.imageLoaded():n.addEventListener("load",e.imageLoaded),e.modified())}}var vg={repeat:!1,interpolate:!1,edgeClamp:!1,image:null,imageLoaded:!1};function Wg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vg,n),a.c.obj(e,t),a.c.algo(e,t,6,0),a.c.get(e,t,["imageLoaded"]),a.c.setGet(e,t,["repeat","edgeClamp","interpolate","image"]),Jg(e,t)}var Xg={newInstance:a.c.newInstance(Wg,"vtkTexture"),extend:Wg},Hg=Math.sqrt(50),kg=Math.sqrt(10),Tg=Math.sqrt(2);function Mg(e,t,n){var Q=(t-e)/Math.max(0,n),B=Math.floor(Math.log(Q)/Math.LN10),a=Q/Math.pow(10,B);return B>=0?(a>=Hg?10:a>=kg?5:a>=Tg?2:1)*Math.pow(10,B):-Math.pow(10,-B)/(a>=Hg?10:a>=kg?5:a>=Tg?2:1)}function Yg(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function wg(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Og(e){let t=e,n=e;function Q(e,t,Q,B){for(null==Q&&(Q=0),null==B&&(B=e.length);Q<B;){const a=Q+B>>>1;n(e[a],t)<0?Q=a+1:B=a}return Q}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>wg(e(t),n)}(e)),{left:Q,center:function(e,n,B,a){null==B&&(B=0),null==a&&(a=e.length);const s=Q(e,n,B,a-1);return s>B&&t(e[s-1],n)>-t(e[s],n)?s-1:s},right:function(e,t,Q,B){for(null==Q&&(Q=0),null==B&&(B=e.length);Q<B;){const a=Q+B>>>1;n(e[a],t)>0?B=a:Q=a+1}return Q}}}const zg=Og(wg).right;function Pg(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Kg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jg(e,t){var n=Object.create(e.prototype);for(var Q in t)n[Q]=t[Q];return n}function _g(){}Og((function(e){return null===e?NaN:+e})).center;var qg="\\s*([+-]?\\d+)\\s*",$g="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ei="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ti=/^#([0-9a-f]{3,8})$/,ni=new RegExp("^rgb\\("+[qg,qg,qg]+"\\)$"),Qi=new RegExp("^rgb\\("+[ei,ei,ei]+"\\)$"),Bi=new RegExp("^rgba\\("+[qg,qg,qg,$g]+"\\)$"),ai=new RegExp("^rgba\\("+[ei,ei,ei,$g]+"\\)$"),si=new RegExp("^hsl\\("+[$g,ei,ei]+"\\)$"),ri=new RegExp("^hsla\\("+[$g,ei,ei,$g]+"\\)$"),Ui={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Fi(){return this.rgb().formatHex()}function li(){return this.rgb().formatRgb()}function oi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ti.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?gi(t):3===n?new Ii(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ii(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ii(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ni.exec(e))?new Ii(t[1],t[2],t[3],1):(t=Qi.exec(e))?new Ii(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Bi.exec(e))?ii(t[1],t[2],t[3],t[4]):(t=ai.exec(e))?ii(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=si.exec(e))?bi(t[1],t[2]/100,t[3]/100,1):(t=ri.exec(e))?bi(t[1],t[2]/100,t[3]/100,t[4]):Ui.hasOwnProperty(e)?gi(Ui[e]):"transparent"===e?new Ii(NaN,NaN,NaN,0):null}function gi(e){return new Ii(e>>16&255,e>>8&255,255&e,1)}function ii(e,t,n,Q){return Q<=0&&(e=t=n=NaN),new Ii(e,t,n,Q)}function ci(e){return e instanceof _g||(e=oi(e)),e?new Ii((e=e.rgb()).r,e.g,e.b,e.opacity):new Ii}function di(e,t,n,Q){return 1===arguments.length?ci(e):new Ii(e,t,n,null==Q?1:Q)}function Ii(e,t,n,Q){this.r=+e,this.g=+t,this.b=+n,this.opacity=+Q}function ui(){return"#"+mi(this.r)+mi(this.g)+mi(this.b)}function Ci(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function mi(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function bi(e,t,n,Q){return Q<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yi(e,t,n,Q)}function Si(e){if(e instanceof yi)return new yi(e.h,e.s,e.l,e.opacity);if(e instanceof _g||(e=oi(e)),!e)return new yi;if(e instanceof yi)return e;var t=(e=e.rgb()).r/255,n=e.g/255,Q=e.b/255,B=Math.min(t,n,Q),a=Math.max(t,n,Q),s=NaN,r=a-B,U=(a+B)/2;return r?(s=t===a?(n-Q)/r+6*(n<Q):n===a?(Q-t)/r+2:(t-n)/r+4,r/=U<.5?a+B:2-a-B,s*=60):r=U>0&&U<1?0:s,new yi(s,r,U,e.opacity)}function yi(e,t,n,Q){this.h=+e,this.s=+t,this.l=+n,this.opacity=+Q}function Zi(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Kg(_g,oi,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Fi,formatHex:Fi,formatHsl:function(){return Si(this).formatHsl()},formatRgb:li,toString:li}),Kg(Ii,di,jg(_g,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Ii(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Ii(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ui,formatHex:ui,formatRgb:Ci,toString:Ci})),Kg(yi,(function(e,t,n,Q){return 1===arguments.length?Si(e):new yi(e,t,n,null==Q?1:Q)}),jg(_g,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new yi(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new yi(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,Q=n+(n<.5?n:1-n)*t,B=2*n-Q;return new Ii(Zi(e>=240?e-240:e+120,B,Q),Zi(e,B,Q),Zi(e<120?e+240:e-120,B,Q),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var xi=e=>()=>e;function Gi(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):xi(isNaN(e)?t:e)}var Vi=function e(t){var n=function(e){return 1==(e=+e)?Gi:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(Q){return Math.pow(e+Q*t,n)}}(t,n,e):xi(isNaN(t)?n:t)}}(t);function Q(e,t){var Q=n((e=di(e)).r,(t=di(t)).r),B=n(e.g,t.g),a=n(e.b,t.b),s=Gi(e.opacity,t.opacity);return function(t){return e.r=Q(t),e.g=B(t),e.b=a(t),e.opacity=s(t),e+""}}return Q.gamma=e,Q}(1);function Ri(e,t){t||(t=[]);var n,Q=e?Math.min(t.length,e.length):0,B=t.slice();return function(a){for(n=0;n<Q;++n)B[n]=e[n]*(1-a)+t[n]*a;return B}}function Li(e,t){var n,Q=t?t.length:0,B=e?Math.min(Q,e.length):0,a=new Array(B),s=new Array(Q);for(n=0;n<B;++n)a[n]=Ei(e[n],t[n]);for(;n<Q;++n)s[n]=t[n];return function(e){for(n=0;n<B;++n)s[n]=a[n](e);return s}}function pi(e,t){var n=new Date;return e=+e,t=+t,function(Q){return n.setTime(e*(1-Q)+t*Q),n}}function hi(e,t){var n,Q={},B={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?Q[n]=Ei(e[n],t[n]):B[n]=t[n];return function(e){for(n in Q)B[n]=Q[n](e);return B}}var Ni=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Di=new RegExp(Ni.source,"g");function Ai(e,t){var n,Q,B,a,s=Ni.lastIndex=Di.lastIndex=0,r=-1,U=[],F=[];for(e+="",t+="";(n=Ni.exec(e))&&(Q=Di.exec(t));)(B=Q.index)>s&&(B=t.slice(s,B),U[r]?U[r]+=B:U[++r]=B),(n=n[0])===(Q=Q[0])?U[r]?U[r]+=Q:U[++r]=Q:(U[++r]=null,F.push({i:r,x:Pg(n,Q)})),s=Di.lastIndex;return s<t.length&&(B=t.slice(s),U[r]?U[r]+=B:U[++r]=B),U.length<2?F[0]?(a=F[0].x,function(e){return a(e)+""}):function(e){return function(){return e}}(t):(t=F.length,function(e){for(var n,Q=0;Q<t;++Q)U[(n=F[Q]).i]=n.x(e);return U.join("")})}function Ei(e,t){var n,Q,B=typeof t;return null==t||"boolean"===B?xi(t):("number"===B?Pg:"string"===B?(n=oi(t))?(t=n,Vi):Ai:t instanceof oi?Vi:t instanceof Date?pi:(Q=t,!ArrayBuffer.isView(Q)||Q instanceof DataView?Array.isArray(t)?Li:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?hi:Pg:Ri))(e,t)}function fi(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ji(e){return+e}var vi=[0,1];function Wi(e){return e}function Xi(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function Hi(e,t,n){var Q=e[0],B=e[1],a=t[0],s=t[1];return B<Q?(Q=Xi(B,Q),a=n(s,a)):(Q=Xi(Q,B),a=n(a,s)),function(e){return a(Q(e))}}function ki(e,t,n){var Q=Math.min(e.length,t.length)-1,B=new Array(Q),a=new Array(Q),s=-1;for(e[Q]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<Q;)B[s]=Xi(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=zg(e,t,1,Q)-1;return a[n](B[n](t))}}function Ti(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Mi(){return function(){var e,t,n,Q,B,a,s=vi,r=vi,U=Ei,F=Wi;function l(){var e,t,n,U=Math.min(s.length,r.length);return F!==Wi&&(e=s[0],t=s[U-1],e>t&&(n=e,e=t,t=n),F=function(n){return Math.max(e,Math.min(t,n))}),Q=U>2?ki:Hi,B=a=null,o}function o(t){return isNaN(t=+t)?n:(B||(B=Q(s.map(e),r,U)))(e(F(t)))}return o.invert=function(n){return F(t((a||(a=Q(r,s.map(e),Pg)))(n)))},o.domain=function(e){return arguments.length?(s=Array.from(e,Ji),l()):s.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),l()):r.slice()},o.rangeRound=function(e){return r=Array.from(e),U=fi,l()},o.clamp=function(e){return arguments.length?(F=!!e||Wi,l()):F!==Wi},o.interpolate=function(e){return arguments.length?(U=e,l()):U},o.unknown=function(e){return arguments.length?(n=e,o):n},function(n,Q){return e=n,t=Q,l()}}()(Wi,Wi)}var Yi,wi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Oi(e){if(!(t=wi.exec(e)))throw new Error("invalid format: "+e);var t;return new zi({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function zi(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Pi(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,Q=e.slice(0,n);return[Q.length>1?Q[0]+Q.slice(2):Q,+e.slice(n+1)]}function Ki(e){return(e=Pi(Math.abs(e)))?e[1]:NaN}function ji(e,t){var n=Pi(e,t);if(!n)return e+"";var Q=n[0],B=n[1];return B<0?"0."+new Array(-B).join("0")+Q:Q.length>B+1?Q.slice(0,B+1)+"."+Q.slice(B+1):Q+new Array(B-Q.length+2).join("0")}Oi.prototype=zi.prototype,zi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var _i={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ji(100*e,t),r:ji,s:function(e,t){var n=Pi(e,t);if(!n)return e+"";var Q=n[0],B=n[1],a=B-(Yi=3*Math.max(-8,Math.min(8,Math.floor(B/3))))+1,s=Q.length;return a===s?Q:a>s?Q+new Array(a-s+1).join("0"):a>0?Q.slice(0,a)+"."+Q.slice(a):"0."+new Array(1-a).join("0")+Pi(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function qi(e){return e}var $i,ec,tc,nc=Array.prototype.map,Qc=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Bc(e,t,n,Q){var B,a,s,r,U=function(e,t,n){var Q=Math.abs(t-e)/Math.max(0,n),B=Math.pow(10,Math.floor(Math.log(Q)/Math.LN10)),a=Q/B;return a>=Hg?B*=10:a>=kg?B*=5:a>=Tg&&(B*=2),t<e?-B:B}(e,t,n);switch((Q=Oi(null==Q?",f":Q)).type){case"s":var F=Math.max(Math.abs(e),Math.abs(t));return null!=Q.precision||isNaN((s=U,r=F,B=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ki(r)/3)))-Ki(Math.abs(s)))))||(Q.precision=B),tc(Q,F);case"":case"e":case"g":case"p":case"r":null!=Q.precision||isNaN(B=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ki(t)-Ki(e))+1}(U,Math.max(Math.abs(e),Math.abs(t))))||(Q.precision=B-("e"===Q.type));break;case"f":case"%":null!=Q.precision||isNaN((a=U,B=Math.max(0,-Ki(Math.abs(a)))))||(Q.precision=B-2*("%"===Q.type))}return ec(Q)}function ac(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var Q,B,a,s,r=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((Q=t<e)&&(B=e,e=t,t=B),0===(s=Mg(e,t,n))||!isFinite(s))return[];if(s>0)for(e=Math.ceil(e/s),t=Math.floor(t/s),a=new Array(B=Math.ceil(t-e+1));++r<B;)a[r]=(e+r)*s;else for(s=-s,e=Math.ceil(e*s),t=Math.floor(t*s),a=new Array(B=Math.ceil(t-e+1));++r<B;)a[r]=(e+r)/s;return Q&&a.reverse(),a}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var Q=t();return Bc(Q[0],Q[Q.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var Q,B,a=t(),s=0,r=a.length-1,U=a[s],F=a[r],l=10;for(F<U&&(B=U,U=F,F=B,B=s,s=r,r=B);l-- >0;){if((B=Mg(U,F,n))===Q)return a[s]=U,a[r]=F,t(a);if(B>0)U=Math.floor(U/B)*B,F=Math.ceil(F/B)*B;else{if(!(B<0))break;U=Math.ceil(U*B)/B,F=Math.floor(F*B)/B}Q=B}return e},e}function sc(){var e=Mi();return e.copy=function(){return Ti(e,sc())},Yg.apply(e,arguments),ac(e)}function rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function Uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}$i=function(e){var t,n,Q=void 0===e.grouping||void 0===e.thousands?qi:(t=nc.call(e.grouping,Number),n=e.thousands+"",function(e,Q){for(var B=e.length,a=[],s=0,r=t[0],U=0;B>0&&r>0&&(U+r+1>Q&&(r=Math.max(1,Q-U)),a.push(e.substring(B-=r,B+r)),!((U+=r+1)>Q));)r=t[s=(s+1)%t.length];return a.reverse().join(n)}),B=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",r=void 0===e.numerals?qi:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(nc.call(e.numerals,String)),U=void 0===e.percent?"%":e.percent+"",F=void 0===e.minus?"":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function o(e){var t=(e=Oi(e)).fill,n=e.align,o=e.sign,g=e.symbol,i=e.zero,c=e.width,d=e.comma,I=e.precision,u=e.trim,C=e.type;"n"===C?(d=!0,C="g"):_i[C]||(void 0===I&&(I=12),u=!0,C="g"),(i||"0"===t&&"="===n)&&(i=!0,t="0",n="=");var m="$"===g?B:"#"===g&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",b="$"===g?a:/[%p]/.test(C)?U:"",S=_i[C],y=/[defgprs%]/.test(C);function Z(e){var B,a,U,g=m,Z=b;if("c"===C)Z=S(e)+Z,e="";else{var x=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:S(Math.abs(e),I),u&&(e=function(e){e:for(var t,n=e.length,Q=1,B=-1;Q<n;++Q)switch(e[Q]){case".":B=t=Q;break;case"0":0===B&&(B=Q),t=Q;break;default:if(!+e[Q])break e;B>0&&(B=0)}return B>0?e.slice(0,B)+e.slice(t+1):e}(e)),x&&0==+e&&"+"!==o&&(x=!1),g=(x?"("===o?o:F:"-"===o||"("===o?"":o)+g,Z=("s"===C?Qc[8+Yi/3]:"")+Z+(x&&"("===o?")":""),y)for(B=-1,a=e.length;++B<a;)if(48>(U=e.charCodeAt(B))||U>57){Z=(46===U?s+e.slice(B+1):e.slice(B))+Z,e=e.slice(0,B);break}}d&&!i&&(e=Q(e,1/0));var G=g.length+e.length+Z.length,V=G<c?new Array(c-G+1).join(t):"";switch(d&&i&&(e=Q(V+e,V.length?c-Z.length:1/0),V=""),n){case"<":e=g+e+Z+V;break;case"=":e=g+V+e+Z;break;case"^":e=V.slice(0,G=V.length>>1)+g+e+Z+V.slice(G);break;default:e=V+g+e+Z}return r(e)}return I=void 0===I?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I)),Z.toString=function(){return e+""},Z}return{format:o,formatPrefix:function(e,t){var n=o(((e=Oi(e)).type="f",e)),Q=3*Math.max(-8,Math.min(8,Math.floor(Ki(t)/3))),B=Math.pow(10,-Q),a=Qc[8+Q/3];return function(e){return n(B*e)+a}}}}({thousands:",",grouping:[3],currency:["$",""]}),ec=$i.format,tc=$i.formatPrefix;var Fc=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],lc=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],oc=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],gc=[0,1,0,1,0,1,0,1,2,2,2,2],ic=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],cc=new Float64Array(3),dc=new Float64Array(3),Ic=new Float64Array(3),uc=new Float64Array(3),Cc=new Float64Array(3),mc=new Float64Array(3),bc=new Float64Array(16);function Sc(e,t){e.strokeStyle=t.strokeColor,e.lineWidth=t.strokeSize,e.fillStyle=t.fontColor,e.font="".concat(t.fontStyle," ").concat(t.fontSize,"px ").concat(t.fontFamily)}function yc(e,t){t.classHierarchy.push("vtkCubeAxesActor");var n=new Map;e.setCamera=function(n){t.camera!==n&&(t.cameraModifiedSub&&(t.cameraModifiedSub.unsubscribe(),t.cameraModifiedSub=null),t.camera=n,n&&(t.cameraModifiedSub=n.onModified(e.update)),e.update(),e.modified())},e.computeFacesToDraw=function(){var e=t.camera.getViewMatrix();Object(S.i)(e,e);for(var n=!1,Q=st.getDiagonalLength(t.dataBounds),B=Math.sin(t.faceVisibilityAngle*Math.PI/180),a=0;a<6;a++){var s=!1,r=Math.floor(a/2),U=(r+1)%3,F=(r+2)%3;t.dataBounds[2*U]!==t.dataBounds[2*U+1]&&t.dataBounds[2*F]!==t.dataBounds[2*F+1]&&(cc[r]=t.dataBounds[a]-.1*Q*Fc[a][r],cc[U]=.5*(t.dataBounds[2*U]+t.dataBounds[2*U+1]),cc[F]=.5*(t.dataBounds[2*F]+t.dataBounds[2*F+1]),Object(y.q)(Ic,cc,e),cc[r]=t.dataBounds[a],Object(y.q)(uc,cc,e),Object(y.a)(Ic,uc,Ic),Object(y.l)(Ic,Ic),s=Ic[2]>B,t.camera.getParallelProjection()||(Object(y.l)(uc,uc),s=Object(y.d)(uc,Ic)>B)),s!==t.lastFacesToDraw[a]&&(t.lastFacesToDraw[a]=s,n=!0)}return n},e.updatePolyData=function(e,n,Q){var B=0,a=0;B+=8;for(var s=0,r=0;r<12;r++)n[r]>0&&s++;if(a+=s,t.gridLines)for(var U=0;U<6;U++)e[U]&&(B+=2*Q[ic[U][0]].length+2*Q[ic[U][1]].length,a+=Q[ic[U][0]].length+Q[ic[U][1]].length);for(var F=new Float64Array(3*B),l=new Uint32Array(3*a),o=0,g=0,i=0;i<2;i++)for(var c=0;c<2;c++)for(var d=0;d<2;d++)F[3*o]=t.dataBounds[d],F[3*o+1]=t.dataBounds[2+c],F[3*o+2]=t.dataBounds[4+i],o++;for(var I=0;I<12;I++)n[I]>0&&(l[3*g]=2,l[3*g+1]=oc[I][0],l[3*g+2]=oc[I][1],g++);if(t.gridLines)for(var u=0;u<6;u++)if(e[u]){for(var C=Math.floor(u/2),m=Q[ic[u][0]],b=0;b<m.length;b++)F[3*o+C]=t.dataBounds[u],F[3*o+ic[u][0]]=m[b],F[3*o+ic[u][1]]=t.dataBounds[2*ic[u][1]],F[3*++o+C]=t.dataBounds[u],F[3*o+ic[u][0]]=m[b],F[3*o+ic[u][1]]=t.dataBounds[2*ic[u][1]+1],o++,l[3*g]=2,l[3*g+1]=o-2,l[3*g+2]=o-1,g++;m=Q[ic[u][1]];for(var S=0;S<m.length;S++)F[3*o+C]=t.dataBounds[u],F[3*o+ic[u][1]]=m[S],F[3*o+ic[u][0]]=t.dataBounds[2*ic[u][0]],F[3*++o+C]=t.dataBounds[u],F[3*o+ic[u][1]]=m[S],F[3*o+ic[u][0]]=t.dataBounds[2*ic[u][0]+1],o++,l[3*g]=2,l[3*g+1]=o-2,l[3*g+2]=o-1,g++}t.polyData.getPoints().setData(F,3),t.polyData.getPoints().modified(),t.polyData.getLines().setData(l,1),t.polyData.getLines().modified(),t.polyData.modified()},e.updateTextData=function(e,n,Q,B){for(var a=0,s=0;s<12;s++)1===n[s]&&(a+=2,a+=Q[gc[s]].length);for(var r=t.polyData.getPoints().getData(),U=new Float64Array(3*a),F=0,l=0,o=0,g=0;g<6;g++)if(e[g])for(var i=0;i<4;i++){var c=lc[g][i];if(1===n[c]){var d=gc[c],I=3*oc[c][0],u=3*oc[c][1];U[3*F]=.5*(r[I]+r[u]),U[3*F+1]=.5*(r[I+1]+r[u+1]),U[3*F+2]=.5*(r[I+2]+r[u+2]),U[3*++F+Math.floor(g/2)]=t.dataBounds[g],U[3*F+ic[g][0]]=.5*(t.dataBounds[2*ic[g][0]]+t.dataBounds[2*ic[g][0]+1]),U[3*F+ic[g][1]]=.5*(t.dataBounds[2*ic[g][1]]+t.dataBounds[2*ic[g][1]+1]),F++,t.textValues[l]=t.axisLabels[d],l++;var C=(d+1)%3,m=(d+2)%3,b=Q[d],S=B[d];t.tickCounts[o]=b.length;for(var y=0;y<b.length;y++)U[3*F+d]=b[y],U[3*F+C]=r[I+C],U[3*F+m]=r[I+m],F++,t.textValues[l]=S[y],l++;o++}}t.textPolyData.getPoints().setData(U,3),t.textPolyData.modified()},e.update=function(){for(var n=e.computeFacesToDraw(),Q=t.lastFacesToDraw,B=!1,a=0;a<6;a++)t.dataBounds[a]!==t.lastTickBounds[a]&&(B=!0,t.lastTickBounds[a]=t.dataBounds[a]);if(n||B||t.forceUpdate){for(var s=new Array(12).fill(0),r=0;r<6;r++)if(Q[r])for(var U=0;U<4;U++)s[lc[r][U]]++;for(var F=[],l=[],o=0;o<3;o++){var g=sc().domain([t.dataBounds[2*o],t.dataBounds[2*o+1]]);F[o]=g.ticks(5);var i=g.tickFormat(5);l[o]=F[o].map(i)}e.updatePolyData(Q,s,F),e.updateTextData(Q,s,F,l),(B||t.forceUpdate)&&e.updateTextureAtlas(l)}e.updateTexturePolyData(),t.forceUpdate=!1},e.updateTextureAtlas=function(e){t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",n.clear();for(var Q=0,B=1,a=0;a<3;a++){if(!n.has(t.axisLabels[a])){Sc(t.tmContext,t.axisTextStyle);var s=t.tmContext.measureText(t.axisLabels[a]),r={height:s.actualBoundingBoxAscent+2,startingHeight:B,width:s.width+2,textStyle:t.axisTextStyle};n.set(t.axisLabels[a],r),B+=r.height,Q<r.width&&(Q=r.width)}Sc(t.tmContext,t.tickTextStyle);for(var U=0;U<e[a].length;U++)if(!n.has(e[a][U])){var F=t.tmContext.measureText(e[a][U]),l={height:F.actualBoundingBoxAscent+2,startingHeight:B,width:F.width+2,textStyle:t.tickTextStyle};n.set(e[a][U],l),B+=l.height,Q<l.width&&(Q=l.width)}}Q=Object(u.h)(Q),B=Object(u.h)(B),n.forEach((function(e){e.tcoords=[0,(B-e.startingHeight-e.height)/B,e.width/Q,(B-e.startingHeight-e.height)/B,e.width/Q,(B-e.startingHeight)/B,0,(B-e.startingHeight)/B]})),t.tmCanvas.width=Q,t.tmCanvas.height=B,t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t.tmContext.clearRect(0,0,Q,B),n.forEach((function(e,n){Sc(t.tmContext,e.textStyle),t.tmContext.fillText(n,1,e.startingHeight+e.height-1)}));var o=new Image;o.src=t.tmCanvas.toDataURL("image/png"),t.tmTexture.setImage(o),t.tmTexture.modified()},e.createPolyDataForOneLabel=function(e,Q,B,a,s,r,U){var F=n.get(e);if(F){var l=t.textPolyData.getPoints().getData(),o=t.lastSize;cc[0]=l[3*Q],cc[1]=l[3*Q+1],cc[2]=l[3*Q+2],Object(y.q)(Ic,cc,B),Ic[0]+=.1,Object(y.q)(dc,Ic,a),Object(y.a)(Cc,dc,cc),Ic[0]-=.1,Ic[1]+=.1,Object(y.q)(dc,Ic,a),Object(y.a)(mc,dc,cc);for(var g=0;g<3;g++)Cc[g]/=.05*o[0],mc[g]/=.05*o[1];var i=U.ptIdx,c=U.cellIdx;cc[0]=l[3*Q],cc[1]=l[3*Q+1],cc[2]=l[3*Q+2],s[0]<-.5?Object(y.b)(Ic,Cc,s[0]*r-F.width):s[0]>.5?Object(y.b)(Ic,Cc,s[0]*r):Object(y.b)(Ic,Cc,s[0]*r-F.width/2),Object(y.g)(cc,cc,Ic),Object(y.b)(Ic,mc,s[1]*r-F.height/2),Object(y.g)(cc,cc,Ic),U.points[3*i]=cc[0],U.points[3*i+1]=cc[1],U.points[3*i+2]=cc[2],U.tcoords[2*i]=F.tcoords[0],U.tcoords[2*i+1]=F.tcoords[1],i++,Object(y.b)(Ic,Cc,F.width),Object(y.g)(cc,cc,Ic),U.points[3*i]=cc[0],U.points[3*i+1]=cc[1],U.points[3*i+2]=cc[2],U.tcoords[2*i]=F.tcoords[2],U.tcoords[2*i+1]=F.tcoords[3],i++,Object(y.b)(Ic,mc,F.height),Object(y.g)(cc,cc,Ic),U.points[3*i]=cc[0],U.points[3*i+1]=cc[1],U.points[3*i+2]=cc[2],U.tcoords[2*i]=F.tcoords[4],U.tcoords[2*i+1]=F.tcoords[5],i++,Object(y.b)(Ic,Cc,F.width),Object(y.a)(cc,cc,Ic),U.points[3*i]=cc[0],U.points[3*i+1]=cc[1],U.points[3*i+2]=cc[2],U.tcoords[2*i]=F.tcoords[6],U.tcoords[2*i+1]=F.tcoords[7],i++,U.polys[4*c]=3,U.polys[4*c+1]=i-4,U.polys[4*c+2]=i-3,U.polys[4*c+3]=i-2,c++,U.polys[4*c]=3,U.polys[4*c+1]=i-4,U.polys[4*c+2]=i-2,U.polys[4*c+3]=i-1,U.ptIdx+=4,U.cellIdx+=2}},e.updateTexturePolyData=function(){var n=t.camera.getCompositeProjectionMatrix(t.lastAspectRatio,-1,1);Object(S.i)(n,n);var Q=t.textValues.length,B=4*Q,a=2*Q,r=new Float64Array(3*B),U=new Uint16Array(4*a),F=new Float32Array(2*B);Object(S.g)(bc,n);for(var l={ptIdx:0,cellIdx:0,polys:U,points:r,tcoords:F},o=0,g=0,i=0,c=t.textPolyData.getPoints().getData();o<c.length/3;){cc[0]=c[3*o],cc[1]=c[3*o+1],cc[2]=c[3*o+2],Object(y.q)(Ic,cc,n),cc[0]=c[3*o+3],cc[1]=c[3*o+4],cc[2]=c[3*o+5],Object(y.q)(uc,cc,n),Object(y.a)(Ic,Ic,uc);var d=[Ic[0],Ic[1]];Object(u.i)(d),e.createPolyDataForOneLabel(t.textValues[g],o,n,bc,d,t.axisTitlePixelOffset,l),o+=2,g++;for(var I=0;I<t.tickCounts[i];I++)e.createPolyDataForOneLabel(t.textValues[g],o,n,bc,d,t.tickLabelPixelOffset,l),o++,g++;i++}var C=s.a.newInstance({numberOfComponents:2,values:F,name:"TextureCoordinates"});t.tmPolyData.getPointData().setTCoords(C),t.tmPolyData.getPoints().setData(r,3),t.tmPolyData.getPoints().modified(),t.tmPolyData.getPolys().setData(U,1),t.tmPolyData.getPolys().modified(),t.tmPolyData.modified()},e.getActors=function(){return[t.pixelActor,t.tmActor]},e.getNestedProps=function(){return e.getActors()},e.onModified((function(){t.forceUpdate=!0,e.update()})),e.setTickTextStyle=function(n){t.tickTextStyle=Uc(Uc({},t.tickTextStyle),n),e.modified()},e.setAxisTextStyle=function(n){t.axisTextStyle=Uc(Uc({},t.axisTextStyle),n),e.modified()}}function Zc(e){return Uc({camera:null,dataBounds:Object(B.a)(st.INIT_BOUNDS),faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:12,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"}},e)}function xc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zc(n)),Ng.extend(e,t,n),t.lastSize=[800,800],t.lastAspectRatio=1,t.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],t.axisLabels=["X-Axis","Y-Axis","Z-Axis"],t.tickCounts=[],t.textValues=[],t.lastTickBounds=[],t.mapper=ir.newInstance(),t.polyData=U.a.newInstance(),t.mapper.setInputData(t.polyData),e.getProperty().setDiffuse(0),e.getProperty().setAmbient(1),t.textPolyData=U.a.newInstance(),t.tmPolyData=U.a.newInstance(),t.tmMapper=ir.newInstance(),t.tmMapper.setInputData(t.tmPolyData),t.tmTexture=Xg.newInstance(),t.tmTexture.setInterpolate(!1),t.tmActor=Ng.newInstance(),t.tmActor.setMapper(t.tmMapper),t.tmActor.addTexture(t.tmTexture),t.tmCanvas=document.createElement("canvas"),t.tmContext=t.tmCanvas.getContext("2d"),t.pixelMapper=fg.newInstance(),t.pixelMapperPolyData=U.a.newInstance(),t.pixelMapper.setInputData(t.pixelMapperPolyData),t.pixelMapper.setCallback((function(e,n,Q,B,a){t.lastSize=a,t.lastAspectRatio=a[0]/a[1]})),t.pixelActor=Ng.newInstance(),t.pixelActor.setMapper(t.pixelMapper),a.c.setGet(e,t,["axisTitlePixelOffset","faceVisibilityAngle","gridLines","tickLabelPixelOffset"]),a.c.setGetArray(e,t,["dataBounds"],6),a.c.setGetArray(e,t,["axisLabels"],3),a.c.get(e,t,["axisTextStyle","tickTextStyle","camera"]),yc(e,t)}var Gc={newInstance:a.c.newInstance(xc,"vtkCubeAxesActor"),extend:xc};function Vc(e,t){t.classHierarchy.push("vtkCompositeCameraManipulator"),e.computeDisplayCenter=function(e,n){var Q=e.computeWorldToDisplay(n,t.center[0],t.center[1],t.center[2]);t.displayCenter[0]=Q[0],t.displayCenter[1]=Q[1]}}var Rc={center:[0,0,0],rotationFactor:1,displayCenter:[0,0]};var Lc={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rc,n),a.c.setGet(e,t,["rotationFactor"]),a.c.setGetArray(e,t,["displayCenter"],2),a.c.setGetArray(e,t,["center"],3),Vc(e,t)}};function pc(e,t){t.classHierarchy.push("vtkCompositeMouseManipulator"),e.startInteraction=function(){},e.endInteraction=function(){},e.onButtonDown=function(e,t,n){},e.onButtonUp=function(e){},e.onMouseMove=function(e,t,n){},e.onStartScroll=function(e,t,n){},e.onScroll=function(e,t,n){},e.onEndScroll=function(e){},e.isDragEnabled=function(){return t.dragEnabled},e.isScrollEnabled=function(){return t.scrollEnabled}}var hc={button:1,shift:!1,control:!1,alt:!1,dragEnabled:!0,scrollEnabled:!1};var Nc={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hc,n),a.c.setGet(e,t,["button","shift","control","alt"]),a.c.set(e,t,["dragEnabled","scrollEnabled"]),pc(e,t)}};function Dc(e,t){t.classHierarchy.push("vtkMouseCameraTrackballRotateManipulator");var n=new Float64Array(3),Q=new Float64Array(3),B=new Float64Array(3),a=new Float64Array(16),s=new Float64Array(3),r=new Float64Array(3),U=new Float64Array(3);e.onButtonDown=function(e,n,Q){t.previousPosition=Q},e.onMouseMove=function(e,F,l){if(l){var o=F.getActiveCamera(),g=o.getPosition(),i=o.getFocalPoint();Object(S.h)(a);var c=t.center,d=t.rotationFactor;Object(S.s)(a,a,c);var I=t.previousPosition.x-l.x,C=t.previousPosition.y-l.y,m=e.getView().getSize(),b=o.getViewUp();Object(S.q)(a,a,Object(u.B)(360*I/m[0]*d),b),Object(u.w)(o.getDirectionOfProjection(),b,s),Object(S.q)(a,a,Object(u.B)(-360*C/m[1]*d),s),r[0]=-c[0],r[1]=-c[1],r[2]=-c[2],Object(S.s)(a,a,r),Object(y.q)(n,g,a),Object(y.q)(Q,i,a),U[0]=b[0]+g[0],U[1]=b[1]+g[1],U[2]=b[2]+g[2],Object(y.q)(B,U,a),o.setPosition(n[0],n[1],n[2]),o.setFocalPoint(Q[0],Q[1],Q[2]),o.setViewUp(B[0]-n[0],B[1]-n[1],B[2]-n[2]),o.orthogonalizeViewUp(),F.resetCameraClippingRange(),e.getLightFollowCamera()&&F.updateLightsGeometryToFollowCamera(),t.previousPosition=l}}}var Ac={};function Ec(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ac,n),a.c.obj(e,t),Nc.extend(e,t,n),Lc.extend(e,t,n),Dc(e,t)}var fc={newInstance:a.c.newInstance(Ec,"vtkMouseCameraTrackballRotateManipulator"),extend:Ec};function Jc(e,t){t.classHierarchy.push("vtkMouseCameraTrackballRollManipulator");var n=new Float64Array(3),Q=new Float64Array(3),B=new Float64Array(3),a=new Float64Array(16),s=new Float64Array(3),r=new Float64Array(3),U=new Float64Array(3);e.onButtonDown=function(e,n,Q){t.previousPosition=Q},e.onMouseMove=function(F,l,o){if(o){var g=l.getActiveCamera(),i=g.getPosition(),c=g.getFocalPoint(),d=g.getViewUp();n[0]=c[0]-i[0],n[1]=c[1]-i[1],n[2]=c[2]-i[2],e.computeDisplayCenter(F.getInteractorStyle(),l);var I=t.previousPosition.x-t.displayCenter[0],C=o.x-t.displayCenter[0],m=t.previousPosition.y-t.displayCenter[1],b=o.y-t.displayCenter[1];if(!(0===C&&0===b||0===I&&0===m)){var Z=Object(u.F)((I*b-m*C)/(Math.sqrt(I*I+m*m)*Math.sqrt(C*C+b*b))),x=t.center;Object(S.h)(a),B[0]=-x[0],B[1]=-x[1],B[2]=-x[2],Object(S.s)(a,a,x),Object(S.q)(a,a,Object(u.B)(Z),n),Object(S.s)(a,a,B),Object(y.q)(s,i,a),Object(y.q)(r,c,a),Q[0]=d[0]+i[0],Q[1]=d[1]+i[1],Q[2]=d[2]+i[2],Object(y.q)(U,Q,a),g.setPosition(s[0],s[1],s[2]),g.setFocalPoint(r[0],r[1],r[2]),g.setViewUp(U[0]-s[0],U[1]-s[1],U[2]-s[2]),g.orthogonalizeViewUp(),l.resetCameraClippingRange(),F.getLightFollowCamera()&&l.updateLightsGeometryToFollowCamera(),t.previousPosition=o}}}}var vc={};function Wc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vc,n),a.c.obj(e,t),Lc.extend(e,t,n),Nc.extend(e,t,n),Jc(e,t)}var Xc={newInstance:a.c.newInstance(Wc,"vtkMouseCameraTrackballRollManipulator"),extend:Wc};function Hc(e){return e*e}function kc(e,t){t.classHierarchy.push("vtkMouseCameraTrackballMultiRotateManipulator");var n=fc.newInstance(),Q=Xc.newInstance(),B=null;e.onButtonDown=function(t,a,s){var r,U,F=t.getView().getSize(),l=[.5*F[0],.5*F[1]],o=.9*((r=l[0])<(U=l[1])?U:r),g=Hc(l[0]-s.x)+Hc(l[1]-s.y);(B=o*o>g?n:Q).setButton(e.getButton()),B.setShift(e.getShift()),B.setControl(e.getControl()),B.setCenter(e.getCenter()),B.onButtonDown(t,s)},e.onButtonUp=function(e){B&&B.onButtonUp(e)},e.onMouseMove=function(e,t,n){B&&B.onMouseMove(e,t,n)}}var Tc={};function Mc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tc,n),a.c.obj(e,t),Nc.extend(e,t,n),Lc.extend(e,t,n),kc(e,t)}var Yc={newInstance:a.c.newInstance(Mc,"vtkMouseCameraTrackballMultiRotateManipulator"),extend:Mc};function wc(e,t){t.classHierarchy.push("vtkMouseCameraTrackballPanManipulator"),e.onButtonDown=function(e,n,Q){t.previousPosition=Q},e.onMouseMove=function(e,n,Q){if(Q){var B=Q,a=t.previousPosition;t.previousPosition=Q;var s=n.getActiveCamera(),r=s.getPosition(),U=s.getFocalPoint();if(s.getParallelProjection()){s.orthogonalizeViewUp();var F=s.getViewUp(),l=s.getViewPlaneNormal(),o=[0,0,0];Object(u.w)(l,F,o);var g=e.getView().getSize()[1],i=(B.x-a.x)/g,c=(a.y-B.y)/g,d=s.getParallelScale();c*=2*d;var I=o[0]*(i*=2*d)+F[0]*c;r[0]+=I,U[0]+=I,I=o[1]*i+F[1]*c,r[1]+=I,U[1]+=I,I=o[2]*i+F[2]*c,r[2]+=I,U[2]+=I,s.setPosition(r[0],r[1],r[2]),s.setFocalPoint(U[0],U[1],U[2])}else{var C=t.center,m=e.getInteractorStyle(),b=m.computeWorldToDisplay(n,C[0],C[1],C[2])[2],S=m.computeDisplayToWorld(n,B.x,B.y,b),y=m.computeDisplayToWorld(n,a.x,a.y,b),Z=[r[0]+(y[0]-S[0]),r[1]+(y[1]-S[1]),r[2]+(y[2]-S[2])],x=[U[0]+(y[0]-S[0]),U[1]+(y[1]-S[1]),U[2]+(y[2]-S[2])];s.setPosition(Z[0],Z[1],Z[2]),s.setFocalPoint(x[0],x[1],x[2])}n.resetCameraClippingRange(),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}}var Oc={};function zc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Oc,n),a.c.obj(e,t),Lc.extend(e,t,n),Nc.extend(e,t,n),wc(e,t)}var Pc={newInstance:a.c.newInstance(zc,"vtkMouseCameraTrackballPanManipulator"),extend:zc};function Kc(e,t){t.classHierarchy.push("vtkMouseCameraTrackballZoomManipulator"),e.onButtonDown=function(e,n,Q){t.previousPosition=Q;var B=e.getView().getSize(),a=n.getActiveCamera(),s=t.flipDirection?-1:1;if(a.getParallelProjection())t.zoomScale=1.5/B[1]*s;else{var r=a.getClippingRange();t.zoomScale=r[1]/B[1]*1.5*s}},e.onMouseMove=function(e,n,Q){if(Q){var B=t.previousPosition.y-Q.y,a=n.getActiveCamera();if(a.getParallelProjection()){var s=B*t.zoomScale;a.setParallelScale((1-s)*a.getParallelScale())}else{var r=a.getPosition(),U=a.getFocalPoint(),F=a.getDirectionOfProjection(),l=B*t.zoomScale,o=l*F[0];r[0]+=o,U[0]+=o,o=l*F[1],r[1]+=o,U[1]+=o,o=l*F[2],r[2]+=o,U[2]+=o,a.getFreezeFocalPoint()||a.setFocalPoint(U[0],U[1],U[2]),a.setPosition(r[0],r[1],r[2]),n.resetCameraClippingRange()}e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),t.previousPosition=Q}},e.onScroll=function(e,t,n){if(n){var Q=t.getActiveCamera(),B=1-n/10;Q.getParallelProjection()?Q.setParallelScale(Q.getParallelScale()/B):(Q.dolly(B),t.resetCameraClippingRange()),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}}var jc={zoomScale:0,flipDirection:!1};function _c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jc,n),a.c.obj(e,t),Nc.extend(e,t,n),Lc.extend(e,t,n),a.c.setGet(e,t,["flipDirection"]),Kc(e,t)}var qc={newInstance:a.c.newInstance(_c,"vtkMouseCameraTrackballZoomManipulator"),extend:_c};function $c(e,t){t.classHierarchy.push("vtkMouseCameraTrackballZoomToMouseManipulator");var n=e.onButtonDown;e.onButtonDown=function(e,Q,B){n(e,Q,B),t.zoomPosition=B},e.onMouseMove=function(e,n,Q){if(Q){var B=(t.previousPosition.y-Q.y)*t.zoomScale;Ig.dollyToPosition(1-B,t.zoomPosition,n,e),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),t.previousPosition=Q}},e.onScroll=function(e,t,n,Q){if(n&&Q){var B=1-.1*n;Ig.dollyToPosition(B,Q,t,e),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}}var ed={zoomPosition:null};function td(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ed,n),qc.extend(e,t,n),$c(e,t)}var nd={newInstance:a.c.newInstance(td,"vtkMouseCameraTrackballZoomToMouseManipulator"),extend:td};function Qd(e,t){t.classHierarchy.push("vtkCompositeGestureManipulator"),e.startInteraction=function(){},e.endInteraction=function(){},e.onStartPinch=function(e,t){},e.onStartRotate=function(e,t){},e.onStartPan=function(e,t){},e.onPinch=function(e,t,n){},e.onRotate=function(e,t,n){},e.onPan=function(e,t,n){},e.onEndPinch=function(e){},e.onEndRotate=function(e){},e.onEndPan=function(e){},e.isPinchEnabled=function(){return t.pinchEnabled},e.isPanEnabled=function(){return t.panEnabled},e.isRotateEnabled=function(){return t.rotateEnabled}}var Bd={pinchEnabled:!0,panEnabled:!0,rotateEnabled:!0};var ad={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bd,n),a.c.set(e,t,["pinchEnabled","panEnabled","rotateEnabled"]),a.c.setGet(e,t,["interactorStyle"]),Qd(e,t)}};function sd(e,t){t.classHierarchy.push("vtkGestureCameraManipulator"),e.onStartPinch=function(e,n){t.previousScale=n},e.onStartRotate=function(e,n){t.previousRotation=n},e.onStartPan=function(e,n){t.previousTranslation=n},e.onPinch=function(e,n,Q){Ig.dollyByFactor(e,n,Q/t.previousScale),t.previousScale=Q},e.onPan=function(e,n,Q){var B=n.getActiveCamera(),a=e.getInteractorStyle(),s=B.getFocalPoint(),r=(s=a.computeWorldToDisplay(n,s[0],s[1],s[2]))[2],U=Q,F=t.previousTranslation,l=a.computeDisplayToWorld(n,s[0]+U[0]-F[0],s[1]+U[1]-F[1],r),o=a.computeDisplayToWorld(n,s[0],s[1],r),g=[];g[0]=o[0]-l[0],g[1]=o[1]-l[1],g[2]=o[2]-l[2],s=B.getFocalPoint();var i=B.getPosition();B.setFocalPoint(g[0]+s[0],g[1]+s[1],g[2]+s[2]),B.setPosition(g[0]+i[0],g[1]+i[1],g[2]+i[2]),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),B.orthogonalizeViewUp(),t.previousTranslation=Q},e.onRotate=function(e,n,Q){var B=n.getActiveCamera();B.roll(Q-t.previousRotation),B.orthogonalizeViewUp(),t.previousRotation=Q}}var rd={};function Ud(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rd,n),a.c.obj(e,t),ad.extend(e,t,n),Lc.extend(e,t,n),sd(e,t)}var Fd={newInstance:a.c.newInstance(Ud,"vtkGestureCameraManipulator"),extend:Ud};function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function od(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ld(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gd=[-2,-1,-2,-1],id={position:"absolute",zIndex:1,border:"2px solid #F44336",backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:"4px",boxSizing:"border-box"};function cd(e,t){t.classHierarchy.push("vtkMouseBoxSelectionManipulator");var n=null,Q=null,B=null,a=null,s=null,r=!1;function U(){return B&&a?[Math.min(B.x,a.x),Math.max(B.x,a.x),Math.min(B.y,a.y),Math.max(B.y,a.y)]:gd}function F(){if(n&&Q){var e=n.getSize(),t=Object(Ue.a)(e,2),B=t[0],a=t[1],r=Q.getBoundingClientRect(),F=r.width,l=r.height,o=U(),g=Object(Ue.a)(o,4),i=g[0],c=g[1],d=g[2],I=g[3];s.style.left="".concat(F*i/B,"px"),s.style.top="".concat(l-l*I/a,"px"),s.style.width="".concat(F*(c-i)/B,"px"),s.style.height="".concat(l*(I-d)/a,"px")}}e.onButtonDown=function(e,a,U){var l,o;B=U,t.renderSelection&&(n||(n=e.getView()),!Q&&n&&(Q=n.getContainer()),s||(s=document.createElement("div"),l=s,o=t.selectionStyle,Object.keys(o).forEach((function(e){l.style[e]=o[e]}))),F(),Q&&!r&&(r=!0,Q.appendChild(s)))},e.onMouseMove=function(s,r,l){B&&l&&(a=l,e.invokeBoxSelectInput({view:n,container:Q,selection:U()}),t.renderSelection&&F())},e.onButtonUp=function(t,F){B&&a&&(e.invokeBoxSelectChange({view:n,container:Q,selection:U()}),r&&(s.parentElement.removeChild(s),r=!1),n=null,Q=null,B=null,a=null)}}function dd(e){return od(od({renderSelection:!0},e),{},{selectionStyle:od(od({},id),e.selectionStyle)})}function Id(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dd(n)),Object(a.h)(e,t),Nc.extend(e,t,n),Object(a.d)(e,t,"BoxSelectChange"),Object(a.d)(e,t,"BoxSelectInput"),Object(a.j)(e,t,["renderSelection","selectionStyle"]),cd(e,t)}var ud={newInstance:Object(a.g)(Id,"vtkMouseBoxSelectionManipulator"),extend:Id},Cd=n(32);function md(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function bd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?md(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):md(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sd=Ba.a.createContext(null),yd=Ba.a.createContext(null),Zd=Ba.a.createContext(null),xd=Ba.a.createContext(null),Gd=Ba.a.createContext(null),Vd={None:null,Pan:Pc,Zoom:qc,Roll:Xc,Rotate:fc,MultiRotate:Yc,ZoomToMouse:nd,Select:ud},Rd={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},Ld=function(e){qB(n,Qa.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,Q=na(e);if(t){var B=na(this).constructor;n=Reflect.construct(Q,arguments,B)}else n=Q.apply(this,arguments);return ta(this,n)}}(n);function n(e){var Q;Object(Ze.a)(this,n),(Q=t.call(this,e)).containerRef=Ba.a.createRef(),Q.renderWindow=ma.newInstance(),Q.renderer=To.newInstance(),Q.renderWindow.addRenderer(Q.renderer),Q.camera=Q.renderer.getActiveCamera(),Q.openglRenderWindow=Qo.newInstance(),Q.renderWindow.addView(Q.openglRenderWindow),Q.interactor=bo.newInstance(),Q.interactor.setView(Q.openglRenderWindow),Q.interactor.initialize(),Q.style=Ig.newInstance(),Q.interactor.setInteractorStyle(Q.style),Q.selector=hU.newInstance({captureZValues:!0}),Q.selector.setFieldAssociation(Cd.a.FIELD_ASSOCIATION_POINTS),Q.selector.attach(Q.openglRenderWindow,Q.renderer),Q.resizeObserver=new ResizeObserver((function(){return Q.onResize()})),Q.renderView=function(){Q.updateCubeBounds(),Q.renderWindow.render()},Q.resetCamera=Q.resetCamera.bind(ea(Q));var s=st.newInstance({bounds:[0,0,0,0,0,0]});Q.updateCubeBounds=function(){s.reset();for(var e=Q.renderer.get("props").props,t=0;t<e.length;t++){var n=e[t];n.getVisibility()&&n.getUseBounds()&&n!==Q.cubeAxes&&s.addBounds.apply(s,Object(B.a)(n.getBounds()))}Q.cubeAxes.setDataBounds(s.getBounds())};var r=Object(a.b)(Q.updateCubeBounds,50);Q.hasFocus=!1,Q.handleKey=function(e){if(Q.hasFocus)switch(e.code){case"KeyR":Q.resetCamera()}},Q.onEnter=function(){Q.hasFocus=!0},Q.onLeave=function(){Q.hasFocus=!1};var U=Object(a.b)((function(e){var t=e.x,n=e.y;if(-1!==Q.props.pickingModes.indexOf("hover")){var B=Q.pick(t,n,t,n);0===Q.lastSelection.length&&0===B.length||(Q.lastSelection=B,Q.props.onHover&&Q.props.onHover(B[0]),"setProps"in Q.props&&Q.props.setProps({hoverInfo:B[0]}))}}),10);return Q.onClick=function(e){return function(e){var t=e.x,n=e.y;if(-1!==Q.props.pickingModes.indexOf("click")){var B=Q.pick(t,n,t,n);Q.props.onClick&&Q.props.onClick(B[0]),"setProps"in Q.props&&Q.props.setProps({clickInfo:B[0]})}}(Q.getScreenEventPositionFor(e))},Q.onMouseMove=function(e){return U(Q.getScreenEventPositionFor(e))},Q.lastSelection=[],Q.onBoxSelectChange=function(e){var t=e.selection;if(-1!==Q.props.pickingModes.indexOf("select")){var n=Object(Ue.a)(t,4),B=n[0],a=n[1],s=n[2],r=n[3],U=Q.pick(B,s,a,r);Q.props.onSelect&&Q.props.onSelect(U),"setProps"in Q.props&&Q.props.setProps({selectInfo:U})}},Q.cubeAxes=Gc.newInstance({visibility:!1,dataBounds:[-1,1,-1,1,-1,1]}),Q.cubeAxes.getActors().forEach((function(e){return(0,e.setVisibility)(!1)})),Q.cubeAxes.setCamera(Q.camera),Q.renderer.addActor(Q.cubeAxes),Q.subscriptions=[],Q.subscriptions.push(Q.renderer.onEvent((function(e){var t=e.type;e.renderer&&"ComputeVisiblePropBoundsEvent"===t&&r()}))),Q}return Object(xe.a)(n,[{key:"getScreenEventPositionFor",value:function(e){var t=this.containerRef.current.getBoundingClientRect(),n=this.openglRenderWindow.getSize(),Q=Object(Ue.a)(n,2),B=Q[0],a=Q[1],s=B/t.width,r=a/t.height;return{x:s*(e.clientX-t.left),y:r*(t.height-e.clientY+t.top),z:0}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.children,Q=e.style,B=e.className;return Ba.a.createElement("div",{key:t,id:t,className:B,style:bd({position:"relative"},Q),onMouseEnter:this.onEnter,onMouseLeave:this.onLeave,onClick:this.onClick,onMouseMove:this.onMouseMove},Ba.a.createElement("div",{style:Rd,ref:this.containerRef}),Ba.a.createElement("div",null,Ba.a.createElement(Sd.Provider,{value:this},n)))}},{key:"onResize",value:function(){var e=this.containerRef.current;if(e){var t=e.getBoundingClientRect(),n=t.width,Q=t.height;this.openglRenderWindow.setSize(Math.max(n,10),Math.max(Q,10)),this.renderWindow.render()}}},{key:"componentDidMount",value:function(){var e=this,t=this.containerRef.current;this.openglRenderWindow.setContainer(t),this.interactor.bindEvents(t),this.onResize(),this.resizeObserver.observe(t),this.update(this.props),document.addEventListener("keyup",this.handleKey),this.resetCamera(),setTimeout((function(){return e.resetCamera()}),100)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();document.removeEventListener("keyup",this.handleKey),this.resizeObserver.disconnect(),this.resizeObserver=null,this.interactor.unbindEvents(),this.openglRenderWindow.setContainer(null),this.renderWindow.removeRenderer(this.renderer),this.renderWindow.removeView(this.openglRenderWindow),this.interactor.delete(),this.interactor=null,this.renderer.delete(),this.renderer=null,this.renderWindow.delete(),this.renderWindow=null,this.openglRenderWindow.delete(),this.openglRenderWindow=null}},{key:"update",value:function(e,t){var n,Q,B,a=e.background,s=e.interactorSettings,r=e.cameraPosition,U=e.cameraViewUp,F=e.cameraParallelProjection,l=e.triggerRender,o=e.triggerResetCamera,g=e.showCubeAxes,i=e.cubeAxesStyle;!a||t&&a===t.background||this.renderer.setBackground(a),!s||t&&s===t.interactorSettings||(n=this.style,Q=s,B=this,n.removeAllMouseManipulators(),Q.forEach((function(e){var t=Vd[e.action];if(t){var Q=e.button,a=e.shift,s=e.control,r=e.alt,U=e.scrollEnabled,F=e.dragEnabled,l=t.newInstance();l.setButton(Q),l.setShift(!!a),l.setControl(!!s),l.setAlt(!!r),void 0!==U&&l.setScrollEnabled(U),void 0!==F&&l.setDragEnabled(F),n.addMouseManipulator(l),l.onBoxSelectChange&&B.onBoxSelectChange&&l.onBoxSelectChange(B.onBoxSelectChange)}})),n.addGestureManipulator(Fd.newInstance())),!F||t&&F===t.cameraParallelProjection||(this.renderer.getActiveCamera().setParallelProjection(F),t&&this.resetCamera()),!r||t&&JSON.stringify(r)===JSON.stringify(t.cameraPosition)||(this.renderer.getActiveCamera().set({position:r,viewUp:U,focalPoint:[0,0,0]}),t&&this.resetCamera()),this.cubeAxes.setVisibility(g)&&(this.cubeAxes.getActors().forEach((function(e){return(0,e.setVisibility)(g)})),this.renderView()),this.cubeAxes.set(i||{})&&this.renderView(),t&&l!==t.triggerRender&&setTimeout(this.renderView,0),t&&o!==t.triggerResetCamera&&setTimeout(this.resetCamera,0)}},{key:"resetCamera",value:function(){this.renderer.resetCamera(),this.style.setCenterOfRotation(this.renderer.getActiveCamera().getFocalPoint()),this.renderWindow.render()}},{key:"pick",value:function(e,t,n,Q){var B=this;if(this.selector.setArea(e,t,n,Q),this.previousSelectedData=null,this.selector.captureBuffers()){if(this.selections=this.selector.generateSelection(e,t,n,Q)||[],e!==n||t!==Q){var a=[Array.from(this.openglRenderWindow.displayToWorld(e,t,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,t,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,Q,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,Q,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,t,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,t,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,Q,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,Q,1,this.renderer))],s=[];return this.selections.forEach((function(e){var t=e.getProperties().prop.get("representationId").representationId;t&&s.push(t)})),{frustrum:a,representationIds:s}}var r=[Array.from(this.openglRenderWindow.displayToWorld(e,t,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,t,1,this.renderer))];return this.selections.map((function(e){var t=e.getProperties(),n=t.prop,Q=t.compositeID,a=t.displayPosition;return bd(bd({worldPosition:Array.from(B.openglRenderWindow.displayToWorld(a[0],a[1],a[2],B.renderer)),displayPosition:a,compositeID:Q},n.get("representationId")),{},{ray:r})}))}return[]}}]),n}();Ld.defaultProps={style:{width:"100%",height:"100%"},background:[.2,.3,.4],cameraPosition:[0,0,1],cameraViewUp:[0,1,0],cameraParallelProjection:!1,triggerRender:0,triggerResetCamera:0,interactorSettings:[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",alt:!0},{button:1,action:"Zoom",control:!0},{button:1,action:"Select",shift:!0},{button:1,action:"Roll",alt:!0,shift:!0}],pickingModes:[],showCubeAxes:!1},Ld.propTypes={id:sa.a.string,style:sa.a.object,className:sa.a.string,background:sa.a.array,interactorSettings:sa.a.array,cameraPosition:sa.a.array,cameraViewUp:sa.a.array,cameraParallelProjection:sa.a.bool,triggerRender:sa.a.number,triggerResetCamera:sa.a.number,children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node]),pickingModes:sa.a.arrayOf(sa.a.string),onClick:sa.a.func,clickInfo:sa.a.object,onHover:sa.a.func,hoverInfo:sa.a.object,onSelect:sa.a.func,selectInfo:sa.a.object,showCubeAxes:sa.a.bool,cubeAxesStyle:sa.a.object};var pd=Ld,hd=a.c.vtkErrorMacro;function Nd(e,t){t.classHierarchy.push("vtkPiecewiseFunction"),e.getSize=function(){return t.nodes.length},e.getType=function(){var e,n=0,Q=0;t.nodes.length>0&&(n=t.nodes[0].y);for(var B=1;B<t.nodes.length;B++){if((e=t.nodes[B].y)!==n)if(e>n)switch(Q){case 0:case 1:Q=1;break;default:case 2:Q=3}else switch(Q){case 0:case 2:Q=2;break;default:case 1:Q=3}if(n=e,3===Q)break}switch(Q){case 0:return"Constant";case 1:return"NonDecreasing";case 2:return"NonIncreasing";default:case 3:return"Varied"}},e.getDataPointer=function(){var e=t.nodes.length;if(t.function=null,e>0){t.function=[];for(var n=0;n<e;n++)t.function[2*n]=t.nodes[n].x,t.function[2*n+1]=t.nodes[n].y}return t.function},e.getFirstNonZeroValue=function(){if(0===t.nodes.length)return 0;for(var e=1,n=0;n<t.nodes.length;n++)if(0!==t.nodes[n].y){e=0;break}return e?Number.MAX_VALUE:n>0?t.nodes[n-1].x:t.clamping?-Number.MAX_VALUE:t.nodes[0].x},e.getNodeValue=function(e,n){var Q=t.nodes.length;return e<0||e>=Q?(hd("Index out of range!"),-1):(n[0]=t.nodes[e].x,n[1]=t.nodes[e].y,n[2]=t.nodes[e].midpoint,n[3]=t.nodes[e].sharpness,1)},e.setNodeValue=function(n,Q){var B=t.nodes.length;if(n<0||n>=B)return hd("Index out of range!"),-1;var a=t.nodes[n].x;return t.nodes[n].x=Q[0],t.nodes[n].y=Q[1],t.nodes[n].midpoint=Q[2],t.nodes[n].sharpness=Q[3],a!==Q[0]?e.sortAndUpdateRange():e.modified(),1},e.addPoint=function(t,n){return e.addPointLong(t,n,.5,0)},e.addPointLong=function(n,Q,B,a){if(B<0||B>1)return hd("Midpoint outside range [0.0, 1.0]"),-1;if(a<0||a>1)return hd("Sharpness outside range [0.0, 1.0]"),-1;t.allowDuplicateScalars||e.removePoint(n);var s,r={x:n,y:Q,midpoint:B,sharpness:a};for(t.nodes.push(r),e.sortAndUpdateRange(),s=0;s<t.nodes.length&&t.nodes[s].x!==n;s++);return s<t.nodes.length?s:-1},e.setNodes=function(n){t.nodes!==n&&(t.nodes=n,e.sortAndUpdateRange())},e.sortAndUpdateRange=function(){t.nodes.sort((function(e,t){return e.x-t.x})),e.updateRange()||e.modified()},e.updateRange=function(){var n=t.range.slice(),Q=t.nodes.length;return Q?(t.range[0]=t.nodes[0].x,t.range[1]=t.nodes[Q-1].x):(t.range[0]=0,t.range[1]=0),(n[0]!==t.range[0]||n[1]!==t.range[1])&&(e.modified(),!0)},e.removePoint=function(n){var Q;for(Q=0;Q<t.nodes.length&&t.nodes[Q].x!==n;Q++);if(Q>=t.nodes.length)return-1;var B=Q,a=!1;return t.nodes.splice(Q,1),0!==Q&&Q!==t.nodes.length||(a=e.updateRange()),a||e.modified(),B},e.removeAllPoints=function(){t.nodes=[],e.sortAndUpdateRange()},e.addSegment=function(n,Q,B,a){e.sortAndUpdateRange();for(var s=0;s<t.nodes.length;)t.nodes[s].x>=n&&t.nodes[s].x<=B?t.nodes.splice(s,1):s++;e.addPoint(n,Q,.5,0),e.addPoint(B,a,.5,0)},e.getValue=function(t){var n=[];return e.getTable(t,t,1,n),n[0]},e.adjustRange=function(n){if(n.length<2)return 0;var Q=e.getRange();Q[0]<n[0]?e.addPoint(n[0],e.getValue(n[0])):e.addPoint(n[0],e.getValue(Q[0])),Q[1]>n[1]?e.addPoint(n[1],e.getValue(n[1])):e.addPoint(n[1],e.getValue(Q[1])),e.sortAndUpdateRange();for(var B=0;B<t.nodes.length;)t.nodes[B].x>=n[0]&&t.nodes[B].x<=n[1]?t.nodes.splice(B,1):++B;return e.sortAndUpdateRange(),1},e.estimateMinNumberOfSamples=function(t,n){var Q=e.findMinimumXDistance();return Math.ceil((n-t)/Q)},e.findMinimumXDistance=function(){var e=t.nodes.length;if(e<2)return-1;for(var n=t.nodes[1].x-t.nodes[0].x,Q=0;Q<e-1;Q++){var B=t.nodes[Q+1].x-t.nodes[Q].x;B<n&&(n=B)}return n},e.getTable=function(e,n,Q,B){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=0,U=t.nodes.length,F=0;0!==U&&(F=t.nodes[U-1].y);var l=0,o=0,g=0,i=0,c=0,d=0,I=0;for(a=0;a<Q;a++){var u=s*a;for(l=Q>1?e+a/(Q-1)*(n-e):.5*(e+n);r<U&&l>t.nodes[r].x;)++r<U&&(o=t.nodes[r-1].x,g=t.nodes[r].x,i=t.nodes[r-1].y,c=t.nodes[r].y,d=t.nodes[r-1].midpoint,I=t.nodes[r-1].sharpness,d<1e-5&&(d=1e-5),d>.99999&&(d=.99999));if(r>=U)B[u]=t.clamping?F:0;else if(0===r)B[u]=t.clamping?t.nodes[0].y:0;else{var C=(l-o)/(g-o);if(C=C<d?.5*C/d:.5+.5*(C-d)/(1-d),I>.99){if(C<.5){B[u]=i;continue}B[u]=c;continue}if(I<.01){B[u]=(1-C)*i+C*c;continue}C<.5?C=.5*Math.pow(2*C,1+10*I):C>.5&&(C=1-.5*Math.pow(2*(1-C),1+10*I));var m=C*C,b=m*C,S=2*b-3*m+1,y=-2*b+3*m,Z=b-2*m+C,x=b-m,G=c-i,V=(1-I)*G;B[u]=S*i+y*c+Z*V+x*V;var R=i<c?i:c,L=i>c?i:c;B[u]=B[u]<R?R:B[u],B[u]=B[u]>L?L:B[u]}}}}var Dd={range:[0,0],clamping:!0,allowDuplicateScalars:!1};function Ad(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dd,n),a.c.obj(e,t),t.nodes=[],a.c.setGet(e,t,["allowDuplicateScalars","clamping"]),a.c.setArray(e,t,["range"],2),a.c.getArray(e,t,["range"]),Nd(e,t)}var Ed={newInstance:a.c.newInstance(Ad,"vtkPiecewiseFunction"),extend:Ad},fd={ColorSpace:{RGB:0,HSV:1,LAB:2,DIVERGING:3},Scale:{LINEAR:0,LOG10:1}};function Jd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var vd=fd.ColorSpace,Wd=fd.Scale,Xd=As.ScalarMappingTarget,Hd=a.c.vtkDebugMacro,kd=a.c.vtkErrorMacro,Td=a.c.vtkWarningMacro;function Md(e,t){var n=e[0],Q=e[1],B=e[2],a=Math.sqrt(n*n+Q*Q+B*B),s=a>.001?Math.acos(n/a):0,r=s>.001?Math.atan2(B,Q):0;t[0]=a,t[1]=s,t[2]=r}function Yd(e,t){if(e[0]>=t-.1)return e[2];var n=e[1]*Math.sqrt(t*t-e[0]*e[0])/(e[0]*Math.sin(e[1]));return e[2]>-.3*Math.PI?e[2]+n:e[2]-n}function wd(e,t,n,Q){var B=[],a=[];Object(u.e)(t,B),Object(u.e)(n,a);var s=[],r=[];Md(B,s),Md(a,r);var U=e;if(s[1]>.05&&r[1]>.05&&function(e,t){var n=e-t;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}(s[2],r[2])>.33*Math.PI){var F=Math.max(s[0],r[0]);F=Math.max(88,F),e<.5?(r[0]=F,r[1]=0,r[2]=0,U*=2):(s[0]=F,s[1]=0,s[2]=0,U=2*U-1)}s[1]<.05&&r[1]>.05?s[2]=Yd(r,s[0]):r[1]<.05&&s[1]>.05&&(r[2]=Yd(s,r[0]));var l=[];l[0]=(1-U)*s[0]+U*r[0],l[1]=(1-U)*s[1]+U*r[1],l[2]=(1-U)*s[2]+U*r[2];var o=[];!function(e,t){var n=e[0],Q=e[1],B=e[2];t[0]=n*Math.cos(Q),t[1]=n*Math.sin(Q)*Math.cos(B),t[2]=n*Math.sin(Q)*Math.sin(B)}(l,o),Object(u.f)(o,Q)}function Od(e,t){t.classHierarchy.push("vtkColorTransferFunction"),e.getSize=function(){return t.nodes.length},e.addRGBPoint=function(t,n,Q,B){return e.addRGBPointLong(t,n,Q,B,.5,0)},e.addRGBPointLong=function(n,Q,B,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(s<0||s>1)return kd("Midpoint outside range [0.0, 1.0]"),-1;if(r<0||r>1)return kd("Sharpness outside range [0.0, 1.0]"),-1;t.allowDuplicateScalars||e.removePoint(n);var U={x:n,r:Q,g:B,b:a,midpoint:s,sharpness:r};t.nodes.push(U),e.sortAndUpdateRange();for(var F=0;F<t.nodes.length&&t.nodes[F].x!==n;F++);return F<t.nodes.length?F:-1},e.addHSVPoint=function(t,n,Q,B){return e.addHSVPointLong(t,n,Q,B,.5,0)},e.addHSVPointLong=function(t,n,Q,B){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=[],U=[n,Q,B];return Object(u.u)(U,r),e.addRGBPoint(t,r[0],r[1],r[2],a,s)},e.setNodes=function(n){t.nodes!==n&&(t.nodes=n,e.sortAndUpdateRange())},e.sortAndUpdateRange=function(){t.nodes.sort((function(e,t){return e.x-t.x})),e.updateRange()||e.modified()},e.updateRange=function(){var n=[2];n[0]=t.mappingRange[0],n[1]=t.mappingRange[1];var Q=t.nodes.length;return Q?(t.mappingRange[0]=t.nodes[0].x,t.mappingRange[1]=t.nodes[Q-1].x):(t.mappingRange[0]=0,t.mappingRange[1]=0),(n[0]!==t.mappingRange[0]||n[1]!==t.mappingRange[1])&&(e.modified(),!0)},e.removePoint=function(n){for(var Q=0;Q<t.nodes.length&&t.nodes[Q].x!==n;Q++);var B=Q;if(Q>=t.nodes.length)return-1;var a=!1;return t.nodes.splice(Q,1),0!==Q&&Q!==t.nodes.length||(a=e.updateRange()),a||e.modified(),B},e.movePoint=function(n,Q){if(n!==Q){e.removePoint(Q);for(var B=0;B<t.nodes.length;B++)if(t.nodes[B].x===n){t.nodes[B].x=Q,e.sortAndUpdateRange();break}}},e.removeAllPoints=function(){t.nodes=[],e.sortAndUpdateRange()},e.addRGBSegment=function(n,Q,B,a,s,r,U,F){e.sortAndUpdateRange();for(var l=0;l<t.nodes.length;)t.nodes[l].x>=n&&t.nodes[l].x<=s?t.nodes.splice(l,1):l++;e.addRGBPointLong(n,Q,B,a,.5,0),e.addRGBPointLong(s,r,U,F,.5,0),e.modified()},e.addHSVSegment=function(t,n,Q,B,a,s,r,U){var F=[s,r,U],l=[],o=[];Object(u.u)([n,Q,B],l),Object(u.u)(F,o),e.addRGBSegment(t,l[0],l[1],l[2],a,o[0],o[1],o[2])},e.mapValue=function(t){var n=[];return e.getColor(t,n),[Math.floor(255*n[0]+.5),Math.floor(255*n[1]+.5),Math.floor(255*n[2]+.5),255]},e.getColor=function(n,Q){if(t.indexedLookup){var B=e.getSize(),a=e.getAnnotatedValueIndexInternal(n);if(a<0||0===B)e.getNanColor(Q);else{var s=[];e.getNodeValue(a%B,s),Q[0]=s.r,Q[1]=s.g,Q[2]=s.b}}else e.getTable(n,n,1,Q)},e.getRedValue=function(t){var n=[];return e.getColor(t,n),n[0]},e.getGreenValue=function(t){var n=[];return e.getColor(t,n),n[1]},e.getBlueValue=function(t){var n=[];return e.getColor(t,n),n[2]},e.getTable=function(n,Q,B,a){if(Object(u.v)(n)||Object(u.v)(Q))for(var s=0;s<B;s++)a[3*s+0]=t.nanColor[0],a[3*s+1]=t.nanColor[1],a[3*s+2]=t.nanColor[2];else{var r=0,U=t.nodes.length,F=0,l=0,o=0;0!==U&&(F=t.nodes[U-1].r,l=t.nodes[U-1].g,o=t.nodes[U-1].b);var g=0,i=0,c=0,d=[0,0,0],I=[0,0,0],C=0,m=0,b=[],S=t.scale===Wd.LOG10;S&&(S=t.mappingRange[0]>0);var y=0,Z=0,x=0;S&&(y=Math.log10(n),Z=Math.log10(Q));for(var G=0;G<B;G++){var V=3*G;if(B>1?S?(x=y+G/(B-1)*(Z-y),g=Math.pow(10,x)):g=n+G/(B-1)*(Q-n):S?(x=.5*(y+Z),g=Math.pow(10,x)):g=.5*(n+Q),t.discretize){var R=t.mappingRange;if(g>=R[0]&&g<=R[1]){var L=t.numberOfValues,p=R[1]-R[0];if(L<=1)g=R[0]+p/2;else{var h=(g-R[0])/p,N=Object(u.g)(L*h);g=R[0]+N/(L-1)*p}}}for(;r<U&&g>t.nodes[r].x;)++r<U&&(i=t.nodes[r-1].x,c=t.nodes[r].x,S&&(i=Math.log10(i),c=Math.log10(c)),d[0]=t.nodes[r-1].r,I[0]=t.nodes[r].r,d[1]=t.nodes[r-1].g,I[1]=t.nodes[r].g,d[2]=t.nodes[r-1].b,I[2]=t.nodes[r].b,C=t.nodes[r-1].midpoint,m=t.nodes[r-1].sharpness,C<1e-5&&(C=1e-5),C>.99999&&(C=.99999));if(g>t.mappingRange[1])a[V]=0,a[V+1]=0,a[V+2]=0,t.clamping&&(e.getUseAboveRangeColor()?(a[V]=t.aboveRangeColor[0],a[V+1]=t.aboveRangeColor[1],a[V+2]=t.aboveRangeColor[2]):(a[V]=F,a[V+1]=l,a[V+2]=o));else if(g<t.mappingRange[0]||Object(u.c)(g)&&g<0)a[V]=0,a[V+1]=0,a[V+2]=0,t.clamping&&(e.getUseBelowRangeColor()?(a[V]=t.belowRangeColor[0],a[V+1]=t.belowRangeColor[1],a[V+2]=t.belowRangeColor[2]):U>0&&(a[V]=t.nodes[0].r,a[V+1]=t.nodes[0].g,a[V+2]=t.nodes[0].b));else if(0===r&&(Math.abs(g-n)<1e-6||t.discretize))U>0?(a[V]=t.nodes[0].r,a[V+1]=t.nodes[0].g,a[V+2]=t.nodes[0].b):(a[V]=0,a[V+1]=0,a[V+2]=0);else{var D=0;if(D=(D=S?(x-i)/(c-i):(g-i)/(c-i))<C?.5*D/C:.5+.5*(D-C)/(1-C),m>.99){if(D<.5){a[V]=d[0],a[V+1]=d[1],a[V+2]=d[2];continue}a[V]=I[0],a[V+1]=I[1],a[V+2]=I[2];continue}if(m<.01){if(t.colorSpace===vd.RGB)a[V]=(1-D)*d[0]+D*I[0],a[V+1]=(1-D)*d[1]+D*I[1],a[V+2]=(1-D)*d[2]+D*I[2];else if(t.colorSpace===vd.HSV){var A=[],E=[];Object(u.d)(d,A),Object(u.d)(I,E),t.hSVWrap&&(A[0]-E[0]>.5||E[0]-A[0]>.5)&&(A[0]>E[0]?A[0]-=1:E[0]-=1);var f=[];f[0]=(1-D)*A[0]+D*E[0],f[0]<0&&(f[0]+=1),f[1]=(1-D)*A[1]+D*E[1],f[2]=(1-D)*A[2]+D*E[2],Object(u.u)(f,b),a[V]=b[0],a[V+1]=b[1],a[V+2]=b[2]}else if(t.colorSpace===vd.LAB){var J=[],v=[];Object(u.e)(d,J),Object(u.e)(I,v);var W=[];W[0]=(1-D)*J[0]+D*v[0],W[1]=(1-D)*J[1]+D*v[1],W[2]=(1-D)*J[2]+D*v[2],Object(u.f)(W,b),a[V]=b[0],a[V+1]=b[1],a[V+2]=b[2]}else t.colorSpace===vd.DIVERGING?(wd(D,d,I,b),a[V]=b[0],a[V+1]=b[1],a[V+2]=b[2]):kd("ColorSpace set to invalid value.",t.colorSpace);continue}D<.5?D=.5*Math.pow(2*D,1+10*m):D>.5&&(D=1-.5*Math.pow(2*(1-D),1+10*m));var X=D*D,H=X*D,k=2*H-3*X+1,T=-2*H+3*X,M=H-2*X+D,Y=H-X,w=void 0;if(t.colorSpace===vd.RGB)for(var O=0;O<3;O++)w=(1-m)*(I[O]-d[O]),a[V+O]=k*d[O]+T*I[O]+M*w+Y*w;else if(t.colorSpace===vd.HSV){var z=[],P=[];Object(u.d)(d,z),Object(u.d)(I,P),t.hSVWrap&&(z[0]-P[0]>.5||P[0]-z[0]>.5)&&(z[0]>P[0]?z[0]-=1:P[0]-=1);for(var K=[],j=0;j<3;j++)w=(1-m)*(P[j]-z[j]),K[j]=k*z[j]+T*P[j]+M*w+Y*w,0===j&&K[j]<0&&(K[j]+=1);Object(u.u)(K,b),a[V]=b[0],a[V+1]=b[1],a[V+2]=b[2]}else if(t.colorSpace===vd.LAB){var _=[],q=[];Object(u.e)(d,_),Object(u.e)(I,q);for(var $=[],ee=0;ee<3;ee++)w=(1-m)*(q[ee]-_[ee]),$[ee]=k*_[ee]+T*q[ee]+M*w+Y*w;Object(u.f)($,b),a[V]=b[0],a[V+1]=b[1],a[V+2]=b[2]}else t.colorSpace===vd.DIVERGING?(wd(D,d,I,b),a[V]=b[0],a[V+1]=b[1],a[V+2]=b[2]):kd("ColorSpace set to invalid value.");for(var te=0;te<3;te++)a[V+te]=a[V+te]<0?0:a[V+te],a[V+te]=a[V+te]>1?1:a[V+te]}}}},e.getUint8Table=function(n,Q,B){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.getMTime()<=t.buildTime&&t.tableSize===B&&t.tableWithAlpha!==a)return t.table;if(0===t.nodes.length)return kd("Attempting to lookup a value with no points in the function"),t.table;var s=a?4:3;t.tableSize===B&&t.tableWithAlpha===a||(t.table=new Uint8Array(B*s),t.tableSize=B,t.tableWithAlpha=a);var r=[];e.getTable(n,Q,B,r);for(var U=0;U<B;U++)t.table[U*s+0]=Math.floor(255*r[3*U+0]+.5),t.table[U*s+1]=Math.floor(255*r[3*U+1]+.5),t.table[U*s+2]=Math.floor(255*r[3*U+2]+.5),a&&(t.table[U*s+3]=255);return t.buildTime.modified(),t.table},e.buildFunctionFromTable=function(n,Q,B,a){var s=0;e.removeAllPoints(),B>1&&(s=(Q-n)/(B-1));for(var r=0;r<B;r++){var U={x:n+s*r,r:a[3*r],g:a[3*r+1],b:a[3*r+2],sharpness:0,midpoint:.5};t.nodes.push(U)}e.sortAndUpdateRange()},e.getNodeValue=function(e,n){return e<0||e>=t.nodes.length?(kd("Index out of range!"),-1):(n[0]=t.nodes[e].x,n[1]=t.nodes[e].r,n[2]=t.nodes[e].g,n[3]=t.nodes[e].b,n[4]=t.nodes[e].midpoint,n[5]=t.nodes[e].sharpness,1)},e.setNodeValue=function(n,Q){if(n<0||n>=t.nodes.length)return kd("Index out of range!"),-1;var B=t.nodes[n].x;return t.nodes[n].x=Q[0],t.nodes[n].r=Q[1],t.nodes[n].g=Q[2],t.nodes[n].b=Q[3],t.nodes[n].midpoint=Q[4],t.nodes[n].sharpness=Q[5],B!==Q[0]?e.sortAndUpdateRange():e.modified(),1},e.getNumberOfAvailableColors=function(){return t.indexedLookup&&e.getSize()?e.getSize():t.tableSize?t.tableSize:16777216},e.getIndexedColor=function(t,n){var Q=e.getSize();if(Q>0&&t>=0){var B=[];e.getNodeValue(t%Q,B);for(var a=0;a<3;++a)n[a]=B[a+1];n[3]=1}else e.getNanColor(n),n[3]=1},e.fillFromDataPointer=function(t,n){if(!(t<=0)&&n){e.removeAllPoints();for(var Q=0;Q<t;Q++)e.addRGBPoint(n[4*Q],n[4*Q+1],n[4*Q+2],n[4*Q+3])}},e.setMappingRange=function(n,Q){var B=[n,Q],a=e.getRange();if(a[1]!==B[1]||a[0]!==B[0])if(B[1]!==B[0]){for(var s=(B[1]-B[0])/(a[1]-a[0]),r=B[0]-a[0]*s,U=0;U<t.nodes.length;++U)t.nodes[U].x=t.nodes[U].x*s+r;t.mappingRange[0]=B[0],t.mappingRange[1]=B[1],e.modified()}else kd("attempt to set zero width color range")},e.adjustRange=function(n){var Q=e.getRange(),B=[];Q[0]<n[0]?(e.getColor(n[0],B),e.addRGBPoint(n[0],B[0],B[1],B[2])):(e.getColor(Q[0],B),e.addRGBPoint(n[0],B[0],B[1],B[2])),Q[1]>n[1]?(e.getColor(n[1],B),e.addRGBPoint(n[1],B[0],B[1],B[2])):(e.getColor(Q[1],B),e.addRGBPoint(n[1],B[0],B[1],B[2])),e.sortAndUpdateRange();for(var a=0;a<t.nodes.length;)t.nodes[a].x>=n[0]&&t.nodes[a].x<=n[1]?t.nodes.splice(a,1):++a;return 1},e.estimateMinNumberOfSamples=function(t,n){var Q=e.findMinimumXDistance();return Math.ceil((n-t)/Q)},e.findMinimumXDistance=function(){if(t.nodes.length<2)return-1;for(var e=Number.MAX_VALUE,n=0;n<t.nodes.length-1;n++){var Q=t.nodes[n+1].x-t.nodes[n].x;Q<e&&(e=Q)}return e},e.mapScalarsThroughTable=function(n,Q,B,a){0!==e.getSize()?t.indexedLookup?e.mapDataIndexed(n,Q,B,a):e.mapData(n,Q,B,a):Hd("Transfer Function Has No Points!")},e.mapData=function(t,n,Q,B){if(0!==e.getSize()){var a=Math.floor(255*e.getAlpha()+.5),s=t.getNumberOfTuples(),r=t.getNumberOfComponents(),U=n.getData(),F=t.getData(),l=[];if(Q===Xd.RGBA)for(var o=0;o<s;o++){var g=F[o*r+B];e.getColor(g,l),U[4*o]=Math.floor(255*l[0]+.5),U[4*o+1]=Math.floor(255*l[1]+.5),U[4*o+2]=Math.floor(255*l[2]+.5),U[4*o+3]=a}if(Q===Xd.RGB)for(var i=0;i<s;i++){var c=F[i*r+B];e.getColor(c,l),U[3*i]=Math.floor(255*l[0]+.5),U[3*i+1]=Math.floor(255*l[1]+.5),U[3*i+2]=Math.floor(255*l[2]+.5)}if(Q===Xd.LUMINANCE)for(var d=0;d<s;d++){var I=F[d*r+B];e.getColor(I,l),U[d]=Math.floor(76.5*l[0]+150.45*l[1]+28.05*l[2]+.5)}if(Q===Xd.LUMINANCE_ALPHA)for(var u=0;u<s;u++){var C=F[u*r+B];e.getColor(C,l),U[2*u]=Math.floor(76.5*l[0]+150.45*l[1]+28.05*l[2]+.5),U[2*u+1]=a}}else Td("Transfer Function Has No Points!")},e.applyColorMap=function(n){if(n.ColorSpace&&(t.colorSpace=vd[n.ColorSpace.toUpperCase()],void 0===t.colorSpace&&(kd("ColorSpace ".concat(n.ColorSpace," not supported, using RGB instead")),t.colorSpace=vd.RGB)),n.NanColor)for(t.nanColor=[].concat(n.NanColor);t.nanColor.length<4;)t.nanColor.push(1);if(n.RGBPoints){var Q=n.RGBPoints.length;t.nodes=[];for(var B=0;B<Q;B+=4)t.nodes.push({x:n.RGBPoints[B],r:n.RGBPoints[B+1],g:n.RGBPoints[B+2],b:n.RGBPoints[B+3],midpoint:.5,sharpness:0})}e.sortAndUpdateRange()}}var zd={clamping:!0,colorSpace:vd.RGB,hSVWrap:!0,scale:Wd.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function Pd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zd,n),As.extend(e,t,n),t.table=[],t.nodes=[],t.nanColor=[.5,0,0,1],t.belowRangeColor=[0,0,0,1],t.aboveRangeColor=[1,1,1,1],t.buildTime={},a.c.obj(t.buildTime),a.c.get(e,t,["buildTime","mappingRange"]),a.c.setGet(e,t,["useAboveRangeColor","useBelowRangeColor","colorSpace","discretize","numberOfValues"]),a.c.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),a.c.getArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"]),Od(e,t)}var Kd=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jd(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(Pd,"vtkColorTransferFunction"),extend:Pd},fd);function jd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var _d=cl.InterpolationType,qd=cl.OpacityMode,$d=a.c.vtkErrorMacro;function eI(e,t){t.classHierarchy.push("vtkVolumeProperty"),e.getMTime=function(){for(var e,n=t.mtime,Q=0;Q<4;Q++)1===t.componentData[Q].colorChannels?t.componentData[Q].grayTransferFunction&&(n=n>(e=t.componentData[Q].grayTransferFunction.getMTime())?n:e):3===t.componentData[Q].colorChannels&&t.componentData[Q].rGBTransferFunction&&(n=n>(e=t.componentData[Q].rGBTransferFunction.getMTime())?n:e),t.componentData[Q].scalarOpacity&&(n=n>(e=t.componentData[Q].scalarOpacity.getMTime())?n:e),t.componentData[Q].gradientOpacity&&(t.componentData[Q].disableGradientOpacity||(n=n>(e=t.componentData[Q].gradientOpacity.getMTime())?n:e));return n},e.getColorChannels=function(e){return e<0||e>3?($d("Bad index - must be between 0 and 3"),0):t.componentData[e].colorChannels},e.setGrayTransferFunction=function(n,Q){var B=!1;return t.componentData[n].grayTransferFunction!==Q&&(t.componentData[n].grayTransferFunction=Q,B=!0),1!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=1,B=!0),B&&e.modified(),B},e.getGrayTransferFunction=function(n){return null===t.componentData[n].grayTransferFunction&&(t.componentData[n].grayTransferFunction=Ed.newInstance(),t.componentData[n].grayTransferFunction.addPoint(0,0),t.componentData[n].grayTransferFunction.addPoint(1024,1),1!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=1),e.modified()),t.componentData[n].grayTransferFunction},e.setRGBTransferFunction=function(n,Q){var B=!1;return t.componentData[n].rGBTransferFunction!==Q&&(t.componentData[n].rGBTransferFunction=Q,B=!0),3!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=3,B=!0),B&&e.modified(),B},e.getRGBTransferFunction=function(n){return null===t.componentData[n].rGBTransferFunction&&(t.componentData[n].rGBTransferFunction=Kd.newInstance(),t.componentData[n].rGBTransferFunction.addRGBPoint(0,0,0,0),t.componentData[n].rGBTransferFunction.addRGBPoint(1024,1,1,1),3!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=3),e.modified()),t.componentData[n].rGBTransferFunction},e.setScalarOpacity=function(n,Q){return t.componentData[n].scalarOpacity!==Q&&(t.componentData[n].scalarOpacity=Q,e.modified(),!0)},e.getScalarOpacity=function(n){return null===t.componentData[n].scalarOpacity&&(t.componentData[n].scalarOpacity=Ed.newInstance(),t.componentData[n].scalarOpacity.addPoint(0,1),t.componentData[n].scalarOpacity.addPoint(1024,1),e.modified()),t.componentData[n].scalarOpacity},e.setComponentWeight=function(n,Q){if(n<0||n>=4)return $d("Invalid index"),!1;var B=Math.min(1,Math.max(0,Q));return t.componentData[n].componentWeight!==B&&(t.componentData[n].componentWeight=B,e.modified(),!0)},e.getComponentWeight=function(e){return e<0||e>=4?($d("Invalid index"),0):t.componentData[e].componentWeight},e.setInterpolationTypeToNearest=function(){return e.setInterpolationType(_d.NEAREST)},e.setInterpolationTypeToLinear=function(){return e.setInterpolationType(_d.LINEAR)},e.setInterpolationTypeToFastLinear=function(){return e.setInterpolationType(_d.FAST_LINEAR)},e.getInterpolationTypeAsString=function(){return a.c.enumToString(_d,t.interpolationType)},["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode"].forEach((function(n){var Q=a.c.capitalize(n);e["set".concat(Q)]=function(Q,B){return t.componentData[Q]["".concat(n)]!==B&&(t.componentData[Q]["".concat(n)]=B,e.modified(),!0)}})),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode"].forEach((function(n){var Q=a.c.capitalize(n);e["get".concat(Q)]=function(e){return t.componentData[e]["".concat(n)]}}))}var tI={independentComponents:!0,interpolationType:_d.FAST_LINEAR,shade:0,ambient:.1,diffuse:.7,specular:.2,specularPower:10,useLabelOutline:!1,labelOutlineThickness:1};function nI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,tI,n),a.c.obj(e,t),!t.componentData){t.componentData=[];for(var Q=0;Q<4;++Q)t.componentData.push({colorChannels:1,grayTransferFunction:null,rGBTransferFunction:null,scalarOpacity:null,scalarOpacityUnitDistance:1,opacityMode:qd.FRACTIONAL,gradientOpacityMinimumValue:0,gradientOpacityMinimumOpacity:0,gradientOpacityMaximumValue:1,gradientOpacityMaximumOpacity:1,useGradientOpacity:!1,componentWeight:1})}a.c.setGet(e,t,["independentComponents","interpolationType","shade","ambient","diffuse","specular","specularPower","useLabelOutline","labelOutlineThickness"]),eI(e,t)}var QI=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jd(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(nI,"vtkVolumeProperty"),extend:nI},cl),BI=a.c.vtkDebugMacro;function aI(e,t){t.classHierarchy.push("vtkVolume"),e.getVolumes=function(){return e},e.makeProperty=QI.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n,Q=t.mapper.getBounds();if(!Q||6!==Q.length)return Q;if(Q[0]>Q[1])return t.mapperBounds=Q.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),Q;if(!t.mapperBounds||!(n=[Q,t.mapperBounds],n[0].map((function(e,t){return n.map((function(e){return e[t]}))}))).reduce((function(e,t){return e&&t[0]===t[1]}),!0)||e.getMTime()>t.boundsMTime.getMTime()){BI("Recomputing bounds..."),t.mapperBounds=Q.map((function(e){return e}));var B=[];st.getCorners(Q,B),e.computeMatrix();var a=new Float64Array(16);Object(S.i)(a,t.matrix),B.forEach((function(e){return Object(y.q)(e,e,a)})),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map((function(e,t){return t%2==0?B.reduce((function(e,n){return e>n[t/2]?n[t/2]:e}),e):B.reduce((function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e}),e)})),t.boundsMTime.modified()}return t.bounds},e.getMTime=function(){var e=t.mtime;if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e}}var sI={mapper:null,property:null,bounds:[1,-1,1,-1,1,-1]};function rI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sI,n),Gg.extend(e,t,n),t.boundsMTime={},a.c.obj(t.boundsMTime),a.c.set(e,t,["property"]),a.c.setGet(e,t,["mapper"]),a.c.getArray(e,t,["bounds"],6),aI(e,t)}var UI={newInstance:a.c.newInstance(rI,"vtkVolume"),extend:rI},FI=Il.BlendMode;function lI(e,t){t.classHierarchy.push("vtkVolumeMapper"),e.getBounds=function(){var n=e.getInputData();return n?(t.static||e.update(),t.bounds=n.getBounds()):t.bounds=Object(u.j)(),t.bounds},e.update=function(){e.getInputData()},e.setBlendModeToComposite=function(){e.setBlendMode(FI.COMPOSITE_BLEND)},e.setBlendModeToMaximumIntensity=function(){e.setBlendMode(FI.MAXIMUM_INTENSITY_BLEND)},e.setBlendModeToMinimumIntensity=function(){e.setBlendMode(FI.MINIMUM_INTENSITY_BLEND)},e.setBlendModeToAverageIntensity=function(){e.setBlendMode(FI.AVERAGE_INTENSITY_BLEND)},e.getBlendModeAsString=function(){return a.c.enumToString(FI,t.blendMode)}}var oI={bounds:[1,-1,1,-1,1,-1],sampleDistance:1,imageSampleDistance:1,maximumSamplesPerRay:1e3,autoAdjustSampleDistances:!0,blendMode:FI.COMPOSITE_BLEND,averageIPScalarRange:[-1e6,1e6]};function gI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,oI,n),ks.extend(e,t,n),a.c.obj(e,t),a.c.algo(e,t,1,0),a.c.setGet(e,t,["sampleDistance","imageSampleDistance","maximumSamplesPerRay","autoAdjustSampleDistances","blendMode"]),a.c.setGetArray(e,t,["averageIPScalarRange"],2),a.c.event(e,t,"lightingActivated"),lI(e,t)}var iI={newInstance:a.c.newInstance(gI,"vtkVolumeMapper"),extend:gI},cI=Object.create(null);[{ColorSpace:"Diverging",Name:"Cool to Warm",NanColor:[1,1,0],RGBPoints:[0,.23137254902,.298039215686,.752941176471,.5,.865,.865,.865,1,.705882352941,.0156862745098,.149019607843]},{ColorSpace:"Diverging",Name:"Warm to Cool",NanColor:[1,1,0],RGBPoints:[0,.705882352941,.0156862745098,.149019607843,.5,.865,.865,.865,1,.23137254902,.298039215686,.752941176471]},{ColorSpace:"RGB",Name:"Rainbow Desaturated",NanColor:[1,1,0],RGBPoints:[0,.278431372549,.278431372549,.858823529412,.143,0,0,.360784313725,.285,0,1,1,.429,0,.501960784314,0,.571,1,1,0,.714,1,.380392156863,0,.857,.419607843137,0,0,1,.878431372549,.301960784314,.301960784314]},{ColorSpace:"RGB",Name:"Cold and Hot",NanColor:[1,1,0],RGBPoints:[0,0,1,1,.45,0,0,1,.5,0,0,.501960784314,.55,1,0,0,1,1,1,0]},{ColorSpace:"RGB",Name:"Black-Body Radiation",NanColor:[0,.498039215686,1],RGBPoints:[0,0,0,0,.4,.901960784314,0,0,.8,.901960784314,.901960784314,0,1,1,1,1]},{ColorSpace:"RGB",Name:"X Ray",NanColor:[1,0,0],RGBPoints:[0,1,1,1,1,0,0,0]},{ColorSpace:"RGB",Name:"Grayscale",NanColor:[1,0,0],RGBPoints:[0,0,0,0,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Blue and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,0,0,.501960784314,.666,0,.501960784314,1,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Orange and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,.501960784314,0,0,.666,1,.501960784314,0,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_rainbow_bright",RGBPoints:[-1,.32549,.14902,.960784,-.866221,.297047,.375586,.963836,-.732441,.180302,.536818,.964627,-.598662,.1302,.649207,.929647,-.464883,.0445143,.749654,.855998,-.331104,.0271325,.830713,.721527,-.197324,.259504,.866145,.543555,-.0635452,.428364,.890725,.329819,.0702341,.568503,.898508,.187623,.204013,.738259,.890317,.0825461,.337793,.84546,.86136,.0147555,.471572,.912191,.808018,0,.605351,.962848,.710445,0,.73913,.999469,.600258,.0176284,.87291,.994156,.445975,.193912,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"erdc_rainbow_dark",RGBPoints:[-1,0,0,.423499,-.866221,0,.119346,.529237,-.732441,0,.238691,.634976,-.598662,0,.346852,.68788,-.464883,0,.45022,.718141,-.331104,0,.553554,.664839,-.197324,0,.651082,.519303,-.0635452,.115841,.72479,.352857,.0702341,.326771,.781195,.140187,.204013,.522765,.798524,.0284624,.337793,.703162,.788685,.00885756,.471572,.845118,.751133,0,.605351,.955734,.690825,0,.73913,.995402,.567916,.0618524,.87291,.987712,.403398,.164851,1,.980407,.247105,.262699]}].filter((function(e){return e.RGBPoints})).filter((function(e){return"CIELAB"!==e.ColorSpace})).forEach((function(e){cI[e.Name]=e}));var dI=Object.keys(cI);dI.sort();var II={addPreset:function(e){e.RGBPoints&&"CIELAB"!==e.ColorSpace&&(cI[e.Name]||(dI.push(e.Name),dI.sort()),cI[e.Name]=e)},removePresetByName:function(e){var t=dI.indexOf(e);t>-1&&dI.splice(t,1),delete cI[e]},getPresetByName:function(e){return cI[e]},rgbPresetNames:dI};var uI=function(e){qB(a,Qa.Component);var t,n,Q=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,Q=na(t);if(n){var B=na(this).constructor;e=Reflect.construct(Q,arguments,B)}else e=Q.apply(this,arguments);return ta(this,e)});function a(e){var t;return Object(Ze.a)(this,a),(t=Q.call(this,e)).lookupTable=Kd.newInstance(),t.piecewiseFunction=Ed.newInstance(),t.volume=UI.newInstance(),t.mapper=iI.newInstance(),t.volume.setMapper(t.mapper),t.volume.getProperty().setRGBTransferFunction(0,t.lookupTable),t.volume.getProperty().setScalarOpacity(0,t.piecewiseFunction),t.volume.getProperty().setInterpolationTypeToLinear(),t}return Object(xe.a)(a,[{key:"render",value:function(){var e=this;return Ba.a.createElement(Sd.Consumer,null,(function(t){return e.view||(t.renderer.addVolume(e.volume),e.view=t),Ba.a.createElement(yd.Provider,{value:e},Ba.a.createElement(Gd.Provider,{value:e.mapper},Ba.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.view&&(this.view.renderer.removeVolume(this.volume),this.view=null),this.volume.delete(),this.volume=null,this.mapper.delete(),this.mapper=null}},{key:"update",value:function(e,t){var n,Q=e.volume,a=e.property,s=e.mapper,r=e.colorMapPreset,U=e.colorDataRange;if(!Q||t&&Q===t.volume||this.volume.set(Q),!a||t&&a===t.property||this.volume.getProperty().set(a),!s||t&&s===t.mapper||this.mapper.set(s),r&&(!t||r!==t.colorMapPreset)){var F,l=II.getPresetByName(r);this.lookupTable.applyColorMap(l),(F=this.lookupTable).setMappingRange.apply(F,Object(B.a)(U)),this.lookupTable.updateRange()}!U||t&&U===t.colorDataRange||("string"==typeof U?t?(console.log("from update"),this.dataChanged()):(this.lookupTable.setMappingRange(0,1),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:0,y:0,midpoint:.5,sharpness:0},{x:1,y:1,midpoint:.5,sharpness:0}])):((n=this.lookupTable).setMappingRange.apply(n,Object(B.a)(U)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:U[0],y:0,midpoint:.5,sharpness:0},{x:U[1],y:1,midpoint:.5,sharpness:0}])))}},{key:"dataChanged",value:function(){if("auto"===this.props.colorDataRange){this.mapper.update();var e,t=this.mapper.getInputData(),n=t&&t.getPointData().getScalars(),Q=n&&n.getRange();Q&&((e=this.lookupTable).setMappingRange.apply(e,Object(B.a)(Q)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:Q[0],y:0,midpoint:.5,sharpness:0},{x:Q[1],y:1,midpoint:.5,sharpness:0}])),this.view&&this.view.renderView()}}}]),a}();uI.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:"auto"},uI.propTypes={id:sa.a.string,mapper:sa.a.object,volume:sa.a.object,property:sa.a.object,colorMapPreset:sa.a.string,colorDataRange:sa.a.oneOfType([sa.a.arrayOf(sa.a.number),sa.a.string]),children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var CI=uI,mI=YU.InterpolationType,bI=a.c.vtkErrorMacro;function SI(e,t){t.classHierarchy.push("vtkImageProperty"),e.getMTime=function(){for(var e,n=t.mtime,Q=0;Q<4;Q++)t.componentData[Q].rGBTransferFunction&&(n=n>(e=t.componentData[Q].rGBTransferFunction.getMTime())?n:e),t.componentData[Q].piecewiseFunction&&(n=n>(e=t.componentData[Q].piecewiseFunction.getMTime())?n:e);return n},e.setRGBTransferFunction=function(n,Q){var B=n,a=Q;return Number.isInteger(n)||(a=n,B=0),t.componentData[B].rGBTransferFunction!==a&&(t.componentData[B].rGBTransferFunction=a,e.modified(),!0)},e.getRGBTransferFunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.componentData[e].rGBTransferFunction},e.setPiecewiseFunction=function(n,Q){var B=n,a=Q;return Number.isInteger(n)||(a=n,B=0),t.componentData[B].piecewiseFunction!==a&&(t.componentData[B].piecewiseFunction=a,e.modified(),!0)},e.getPiecewiseFunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.componentData[e].piecewiseFunction},e.setScalarOpacity=function(t,n){var Q=t,B=n;return Number.isInteger(t)||(B=t,Q=0),e.setPiecewiseFunction(Q,B)},e.getScalarOpacity=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.getPiecewiseFunction(t)},e.setComponentWeight=function(n,Q){if(n<0||n>=4)return bI("Invalid index"),!1;var B=Math.min(1,Math.max(0,Q));return t.componentData[n].componentWeight!==B&&(t.componentData[n].componentWeight=B,e.modified(),!0)},e.getComponentWeight=function(e){return e<0||e>=4?(bI("Invalid index"),0):t.componentData[e].componentWeight},e.setInterpolationTypeToNearest=function(){return e.setInterpolationType(mI.NEAREST)},e.setInterpolationTypeToLinear=function(){return e.setInterpolationType(mI.LINEAR)},e.getInterpolationTypeAsString=function(){return a.c.enumToString(mI,t.interpolationType)}}var yI={independentComponents:!1,interpolationType:mI.LINEAR,colorWindow:255,colorLevel:127.5,ambient:1,diffuse:0,opacity:1};function ZI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,yI,n),a.c.obj(e,t),!t.componentData){t.componentData=[];for(var Q=0;Q<4;Q++)t.componentData.push({rGBTransferFunction:null,piecewiseFunction:null,componentWeight:1})}a.c.setGet(e,t,["independentComponents","interpolationType","colorWindow","colorLevel","ambient","diffuse","opacity"]),SI(e,t)}var xI={newInstance:a.c.newInstance(ZI,"vtkImageProperty"),extend:ZI},GI=a.c.vtkDebugMacro;function VI(e,t){t.classHierarchy.push("vtkImageSlice"),e.getActors=function(){return e},e.getImages=function(){return e},e.getIsOpaque=function(){if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.property||e.getProperty();var n=t.property.getOpacity()>=1;return n&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return!1},e.makeProperty=xI.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n,Q=t.mapper.getBounds();if(!Q||6!==Q.length)return Q;if(Q[0]>Q[1])return t.mapperBounds=Q.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),Q;if(!t.mapperBounds||!(n=[Q,t.mapperBounds],n[0].map((function(e,t){return n.map((function(e){return e[t]}))}))).reduce((function(e,t){return e&&t[0]===t[1]}),!0)||e.getMTime()>t.boundsMTime.getMTime()){GI("Recomputing bounds..."),t.mapperBounds=Q.map((function(e){return e}));var B=[];st.getCorners(Q,B),e.computeMatrix();var a=new Float64Array(16);Object(S.i)(a,t.matrix),B.forEach((function(e){return Object(y.q)(e,e,a)})),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map((function(e,t){return t%2==0?B.reduce((function(e,n){return e>n[t/2]?n[t/2]:e}),e):B.reduce((function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e}),e)})),t.boundsMTime.modified()}return t.bounds},e.getBoundsForSlice=function(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,B=t.mapper.getBoundsForSlice(n,Q);if(!B||6!==B.length)return B;if(B[0]>B[1])return B;var a=[];st.getCorners(B,a),e.computeMatrix();var s=new Float64Array(16);Object(S.i)(s,t.matrix),a.forEach((function(e){return Object(y.q)(e,e,s)}));var r=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];return r.map((function(e,t){return t%2==0?a.reduce((function(e,n){return e>n[t/2]?n[t/2]:e}),e):a.reduce((function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e}),e)}))},e.getMinXBound=function(){return e.getBounds(),t.bounds[0]},e.getMaxXBound=function(){return e.getBounds(),t.bounds[1]},e.getMinYBound=function(){return e.getBounds(),t.bounds[2]},e.getMaxYBound=function(){return e.getBounds(),t.bounds[3]},e.getMinZBound=function(){return e.getBounds(),t.bounds[4]},e.getMaxZBound=function(){return e.getBounds(),t.bounds[5]},e.getMTime=function(){var e=t.mtime;if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}if(null!==t.property){var Q=t.property.getMTime();e=Q>e?Q:e,null!==t.property.getRGBTransferFunction()&&(e=(Q=t.property.getRGBTransferFunction().getMTime())>e?Q:e)}return e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()}}var RI={mapper:null,property:null,bounds:[1,-1,1,-1,1,-1]};function LI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,RI,n),Gg.extend(e,t,n),t.boundsMTime={},a.c.obj(t.boundsMTime),a.c.set(e,t,["property"]),a.c.setGet(e,t,["mapper"]),a.c.getArray(e,t,["bounds"],6),VI(e,t)}var pI={newInstance:a.c.newInstance(LI,"vtkImageSlice"),extend:LI};function hI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function NI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hI(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var DI=$s.staticOffsetAPI,AI=$s.otherStaticMethods,EI=a.c.vtkWarningMacro,fI=TU.SlicingMode;function JI(e,t){function n(){var n;switch(t.slicingMode){case fI.X:n=[1,0,0];break;case fI.Y:n=[0,1,0];break;case fI.Z:n=[0,0,1];break;default:return void(t.closestIJKAxis={ijkMode:t.slicingMode,flip:!1})}var Q=[0,0,0],B=e.getInputData().getDirection(),a=[[B[0],B[1],B[2]],[B[3],B[4],B[5]],[B[6],B[7],B[8]]];Object(u.k)(a,n,Q);for(var s=0,r=-1,U=!1,F=0;F<Q.length;++F){var l=Math.abs(Q[F]);l>s&&(s=l,U=Q[F]<0,r=F)}if(1!==s){var o="IJKXYZ"[t.slicingMode],g="IJKXYZ"[r];EI("Unaccurate slicing along ".concat(o," axis which ")+"is not aligned with any IJK axis of the image data. "+"Using ".concat(g," axis  as a fallback (").concat(s,"% aligned). ")+"Necessitates slice reformat that is not yet implemented.  You can switch the slicing mode on your mapper to do IJK slicing instead.")}t.closestIJKAxis={ijkMode:r,flip:U}}function Q(n,Q){var B=e.getInputData(),a=B.getExtent(),s=[a[0],a[2],a[4]],r=e.getClosestIJKAxis().ijkMode,U=t.slice;r!==t.slicingMode&&(U=e.getSliceAtPosition(U)),s[r]+=U;var F=[0,0,0];B.indexToWorld(s,F),s[r]+=1;var l=[0,0,0];B.indexToWorld(s,l),l[0]-=F[0],l[1]-=F[1],l[2]-=F[2],Object(y.l)(l,l);var o=Ge.a.intersectWithLine(n,Q,F,l);if(o.intersection){var g=o.x,i=[0,0,0];return B.worldToIndex(g,i),{t:o.t,absoluteIJK:i}}return null}t.classHierarchy.push("vtkImageMapper"),e.getSliceAtPosition=function(n){var Q,B=e.getInputData();if(3===n.length)Q=n;else if(Number.isFinite(n)){var a=B.getBounds();switch(t.slicingMode){case fI.X:Q=[n,(a[3]+a[2])/2,(a[5]+a[4])/2];break;case fI.Y:Q=[(a[1]+a[0])/2,n,(a[5]+a[4])/2];break;case fI.Z:Q=[(a[1]+a[0])/2,(a[3]+a[2])/2,n]}}var s=[0,0,0];B.worldToIndex(Q,s);var r=B.getExtent(),U=0;switch(e.getClosestIJKAxis().ijkMode){case fI.I:U=Object(u.a)(s[0],r[0],r[1]),U=Math.round(U);break;case fI.J:U=Object(u.a)(s[1],r[2],r[3]),U=Math.round(U);break;case fI.K:U=Object(u.a)(s[2],r[4],r[5]),U=Math.round(U);break;default:return 0}return U},e.setSliceFromCamera=function(n){var Q=n.getFocalPoint();switch(t.slicingMode){case fI.I:case fI.J:case fI.K:var B=e.getSliceAtPosition(Q);e.setSlice(B);break;case fI.X:e.setSlice(Q[0]);break;case fI.Y:e.setSlice(Q[1]);break;case fI.Z:e.setSlice(Q[2])}},e.setXSlice=function(t){e.setSlicingMode(fI.X),e.setSlice(t)},e.setYSlice=function(t){e.setSlicingMode(fI.Y),e.setSlice(t)},e.setZSlice=function(t){e.setSlicingMode(fI.Z),e.setSlice(t)},e.setISlice=function(t){e.setSlicingMode(fI.I),e.setSlice(t)},e.setJSlice=function(t){e.setSlicingMode(fI.J),e.setSlice(t)},e.setKSlice=function(t){e.setSlicingMode(fI.K),e.setSlice(t)},e.getSlicingModeNormal=function(){var n=[0,0,0],Q=e.getInputData().getDirection(),B=[[Q[0],Q[1],Q[2]],[Q[3],Q[4],Q[5]],[Q[6],Q[7],Q[8]]];switch(t.slicingMode){case fI.X:n[0]=1;break;case fI.Y:n[1]=1;break;case fI.Z:n[2]=1;break;case fI.I:Object(u.k)(B,[1,0,0],n);break;case fI.J:Object(u.k)(B,[0,1,0],n);break;case fI.K:Object(u.k)(B,[0,0,1],n)}return n},e.setSlicingMode=function(Q){t.slicingMode!==Q&&(t.slicingMode=Q,e.getInputData()&&n(),e.modified())},e.getClosestIJKAxis=function(){return void 0!==t.closestIJKAxis&&t.closestIJKAxis.ijkMode!==fI.NONE||!e.getInputData()||n(),t.closestIJKAxis},e.getBounds=function(){var n=e.getInputData();if(!n)return Object(u.j)();if(!t.useCustomExtents)return n.getBounds();var Q=t.customDisplayExtent.slice(),B=e.getClosestIJKAxis().ijkMode,a=t.slice;switch(B!==t.slicingMode&&(a=e.getSliceAtPosition(t.slice)),B){case fI.I:Q[0]=a,Q[1]=a;break;case fI.J:Q[2]=a,Q[3]=a;break;case fI.K:Q[4]=a,Q[5]=a}return n.extentToBounds(Q)},e.getBoundsForSlice=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.slice,Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,B=e.getInputData();if(!B)return Object(u.j)();var a=B.getExtent(),s=e.getClosestIJKAxis(),r=s.ijkMode,U=n;switch(r!==t.slicingMode&&(U=e.getSliceAtPosition(n)),r){case fI.I:a[0]=U-Q,a[1]=U+Q;break;case fI.J:a[2]=U-Q,a[3]=U+Q;break;case fI.K:a[4]=U-Q,a[5]=U+Q}return B.extentToBounds(a)},e.getIsOpaque=function(){return!0},e.intersectWithLineForPointPicking=function(t,n){var B=Q(t,n);if(B){var a=e.getInputData().getExtent(),s=[Math.round(B.absoluteIJK[0]),Math.round(B.absoluteIJK[1]),Math.round(B.absoluteIJK[2])];return s[0]<a[0]||s[0]>a[1]||s[1]<a[2]||s[1]>a[3]||s[2]<a[4]||s[2]>a[5]?null:{t:B.t,ijk:s}}return null},e.intersectWithLineForCellPicking=function(t,n){var B=Q(t,n);if(B){var a=e.getInputData().getExtent(),s=B.absoluteIJK,r=[Math.floor(s[0]),Math.floor(s[1]),Math.floor(s[2])];if(r[0]<a[0]||r[0]>a[1]-1||r[1]<a[2]||r[1]>a[3]-1||r[2]<a[4]||r[2]>a[5]-1)return null;var U=[s[0]-r[0],s[1]-r[1],s[2]-r[2]];return{t:B.t,ijk:r,pCoords:U}}return null}}var vI={displayExtent:[0,0,0,0,0,0],customDisplayExtent:[0,0,0,0],useCustomExtents:!1,slice:0,slicingMode:fI.NONE,closestIJKAxis:{ijkMode:fI.NONE,flip:!1},renderToRectangle:!1,sliceAtFocalPoint:!1};function WI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vI,n),ks.extend(e,t,n),a.c.get(e,t,["slicingMode"]),a.c.setGet(e,t,["slice","closestIJKAxis","useCustomExtents","renderToRectangle","sliceAtFocalPoint"]),a.c.setGetArray(e,t,["customDisplayExtent"],4),$s.implementCoincidentTopologyMethods(e,t),JI(e,t)}var XI=NI(NI(NI({newInstance:a.c.newInstance(WI,"vtkImageMapper"),extend:WI},DI),AI),TU);var HI=function(e){qB(a,Qa.Component);var t,n,Q=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,Q=na(t);if(n){var B=na(this).constructor;e=Reflect.construct(Q,arguments,B)}else e=Q.apply(this,arguments);return ta(this,e)});function a(e){var t;return Object(Ze.a)(this,a),(t=Q.call(this,e)).lookupTable=Kd.newInstance(),t.piecewiseFunction=Ed.newInstance(),t.actor=pI.newInstance(),t.mapper=XI.newInstance(),t.actor.setMapper(t.mapper),t}return Object(xe.a)(a,[{key:"render",value:function(){var e=this;return Ba.a.createElement(Sd.Consumer,null,(function(t){return e.view||(t.renderer.addActor(e.actor),e.view=t),Ba.a.createElement(yd.Provider,{value:e},Ba.a.createElement(Gd.Provider,{value:e.mapper},Ba.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.view&&this.view.renderer.removeActor(this.actor),this.actor.delete(),this.actor=null,this.mapper.delete(),this.mapper=null}},{key:"update",value:function(e,t){var n,Q=e.actor,a=e.property,s=e.mapper,r=e.colorMapPreset,U=e.colorDataRange,F=e.iSlice,l=e.jSlice,o=e.kSlice,g=e.xSlice,i=e.ySlice,c=e.zSlice;if(!Q||t&&Q===t.actor||this.actor.set(Q),!a||t&&a===t.property||this.actor.getProperty().set(a),!s||t&&s===t.mapper||this.mapper.set(s),r&&(!t||r!==t.colorMapPreset)){var d,I=II.getPresetByName(r);this.lookupTable.applyColorMap(I),(d=this.lookupTable).setMappingRange.apply(d,Object(B.a)(U)),this.lookupTable.updateRange()}!U||t&&U===t.colorDataRange||("string"==typeof U?t?this.dataChanged():(this.lookupTable.setMappingRange(0,1),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:0,y:0,midpoint:.5,sharpness:0},{x:1,y:1,midpoint:.5,sharpness:0}])):((n=this.lookupTable).setMappingRange.apply(n,Object(B.a)(U)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:U[0],y:0,midpoint:.5,sharpness:0},{x:U[1],y:1,midpoint:.5,sharpness:0}]))),!F||t&&F===t.iSlice||this.mapper.setISlice(F),!l||t&&l===t.jSlice||this.mapper.setJSlice(l),!o||t&&o===t.kSlice||this.mapper.setKSlice(o),!g||t&&g===t.xSlice||this.mapper.setXSlice(g),!i||t&&i===t.ySlice||this.mapper.setYSlice(i),!c||t&&c===t.zSlice||this.mapper.setZSlice(c)}},{key:"dataChanged",value:function(){if("auto"===this.props.colorDataRange){this.mapper.update();var e,t=this.mapper.getInputData(),n=t&&t.getPointData().getScalars(),Q=n&&n.getRange();Q&&((e=this.lookupTable).setMappingRange.apply(e,Object(B.a)(Q)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:Q[0],y:0,midpoint:.5,sharpness:0},{x:Q[1],y:1,midpoint:.5,sharpness:0}])),this.view&&this.view.renderView()}}}]),a}();HI.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:"auto"},HI.propTypes={id:sa.a.string,mapper:sa.a.object,actor:sa.a.object,property:sa.a.object,colorMapPreset:sa.a.string,colorDataRange:sa.a.oneOfType([sa.a.arrayOf(sa.a.number),sa.a.string]),iSlice:sa.a.number,jSlice:sa.a.number,kSlice:sa.a.number,xSlice:sa.a.number,ySlice:sa.a.number,zSlice:sa.a.number,children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var kI=HI,TI='<svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient x1="100%" y1="50%" x2="0%" y2="50%" id="a"><stop stop-color="#FFF" offset="0%"/><stop stop-color="#FFF" offset="49.416%"/><stop offset="49.677%"/><stop offset="100%"/></linearGradient></defs><circle cx="90" cy="90" r="80" stroke-width="10" stroke="#000" fill="url(#a)" fill-rule="evenodd"/></svg>',MI='<svg viewBox="0 0 196 196" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M67.77 157.024a86.095 86.095 0 01-2.3 9.306c-.977 3.206-2.44 6.116-4.392 8.73-1.952 2.614-4.531 4.758-7.738 6.43-3.206 1.674-7.284 2.51-12.233 2.51-6.343 0-11.501-1.55-15.474-4.653-3.974-3.102-6.518-7.301-7.633-12.599l16.102-5.228c.279 1.882 1.01 3.485 2.196 4.81 1.185 1.324 2.753 1.986 4.705 1.986 3.067 0 5.262-1.08 6.587-3.24 1.324-2.162 2.265-4.88 2.823-8.156l8.574-48.933h17.565l-8.783 49.037zm58.029-31.053c-1.394-1.883-3.137-3.311-5.228-4.287-2.091-.976-4.426-1.464-7.005-1.464-1.185 0-2.44.157-3.764.47a10.815 10.815 0 00-3.608 1.569 9.806 9.806 0 00-2.718 2.77c-.732 1.116-1.098 2.475-1.098 4.078 0 2.091.819 3.747 2.457 4.967 1.638 1.22 3.921 2.352 6.849 3.398 3.206 1.115 6.064 2.352 8.573 3.712 2.51 1.359 4.636 2.91 6.378 4.652 1.743 1.743 3.067 3.712 3.974 5.908.906 2.196 1.359 4.688 1.359 7.476 0 4.461-.924 8.26-2.77 11.397-1.848 3.136-4.236 5.698-7.163 7.685-2.928 1.986-6.204 3.433-9.829 4.339-3.624.906-7.214 1.359-10.769 1.359-2.649 0-5.298-.244-7.946-.732a42.608 42.608 0 01-7.633-2.143 31.681 31.681 0 01-6.796-3.608c-2.092-1.463-3.869-3.136-5.333-5.018l12.86-10.456c1.465 2.23 3.625 4.043 6.483 5.437 2.858 1.394 5.751 2.091 8.679 2.091 1.533 0 3.014-.157 4.443-.47 1.43-.314 2.701-.837 3.817-1.569a8.267 8.267 0 002.666-2.823c.662-1.15.993-2.527.993-4.13 0-2.579-1.045-4.618-3.136-6.117-2.092-1.498-4.88-2.84-8.365-4.025a58.492 58.492 0 01-6.849-2.823c-2.126-1.046-3.973-2.335-5.541-3.869-1.569-1.533-2.823-3.363-3.764-5.489-.941-2.126-1.412-4.688-1.412-7.685 0-3.764.784-7.162 2.353-10.194a23.324 23.324 0 016.43-7.738c2.719-2.126 5.89-3.764 9.515-4.914 3.624-1.15 7.493-1.725 11.606-1.725 2.16 0 4.356.21 6.587.627a35.853 35.853 0 016.43 1.83 28.502 28.502 0 015.699 2.98c1.742 1.185 3.206 2.544 4.39 4.078L125.8 125.97z" fill="#8A8B8A"/><rect fill="#1C4678" transform="rotate(45 169.749 159.749)" x="152.249" y="142.249" width="35" height="35" rx="17.5"/><path fill="#1C4678" d="M7.775 11l20.483 86.069h22.53l34.24-71.408H63.841L42.91 70.03 28.259 11zM88.663 25.344h50.476l-8.093 16.562-17.246-.049-9.652 54.62H85.609l9.572-54.535H80.99zM141.366 25.344l16.072.066-4.414 24.987h2.388l16.856-25.053h20.975l-22.442 33.403 13.203 54.063h-20.94l-10.652-44.43h-2.296l-5.125 28.135h-21.024l9.763-55.043z"/><path fill="#8A8B8A" d="M3 11h3.182l20.864 85.944h-3.187zM58.102 25.344h2.788L43.747 61.155l-.955-3.866zM88.608 44.469h2.883l-9.157 52.096H79.4zM126.785 44.469h2.924l-9.186 52.046H117.6zM166.38 25.344h3.594l-12.582 18.854 1.316-7.545zM150.902 74.75l8.917 37.613h-3.311l-7.075-29.073z"/></g></svg>',YI='<svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg"><g stroke="#000" stroke-width="10" fill="none" fill-rule="evenodd" stroke-linecap="square"><path d="M10 90h160M10 133.488V47M170 133.488V47M90 133.488V47"/></g></svg>',wI=function(){function e(e,t){for(var n=0;n<t.length;n++){var Q=t[n];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(e,Q.key,Q)}}return function(t,n,Q){return n&&e(t.prototype,n),Q&&e(t,Q),t}}(),OI=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return wI(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,n=Array(t>1?t-1:0),Q=1;Q<t;Q++)n[Q-1]=arguments[Q];var B=!0,a=!1,s=void 0;try{for(var r,U=this.__listeners[e][Symbol.iterator]();!(B=(r=U.next()).done);B=!0){var F=r.value;F.apply(void 0,n)}}catch(e){a=!0,s=e}finally{try{!B&&U.return&&U.return()}finally{if(a)throw s}}return this}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function Q(){n.off(e,Q),t.apply(void 0,arguments)}))}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}(),zI=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],Q=!0,B=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(Q=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);Q=!0);}catch(e){B=!0,a=e}finally{try{!Q&&r.return&&r.return()}finally{if(B)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},PI=function(){function e(e,t){for(var n=0;n<t.length;n++){var Q=t[n];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(e,Q.key,Q)}}return function(t,n,Q){return n&&e(t.prototype,n),Q&&e(t,Q),t}}();function KI(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var jI=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._messageId=1,n._messages=new Map,n._worker=e,n._worker.onmessage=n._onMessage.bind(n),n._id=Math.ceil(1e7*Math.random()),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,OI),PI(t,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return 0===this._messages.size}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],B=arguments[3];return new Promise((function(a,s){var r=n._messageId++;n._messages.set(r,[a,s,B]),n._worker.postMessage([r,t,e],Q||[])}))}},{key:"postMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],Q=arguments[2];return new Promise((function(B,a){var s=t._messageId++;t._messages.set(s,[B,a,Q]),t._worker.postMessage([s,e],n||[])}))}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),Q=1;Q<t;Q++)n[Q-1]=arguments[Q];this._worker.postMessage({eventName:e,args:n})}},{key:"_onMessage",value:function(e){var n;if(!Array.isArray(e.data)&&e.data.eventName)return(n=function e(t,n,Q){null===t&&(t=Function.prototype);var B=Object.getOwnPropertyDescriptor(t,n);if(void 0===B){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,Q)}if("value"in B)return B.value;var s=B.get;return void 0!==s?s.call(Q):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(n,[this,e.data.eventName].concat(KI(e.data.args)));var Q,B=(Q=e.data,Array.isArray(Q)?Q:Array.from(Q)),a=B[0],s=B.slice(1);if(1===a)this._onEvent.apply(this,KI(s));else{if(0!==a)throw new Error("Wrong message type '"+a+"'");this._onResult.apply(this,KI(s))}}},{key:"_onResult",value:function(e,t,n){var Q=this._messages.get(e),B=zI(Q,2),a=B[0],s=B[1];return this._messages.delete(e),1===t?a(n):s(n)}},{key:"_onEvent",value:function(e,t,n){var Q=this._messages.get(e),B=zI(Q,3)[2];B&&B(t,n)}}]),t}();var _I,qI,$I,eu,tu=(_I="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCWZ1bmN0aW9uIGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZuLCBiYXNlZGlyLCBtb2R1bGUpIHsKCQlyZXR1cm4gbW9kdWxlID0gewoJCQlwYXRoOiBiYXNlZGlyLAoJCQlleHBvcnRzOiB7fSwKCQkJcmVxdWlyZTogZnVuY3Rpb24gKHBhdGgsIGJhc2UpIHsKCQkJCXJldHVybiBjb21tb25qc1JlcXVpcmUocGF0aCwgKGJhc2UgPT09IHVuZGVmaW5lZCB8fCBiYXNlID09PSBudWxsKSA/IG1vZHVsZS5wYXRoIDogYmFzZSk7CgkJCX0KCQl9LCBmbihtb2R1bGUsIG1vZHVsZS5leHBvcnRzKSwgbW9kdWxlLmV4cG9ydHM7Cgl9CgoJZnVuY3Rpb24gY29tbW9uanNSZWdpc3RlciAocGF0aCwgbG9hZGVyKSB7CgkJRFlOQU1JQ19SRVFVSVJFX0xPQURFUlNbcGF0aF0gPSBsb2FkZXI7Cgl9CgoJY29uc3QgRFlOQU1JQ19SRVFVSVJFX0xPQURFUlMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoJY29uc3QgRFlOQU1JQ19SRVFVSVJFX0NBQ0hFID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCWNvbnN0IERFRkFVTFRfUEFSRU5UX01PRFVMRSA9IHsKCQlpZDogJzwnICsgJ3JvbGx1cD4nLCBleHBvcnRzOiB7fSwgcGFyZW50OiB1bmRlZmluZWQsIGZpbGVuYW1lOiBudWxsLCBsb2FkZWQ6IGZhbHNlLCBjaGlsZHJlbjogW10sIHBhdGhzOiBbXQoJfTsKCWNvbnN0IENIRUNLRURfRVhURU5TSU9OUyA9IFsnJywgJy5qcycsICcuanNvbiddOwoKCWZ1bmN0aW9uIG5vcm1hbGl6ZSAocGF0aCkgewoJCXBhdGggPSBwYXRoLnJlcGxhY2UoL1xcL2csICcvJyk7CgkJY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcvJyk7CgkJY29uc3Qgc2xhc2hlZCA9IHBhcnRzWzBdID09PSAnJzsKCQlmb3IgKGxldCBpID0gMTsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChwYXJ0c1tpXSA9PT0gJy4nIHx8IHBhcnRzW2ldID09PSAnJykgewoJCQkJcGFydHMuc3BsaWNlKGktLSwgMSk7CgkJCX0KCQl9CgkJZm9yIChsZXQgaSA9IDE7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykgewoJCQlpZiAocGFydHNbaV0gIT09ICcuLicpIGNvbnRpbnVlOwoJCQlpZiAoaSA+IDAgJiYgcGFydHNbaSAtIDFdICE9PSAnLi4nICYmIHBhcnRzW2kgLSAxXSAhPT0gJy4nKSB7CgkJCQlwYXJ0cy5zcGxpY2UoLS1pLCAyKTsKCQkJCWktLTsKCQkJfQoJCX0KCQlwYXRoID0gcGFydHMuam9pbignLycpOwoJCWlmIChzbGFzaGVkICYmIHBhdGhbMF0gIT09ICcvJykKCQkgIHBhdGggPSAnLycgKyBwYXRoOwoJCWVsc2UgaWYgKHBhdGgubGVuZ3RoID09PSAwKQoJCSAgcGF0aCA9ICcuJzsKCQlyZXR1cm4gcGF0aDsKCX0KCglmdW5jdGlvbiBqb2luICgpIHsKCQlpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkKCQkgIHJldHVybiAnLic7CgkJbGV0IGpvaW5lZDsKCQlmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7ICsraSkgewoJCSAgbGV0IGFyZyA9IGFyZ3VtZW50c1tpXTsKCQkgIGlmIChhcmcubGVuZ3RoID4gMCkgewoJCQlpZiAoam9pbmVkID09PSB1bmRlZmluZWQpCgkJCSAgam9pbmVkID0gYXJnOwoJCQllbHNlCgkJCSAgam9pbmVkICs9ICcvJyArIGFyZzsKCQkgIH0KCQl9CgkJaWYgKGpvaW5lZCA9PT0gdW5kZWZpbmVkKQoJCSAgcmV0dXJuICcuJzsKCgkJcmV0dXJuIGpvaW5lZDsKCX0KCglmdW5jdGlvbiBpc1Bvc3NpYmxlTm9kZU1vZHVsZXNQYXRoIChtb2R1bGVQYXRoKSB7CgkJbGV0IGMwID0gbW9kdWxlUGF0aFswXTsKCQlpZiAoYzAgPT09ICcvJyB8fCBjMCA9PT0gJ1xcJykgcmV0dXJuIGZhbHNlOwoJCWxldCBjMSA9IG1vZHVsZVBhdGhbMV0sIGMyID0gbW9kdWxlUGF0aFsyXTsKCQlpZiAoKGMwID09PSAnLicgJiYgKCFjMSB8fCBjMSA9PT0gJy8nIHx8IGMxID09PSAnXFwnKSkgfHwKCQkJKGMwID09PSAnLicgJiYgYzEgPT09ICcuJyAmJiAoIWMyIHx8IGMyID09PSAnLycgfHwgYzIgPT09ICdcXCcpKSkgcmV0dXJuIGZhbHNlOwoJCWlmIChjMSA9PT0gJzonICYmIChjMiA9PT0gJy8nIHx8IGMyID09PSAnXFwnKSkKCQkJcmV0dXJuIGZhbHNlOwoJCXJldHVybiB0cnVlOwoJfQoKCWZ1bmN0aW9uIGRpcm5hbWUgKHBhdGgpIHsKCSAgaWYgKHBhdGgubGVuZ3RoID09PSAwKQoJICAgIHJldHVybiAnLic7CgoJICBsZXQgaSA9IHBhdGgubGVuZ3RoIC0gMTsKCSAgd2hpbGUgKGkgPiAwKSB7CgkgICAgY29uc3QgYyA9IHBhdGguY2hhckNvZGVBdChpKTsKCSAgICBpZiAoKGMgPT09IDQ3IHx8IGMgPT09IDkyKSAmJiBpICE9PSBwYXRoLmxlbmd0aCAtIDEpCgkgICAgICBicmVhazsKCSAgICBpLS07CgkgIH0KCgkgIGlmIChpID4gMCkKCSAgICByZXR1cm4gcGF0aC5zdWJzdHIoMCwgaSk7CgoJICBpZiAocGF0aC5jaGFydENvZGVBdCgwKSA9PT0gNDcgfHwgcGF0aC5jaGFydENvZGVBdCgwKSA9PT0gOTIpCgkgICAgcmV0dXJuIHBhdGguY2hhckF0KDApOwoKCSAgcmV0dXJuICcuJzsKCX0KCglmdW5jdGlvbiBjb21tb25qc1JlcXVpcmUgKHBhdGgsIG9yaWdpbmFsTW9kdWxlRGlyKSB7CgkJY29uc3Qgc2hvdWxkVHJ5Tm9kZU1vZHVsZXMgPSBpc1Bvc3NpYmxlTm9kZU1vZHVsZXNQYXRoKHBhdGgpOwoJCXBhdGggPSBub3JtYWxpemUocGF0aCk7CgkJbGV0IHJlbFBhdGg7CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFzaG91bGRUcnlOb2RlTW9kdWxlcykgewoJCQkJcmVsUGF0aCA9IG9yaWdpbmFsTW9kdWxlRGlyID8gbm9ybWFsaXplKG9yaWdpbmFsTW9kdWxlRGlyICsgJy8nICsgcGF0aCkgOiBwYXRoOwoJCQl9IGVsc2UgaWYgKG9yaWdpbmFsTW9kdWxlRGlyKSB7CgkJCQlyZWxQYXRoID0gbm9ybWFsaXplKG9yaWdpbmFsTW9kdWxlRGlyICsgJy9ub2RlX21vZHVsZXMvJyArIHBhdGgpOwoJCQl9IGVsc2UgewoJCQkJcmVsUGF0aCA9IG5vcm1hbGl6ZShqb2luKCdub2RlX21vZHVsZXMnLCBwYXRoKSk7CgkJCX0KCQkJZm9yIChsZXQgZXh0ZW5zaW9uSW5kZXggPSAwOyBleHRlbnNpb25JbmRleCA8IENIRUNLRURfRVhURU5TSU9OUy5sZW5ndGg7IGV4dGVuc2lvbkluZGV4KyspIHsKCQkJCWNvbnN0IHJlc29sdmVkUGF0aCA9IHJlbFBhdGggKyBDSEVDS0VEX0VYVEVOU0lPTlNbZXh0ZW5zaW9uSW5kZXhdOwoJCQkJbGV0IGNhY2hlZE1vZHVsZSA9IERZTkFNSUNfUkVRVUlSRV9DQUNIRVtyZXNvbHZlZFBhdGhdOwoJCQkJaWYgKGNhY2hlZE1vZHVsZSkgcmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzOwoJCQkJY29uc3QgbG9hZGVyID0gRFlOQU1JQ19SRVFVSVJFX0xPQURFUlNbcmVzb2x2ZWRQYXRoXTsKCQkJCWlmIChsb2FkZXIpIHsKCQkJCQlEWU5BTUlDX1JFUVVJUkVfQ0FDSEVbcmVzb2x2ZWRQYXRoXSA9IGNhY2hlZE1vZHVsZSA9IHsKCQkJCQkJaWQ6IHJlc29sdmVkUGF0aCwKCQkJCQkJZmlsZW5hbWU6IHJlc29sdmVkUGF0aCwKCQkJCQkJcGF0aDogZGlybmFtZShyZXNvbHZlZFBhdGgpLAoJCQkJCQlleHBvcnRzOiB7fSwKCQkJCQkJcGFyZW50OiBERUZBVUxUX1BBUkVOVF9NT0RVTEUsCgkJCQkJCWxvYWRlZDogZmFsc2UsCgkJCQkJCWNoaWxkcmVuOiBbXSwKCQkJCQkJcGF0aHM6IFtdLAoJCQkJCQlyZXF1aXJlOiBmdW5jdGlvbiAocGF0aCwgYmFzZSkgewoJCQkJCQkgIHJldHVybiBjb21tb25qc1JlcXVpcmUocGF0aCwgKGJhc2UgPT09IHVuZGVmaW5lZCB8fCBiYXNlID09PSBudWxsKSA/IGNhY2hlZE1vZHVsZS5wYXRoIDogYmFzZSk7CgkJCQkJCX0KCQkJCQl9OwoJCQkJCXRyeSB7CgkJCQkJCWxvYWRlci5jYWxsKGNvbW1vbmpzR2xvYmFsLCBjYWNoZWRNb2R1bGUsIGNhY2hlZE1vZHVsZS5leHBvcnRzKTsKCQkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJCQlkZWxldGUgRFlOQU1JQ19SRVFVSVJFX0NBQ0hFW3Jlc29sdmVkUGF0aF07CgkJCQkJCXRocm93IGVycm9yOwoJCQkJCX0KCQkJCQljYWNoZWRNb2R1bGUubG9hZGVkID0gdHJ1ZTsKCQkJCQlyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7CgkJCQl9CQl9CgkJCWlmICghc2hvdWxkVHJ5Tm9kZU1vZHVsZXMpIGJyZWFrOwoJCQljb25zdCBuZXh0RGlyID0gbm9ybWFsaXplKG9yaWdpbmFsTW9kdWxlRGlyICsgJy8uLicpOwoJCQlpZiAobmV4dERpciA9PT0gb3JpZ2luYWxNb2R1bGVEaXIpIGJyZWFrOwoJCQlvcmlnaW5hbE1vZHVsZURpciA9IG5leHREaXI7CgkJfQoJCXJldHVybiByZXF1aXJlKHBhdGgpOwoJfQoKCWNvbW1vbmpzUmVxdWlyZS5jYWNoZSA9IERZTkFNSUNfUkVRVUlSRV9DQUNIRTsKCgkvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KCgl2YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsOwoJdmFyIFJlZmxlY3RBcHBseSA9IFIgJiYgdHlwZW9mIFIuYXBwbHkgPT09ICdmdW5jdGlvbicKCSAgPyBSLmFwcGx5CgkgIDogZnVuY3Rpb24gUmVmbGVjdEFwcGx5KHRhcmdldCwgcmVjZWl2ZXIsIGFyZ3MpIHsKCSAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7CgkgIH07CgoJdmFyIFJlZmxlY3RPd25LZXlzOwoJaWYgKFIgJiYgdHlwZW9mIFIub3duS2V5cyA9PT0gJ2Z1bmN0aW9uJykgewoJICBSZWZsZWN0T3duS2V5cyA9IFIub3duS2V5czsKCX0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewoJICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkgewoJICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpCgkgICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7CgkgIH07Cgl9IGVsc2UgewoJICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkgewoJICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpOwoJICB9OwoJfQoKCWZ1bmN0aW9uIFByb2Nlc3NFbWl0V2FybmluZyh3YXJuaW5nKSB7CgkgIGlmIChjb25zb2xlICYmIGNvbnNvbGUud2FybikgY29uc29sZS53YXJuKHdhcm5pbmcpOwoJfQoKCXZhciBOdW1iZXJJc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBOdW1iZXJJc05hTih2YWx1ZSkgewoJICByZXR1cm4gdmFsdWUgIT09IHZhbHVlOwoJfTsKCglmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7CgkgIEV2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyk7Cgl9Cgl2YXIgZXZlbnRzID0gRXZlbnRFbWl0dGVyOwoJdmFyIG9uY2VfMSA9IG9uY2U7CgoJLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54CglFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyOwoKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDsKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDsKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDsKCgkvLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmUKCS8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuCgl2YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwOwoKCWZ1bmN0aW9uIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpIHsKCSAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAibGlzdGVuZXIiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTsKCSAgfQoJfQoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudEVtaXR0ZXIsICdkZWZhdWx0TWF4TGlzdGVuZXJzJywgewoJICBlbnVtZXJhYmxlOiB0cnVlLAoJICBnZXQ6IGZ1bmN0aW9uKCkgewoJICAgIHJldHVybiBkZWZhdWx0TWF4TGlzdGVuZXJzOwoJICB9LAoJICBzZXQ6IGZ1bmN0aW9uKGFyZykgewoJICAgIGlmICh0eXBlb2YgYXJnICE9PSAnbnVtYmVyJyB8fCBhcmcgPCAwIHx8IE51bWJlcklzTmFOKGFyZykpIHsKCSAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgImRlZmF1bHRNYXhMaXN0ZW5lcnMiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpOwoJICAgIH0KCSAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnOwoJICB9Cgl9KTsKCglFdmVudEVtaXR0ZXIuaW5pdCA9IGZ1bmN0aW9uKCkgewoKCSAgaWYgKHRoaXMuX2V2ZW50cyA9PT0gdW5kZWZpbmVkIHx8CgkgICAgICB0aGlzLl9ldmVudHMgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKSB7CgkgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCSAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7CgkgIH0KCgkgIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7Cgl9OwoKCS8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93cwoJLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldE1heExpc3RlbmVycyhuKSB7CgkgIGlmICh0eXBlb2YgbiAhPT0gJ251bWJlcicgfHwgbiA8IDAgfHwgTnVtYmVySXNOYU4obikpIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mICJuIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7CgkgIH0KCSAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCWZ1bmN0aW9uIF9nZXRNYXhMaXN0ZW5lcnModGhhdCkgewoJICBpZiAodGhhdC5fbWF4TGlzdGVuZXJzID09PSB1bmRlZmluZWQpCgkgICAgcmV0dXJuIEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzOwoJICByZXR1cm4gdGhhdC5fbWF4TGlzdGVuZXJzOwoJfQoKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkgewoJICByZXR1cm4gX2dldE1heExpc3RlbmVycyh0aGlzKTsKCX07CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7CgkgIHZhciBhcmdzID0gW107CgkgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTsKCSAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7CgoJICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzOwoJICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpCgkgICAgZG9FcnJvciA9IChkb0Vycm9yICYmIGV2ZW50cy5lcnJvciA9PT0gdW5kZWZpbmVkKTsKCSAgZWxzZSBpZiAoIWRvRXJyb3IpCgkgICAgcmV0dXJuIGZhbHNlOwoKCSAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LgoJICBpZiAoZG9FcnJvcikgewoJICAgIHZhciBlcjsKCSAgICBpZiAoYXJncy5sZW5ndGggPiAwKQoJICAgICAgZXIgPSBhcmdzWzBdOwoJICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7CgkgICAgICAvLyBOb3RlOiBUaGUgY29tbWVudHMgb24gdGhlIGB0aHJvd2AgbGluZXMgYXJlIGludGVudGlvbmFsLCB0aGV5IHNob3cKCSAgICAgIC8vIHVwIGluIE5vZGUncyBvdXRwdXQgaWYgdGhpcyByZXN1bHRzIGluIGFuIHVuaGFuZGxlZCBleGNlcHRpb24uCgkgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnQKCSAgICB9CgkgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlcgoJICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpOwoJICAgIGVyci5jb250ZXh0ID0gZXI7CgkgICAgdGhyb3cgZXJyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudAoJICB9CgoJICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTsKCgkgIGlmIChoYW5kbGVyID09PSB1bmRlZmluZWQpCgkgICAgcmV0dXJuIGZhbHNlOwoKCSAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7CgkgICAgUmVmbGVjdEFwcGx5KGhhbmRsZXIsIHRoaXMsIGFyZ3MpOwoJICB9IGVsc2UgewoJICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDsKCSAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pOwoJICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpCgkgICAgICBSZWZsZWN0QXBwbHkobGlzdGVuZXJzW2ldLCB0aGlzLCBhcmdzKTsKCSAgfQoKCSAgcmV0dXJuIHRydWU7Cgl9OwoKCWZ1bmN0aW9uIF9hZGRMaXN0ZW5lcih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBwcmVwZW5kKSB7CgkgIHZhciBtOwoJICB2YXIgZXZlbnRzOwoJICB2YXIgZXhpc3Rpbmc7CgoJICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTsKCgkgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzOwoJICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHsKCSAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgkgICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7CgkgIH0gZWxzZSB7CgkgICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gIm5ld0xpc3RlbmVyIiEgQmVmb3JlCgkgICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgIm5ld0xpc3RlbmVyIi4KCSAgICBpZiAoZXZlbnRzLm5ld0xpc3RlbmVyICE9PSB1bmRlZmluZWQpIHsKCSAgICAgIHRhcmdldC5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsCgkgICAgICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA/IGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpOwoKCSAgICAgIC8vIFJlLWFzc2lnbiBgZXZlbnRzYCBiZWNhdXNlIGEgbmV3TGlzdGVuZXIgaGFuZGxlciBjb3VsZCBoYXZlIGNhdXNlZCB0aGUKCSAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3QKCSAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzOwoJICAgIH0KCSAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTsKCSAgfQoKCSAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHsKCSAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC4KCSAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyOwoJICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDsKCSAgfSBlbHNlIHsKCSAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7CgkgICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS4KCSAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID0KCSAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07CgkgICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuCgkgICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7CgkgICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTsKCSAgICB9IGVsc2UgewoJICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7CgkgICAgfQoKCSAgICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVhawoJICAgIG0gPSBfZ2V0TWF4TGlzdGVuZXJzKHRhcmdldCk7CgkgICAgaWYgKG0gPiAwICYmIGV4aXN0aW5nLmxlbmd0aCA+IG0gJiYgIWV4aXN0aW5nLndhcm5lZCkgewoJICAgICAgZXhpc3Rpbmcud2FybmVkID0gdHJ1ZTsKCSAgICAgIC8vIE5vIGVycm9yIGNvZGUgZm9yIHRoaXMgc2luY2UgaXQgaXMgYSBXYXJuaW5nCgkgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXgKCSAgICAgIHZhciB3ID0gbmV3IEVycm9yKCdQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuICcgKwoJICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5sZW5ndGggKyAnICcgKyBTdHJpbmcodHlwZSkgKyAnIGxpc3RlbmVycyAnICsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byAnICsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgJ2luY3JlYXNlIGxpbWl0Jyk7CgkgICAgICB3Lm5hbWUgPSAnTWF4TGlzdGVuZXJzRXhjZWVkZWRXYXJuaW5nJzsKCSAgICAgIHcuZW1pdHRlciA9IHRhcmdldDsKCSAgICAgIHcudHlwZSA9IHR5cGU7CgkgICAgICB3LmNvdW50ID0gZXhpc3RpbmcubGVuZ3RoOwoJICAgICAgUHJvY2Vzc0VtaXRXYXJuaW5nKHcpOwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIHRhcmdldDsKCX0KCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKCSAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpOwoJfTsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9CgkgICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CgkgICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTsKCSAgICB9OwoKCWZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkgewoJICBpZiAoIXRoaXMuZmlyZWQpIHsKCSAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTsKCSAgICB0aGlzLmZpcmVkID0gdHJ1ZTsKCSAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkKCSAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpOwoJICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpOwoJICB9Cgl9CgoJZnVuY3Rpb24gX29uY2VXcmFwKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIpIHsKCSAgdmFyIHN0YXRlID0geyBmaXJlZDogZmFsc2UsIHdyYXBGbjogdW5kZWZpbmVkLCB0YXJnZXQ6IHRhcmdldCwgdHlwZTogdHlwZSwgbGlzdGVuZXI6IGxpc3RlbmVyIH07CgkgIHZhciB3cmFwcGVkID0gb25jZVdyYXBwZXIuYmluZChzdGF0ZSk7CgkgIHdyYXBwZWQubGlzdGVuZXIgPSBsaXN0ZW5lcjsKCSAgc3RhdGUud3JhcEZuID0gd3JhcHBlZDsKCSAgcmV0dXJuIHdyYXBwZWQ7Cgl9CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSh0eXBlLCBsaXN0ZW5lcikgewoJICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTsKCSAgdGhpcy5vbih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9CgkgICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewoJICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7CgkgICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTsKCSAgICAgIHJldHVybiB0aGlzOwoJICAgIH07CgoJLy8gRW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmIGFuZCBvbmx5IGlmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZC4KCUV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPQoJICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CgkgICAgICB2YXIgbGlzdCwgZXZlbnRzLCBwb3NpdGlvbiwgaSwgb3JpZ2luYWxMaXN0ZW5lcjsKCgkgICAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTsKCgkgICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7CgkgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpCgkgICAgICAgIHJldHVybiB0aGlzOwoKCSAgICAgIGxpc3QgPSBldmVudHNbdHlwZV07CgkgICAgICBpZiAobGlzdCA9PT0gdW5kZWZpbmVkKQoJICAgICAgICByZXR1cm4gdGhpczsKCgkgICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHsKCSAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApCgkgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTsKCSAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKQoJICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7CgkgICAgICAgIHBvc2l0aW9uID0gLTE7CgoJICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CgkgICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7CgkgICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjsKCSAgICAgICAgICAgIHBvc2l0aW9uID0gaTsKCSAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoKCSAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkKCSAgICAgICAgICByZXR1cm4gdGhpczsKCgkgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMCkKCSAgICAgICAgICBsaXN0LnNoaWZ0KCk7CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7CgkgICAgICAgIH0KCgkgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkKCSAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdOwoKCSAgICAgICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKQoJICAgICAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBvcmlnaW5hbExpc3RlbmVyIHx8IGxpc3RlbmVyKTsKCSAgICAgIH0KCgkgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9CgkgICAgZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKHR5cGUpIHsKCSAgICAgIHZhciBsaXN0ZW5lcnMsIGV2ZW50cywgaTsKCgkgICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7CgkgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpCgkgICAgICAgIHJldHVybiB0aGlzOwoKCSAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXQKCSAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkgewoJICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgewoJICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgkgICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwOwoJICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7CgkgICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApCgkgICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoJICAgICAgICAgIGVsc2UKCSAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICB9CgoJICAgICAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzCgkgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgewoJICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGV2ZW50cyk7CgkgICAgICAgIHZhciBrZXk7CgkgICAgICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7CgkgICAgICAgICAga2V5ID0ga2V5c1tpXTsKCSAgICAgICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTsKCSAgICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpOwoJICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoJICAgICAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7CgkgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgfQoKCSAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTsKCgkgICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykgewoJICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7CgkgICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7CgkgICAgICAgIC8vIExJRk8gb3JkZXIKCSAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CgkgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pOwoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCglmdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7CgkgIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50czsKCgkgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkKCSAgICByZXR1cm4gW107CgoJICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTsKCSAgaWYgKGV2bGlzdGVuZXIgPT09IHVuZGVmaW5lZCkKCSAgICByZXR1cm4gW107CgoJICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpCgkgICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdOwoKCSAgcmV0dXJuIHVud3JhcCA/CgkgICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7Cgl9CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnModHlwZSkgewoJICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCB0cnVlKTsKCX07CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnMgPSBmdW5jdGlvbiByYXdMaXN0ZW5lcnModHlwZSkgewoJICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7Cgl9OwoKCUV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkgewoJICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykgewoJICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7CgkgIH0gZWxzZSB7CgkgICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTsKCSAgfQoJfTsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBsaXN0ZW5lckNvdW50OwoJZnVuY3Rpb24gbGlzdGVuZXJDb3VudCh0eXBlKSB7CgkgIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7CgoJICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIHsKCSAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTsKCgkgICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7CgkgICAgICByZXR1cm4gMTsKCSAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkgewoJICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoOwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIDA7Cgl9CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHsKCSAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTsKCX07CgoJZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHsKCSAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7CgkgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKQoJICAgIGNvcHlbaV0gPSBhcnJbaV07CgkgIHJldHVybiBjb3B5OwoJfQoKCWZ1bmN0aW9uIHNwbGljZU9uZShsaXN0LCBpbmRleCkgewoJICBmb3IgKDsgaW5kZXggKyAxIDwgbGlzdC5sZW5ndGg7IGluZGV4KyspCgkgICAgbGlzdFtpbmRleF0gPSBsaXN0W2luZGV4ICsgMV07CgkgIGxpc3QucG9wKCk7Cgl9CgoJZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycikgewoJICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOwoJICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkgewoJICAgIHJldFtpXSA9IGFycltpXS5saXN0ZW5lciB8fCBhcnJbaV07CgkgIH0KCSAgcmV0dXJuIHJldDsKCX0KCglmdW5jdGlvbiBvbmNlKGVtaXR0ZXIsIG5hbWUpIHsKCSAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCSAgICBmdW5jdGlvbiBldmVudExpc3RlbmVyKCkgewoJICAgICAgaWYgKGVycm9yTGlzdGVuZXIgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpOwoJICAgICAgfQoJICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpOwoJICAgIH0gICAgdmFyIGVycm9yTGlzdGVuZXI7CgoJICAgIC8vIEFkZGluZyBhbiBlcnJvciBsaXN0ZW5lciBpcyBub3Qgb3B0aW9uYWwgYmVjYXVzZQoJICAgIC8vIGlmIGFuIGVycm9yIGlzIHRocm93biBvbiBhbiBldmVudCBlbWl0dGVyIHdlIGNhbm5vdAoJICAgIC8vIGd1YXJhbnRlZSB0aGF0IHRoZSBhY3R1YWwgZXZlbnQgd2UgYXJlIHdhaXRpbmcgd2lsbAoJICAgIC8vIGJlIGZpcmVkLiBUaGUgcmVzdWx0IGNvdWxkIGJlIGEgc2lsZW50IHdheSB0byBjcmVhdGUKCSAgICAvLyBtZW1vcnkgb3IgZmlsZSBkZXNjcmlwdG9yIGxlYWtzLCB3aGljaCBpcyBzb21ldGhpbmcKCSAgICAvLyB3ZSBzaG91bGQgYXZvaWQuCgkgICAgaWYgKG5hbWUgIT09ICdlcnJvcicpIHsKCSAgICAgIGVycm9yTGlzdGVuZXIgPSBmdW5jdGlvbiBlcnJvckxpc3RlbmVyKGVycikgewoJICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKG5hbWUsIGV2ZW50TGlzdGVuZXIpOwoJICAgICAgICByZWplY3QoZXJyKTsKCSAgICAgIH07CgoJICAgICAgZW1pdHRlci5vbmNlKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpOwoJICAgIH0KCgkgICAgZW1pdHRlci5vbmNlKG5hbWUsIGV2ZW50TGlzdGVuZXIpOwoJICB9KTsKCX0KCWV2ZW50cy5vbmNlID0gb25jZV8xOwoKCXZhciBzdHJlYW1Ccm93c2VyID0gZXZlbnRzLkV2ZW50RW1pdHRlcjsKCgl2YXIgYnl0ZUxlbmd0aF8xID0gYnl0ZUxlbmd0aDsKCXZhciB0b0J5dGVBcnJheV8xID0gdG9CeXRlQXJyYXk7Cgl2YXIgZnJvbUJ5dGVBcnJheV8xID0gZnJvbUJ5dGVBcnJheTsKCgl2YXIgbG9va3VwID0gW107Cgl2YXIgcmV2TG9va3VwID0gW107Cgl2YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5OwoKCXZhciBjb2RlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nOwoJZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsKCSAgbG9va3VwW2ldID0gY29kZVtpXTsKCSAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpOwoJfQoKCS8vIFN1cHBvcnQgZGVjb2RpbmcgVVJMLXNhZmUgYmFzZTY0IHN0cmluZ3MsIGFzIE5vZGUuanMgZG9lcy4KCS8vIFNlZTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmFzZTY0I1VSTF9hcHBsaWNhdGlvbnMKCXJldkxvb2t1cFsnLScuY2hhckNvZGVBdCgwKV0gPSA2MjsKCXJldkxvb2t1cFsnXycuY2hhckNvZGVBdCgwKV0gPSA2MzsKCglmdW5jdGlvbiBnZXRMZW5zIChiNjQpIHsKCSAgdmFyIGxlbiA9IGI2NC5sZW5ndGg7CgoJICBpZiAobGVuICUgNCA+IDApIHsKCSAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKQoJICB9CgoJICAvLyBUcmltIG9mZiBleHRyYSBieXRlcyBhZnRlciBwbGFjZWhvbGRlciBieXRlcyBhcmUgZm91bmQKCSAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vYmVhdGdhbW1pdC9iYXNlNjQtanMvaXNzdWVzLzQyCgkgIHZhciB2YWxpZExlbiA9IGI2NC5pbmRleE9mKCc9Jyk7CgkgIGlmICh2YWxpZExlbiA9PT0gLTEpIHZhbGlkTGVuID0gbGVuOwoKCSAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IHZhbGlkTGVuID09PSBsZW4KCSAgICA/IDAKCSAgICA6IDQgLSAodmFsaWRMZW4gJSA0KTsKCgkgIHJldHVybiBbdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbl0KCX0KCgkvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGEKCWZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkgewoJICB2YXIgbGVucyA9IGdldExlbnMoYjY0KTsKCSAgdmFyIHZhbGlkTGVuID0gbGVuc1swXTsKCSAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV07CgkgIHJldHVybiAoKHZhbGlkTGVuICsgcGxhY2VIb2xkZXJzTGVuKSAqIDMgLyA0KSAtIHBsYWNlSG9sZGVyc0xlbgoJfQoKCWZ1bmN0aW9uIF9ieXRlTGVuZ3RoIChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHsKCSAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuCgl9CgoJZnVuY3Rpb24gdG9CeXRlQXJyYXkgKGI2NCkgewoJICB2YXIgdG1wOwoJICB2YXIgbGVucyA9IGdldExlbnMoYjY0KTsKCSAgdmFyIHZhbGlkTGVuID0gbGVuc1swXTsKCSAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV07CgoJICB2YXIgYXJyID0gbmV3IEFycihfYnl0ZUxlbmd0aChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pKTsKCgkgIHZhciBjdXJCeXRlID0gMDsKCgkgIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnMKCSAgdmFyIGxlbiA9IHBsYWNlSG9sZGVyc0xlbiA+IDAKCSAgICA/IHZhbGlkTGVuIC0gNAoJICAgIDogdmFsaWRMZW47CgoJICB2YXIgaTsKCSAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7CgkgICAgdG1wID0KCSAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8CgkgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwKCSAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8CgkgICAgICByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXTsKCSAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRjsKCSAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gOCkgJiAweEZGOwoJICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRjsKCSAgfQoKCSAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMikgewoJICAgIHRtcCA9CgkgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8CgkgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNCk7CgkgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGOwoJICB9CgoJICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAxKSB7CgkgICAgdG1wID0KCSAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8CgkgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfAoJICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpOwoJICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkY7CgkgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGOwoJICB9CgoJICByZXR1cm4gYXJyCgl9CgoJZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHsKCSAgcmV0dXJuIGxvb2t1cFtudW0gPj4gMTggJiAweDNGXSArCgkgICAgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsKCSAgICBsb29rdXBbbnVtID4+IDYgJiAweDNGXSArCgkgICAgbG9va3VwW251bSAmIDB4M0ZdCgl9CgoJZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7CgkgIHZhciB0bXA7CgkgIHZhciBvdXRwdXQgPSBbXTsKCSAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHsKCSAgICB0bXAgPQoJICAgICAgKCh1aW50OFtpXSA8PCAxNikgJiAweEZGMDAwMCkgKwoJICAgICAgKCh1aW50OFtpICsgMV0gPDwgOCkgJiAweEZGMDApICsKCSAgICAgICh1aW50OFtpICsgMl0gJiAweEZGKTsKCSAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSk7CgkgIH0KCSAgcmV0dXJuIG91dHB1dC5qb2luKCcnKQoJfQoKCWZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7CgkgIHZhciB0bXA7CgkgIHZhciBsZW4gPSB1aW50OC5sZW5ndGg7CgkgIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMzsgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXMKCSAgdmFyIHBhcnRzID0gW107CgkgIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzOyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDMKCgkgIC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXIKCSAgZm9yICh2YXIgaSA9IDAsIGxlbjIgPSBsZW4gLSBleHRyYUJ5dGVzOyBpIDwgbGVuMjsgaSArPSBtYXhDaHVua0xlbmd0aCkgewoJICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsoCgkgICAgICB1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW4yID8gbGVuMiA6IChpICsgbWF4Q2h1bmtMZW5ndGgpCgkgICAgKSk7CgkgIH0KCgkgIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXMKCSAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHsKCSAgICB0bXAgPSB1aW50OFtsZW4gLSAxXTsKCSAgICBwYXJ0cy5wdXNoKAoJICAgICAgbG9va3VwW3RtcCA+PiAyXSArCgkgICAgICBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M0ZdICsKCSAgICAgICc9PScKCSAgICApOwoJICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHsKCSAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyB1aW50OFtsZW4gLSAxXTsKCSAgICBwYXJ0cy5wdXNoKAoJICAgICAgbG9va3VwW3RtcCA+PiAxMF0gKwoJICAgICAgbG9va3VwWyh0bXAgPj4gNCkgJiAweDNGXSArCgkgICAgICBsb29rdXBbKHRtcCA8PCAyKSAmIDB4M0ZdICsKCSAgICAgICc9JwoJICAgICk7CgkgIH0KCgkgIHJldHVybiBwYXJ0cy5qb2luKCcnKQoJfQoKCXZhciBiYXNlNjRKcyA9IHsKCQlieXRlTGVuZ3RoOiBieXRlTGVuZ3RoXzEsCgkJdG9CeXRlQXJyYXk6IHRvQnl0ZUFycmF5XzEsCgkJZnJvbUJ5dGVBcnJheTogZnJvbUJ5dGVBcnJheV8xCgl9OwoKCS8qISBpZWVlNzU0LiBCU0QtMy1DbGF1c2UgTGljZW5zZS4gRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnL29wZW5zb3VyY2U+ICovCgl2YXIgcmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7CgkgIHZhciBlLCBtOwoJICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxOwoJICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMTsKCSAgdmFyIGVCaWFzID0gZU1heCA+PiAxOwoJICB2YXIgbkJpdHMgPSAtNzsKCSAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMDsKCSAgdmFyIGQgPSBpc0xFID8gLTEgOiAxOwoJICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXTsKCgkgIGkgKz0gZDsKCgkgIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpOwoJICBzID4+PSAoLW5CaXRzKTsKCSAgbkJpdHMgKz0gZUxlbjsKCSAgZm9yICg7IG5CaXRzID4gMDsgZSA9IChlICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fQoKCSAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSk7CgkgIGUgPj49ICgtbkJpdHMpOwoJICBuQml0cyArPSBtTGVuOwoJICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gKG0gKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9CgoJICBpZiAoZSA9PT0gMCkgewoJICAgIGUgPSAxIC0gZUJpYXM7CgkgIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkgewoJICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KQoJICB9IGVsc2UgewoJICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbik7CgkgICAgZSA9IGUgLSBlQmlhczsKCSAgfQoJICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKQoJfTsKCgl2YXIgd3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHsKCSAgdmFyIGUsIG0sIGM7CgkgIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDE7CgkgIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxOwoJICB2YXIgZUJpYXMgPSBlTWF4ID4+IDE7CgkgIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMCk7CgkgIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSk7CgkgIHZhciBkID0gaXNMRSA/IDEgOiAtMTsKCSAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDA7CgoJICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKTsKCgkgIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7CgkgICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwOwoJICAgIGUgPSBlTWF4OwoJICB9IGVsc2UgewoJICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKTsKCSAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7CgkgICAgICBlLS07CgkgICAgICBjICo9IDI7CgkgICAgfQoJICAgIGlmIChlICsgZUJpYXMgPj0gMSkgewoJICAgICAgdmFsdWUgKz0gcnQgLyBjOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcyk7CgkgICAgfQoJICAgIGlmICh2YWx1ZSAqIGMgPj0gMikgewoJICAgICAgZSsrOwoJICAgICAgYyAvPSAyOwoJICAgIH0KCgkgICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7CgkgICAgICBtID0gMDsKCSAgICAgIGUgPSBlTWF4OwoJICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHsKCSAgICAgIG0gPSAoKHZhbHVlICogYykgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pOwoJICAgICAgZSA9IGUgKyBlQmlhczsKCSAgICB9IGVsc2UgewoJICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pOwoJICAgICAgZSA9IDA7CgkgICAgfQoJICB9CgoJICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fQoKCSAgZSA9IChlIDw8IG1MZW4pIHwgbTsKCSAgZUxlbiArPSBtTGVuOwoJICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9CgoJICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjg7Cgl9OwoKCXZhciBpZWVlNzU0ID0gewoJCXJlYWQ6IHJlYWQsCgkJd3JpdGU6IHdyaXRlCgl9OwoKCS8qIQoJICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuCgkgKgoJICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZz4KCSAqIEBsaWNlbnNlICBNSVQKCSAqLwoKCXZhciBidWZmZXIgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CgoKCgljb25zdCBjdXN0b21JbnNwZWN0U3ltYm9sID0KCSAgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFN5bWJvbFsnZm9yJ10gPT09ICdmdW5jdGlvbicpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZG90LW5vdGF0aW9uCgkgICAgPyBTeW1ib2xbJ2ZvciddKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZG90LW5vdGF0aW9uCgkgICAgOiBudWxsOwoKCWV4cG9ydHMuQnVmZmVyID0gQnVmZmVyOwoJZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlcjsKCWV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MDsKCgljb25zdCBLX01BWF9MRU5HVEggPSAweDdmZmZmZmZmOwoJZXhwb3J0cy5rTWF4TGVuZ3RoID0gS19NQVhfTEVOR1RIOwoKCS8qKgoJICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDoKCSAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpCgkgKiAgID09PSBmYWxzZSAgIFByaW50IHdhcm5pbmcgYW5kIHJlY29tbWVuZCB1c2luZyBgYnVmZmVyYCB2NC54IHdoaWNoIGhhcyBhbiBPYmplY3QKCSAqICAgICAgICAgICAgICAgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpCgkgKgoJICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLAoJICogT3BlcmEgMTEuNissIGlPUyA0LjIrLgoJICoKCSAqIFdlIHJlcG9ydCB0aGF0IHRoZSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGlmIHRoZSBhcmUgbm90IHN1YmNsYXNzYWJsZQoJICogdXNpbmcgX19wcm90b19fLiBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YAoJICogKFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4KS4gSUUgMTAgbGFja3Mgc3VwcG9ydAoJICogZm9yIF9fcHJvdG9fXyBhbmQgaGFzIGEgYnVnZ3kgdHlwZWQgYXJyYXkgaW1wbGVtZW50YXRpb24uCgkgKi8KCUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gdHlwZWRBcnJheVN1cHBvcnQoKTsKCglpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJgoJICAgIHR5cGVvZiBjb25zb2xlLmVycm9yID09PSAnZnVuY3Rpb24nKSB7CgkgIGNvbnNvbGUuZXJyb3IoCgkgICAgJ1RoaXMgYnJvd3NlciBsYWNrcyB0eXBlZCBhcnJheSAoVWludDhBcnJheSkgc3VwcG9ydCB3aGljaCBpcyByZXF1aXJlZCBieSAnICsKCSAgICAnYGJ1ZmZlcmAgdjUueC4gVXNlIGBidWZmZXJgIHY0LnggaWYgeW91IHJlcXVpcmUgb2xkIGJyb3dzZXIgc3VwcG9ydC4nCgkgICk7Cgl9CgoJZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkgewoJICAvLyBDYW4gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWQ/CgkgIHRyeSB7CgkgICAgY29uc3QgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSk7CgkgICAgY29uc3QgcHJvdG8gPSB7IGZvbzogZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfSB9OwoJICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihwcm90bywgVWludDhBcnJheS5wcm90b3R5cGUpOwoJICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihhcnIsIHByb3RvKTsKCSAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MgoJICB9IGNhdGNoIChlKSB7CgkgICAgcmV0dXJuIGZhbHNlCgkgIH0KCX0KCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLnByb3RvdHlwZSwgJ3BhcmVudCcsIHsKCSAgZW51bWVyYWJsZTogdHJ1ZSwKCSAgZ2V0OiBmdW5jdGlvbiAoKSB7CgkgICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGhpcykpIHJldHVybiB1bmRlZmluZWQKCSAgICByZXR1cm4gdGhpcy5idWZmZXIKCSAgfQoJfSk7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlci5wcm90b3R5cGUsICdvZmZzZXQnLCB7CgkgIGVudW1lcmFibGU6IHRydWUsCgkgIGdldDogZnVuY3Rpb24gKCkgewoJICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKHRoaXMpKSByZXR1cm4gdW5kZWZpbmVkCgkgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldAoJICB9Cgl9KTsKCglmdW5jdGlvbiBjcmVhdGVCdWZmZXIgKGxlbmd0aCkgewoJICBpZiAobGVuZ3RoID4gS19NQVhfTEVOR1RIKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSAiJyArIGxlbmd0aCArICciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAic2l6ZSInKQoJICB9CgkgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlCgkgIGNvbnN0IGJ1ZiA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7CgkgIE9iamVjdC5zZXRQcm90b3R5cGVPZihidWYsIEJ1ZmZlci5wcm90b3R5cGUpOwoJICByZXR1cm4gYnVmCgl9CgoJLyoqCgkgKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXIKCSAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2YKCSAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHMKCSAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0CgkgKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LgoJICoKCSAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC4KCSAqLwoKCWZ1bmN0aW9uIEJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgLy8gQ29tbW9uIGNhc2UuCgkgIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewoJICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gJ3N0cmluZycpIHsKCSAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCgkgICAgICAgICdUaGUgInN0cmluZyIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIHN0cmluZy4gUmVjZWl2ZWQgdHlwZSBudW1iZXInCgkgICAgICApCgkgICAgfQoJICAgIHJldHVybiBhbGxvY1Vuc2FmZShhcmcpCgkgIH0KCSAgcmV0dXJuIGZyb20oYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCgl9CgoJQnVmZmVyLnBvb2xTaXplID0gODE5MjsgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvbgoKCWZ1bmN0aW9uIGZyb20gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKCSAgICByZXR1cm4gZnJvbVN0cmluZyh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCkKCSAgfQoKCSAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkpIHsKCSAgICByZXR1cm4gZnJvbUFycmF5Vmlldyh2YWx1ZSkKCSAgfQoKCSAgaWYgKHZhbHVlID09IG51bGwpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAoJICAgICAgJ1RoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksICcgKwoJICAgICAgJ29yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlICcgKyAodHlwZW9mIHZhbHVlKQoJICAgICkKCSAgfQoKCSAgaWYgKGlzSW5zdGFuY2UodmFsdWUsIEFycmF5QnVmZmVyKSB8fAoJICAgICAgKHZhbHVlICYmIGlzSW5zdGFuY2UodmFsdWUuYnVmZmVyLCBBcnJheUJ1ZmZlcikpKSB7CgkgICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKQoJICB9CgoJICBpZiAodHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJgoJICAgICAgKGlzSW5zdGFuY2UodmFsdWUsIFNoYXJlZEFycmF5QnVmZmVyKSB8fAoJICAgICAgKHZhbHVlICYmIGlzSW5zdGFuY2UodmFsdWUuYnVmZmVyLCBTaGFyZWRBcnJheUJ1ZmZlcikpKSkgewoJICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKCSAgfQoKCSAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAoJICAgICAgJ1RoZSAidmFsdWUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlIG51bWJlcicKCSAgICApCgkgIH0KCgkgIGNvbnN0IHZhbHVlT2YgPSB2YWx1ZS52YWx1ZU9mICYmIHZhbHVlLnZhbHVlT2YoKTsKCSAgaWYgKHZhbHVlT2YgIT0gbnVsbCAmJiB2YWx1ZU9mICE9PSB2YWx1ZSkgewoJICAgIHJldHVybiBCdWZmZXIuZnJvbSh2YWx1ZU9mLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCgkgIH0KCgkgIGNvbnN0IGIgPSBmcm9tT2JqZWN0KHZhbHVlKTsKCSAgaWYgKGIpIHJldHVybiBiCgoJICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvUHJpbWl0aXZlICE9IG51bGwgJiYKCSAgICAgIHR5cGVvZiB2YWx1ZVtTeW1ib2wudG9QcmltaXRpdmVdID09PSAnZnVuY3Rpb24nKSB7CgkgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHZhbHVlW1N5bWJvbC50b1ByaW1pdGl2ZV0oJ3N0cmluZycpLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCgkgIH0KCgkgIHRocm93IG5ldyBUeXBlRXJyb3IoCgkgICAgJ1RoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksICcgKwoJICAgICdvciBBcnJheS1saWtlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSAnICsgKHR5cGVvZiB2YWx1ZSkKCSAgKQoJfQoKCS8qKgoJICogRnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG8gQnVmZmVyKGFyZywgZW5jb2RpbmcpIGJ1dCB0aHJvd3MgYSBUeXBlRXJyb3IKCSAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLgoJICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKQoJICogQnVmZmVyLmZyb20oYXJyYXkpCgkgKiBCdWZmZXIuZnJvbShidWZmZXIpCgkgKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSkKCSAqKi8KCUJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgcmV0dXJuIGZyb20odmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKCX07CgoJLy8gTm90ZTogQ2hhbmdlIHByb3RvdHlwZSAqYWZ0ZXIqIEJ1ZmZlci5mcm9tIGlzIGRlZmluZWQgdG8gd29ya2Fyb3VuZCBDaHJvbWUgYnVnOgoJLy8gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC8xNDgKCU9iamVjdC5zZXRQcm90b3R5cGVPZihCdWZmZXIucHJvdG90eXBlLCBVaW50OEFycmF5LnByb3RvdHlwZSk7CglPYmplY3Quc2V0UHJvdG90eXBlT2YoQnVmZmVyLCBVaW50OEFycmF5KTsKCglmdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7CgkgIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlcicpCgkgIH0gZWxzZSBpZiAoc2l6ZSA8IDApIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlICInICsgc2l6ZSArICciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAic2l6ZSInKQoJICB9Cgl9CgoJZnVuY3Rpb24gYWxsb2MgKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7CgkgIGFzc2VydFNpemUoc2l6ZSk7CgkgIGlmIChzaXplIDw9IDApIHsKCSAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHNpemUpCgkgIH0KCSAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkgewoJICAgIC8vIE9ubHkgcGF5IGF0dGVudGlvbiB0byBlbmNvZGluZyBpZiBpdCdzIGEgc3RyaW5nLiBUaGlzCgkgICAgLy8gcHJldmVudHMgYWNjaWRlbnRhbGx5IHNlbmRpbmcgaW4gYSBudW1iZXIgdGhhdCB3b3VsZAoJICAgIC8vIGJlIGludGVycHJldGVkIGFzIGEgc3RhcnQgb2Zmc2V0LgoJICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnCgkgICAgICA/IGNyZWF0ZUJ1ZmZlcihzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKQoJICAgICAgOiBjcmVhdGVCdWZmZXIoc2l6ZSkuZmlsbChmaWxsKQoJICB9CgkgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSkKCX0KCgkvKioKCSAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS4KCSAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSkKCSAqKi8KCUJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykgewoJICByZXR1cm4gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpCgl9OwoKCWZ1bmN0aW9uIGFsbG9jVW5zYWZlIChzaXplKSB7CgkgIGFzc2VydFNpemUoc2l6ZSk7CgkgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApCgl9CgoJLyoqCgkgKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLgoJICogKi8KCUJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7CgkgIHJldHVybiBhbGxvY1Vuc2FmZShzaXplKQoJfTsKCS8qKgoJICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuCgkgKi8KCUJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkgewoJICByZXR1cm4gYWxsb2NVbnNhZmUoc2l6ZSkKCX07CgoJZnVuY3Rpb24gZnJvbVN0cmluZyAoc3RyaW5nLCBlbmNvZGluZykgewoJICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHsKCSAgICBlbmNvZGluZyA9ICd1dGY4JzsKCSAgfQoKCSAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpCgkgIH0KCgkgIGNvbnN0IGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwOwoJICBsZXQgYnVmID0gY3JlYXRlQnVmZmVyKGxlbmd0aCk7CgoJICBjb25zdCBhY3R1YWwgPSBidWYud3JpdGUoc3RyaW5nLCBlbmNvZGluZyk7CgoJICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHsKCSAgICAvLyBXcml0aW5nIGEgaGV4IHN0cmluZywgZm9yIGV4YW1wbGUsIHRoYXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIHdpbGwKCSAgICAvLyBjYXVzZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBmaXJzdCBpbnZhbGlkIGNoYXJhY3RlciB0byBiZSBpZ25vcmVkLiAoZS5nLgoJICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKQoJICAgIGJ1ZiA9IGJ1Zi5zbGljZSgwLCBhY3R1YWwpOwoJICB9CgoJICByZXR1cm4gYnVmCgl9CgoJZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAoYXJyYXkpIHsKCSAgY29uc3QgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwOwoJICBjb25zdCBidWYgPSBjcmVhdGVCdWZmZXIobGVuZ3RoKTsKCSAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgewoJICAgIGJ1ZltpXSA9IGFycmF5W2ldICYgMjU1OwoJICB9CgkgIHJldHVybiBidWYKCX0KCglmdW5jdGlvbiBmcm9tQXJyYXlWaWV3IChhcnJheVZpZXcpIHsKCSAgaWYgKGlzSW5zdGFuY2UoYXJyYXlWaWV3LCBVaW50OEFycmF5KSkgewoJICAgIGNvbnN0IGNvcHkgPSBuZXcgVWludDhBcnJheShhcnJheVZpZXcpOwoJICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIoY29weS5idWZmZXIsIGNvcHkuYnl0ZU9mZnNldCwgY29weS5ieXRlTGVuZ3RoKQoJICB9CgkgIHJldHVybiBmcm9tQXJyYXlMaWtlKGFycmF5VmlldykKCX0KCglmdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHsKCSAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJvZmZzZXQiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpCgkgIH0KCgkgIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignImxlbmd0aCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJykKCSAgfQoKCSAgbGV0IGJ1ZjsKCSAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkgewoJICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5KTsKCSAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkgewoJICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KTsKCSAgfSBlbHNlIHsKCSAgICBidWYgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTsKCSAgfQoKCSAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UKCSAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGJ1ZiwgQnVmZmVyLnByb3RvdHlwZSk7CgoJICByZXR1cm4gYnVmCgl9CgoJZnVuY3Rpb24gZnJvbU9iamVjdCAob2JqKSB7CgkgIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkgewoJICAgIGNvbnN0IGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwOwoJICAgIGNvbnN0IGJ1ZiA9IGNyZWF0ZUJ1ZmZlcihsZW4pOwoKCSAgICBpZiAoYnVmLmxlbmd0aCA9PT0gMCkgewoJICAgICAgcmV0dXJuIGJ1ZgoJICAgIH0KCgkgICAgb2JqLmNvcHkoYnVmLCAwLCAwLCBsZW4pOwoJICAgIHJldHVybiBidWYKCSAgfQoKCSAgaWYgKG9iai5sZW5ndGggIT09IHVuZGVmaW5lZCkgewoJICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgbnVtYmVySXNOYU4ob2JqLmxlbmd0aCkpIHsKCSAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIoMCkKCSAgICB9CgkgICAgcmV0dXJuIGZyb21BcnJheUxpa2Uob2JqKQoJICB9CgoJICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIEFycmF5LmlzQXJyYXkob2JqLmRhdGEpKSB7CgkgICAgcmV0dXJuIGZyb21BcnJheUxpa2Uob2JqLmRhdGEpCgkgIH0KCX0KCglmdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHsKCSAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwgS19NQVhfTEVOR1RIYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuCgkgIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKQoJICBpZiAobGVuZ3RoID49IEtfTUFYX0xFTkdUSCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgKwoJICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBLX01BWF9MRU5HVEgudG9TdHJpbmcoMTYpICsgJyBieXRlcycpCgkgIH0KCSAgcmV0dXJuIGxlbmd0aCB8IDAKCX0KCglmdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHsKCSAgaWYgKCtsZW5ndGggIT0gbGVuZ3RoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxCgkgICAgbGVuZ3RoID0gMDsKCSAgfQoJICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpCgl9CgoJQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHsKCSAgcmV0dXJuIGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlciA9PT0gdHJ1ZSAmJgoJICAgIGIgIT09IEJ1ZmZlci5wcm90b3R5cGUgLy8gc28gQnVmZmVyLmlzQnVmZmVyKEJ1ZmZlci5wcm90b3R5cGUpIHdpbGwgYmUgZmFsc2UKCX07CgoJQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7CgkgIGlmIChpc0luc3RhbmNlKGEsIFVpbnQ4QXJyYXkpKSBhID0gQnVmZmVyLmZyb20oYSwgYS5vZmZzZXQsIGEuYnl0ZUxlbmd0aCk7CgkgIGlmIChpc0luc3RhbmNlKGIsIFVpbnQ4QXJyYXkpKSBiID0gQnVmZmVyLmZyb20oYiwgYi5vZmZzZXQsIGIuYnl0ZUxlbmd0aCk7CgkgIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAoJICAgICAgJ1RoZSAiYnVmMSIsICJidWYyIiBhcmd1bWVudHMgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheScKCSAgICApCgkgIH0KCgkgIGlmIChhID09PSBiKSByZXR1cm4gMAoKCSAgbGV0IHggPSBhLmxlbmd0aDsKCSAgbGV0IHkgPSBiLmxlbmd0aDsKCgkgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7CgkgICAgaWYgKGFbaV0gIT09IGJbaV0pIHsKCSAgICAgIHggPSBhW2ldOwoJICAgICAgeSA9IGJbaV07CgkgICAgICBicmVhawoJICAgIH0KCSAgfQoKCSAgaWYgKHggPCB5KSByZXR1cm4gLTEKCSAgaWYgKHkgPCB4KSByZXR1cm4gMQoJICByZXR1cm4gMAoJfTsKCglCdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7CgkgIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7CgkgICAgY2FzZSAnaGV4JzoKCSAgICBjYXNlICd1dGY4JzoKCSAgICBjYXNlICd1dGYtOCc6CgkgICAgY2FzZSAnYXNjaWknOgoJICAgIGNhc2UgJ2xhdGluMSc6CgkgICAgY2FzZSAnYmluYXJ5JzoKCSAgICBjYXNlICdiYXNlNjQnOgoJICAgIGNhc2UgJ3VjczInOgoJICAgIGNhc2UgJ3Vjcy0yJzoKCSAgICBjYXNlICd1dGYxNmxlJzoKCSAgICBjYXNlICd1dGYtMTZsZSc6CgkgICAgICByZXR1cm4gdHJ1ZQoJICAgIGRlZmF1bHQ6CgkgICAgICByZXR1cm4gZmFsc2UKCSAgfQoJfTsKCglCdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHsKCSAgaWYgKCFBcnJheS5pc0FycmF5KGxpc3QpKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpCgkgIH0KCgkgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkgewoJICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMCkKCSAgfQoKCSAgbGV0IGk7CgkgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkgewoJICAgIGxlbmd0aCA9IDA7CgkgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHsKCSAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aDsKCSAgICB9CgkgIH0KCgkgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpOwoJICBsZXQgcG9zID0gMDsKCSAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHsKCSAgICBsZXQgYnVmID0gbGlzdFtpXTsKCSAgICBpZiAoaXNJbnN0YW5jZShidWYsIFVpbnQ4QXJyYXkpKSB7CgkgICAgICBpZiAocG9zICsgYnVmLmxlbmd0aCA+IGJ1ZmZlci5sZW5ndGgpIHsKCSAgICAgICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgYnVmID0gQnVmZmVyLmZyb20oYnVmKTsKCSAgICAgICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoCgkgICAgICAgICAgYnVmZmVyLAoJICAgICAgICAgIGJ1ZiwKCSAgICAgICAgICBwb3MKCSAgICAgICAgKTsKCSAgICAgIH0KCSAgICB9IGVsc2UgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgewoJICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpCgkgICAgfSBlbHNlIHsKCSAgICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKTsKCSAgICB9CgkgICAgcG9zICs9IGJ1Zi5sZW5ndGg7CgkgIH0KCSAgcmV0dXJuIGJ1ZmZlcgoJfTsKCglmdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7CgkgIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkgewoJICAgIHJldHVybiBzdHJpbmcubGVuZ3RoCgkgIH0KCSAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IGlzSW5zdGFuY2Uoc3RyaW5nLCBBcnJheUJ1ZmZlcikpIHsKCSAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGgKCSAgfQoJICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAoJICAgICAgJ1RoZSAic3RyaW5nIiBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBvciBBcnJheUJ1ZmZlci4gJyArCgkgICAgICAnUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIHN0cmluZwoJICAgICkKCSAgfQoKCSAgY29uc3QgbGVuID0gc3RyaW5nLmxlbmd0aDsKCSAgY29uc3QgbXVzdE1hdGNoID0gKGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSA9PT0gdHJ1ZSk7CgkgIGlmICghbXVzdE1hdGNoICYmIGxlbiA9PT0gMCkgcmV0dXJuIDAKCgkgIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvbgoJICBsZXQgbG93ZXJlZENhc2UgPSBmYWxzZTsKCSAgZm9yICg7OykgewoJICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKCSAgICAgIGNhc2UgJ2FzY2lpJzoKCSAgICAgIGNhc2UgJ2xhdGluMSc6CgkgICAgICBjYXNlICdiaW5hcnknOgoJICAgICAgICByZXR1cm4gbGVuCgkgICAgICBjYXNlICd1dGY4JzoKCSAgICAgIGNhc2UgJ3V0Zi04JzoKCSAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoCgkgICAgICBjYXNlICd1Y3MyJzoKCSAgICAgIGNhc2UgJ3Vjcy0yJzoKCSAgICAgIGNhc2UgJ3V0ZjE2bGUnOgoJICAgICAgY2FzZSAndXRmLTE2bGUnOgoJICAgICAgICByZXR1cm4gbGVuICogMgoJICAgICAgY2FzZSAnaGV4JzoKCSAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMQoJICAgICAgY2FzZSAnYmFzZTY0JzoKCSAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGgKCSAgICAgIGRlZmF1bHQ6CgkgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgewoJICAgICAgICAgIHJldHVybiBtdXN0TWF0Y2ggPyAtMSA6IHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4CgkgICAgICAgIH0KCSAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKTsKCSAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlOwoJICAgIH0KCSAgfQoJfQoJQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoOwoKCWZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHsKCSAgbGV0IGxvd2VyZWRDYXNlID0gZmFsc2U7CgoJICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0ICJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5CgkgIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuCgoJICAvLyBUaGlzIGJlaGF2ZXMgbmVpdGhlciBsaWtlIFN0cmluZyBub3IgVWludDhBcnJheSBpbiB0aGF0IHdlIHNldCBzdGFydC9lbmQKCSAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLgoJICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLAoJICAvLyBTZWN0aW9uIDEzLjMuMy43IFJ1bnRpbWUgU2VtYW50aWNzOiBLZXllZEJpbmRpbmdJbml0aWFsaXphdGlvbi4KCSAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7CgkgICAgc3RhcnQgPSAwOwoJICB9CgkgIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyCgkgIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuCgkgIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7CgkgICAgcmV0dXJuICcnCgkgIH0KCgkgIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgewoJICAgIGVuZCA9IHRoaXMubGVuZ3RoOwoJICB9CgoJICBpZiAoZW5kIDw9IDApIHsKCSAgICByZXR1cm4gJycKCSAgfQoKCSAgLy8gRm9yY2UgY29lcmNpb24gdG8gdWludDMyLiBUaGlzIHdpbGwgYWxzbyBjb2VyY2UgZmFsc2V5L05hTiB2YWx1ZXMgdG8gMC4KCSAgZW5kID4+Pj0gMDsKCSAgc3RhcnQgPj4+PSAwOwoKCSAgaWYgKGVuZCA8PSBzdGFydCkgewoJICAgIHJldHVybiAnJwoJICB9CgoJICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4JzsKCgkgIHdoaWxlICh0cnVlKSB7CgkgICAgc3dpdGNoIChlbmNvZGluZykgewoJICAgICAgY2FzZSAnaGV4JzoKCSAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgoJICAgICAgY2FzZSAndXRmOCc6CgkgICAgICBjYXNlICd1dGYtOCc6CgkgICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCgkgICAgICBjYXNlICdhc2NpaSc6CgkgICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgoJICAgICAgY2FzZSAnbGF0aW4xJzoKCSAgICAgIGNhc2UgJ2JpbmFyeSc6CgkgICAgICAgIHJldHVybiBsYXRpbjFTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKCSAgICAgIGNhc2UgJ2Jhc2U2NCc6CgkgICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKCSAgICAgIGNhc2UgJ3VjczInOgoJICAgICAgY2FzZSAndWNzLTInOgoJICAgICAgY2FzZSAndXRmMTZsZSc6CgkgICAgICBjYXNlICd1dGYtMTZsZSc6CgkgICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCgkgICAgICBkZWZhdWx0OgoJICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKCSAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKTsKCSAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlOwoJICAgIH0KCSAgfQoJfQoKCS8vIFRoaXMgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCAoYW5kIHRoZSBgaXMtYnVmZmVyYCBucG0gcGFja2FnZSkKCS8vIHRvIGRldGVjdCBhIEJ1ZmZlciBpbnN0YW5jZS4gSXQncyBub3QgcG9zc2libGUgdG8gdXNlIGBpbnN0YW5jZW9mIEJ1ZmZlcmAKCS8vIHJlbGlhYmx5IGluIGEgYnJvd3NlcmlmeSBjb250ZXh0IGJlY2F1c2UgdGhlcmUgY291bGQgYmUgbXVsdGlwbGUgZGlmZmVyZW50CgkvLyBjb3BpZXMgb2YgdGhlICdidWZmZXInIHBhY2thZ2UgaW4gdXNlLiBUaGlzIG1ldGhvZCB3b3JrcyBldmVuIGZvciBCdWZmZXIKCS8vIGluc3RhbmNlcyB0aGF0IHdlcmUgY3JlYXRlZCBmcm9tIGFub3RoZXIgY29weSBvZiB0aGUgYGJ1ZmZlcmAgcGFja2FnZS4KCS8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzE1NAoJQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlOwoKCWZ1bmN0aW9uIHN3YXAgKGIsIG4sIG0pIHsKCSAgY29uc3QgaSA9IGJbbl07CgkgIGJbbl0gPSBiW21dOwoJICBiW21dID0gaTsKCX0KCglCdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7CgkgIGNvbnN0IGxlbiA9IHRoaXMubGVuZ3RoOwoJICBpZiAobGVuICUgMiAhPT0gMCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpCgkgIH0KCSAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikgewoJICAgIHN3YXAodGhpcywgaSwgaSArIDEpOwoJICB9CgkgIHJldHVybiB0aGlzCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUuc3dhcDMyID0gZnVuY3Rpb24gc3dhcDMyICgpIHsKCSAgY29uc3QgbGVuID0gdGhpcy5sZW5ndGg7CgkgIGlmIChsZW4gJSA0ICE9PSAwKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJykKCSAgfQoJICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7CgkgICAgc3dhcCh0aGlzLCBpLCBpICsgMyk7CgkgICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpOwoJICB9CgkgIHJldHVybiB0aGlzCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHsKCSAgY29uc3QgbGVuID0gdGhpcy5sZW5ndGg7CgkgIGlmIChsZW4gJSA4ICE9PSAwKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJykKCSAgfQoJICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7CgkgICAgc3dhcCh0aGlzLCBpLCBpICsgNyk7CgkgICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDYpOwoJICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KTsKCSAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNCk7CgkgIH0KCSAgcmV0dXJuIHRoaXMKCX07CgoJQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHsKCSAgY29uc3QgbGVuZ3RoID0gdGhpcy5sZW5ndGg7CgkgIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJwoJICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpCgkgIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnRvTG9jYWxlU3RyaW5nID0gQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZzsKCglCdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikgewoJICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpCgkgIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZQoJICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDAKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7CgkgIGxldCBzdHIgPSAnJzsKCSAgY29uc3QgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUzsKCSAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5yZXBsYWNlKC8oLnsyfSkvZywgJyQxICcpLnRyaW0oKTsKCSAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJzsKCSAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPicKCX07CglpZiAoY3VzdG9tSW5zcGVjdFN5bWJvbCkgewoJICBCdWZmZXIucHJvdG90eXBlW2N1c3RvbUluc3BlY3RTeW1ib2xdID0gQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0OwoJfQoKCUJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7CgkgIGlmIChpc0luc3RhbmNlKHRhcmdldCwgVWludDhBcnJheSkpIHsKCSAgICB0YXJnZXQgPSBCdWZmZXIuZnJvbSh0YXJnZXQsIHRhcmdldC5vZmZzZXQsIHRhcmdldC5ieXRlTGVuZ3RoKTsKCSAgfQoJICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0YXJnZXQpKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKCSAgICAgICdUaGUgInRhcmdldCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheS4gJyArCgkgICAgICAnUmVjZWl2ZWQgdHlwZSAnICsgKHR5cGVvZiB0YXJnZXQpCgkgICAgKQoJICB9CgoJICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkgewoJICAgIHN0YXJ0ID0gMDsKCSAgfQoJICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHsKCSAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMDsKCSAgfQoJICBpZiAodGhpc1N0YXJ0ID09PSB1bmRlZmluZWQpIHsKCSAgICB0aGlzU3RhcnQgPSAwOwoJICB9CgkgIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHsKCSAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGg7CgkgIH0KCgkgIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKQoJICB9CgoJICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7CgkgICAgcmV0dXJuIDAKCSAgfQoJICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHsKCSAgICByZXR1cm4gLTEKCSAgfQoJICBpZiAoc3RhcnQgPj0gZW5kKSB7CgkgICAgcmV0dXJuIDEKCSAgfQoKCSAgc3RhcnQgPj4+PSAwOwoJICBlbmQgPj4+PSAwOwoJICB0aGlzU3RhcnQgPj4+PSAwOwoJICB0aGlzRW5kID4+Pj0gMDsKCgkgIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwCgoJICBsZXQgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnQ7CgkgIGxldCB5ID0gZW5kIC0gc3RhcnQ7CgkgIGNvbnN0IGxlbiA9IE1hdGgubWluKHgsIHkpOwoKCSAgY29uc3QgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZCk7CgkgIGNvbnN0IHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZCk7CgoJICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7CgkgICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7CgkgICAgICB4ID0gdGhpc0NvcHlbaV07CgkgICAgICB5ID0gdGFyZ2V0Q29weVtpXTsKCSAgICAgIGJyZWFrCgkgICAgfQoJICB9CgoJICBpZiAoeCA8IHkpIHJldHVybiAtMQoJICBpZiAoeSA8IHgpIHJldHVybiAxCgkgIHJldHVybiAwCgl9OwoKCS8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCwKCS8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuCgkvLwoJLy8gQXJndW1lbnRzOgoJLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2gKCS8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyCgkvLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzIKCS8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nCgkvLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZgoJZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7CgkgIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaAoJICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xCgoJICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldAoJICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7CgkgICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0OwoJICAgIGJ5dGVPZmZzZXQgPSAwOwoJICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSB7CgkgICAgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmY7CgkgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7CgkgICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwOwoJICB9CgkgIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldDsgLy8gQ29lcmNlIHRvIE51bWJlci4KCSAgaWYgKG51bWJlcklzTmFOKGJ5dGVPZmZzZXQpKSB7CgkgICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgImZvbyIsIGV0Yywgc2VhcmNoIHdob2xlIGJ1ZmZlcgoJICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKTsKCSAgfQoKCSAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXIKCSAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCArIGJ5dGVPZmZzZXQ7CgkgIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHsKCSAgICBpZiAoZGlyKSByZXR1cm4gLTEKCSAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMTsKCSAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkgewoJICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwOwoJICAgIGVsc2UgcmV0dXJuIC0xCgkgIH0KCgkgIC8vIE5vcm1hbGl6ZSB2YWwKCSAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7CgkgICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZyk7CgkgIH0KCgkgIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mCgkgIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkgewoJICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHMKCSAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgewoJICAgICAgcmV0dXJuIC0xCgkgICAgfQoJICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpCgkgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKCSAgICB2YWwgPSB2YWwgJiAweEZGOyAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdCgkgICAgaWYgKHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7CgkgICAgICBpZiAoZGlyKSB7CgkgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpCgkgICAgICB9IGVsc2UgewoJICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCkKCSAgICAgIH0KCSAgICB9CgkgICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIFt2YWxdLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKQoJICB9CgoJICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKQoJfQoKCWZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHsKCSAgbGV0IGluZGV4U2l6ZSA9IDE7CgkgIGxldCBhcnJMZW5ndGggPSBhcnIubGVuZ3RoOwoJICBsZXQgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aDsKCgkgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkKSB7CgkgICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCk7CgkgICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHwKCSAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykgewoJICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7CgkgICAgICAgIHJldHVybiAtMQoJICAgICAgfQoJICAgICAgaW5kZXhTaXplID0gMjsKCSAgICAgIGFyckxlbmd0aCAvPSAyOwoJICAgICAgdmFsTGVuZ3RoIC89IDI7CgkgICAgICBieXRlT2Zmc2V0IC89IDI7CgkgICAgfQoJICB9CgoJICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHsKCSAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7CgkgICAgICByZXR1cm4gYnVmW2ldCgkgICAgfSBlbHNlIHsKCSAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpCgkgICAgfQoJICB9CgoJICBsZXQgaTsKCSAgaWYgKGRpcikgewoJICAgIGxldCBmb3VuZEluZGV4ID0gLTE7CgkgICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7CgkgICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7CgkgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGk7CgkgICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemUKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIGlmIChmb3VuZEluZGV4ICE9PSAtMSkgaSAtPSBpIC0gZm91bmRJbmRleDsKCSAgICAgICAgZm91bmRJbmRleCA9IC0xOwoJICAgICAgfQoJICAgIH0KCSAgfSBlbHNlIHsKCSAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aDsKCSAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpID49IDA7IGktLSkgewoJICAgICAgbGV0IGZvdW5kID0gdHJ1ZTsKCSAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkgewoJICAgICAgICAgIGZvdW5kID0gZmFsc2U7CgkgICAgICAgICAgYnJlYWsKCSAgICAgICAgfQoJICAgICAgfQoJICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaQoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIC0xCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CgkgIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHsKCSAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIHRydWUpCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgewoJICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZmFsc2UpCgl9OwoKCWZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKCSAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMDsKCSAgY29uc3QgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldDsKCSAgaWYgKCFsZW5ndGgpIHsKCSAgICBsZW5ndGggPSByZW1haW5pbmc7CgkgIH0gZWxzZSB7CgkgICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aCk7CgkgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykgewoJICAgICAgbGVuZ3RoID0gcmVtYWluaW5nOwoJICAgIH0KCSAgfQoKCSAgY29uc3Qgc3RyTGVuID0gc3RyaW5nLmxlbmd0aDsKCgkgIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7CgkgICAgbGVuZ3RoID0gc3RyTGVuIC8gMjsKCSAgfQoJICBsZXQgaTsKCSAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CgkgICAgY29uc3QgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KTsKCSAgICBpZiAobnVtYmVySXNOYU4ocGFyc2VkKSkgcmV0dXJuIGkKCSAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWQ7CgkgIH0KCSAgcmV0dXJuIGkKCX0KCglmdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQoJfQoKCWZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKCX0KCglmdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CgkgIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKCX0KCglmdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHsKCSAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZykKCSAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgZW5jb2RpbmcgPSAndXRmOCc7CgkgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGg7CgkgICAgb2Zmc2V0ID0gMDsKCSAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpCgkgIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHsKCSAgICBlbmNvZGluZyA9IG9mZnNldDsKCSAgICBsZW5ndGggPSB0aGlzLmxlbmd0aDsKCSAgICBvZmZzZXQgPSAwOwoJICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKQoJICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHsKCSAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHsKCSAgICAgIGxlbmd0aCA9IGxlbmd0aCA+Pj4gMDsKCSAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4JzsKCSAgICB9IGVsc2UgewoJICAgICAgZW5jb2RpbmcgPSBsZW5ndGg7CgkgICAgICBsZW5ndGggPSB1bmRlZmluZWQ7CgkgICAgfQoJICB9IGVsc2UgewoJICAgIHRocm93IG5ldyBFcnJvcigKCSAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCcKCSAgICApCgkgIH0KCgkgIGNvbnN0IHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0OwoJICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmc7CgoJICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpCgkgIH0KCgkgIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnOwoKCSAgbGV0IGxvd2VyZWRDYXNlID0gZmFsc2U7CgkgIGZvciAoOzspIHsKCSAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CgkgICAgICBjYXNlICdoZXgnOgoJICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCgkgICAgICBjYXNlICd1dGY4JzoKCSAgICAgIGNhc2UgJ3V0Zi04JzoKCSAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKCSAgICAgIGNhc2UgJ2FzY2lpJzoKCSAgICAgIGNhc2UgJ2xhdGluMSc6CgkgICAgICBjYXNlICdiaW5hcnknOgoJICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKCSAgICAgIGNhc2UgJ2Jhc2U2NCc6CgkgICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlCgkgICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKCSAgICAgIGNhc2UgJ3VjczInOgoJICAgICAgY2FzZSAndWNzLTInOgoJICAgICAgY2FzZSAndXRmMTZsZSc6CgkgICAgICBjYXNlICd1dGYtMTZsZSc6CgkgICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCgkgICAgICBkZWZhdWx0OgoJICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKCSAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKTsKCSAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlOwoJICAgIH0KCSAgfQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7CgkgIHJldHVybiB7CgkgICAgdHlwZTogJ0J1ZmZlcicsCgkgICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApCgkgIH0KCX07CgoJZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7CgkgICAgcmV0dXJuIGJhc2U2NEpzLmZyb21CeXRlQXJyYXkoYnVmKQoJICB9IGVsc2UgewoJICAgIHJldHVybiBiYXNlNjRKcy5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSkKCSAgfQoJfQoKCWZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CgkgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CgkgIGNvbnN0IHJlcyA9IFtdOwoKCSAgbGV0IGkgPSBzdGFydDsKCSAgd2hpbGUgKGkgPCBlbmQpIHsKCSAgICBjb25zdCBmaXJzdEJ5dGUgPSBidWZbaV07CgkgICAgbGV0IGNvZGVQb2ludCA9IG51bGw7CgkgICAgbGV0IGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikKCSAgICAgID8gNAoJICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikKCSAgICAgICAgICA/IDMKCSAgICAgICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKQoJICAgICAgICAgICAgICA/IDIKCSAgICAgICAgICAgICAgOiAxOwoKCSAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7CgkgICAgICBsZXQgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50OwoKCSAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkgewoJICAgICAgICBjYXNlIDE6CgkgICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHsKCSAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZTsKCSAgICAgICAgICB9CgkgICAgICAgICAgYnJlYWsKCSAgICAgICAgY2FzZSAyOgoJICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdOwoJICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRik7CgkgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHsKCSAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9CgkgICAgICAgICAgYnJlYWsKCSAgICAgICAgY2FzZSAzOgoJICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdOwoJICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl07CgkgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRik7CgkgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7CgkgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfQoJICAgICAgICAgIGJyZWFrCgkgICAgICAgIGNhc2UgNDoKCSAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXTsKCSAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdOwoJICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdOwoJICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRik7CgkgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHsKCSAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9CgkgICAgICB9CgkgICAgfQoKCSAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7CgkgICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhCgkgICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlCgkgICAgICBjb2RlUG9pbnQgPSAweEZGRkQ7CgkgICAgICBieXRlc1BlclNlcXVlbmNlID0gMTsKCSAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikgewoJICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSkKCSAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwOwoJICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTsKCSAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGOwoJICAgIH0KCgkgICAgcmVzLnB1c2goY29kZVBvaW50KTsKCSAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2U7CgkgIH0KCgkgIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKQoJfQoKCS8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aAoJLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLgoJLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eQoJY29uc3QgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDA7CgoJZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7CgkgIGNvbnN0IGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoOwoJICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7CgkgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpCgkgIH0KCgkgIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZCIuCgkgIGxldCByZXMgPSAnJzsKCSAgbGV0IGkgPSAwOwoJICB3aGlsZSAoaSA8IGxlbikgewoJICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KAoJICAgICAgU3RyaW5nLAoJICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKQoJICAgICk7CgkgIH0KCSAgcmV0dXJuIHJlcwoJfQoKCWZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICBsZXQgcmV0ID0gJyc7CgkgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CgoJICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkgewoJICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpOwoJICB9CgkgIHJldHVybiByZXQKCX0KCglmdW5jdGlvbiBsYXRpbjFTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CgkgIGxldCByZXQgPSAnJzsKCSAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKTsKCgkgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7CgkgICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKTsKCSAgfQoJICByZXR1cm4gcmV0Cgl9CgoJZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICBjb25zdCBsZW4gPSBidWYubGVuZ3RoOwoKCSAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMDsKCSAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlbjsKCgkgIGxldCBvdXQgPSAnJzsKCSAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKCSAgICBvdXQgKz0gaGV4U2xpY2VMb29rdXBUYWJsZVtidWZbaV1dOwoJICB9CgkgIHJldHVybiBvdXQKCX0KCglmdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICBjb25zdCBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKTsKCSAgbGV0IHJlcyA9ICcnOwoJICAvLyBJZiBieXRlcy5sZW5ndGggaXMgb2RkLCB0aGUgbGFzdCA4IGJpdHMgbXVzdCBiZSBpZ25vcmVkIChzYW1lIGFzIG5vZGUuanMpCgkgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoIC0gMTsgaSArPSAyKSB7CgkgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyAoYnl0ZXNbaSArIDFdICogMjU2KSk7CgkgIH0KCSAgcmV0dXJuIHJlcwoJfQoKCUJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkgewoJICBjb25zdCBsZW4gPSB0aGlzLmxlbmd0aDsKCSAgc3RhcnQgPSB+fnN0YXJ0OwoJICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kOwoKCSAgaWYgKHN0YXJ0IDwgMCkgewoJICAgIHN0YXJ0ICs9IGxlbjsKCSAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDA7CgkgIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHsKCSAgICBzdGFydCA9IGxlbjsKCSAgfQoKCSAgaWYgKGVuZCA8IDApIHsKCSAgICBlbmQgKz0gbGVuOwoJICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwOwoJICB9IGVsc2UgaWYgKGVuZCA+IGxlbikgewoJICAgIGVuZCA9IGxlbjsKCSAgfQoKCSAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydDsKCgkgIGNvbnN0IG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCk7CgkgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlCgkgIE9iamVjdC5zZXRQcm90b3R5cGVPZihuZXdCdWYsIEJ1ZmZlci5wcm90b3R5cGUpOwoKCSAgcmV0dXJuIG5ld0J1ZgoJfTsKCgkvKgoJICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuCgkgKi8KCWZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7CgkgIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpCgkgIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJykKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRVaW50TEUgPQoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKTsKCgkgIGxldCB2YWwgPSB0aGlzW29mZnNldF07CgkgIGxldCBtdWwgPSAxOwoJICBsZXQgaSA9IDA7CgkgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CgkgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWw7CgkgIH0KCgkgIHJldHVybiB2YWwKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVWludEJFID0KCUJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMDsKCSAgaWYgKCFub0Fzc2VydCkgewoJICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpOwoJICB9CgoJICBsZXQgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdOwoJICBsZXQgbXVsID0gMTsKCSAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7CgkgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bDsKCSAgfQoKCSAgcmV0dXJuIHZhbAoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRVaW50OCA9CglCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpOwoJICByZXR1cm4gdGhpc1tvZmZzZXRdCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZFVpbnQxNkxFID0KCUJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCk7CgkgIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRVaW50MTZCRSA9CglCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpOwoJICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV0KCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVWludDMyTEUgPQoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCgkgIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfAoJICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfAoJICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArCgkgICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMCkKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVWludDMyQkUgPQoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCgkgIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArCgkgICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8CgkgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfAoJICAgIHRoaXNbb2Zmc2V0ICsgM10pCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEJpZ1VJbnQ2NExFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdVSW50NjRMRSAob2Zmc2V0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0Jyk7CgkgIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdOwoJICBjb25zdCBsYXN0ID0gdGhpc1tvZmZzZXQgKyA3XTsKCSAgaWYgKGZpcnN0ID09PSB1bmRlZmluZWQgfHwgbGFzdCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgYm91bmRzRXJyb3Iob2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDgpOwoJICB9CgoJICBjb25zdCBsbyA9IGZpcnN0ICsKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMjQ7CgoJICBjb25zdCBoaSA9IHRoaXNbKytvZmZzZXRdICsKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsKCSAgICBsYXN0ICogMiAqKiAyNDsKCgkgIHJldHVybiBCaWdJbnQobG8pICsgKEJpZ0ludChoaSkgPDwgQmlnSW50KDMyKSkKCX0pOwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEJpZ1VJbnQ2NEJFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdVSW50NjRCRSAob2Zmc2V0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0Jyk7CgkgIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdOwoJICBjb25zdCBsYXN0ID0gdGhpc1tvZmZzZXQgKyA3XTsKCSAgaWYgKGZpcnN0ID09PSB1bmRlZmluZWQgfHwgbGFzdCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgYm91bmRzRXJyb3Iob2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDgpOwoJICB9CgoJICBjb25zdCBoaSA9IGZpcnN0ICogMiAqKiAyNCArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArCgkgICAgdGhpc1srK29mZnNldF07CgoJICBjb25zdCBsbyA9IHRoaXNbKytvZmZzZXRdICogMiAqKiAyNCArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArCgkgICAgbGFzdDsKCgkgIHJldHVybiAoQmlnSW50KGhpKSA8PCBCaWdJbnQoMzIpKSArIEJpZ0ludChsbykKCX0pOwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpOwoKCSAgbGV0IHZhbCA9IHRoaXNbb2Zmc2V0XTsKCSAgbGV0IG11bCA9IDE7CgkgIGxldCBpID0gMDsKCSAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bDsKCSAgfQoJICBtdWwgKj0gMHg4MDsKCgkgIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpOwoKCSAgcmV0dXJuIHZhbAoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKTsKCgkgIGxldCBpID0gYnl0ZUxlbmd0aDsKCSAgbGV0IG11bCA9IDE7CgkgIGxldCB2YWwgPSB0aGlzW29mZnNldCArIC0taV07CgkgIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkgewoJICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWw7CgkgIH0KCSAgbXVsICo9IDB4ODA7CgoJICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKTsKCgkgIHJldHVybiB2YWwKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aCk7CgkgIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSkKCSAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpOwoJICBjb25zdCB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KTsKCSAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbAoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTsKCSAgY29uc3QgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOCk7CgkgIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWwKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7CgoJICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfAoJICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKCSAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfAoJICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCgkgIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8CgkgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHwKCSAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8CgkgICAgKHRoaXNbb2Zmc2V0ICsgM10pCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEJpZ0ludDY0TEUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gcmVhZEJpZ0ludDY0TEUgKG9mZnNldCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIHZhbGlkYXRlTnVtYmVyKG9mZnNldCwgJ29mZnNldCcpOwoJICBjb25zdCBmaXJzdCA9IHRoaXNbb2Zmc2V0XTsKCSAgY29uc3QgbGFzdCA9IHRoaXNbb2Zmc2V0ICsgN107CgkgIGlmIChmaXJzdCA9PT0gdW5kZWZpbmVkIHx8IGxhc3QgPT09IHVuZGVmaW5lZCkgewoJICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgdGhpcy5sZW5ndGggLSA4KTsKCSAgfQoKCSAgY29uc3QgdmFsID0gdGhpc1tvZmZzZXQgKyA0XSArCgkgICAgdGhpc1tvZmZzZXQgKyA1XSAqIDIgKiogOCArCgkgICAgdGhpc1tvZmZzZXQgKyA2XSAqIDIgKiogMTYgKwoJICAgIChsYXN0IDw8IDI0KTsgLy8gT3ZlcmZsb3cKCgkgIHJldHVybiAoQmlnSW50KHZhbCkgPDwgQmlnSW50KDMyKSkgKwoJICAgIEJpZ0ludChmaXJzdCArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDggKwoJICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDI0KQoJfSk7CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkQmlnSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnSW50NjRCRSAob2Zmc2V0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0Jyk7CgkgIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdOwoJICBjb25zdCBsYXN0ID0gdGhpc1tvZmZzZXQgKyA3XTsKCSAgaWYgKGZpcnN0ID09PSB1bmRlZmluZWQgfHwgbGFzdCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgYm91bmRzRXJyb3Iob2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDgpOwoJICB9CgoJICBjb25zdCB2YWwgPSAoZmlyc3QgPDwgMjQpICsgLy8gT3ZlcmZsb3cKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKwoJICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICsKCSAgICB0aGlzWysrb2Zmc2V0XTsKCgkgIHJldHVybiAoQmlnSW50KHZhbCkgPDwgQmlnSW50KDMyKSkgKwoJICAgIEJpZ0ludCh0aGlzWysrb2Zmc2V0XSAqIDIgKiogMjQgKwoJICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDggKwoJICAgIGxhc3QpCgl9KTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCSAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCSAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNCkKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKTsKCSAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpOwoJICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KQoJfTsKCglmdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7CgkgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJyJidWZmZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKQoJICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCcidmFsdWUiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKQoJICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnRMRSA9CglCdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSB7CgkgICAgY29uc3QgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxOwoJICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKTsKCSAgfQoKCSAgbGV0IG11bCA9IDE7CgkgIGxldCBpID0gMDsKCSAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGOwoJICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewoJICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRjsKCSAgfQoKCSAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnRCRSA9CglCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSB7CgkgICAgY29uc3QgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxOwoJICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKTsKCSAgfQoKCSAgbGV0IGkgPSBieXRlTGVuZ3RoIC0gMTsKCSAgbGV0IG11bCA9IDE7CgkgIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkY7CgkgIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkgewoJICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRjsKCSAgfQoKCSAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQ4ID0KCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApOwoJICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTsKCSAgcmV0dXJuIG9mZnNldCArIDEKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQxNkxFID0KCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpOwoJICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KTsKCSAgcmV0dXJuIG9mZnNldCArIDIKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQxNkJFID0KCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOCk7CgkgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKTsKCSAgcmV0dXJuIG9mZnNldCArIDIKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQzMkxFID0KCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApOwoJICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNCk7CgkgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KTsKCSAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpOwoJICByZXR1cm4gb2Zmc2V0ICsgNAoJfTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlVWludDMyQkUgPQoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgdmFsdWUgPSArdmFsdWU7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpOwoJICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNik7CgkgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpOwoJICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZik7CgkgIHJldHVybiBvZmZzZXQgKyA0Cgl9OwoKCWZ1bmN0aW9uIHdydEJpZ1VJbnQ2NExFIChidWYsIHZhbHVlLCBvZmZzZXQsIG1pbiwgbWF4KSB7CgkgIGNoZWNrSW50QkkodmFsdWUsIG1pbiwgbWF4LCBidWYsIG9mZnNldCwgNyk7CgoJICBsZXQgbG8gPSBOdW1iZXIodmFsdWUgJiBCaWdJbnQoMHhmZmZmZmZmZikpOwoJICBidWZbb2Zmc2V0KytdID0gbG87CgkgIGxvID0gbG8gPj4gODsKCSAgYnVmW29mZnNldCsrXSA9IGxvOwoJICBsbyA9IGxvID4+IDg7CgkgIGJ1ZltvZmZzZXQrK10gPSBsbzsKCSAgbG8gPSBsbyA+PiA4OwoJICBidWZbb2Zmc2V0KytdID0gbG87CgkgIGxldCBoaSA9IE51bWJlcih2YWx1ZSA+PiBCaWdJbnQoMzIpICYgQmlnSW50KDB4ZmZmZmZmZmYpKTsKCSAgYnVmW29mZnNldCsrXSA9IGhpOwoJICBoaSA9IGhpID4+IDg7CgkgIGJ1ZltvZmZzZXQrK10gPSBoaTsKCSAgaGkgPSBoaSA+PiA4OwoJICBidWZbb2Zmc2V0KytdID0gaGk7CgkgIGhpID0gaGkgPj4gODsKCSAgYnVmW29mZnNldCsrXSA9IGhpOwoJICByZXR1cm4gb2Zmc2V0Cgl9CgoJZnVuY3Rpb24gd3J0QmlnVUludDY0QkUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbWluLCBtYXgpIHsKCSAgY2hlY2tJbnRCSSh2YWx1ZSwgbWluLCBtYXgsIGJ1Ziwgb2Zmc2V0LCA3KTsKCgkgIGxldCBsbyA9IE51bWJlcih2YWx1ZSAmIEJpZ0ludCgweGZmZmZmZmZmKSk7CgkgIGJ1ZltvZmZzZXQgKyA3XSA9IGxvOwoJICBsbyA9IGxvID4+IDg7CgkgIGJ1ZltvZmZzZXQgKyA2XSA9IGxvOwoJICBsbyA9IGxvID4+IDg7CgkgIGJ1ZltvZmZzZXQgKyA1XSA9IGxvOwoJICBsbyA9IGxvID4+IDg7CgkgIGJ1ZltvZmZzZXQgKyA0XSA9IGxvOwoJICBsZXQgaGkgPSBOdW1iZXIodmFsdWUgPj4gQmlnSW50KDMyKSAmIEJpZ0ludCgweGZmZmZmZmZmKSk7CgkgIGJ1ZltvZmZzZXQgKyAzXSA9IGhpOwoJICBoaSA9IGhpID4+IDg7CgkgIGJ1ZltvZmZzZXQgKyAyXSA9IGhpOwoJICBoaSA9IGhpID4+IDg7CgkgIGJ1ZltvZmZzZXQgKyAxXSA9IGhpOwoJICBoaSA9IGhpID4+IDg7CgkgIGJ1ZltvZmZzZXRdID0gaGk7CgkgIHJldHVybiBvZmZzZXQgKyA4Cgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUJpZ1VJbnQ2NExFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHdyaXRlQmlnVUludDY0TEUgKHZhbHVlLCBvZmZzZXQgPSAwKSB7CgkgIHJldHVybiB3cnRCaWdVSW50NjRMRSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBCaWdJbnQoMCksIEJpZ0ludCgnMHhmZmZmZmZmZmZmZmZmZmZmJykpCgl9KTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlQmlnVUludDY0QkUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gd3JpdGVCaWdVSW50NjRCRSAodmFsdWUsIG9mZnNldCA9IDApIHsKCSAgcmV0dXJuIHdydEJpZ1VJbnQ2NEJFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIEJpZ0ludCgwKSwgQmlnSW50KCcweGZmZmZmZmZmZmZmZmZmZmYnKSkKCX0pOwoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIHsKCSAgICBjb25zdCBsaW1pdCA9IE1hdGgucG93KDIsICg4ICogYnl0ZUxlbmd0aCkgLSAxKTsKCgkgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpOwoJICB9CgoJICBsZXQgaSA9IDA7CgkgIGxldCBtdWwgPSAxOwoJICBsZXQgc3ViID0gMDsKCSAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGOwoJICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewoJICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7CgkgICAgICBzdWIgPSAxOwoJICAgIH0KCSAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGOwoJICB9CgoJICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAoJfTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZTsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSB7CgkgICAgY29uc3QgbGltaXQgPSBNYXRoLnBvdygyLCAoOCAqIGJ5dGVMZW5ndGgpIC0gMSk7CgoJICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KTsKCSAgfQoKCSAgbGV0IGkgPSBieXRlTGVuZ3RoIC0gMTsKCSAgbGV0IG11bCA9IDE7CgkgIGxldCBzdWIgPSAwOwoJICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGOwoJICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkgewoJICAgICAgc3ViID0gMTsKCSAgICB9CgkgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRjsKCSAgfQoKCSAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKTsKCSAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxOwoJICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTsKCSAgcmV0dXJuIG9mZnNldCArIDEKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpOwoJICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KTsKCSAgcmV0dXJuIG9mZnNldCArIDIKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOCk7CgkgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKTsKCSAgcmV0dXJuIG9mZnNldCArIDIKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKTsKCSAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZik7CgkgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpOwoJICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNik7CgkgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KTsKCSAgcmV0dXJuIG9mZnNldCArIDQKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKTsKCSAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxOwoJICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KTsKCSAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpOwoJICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KTsKCSAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpOwoJICByZXR1cm4gb2Zmc2V0ICsgNAoJfTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlQmlnSW50NjRMRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiB3cml0ZUJpZ0ludDY0TEUgKHZhbHVlLCBvZmZzZXQgPSAwKSB7CgkgIHJldHVybiB3cnRCaWdVSW50NjRMRSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAtQmlnSW50KCcweDgwMDAwMDAwMDAwMDAwMDAnKSwgQmlnSW50KCcweDdmZmZmZmZmZmZmZmZmZmYnKSkKCX0pOwoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVCaWdJbnQ2NEJFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHdyaXRlQmlnSW50NjRCRSAodmFsdWUsIG9mZnNldCA9IDApIHsKCSAgcmV0dXJuIHdydEJpZ1VJbnQ2NEJFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIC1CaWdJbnQoJzB4ODAwMDAwMDAwMDAwMDAwMCcpLCBCaWdJbnQoJzB4N2ZmZmZmZmZmZmZmZmZmZicpKQoJfSk7CgoJZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHsKCSAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKQoJICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCgl9CgoJZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIHsKCSAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0KTsKCSAgfQoJICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNCk7CgkgIHJldHVybiBvZmZzZXQgKyA0Cgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KQoJfTsKCglmdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIHsKCSAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4KTsKCSAgfQoJICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOCk7CgkgIHJldHVybiBvZmZzZXQgKyA4Cgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewoJICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KQoJfTsKCgkvLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpCglCdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7CgkgIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2FyZ3VtZW50IHNob3VsZCBiZSBhIEJ1ZmZlcicpCgkgIGlmICghc3RhcnQpIHN0YXJ0ID0gMDsKCSAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aDsKCSAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aDsKCSAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwOwoJICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnQ7CgoJICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmUKCSAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwCgkgIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMAoKCSAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9ucwoJICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKQoJICB9CgkgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKQoJICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJykKCgkgIC8vIEFyZSB3ZSBvb2I/CgkgIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGg7CgkgIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkgewoJICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0OwoJICB9CgoJICBjb25zdCBsZW4gPSBlbmQgLSBzdGFydDsKCgkgIGlmICh0aGlzID09PSB0YXJnZXQgJiYgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW4gPT09ICdmdW5jdGlvbicpIHsKCSAgICAvLyBVc2UgYnVpbHQtaW4gd2hlbiBhdmFpbGFibGUsIG1pc3NpbmcgZnJvbSBJRTExCgkgICAgdGhpcy5jb3B5V2l0aGluKHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKTsKCSAgfSBlbHNlIHsKCSAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbCgKCSAgICAgIHRhcmdldCwKCSAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCksCgkgICAgICB0YXJnZXRTdGFydAoJICAgICk7CgkgIH0KCgkgIHJldHVybiBsZW4KCX07CgoJLy8gVXNhZ2U6CgkvLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSkKCS8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKQoJLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pCglCdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7CgkgIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6CgkgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewoJICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7CgkgICAgICBlbmNvZGluZyA9IHN0YXJ0OwoJICAgICAgc3RhcnQgPSAwOwoJICAgICAgZW5kID0gdGhpcy5sZW5ndGg7CgkgICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykgewoJICAgICAgZW5jb2RpbmcgPSBlbmQ7CgkgICAgICBlbmQgPSB0aGlzLmxlbmd0aDsKCSAgICB9CgkgICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykgewoJICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpCgkgICAgfQoJICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHsKCSAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKCSAgICB9CgkgICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHsKCSAgICAgIGNvbnN0IGNvZGUgPSB2YWwuY2hhckNvZGVBdCgwKTsKCSAgICAgIGlmICgoZW5jb2RpbmcgPT09ICd1dGY4JyAmJiBjb2RlIDwgMTI4KSB8fAoJICAgICAgICAgIGVuY29kaW5nID09PSAnbGF0aW4xJykgewoJICAgICAgICAvLyBGYXN0IHBhdGg6IElmIGB2YWxgIGZpdHMgaW50byBhIHNpbmdsZSBieXRlLCB1c2UgdGhhdCBudW1lcmljIHZhbHVlLgoJICAgICAgICB2YWwgPSBjb2RlOwoJICAgICAgfQoJICAgIH0KCSAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewoJICAgIHZhbCA9IHZhbCAmIDI1NTsKCSAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnYm9vbGVhbicpIHsKCSAgICB2YWwgPSBOdW1iZXIodmFsKTsKCSAgfQoKCSAgLy8gSW52YWxpZCByYW5nZXMgYXJlIG5vdCBzZXQgdG8gYSBkZWZhdWx0LCBzbyBjYW4gcmFuZ2UgY2hlY2sgZWFybHkuCgkgIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdPdXQgb2YgcmFuZ2UgaW5kZXgnKQoJICB9CgoJICBpZiAoZW5kIDw9IHN0YXJ0KSB7CgkgICAgcmV0dXJuIHRoaXMKCSAgfQoKCSAgc3RhcnQgPSBzdGFydCA+Pj4gMDsKCSAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMDsKCgkgIGlmICghdmFsKSB2YWwgPSAwOwoKCSAgbGV0IGk7CgkgIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewoJICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKCSAgICAgIHRoaXNbaV0gPSB2YWw7CgkgICAgfQoJICB9IGVsc2UgewoJICAgIGNvbnN0IGJ5dGVzID0gQnVmZmVyLmlzQnVmZmVyKHZhbCkKCSAgICAgID8gdmFsCgkgICAgICA6IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpOwoJICAgIGNvbnN0IGxlbiA9IGJ5dGVzLmxlbmd0aDsKCSAgICBpZiAobGVuID09PSAwKSB7CgkgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgdmFsdWUgIicgKyB2YWwgKwoJICAgICAgICAnIiBpcyBpbnZhbGlkIGZvciBhcmd1bWVudCAidmFsdWUiJykKCSAgICB9CgkgICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHsKCSAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dOwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIHRoaXMKCX07CgoJLy8gQ1VTVE9NIEVSUk9SUwoJLy8gPT09PT09PT09PT09PQoKCS8vIFNpbXBsaWZpZWQgdmVyc2lvbnMgZnJvbSBOb2RlLCBjaGFuZ2VkIGZvciBCdWZmZXItb25seSB1c2FnZQoJY29uc3QgZXJyb3JzID0ge307CglmdW5jdGlvbiBFIChzeW0sIGdldE1lc3NhZ2UsIEJhc2UpIHsKCSAgZXJyb3JzW3N5bV0gPSBjbGFzcyBOb2RlRXJyb3IgZXh0ZW5kcyBCYXNlIHsKCSAgICBjb25zdHJ1Y3RvciAoKSB7CgkgICAgICBzdXBlcigpOwoKCSAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbWVzc2FnZScsIHsKCSAgICAgICAgdmFsdWU6IGdldE1lc3NhZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKSwKCSAgICAgICAgd3JpdGFibGU6IHRydWUsCgkgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQoJICAgICAgfSk7CgoJICAgICAgLy8gQWRkIHRoZSBlcnJvciBjb2RlIHRvIHRoZSBuYW1lIHRvIGluY2x1ZGUgaXQgaW4gdGhlIHN0YWNrIHRyYWNlLgoJICAgICAgdGhpcy5uYW1lID0gYCR7dGhpcy5uYW1lfSBbJHtzeW19XWA7CgkgICAgICAvLyBBY2Nlc3MgdGhlIHN0YWNrIHRvIGdlbmVyYXRlIHRoZSBlcnJvciBtZXNzYWdlIGluY2x1ZGluZyB0aGUgZXJyb3IgY29kZQoJICAgICAgLy8gZnJvbSB0aGUgbmFtZS4KCSAgICAgIHRoaXMuc3RhY2s7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLWV4cHJlc3Npb25zCgkgICAgICAvLyBSZXNldCB0aGUgbmFtZSB0byB0aGUgYWN0dWFsIG5hbWUuCgkgICAgICBkZWxldGUgdGhpcy5uYW1lOwoJICAgIH0KCgkgICAgZ2V0IGNvZGUgKCkgewoJICAgICAgcmV0dXJuIHN5bQoJICAgIH0KCgkgICAgc2V0IGNvZGUgKHZhbHVlKSB7CgkgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2NvZGUnLCB7CgkgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKCSAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKCSAgICAgICAgdmFsdWUsCgkgICAgICAgIHdyaXRhYmxlOiB0cnVlCgkgICAgICB9KTsKCSAgICB9CgoJICAgIHRvU3RyaW5nICgpIHsKCSAgICAgIHJldHVybiBgJHt0aGlzLm5hbWV9IFske3N5bX1dOiAke3RoaXMubWVzc2FnZX1gCgkgICAgfQoJICB9OwoJfQoKCUUoJ0VSUl9CVUZGRVJfT1VUX09GX0JPVU5EUycsCgkgIGZ1bmN0aW9uIChuYW1lKSB7CgkgICAgaWYgKG5hbWUpIHsKCSAgICAgIHJldHVybiBgJHtuYW1lfSBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHNgCgkgICAgfQoKCSAgICByZXR1cm4gJ0F0dGVtcHQgdG8gYWNjZXNzIG1lbW9yeSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnCgkgIH0sIFJhbmdlRXJyb3IpOwoJRSgnRVJSX0lOVkFMSURfQVJHX1RZUEUnLAoJICBmdW5jdGlvbiAobmFtZSwgYWN0dWFsKSB7CgkgICAgcmV0dXJuIGBUaGUgIiR7bmFtZX0iIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBudW1iZXIuIFJlY2VpdmVkIHR5cGUgJHt0eXBlb2YgYWN0dWFsfWAKCSAgfSwgVHlwZUVycm9yKTsKCUUoJ0VSUl9PVVRfT0ZfUkFOR0UnLAoJICBmdW5jdGlvbiAoc3RyLCByYW5nZSwgaW5wdXQpIHsKCSAgICBsZXQgbXNnID0gYFRoZSB2YWx1ZSBvZiAiJHtzdHJ9IiBpcyBvdXQgb2YgcmFuZ2UuYDsKCSAgICBsZXQgcmVjZWl2ZWQgPSBpbnB1dDsKCSAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihpbnB1dCkgJiYgTWF0aC5hYnMoaW5wdXQpID4gMiAqKiAzMikgewoJICAgICAgcmVjZWl2ZWQgPSBhZGROdW1lcmljYWxTZXBhcmF0b3IoU3RyaW5nKGlucHV0KSk7CgkgICAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdiaWdpbnQnKSB7CgkgICAgICByZWNlaXZlZCA9IFN0cmluZyhpbnB1dCk7CgkgICAgICBpZiAoaW5wdXQgPiBCaWdJbnQoMikgKiogQmlnSW50KDMyKSB8fCBpbnB1dCA8IC0oQmlnSW50KDIpICoqIEJpZ0ludCgzMikpKSB7CgkgICAgICAgIHJlY2VpdmVkID0gYWRkTnVtZXJpY2FsU2VwYXJhdG9yKHJlY2VpdmVkKTsKCSAgICAgIH0KCSAgICAgIHJlY2VpdmVkICs9ICduJzsKCSAgICB9CgkgICAgbXNnICs9IGAgSXQgbXVzdCBiZSAke3JhbmdlfS4gUmVjZWl2ZWQgJHtyZWNlaXZlZH1gOwoJICAgIHJldHVybiBtc2cKCSAgfSwgUmFuZ2VFcnJvcik7CgoJZnVuY3Rpb24gYWRkTnVtZXJpY2FsU2VwYXJhdG9yICh2YWwpIHsKCSAgbGV0IHJlcyA9ICcnOwoJICBsZXQgaSA9IHZhbC5sZW5ndGg7CgkgIGNvbnN0IHN0YXJ0ID0gdmFsWzBdID09PSAnLScgPyAxIDogMDsKCSAgZm9yICg7IGkgPj0gc3RhcnQgKyA0OyBpIC09IDMpIHsKCSAgICByZXMgPSBgXyR7dmFsLnNsaWNlKGkgLSAzLCBpKX0ke3Jlc31gOwoJICB9CgkgIHJldHVybiBgJHt2YWwuc2xpY2UoMCwgaSl9JHtyZXN9YAoJfQoKCS8vIENIRUNLIEZVTkNUSU9OUwoJLy8gPT09PT09PT09PT09PT09CgoJZnVuY3Rpb24gY2hlY2tCb3VuZHMgKGJ1Ziwgb2Zmc2V0LCBieXRlTGVuZ3RoKSB7CgkgIHZhbGlkYXRlTnVtYmVyKG9mZnNldCwgJ29mZnNldCcpOwoJICBpZiAoYnVmW29mZnNldF0gPT09IHVuZGVmaW5lZCB8fCBidWZbb2Zmc2V0ICsgYnl0ZUxlbmd0aF0gPT09IHVuZGVmaW5lZCkgewoJICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgYnVmLmxlbmd0aCAtIChieXRlTGVuZ3RoICsgMSkpOwoJICB9Cgl9CgoJZnVuY3Rpb24gY2hlY2tJbnRCSSAodmFsdWUsIG1pbiwgbWF4LCBidWYsIG9mZnNldCwgYnl0ZUxlbmd0aCkgewoJICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHsKCSAgICBjb25zdCBuID0gdHlwZW9mIG1pbiA9PT0gJ2JpZ2ludCcgPyAnbicgOiAnJzsKCSAgICBsZXQgcmFuZ2U7CgkgICAgaWYgKGJ5dGVMZW5ndGggPiAzKSB7CgkgICAgICBpZiAobWluID09PSAwIHx8IG1pbiA9PT0gQmlnSW50KDApKSB7CgkgICAgICAgIHJhbmdlID0gYD49IDAke259IGFuZCA8IDIke259ICoqICR7KGJ5dGVMZW5ndGggKyAxKSAqIDh9JHtufWA7CgkgICAgICB9IGVsc2UgewoJICAgICAgICByYW5nZSA9IGA+PSAtKDIke259ICoqICR7KGJ5dGVMZW5ndGggKyAxKSAqIDggLSAxfSR7bn0pIGFuZCA8IDIgKiogYCArCgkgICAgICAgICAgICAgICAgYCR7KGJ5dGVMZW5ndGggKyAxKSAqIDggLSAxfSR7bn1gOwoJICAgICAgfQoJICAgIH0gZWxzZSB7CgkgICAgICByYW5nZSA9IGA+PSAke21pbn0ke259IGFuZCA8PSAke21heH0ke259YDsKCSAgICB9CgkgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfT1VUX09GX1JBTkdFKCd2YWx1ZScsIHJhbmdlLCB2YWx1ZSkKCSAgfQoJICBjaGVja0JvdW5kcyhidWYsIG9mZnNldCwgYnl0ZUxlbmd0aCk7Cgl9CgoJZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXIgKHZhbHVlLCBuYW1lKSB7CgkgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSB7CgkgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfSU5WQUxJRF9BUkdfVFlQRShuYW1lLCAnbnVtYmVyJywgdmFsdWUpCgkgIH0KCX0KCglmdW5jdGlvbiBib3VuZHNFcnJvciAodmFsdWUsIGxlbmd0aCwgdHlwZSkgewoJICBpZiAoTWF0aC5mbG9vcih2YWx1ZSkgIT09IHZhbHVlKSB7CgkgICAgdmFsaWRhdGVOdW1iZXIodmFsdWUsIHR5cGUpOwoJICAgIHRocm93IG5ldyBlcnJvcnMuRVJSX09VVF9PRl9SQU5HRSh0eXBlIHx8ICdvZmZzZXQnLCAnYW4gaW50ZWdlcicsIHZhbHVlKQoJICB9CgoJICBpZiAobGVuZ3RoIDwgMCkgewoJICAgIHRocm93IG5ldyBlcnJvcnMuRVJSX0JVRkZFUl9PVVRfT0ZfQk9VTkRTKCkKCSAgfQoKCSAgdGhyb3cgbmV3IGVycm9ycy5FUlJfT1VUX09GX1JBTkdFKHR5cGUgfHwgJ29mZnNldCcsCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgPj0gJHt0eXBlID8gMSA6IDB9IGFuZCA8PSAke2xlbmd0aH1gLAoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUpCgl9CgoJLy8gSEVMUEVSIEZVTkNUSU9OUwoJLy8gPT09PT09PT09PT09PT09PQoKCWNvbnN0IElOVkFMSURfQkFTRTY0X1JFID0gL1teKy8wLTlBLVphLXotX10vZzsKCglmdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7CgkgIC8vIE5vZGUgdGFrZXMgZXF1YWwgc2lnbnMgYXMgZW5kIG9mIHRoZSBCYXNlNjQgZW5jb2RpbmcKCSAgc3RyID0gc3RyLnNwbGl0KCc9JylbMF07CgkgIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcbiBhbmQgXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3QKCSAgc3RyID0gc3RyLnRyaW0oKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJyk7CgkgIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJycKCSAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJycKCSAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90CgkgIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkgewoJICAgIHN0ciA9IHN0ciArICc9JzsKCSAgfQoJICByZXR1cm4gc3RyCgl9CgoJZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHsKCSAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eTsKCSAgbGV0IGNvZGVQb2ludDsKCSAgY29uc3QgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDsKCSAgbGV0IGxlYWRTdXJyb2dhdGUgPSBudWxsOwoJICBjb25zdCBieXRlcyA9IFtdOwoKCSAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewoJICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpOwoKCSAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50CgkgICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHsKCSAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkCgkgICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHsKCSAgICAgICAgLy8gbm8gbGVhZCB5ZXQKCSAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikgewoJICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWwKCSAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCk7CgkgICAgICAgICAgY29udGludWUKCSAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZAoJICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKTsKCSAgICAgICAgICBjb250aW51ZQoJICAgICAgICB9CgoJICAgICAgICAvLyB2YWxpZCBsZWFkCgkgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnQ7CgoJICAgICAgICBjb250aW51ZQoJICAgICAgfQoKCSAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3cKCSAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHsKCSAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpOwoJICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50OwoJICAgICAgICBjb250aW51ZQoJICAgICAgfQoKCSAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyCgkgICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwOwoJICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkgewoJICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZAoJICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpOwoJICAgIH0KCgkgICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGw7CgoJICAgIC8vIGVuY29kZSB1dGY4CgkgICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHsKCSAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVhawoJICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpOwoJICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHsKCSAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVhawoJICAgICAgYnl0ZXMucHVzaCgKCSAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsCgkgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCgkgICAgICApOwoJICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkgewoJICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrCgkgICAgICBieXRlcy5wdXNoKAoJICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCwKCSAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLAoJICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MAoJICAgICAgKTsKCSAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7CgkgICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWsKCSAgICAgIGJ5dGVzLnB1c2goCgkgICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCwKCSAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLAoJICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsCgkgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCgkgICAgICApOwoJICAgIH0gZWxzZSB7CgkgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpCgkgICAgfQoJICB9CgoJICByZXR1cm4gYnl0ZXMKCX0KCglmdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikgewoJICBjb25zdCBieXRlQXJyYXkgPSBbXTsKCSAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKCSAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi4KCSAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpOwoJICB9CgkgIHJldHVybiBieXRlQXJyYXkKCX0KCglmdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykgewoJICBsZXQgYywgaGksIGxvOwoJICBjb25zdCBieXRlQXJyYXkgPSBbXTsKCSAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKCSAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWsKCgkgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpOwoJICAgIGhpID0gYyA+PiA4OwoJICAgIGxvID0gYyAlIDI1NjsKCSAgICBieXRlQXJyYXkucHVzaChsbyk7CgkgICAgYnl0ZUFycmF5LnB1c2goaGkpOwoJICB9CgoJICByZXR1cm4gYnl0ZUFycmF5Cgl9CgoJZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7CgkgIHJldHVybiBiYXNlNjRKcy50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKQoJfQoKCWZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkgewoJICBsZXQgaTsKCSAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CgkgICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVhawoJICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXTsKCSAgfQoJICByZXR1cm4gaQoJfQoKCS8vIEFycmF5QnVmZmVyIG9yIFVpbnQ4QXJyYXkgb2JqZWN0cyBmcm9tIG90aGVyIGNvbnRleHRzIChpLmUuIGlmcmFtZXMpIGRvIG5vdCBwYXNzCgkvLyB0aGUgYGluc3RhbmNlb2ZgIGNoZWNrIGJ1dCB0aGV5IHNob3VsZCBiZSB0cmVhdGVkIGFzIG9mIHRoYXQgdHlwZS4KCS8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzE2NgoJZnVuY3Rpb24gaXNJbnN0YW5jZSAob2JqLCB0eXBlKSB7CgkgIHJldHVybiBvYmogaW5zdGFuY2VvZiB0eXBlIHx8CgkgICAgKG9iaiAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3RvciAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3Rvci5uYW1lICE9IG51bGwgJiYKCSAgICAgIG9iai5jb25zdHJ1Y3Rvci5uYW1lID09PSB0eXBlLm5hbWUpCgl9CglmdW5jdGlvbiBudW1iZXJJc05hTiAob2JqKSB7CgkgIC8vIEZvciBJRTExIHN1cHBvcnQKCSAgcmV0dXJuIG9iaiAhPT0gb2JqIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlCgl9CgoJLy8gQ3JlYXRlIGxvb2t1cCB0YWJsZSBmb3IgYHRvU3RyaW5nKCdoZXgnKWAKCS8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzIxOQoJY29uc3QgaGV4U2xpY2VMb29rdXBUYWJsZSA9IChmdW5jdGlvbiAoKSB7CgkgIGNvbnN0IGFscGhhYmV0ID0gJzAxMjM0NTY3ODlhYmNkZWYnOwoJICBjb25zdCB0YWJsZSA9IG5ldyBBcnJheSgyNTYpOwoJICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHsKCSAgICBjb25zdCBpMTYgPSBpICogMTY7CgkgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxNjsgKytqKSB7CgkgICAgICB0YWJsZVtpMTYgKyBqXSA9IGFscGhhYmV0W2ldICsgYWxwaGFiZXRbal07CgkgICAgfQoJICB9CgkgIHJldHVybiB0YWJsZQoJfSkoKTsKCgkvLyBSZXR1cm4gbm90IGZ1bmN0aW9uIHdpdGggRXJyb3IgaWYgQmlnSW50IG5vdCBzdXBwb3J0ZWQKCWZ1bmN0aW9uIGRlZmluZUJpZ0ludE1ldGhvZCAoZm4pIHsKCSAgcmV0dXJuIHR5cGVvZiBCaWdJbnQgPT09ICd1bmRlZmluZWQnID8gQnVmZmVyQmlnSW50Tm90RGVmaW5lZCA6IGZuCgl9CgoJZnVuY3Rpb24gQnVmZmVyQmlnSW50Tm90RGVmaW5lZCAoKSB7CgkgIHRocm93IG5ldyBFcnJvcignQmlnSW50IG5vdCBzdXBwb3J0ZWQnKQoJfQoJfSwgIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL2J1ZmZlciIpOwoKCXZhciBfbm9kZVJlc29sdmVfZW1wdHkgPSB7fTsKCgl2YXIgX25vZGVSZXNvbHZlX2VtcHR5JDEgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7CgkJX19wcm90b19fOiBudWxsLAoJCSdkZWZhdWx0JzogX25vZGVSZXNvbHZlX2VtcHR5Cgl9KTsKCgl2YXIgZGVidWdVdGlsID0gLypAX19QVVJFX18qL2dldEF1Z21lbnRlZE5hbWVzcGFjZShfbm9kZVJlc29sdmVfZW1wdHkkMSk7CgoJZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCglmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCglmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKCXZhciBCdWZmZXIgPSBidWZmZXIuQnVmZmVyOwoKCXZhciBpbnNwZWN0ID0gZGVidWdVdGlsLmluc3BlY3Q7CgoJdmFyIGN1c3RvbSA9IGluc3BlY3QgJiYgaW5zcGVjdC5jdXN0b20gfHwgJ2luc3BlY3QnOwoKCWZ1bmN0aW9uIGNvcHlCdWZmZXIoc3JjLCB0YXJnZXQsIG9mZnNldCkgewoJICBCdWZmZXIucHJvdG90eXBlLmNvcHkuY2FsbChzcmMsIHRhcmdldCwgb2Zmc2V0KTsKCX0KCgl2YXIgYnVmZmVyX2xpc3QgPQoJLyojX19QVVJFX18qLwoJZnVuY3Rpb24gKCkgewoJICBmdW5jdGlvbiBCdWZmZXJMaXN0KCkgewoJICAgIHRoaXMuaGVhZCA9IG51bGw7CgkgICAgdGhpcy50YWlsID0gbnVsbDsKCSAgICB0aGlzLmxlbmd0aCA9IDA7CgkgIH0KCgkgIHZhciBfcHJvdG8gPSBCdWZmZXJMaXN0LnByb3RvdHlwZTsKCgkgIF9wcm90by5wdXNoID0gZnVuY3Rpb24gcHVzaCh2KSB7CgkgICAgdmFyIGVudHJ5ID0gewoJICAgICAgZGF0YTogdiwKCSAgICAgIG5leHQ6IG51bGwKCSAgICB9OwoJICAgIGlmICh0aGlzLmxlbmd0aCA+IDApIHRoaXMudGFpbC5uZXh0ID0gZW50cnk7ZWxzZSB0aGlzLmhlYWQgPSBlbnRyeTsKCSAgICB0aGlzLnRhaWwgPSBlbnRyeTsKCSAgICArK3RoaXMubGVuZ3RoOwoJICB9OwoKCSAgX3Byb3RvLnVuc2hpZnQgPSBmdW5jdGlvbiB1bnNoaWZ0KHYpIHsKCSAgICB2YXIgZW50cnkgPSB7CgkgICAgICBkYXRhOiB2LAoJICAgICAgbmV4dDogdGhpcy5oZWFkCgkgICAgfTsKCSAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHRoaXMudGFpbCA9IGVudHJ5OwoJICAgIHRoaXMuaGVhZCA9IGVudHJ5OwoJICAgICsrdGhpcy5sZW5ndGg7CgkgIH07CgoJICBfcHJvdG8uc2hpZnQgPSBmdW5jdGlvbiBzaGlmdCgpIHsKCSAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybjsKCSAgICB2YXIgcmV0ID0gdGhpcy5oZWFkLmRhdGE7CgkgICAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO2Vsc2UgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5leHQ7CgkgICAgLS10aGlzLmxlbmd0aDsKCSAgICByZXR1cm4gcmV0OwoJICB9OwoKCSAgX3Byb3RvLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7CgkgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDsKCSAgICB0aGlzLmxlbmd0aCA9IDA7CgkgIH07CgoJICBfcHJvdG8uam9pbiA9IGZ1bmN0aW9uIGpvaW4ocykgewoJICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnOwoJICAgIHZhciBwID0gdGhpcy5oZWFkOwoJICAgIHZhciByZXQgPSAnJyArIHAuZGF0YTsKCgkgICAgd2hpbGUgKHAgPSBwLm5leHQpIHsKCSAgICAgIHJldCArPSBzICsgcC5kYXRhOwoJICAgIH0KCgkgICAgcmV0dXJuIHJldDsKCSAgfTsKCgkgIF9wcm90by5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQobikgewoJICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKTsKCSAgICB2YXIgcmV0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKG4gPj4+IDApOwoJICAgIHZhciBwID0gdGhpcy5oZWFkOwoJICAgIHZhciBpID0gMDsKCgkgICAgd2hpbGUgKHApIHsKCSAgICAgIGNvcHlCdWZmZXIocC5kYXRhLCByZXQsIGkpOwoJICAgICAgaSArPSBwLmRhdGEubGVuZ3RoOwoJICAgICAgcCA9IHAubmV4dDsKCSAgICB9CgoJICAgIHJldHVybiByZXQ7CgkgIH0gLy8gQ29uc3VtZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIG9yIGNoYXJhY3RlcnMgZnJvbSB0aGUgYnVmZmVyZWQgZGF0YS4KCSAgOwoKCSAgX3Byb3RvLmNvbnN1bWUgPSBmdW5jdGlvbiBjb25zdW1lKG4sIGhhc1N0cmluZ3MpIHsKCSAgICB2YXIgcmV0OwoKCSAgICBpZiAobiA8IHRoaXMuaGVhZC5kYXRhLmxlbmd0aCkgewoJICAgICAgLy8gYHNsaWNlYCBpcyB0aGUgc2FtZSBmb3IgYnVmZmVycyBhbmQgc3RyaW5ncy4KCSAgICAgIHJldCA9IHRoaXMuaGVhZC5kYXRhLnNsaWNlKDAsIG4pOwoJICAgICAgdGhpcy5oZWFkLmRhdGEgPSB0aGlzLmhlYWQuZGF0YS5zbGljZShuKTsKCSAgICB9IGVsc2UgaWYgKG4gPT09IHRoaXMuaGVhZC5kYXRhLmxlbmd0aCkgewoJICAgICAgLy8gRmlyc3QgY2h1bmsgaXMgYSBwZXJmZWN0IG1hdGNoLgoJICAgICAgcmV0ID0gdGhpcy5zaGlmdCgpOwoJICAgIH0gZWxzZSB7CgkgICAgICAvLyBSZXN1bHQgc3BhbnMgbW9yZSB0aGFuIG9uZSBidWZmZXIuCgkgICAgICByZXQgPSBoYXNTdHJpbmdzID8gdGhpcy5fZ2V0U3RyaW5nKG4pIDogdGhpcy5fZ2V0QnVmZmVyKG4pOwoJICAgIH0KCgkgICAgcmV0dXJuIHJldDsKCSAgfTsKCgkgIF9wcm90by5maXJzdCA9IGZ1bmN0aW9uIGZpcnN0KCkgewoJICAgIHJldHVybiB0aGlzLmhlYWQuZGF0YTsKCSAgfSAvLyBDb25zdW1lcyBhIHNwZWNpZmllZCBhbW91bnQgb2YgY2hhcmFjdGVycyBmcm9tIHRoZSBidWZmZXJlZCBkYXRhLgoJICA7CgoJICBfcHJvdG8uX2dldFN0cmluZyA9IGZ1bmN0aW9uIF9nZXRTdHJpbmcobikgewoJICAgIHZhciBwID0gdGhpcy5oZWFkOwoJICAgIHZhciBjID0gMTsKCSAgICB2YXIgcmV0ID0gcC5kYXRhOwoJICAgIG4gLT0gcmV0Lmxlbmd0aDsKCgkgICAgd2hpbGUgKHAgPSBwLm5leHQpIHsKCSAgICAgIHZhciBzdHIgPSBwLmRhdGE7CgkgICAgICB2YXIgbmIgPSBuID4gc3RyLmxlbmd0aCA/IHN0ci5sZW5ndGggOiBuOwoJICAgICAgaWYgKG5iID09PSBzdHIubGVuZ3RoKSByZXQgKz0gc3RyO2Vsc2UgcmV0ICs9IHN0ci5zbGljZSgwLCBuKTsKCSAgICAgIG4gLT0gbmI7CgoJICAgICAgaWYgKG4gPT09IDApIHsKCSAgICAgICAgaWYgKG5iID09PSBzdHIubGVuZ3RoKSB7CgkgICAgICAgICAgKytjOwoJICAgICAgICAgIGlmIChwLm5leHQpIHRoaXMuaGVhZCA9IHAubmV4dDtlbHNlIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgdGhpcy5oZWFkID0gcDsKCSAgICAgICAgICBwLmRhdGEgPSBzdHIuc2xpY2UobmIpOwoJICAgICAgICB9CgoJICAgICAgICBicmVhazsKCSAgICAgIH0KCgkgICAgICArK2M7CgkgICAgfQoKCSAgICB0aGlzLmxlbmd0aCAtPSBjOwoJICAgIHJldHVybiByZXQ7CgkgIH0gLy8gQ29uc3VtZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIGZyb20gdGhlIGJ1ZmZlcmVkIGRhdGEuCgkgIDsKCgkgIF9wcm90by5fZ2V0QnVmZmVyID0gZnVuY3Rpb24gX2dldEJ1ZmZlcihuKSB7CgkgICAgdmFyIHJldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuKTsKCSAgICB2YXIgcCA9IHRoaXMuaGVhZDsKCSAgICB2YXIgYyA9IDE7CgkgICAgcC5kYXRhLmNvcHkocmV0KTsKCSAgICBuIC09IHAuZGF0YS5sZW5ndGg7CgoJICAgIHdoaWxlIChwID0gcC5uZXh0KSB7CgkgICAgICB2YXIgYnVmID0gcC5kYXRhOwoJICAgICAgdmFyIG5iID0gbiA+IGJ1Zi5sZW5ndGggPyBidWYubGVuZ3RoIDogbjsKCSAgICAgIGJ1Zi5jb3B5KHJldCwgcmV0Lmxlbmd0aCAtIG4sIDAsIG5iKTsKCSAgICAgIG4gLT0gbmI7CgoJICAgICAgaWYgKG4gPT09IDApIHsKCSAgICAgICAgaWYgKG5iID09PSBidWYubGVuZ3RoKSB7CgkgICAgICAgICAgKytjOwoJICAgICAgICAgIGlmIChwLm5leHQpIHRoaXMuaGVhZCA9IHAubmV4dDtlbHNlIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgdGhpcy5oZWFkID0gcDsKCSAgICAgICAgICBwLmRhdGEgPSBidWYuc2xpY2UobmIpOwoJICAgICAgICB9CgoJICAgICAgICBicmVhazsKCSAgICAgIH0KCgkgICAgICArK2M7CgkgICAgfQoKCSAgICB0aGlzLmxlbmd0aCAtPSBjOwoJICAgIHJldHVybiByZXQ7CgkgIH0gLy8gTWFrZSBzdXJlIHRoZSBsaW5rZWQgbGlzdCBvbmx5IHNob3dzIHRoZSBtaW5pbWFsIG5lY2Vzc2FyeSBpbmZvcm1hdGlvbi4KCSAgOwoKCSAgX3Byb3RvW2N1c3RvbV0gPSBmdW5jdGlvbiAoXywgb3B0aW9ucykgewoJICAgIHJldHVybiBpbnNwZWN0KHRoaXMsIF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHsKCSAgICAgIC8vIE9ubHkgaW5zcGVjdCBvbmUgbGV2ZWwuCgkgICAgICBkZXB0aDogMCwKCSAgICAgIC8vIEl0IHNob3VsZCBub3QgcmVjdXJzZS4KCSAgICAgIGN1c3RvbUluc3BlY3Q6IGZhbHNlCgkgICAgfSkpOwoJICB9OwoKCSAgcmV0dXJuIEJ1ZmZlckxpc3Q7Cgl9KCk7CgoJZnVuY3Rpb24gZGVzdHJveShlcnIsIGNiKSB7CgkgIHZhciBfdGhpcyA9IHRoaXM7CgoJICB2YXIgcmVhZGFibGVEZXN0cm95ZWQgPSB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkOwoJICB2YXIgd3JpdGFibGVEZXN0cm95ZWQgPSB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkOwoKCSAgaWYgKHJlYWRhYmxlRGVzdHJveWVkIHx8IHdyaXRhYmxlRGVzdHJveWVkKSB7CgkgICAgaWYgKGNiKSB7CgkgICAgICBjYihlcnIpOwoJICAgIH0gZWxzZSBpZiAoZXJyKSB7CgkgICAgICBpZiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUpIHsKCSAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0RXJyb3JOVCwgdGhpcywgZXJyKTsKCSAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkKSB7CgkgICAgICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTsKCSAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0RXJyb3JOVCwgdGhpcywgZXJyKTsKCSAgICAgIH0KCSAgICB9CgoJICAgIHJldHVybiB0aGlzOwoJICB9IC8vIHdlIHNldCBkZXN0cm95ZWQgdG8gdHJ1ZSBiZWZvcmUgZmlyaW5nIGVycm9yIGNhbGxiYWNrcyBpbiBvcmRlcgoJICAvLyB0byBtYWtlIGl0IHJlLWVudHJhbmNlIHNhZmUgaW4gY2FzZSBkZXN0cm95KCkgaXMgY2FsbGVkIHdpdGhpbiBjYWxsYmFja3MKCgoJICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSkgewoJICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdHJ1ZTsKCSAgfSAvLyBpZiB0aGlzIGlzIGEgZHVwbGV4IHN0cmVhbSBtYXJrIHRoZSB3cml0YWJsZSBwYXJ0IGFzIGRlc3Ryb3llZCBhcyB3ZWxsCgoKCSAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHsKCSAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7CgkgIH0KCgkgIHRoaXMuX2Rlc3Ryb3koZXJyIHx8IG51bGwsIGZ1bmN0aW9uIChlcnIpIHsKCSAgICBpZiAoIWNiICYmIGVycikgewoJICAgICAgaWYgKCFfdGhpcy5fd3JpdGFibGVTdGF0ZSkgewoJICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRFcnJvckFuZENsb3NlTlQsIF90aGlzLCBlcnIpOwoJICAgICAgfSBlbHNlIGlmICghX3RoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkKSB7CgkgICAgICAgIF90aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7CgkgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdEVycm9yQW5kQ2xvc2VOVCwgX3RoaXMsIGVycik7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRDbG9zZU5ULCBfdGhpcyk7CgkgICAgICB9CgkgICAgfSBlbHNlIGlmIChjYikgewoJICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2VOVCwgX3RoaXMpOwoJICAgICAgY2IoZXJyKTsKCSAgICB9IGVsc2UgewoJICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2VOVCwgX3RoaXMpOwoJICAgIH0KCSAgfSk7CgoJICByZXR1cm4gdGhpczsKCX0KCglmdW5jdGlvbiBlbWl0RXJyb3JBbmRDbG9zZU5UKHNlbGYsIGVycikgewoJICBlbWl0RXJyb3JOVChzZWxmLCBlcnIpOwoJICBlbWl0Q2xvc2VOVChzZWxmKTsKCX0KCglmdW5jdGlvbiBlbWl0Q2xvc2VOVChzZWxmKSB7CgkgIGlmIChzZWxmLl93cml0YWJsZVN0YXRlICYmICFzZWxmLl93cml0YWJsZVN0YXRlLmVtaXRDbG9zZSkgcmV0dXJuOwoJICBpZiAoc2VsZi5fcmVhZGFibGVTdGF0ZSAmJiAhc2VsZi5fcmVhZGFibGVTdGF0ZS5lbWl0Q2xvc2UpIHJldHVybjsKCSAgc2VsZi5lbWl0KCdjbG9zZScpOwoJfQoKCWZ1bmN0aW9uIHVuZGVzdHJveSgpIHsKCSAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHsKCSAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IGZhbHNlOwoJICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUucmVhZGluZyA9IGZhbHNlOwoJICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kZWQgPSBmYWxzZTsKCSAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQgPSBmYWxzZTsKCSAgfQoKCSAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHsKCSAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IGZhbHNlOwoJICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQgPSBmYWxzZTsKCSAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGluZyA9IGZhbHNlOwoJICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZmluYWxDYWxsZWQgPSBmYWxzZTsKCSAgICB0aGlzLl93cml0YWJsZVN0YXRlLnByZWZpbmlzaGVkID0gZmFsc2U7CgkgICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZCA9IGZhbHNlOwoJICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gZmFsc2U7CgkgIH0KCX0KCglmdW5jdGlvbiBlbWl0RXJyb3JOVChzZWxmLCBlcnIpIHsKCSAgc2VsZi5lbWl0KCdlcnJvcicsIGVycik7Cgl9CgoJZnVuY3Rpb24gZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBlcnIpIHsKCSAgLy8gV2UgaGF2ZSB0ZXN0cyB0aGF0IHJlbHkgb24gZXJyb3JzIGJlaW5nIGVtaXR0ZWQKCSAgLy8gaW4gdGhlIHNhbWUgdGljaywgc28gY2hhbmdpbmcgdGhpcyBpcyBzZW12ZXIgbWFqb3IuCgkgIC8vIEZvciBub3cgd2hlbiB5b3Ugb3B0LWluIHRvIGF1dG9EZXN0cm95IHdlIGFsbG93CgkgIC8vIHRoZSBlcnJvciB0byBiZSBlbWl0dGVkIG5leHRUaWNrLiBJbiBhIGZ1dHVyZQoJICAvLyBzZW12ZXIgbWFqb3IgdXBkYXRlIHdlIHNob3VsZCBjaGFuZ2UgdGhlIGRlZmF1bHQgdG8gdGhpcy4KCSAgdmFyIHJTdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKCSAgdmFyIHdTdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTsKCSAgaWYgKHJTdGF0ZSAmJiByU3RhdGUuYXV0b0Rlc3Ryb3kgfHwgd1N0YXRlICYmIHdTdGF0ZS5hdXRvRGVzdHJveSkgc3RyZWFtLmRlc3Ryb3koZXJyKTtlbHNlIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVycik7Cgl9CgoJdmFyIGRlc3Ryb3lfMSA9IHsKCSAgZGVzdHJveTogZGVzdHJveSwKCSAgdW5kZXN0cm95OiB1bmRlc3Ryb3ksCgkgIGVycm9yT3JEZXN0cm95OiBlcnJvck9yRGVzdHJveQoJfTsKCglmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0KCgl2YXIgY29kZXMgPSB7fTsKCglmdW5jdGlvbiBjcmVhdGVFcnJvclR5cGUoY29kZSwgbWVzc2FnZSwgQmFzZSkgewoJICBpZiAoIUJhc2UpIHsKCSAgICBCYXNlID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIGdldE1lc3NhZ2UoYXJnMSwgYXJnMiwgYXJnMykgewoJICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHsKCSAgICAgIHJldHVybiBtZXNzYWdlOwoJICAgIH0gZWxzZSB7CgkgICAgICByZXR1cm4gbWVzc2FnZShhcmcxLCBhcmcyLCBhcmczKTsKCSAgICB9CgkgIH0KCgkgIHZhciBOb2RlRXJyb3IgPQoJICAvKiNfX1BVUkVfXyovCgkgIGZ1bmN0aW9uIChfQmFzZSkgewoJICAgIF9pbmhlcml0c0xvb3NlKE5vZGVFcnJvciwgX0Jhc2UpOwoKCSAgICBmdW5jdGlvbiBOb2RlRXJyb3IoYXJnMSwgYXJnMiwgYXJnMykgewoJICAgICAgcmV0dXJuIF9CYXNlLmNhbGwodGhpcywgZ2V0TWVzc2FnZShhcmcxLCBhcmcyLCBhcmczKSkgfHwgdGhpczsKCSAgICB9CgoJICAgIHJldHVybiBOb2RlRXJyb3I7CgkgIH0oQmFzZSk7CgoJICBOb2RlRXJyb3IucHJvdG90eXBlLm5hbWUgPSBCYXNlLm5hbWU7CgkgIE5vZGVFcnJvci5wcm90b3R5cGUuY29kZSA9IGNvZGU7CgkgIGNvZGVzW2NvZGVdID0gTm9kZUVycm9yOwoJfSAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvYmxvYi92MTAuOC4wL2xpYi9pbnRlcm5hbC9lcnJvcnMuanMKCgoJZnVuY3Rpb24gb25lT2YoZXhwZWN0ZWQsIHRoaW5nKSB7CgkgIGlmIChBcnJheS5pc0FycmF5KGV4cGVjdGVkKSkgewoJICAgIHZhciBsZW4gPSBleHBlY3RlZC5sZW5ndGg7CgkgICAgZXhwZWN0ZWQgPSBleHBlY3RlZC5tYXAoZnVuY3Rpb24gKGkpIHsKCSAgICAgIHJldHVybiBTdHJpbmcoaSk7CgkgICAgfSk7CgoJICAgIGlmIChsZW4gPiAyKSB7CgkgICAgICByZXR1cm4gIm9uZSBvZiAiLmNvbmNhdCh0aGluZywgIiAiKS5jb25jYXQoZXhwZWN0ZWQuc2xpY2UoMCwgbGVuIC0gMSkuam9pbignLCAnKSwgIiwgb3IgIikgKyBleHBlY3RlZFtsZW4gLSAxXTsKCSAgICB9IGVsc2UgaWYgKGxlbiA9PT0gMikgewoJICAgICAgcmV0dXJuICJvbmUgb2YgIi5jb25jYXQodGhpbmcsICIgIikuY29uY2F0KGV4cGVjdGVkWzBdLCAiIG9yICIpLmNvbmNhdChleHBlY3RlZFsxXSk7CgkgICAgfSBlbHNlIHsKCSAgICAgIHJldHVybiAib2YgIi5jb25jYXQodGhpbmcsICIgIikuY29uY2F0KGV4cGVjdGVkWzBdKTsKCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgcmV0dXJuICJvZiAiLmNvbmNhdCh0aGluZywgIiAiKS5jb25jYXQoU3RyaW5nKGV4cGVjdGVkKSk7CgkgIH0KCX0gLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL3N0YXJ0c1dpdGgKCgoJZnVuY3Rpb24gc3RhcnRzV2l0aChzdHIsIHNlYXJjaCwgcG9zKSB7CgkgIHJldHVybiBzdHIuc3Vic3RyKCFwb3MgfHwgcG9zIDwgMCA/IDAgOiArcG9zLCBzZWFyY2gubGVuZ3RoKSA9PT0gc2VhcmNoOwoJfSAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvZW5kc1dpdGgKCgoJZnVuY3Rpb24gZW5kc1dpdGgoc3RyLCBzZWFyY2gsIHRoaXNfbGVuKSB7CgkgIGlmICh0aGlzX2xlbiA9PT0gdW5kZWZpbmVkIHx8IHRoaXNfbGVuID4gc3RyLmxlbmd0aCkgewoJICAgIHRoaXNfbGVuID0gc3RyLmxlbmd0aDsKCSAgfQoKCSAgcmV0dXJuIHN0ci5zdWJzdHJpbmcodGhpc19sZW4gLSBzZWFyY2gubGVuZ3RoLCB0aGlzX2xlbikgPT09IHNlYXJjaDsKCX0gLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL2luY2x1ZGVzCgoKCWZ1bmN0aW9uIGluY2x1ZGVzKHN0ciwgc2VhcmNoLCBzdGFydCkgewoJICBpZiAodHlwZW9mIHN0YXJ0ICE9PSAnbnVtYmVyJykgewoJICAgIHN0YXJ0ID0gMDsKCSAgfQoKCSAgaWYgKHN0YXJ0ICsgc2VhcmNoLmxlbmd0aCA+IHN0ci5sZW5ndGgpIHsKCSAgICByZXR1cm4gZmFsc2U7CgkgIH0gZWxzZSB7CgkgICAgcmV0dXJuIHN0ci5pbmRleE9mKHNlYXJjaCwgc3RhcnQpICE9PSAtMTsKCSAgfQoJfQoKCWNyZWF0ZUVycm9yVHlwZSgnRVJSX0lOVkFMSURfT1BUX1ZBTFVFJywgZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CgkgIHJldHVybiAnVGhlIHZhbHVlICInICsgdmFsdWUgKyAnIiBpcyBpbnZhbGlkIGZvciBvcHRpb24gIicgKyBuYW1lICsgJyInOwoJfSwgVHlwZUVycm9yKTsKCWNyZWF0ZUVycm9yVHlwZSgnRVJSX0lOVkFMSURfQVJHX1RZUEUnLCBmdW5jdGlvbiAobmFtZSwgZXhwZWN0ZWQsIGFjdHVhbCkgewoJICAvLyBkZXRlcm1pbmVyOiAnbXVzdCBiZScgb3IgJ211c3Qgbm90IGJlJwoJICB2YXIgZGV0ZXJtaW5lcjsKCgkgIGlmICh0eXBlb2YgZXhwZWN0ZWQgPT09ICdzdHJpbmcnICYmIHN0YXJ0c1dpdGgoZXhwZWN0ZWQsICdub3QgJykpIHsKCSAgICBkZXRlcm1pbmVyID0gJ211c3Qgbm90IGJlJzsKCSAgICBleHBlY3RlZCA9IGV4cGVjdGVkLnJlcGxhY2UoL15ub3QgLywgJycpOwoJICB9IGVsc2UgewoJICAgIGRldGVybWluZXIgPSAnbXVzdCBiZSc7CgkgIH0KCgkgIHZhciBtc2c7CgoJICBpZiAoZW5kc1dpdGgobmFtZSwgJyBhcmd1bWVudCcpKSB7CgkgICAgLy8gRm9yIGNhc2VzIGxpa2UgJ2ZpcnN0IGFyZ3VtZW50JwoJICAgIG1zZyA9ICJUaGUgIi5jb25jYXQobmFtZSwgIiAiKS5jb25jYXQoZGV0ZXJtaW5lciwgIiAiKS5jb25jYXQob25lT2YoZXhwZWN0ZWQsICd0eXBlJykpOwoJICB9IGVsc2UgewoJICAgIHZhciB0eXBlID0gaW5jbHVkZXMobmFtZSwgJy4nKSA/ICdwcm9wZXJ0eScgOiAnYXJndW1lbnQnOwoJICAgIG1zZyA9ICJUaGUgXCIiLmNvbmNhdChuYW1lLCAiXCIgIikuY29uY2F0KHR5cGUsICIgIikuY29uY2F0KGRldGVybWluZXIsICIgIikuY29uY2F0KG9uZU9mKGV4cGVjdGVkLCAndHlwZScpKTsKCSAgfQoKCSAgbXNnICs9ICIuIFJlY2VpdmVkIHR5cGUgIi5jb25jYXQodHlwZW9mIGFjdHVhbCk7CgkgIHJldHVybiBtc2c7Cgl9LCBUeXBlRXJyb3IpOwoJY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX1BVU0hfQUZURVJfRU9GJywgJ3N0cmVhbS5wdXNoKCkgYWZ0ZXIgRU9GJyk7CgljcmVhdGVFcnJvclR5cGUoJ0VSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEJywgZnVuY3Rpb24gKG5hbWUpIHsKCSAgcmV0dXJuICdUaGUgJyArIG5hbWUgKyAnIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQnOwoJfSk7CgljcmVhdGVFcnJvclR5cGUoJ0VSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFJywgJ1ByZW1hdHVyZSBjbG9zZScpOwoJY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX0RFU1RST1lFRCcsIGZ1bmN0aW9uIChuYW1lKSB7CgkgIHJldHVybiAnQ2Fubm90IGNhbGwgJyArIG5hbWUgKyAnIGFmdGVyIGEgc3RyZWFtIHdhcyBkZXN0cm95ZWQnOwoJfSk7CgljcmVhdGVFcnJvclR5cGUoJ0VSUl9NVUxUSVBMRV9DQUxMQkFDSycsICdDYWxsYmFjayBjYWxsZWQgbXVsdGlwbGUgdGltZXMnKTsKCWNyZWF0ZUVycm9yVHlwZSgnRVJSX1NUUkVBTV9DQU5OT1RfUElQRScsICdDYW5ub3QgcGlwZSwgbm90IHJlYWRhYmxlJyk7CgljcmVhdGVFcnJvclR5cGUoJ0VSUl9TVFJFQU1fV1JJVEVfQUZURVJfRU5EJywgJ3dyaXRlIGFmdGVyIGVuZCcpOwoJY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX05VTExfVkFMVUVTJywgJ01heSBub3Qgd3JpdGUgbnVsbCB2YWx1ZXMgdG8gc3RyZWFtJywgVHlwZUVycm9yKTsKCWNyZWF0ZUVycm9yVHlwZSgnRVJSX1VOS05PV05fRU5DT0RJTkcnLCBmdW5jdGlvbiAoYXJnKSB7CgkgIHJldHVybiAnVW5rbm93biBlbmNvZGluZzogJyArIGFyZzsKCX0sIFR5cGVFcnJvcik7CgljcmVhdGVFcnJvclR5cGUoJ0VSUl9TVFJFQU1fVU5TSElGVF9BRlRFUl9FTkRfRVZFTlQnLCAnc3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnQnKTsKCXZhciBjb2Rlc18xID0gY29kZXM7CgoJdmFyIGVycm9yc0Jyb3dzZXIgPSB7CgkJY29kZXM6IGNvZGVzXzEKCX07CgoJdmFyIEVSUl9JTlZBTElEX09QVF9WQUxVRSA9IGVycm9yc0Jyb3dzZXIuY29kZXMuRVJSX0lOVkFMSURfT1BUX1ZBTFVFOwoKCWZ1bmN0aW9uIGhpZ2hXYXRlck1hcmtGcm9tKG9wdGlvbnMsIGlzRHVwbGV4LCBkdXBsZXhLZXkpIHsKCSAgcmV0dXJuIG9wdGlvbnMuaGlnaFdhdGVyTWFyayAhPSBudWxsID8gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrIDogaXNEdXBsZXggPyBvcHRpb25zW2R1cGxleEtleV0gOiBudWxsOwoJfQoKCWZ1bmN0aW9uIGdldEhpZ2hXYXRlck1hcmsoc3RhdGUsIG9wdGlvbnMsIGR1cGxleEtleSwgaXNEdXBsZXgpIHsKCSAgdmFyIGh3bSA9IGhpZ2hXYXRlck1hcmtGcm9tKG9wdGlvbnMsIGlzRHVwbGV4LCBkdXBsZXhLZXkpOwoKCSAgaWYgKGh3bSAhPSBudWxsKSB7CgkgICAgaWYgKCEoaXNGaW5pdGUoaHdtKSAmJiBNYXRoLmZsb29yKGh3bSkgPT09IGh3bSkgfHwgaHdtIDwgMCkgewoJICAgICAgdmFyIG5hbWUgPSBpc0R1cGxleCA/IGR1cGxleEtleSA6ICdoaWdoV2F0ZXJNYXJrJzsKCSAgICAgIHRocm93IG5ldyBFUlJfSU5WQUxJRF9PUFRfVkFMVUUobmFtZSwgaHdtKTsKCSAgICB9CgoJICAgIHJldHVybiBNYXRoLmZsb29yKGh3bSk7CgkgIH0gLy8gRGVmYXVsdCB2YWx1ZQoKCgkgIHJldHVybiBzdGF0ZS5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7Cgl9CgoJdmFyIHN0YXRlID0gewoJICBnZXRIaWdoV2F0ZXJNYXJrOiBnZXRIaWdoV2F0ZXJNYXJrCgl9OwoKCXZhciBpbmhlcml0c19icm93c2VyID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSkgewoJaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7CgkgIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlCgkgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7CgkgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3I7CgkgICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHsKCSAgICAgIGNvbnN0cnVjdG9yOiB7CgkgICAgICAgIHZhbHVlOiBjdG9yLAoJICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKCSAgICAgICAgd3JpdGFibGU6IHRydWUsCgkgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQoJICAgICAgfQoJICAgIH0pOwoJICB9OwoJfSBlbHNlIHsKCSAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnMKCSAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHsKCSAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvcjsKCSAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fTsKCSAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlOwoJICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKCk7CgkgICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yOwoJICB9OwoJfQoJfSwgIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL2luaGVyaXRzIik7CgoJLyogZXNsaW50LWRpc2FibGUgbm9kZS9uby1kZXByZWNhdGVkLWFwaSAqLwoKCXZhciBzYWZlQnVmZmVyID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewoJdmFyIEJ1ZmZlciA9IGJ1ZmZlci5CdWZmZXI7CgoJLy8gYWx0ZXJuYXRpdmUgdG8gdXNpbmcgT2JqZWN0LmtleXMgZm9yIG9sZCBicm93c2VycwoJZnVuY3Rpb24gY29weVByb3BzIChzcmMsIGRzdCkgewoJICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7CgkgICAgZHN0W2tleV0gPSBzcmNba2V5XTsKCSAgfQoJfQoJaWYgKEJ1ZmZlci5mcm9tICYmIEJ1ZmZlci5hbGxvYyAmJiBCdWZmZXIuYWxsb2NVbnNhZmUgJiYgQnVmZmVyLmFsbG9jVW5zYWZlU2xvdykgewoJICBtb2R1bGUuZXhwb3J0cyA9IGJ1ZmZlcjsKCX0gZWxzZSB7CgkgIC8vIENvcHkgcHJvcGVydGllcyBmcm9tIHJlcXVpcmUoJ2J1ZmZlcicpCgkgIGNvcHlQcm9wcyhidWZmZXIsIGV4cG9ydHMpOwoJICBleHBvcnRzLkJ1ZmZlciA9IFNhZmVCdWZmZXI7Cgl9CgoJZnVuY3Rpb24gU2FmZUJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgcmV0dXJuIEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKCX0KCgkvLyBDb3B5IHN0YXRpYyBtZXRob2RzIGZyb20gQnVmZmVyCgljb3B5UHJvcHMoQnVmZmVyLCBTYWZlQnVmZmVyKTsKCglTYWZlQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKQoJICB9CgkgIHJldHVybiBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCgl9OwoKCVNhZmVCdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKCSAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKQoJICB9CgkgIHZhciBidWYgPSBCdWZmZXIoc2l6ZSk7CgkgIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHsKCSAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJykgewoJICAgICAgYnVmLmZpbGwoZmlsbCwgZW5jb2RpbmcpOwoJICAgIH0gZWxzZSB7CgkgICAgICBidWYuZmlsbChmaWxsKTsKCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgYnVmLmZpbGwoMCk7CgkgIH0KCSAgcmV0dXJuIGJ1ZgoJfTsKCglTYWZlQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHsKCSAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKQoJICB9CgkgIHJldHVybiBCdWZmZXIoc2l6ZSkKCX07CgoJU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkgewoJICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpCgkgIH0KCSAgcmV0dXJuIGJ1ZmZlci5TbG93QnVmZmVyKHNpemUpCgl9OwoJfSwgIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL3NhZmUtYnVmZmVyIik7CgoJLyo8cmVwbGFjZW1lbnQ+Ki8KCgl2YXIgQnVmZmVyJDEgPSBzYWZlQnVmZmVyLkJ1ZmZlcjsKCS8qPC9yZXBsYWNlbWVudD4qLwoKCXZhciBpc0VuY29kaW5nID0gQnVmZmVyJDEuaXNFbmNvZGluZyB8fCBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgZW5jb2RpbmcgPSAnJyArIGVuY29kaW5nOwoJICBzd2l0Y2ggKGVuY29kaW5nICYmIGVuY29kaW5nLnRvTG93ZXJDYXNlKCkpIHsKCSAgICBjYXNlICdoZXgnOmNhc2UgJ3V0ZjgnOmNhc2UgJ3V0Zi04JzpjYXNlICdhc2NpaSc6Y2FzZSAnYmluYXJ5JzpjYXNlICdiYXNlNjQnOmNhc2UgJ3VjczInOmNhc2UgJ3Vjcy0yJzpjYXNlICd1dGYxNmxlJzpjYXNlICd1dGYtMTZsZSc6Y2FzZSAncmF3JzoKCSAgICAgIHJldHVybiB0cnVlOwoJICAgIGRlZmF1bHQ6CgkgICAgICByZXR1cm4gZmFsc2U7CgkgIH0KCX07CgoJZnVuY3Rpb24gX25vcm1hbGl6ZUVuY29kaW5nKGVuYykgewoJICBpZiAoIWVuYykgcmV0dXJuICd1dGY4JzsKCSAgdmFyIHJldHJpZWQ7CgkgIHdoaWxlICh0cnVlKSB7CgkgICAgc3dpdGNoIChlbmMpIHsKCSAgICAgIGNhc2UgJ3V0ZjgnOgoJICAgICAgY2FzZSAndXRmLTgnOgoJICAgICAgICByZXR1cm4gJ3V0ZjgnOwoJICAgICAgY2FzZSAndWNzMic6CgkgICAgICBjYXNlICd1Y3MtMic6CgkgICAgICBjYXNlICd1dGYxNmxlJzoKCSAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKCSAgICAgICAgcmV0dXJuICd1dGYxNmxlJzsKCSAgICAgIGNhc2UgJ2xhdGluMSc6CgkgICAgICBjYXNlICdiaW5hcnknOgoJICAgICAgICByZXR1cm4gJ2xhdGluMSc7CgkgICAgICBjYXNlICdiYXNlNjQnOgoJICAgICAgY2FzZSAnYXNjaWknOgoJICAgICAgY2FzZSAnaGV4JzoKCSAgICAgICAgcmV0dXJuIGVuYzsKCSAgICAgIGRlZmF1bHQ6CgkgICAgICAgIGlmIChyZXRyaWVkKSByZXR1cm47IC8vIHVuZGVmaW5lZAoJICAgICAgICBlbmMgPSAoJycgKyBlbmMpLnRvTG93ZXJDYXNlKCk7CgkgICAgICAgIHJldHJpZWQgPSB0cnVlOwoJICAgIH0KCSAgfQoJfQoJLy8gRG8gbm90IGNhY2hlIGBCdWZmZXIuaXNFbmNvZGluZ2Agd2hlbiBjaGVja2luZyBlbmNvZGluZyBuYW1lcyBhcyBzb21lCgkvLyBtb2R1bGVzIG1vbmtleS1wYXRjaCBpdCB0byBzdXBwb3J0IGFkZGl0aW9uYWwgZW5jb2RpbmdzCglmdW5jdGlvbiBub3JtYWxpemVFbmNvZGluZyhlbmMpIHsKCSAgdmFyIG5lbmMgPSBfbm9ybWFsaXplRW5jb2RpbmcoZW5jKTsKCSAgaWYgKHR5cGVvZiBuZW5jICE9PSAnc3RyaW5nJyAmJiAoQnVmZmVyJDEuaXNFbmNvZGluZyA9PT0gaXNFbmNvZGluZyB8fCAhaXNFbmNvZGluZyhlbmMpKSkgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jKTsKCSAgcmV0dXJuIG5lbmMgfHwgZW5jOwoJfQoKCS8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2YKCS8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZQoJLy8gY2hhcmFjdGVycy4KCXZhciBTdHJpbmdEZWNvZGVyXzEgPSBTdHJpbmdEZWNvZGVyOwoJZnVuY3Rpb24gU3RyaW5nRGVjb2RlcihlbmNvZGluZykgewoJICB0aGlzLmVuY29kaW5nID0gbm9ybWFsaXplRW5jb2RpbmcoZW5jb2RpbmcpOwoJICB2YXIgbmI7CgkgIHN3aXRjaCAodGhpcy5lbmNvZGluZykgewoJICAgIGNhc2UgJ3V0ZjE2bGUnOgoJICAgICAgdGhpcy50ZXh0ID0gdXRmMTZUZXh0OwoJICAgICAgdGhpcy5lbmQgPSB1dGYxNkVuZDsKCSAgICAgIG5iID0gNDsKCSAgICAgIGJyZWFrOwoJICAgIGNhc2UgJ3V0ZjgnOgoJICAgICAgdGhpcy5maWxsTGFzdCA9IHV0ZjhGaWxsTGFzdDsKCSAgICAgIG5iID0gNDsKCSAgICAgIGJyZWFrOwoJICAgIGNhc2UgJ2Jhc2U2NCc6CgkgICAgICB0aGlzLnRleHQgPSBiYXNlNjRUZXh0OwoJICAgICAgdGhpcy5lbmQgPSBiYXNlNjRFbmQ7CgkgICAgICBuYiA9IDM7CgkgICAgICBicmVhazsKCSAgICBkZWZhdWx0OgoJICAgICAgdGhpcy53cml0ZSA9IHNpbXBsZVdyaXRlOwoJICAgICAgdGhpcy5lbmQgPSBzaW1wbGVFbmQ7CgkgICAgICByZXR1cm47CgkgIH0KCSAgdGhpcy5sYXN0TmVlZCA9IDA7CgkgIHRoaXMubGFzdFRvdGFsID0gMDsKCSAgdGhpcy5sYXN0Q2hhciA9IEJ1ZmZlciQxLmFsbG9jVW5zYWZlKG5iKTsKCX0KCglTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChidWYpIHsKCSAgaWYgKGJ1Zi5sZW5ndGggPT09IDApIHJldHVybiAnJzsKCSAgdmFyIHI7CgkgIHZhciBpOwoJICBpZiAodGhpcy5sYXN0TmVlZCkgewoJICAgIHIgPSB0aGlzLmZpbGxMYXN0KGJ1Zik7CgkgICAgaWYgKHIgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnOwoJICAgIGkgPSB0aGlzLmxhc3ROZWVkOwoJICAgIHRoaXMubGFzdE5lZWQgPSAwOwoJICB9IGVsc2UgewoJICAgIGkgPSAwOwoJICB9CgkgIGlmIChpIDwgYnVmLmxlbmd0aCkgcmV0dXJuIHIgPyByICsgdGhpcy50ZXh0KGJ1ZiwgaSkgOiB0aGlzLnRleHQoYnVmLCBpKTsKCSAgcmV0dXJuIHIgfHwgJyc7Cgl9OwoKCVN0cmluZ0RlY29kZXIucHJvdG90eXBlLmVuZCA9IHV0ZjhFbmQ7CgoJLy8gUmV0dXJucyBvbmx5IGNvbXBsZXRlIGNoYXJhY3RlcnMgaW4gYSBCdWZmZXIKCVN0cmluZ0RlY29kZXIucHJvdG90eXBlLnRleHQgPSB1dGY4VGV4dDsKCgkvLyBBdHRlbXB0cyB0byBjb21wbGV0ZSBhIHBhcnRpYWwgbm9uLVVURi04IGNoYXJhY3RlciB1c2luZyBieXRlcyBmcm9tIGEgQnVmZmVyCglTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5maWxsTGFzdCA9IGZ1bmN0aW9uIChidWYpIHsKCSAgaWYgKHRoaXMubGFzdE5lZWQgPD0gYnVmLmxlbmd0aCkgewoJICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgdGhpcy5sYXN0TmVlZCk7CgkgICAgcmV0dXJuIHRoaXMubGFzdENoYXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywgMCwgdGhpcy5sYXN0VG90YWwpOwoJICB9CgkgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgYnVmLmxlbmd0aCk7CgkgIHRoaXMubGFzdE5lZWQgLT0gYnVmLmxlbmd0aDsKCX07CgoJLy8gQ2hlY2tzIHRoZSB0eXBlIG9mIGEgVVRGLTggYnl0ZSwgd2hldGhlciBpdCdzIEFTQ0lJLCBhIGxlYWRpbmcgYnl0ZSwgb3IgYQoJLy8gY29udGludWF0aW9uIGJ5dGUuIElmIGFuIGludmFsaWQgYnl0ZSBpcyBkZXRlY3RlZCwgLTIgaXMgcmV0dXJuZWQuCglmdW5jdGlvbiB1dGY4Q2hlY2tCeXRlKGJ5dGUpIHsKCSAgaWYgKGJ5dGUgPD0gMHg3RikgcmV0dXJuIDA7ZWxzZSBpZiAoYnl0ZSA+PiA1ID09PSAweDA2KSByZXR1cm4gMjtlbHNlIGlmIChieXRlID4+IDQgPT09IDB4MEUpIHJldHVybiAzO2Vsc2UgaWYgKGJ5dGUgPj4gMyA9PT0gMHgxRSkgcmV0dXJuIDQ7CgkgIHJldHVybiBieXRlID4+IDYgPT09IDB4MDIgPyAtMSA6IC0yOwoJfQoKCS8vIENoZWNrcyBhdCBtb3N0IDMgYnl0ZXMgYXQgdGhlIGVuZCBvZiBhIEJ1ZmZlciBpbiBvcmRlciB0byBkZXRlY3QgYW4KCS8vIGluY29tcGxldGUgbXVsdGktYnl0ZSBVVEYtOCBjaGFyYWN0ZXIuIFRoZSB0b3RhbCBudW1iZXIgb2YgYnl0ZXMgKDIsIDMsIG9yIDQpCgkvLyBuZWVkZWQgdG8gY29tcGxldGUgdGhlIFVURi04IGNoYXJhY3RlciAoaWYgYXBwbGljYWJsZSkgYXJlIHJldHVybmVkLgoJZnVuY3Rpb24gdXRmOENoZWNrSW5jb21wbGV0ZShzZWxmLCBidWYsIGkpIHsKCSAgdmFyIGogPSBidWYubGVuZ3RoIC0gMTsKCSAgaWYgKGogPCBpKSByZXR1cm4gMDsKCSAgdmFyIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pOwoJICBpZiAobmIgPj0gMCkgewoJICAgIGlmIChuYiA+IDApIHNlbGYubGFzdE5lZWQgPSBuYiAtIDE7CgkgICAgcmV0dXJuIG5iOwoJICB9CgkgIGlmICgtLWogPCBpIHx8IG5iID09PSAtMikgcmV0dXJuIDA7CgkgIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pOwoJICBpZiAobmIgPj0gMCkgewoJICAgIGlmIChuYiA+IDApIHNlbGYubGFzdE5lZWQgPSBuYiAtIDI7CgkgICAgcmV0dXJuIG5iOwoJICB9CgkgIGlmICgtLWogPCBpIHx8IG5iID09PSAtMikgcmV0dXJuIDA7CgkgIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pOwoJICBpZiAobmIgPj0gMCkgewoJICAgIGlmIChuYiA+IDApIHsKCSAgICAgIGlmIChuYiA9PT0gMikgbmIgPSAwO2Vsc2Ugc2VsZi5sYXN0TmVlZCA9IG5iIC0gMzsKCSAgICB9CgkgICAgcmV0dXJuIG5iOwoJICB9CgkgIHJldHVybiAwOwoJfQoKCS8vIFZhbGlkYXRlcyBhcyBtYW55IGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3RlciBhcwoJLy8gbmVlZGVkIG9yIGFyZSBhdmFpbGFibGUuIElmIHdlIHNlZSBhIG5vbi1jb250aW51YXRpb24gYnl0ZSB3aGVyZSB3ZSBleHBlY3QKCS8vIG9uZSwgd2UgInJlcGxhY2UiIHRoZSB2YWxpZGF0ZWQgY29udGludWF0aW9uIGJ5dGVzIHdlJ3ZlIHNlZW4gc28gZmFyIHdpdGgKCS8vIGEgc2luZ2xlIFVURi04IHJlcGxhY2VtZW50IGNoYXJhY3RlciAoJ1x1ZmZmZCcpLCB0byBtYXRjaCB2OCdzIFVURi04IGRlY29kaW5nCgkvLyBiZWhhdmlvci4gVGhlIGNvbnRpbnVhdGlvbiBieXRlIGNoZWNrIGlzIGluY2x1ZGVkIHRocmVlIHRpbWVzIGluIHRoZSBjYXNlCgkvLyB3aGVyZSBhbGwgb2YgdGhlIGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBjaGFyYWN0ZXIgZXhpc3QgaW4gdGhlIHNhbWUgYnVmZmVyLgoJLy8gSXQgaXMgYWxzbyBkb25lIHRoaXMgd2F5IGFzIGEgc2xpZ2h0IHBlcmZvcm1hbmNlIGluY3JlYXNlIGluc3RlYWQgb2YgdXNpbmcgYQoJLy8gbG9vcC4KCWZ1bmN0aW9uIHV0ZjhDaGVja0V4dHJhQnl0ZXMoc2VsZiwgYnVmLCBwKSB7CgkgIGlmICgoYnVmWzBdICYgMHhDMCkgIT09IDB4ODApIHsKCSAgICBzZWxmLmxhc3ROZWVkID0gMDsKCSAgICByZXR1cm4gJ1x1ZmZmZCc7CgkgIH0KCSAgaWYgKHNlbGYubGFzdE5lZWQgPiAxICYmIGJ1Zi5sZW5ndGggPiAxKSB7CgkgICAgaWYgKChidWZbMV0gJiAweEMwKSAhPT0gMHg4MCkgewoJICAgICAgc2VsZi5sYXN0TmVlZCA9IDE7CgkgICAgICByZXR1cm4gJ1x1ZmZmZCc7CgkgICAgfQoJICAgIGlmIChzZWxmLmxhc3ROZWVkID4gMiAmJiBidWYubGVuZ3RoID4gMikgewoJICAgICAgaWYgKChidWZbMl0gJiAweEMwKSAhPT0gMHg4MCkgewoJICAgICAgICBzZWxmLmxhc3ROZWVkID0gMjsKCSAgICAgICAgcmV0dXJuICdcdWZmZmQnOwoJICAgICAgfQoJICAgIH0KCSAgfQoJfQoKCS8vIEF0dGVtcHRzIHRvIGNvbXBsZXRlIGEgbXVsdGktYnl0ZSBVVEYtOCBjaGFyYWN0ZXIgdXNpbmcgYnl0ZXMgZnJvbSBhIEJ1ZmZlci4KCWZ1bmN0aW9uIHV0ZjhGaWxsTGFzdChidWYpIHsKCSAgdmFyIHAgPSB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQ7CgkgIHZhciByID0gdXRmOENoZWNrRXh0cmFCeXRlcyh0aGlzLCBidWYpOwoJICBpZiAociAhPT0gdW5kZWZpbmVkKSByZXR1cm4gcjsKCSAgaWYgKHRoaXMubGFzdE5lZWQgPD0gYnVmLmxlbmd0aCkgewoJICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHAsIDAsIHRoaXMubGFzdE5lZWQpOwoJICAgIHJldHVybiB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsIDAsIHRoaXMubGFzdFRvdGFsKTsKCSAgfQoJICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCBwLCAwLCBidWYubGVuZ3RoKTsKCSAgdGhpcy5sYXN0TmVlZCAtPSBidWYubGVuZ3RoOwoJfQoKCS8vIFJldHVybnMgYWxsIGNvbXBsZXRlIFVURi04IGNoYXJhY3RlcnMgaW4gYSBCdWZmZXIuIElmIHRoZSBCdWZmZXIgZW5kZWQgb24gYQoJLy8gcGFydGlhbCBjaGFyYWN0ZXIsIHRoZSBjaGFyYWN0ZXIncyBieXRlcyBhcmUgYnVmZmVyZWQgdW50aWwgdGhlIHJlcXVpcmVkCgkvLyBudW1iZXIgb2YgYnl0ZXMgYXJlIGF2YWlsYWJsZS4KCWZ1bmN0aW9uIHV0ZjhUZXh0KGJ1ZiwgaSkgewoJICB2YXIgdG90YWwgPSB1dGY4Q2hlY2tJbmNvbXBsZXRlKHRoaXMsIGJ1ZiwgaSk7CgkgIGlmICghdGhpcy5sYXN0TmVlZCkgcmV0dXJuIGJ1Zi50b1N0cmluZygndXRmOCcsIGkpOwoJICB0aGlzLmxhc3RUb3RhbCA9IHRvdGFsOwoJICB2YXIgZW5kID0gYnVmLmxlbmd0aCAtICh0b3RhbCAtIHRoaXMubGFzdE5lZWQpOwoJICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCAwLCBlbmQpOwoJICByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGY4JywgaSwgZW5kKTsKCX0KCgkvLyBGb3IgVVRGLTgsIGEgcmVwbGFjZW1lbnQgY2hhcmFjdGVyIGlzIGFkZGVkIHdoZW4gZW5kaW5nIG9uIGEgcGFydGlhbAoJLy8gY2hhcmFjdGVyLgoJZnVuY3Rpb24gdXRmOEVuZChidWYpIHsKCSAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnOwoJICBpZiAodGhpcy5sYXN0TmVlZCkgcmV0dXJuIHIgKyAnXHVmZmZkJzsKCSAgcmV0dXJuIHI7Cgl9CgoJLy8gVVRGLTE2TEUgdHlwaWNhbGx5IG5lZWRzIHR3byBieXRlcyBwZXIgY2hhcmFjdGVyLCBidXQgZXZlbiBpZiB3ZSBoYXZlIGFuIGV2ZW4KCS8vIG51bWJlciBvZiBieXRlcyBhdmFpbGFibGUsIHdlIG5lZWQgdG8gY2hlY2sgaWYgd2UgZW5kIG9uIGEgbGVhZGluZy9oaWdoCgkvLyBzdXJyb2dhdGUuIEluIHRoYXQgY2FzZSwgd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgbmV4dCB0d28gYnl0ZXMgaW4gb3JkZXIgdG8KCS8vIGRlY29kZSB0aGUgbGFzdCBjaGFyYWN0ZXIgcHJvcGVybHkuCglmdW5jdGlvbiB1dGYxNlRleHQoYnVmLCBpKSB7CgkgIGlmICgoYnVmLmxlbmd0aCAtIGkpICUgMiA9PT0gMCkgewoJICAgIHZhciByID0gYnVmLnRvU3RyaW5nKCd1dGYxNmxlJywgaSk7CgkgICAgaWYgKHIpIHsKCSAgICAgIHZhciBjID0gci5jaGFyQ29kZUF0KHIubGVuZ3RoIC0gMSk7CgkgICAgICBpZiAoYyA+PSAweEQ4MDAgJiYgYyA8PSAweERCRkYpIHsKCSAgICAgICAgdGhpcy5sYXN0TmVlZCA9IDI7CgkgICAgICAgIHRoaXMubGFzdFRvdGFsID0gNDsKCSAgICAgICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMl07CgkgICAgICAgIHRoaXMubGFzdENoYXJbMV0gPSBidWZbYnVmLmxlbmd0aCAtIDFdOwoJICAgICAgICByZXR1cm4gci5zbGljZSgwLCAtMSk7CgkgICAgICB9CgkgICAgfQoJICAgIHJldHVybiByOwoJICB9CgkgIHRoaXMubGFzdE5lZWQgPSAxOwoJICB0aGlzLmxhc3RUb3RhbCA9IDI7CgkgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDFdOwoJICByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGYxNmxlJywgaSwgYnVmLmxlbmd0aCAtIDEpOwoJfQoKCS8vIEZvciBVVEYtMTZMRSB3ZSBkbyBub3QgZXhwbGljaXRseSBhcHBlbmQgc3BlY2lhbCByZXBsYWNlbWVudCBjaGFyYWN0ZXJzIGlmIHdlCgkvLyBlbmQgb24gYSBwYXJ0aWFsIGNoYXJhY3Rlciwgd2Ugc2ltcGx5IGxldCB2OCBoYW5kbGUgdGhhdC4KCWZ1bmN0aW9uIHV0ZjE2RW5kKGJ1ZikgewoJICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7CgkgIGlmICh0aGlzLmxhc3ROZWVkKSB7CgkgICAgdmFyIGVuZCA9IHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZDsKCSAgICByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoJ3V0ZjE2bGUnLCAwLCBlbmQpOwoJICB9CgkgIHJldHVybiByOwoJfQoKCWZ1bmN0aW9uIGJhc2U2NFRleHQoYnVmLCBpKSB7CgkgIHZhciBuID0gKGJ1Zi5sZW5ndGggLSBpKSAlIDM7CgkgIGlmIChuID09PSAwKSByZXR1cm4gYnVmLnRvU3RyaW5nKCdiYXNlNjQnLCBpKTsKCSAgdGhpcy5sYXN0TmVlZCA9IDMgLSBuOwoJICB0aGlzLmxhc3RUb3RhbCA9IDM7CgkgIGlmIChuID09PSAxKSB7CgkgICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07CgkgIH0gZWxzZSB7CgkgICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMl07CgkgICAgdGhpcy5sYXN0Q2hhclsxXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07CgkgIH0KCSAgcmV0dXJuIGJ1Zi50b1N0cmluZygnYmFzZTY0JywgaSwgYnVmLmxlbmd0aCAtIG4pOwoJfQoKCWZ1bmN0aW9uIGJhc2U2NEVuZChidWYpIHsKCSAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnOwoJICBpZiAodGhpcy5sYXN0TmVlZCkgcmV0dXJuIHIgKyB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKCdiYXNlNjQnLCAwLCAzIC0gdGhpcy5sYXN0TmVlZCk7CgkgIHJldHVybiByOwoJfQoKCS8vIFBhc3MgYnl0ZXMgb24gdGhyb3VnaCBmb3Igc2luZ2xlLWJ5dGUgZW5jb2RpbmdzIChlLmcuIGFzY2lpLCBsYXRpbjEsIGhleCkKCWZ1bmN0aW9uIHNpbXBsZVdyaXRlKGJ1ZikgewoJICByZXR1cm4gYnVmLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpOwoJfQoKCWZ1bmN0aW9uIHNpbXBsZUVuZChidWYpIHsKCSAgcmV0dXJuIGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7Cgl9CgoJdmFyIHN0cmluZ19kZWNvZGVyID0gewoJCVN0cmluZ0RlY29kZXI6IFN0cmluZ0RlY29kZXJfMQoJfTsKCgl2YXIgRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0UgPSBlcnJvcnNCcm93c2VyLmNvZGVzLkVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFOwoKCWZ1bmN0aW9uIG9uY2UkMShjYWxsYmFjaykgewoJICB2YXIgY2FsbGVkID0gZmFsc2U7CgkgIHJldHVybiBmdW5jdGlvbiAoKSB7CgkgICAgaWYgKGNhbGxlZCkgcmV0dXJuOwoJICAgIGNhbGxlZCA9IHRydWU7CgoJICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewoJICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKCSAgICB9CgoJICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpOwoJICB9OwoJfQoKCWZ1bmN0aW9uIG5vb3AoKSB7fQoKCWZ1bmN0aW9uIGlzUmVxdWVzdChzdHJlYW0pIHsKCSAgcmV0dXJuIHN0cmVhbS5zZXRIZWFkZXIgJiYgdHlwZW9mIHN0cmVhbS5hYm9ydCA9PT0gJ2Z1bmN0aW9uJzsKCX0KCglmdW5jdGlvbiBlb3Moc3RyZWFtLCBvcHRzLCBjYWxsYmFjaykgewoJICBpZiAodHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbicpIHJldHVybiBlb3Moc3RyZWFtLCBudWxsLCBvcHRzKTsKCSAgaWYgKCFvcHRzKSBvcHRzID0ge307CgkgIGNhbGxiYWNrID0gb25jZSQxKGNhbGxiYWNrIHx8IG5vb3ApOwoJICB2YXIgcmVhZGFibGUgPSBvcHRzLnJlYWRhYmxlIHx8IG9wdHMucmVhZGFibGUgIT09IGZhbHNlICYmIHN0cmVhbS5yZWFkYWJsZTsKCSAgdmFyIHdyaXRhYmxlID0gb3B0cy53cml0YWJsZSB8fCBvcHRzLndyaXRhYmxlICE9PSBmYWxzZSAmJiBzdHJlYW0ud3JpdGFibGU7CgoJICB2YXIgb25sZWdhY3lmaW5pc2ggPSBmdW5jdGlvbiBvbmxlZ2FjeWZpbmlzaCgpIHsKCSAgICBpZiAoIXN0cmVhbS53cml0YWJsZSkgb25maW5pc2goKTsKCSAgfTsKCgkgIHZhciB3cml0YWJsZUVuZGVkID0gc3RyZWFtLl93cml0YWJsZVN0YXRlICYmIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZDsKCgkgIHZhciBvbmZpbmlzaCA9IGZ1bmN0aW9uIG9uZmluaXNoKCkgewoJICAgIHdyaXRhYmxlID0gZmFsc2U7CgkgICAgd3JpdGFibGVFbmRlZCA9IHRydWU7CgkgICAgaWYgKCFyZWFkYWJsZSkgY2FsbGJhY2suY2FsbChzdHJlYW0pOwoJICB9OwoKCSAgdmFyIHJlYWRhYmxlRW5kZWQgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGUgJiYgc3RyZWFtLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQ7CgoJICB2YXIgb25lbmQgPSBmdW5jdGlvbiBvbmVuZCgpIHsKCSAgICByZWFkYWJsZSA9IGZhbHNlOwoJICAgIHJlYWRhYmxlRW5kZWQgPSB0cnVlOwoJICAgIGlmICghd3JpdGFibGUpIGNhbGxiYWNrLmNhbGwoc3RyZWFtKTsKCSAgfTsKCgkgIHZhciBvbmVycm9yID0gZnVuY3Rpb24gb25lcnJvcihlcnIpIHsKCSAgICBjYWxsYmFjay5jYWxsKHN0cmVhbSwgZXJyKTsKCSAgfTsKCgkgIHZhciBvbmNsb3NlID0gZnVuY3Rpb24gb25jbG9zZSgpIHsKCSAgICB2YXIgZXJyOwoKCSAgICBpZiAocmVhZGFibGUgJiYgIXJlYWRhYmxlRW5kZWQpIHsKCSAgICAgIGlmICghc3RyZWFtLl9yZWFkYWJsZVN0YXRlIHx8ICFzdHJlYW0uX3JlYWRhYmxlU3RhdGUuZW5kZWQpIGVyciA9IG5ldyBFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRSgpOwoJICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwoc3RyZWFtLCBlcnIpOwoJICAgIH0KCgkgICAgaWYgKHdyaXRhYmxlICYmICF3cml0YWJsZUVuZGVkKSB7CgkgICAgICBpZiAoIXN0cmVhbS5fd3JpdGFibGVTdGF0ZSB8fCAhc3RyZWFtLl93cml0YWJsZVN0YXRlLmVuZGVkKSBlcnIgPSBuZXcgRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0UoKTsKCSAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHN0cmVhbSwgZXJyKTsKCSAgICB9CgkgIH07CgoJICB2YXIgb25yZXF1ZXN0ID0gZnVuY3Rpb24gb25yZXF1ZXN0KCkgewoJICAgIHN0cmVhbS5yZXEub24oJ2ZpbmlzaCcsIG9uZmluaXNoKTsKCSAgfTsKCgkgIGlmIChpc1JlcXVlc3Qoc3RyZWFtKSkgewoJICAgIHN0cmVhbS5vbignY29tcGxldGUnLCBvbmZpbmlzaCk7CgkgICAgc3RyZWFtLm9uKCdhYm9ydCcsIG9uY2xvc2UpOwoJICAgIGlmIChzdHJlYW0ucmVxKSBvbnJlcXVlc3QoKTtlbHNlIHN0cmVhbS5vbigncmVxdWVzdCcsIG9ucmVxdWVzdCk7CgkgIH0gZWxzZSBpZiAod3JpdGFibGUgJiYgIXN0cmVhbS5fd3JpdGFibGVTdGF0ZSkgewoJICAgIC8vIGxlZ2FjeSBzdHJlYW1zCgkgICAgc3RyZWFtLm9uKCdlbmQnLCBvbmxlZ2FjeWZpbmlzaCk7CgkgICAgc3RyZWFtLm9uKCdjbG9zZScsIG9ubGVnYWN5ZmluaXNoKTsKCSAgfQoKCSAgc3RyZWFtLm9uKCdlbmQnLCBvbmVuZCk7CgkgIHN0cmVhbS5vbignZmluaXNoJywgb25maW5pc2gpOwoJICBpZiAob3B0cy5lcnJvciAhPT0gZmFsc2UpIHN0cmVhbS5vbignZXJyb3InLCBvbmVycm9yKTsKCSAgc3RyZWFtLm9uKCdjbG9zZScsIG9uY2xvc2UpOwoJICByZXR1cm4gZnVuY3Rpb24gKCkgewoJICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignY29tcGxldGUnLCBvbmZpbmlzaCk7CgkgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdhYm9ydCcsIG9uY2xvc2UpOwoJICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcigncmVxdWVzdCcsIG9ucmVxdWVzdCk7CgkgICAgaWYgKHN0cmVhbS5yZXEpIHN0cmVhbS5yZXEucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTsKCSAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9ubGVnYWN5ZmluaXNoKTsKCSAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25sZWdhY3lmaW5pc2gpOwoJICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpOwoJICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpOwoJICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKCSAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7CgkgIH07Cgl9CgoJdmFyIGVuZE9mU3RyZWFtID0gZW9zOwoKCXZhciBfT2JqZWN0JHNldFByb3RvdHlwZU87CgoJZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5JDEob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKCgoJdmFyIGtMYXN0UmVzb2x2ZSA9IFN5bWJvbCgnbGFzdFJlc29sdmUnKTsKCXZhciBrTGFzdFJlamVjdCA9IFN5bWJvbCgnbGFzdFJlamVjdCcpOwoJdmFyIGtFcnJvciA9IFN5bWJvbCgnZXJyb3InKTsKCXZhciBrRW5kZWQgPSBTeW1ib2woJ2VuZGVkJyk7Cgl2YXIga0xhc3RQcm9taXNlID0gU3ltYm9sKCdsYXN0UHJvbWlzZScpOwoJdmFyIGtIYW5kbGVQcm9taXNlID0gU3ltYm9sKCdoYW5kbGVQcm9taXNlJyk7Cgl2YXIga1N0cmVhbSA9IFN5bWJvbCgnc3RyZWFtJyk7CgoJZnVuY3Rpb24gY3JlYXRlSXRlclJlc3VsdCh2YWx1ZSwgZG9uZSkgewoJICByZXR1cm4gewoJICAgIHZhbHVlOiB2YWx1ZSwKCSAgICBkb25lOiBkb25lCgkgIH07Cgl9CgoJZnVuY3Rpb24gcmVhZEFuZFJlc29sdmUoaXRlcikgewoJICB2YXIgcmVzb2x2ZSA9IGl0ZXJba0xhc3RSZXNvbHZlXTsKCgkgIGlmIChyZXNvbHZlICE9PSBudWxsKSB7CgkgICAgdmFyIGRhdGEgPSBpdGVyW2tTdHJlYW1dLnJlYWQoKTsgLy8gd2UgZGVmZXIgaWYgZGF0YSBpcyBudWxsCgkgICAgLy8gd2UgY2FuIGJlIGV4cGVjdGluZyBlaXRoZXIgJ2VuZCcgb3IKCSAgICAvLyAnZXJyb3InCgoJICAgIGlmIChkYXRhICE9PSBudWxsKSB7CgkgICAgICBpdGVyW2tMYXN0UHJvbWlzZV0gPSBudWxsOwoJICAgICAgaXRlcltrTGFzdFJlc29sdmVdID0gbnVsbDsKCSAgICAgIGl0ZXJba0xhc3RSZWplY3RdID0gbnVsbDsKCSAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdChkYXRhLCBmYWxzZSkpOwoJICAgIH0KCSAgfQoJfQoKCWZ1bmN0aW9uIG9uUmVhZGFibGUoaXRlcikgewoJICAvLyB3ZSB3YWl0IGZvciB0aGUgbmV4dCB0aWNrLCBiZWNhdXNlIGl0IG1pZ2h0CgkgIC8vIGVtaXQgYW4gZXJyb3Igd2l0aCBwcm9jZXNzLm5leHRUaWNrCgkgIHByb2Nlc3MubmV4dFRpY2socmVhZEFuZFJlc29sdmUsIGl0ZXIpOwoJfQoKCWZ1bmN0aW9uIHdyYXBGb3JOZXh0KGxhc3RQcm9taXNlLCBpdGVyKSB7CgkgIHJldHVybiBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgbGFzdFByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7CgkgICAgICBpZiAoaXRlcltrRW5kZWRdKSB7CgkgICAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdCh1bmRlZmluZWQsIHRydWUpKTsKCSAgICAgICAgcmV0dXJuOwoJICAgICAgfQoKCSAgICAgIGl0ZXJba0hhbmRsZVByb21pc2VdKHJlc29sdmUsIHJlamVjdCk7CgkgICAgfSwgcmVqZWN0KTsKCSAgfTsKCX0KCgl2YXIgQXN5bmNJdGVyYXRvclByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihmdW5jdGlvbiAoKSB7fSk7Cgl2YXIgUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yUHJvdG90eXBlID0gT2JqZWN0LnNldFByb3RvdHlwZU9mKChfT2JqZWN0JHNldFByb3RvdHlwZU8gPSB7CgkgIGdldCBzdHJlYW0oKSB7CgkgICAgcmV0dXJuIHRoaXNba1N0cmVhbV07CgkgIH0sCgoJICBuZXh0OiBmdW5jdGlvbiBuZXh0KCkgewoJICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgIC8vIGlmIHdlIGhhdmUgZGV0ZWN0ZWQgYW4gZXJyb3IgaW4gdGhlIG1lYW53aGlsZQoJICAgIC8vIHJlamVjdCBzdHJhaWdodCBhd2F5CgkgICAgdmFyIGVycm9yID0gdGhpc1trRXJyb3JdOwoKCSAgICBpZiAoZXJyb3IgIT09IG51bGwpIHsKCSAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CgkgICAgfQoKCSAgICBpZiAodGhpc1trRW5kZWRdKSB7CgkgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQodW5kZWZpbmVkLCB0cnVlKSk7CgkgICAgfQoKCSAgICBpZiAodGhpc1trU3RyZWFtXS5kZXN0cm95ZWQpIHsKCSAgICAgIC8vIFdlIG5lZWQgdG8gZGVmZXIgdmlhIG5leHRUaWNrIGJlY2F1c2UgaWYgLmRlc3Ryb3koZXJyKSBpcwoJICAgICAgLy8gY2FsbGVkLCB0aGUgZXJyb3Igd2lsbCBiZSBlbWl0dGVkIHZpYSBuZXh0VGljaywgYW5kCgkgICAgICAvLyB3ZSBjYW5ub3QgZ3VhcmFudGVlIHRoYXQgdGhlcmUgaXMgbm8gZXJyb3IgbGluZ2VyaW5nIGFyb3VuZAoJICAgICAgLy8gd2FpdGluZyB0byBiZSBlbWl0dGVkLgoJICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCSAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgaWYgKF90aGlzW2tFcnJvcl0pIHsKCSAgICAgICAgICAgIHJlamVjdChfdGhpc1trRXJyb3JdKTsKCSAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpOwoJICAgICAgICAgIH0KCSAgICAgICAgfSk7CgkgICAgICB9KTsKCSAgICB9IC8vIGlmIHdlIGhhdmUgbXVsdGlwbGUgbmV4dCgpIGNhbGxzCgkgICAgLy8gd2Ugd2lsbCB3YWl0IGZvciB0aGUgcHJldmlvdXMgUHJvbWlzZSB0byBmaW5pc2gKCSAgICAvLyB0aGlzIGxvZ2ljIGlzIG9wdGltaXplZCB0byBzdXBwb3J0IGZvciBhd2FpdCBsb29wcywKCSAgICAvLyB3aGVyZSBuZXh0KCkgaXMgb25seSBjYWxsZWQgb25jZSBhdCBhIHRpbWUKCgoJICAgIHZhciBsYXN0UHJvbWlzZSA9IHRoaXNba0xhc3RQcm9taXNlXTsKCSAgICB2YXIgcHJvbWlzZTsKCgkgICAgaWYgKGxhc3RQcm9taXNlKSB7CgkgICAgICBwcm9taXNlID0gbmV3IFByb21pc2Uod3JhcEZvck5leHQobGFzdFByb21pc2UsIHRoaXMpKTsKCSAgICB9IGVsc2UgewoJICAgICAgLy8gZmFzdCBwYXRoIG5lZWRlZCB0byBzdXBwb3J0IG11bHRpcGxlIHRoaXMucHVzaCgpCgkgICAgICAvLyB3aXRob3V0IHRyaWdnZXJpbmcgdGhlIG5leHQoKSBxdWV1ZQoJICAgICAgdmFyIGRhdGEgPSB0aGlzW2tTdHJlYW1dLnJlYWQoKTsKCgkgICAgICBpZiAoZGF0YSAhPT0gbnVsbCkgewoJICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQoZGF0YSwgZmFsc2UpKTsKCSAgICAgIH0KCgkgICAgICBwcm9taXNlID0gbmV3IFByb21pc2UodGhpc1trSGFuZGxlUHJvbWlzZV0pOwoJICAgIH0KCgkgICAgdGhpc1trTGFzdFByb21pc2VdID0gcHJvbWlzZTsKCSAgICByZXR1cm4gcHJvbWlzZTsKCSAgfQoJfSwgX2RlZmluZVByb3BlcnR5JDEoX09iamVjdCRzZXRQcm90b3R5cGVPLCBTeW1ib2wuYXN5bmNJdGVyYXRvciwgZnVuY3Rpb24gKCkgewoJICByZXR1cm4gdGhpczsKCX0pLCBfZGVmaW5lUHJvcGVydHkkMShfT2JqZWN0JHNldFByb3RvdHlwZU8sICJyZXR1cm4iLCBmdW5jdGlvbiBfcmV0dXJuKCkgewoJICB2YXIgX3RoaXMyID0gdGhpczsKCgkgIC8vIGRlc3Ryb3koZXJyLCBjYikgaXMgYSBwcml2YXRlIEFQSQoJICAvLyB3ZSBjYW4gZ3VhcmFudGVlIHdlIGhhdmUgdGhhdCBoZXJlLCBiZWNhdXNlIHdlIGNvbnRyb2wgdGhlCgkgIC8vIFJlYWRhYmxlIGNsYXNzIHRoaXMgaXMgYXR0YWNoZWQgdG8KCSAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCSAgICBfdGhpczJba1N0cmVhbV0uZGVzdHJveShudWxsLCBmdW5jdGlvbiAoZXJyKSB7CgkgICAgICBpZiAoZXJyKSB7CgkgICAgICAgIHJlamVjdChlcnIpOwoJICAgICAgICByZXR1cm47CgkgICAgICB9CgoJICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpOwoJICAgIH0pOwoJICB9KTsKCX0pLCBfT2JqZWN0JHNldFByb3RvdHlwZU8pLCBBc3luY0l0ZXJhdG9yUHJvdG90eXBlKTsKCgl2YXIgY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yID0gZnVuY3Rpb24gY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yKHN0cmVhbSkgewoJICB2YXIgX09iamVjdCRjcmVhdGU7CgoJICB2YXIgaXRlcmF0b3IgPSBPYmplY3QuY3JlYXRlKFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvclByb3RvdHlwZSwgKF9PYmplY3QkY3JlYXRlID0ge30sIF9kZWZpbmVQcm9wZXJ0eSQxKF9PYmplY3QkY3JlYXRlLCBrU3RyZWFtLCB7CgkgICAgdmFsdWU6IHN0cmVhbSwKCSAgICB3cml0YWJsZTogdHJ1ZQoJICB9KSwgX2RlZmluZVByb3BlcnR5JDEoX09iamVjdCRjcmVhdGUsIGtMYXN0UmVzb2x2ZSwgewoJICAgIHZhbHVlOiBudWxsLAoJICAgIHdyaXRhYmxlOiB0cnVlCgkgIH0pLCBfZGVmaW5lUHJvcGVydHkkMShfT2JqZWN0JGNyZWF0ZSwga0xhc3RSZWplY3QsIHsKCSAgICB2YWx1ZTogbnVsbCwKCSAgICB3cml0YWJsZTogdHJ1ZQoJICB9KSwgX2RlZmluZVByb3BlcnR5JDEoX09iamVjdCRjcmVhdGUsIGtFcnJvciwgewoJICAgIHZhbHVlOiBudWxsLAoJICAgIHdyaXRhYmxlOiB0cnVlCgkgIH0pLCBfZGVmaW5lUHJvcGVydHkkMShfT2JqZWN0JGNyZWF0ZSwga0VuZGVkLCB7CgkgICAgdmFsdWU6IHN0cmVhbS5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkLAoJICAgIHdyaXRhYmxlOiB0cnVlCgkgIH0pLCBfZGVmaW5lUHJvcGVydHkkMShfT2JqZWN0JGNyZWF0ZSwga0hhbmRsZVByb21pc2UsIHsKCSAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgICB2YXIgZGF0YSA9IGl0ZXJhdG9yW2tTdHJlYW1dLnJlYWQoKTsKCgkgICAgICBpZiAoZGF0YSkgewoJICAgICAgICBpdGVyYXRvcltrTGFzdFByb21pc2VdID0gbnVsbDsKCSAgICAgICAgaXRlcmF0b3Jba0xhc3RSZXNvbHZlXSA9IG51bGw7CgkgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IG51bGw7CgkgICAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdChkYXRhLCBmYWxzZSkpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgaXRlcmF0b3Jba0xhc3RSZXNvbHZlXSA9IHJlc29sdmU7CgkgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IHJlamVjdDsKCSAgICAgIH0KCSAgICB9LAoJICAgIHdyaXRhYmxlOiB0cnVlCgkgIH0pLCBfT2JqZWN0JGNyZWF0ZSkpOwoJICBpdGVyYXRvcltrTGFzdFByb21pc2VdID0gbnVsbDsKCSAgZW5kT2ZTdHJlYW0oc3RyZWFtLCBmdW5jdGlvbiAoZXJyKSB7CgkgICAgaWYgKGVyciAmJiBlcnIuY29kZSAhPT0gJ0VSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFJykgewoJICAgICAgdmFyIHJlamVjdCA9IGl0ZXJhdG9yW2tMYXN0UmVqZWN0XTsgLy8gcmVqZWN0IGlmIHdlIGFyZSB3YWl0aW5nIGZvciBkYXRhIGluIHRoZSBQcm9taXNlCgkgICAgICAvLyByZXR1cm5lZCBieSBuZXh0KCkgYW5kIHN0b3JlIHRoZSBlcnJvcgoKCSAgICAgIGlmIChyZWplY3QgIT09IG51bGwpIHsKCSAgICAgICAgaXRlcmF0b3Jba0xhc3RQcm9taXNlXSA9IG51bGw7CgkgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVzb2x2ZV0gPSBudWxsOwoJICAgICAgICBpdGVyYXRvcltrTGFzdFJlamVjdF0gPSBudWxsOwoJICAgICAgICByZWplY3QoZXJyKTsKCSAgICAgIH0KCgkgICAgICBpdGVyYXRvcltrRXJyb3JdID0gZXJyOwoJICAgICAgcmV0dXJuOwoJICAgIH0KCgkgICAgdmFyIHJlc29sdmUgPSBpdGVyYXRvcltrTGFzdFJlc29sdmVdOwoKCSAgICBpZiAocmVzb2x2ZSAhPT0gbnVsbCkgewoJICAgICAgaXRlcmF0b3Jba0xhc3RQcm9taXNlXSA9IG51bGw7CgkgICAgICBpdGVyYXRvcltrTGFzdFJlc29sdmVdID0gbnVsbDsKCSAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IG51bGw7CgkgICAgICByZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQodW5kZWZpbmVkLCB0cnVlKSk7CgkgICAgfQoKCSAgICBpdGVyYXRvcltrRW5kZWRdID0gdHJ1ZTsKCSAgfSk7CgkgIHN0cmVhbS5vbigncmVhZGFibGUnLCBvblJlYWRhYmxlLmJpbmQobnVsbCwgaXRlcmF0b3IpKTsKCSAgcmV0dXJuIGl0ZXJhdG9yOwoJfTsKCgl2YXIgYXN5bmNfaXRlcmF0b3IgPSBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I7CgoJdmFyIGZyb21Ccm93c2VyID0gZnVuY3Rpb24gKCkgewoJICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWRhYmxlLmZyb20gaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgYnJvd3NlcicpCgl9OwoKCXZhciBfc3RyZWFtX3JlYWRhYmxlID0gUmVhZGFibGU7CgkvKjxyZXBsYWNlbWVudD4qLwoKCXZhciBEdXBsZXg7CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCglSZWFkYWJsZS5SZWFkYWJsZVN0YXRlID0gUmVhZGFibGVTdGF0ZTsKCgl2YXIgRUVsaXN0ZW5lckNvdW50ID0gZnVuY3Rpb24gRUVsaXN0ZW5lckNvdW50KGVtaXR0ZXIsIHR5cGUpIHsKCSAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJzKHR5cGUpLmxlbmd0aDsKCX07CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCgkvKjxyZXBsYWNlbWVudD4qLwoKCgoJLyo8L3JlcGxhY2VtZW50PiovCgoKCXZhciBCdWZmZXIkMiA9IGJ1ZmZlci5CdWZmZXI7CgoJdmFyIE91clVpbnQ4QXJyYXkgPSBjb21tb25qc0dsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9OwoKCWZ1bmN0aW9uIF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspIHsKCSAgcmV0dXJuIEJ1ZmZlciQyLmZyb20oY2h1bmspOwoJfQoKCWZ1bmN0aW9uIF9pc1VpbnQ4QXJyYXkob2JqKSB7CgkgIHJldHVybiBCdWZmZXIkMi5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXk7Cgl9CgkvKjxyZXBsYWNlbWVudD4qLwoKCgoKCXZhciBkZWJ1ZzsKCglpZiAoZGVidWdVdGlsICYmIGRlYnVnVXRpbC5kZWJ1Z2xvZykgewoJICBkZWJ1ZyA9IGRlYnVnVXRpbC5kZWJ1Z2xvZygnc3RyZWFtJyk7Cgl9IGVsc2UgewoJICBkZWJ1ZyA9IGZ1bmN0aW9uIGRlYnVnKCkge307Cgl9CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCgoKCgoKCXZhciBnZXRIaWdoV2F0ZXJNYXJrJDEgPSBzdGF0ZS5nZXRIaWdoV2F0ZXJNYXJrOwoKCXZhciBfcmVxdWlyZSRjb2RlcyA9IGVycm9yc0Jyb3dzZXIuY29kZXMsCgkgICAgRVJSX0lOVkFMSURfQVJHX1RZUEUgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfSU5WQUxJRF9BUkdfVFlQRSwKCSAgICBFUlJfU1RSRUFNX1BVU0hfQUZURVJfRU9GID0gX3JlcXVpcmUkY29kZXMuRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRiwKCSAgICBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCA9IF9yZXF1aXJlJGNvZGVzLkVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVELAoJICAgIEVSUl9TVFJFQU1fVU5TSElGVF9BRlRFUl9FTkRfRVZFTlQgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfU1RSRUFNX1VOU0hJRlRfQUZURVJfRU5EX0VWRU5UOyAvLyBMYXp5IGxvYWRlZCB0byBpbXByb3ZlIHRoZSBzdGFydHVwIHBlcmZvcm1hbmNlLgoKCgl2YXIgU3RyaW5nRGVjb2RlciQxOwoJdmFyIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvciQxOwoJdmFyIGZyb207CgoJaW5oZXJpdHNfYnJvd3NlcihSZWFkYWJsZSwgc3RyZWFtQnJvd3Nlcik7CgoJdmFyIGVycm9yT3JEZXN0cm95JDEgPSBkZXN0cm95XzEuZXJyb3JPckRlc3Ryb3k7Cgl2YXIga1Byb3h5RXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddOwoKCWZ1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcihlbWl0dGVyLCBldmVudCwgZm4pIHsKCSAgLy8gU2FkbHkgdGhpcyBpcyBub3QgY2FjaGVhYmxlIGFzIHNvbWUgbGlicmFyaWVzIGJ1bmRsZSB0aGVpciBvd24KCSAgLy8gZXZlbnQgZW1pdHRlciBpbXBsZW1lbnRhdGlvbiB3aXRoIHRoZW0uCgkgIGlmICh0eXBlb2YgZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHJldHVybiBlbWl0dGVyLnByZXBlbmRMaXN0ZW5lcihldmVudCwgZm4pOyAvLyBUaGlzIGlzIGEgaGFjayB0byBtYWtlIHN1cmUgdGhhdCBvdXIgZXJyb3IgaGFuZGxlciBpcyBhdHRhY2hlZCBiZWZvcmUgYW55CgkgIC8vIHVzZXJsYW5kIG9uZXMuICBORVZFUiBETyBUSElTLiBUaGlzIGlzIGhlcmUgb25seSBiZWNhdXNlIHRoaXMgY29kZSBuZWVkcwoJICAvLyB0byBjb250aW51ZSB0byB3b3JrIHdpdGggb2xkZXIgdmVyc2lvbnMgb2YgTm9kZS5qcyB0aGF0IGRvIG5vdCBpbmNsdWRlCgkgIC8vIHRoZSBwcmVwZW5kTGlzdGVuZXIoKSBtZXRob2QuIFRoZSBnb2FsIGlzIHRvIGV2ZW50dWFsbHkgcmVtb3ZlIHRoaXMgaGFjay4KCgkgIGlmICghZW1pdHRlci5fZXZlbnRzIHx8ICFlbWl0dGVyLl9ldmVudHNbZXZlbnRdKSBlbWl0dGVyLm9uKGV2ZW50LCBmbik7ZWxzZSBpZiAoQXJyYXkuaXNBcnJheShlbWl0dGVyLl9ldmVudHNbZXZlbnRdKSkgZW1pdHRlci5fZXZlbnRzW2V2ZW50XS51bnNoaWZ0KGZuKTtlbHNlIGVtaXR0ZXIuX2V2ZW50c1tldmVudF0gPSBbZm4sIGVtaXR0ZXIuX2V2ZW50c1tldmVudF1dOwoJfQoKCWZ1bmN0aW9uIFJlYWRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtLCBpc0R1cGxleCkgewoJICBEdXBsZXggPSBEdXBsZXggfHwgY29tbW9uanNSZXF1aXJlKCIuL19zdHJlYW1fZHVwbGV4IiwgIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIiKTsKCSAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIER1cGxleCBzdHJlYW1zIGFyZSBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZSwgYnV0IHNoYXJlCgkgIC8vIHRoZSBzYW1lIG9wdGlvbnMgb2JqZWN0LgoJICAvLyBIb3dldmVyLCBzb21lIGNhc2VzIHJlcXVpcmUgc2V0dGluZyBvcHRpb25zIHRvIGRpZmZlcmVudAoJICAvLyB2YWx1ZXMgZm9yIHRoZSByZWFkYWJsZSBhbmQgdGhlIHdyaXRhYmxlIHNpZGVzIG9mIHRoZSBkdXBsZXggc3RyZWFtLgoJICAvLyBUaGVzZSBvcHRpb25zIGNhbiBiZSBwcm92aWRlZCBzZXBhcmF0ZWx5IGFzIHJlYWRhYmxlWFhYIGFuZCB3cml0YWJsZVhYWC4KCgkgIGlmICh0eXBlb2YgaXNEdXBsZXggIT09ICdib29sZWFuJykgaXNEdXBsZXggPSBzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXg7IC8vIG9iamVjdCBzdHJlYW0gZmxhZy4gVXNlZCB0byBtYWtlIHJlYWQobikgaWdub3JlIG4gYW5kIHRvCgkgIC8vIG1ha2UgYWxsIHRoZSBidWZmZXIgbWVyZ2luZyBhbmQgbGVuZ3RoIGNoZWNrcyBnbyBhd2F5CgoJICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTsKCSAgaWYgKGlzRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLnJlYWRhYmxlT2JqZWN0TW9kZTsgLy8gdGhlIHBvaW50IGF0IHdoaWNoIGl0IHN0b3BzIGNhbGxpbmcgX3JlYWQoKSB0byBmaWxsIHRoZSBidWZmZXIKCSAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyAiZG9uJ3QgY2FsbCBfcmVhZCBwcmVlbXB0aXZlbHkgZXZlciIKCgkgIHRoaXMuaGlnaFdhdGVyTWFyayA9IGdldEhpZ2hXYXRlck1hcmskMSh0aGlzLCBvcHRpb25zLCAncmVhZGFibGVIaWdoV2F0ZXJNYXJrJywgaXNEdXBsZXgpOyAvLyBBIGxpbmtlZCBsaXN0IGlzIHVzZWQgdG8gc3RvcmUgZGF0YSBjaHVua3MgaW5zdGVhZCBvZiBhbiBhcnJheSBiZWNhdXNlIHRoZQoJICAvLyBsaW5rZWQgbGlzdCBjYW4gcmVtb3ZlIGVsZW1lbnRzIGZyb20gdGhlIGJlZ2lubmluZyBmYXN0ZXIgdGhhbgoJICAvLyBhcnJheS5zaGlmdCgpCgoJICB0aGlzLmJ1ZmZlciA9IG5ldyBidWZmZXJfbGlzdCgpOwoJICB0aGlzLmxlbmd0aCA9IDA7CgkgIHRoaXMucGlwZXMgPSBudWxsOwoJICB0aGlzLnBpcGVzQ291bnQgPSAwOwoJICB0aGlzLmZsb3dpbmcgPSBudWxsOwoJICB0aGlzLmVuZGVkID0gZmFsc2U7CgkgIHRoaXMuZW5kRW1pdHRlZCA9IGZhbHNlOwoJICB0aGlzLnJlYWRpbmcgPSBmYWxzZTsgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgZXZlbnQgJ3JlYWRhYmxlJy8nZGF0YScgaXMgZW1pdHRlZAoJICAvLyBpbW1lZGlhdGVseSwgb3Igb24gYSBsYXRlciB0aWNrLiAgV2Ugc2V0IHRoaXMgdG8gdHJ1ZSBhdCBmaXJzdCwgYmVjYXVzZQoJICAvLyBhbnkgYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgImxhdGVyIiBzaG91bGQgZ2VuZXJhbGx5IGFsc28KCSAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHJlYWQgY2FsbC4KCgkgIHRoaXMuc3luYyA9IHRydWU7IC8vIHdoZW5ldmVyIHdlIHJldHVybiBudWxsLCB0aGVuIHdlIHNldCBhIGZsYWcgdG8gc2F5CgkgIC8vIHRoYXQgd2UncmUgYXdhaXRpbmcgYSAncmVhZGFibGUnIGV2ZW50IGVtaXNzaW9uLgoKCSAgdGhpcy5uZWVkUmVhZGFibGUgPSBmYWxzZTsKCSAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsKCSAgdGhpcy5yZWFkYWJsZUxpc3RlbmluZyA9IGZhbHNlOwoJICB0aGlzLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlOwoJICB0aGlzLnBhdXNlZCA9IHRydWU7IC8vIFNob3VsZCBjbG9zZSBiZSBlbWl0dGVkIG9uIGRlc3Ryb3kuIERlZmF1bHRzIHRvIHRydWUuCgoJICB0aGlzLmVtaXRDbG9zZSA9IG9wdGlvbnMuZW1pdENsb3NlICE9PSBmYWxzZTsgLy8gU2hvdWxkIC5kZXN0cm95KCkgYmUgY2FsbGVkIGFmdGVyICdlbmQnIChhbmQgcG90ZW50aWFsbHkgJ2ZpbmlzaCcpCgoJICB0aGlzLmF1dG9EZXN0cm95ID0gISFvcHRpb25zLmF1dG9EZXN0cm95OyAvLyBoYXMgaXQgYmVlbiBkZXN0cm95ZWQKCgkgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7IC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmcKCSAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLgoJICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guCgoJICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JzsgLy8gdGhlIG51bWJlciBvZiB3cml0ZXJzIHRoYXQgYXJlIGF3YWl0aW5nIGEgZHJhaW4gZXZlbnQgaW4gLnBpcGUoKXMKCgkgIHRoaXMuYXdhaXREcmFpbiA9IDA7IC8vIGlmIHRydWUsIGEgbWF5YmVSZWFkTW9yZSBoYXMgYmVlbiBzY2hlZHVsZWQKCgkgIHRoaXMucmVhZGluZ01vcmUgPSBmYWxzZTsKCSAgdGhpcy5kZWNvZGVyID0gbnVsbDsKCSAgdGhpcy5lbmNvZGluZyA9IG51bGw7CgoJICBpZiAob3B0aW9ucy5lbmNvZGluZykgewoJICAgIGlmICghU3RyaW5nRGVjb2RlciQxKSBTdHJpbmdEZWNvZGVyJDEgPSBzdHJpbmdfZGVjb2Rlci5TdHJpbmdEZWNvZGVyOwoJICAgIHRoaXMuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyJDEob3B0aW9ucy5lbmNvZGluZyk7CgkgICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7CgkgIH0KCX0KCglmdW5jdGlvbiBSZWFkYWJsZShvcHRpb25zKSB7CgkgIER1cGxleCA9IER1cGxleCB8fCBjb21tb25qc1JlcXVpcmUoIi4vX3N0cmVhbV9kdXBsZXgiLCAiLyQkcm9sbHVwX2Jhc2UkJC9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYiIpOwoJICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVhZGFibGUpKSByZXR1cm4gbmV3IFJlYWRhYmxlKG9wdGlvbnMpOyAvLyBDaGVja2luZyBmb3IgYSBTdHJlYW0uRHVwbGV4IGluc3RhbmNlIGlzIGZhc3RlciBoZXJlIGluc3RlYWQgb2YgaW5zaWRlCgkgIC8vIHRoZSBSZWFkYWJsZVN0YXRlIGNvbnN0cnVjdG9yLCBhdCBsZWFzdCB3aXRoIFY4IDYuNQoKCSAgdmFyIGlzRHVwbGV4ID0gdGhpcyBpbnN0YW5jZW9mIER1cGxleDsKCSAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMsIGlzRHVwbGV4KTsgLy8gbGVnYWN5CgoJICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTsKCgkgIGlmIChvcHRpb25zKSB7CgkgICAgaWYgKHR5cGVvZiBvcHRpb25zLnJlYWQgPT09ICdmdW5jdGlvbicpIHRoaXMuX3JlYWQgPSBvcHRpb25zLnJlYWQ7CgkgICAgaWYgKHR5cGVvZiBvcHRpb25zLmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIHRoaXMuX2Rlc3Ryb3kgPSBvcHRpb25zLmRlc3Ryb3k7CgkgIH0KCgkgIHN0cmVhbUJyb3dzZXIuY2FsbCh0aGlzKTsKCX0KCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAnZGVzdHJveWVkJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7CgkgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfQoKCSAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ7CgkgIH0sCgkgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CgkgICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtCgkgICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldAoJICAgIGlmICghdGhpcy5fcmVhZGFibGVTdGF0ZSkgewoJICAgICAgcmV0dXJuOwoJICAgIH0gLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseQoJICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZAoKCgkgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTsKCSAgfQoJfSk7CglSZWFkYWJsZS5wcm90b3R5cGUuZGVzdHJveSA9IGRlc3Ryb3lfMS5kZXN0cm95OwoJUmVhZGFibGUucHJvdG90eXBlLl91bmRlc3Ryb3kgPSBkZXN0cm95XzEudW5kZXN0cm95OwoKCVJlYWRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNiKSB7CgkgIGNiKGVycik7Cgl9OyAvLyBNYW51YWxseSBzaG92ZSBzb21ldGhpbmcgaW50byB0aGUgcmVhZCgpIGJ1ZmZlci4KCS8vIFRoaXMgcmV0dXJucyB0cnVlIGlmIHRoZSBoaWdoV2F0ZXJNYXJrIGhhcyBub3QgYmVlbiBoaXQgeWV0LAoJLy8gc2ltaWxhciB0byBob3cgV3JpdGFibGUud3JpdGUoKSByZXR1cm5zIHRydWUgaWYgeW91IHNob3VsZAoJLy8gd3JpdGUoKSBzb21lIG1vcmUuCgoKCVJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZykgewoJICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoJICB2YXIgc2tpcENodW5rQ2hlY2s7CgoJICBpZiAoIXN0YXRlLm9iamVjdE1vZGUpIHsKCSAgICBpZiAodHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykgewoJICAgICAgZW5jb2RpbmcgPSBlbmNvZGluZyB8fCBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7CgoJICAgICAgaWYgKGVuY29kaW5nICE9PSBzdGF0ZS5lbmNvZGluZykgewoJICAgICAgICBjaHVuayA9IEJ1ZmZlciQyLmZyb20oY2h1bmssIGVuY29kaW5nKTsKCSAgICAgICAgZW5jb2RpbmcgPSAnJzsKCSAgICAgIH0KCgkgICAgICBza2lwQ2h1bmtDaGVjayA9IHRydWU7CgkgICAgfQoJICB9IGVsc2UgewoJICAgIHNraXBDaHVua0NoZWNrID0gdHJ1ZTsKCSAgfQoKCSAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgY2h1bmssIGVuY29kaW5nLCBmYWxzZSwgc2tpcENodW5rQ2hlY2spOwoJfTsgLy8gVW5zaGlmdCBzaG91bGQgKmFsd2F5cyogYmUgc29tZXRoaW5nIGRpcmVjdGx5IG91dCBvZiByZWFkKCkKCgoJUmVhZGFibGUucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbiAoY2h1bmspIHsKCSAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgY2h1bmssIG51bGwsIHRydWUsIGZhbHNlKTsKCX07CgoJZnVuY3Rpb24gcmVhZGFibGVBZGRDaHVuayhzdHJlYW0sIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCwgc2tpcENodW5rQ2hlY2spIHsKCSAgZGVidWcoJ3JlYWRhYmxlQWRkQ2h1bmsnLCBjaHVuayk7CgkgIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKCgkgIGlmIChjaHVuayA9PT0gbnVsbCkgewoJICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKCSAgICBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpOwoJICB9IGVsc2UgewoJICAgIHZhciBlcjsKCSAgICBpZiAoIXNraXBDaHVua0NoZWNrKSBlciA9IGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspOwoKCSAgICBpZiAoZXIpIHsKCSAgICAgIGVycm9yT3JEZXN0cm95JDEoc3RyZWFtLCBlcik7CgkgICAgfSBlbHNlIGlmIChzdGF0ZS5vYmplY3RNb2RlIHx8IGNodW5rICYmIGNodW5rLmxlbmd0aCA+IDApIHsKCSAgICAgIGlmICh0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmICFzdGF0ZS5vYmplY3RNb2RlICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihjaHVuaykgIT09IEJ1ZmZlciQyLnByb3RvdHlwZSkgewoJICAgICAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspOwoJICAgICAgfQoKCSAgICAgIGlmIChhZGRUb0Zyb250KSB7CgkgICAgICAgIGlmIChzdGF0ZS5lbmRFbWl0dGVkKSBlcnJvck9yRGVzdHJveSQxKHN0cmVhbSwgbmV3IEVSUl9TVFJFQU1fVU5TSElGVF9BRlRFUl9FTkRfRVZFTlQoKSk7ZWxzZSBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgdHJ1ZSk7CgkgICAgICB9IGVsc2UgaWYgKHN0YXRlLmVuZGVkKSB7CgkgICAgICAgIGVycm9yT3JEZXN0cm95JDEoc3RyZWFtLCBuZXcgRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRigpKTsKCSAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZGVzdHJveWVkKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKCgkgICAgICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFlbmNvZGluZykgewoJICAgICAgICAgIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7CgkgICAgICAgICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsubGVuZ3RoICE9PSAwKSBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgZmFsc2UpO2Vsc2UgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTsKCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgZmFsc2UpOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfSBlbHNlIGlmICghYWRkVG9Gcm9udCkgewoJICAgICAgc3RhdGUucmVhZGluZyA9IGZhbHNlOwoJICAgICAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTsKCSAgICB9CgkgIH0gLy8gV2UgY2FuIHB1c2ggbW9yZSBkYXRhIGlmIHdlIGFyZSBiZWxvdyB0aGUgaGlnaFdhdGVyTWFyay4KCSAgLy8gQWxzbywgaWYgd2UgaGF2ZSBubyBkYXRhIHlldCwgd2UgY2FuIHN0YW5kIHNvbWUgbW9yZSBieXRlcy4KCSAgLy8gVGhpcyBpcyB0byB3b3JrIGFyb3VuZCBjYXNlcyB3aGVyZSBod209MCwgc3VjaCBhcyB0aGUgcmVwbC4KCgoJICByZXR1cm4gIXN0YXRlLmVuZGVkICYmIChzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCk7Cgl9CgoJZnVuY3Rpb24gYWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGFkZFRvRnJvbnQpIHsKCSAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5zeW5jKSB7CgkgICAgc3RhdGUuYXdhaXREcmFpbiA9IDA7CgkgICAgc3RyZWFtLmVtaXQoJ2RhdGEnLCBjaHVuayk7CgkgIH0gZWxzZSB7CgkgICAgLy8gdXBkYXRlIHRoZSBidWZmZXIgaW5mby4KCSAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CgkgICAgaWYgKGFkZFRvRnJvbnQpIHN0YXRlLmJ1ZmZlci51bnNoaWZ0KGNodW5rKTtlbHNlIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTsKCSAgICBpZiAoc3RhdGUubmVlZFJlYWRhYmxlKSBlbWl0UmVhZGFibGUoc3RyZWFtKTsKCSAgfQoKCSAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTsKCX0KCglmdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7CgkgIHZhciBlcjsKCgkgIGlmICghX2lzVWludDhBcnJheShjaHVuaykgJiYgdHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJiBjaHVuayAhPT0gdW5kZWZpbmVkICYmICFzdGF0ZS5vYmplY3RNb2RlKSB7CgkgICAgZXIgPSBuZXcgRVJSX0lOVkFMSURfQVJHX1RZUEUoJ2NodW5rJywgWydzdHJpbmcnLCAnQnVmZmVyJywgJ1VpbnQ4QXJyYXknXSwgY2h1bmspOwoJICB9CgoJICByZXR1cm4gZXI7Cgl9CgoJUmVhZGFibGUucHJvdG90eXBlLmlzUGF1c2VkID0gZnVuY3Rpb24gKCkgewoJICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID09PSBmYWxzZTsKCX07IC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgoKCglSZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbiAoZW5jKSB7CgkgIGlmICghU3RyaW5nRGVjb2RlciQxKSBTdHJpbmdEZWNvZGVyJDEgPSBzdHJpbmdfZGVjb2Rlci5TdHJpbmdEZWNvZGVyOwoJICB2YXIgZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyJDEoZW5jKTsKCSAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyID0gZGVjb2RlcjsgLy8gSWYgc2V0RW5jb2RpbmcobnVsbCksIGRlY29kZXIuZW5jb2RpbmcgZXF1YWxzIHV0ZjgKCgkgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIuZW5jb2Rpbmc7IC8vIEl0ZXJhdGUgb3ZlciBjdXJyZW50IGJ1ZmZlciB0byBjb252ZXJ0IGFscmVhZHkgc3RvcmVkIEJ1ZmZlcnM6CgoJICB2YXIgcCA9IHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLmhlYWQ7CgkgIHZhciBjb250ZW50ID0gJyc7CgoJICB3aGlsZSAocCAhPT0gbnVsbCkgewoJICAgIGNvbnRlbnQgKz0gZGVjb2Rlci53cml0ZShwLmRhdGEpOwoJICAgIHAgPSBwLm5leHQ7CgkgIH0KCgkgIHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLmNsZWFyKCk7CgoJICBpZiAoY29udGVudCAhPT0gJycpIHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLnB1c2goY29udGVudCk7CgkgIHRoaXMuX3JlYWRhYmxlU3RhdGUubGVuZ3RoID0gY29udGVudC5sZW5ndGg7CgkgIHJldHVybiB0aGlzOwoJfTsgLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDFHQgoKCgl2YXIgTUFYX0hXTSA9IDB4NDAwMDAwMDA7CgoJZnVuY3Rpb24gY29tcHV0ZU5ld0hpZ2hXYXRlck1hcmsobikgewoJICBpZiAobiA+PSBNQVhfSFdNKSB7CgkgICAgLy8gVE9ETyhyb25hZyk6IFRocm93IEVSUl9WQUxVRV9PVVRfT0ZfUkFOR0UuCgkgICAgbiA9IE1BWF9IV007CgkgIH0gZWxzZSB7CgkgICAgLy8gR2V0IHRoZSBuZXh0IGhpZ2hlc3QgcG93ZXIgb2YgMiB0byBwcmV2ZW50IGluY3JlYXNpbmcgaHdtIGV4Y2Vzc2l2ZWx5IGluCgkgICAgLy8gdGlueSBhbW91bnRzCgkgICAgbi0tOwoJICAgIG4gfD0gbiA+Pj4gMTsKCSAgICBuIHw9IG4gPj4+IDI7CgkgICAgbiB8PSBuID4+PiA0OwoJICAgIG4gfD0gbiA+Pj4gODsKCSAgICBuIHw9IG4gPj4+IDE2OwoJICAgIG4rKzsKCSAgfQoKCSAgcmV0dXJuIG47Cgl9IC8vIFRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gYmUgaW5saW5hYmxlLCBzbyBwbGVhc2UgdGFrZSBjYXJlIHdoZW4gbWFraW5nCgkvLyBjaGFuZ2VzIHRvIHRoZSBmdW5jdGlvbiBib2R5LgoKCglmdW5jdGlvbiBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKSB7CgkgIGlmIChuIDw9IDAgfHwgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSByZXR1cm4gMDsKCSAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldHVybiAxOwoKCSAgaWYgKG4gIT09IG4pIHsKCSAgICAvLyBPbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWUKCSAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGgpIHJldHVybiBzdGF0ZS5idWZmZXIuaGVhZC5kYXRhLmxlbmd0aDtlbHNlIHJldHVybiBzdGF0ZS5sZW5ndGg7CgkgIH0gLy8gSWYgd2UncmUgYXNraW5nIGZvciBtb3JlIHRoYW4gdGhlIGN1cnJlbnQgaHdtLCB0aGVuIHJhaXNlIHRoZSBod20uCgoKCSAgaWYgKG4gPiBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSBzdGF0ZS5oaWdoV2F0ZXJNYXJrID0gY29tcHV0ZU5ld0hpZ2hXYXRlck1hcmsobik7CgkgIGlmIChuIDw9IHN0YXRlLmxlbmd0aCkgcmV0dXJuIG47IC8vIERvbid0IGhhdmUgZW5vdWdoCgoJICBpZiAoIXN0YXRlLmVuZGVkKSB7CgkgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKCSAgICByZXR1cm4gMDsKCSAgfQoKCSAgcmV0dXJuIHN0YXRlLmxlbmd0aDsKCX0gLy8geW91IGNhbiBvdmVycmlkZSBlaXRoZXIgdGhpcyBtZXRob2QsIG9yIHRoZSBhc3luYyBfcmVhZChuKSBiZWxvdy4KCgoJUmVhZGFibGUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAobikgewoJICBkZWJ1ZygncmVhZCcsIG4pOwoJICBuID0gcGFyc2VJbnQobiwgMTApOwoJICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoJICB2YXIgbk9yaWcgPSBuOwoJICBpZiAobiAhPT0gMCkgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7IC8vIGlmIHdlJ3JlIGRvaW5nIHJlYWQoMCkgdG8gdHJpZ2dlciBhIHJlYWRhYmxlIGV2ZW50LCBidXQgd2UKCSAgLy8gYWxyZWFkeSBoYXZlIGEgYnVuY2ggb2YgZGF0YSBpbiB0aGUgYnVmZmVyLCB0aGVuIGp1c3QgdHJpZ2dlcgoJICAvLyB0aGUgJ3JlYWRhYmxlJyBldmVudCBhbmQgbW92ZSBvbi4KCgkgIGlmIChuID09PSAwICYmIHN0YXRlLm5lZWRSZWFkYWJsZSAmJiAoKHN0YXRlLmhpZ2hXYXRlck1hcmsgIT09IDAgPyBzdGF0ZS5sZW5ndGggPj0gc3RhdGUuaGlnaFdhdGVyTWFyayA6IHN0YXRlLmxlbmd0aCA+IDApIHx8IHN0YXRlLmVuZGVkKSkgewoJICAgIGRlYnVnKCdyZWFkOiBlbWl0UmVhZGFibGUnLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTsKCSAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtlbHNlIGVtaXRSZWFkYWJsZSh0aGlzKTsKCSAgICByZXR1cm4gbnVsbDsKCSAgfQoKCSAgbiA9IGhvd011Y2hUb1JlYWQobiwgc3RhdGUpOyAvLyBpZiB3ZSd2ZSBlbmRlZCwgYW5kIHdlJ3JlIG5vdyBjbGVhciwgdGhlbiBmaW5pc2ggaXQgdXAuCgoJICBpZiAobiA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgewoJICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIGVuZFJlYWRhYmxlKHRoaXMpOwoJICAgIHJldHVybiBudWxsOwoJICB9IC8vIEFsbCB0aGUgYWN0dWFsIGNodW5rIGdlbmVyYXRpb24gbG9naWMgbmVlZHMgdG8gYmUKCSAgLy8gKmJlbG93KiB0aGUgY2FsbCB0byBfcmVhZC4gIFRoZSByZWFzb24gaXMgdGhhdCBpbiBjZXJ0YWluCgkgIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWQKCSAgLy8gbWF5IGJlIGEgY29tcGxldGVseSBzeW5jaHJvbm91cyBvcGVyYXRpb24gd2hpY2ggbWF5IGNoYW5nZQoJICAvLyB0aGUgc3RhdGUgb2YgdGhlIHJlYWQgYnVmZmVyLCBwcm92aWRpbmcgZW5vdWdoIGRhdGEgd2hlbgoJICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC4KCSAgLy8KCSAgLy8gU28sIHRoZSBzdGVwcyBhcmU6CgkgIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG8KCSAgLy8gYSByZWFkIGZyb20gdGhlIGJ1ZmZlci4KCSAgLy8KCSAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC4KCSAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IGJlIGFzeW5jaHJvbm91cywgb3Igc3luY2hyb25vdXMuICBZZXMsIGl0IGlzCgkgIC8vIGRlZXBseSB1Z2x5IHRvIHdyaXRlIEFQSXMgdGhpcyB3YXksIGJ1dCB0aGF0IHN0aWxsIGRvZXNuJ3QgbWVhbgoJICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlCgkgIC8vIGRlc2lnbmVkIHRvIGJlIHN5bmMvYXN5bmMgYWdub3N0aWMuCgkgIC8vIFRha2Ugbm90ZSBpZiB0aGUgX3JlYWQgY2FsbCBpcyBzeW5jIG9yIGFzeW5jIChpZSwgaWYgdGhlIHJlYWQgY2FsbAoJICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0CgkgIC8vICdyZWFkYWJsZScgZXRjLgoJICAvLwoJICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uCgkgIC8vIGlmIHdlIG5lZWQgYSByZWFkYWJsZSBldmVudCwgdGhlbiB3ZSBuZWVkIHRvIGRvIHNvbWUgcmVhZGluZy4KCgoJICB2YXIgZG9SZWFkID0gc3RhdGUubmVlZFJlYWRhYmxlOwoJICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7IC8vIGlmIHdlIGN1cnJlbnRseSBoYXZlIGxlc3MgdGhhbiB0aGUgaGlnaFdhdGVyTWFyaywgdGhlbiBhbHNvIHJlYWQgc29tZQoKCSAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCB8fCBzdGF0ZS5sZW5ndGggLSBuIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykgewoJICAgIGRvUmVhZCA9IHRydWU7CgkgICAgZGVidWcoJ2xlbmd0aCBsZXNzIHRoYW4gd2F0ZXJtYXJrJywgZG9SZWFkKTsKCSAgfSAvLyBob3dldmVyLCBpZiB3ZSd2ZSBlbmRlZCwgdGhlbiB0aGVyZSdzIG5vIHBvaW50LCBhbmQgaWYgd2UncmUgYWxyZWFkeQoJICAvLyByZWFkaW5nLCB0aGVuIGl0J3MgdW5uZWNlc3NhcnkuCgoKCSAgaWYgKHN0YXRlLmVuZGVkIHx8IHN0YXRlLnJlYWRpbmcpIHsKCSAgICBkb1JlYWQgPSBmYWxzZTsKCSAgICBkZWJ1ZygncmVhZGluZyBvciBlbmRlZCcsIGRvUmVhZCk7CgkgIH0gZWxzZSBpZiAoZG9SZWFkKSB7CgkgICAgZGVidWcoJ2RvIHJlYWQnKTsKCSAgICBzdGF0ZS5yZWFkaW5nID0gdHJ1ZTsKCSAgICBzdGF0ZS5zeW5jID0gdHJ1ZTsgLy8gaWYgdGhlIGxlbmd0aCBpcyBjdXJyZW50bHkgemVybywgdGhlbiB3ZSAqbmVlZCogYSByZWFkYWJsZSBldmVudC4KCgkgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsgLy8gY2FsbCBpbnRlcm5hbCByZWFkIG1ldGhvZAoKCSAgICB0aGlzLl9yZWFkKHN0YXRlLmhpZ2hXYXRlck1hcmspOwoKCSAgICBzdGF0ZS5zeW5jID0gZmFsc2U7IC8vIElmIF9yZWFkIHB1c2hlZCBkYXRhIHN5bmNocm9ub3VzbHksIHRoZW4gYHJlYWRpbmdgIHdpbGwgYmUgZmFsc2UsCgkgICAgLy8gYW5kIHdlIG5lZWQgdG8gcmUtZXZhbHVhdGUgaG93IG11Y2ggZGF0YSB3ZSBjYW4gcmV0dXJuIHRvIHRoZSB1c2VyLgoKCSAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIG4gPSBob3dNdWNoVG9SZWFkKG5PcmlnLCBzdGF0ZSk7CgkgIH0KCgkgIHZhciByZXQ7CgkgIGlmIChuID4gMCkgcmV0ID0gZnJvbUxpc3Qobiwgc3RhdGUpO2Vsc2UgcmV0ID0gbnVsbDsKCgkgIGlmIChyZXQgPT09IG51bGwpIHsKCSAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSBzdGF0ZS5sZW5ndGggPD0gc3RhdGUuaGlnaFdhdGVyTWFyazsKCSAgICBuID0gMDsKCSAgfSBlbHNlIHsKCSAgICBzdGF0ZS5sZW5ndGggLT0gbjsKCSAgICBzdGF0ZS5hd2FpdERyYWluID0gMDsKCSAgfQoKCSAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgewoJICAgIC8vIElmIHdlIGhhdmUgbm90aGluZyBpbiB0aGUgYnVmZmVyLCB0aGVuIHdlIHdhbnQgdG8ga25vdwoJICAgIC8vIGFzIHNvb24gYXMgd2UgKmRvKiBnZXQgc29tZXRoaW5nIGludG8gdGhlIGJ1ZmZlci4KCSAgICBpZiAoIXN0YXRlLmVuZGVkKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOyAvLyBJZiB3ZSB0cmllZCB0byByZWFkKCkgcGFzdCB0aGUgRU9GLCB0aGVuIGVtaXQgZW5kIG9uIHRoZSBuZXh0IHRpY2suCgoJICAgIGlmIChuT3JpZyAhPT0gbiAmJiBzdGF0ZS5lbmRlZCkgZW5kUmVhZGFibGUodGhpcyk7CgkgIH0KCgkgIGlmIChyZXQgIT09IG51bGwpIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7CgkgIHJldHVybiByZXQ7Cgl9OwoKCWZ1bmN0aW9uIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSkgewoJICBkZWJ1Zygnb25Fb2ZDaHVuaycpOwoJICBpZiAoc3RhdGUuZW5kZWQpIHJldHVybjsKCgkgIGlmIChzdGF0ZS5kZWNvZGVyKSB7CgkgICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTsKCgkgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkgewoJICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspOwoJICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwoJICAgIH0KCSAgfQoKCSAgc3RhdGUuZW5kZWQgPSB0cnVlOwoKCSAgaWYgKHN0YXRlLnN5bmMpIHsKCSAgICAvLyBpZiB3ZSBhcmUgc3luYywgd2FpdCB1bnRpbCBuZXh0IHRpY2sgdG8gZW1pdCB0aGUgZGF0YS4KCSAgICAvLyBPdGhlcndpc2Ugd2UgcmlzayBlbWl0dGluZyBkYXRhIGluIHRoZSBmbG93KCkKCSAgICAvLyB0aGUgcmVhZGFibGUgY29kZSB0cmlnZ2VycyBkdXJpbmcgYSByZWFkKCkgY2FsbAoJICAgIGVtaXRSZWFkYWJsZShzdHJlYW0pOwoJICB9IGVsc2UgewoJICAgIC8vIGVtaXQgJ3JlYWRhYmxlJyBub3cgdG8gbWFrZSBzdXJlIGl0IGdldHMgcGlja2VkIHVwLgoJICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlOwoKCSAgICBpZiAoIXN0YXRlLmVtaXR0ZWRSZWFkYWJsZSkgewoJICAgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTsKCSAgICAgIGVtaXRSZWFkYWJsZV8oc3RyZWFtKTsKCSAgICB9CgkgIH0KCX0gLy8gRG9uJ3QgZW1pdCByZWFkYWJsZSByaWdodCBhd2F5IGluIHN5bmMgbW9kZSwgYmVjYXVzZSB0aGlzIGNhbiB0cmlnZ2VyCgkvLyBhbm90aGVyIHJlYWQoKSBjYWxsID0+IHN0YWNrIG92ZXJmbG93LiAgVGhpcyB3YXksIGl0IG1pZ2h0IHRyaWdnZXIKCS8vIGEgbmV4dFRpY2sgcmVjdXJzaW9uIHdhcm5pbmcsIGJ1dCB0aGF0J3Mgbm90IHNvIGJhZC4KCgoJZnVuY3Rpb24gZW1pdFJlYWRhYmxlKHN0cmVhbSkgewoJICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgkgIGRlYnVnKCdlbWl0UmVhZGFibGUnLCBzdGF0ZS5uZWVkUmVhZGFibGUsIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSk7CgkgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlOwoKCSAgaWYgKCFzdGF0ZS5lbWl0dGVkUmVhZGFibGUpIHsKCSAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlJywgc3RhdGUuZmxvd2luZyk7CgkgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTsKCSAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRSZWFkYWJsZV8sIHN0cmVhbSk7CgkgIH0KCX0KCglmdW5jdGlvbiBlbWl0UmVhZGFibGVfKHN0cmVhbSkgewoJICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgkgIGRlYnVnKCdlbWl0UmVhZGFibGVfJywgc3RhdGUuZGVzdHJveWVkLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTsKCgkgIGlmICghc3RhdGUuZGVzdHJveWVkICYmIChzdGF0ZS5sZW5ndGggfHwgc3RhdGUuZW5kZWQpKSB7CgkgICAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7CgkgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7CgkgIH0gLy8gVGhlIHN0cmVhbSBuZWVkcyBhbm90aGVyIHJlYWRhYmxlIGV2ZW50IGlmCgkgIC8vIDEuIEl0IGlzIG5vdCBmbG93aW5nLCBhcyB0aGUgZmxvdyBtZWNoYW5pc20gd2lsbCB0YWtlCgkgIC8vICAgIGNhcmUgb2YgaXQuCgkgIC8vIDIuIEl0IGlzIG5vdCBlbmRlZC4KCSAgLy8gMy4gSXQgaXMgYmVsb3cgdGhlIGhpZ2hXYXRlck1hcmssIHNvIHdlIGNhbiBzY2hlZHVsZQoJICAvLyAgICBhbm90aGVyIHJlYWRhYmxlIGxhdGVyLgoKCgkgIHN0YXRlLm5lZWRSZWFkYWJsZSA9ICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPD0gc3RhdGUuaGlnaFdhdGVyTWFyazsKCSAgZmxvdyhzdHJlYW0pOwoJfSAvLyBhdCB0aGlzIHBvaW50LCB0aGUgdXNlciBoYXMgcHJlc3VtYWJseSBzZWVuIHRoZSAncmVhZGFibGUnIGV2ZW50LAoJLy8gYW5kIGNhbGxlZCByZWFkKCkgdG8gY29uc3VtZSBzb21lIGRhdGEuICB0aGF0IG1heSBoYXZlIHRyaWdnZXJlZAoJLy8gaW4gdHVybiBhbm90aGVyIF9yZWFkKG4pIGNhbGwsIGluIHdoaWNoIGNhc2UgcmVhZGluZyA9IHRydWUgaWYKCS8vIGl0J3MgaW4gcHJvZ3Jlc3MuCgkvLyBIb3dldmVyLCBpZiB3ZSdyZSBub3QgZW5kZWQsIG9yIHJlYWRpbmcsIGFuZCB0aGUgbGVuZ3RoIDwgaHdtLAoJLy8gdGhlbiBnbyBhaGVhZCBhbmQgdHJ5IHRvIHJlYWQgc29tZSBtb3JlIHByZWVtcHRpdmVseS4KCgoJZnVuY3Rpb24gbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKSB7CgkgIGlmICghc3RhdGUucmVhZGluZ01vcmUpIHsKCSAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IHRydWU7CgkgICAgcHJvY2Vzcy5uZXh0VGljayhtYXliZVJlYWRNb3JlXywgc3RyZWFtLCBzdGF0ZSk7CgkgIH0KCX0KCglmdW5jdGlvbiBtYXliZVJlYWRNb3JlXyhzdHJlYW0sIHN0YXRlKSB7CgkgIC8vIEF0dGVtcHQgdG8gcmVhZCBtb3JlIGRhdGEgaWYgd2Ugc2hvdWxkLgoJICAvLwoJICAvLyBUaGUgY29uZGl0aW9ucyBmb3IgcmVhZGluZyBtb3JlIGRhdGEgYXJlIChvbmUgb2YpOgoJICAvLyAtIE5vdCBlbm91Z2ggZGF0YSBidWZmZXJlZCAoc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykuIFRoZSBsb29wCgkgIC8vICAgaXMgcmVzcG9uc2libGUgZm9yIGZpbGxpbmcgdGhlIGJ1ZmZlciB3aXRoIGVub3VnaCBkYXRhIGlmIHN1Y2ggZGF0YQoJICAvLyAgIGlzIGF2YWlsYWJsZS4gSWYgaGlnaFdhdGVyTWFyayBpcyAwIGFuZCB3ZSBhcmUgbm90IGluIHRoZSBmbG93aW5nIG1vZGUKCSAgLy8gICB3ZSBzaG91bGQgX25vdF8gYXR0ZW1wdCB0byBidWZmZXIgYW55IGV4dHJhIGRhdGEuIFdlJ2xsIGdldCBtb3JlIGRhdGEKCSAgLy8gICB3aGVuIHRoZSBzdHJlYW0gY29uc3VtZXIgY2FsbHMgcmVhZCgpIGluc3RlYWQuCgkgIC8vIC0gTm8gZGF0YSBpbiB0aGUgYnVmZmVyLCBhbmQgdGhlIHN0cmVhbSBpcyBpbiBmbG93aW5nIG1vZGUuIEluIHRoaXMgbW9kZQoJICAvLyAgIHRoZSBsb29wIGJlbG93IGlzIHJlc3BvbnNpYmxlIGZvciBlbnN1cmluZyByZWFkKCkgaXMgY2FsbGVkLiBGYWlsaW5nIHRvCgkgIC8vICAgY2FsbCByZWFkIGhlcmUgd291bGQgYWJvcnQgdGhlIGZsb3cgYW5kIHRoZXJlJ3Mgbm8gb3RoZXIgbWVjaGFuaXNtIGZvcgoJICAvLyAgIGNvbnRpbnVpbmcgdGhlIGZsb3cgaWYgdGhlIHN0cmVhbSBjb25zdW1lciBoYXMganVzdCBzdWJzY3JpYmVkIHRvIHRoZQoJICAvLyAgICdkYXRhJyBldmVudC4KCSAgLy8KCSAgLy8gSW4gYWRkaXRpb24gdG8gdGhlIGFib3ZlIGNvbmRpdGlvbnMgdG8ga2VlcCByZWFkaW5nIGRhdGEsIHRoZSBmb2xsb3dpbmcKCSAgLy8gY29uZGl0aW9ucyBwcmV2ZW50IHRoZSBkYXRhIGZyb20gYmVpbmcgcmVhZDoKCSAgLy8gLSBUaGUgc3RyZWFtIGhhcyBlbmRlZCAoc3RhdGUuZW5kZWQpLgoJICAvLyAtIFRoZXJlIGlzIGFscmVhZHkgYSBwZW5kaW5nICdyZWFkJyBvcGVyYXRpb24gKHN0YXRlLnJlYWRpbmcpLiBUaGlzIGlzIGEKCSAgLy8gICBjYXNlIHdoZXJlIHRoZSB0aGUgc3RyZWFtIGhhcyBjYWxsZWQgdGhlIGltcGxlbWVudGF0aW9uIGRlZmluZWQgX3JlYWQoKQoJICAvLyAgIG1ldGhvZCwgYnV0IHRoZXkgYXJlIHByb2Nlc3NpbmcgdGhlIGNhbGwgYXN5bmNocm9ub3VzbHkgYW5kIGhhdmUgX25vdF8KCSAgLy8gICBjYWxsZWQgcHVzaCgpIHdpdGggbmV3IGRhdGEuIEluIHRoaXMgY2FzZSB3ZSBza2lwIHBlcmZvcm1pbmcgbW9yZQoJICAvLyAgIHJlYWQoKXMuIFRoZSBleGVjdXRpb24gZW5kcyBpbiB0aGlzIG1ldGhvZCBhZ2FpbiBhZnRlciB0aGUgX3JlYWQoKSBlbmRzCgkgIC8vICAgdXAgY2FsbGluZyBwdXNoKCkgd2l0aCBtb3JlIGRhdGEuCgkgIHdoaWxlICghc3RhdGUucmVhZGluZyAmJiAhc3RhdGUuZW5kZWQgJiYgKHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGggPT09IDApKSB7CgkgICAgdmFyIGxlbiA9IHN0YXRlLmxlbmd0aDsKCSAgICBkZWJ1ZygnbWF5YmVSZWFkTW9yZSByZWFkIDAnKTsKCSAgICBzdHJlYW0ucmVhZCgwKTsKCSAgICBpZiAobGVuID09PSBzdGF0ZS5sZW5ndGgpIC8vIGRpZG4ndCBnZXQgYW55IGRhdGEsIHN0b3Agc3Bpbm5pbmcuCgkgICAgICBicmVhazsKCSAgfQoKCSAgc3RhdGUucmVhZGluZ01vcmUgPSBmYWxzZTsKCX0gLy8gYWJzdHJhY3QgbWV0aG9kLiAgdG8gYmUgb3ZlcnJpZGRlbiBpbiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgoJLy8gY2FsbCBjYihlciwgZGF0YSkgd2hlcmUgZGF0YSBpcyA8PSBuIGluIGxlbmd0aC4KCS8vIGZvciB2aXJ0dWFsIChub24tc3RyaW5nLCBub24tYnVmZmVyKSBzdHJlYW1zLCAibGVuZ3RoIiBpcyBzb21ld2hhdAoJLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLgoKCglSZWFkYWJsZS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAobikgewoJICBlcnJvck9yRGVzdHJveSQxKHRoaXMsIG5ldyBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCgnX3JlYWQoKScpKTsKCX07CgoJUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoZGVzdCwgcGlwZU9wdHMpIHsKCSAgdmFyIHNyYyA9IHRoaXM7CgkgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgoJICBzd2l0Y2ggKHN0YXRlLnBpcGVzQ291bnQpIHsKCSAgICBjYXNlIDA6CgkgICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7CgkgICAgICBicmVhazsKCgkgICAgY2FzZSAxOgoJICAgICAgc3RhdGUucGlwZXMgPSBbc3RhdGUucGlwZXMsIGRlc3RdOwoJICAgICAgYnJlYWs7CgoJICAgIGRlZmF1bHQ6CgkgICAgICBzdGF0ZS5waXBlcy5wdXNoKGRlc3QpOwoJICAgICAgYnJlYWs7CgkgIH0KCgkgIHN0YXRlLnBpcGVzQ291bnQgKz0gMTsKCSAgZGVidWcoJ3BpcGUgY291bnQ9JWQgb3B0cz0laicsIHN0YXRlLnBpcGVzQ291bnQsIHBpcGVPcHRzKTsKCSAgdmFyIGRvRW5kID0gKCFwaXBlT3B0cyB8fCBwaXBlT3B0cy5lbmQgIT09IGZhbHNlKSAmJiBkZXN0ICE9PSBwcm9jZXNzLnN0ZG91dCAmJiBkZXN0ICE9PSBwcm9jZXNzLnN0ZGVycjsKCSAgdmFyIGVuZEZuID0gZG9FbmQgPyBvbmVuZCA6IHVucGlwZTsKCSAgaWYgKHN0YXRlLmVuZEVtaXR0ZWQpIHByb2Nlc3MubmV4dFRpY2soZW5kRm4pO2Vsc2Ugc3JjLm9uY2UoJ2VuZCcsIGVuZEZuKTsKCSAgZGVzdC5vbigndW5waXBlJywgb251bnBpcGUpOwoKCSAgZnVuY3Rpb24gb251bnBpcGUocmVhZGFibGUsIHVucGlwZUluZm8pIHsKCSAgICBkZWJ1Zygnb251bnBpcGUnKTsKCgkgICAgaWYgKHJlYWRhYmxlID09PSBzcmMpIHsKCSAgICAgIGlmICh1bnBpcGVJbmZvICYmIHVucGlwZUluZm8uaGFzVW5waXBlZCA9PT0gZmFsc2UpIHsKCSAgICAgICAgdW5waXBlSW5mby5oYXNVbnBpcGVkID0gdHJ1ZTsKCSAgICAgICAgY2xlYW51cCgpOwoJICAgICAgfQoJICAgIH0KCSAgfQoKCSAgZnVuY3Rpb24gb25lbmQoKSB7CgkgICAgZGVidWcoJ29uZW5kJyk7CgkgICAgZGVzdC5lbmQoKTsKCSAgfSAvLyB3aGVuIHRoZSBkZXN0IGRyYWlucywgaXQgcmVkdWNlcyB0aGUgYXdhaXREcmFpbiBjb3VudGVyCgkgIC8vIG9uIHRoZSBzb3VyY2UuICBUaGlzIHdvdWxkIGJlIG1vcmUgZWxlZ2FudCB3aXRoIGEgLm9uY2UoKQoJICAvLyBoYW5kbGVyIGluIGZsb3coKSwgYnV0IGFkZGluZyBhbmQgcmVtb3ZpbmcgcmVwZWF0ZWRseSBpcwoJICAvLyB0b28gc2xvdy4KCgoJICB2YXIgb25kcmFpbiA9IHBpcGVPbkRyYWluKHNyYyk7CgkgIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7CgkgIHZhciBjbGVhbmVkVXAgPSBmYWxzZTsKCgkgIGZ1bmN0aW9uIGNsZWFudXAoKSB7CgkgICAgZGVidWcoJ2NsZWFudXAnKTsgLy8gY2xlYW51cCBldmVudCBoYW5kbGVycyBvbmNlIHRoZSBwaXBlIGlzIGJyb2tlbgoKCSAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpOwoJICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTsKCSAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pOwoJICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CgkgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigndW5waXBlJywgb251bnBpcGUpOwoJICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpOwoJICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgdW5waXBlKTsKCSAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpOwoJICAgIGNsZWFuZWRVcCA9IHRydWU7IC8vIGlmIHRoZSByZWFkZXIgaXMgd2FpdGluZyBmb3IgYSBkcmFpbiBldmVudCBmcm9tIHRoaXMKCSAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnQKCSAgICAvLyBmbG93aW5nIGFnYWluLgoJICAgIC8vIFNvLCBpZiB0aGlzIGlzIGF3YWl0aW5nIGEgZHJhaW4sIHRoZW4gd2UganVzdCBjYWxsIGl0IG5vdy4KCSAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuCgoJICAgIGlmIChzdGF0ZS5hd2FpdERyYWluICYmICghZGVzdC5fd3JpdGFibGVTdGF0ZSB8fCBkZXN0Ll93cml0YWJsZVN0YXRlLm5lZWREcmFpbikpIG9uZHJhaW4oKTsKCSAgfQoKCSAgc3JjLm9uKCdkYXRhJywgb25kYXRhKTsKCgkgIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykgewoJICAgIGRlYnVnKCdvbmRhdGEnKTsKCSAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7CgkgICAgZGVidWcoJ2Rlc3Qud3JpdGUnLCByZXQpOwoKCSAgICBpZiAocmV0ID09PSBmYWxzZSkgewoJICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlCgkgICAgICAvLyB0byBnZXQgc3R1Y2sgaW4gYSBwZXJtYW5lbnRseSBwYXVzZWQgc3RhdGUgaWYgdGhhdCB3cml0ZQoJICAgICAgLy8gYWxzbyByZXR1cm5lZCBmYWxzZS4KCSAgICAgIC8vID0+IENoZWNrIHdoZXRoZXIgYGRlc3RgIGlzIHN0aWxsIGEgcGlwaW5nIGRlc3RpbmF0aW9uLgoJICAgICAgaWYgKChzdGF0ZS5waXBlc0NvdW50ID09PSAxICYmIHN0YXRlLnBpcGVzID09PSBkZXN0IHx8IHN0YXRlLnBpcGVzQ291bnQgPiAxICYmIGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpICE9PSAtMSkgJiYgIWNsZWFuZWRVcCkgewoJICAgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJywgc3RhdGUuYXdhaXREcmFpbik7CgkgICAgICAgIHN0YXRlLmF3YWl0RHJhaW4rKzsKCSAgICAgIH0KCgkgICAgICBzcmMucGF1c2UoKTsKCSAgICB9CgkgIH0gLy8gaWYgdGhlIGRlc3QgaGFzIGFuIGVycm9yLCB0aGVuIHN0b3AgcGlwaW5nIGludG8gaXQuCgkgIC8vIGhvd2V2ZXIsIGRvbid0IHN1cHByZXNzIHRoZSB0aHJvd2luZyBiZWhhdmlvciBmb3IgdGhpcy4KCgoJICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7CgkgICAgZGVidWcoJ29uZXJyb3InLCBlcik7CgkgICAgdW5waXBlKCk7CgkgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKCSAgICBpZiAoRUVsaXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKSBlcnJvck9yRGVzdHJveSQxKGRlc3QsIGVyKTsKCSAgfSAvLyBNYWtlIHN1cmUgb3VyIGVycm9yIGhhbmRsZXIgaXMgYXR0YWNoZWQgYmVmb3JlIHVzZXJsYW5kIG9uZXMuCgoKCSAgcHJlcGVuZExpc3RlbmVyKGRlc3QsICdlcnJvcicsIG9uZXJyb3IpOyAvLyBCb3RoIGNsb3NlIGFuZCBmaW5pc2ggc2hvdWxkIHRyaWdnZXIgdW5waXBlLCBidXQgb25seSBvbmNlLgoKCSAgZnVuY3Rpb24gb25jbG9zZSgpIHsKCSAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7CgkgICAgdW5waXBlKCk7CgkgIH0KCgkgIGRlc3Qub25jZSgnY2xvc2UnLCBvbmNsb3NlKTsKCgkgIGZ1bmN0aW9uIG9uZmluaXNoKCkgewoJICAgIGRlYnVnKCdvbmZpbmlzaCcpOwoJICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7CgkgICAgdW5waXBlKCk7CgkgIH0KCgkgIGRlc3Qub25jZSgnZmluaXNoJywgb25maW5pc2gpOwoKCSAgZnVuY3Rpb24gdW5waXBlKCkgewoJICAgIGRlYnVnKCd1bnBpcGUnKTsKCSAgICBzcmMudW5waXBlKGRlc3QpOwoJICB9IC8vIHRlbGwgdGhlIGRlc3QgdGhhdCBpdCdzIGJlaW5nIHBpcGVkIHRvCgoKCSAgZGVzdC5lbWl0KCdwaXBlJywgc3JjKTsgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LgoKCSAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7CgkgICAgZGVidWcoJ3BpcGUgcmVzdW1lJyk7CgkgICAgc3JjLnJlc3VtZSgpOwoJICB9CgoJICByZXR1cm4gZGVzdDsKCX07CgoJZnVuY3Rpb24gcGlwZU9uRHJhaW4oc3JjKSB7CgkgIHJldHVybiBmdW5jdGlvbiBwaXBlT25EcmFpbkZ1bmN0aW9uUmVzdWx0KCkgewoJICAgIHZhciBzdGF0ZSA9IHNyYy5fcmVhZGFibGVTdGF0ZTsKCSAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTsKCSAgICBpZiAoc3RhdGUuYXdhaXREcmFpbikgc3RhdGUuYXdhaXREcmFpbi0tOwoKCSAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiA9PT0gMCAmJiBFRWxpc3RlbmVyQ291bnQoc3JjLCAnZGF0YScpKSB7CgkgICAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsKCSAgICAgIGZsb3coc3JjKTsKCSAgICB9CgkgIH07Cgl9CgoJUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7CgkgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgkgIHZhciB1bnBpcGVJbmZvID0gewoJICAgIGhhc1VucGlwZWQ6IGZhbHNlCgkgIH07IC8vIGlmIHdlJ3JlIG5vdCBwaXBpbmcgYW55d2hlcmUsIHRoZW4gZG8gbm90aGluZy4KCgkgIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAwKSByZXR1cm4gdGhpczsgLy8ganVzdCBvbmUgZGVzdGluYXRpb24uICBtb3N0IGNvbW1vbiBjYXNlLgoKCSAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHsKCSAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS4KCSAgICBpZiAoZGVzdCAmJiBkZXN0ICE9PSBzdGF0ZS5waXBlcykgcmV0dXJuIHRoaXM7CgkgICAgaWYgKCFkZXN0KSBkZXN0ID0gc3RhdGUucGlwZXM7IC8vIGdvdCBhIG1hdGNoLgoKCSAgICBzdGF0ZS5waXBlcyA9IG51bGw7CgkgICAgc3RhdGUucGlwZXNDb3VudCA9IDA7CgkgICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwoJICAgIGlmIChkZXN0KSBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMsIHVucGlwZUluZm8pOwoJICAgIHJldHVybiB0aGlzOwoJICB9IC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuCgoKCSAgaWYgKCFkZXN0KSB7CgkgICAgLy8gcmVtb3ZlIGFsbC4KCSAgICB2YXIgZGVzdHMgPSBzdGF0ZS5waXBlczsKCSAgICB2YXIgbGVuID0gc3RhdGUucGlwZXNDb3VudDsKCSAgICBzdGF0ZS5waXBlcyA9IG51bGw7CgkgICAgc3RhdGUucGlwZXNDb3VudCA9IDA7CgkgICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwoKCSAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CgkgICAgICBkZXN0c1tpXS5lbWl0KCd1bnBpcGUnLCB0aGlzLCB7CgkgICAgICAgIGhhc1VucGlwZWQ6IGZhbHNlCgkgICAgICB9KTsKCSAgICB9CgoJICAgIHJldHVybiB0aGlzOwoJICB9IC8vIHRyeSB0byBmaW5kIHRoZSByaWdodCBvbmUuCgoKCSAgdmFyIGluZGV4ID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7CgkgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiB0aGlzOwoJICBzdGF0ZS5waXBlcy5zcGxpY2UoaW5kZXgsIDEpOwoJICBzdGF0ZS5waXBlc0NvdW50IC09IDE7CgkgIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdOwoJICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMsIHVucGlwZUluZm8pOwoJICByZXR1cm4gdGhpczsKCX07IC8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3IKCS8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nCgoKCVJlYWRhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldiwgZm4pIHsKCSAgdmFyIHJlcyA9IHN0cmVhbUJyb3dzZXIucHJvdG90eXBlLm9uLmNhbGwodGhpcywgZXYsIGZuKTsKCSAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCgkgIGlmIChldiA9PT0gJ2RhdGEnKSB7CgkgICAgLy8gdXBkYXRlIHJlYWRhYmxlTGlzdGVuaW5nIHNvIHRoYXQgcmVzdW1lKCkgbWF5IGJlIGEgbm8tb3AKCSAgICAvLyBhIGZldyBsaW5lcyBkb3duLiBUaGlzIGlzIG5lZWRlZCB0byBzdXBwb3J0IG9uY2UoJ3JlYWRhYmxlJykuCgkgICAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSB0aGlzLmxpc3RlbmVyQ291bnQoJ3JlYWRhYmxlJykgPiAwOyAvLyBUcnkgc3RhcnQgZmxvd2luZyBvbiBuZXh0IHRpY2sgaWYgc3RyZWFtIGlzbid0IGV4cGxpY2l0bHkgcGF1c2VkCgoJICAgIGlmIChzdGF0ZS5mbG93aW5nICE9PSBmYWxzZSkgdGhpcy5yZXN1bWUoKTsKCSAgfSBlbHNlIGlmIChldiA9PT0gJ3JlYWRhYmxlJykgewoJICAgIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiAhc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcpIHsKCSAgICAgIHN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nID0gc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKCSAgICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTsKCSAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwoJICAgICAgZGVidWcoJ29uIHJlYWRhYmxlJywgc3RhdGUubGVuZ3RoLCBzdGF0ZS5yZWFkaW5nKTsKCgkgICAgICBpZiAoc3RhdGUubGVuZ3RoKSB7CgkgICAgICAgIGVtaXRSZWFkYWJsZSh0aGlzKTsKCSAgICAgIH0gZWxzZSBpZiAoIXN0YXRlLnJlYWRpbmcpIHsKCSAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhuUmVhZGluZ05leHRUaWNrLCB0aGlzKTsKCSAgICAgIH0KCSAgICB9CgkgIH0KCgkgIHJldHVybiByZXM7Cgl9OwoKCVJlYWRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IFJlYWRhYmxlLnByb3RvdHlwZS5vbjsKCglSZWFkYWJsZS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXYsIGZuKSB7CgkgIHZhciByZXMgPSBzdHJlYW1Ccm93c2VyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lci5jYWxsKHRoaXMsIGV2LCBmbik7CgoJICBpZiAoZXYgPT09ICdyZWFkYWJsZScpIHsKCSAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIGlmIHRoZXJlIGlzIHNvbWVvbmUgc3RpbGwgbGlzdGVuaW5nIHRvCgkgICAgLy8gcmVhZGFibGUgYW5kIHJlc2V0IHRoZSBzdGF0ZS4gSG93ZXZlciB0aGlzIG5lZWRzIHRvIGhhcHBlbgoJICAgIC8vIGFmdGVyIHJlYWRhYmxlIGhhcyBiZWVuIGVtaXR0ZWQgYnV0IGJlZm9yZSBJL08gKG5leHRUaWNrKSB0bwoJICAgIC8vIHN1cHBvcnQgb25jZSgncmVhZGFibGUnLCBmbikgY3ljbGVzLiBUaGlzIG1lYW5zIHRoYXQgY2FsbGluZwoJICAgIC8vIHJlc3VtZSB3aXRoaW4gdGhlIHNhbWUgdGljayB3aWxsIGhhdmUgbm8KCSAgICAvLyBlZmZlY3QuCgkgICAgcHJvY2Vzcy5uZXh0VGljayh1cGRhdGVSZWFkYWJsZUxpc3RlbmluZywgdGhpcyk7CgkgIH0KCgkgIHJldHVybiByZXM7Cgl9OwoKCVJlYWRhYmxlLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZXYpIHsKCSAgdmFyIHJlcyA9IHN0cmVhbUJyb3dzZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoKCSAgaWYgKGV2ID09PSAncmVhZGFibGUnIHx8IGV2ID09PSB1bmRlZmluZWQpIHsKCSAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIGlmIHRoZXJlIGlzIHNvbWVvbmUgc3RpbGwgbGlzdGVuaW5nIHRvCgkgICAgLy8gcmVhZGFibGUgYW5kIHJlc2V0IHRoZSBzdGF0ZS4gSG93ZXZlciB0aGlzIG5lZWRzIHRvIGhhcHBlbgoJICAgIC8vIGFmdGVyIHJlYWRhYmxlIGhhcyBiZWVuIGVtaXR0ZWQgYnV0IGJlZm9yZSBJL08gKG5leHRUaWNrKSB0bwoJICAgIC8vIHN1cHBvcnQgb25jZSgncmVhZGFibGUnLCBmbikgY3ljbGVzLiBUaGlzIG1lYW5zIHRoYXQgY2FsbGluZwoJICAgIC8vIHJlc3VtZSB3aXRoaW4gdGhlIHNhbWUgdGljayB3aWxsIGhhdmUgbm8KCSAgICAvLyBlZmZlY3QuCgkgICAgcHJvY2Vzcy5uZXh0VGljayh1cGRhdGVSZWFkYWJsZUxpc3RlbmluZywgdGhpcyk7CgkgIH0KCgkgIHJldHVybiByZXM7Cgl9OwoKCWZ1bmN0aW9uIHVwZGF0ZVJlYWRhYmxlTGlzdGVuaW5nKHNlbGYpIHsKCSAgdmFyIHN0YXRlID0gc2VsZi5fcmVhZGFibGVTdGF0ZTsKCSAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSBzZWxmLmxpc3RlbmVyQ291bnQoJ3JlYWRhYmxlJykgPiAwOwoKCSAgaWYgKHN0YXRlLnJlc3VtZVNjaGVkdWxlZCAmJiAhc3RhdGUucGF1c2VkKSB7CgkgICAgLy8gZmxvd2luZyBuZWVkcyB0byBiZSBzZXQgdG8gdHJ1ZSBub3csIG90aGVyd2lzZQoJICAgIC8vIHRoZSB1cGNvbWluZyByZXN1bWUgd2lsbCBub3QgZmxvdy4KCSAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsgLy8gY3J1ZGUgd2F5IHRvIGNoZWNrIGlmIHdlIHNob3VsZCByZXN1bWUKCSAgfSBlbHNlIGlmIChzZWxmLmxpc3RlbmVyQ291bnQoJ2RhdGEnKSA+IDApIHsKCSAgICBzZWxmLnJlc3VtZSgpOwoJICB9Cgl9CgoJZnVuY3Rpb24gblJlYWRpbmdOZXh0VGljayhzZWxmKSB7CgkgIGRlYnVnKCdyZWFkYWJsZSBuZXh0dGljayByZWFkIDAnKTsKCSAgc2VsZi5yZWFkKDApOwoJfSAvLyBwYXVzZSgpIGFuZCByZXN1bWUoKSBhcmUgcmVtbmFudHMgb2YgdGhlIGxlZ2FjeSByZWFkYWJsZSBzdHJlYW0gQVBJCgkvLyBJZiB0aGUgdXNlciB1c2VzIHRoZW0sIHRoZW4gc3dpdGNoIGludG8gb2xkIG1vZGUuCgoKCVJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7CgkgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgoJICBpZiAoIXN0YXRlLmZsb3dpbmcpIHsKCSAgICBkZWJ1ZygncmVzdW1lJyk7IC8vIHdlIGZsb3cgb25seSBpZiB0aGVyZSBpcyBubyBvbmUgbGlzdGVuaW5nCgkgICAgLy8gZm9yIHJlYWRhYmxlLCBidXQgd2Ugc3RpbGwgaGF2ZSB0byBjYWxsCgkgICAgLy8gcmVzdW1lKCkKCgkgICAgc3RhdGUuZmxvd2luZyA9ICFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZzsKCSAgICByZXN1bWUodGhpcywgc3RhdGUpOwoJICB9CgoJICBzdGF0ZS5wYXVzZWQgPSBmYWxzZTsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCWZ1bmN0aW9uIHJlc3VtZShzdHJlYW0sIHN0YXRlKSB7CgkgIGlmICghc3RhdGUucmVzdW1lU2NoZWR1bGVkKSB7CgkgICAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gdHJ1ZTsKCSAgICBwcm9jZXNzLm5leHRUaWNrKHJlc3VtZV8sIHN0cmVhbSwgc3RhdGUpOwoJICB9Cgl9CgoJZnVuY3Rpb24gcmVzdW1lXyhzdHJlYW0sIHN0YXRlKSB7CgkgIGRlYnVnKCdyZXN1bWUnLCBzdGF0ZS5yZWFkaW5nKTsKCgkgIGlmICghc3RhdGUucmVhZGluZykgewoJICAgIHN0cmVhbS5yZWFkKDApOwoJICB9CgoJICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSBmYWxzZTsKCSAgc3RyZWFtLmVtaXQoJ3Jlc3VtZScpOwoJICBmbG93KHN0cmVhbSk7CgkgIGlmIChzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5yZWFkaW5nKSBzdHJlYW0ucmVhZCgwKTsKCX0KCglSZWFkYWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7CgkgIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpOwoKCSAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyAhPT0gZmFsc2UpIHsKCSAgICBkZWJ1ZygncGF1c2UnKTsKCSAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPSBmYWxzZTsKCSAgICB0aGlzLmVtaXQoJ3BhdXNlJyk7CgkgIH0KCgkgIHRoaXMuX3JlYWRhYmxlU3RhdGUucGF1c2VkID0gdHJ1ZTsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCWZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7CgkgIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKCSAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTsKCgkgIHdoaWxlIChzdGF0ZS5mbG93aW5nICYmIHN0cmVhbS5yZWFkKCkgIT09IG51bGwpIHsKCSAgfQoJfSAvLyB3cmFwIGFuIG9sZC1zdHlsZSBzdHJlYW0gYXMgdGhlIGFzeW5jIGRhdGEgc291cmNlLgoJLy8gVGhpcyBpcyAqbm90KiBwYXJ0IG9mIHRoZSByZWFkYWJsZSBzdHJlYW0gaW50ZXJmYWNlLgoJLy8gSXQgaXMgYW4gdWdseSB1bmZvcnR1bmF0ZSBtZXNzIG9mIGhpc3RvcnkuCgoKCVJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKHN0cmVhbSkgewoJICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCSAgdmFyIHBhdXNlZCA9IGZhbHNlOwoJICBzdHJlYW0ub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHsKCSAgICBkZWJ1Zygnd3JhcHBlZCBlbmQnKTsKCgkgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7CgkgICAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpOwoJICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkgX3RoaXMucHVzaChjaHVuayk7CgkgICAgfQoKCSAgICBfdGhpcy5wdXNoKG51bGwpOwoJICB9KTsKCSAgc3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7CgkgICAgZGVidWcoJ3dyYXBwZWQgZGF0YScpOwoJICAgIGlmIChzdGF0ZS5kZWNvZGVyKSBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspOyAvLyBkb24ndCBza2lwIG92ZXIgZmFsc3kgdmFsdWVzIGluIG9iamVjdE1vZGUKCgkgICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgJiYgKGNodW5rID09PSBudWxsIHx8IGNodW5rID09PSB1bmRlZmluZWQpKSByZXR1cm47ZWxzZSBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgKCFjaHVuayB8fCAhY2h1bmsubGVuZ3RoKSkgcmV0dXJuOwoKCSAgICB2YXIgcmV0ID0gX3RoaXMucHVzaChjaHVuayk7CgoJICAgIGlmICghcmV0KSB7CgkgICAgICBwYXVzZWQgPSB0cnVlOwoJICAgICAgc3RyZWFtLnBhdXNlKCk7CgkgICAgfQoJICB9KTsgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLgoJICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy4KCgkgIGZvciAodmFyIGkgaW4gc3RyZWFtKSB7CgkgICAgaWYgKHRoaXNbaV0gPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc3RyZWFtW2ldID09PSAnZnVuY3Rpb24nKSB7CgkgICAgICB0aGlzW2ldID0gZnVuY3Rpb24gbWV0aG9kV3JhcChtZXRob2QpIHsKCSAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG1ldGhvZFdyYXBSZXR1cm5GdW5jdGlvbigpIHsKCSAgICAgICAgICByZXR1cm4gc3RyZWFtW21ldGhvZF0uYXBwbHkoc3RyZWFtLCBhcmd1bWVudHMpOwoJICAgICAgICB9OwoJICAgICAgfShpKTsKCSAgICB9CgkgIH0gLy8gcHJveHkgY2VydGFpbiBpbXBvcnRhbnQgZXZlbnRzLgoKCgkgIGZvciAodmFyIG4gPSAwOyBuIDwga1Byb3h5RXZlbnRzLmxlbmd0aDsgbisrKSB7CgkgICAgc3RyZWFtLm9uKGtQcm94eUV2ZW50c1tuXSwgdGhpcy5lbWl0LmJpbmQodGhpcywga1Byb3h5RXZlbnRzW25dKSk7CgkgIH0gLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZQoJICAvLyB1bmRlcmx5aW5nIHN0cmVhbS4KCgoJICB0aGlzLl9yZWFkID0gZnVuY3Rpb24gKG4pIHsKCSAgICBkZWJ1Zygnd3JhcHBlZCBfcmVhZCcsIG4pOwoKCSAgICBpZiAocGF1c2VkKSB7CgkgICAgICBwYXVzZWQgPSBmYWxzZTsKCSAgICAgIHN0cmVhbS5yZXN1bWUoKTsKCSAgICB9CgkgIH07CgoJICByZXR1cm4gdGhpczsKCX07CgoJaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicpIHsKCSAgUmVhZGFibGUucHJvdG90eXBlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsKCSAgICBpZiAoY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yJDEgPT09IHVuZGVmaW5lZCkgewoJICAgICAgY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yJDEgPSBhc3luY19pdGVyYXRvcjsKCSAgICB9CgoJICAgIHJldHVybiBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3IkMSh0aGlzKTsKCSAgfTsKCX0KCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAncmVhZGFibGVIaWdoV2F0ZXJNYXJrJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrOwoJICB9Cgl9KTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZS5wcm90b3R5cGUsICdyZWFkYWJsZUJ1ZmZlcicsIHsKCSAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKCSAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCgkgIC8vIHVzZXJsYW5kIHdpbGwgZmFpbAoJICBlbnVtZXJhYmxlOiBmYWxzZSwKCSAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUgJiYgdGhpcy5fcmVhZGFibGVTdGF0ZS5idWZmZXI7CgkgIH0KCX0pOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgJ3JlYWRhYmxlRmxvd2luZycsIHsKCSAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKCSAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCgkgIC8vIHVzZXJsYW5kIHdpbGwgZmFpbAoJICBlbnVtZXJhYmxlOiBmYWxzZSwKCSAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZzsKCSAgfSwKCSAgc2V0OiBmdW5jdGlvbiBzZXQoc3RhdGUpIHsKCSAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSkgewoJICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID0gc3RhdGU7CgkgICAgfQoJICB9Cgl9KTsgLy8gZXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LgoKCVJlYWRhYmxlLl9mcm9tTGlzdCA9IGZyb21MaXN0OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgJ3JlYWRhYmxlTGVuZ3RoJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5sZW5ndGg7CgkgIH0KCX0pOyAvLyBQbHVjayBvZmYgbiBieXRlcyBmcm9tIGFuIGFycmF5IG9mIGJ1ZmZlcnMuCgkvLyBMZW5ndGggaXMgdGhlIGNvbWJpbmVkIGxlbmd0aHMgb2YgYWxsIHRoZSBidWZmZXJzIGluIHRoZSBsaXN0LgoJLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmcKCS8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuCgoJZnVuY3Rpb24gZnJvbUxpc3Qobiwgc3RhdGUpIHsKCSAgLy8gbm90aGluZyBidWZmZXJlZAoJICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsKCSAgdmFyIHJldDsKCSAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldCA9IHN0YXRlLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYgKCFuIHx8IG4gPj0gc3RhdGUubGVuZ3RoKSB7CgkgICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBsaXN0CgkgICAgaWYgKHN0YXRlLmRlY29kZXIpIHJldCA9IHN0YXRlLmJ1ZmZlci5qb2luKCcnKTtlbHNlIGlmIChzdGF0ZS5idWZmZXIubGVuZ3RoID09PSAxKSByZXQgPSBzdGF0ZS5idWZmZXIuZmlyc3QoKTtlbHNlIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25jYXQoc3RhdGUubGVuZ3RoKTsKCSAgICBzdGF0ZS5idWZmZXIuY2xlYXIoKTsKCSAgfSBlbHNlIHsKCSAgICAvLyByZWFkIHBhcnQgb2YgbGlzdAoJICAgIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25zdW1lKG4sIHN0YXRlLmRlY29kZXIpOwoJICB9CgkgIHJldHVybiByZXQ7Cgl9CgoJZnVuY3Rpb24gZW5kUmVhZGFibGUoc3RyZWFtKSB7CgkgIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKCSAgZGVidWcoJ2VuZFJlYWRhYmxlJywgc3RhdGUuZW5kRW1pdHRlZCk7CgoJICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQpIHsKCSAgICBzdGF0ZS5lbmRlZCA9IHRydWU7CgkgICAgcHJvY2Vzcy5uZXh0VGljayhlbmRSZWFkYWJsZU5ULCBzdGF0ZSwgc3RyZWFtKTsKCSAgfQoJfQoKCWZ1bmN0aW9uIGVuZFJlYWRhYmxlTlQoc3RhdGUsIHN0cmVhbSkgewoJICBkZWJ1ZygnZW5kUmVhZGFibGVOVCcsIHN0YXRlLmVuZEVtaXR0ZWQsIHN0YXRlLmxlbmd0aCk7IC8vIENoZWNrIHRoYXQgd2UgZGlkbid0IGdldCBvbmUgbGFzdCB1bnNoaWZ0LgoKCSAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkgewoJICAgIHN0YXRlLmVuZEVtaXR0ZWQgPSB0cnVlOwoJICAgIHN0cmVhbS5yZWFkYWJsZSA9IGZhbHNlOwoJICAgIHN0cmVhbS5lbWl0KCdlbmQnKTsKCgkgICAgaWYgKHN0YXRlLmF1dG9EZXN0cm95KSB7CgkgICAgICAvLyBJbiBjYXNlIG9mIGR1cGxleCBzdHJlYW1zIHdlIG5lZWQgYSB3YXkgdG8gZGV0ZWN0CgkgICAgICAvLyBpZiB0aGUgd3JpdGFibGUgc2lkZSBpcyByZWFkeSBmb3IgYXV0b0Rlc3Ryb3kgYXMgd2VsbAoJICAgICAgdmFyIHdTdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTsKCgkgICAgICBpZiAoIXdTdGF0ZSB8fCB3U3RhdGUuYXV0b0Rlc3Ryb3kgJiYgd1N0YXRlLmZpbmlzaGVkKSB7CgkgICAgICAgIHN0cmVhbS5kZXN0cm95KCk7CgkgICAgICB9CgkgICAgfQoJICB9Cgl9CgoJaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicpIHsKCSAgUmVhZGFibGUuZnJvbSA9IGZ1bmN0aW9uIChpdGVyYWJsZSwgb3B0cykgewoJICAgIGlmIChmcm9tID09PSB1bmRlZmluZWQpIHsKCSAgICAgIGZyb20gPSBmcm9tQnJvd3NlcjsKCSAgICB9CgoJICAgIHJldHVybiBmcm9tKFJlYWRhYmxlLCBpdGVyYWJsZSwgb3B0cyk7CgkgIH07Cgl9CgoJZnVuY3Rpb24gaW5kZXhPZih4cywgeCkgewoJICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykgewoJICAgIGlmICh4c1tpXSA9PT0geCkgcmV0dXJuIGk7CgkgIH0KCgkgIHJldHVybiAtMTsKCX0KCgkvKioKCSAqIE1vZHVsZSBleHBvcnRzLgoJICovCgoJdmFyIGJyb3dzZXIgPSBkZXByZWNhdGU7CgoJLyoqCgkgKiBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLgoJICogUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC4KCSAqCgkgKiBJZiBgbG9jYWxTdG9yYWdlLm5vRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC4KCSAqCgkgKiBJZiBgbG9jYWxTdG9yYWdlLnRocm93RGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnMKCSAqIHdpbGwgdGhyb3cgYW4gRXJyb3Igd2hlbiBpbnZva2VkLgoJICoKCSAqIElmIGBsb2NhbFN0b3JhZ2UudHJhY2VEZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBkZXByZWNhdGVkIGZ1bmN0aW9ucwoJICogd2lsbCBpbnZva2UgYGNvbnNvbGUudHJhY2UoKWAgaW5zdGVhZCBvZiBgY29uc29sZS5lcnJvcigpYC4KCSAqCgkgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIHRoZSBmdW5jdGlvbiB0byBkZXByZWNhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBtc2cgLSB0aGUgc3RyaW5nIHRvIHByaW50IHRvIHRoZSBjb25zb2xlIHdoZW4gYGZuYCBpcyBpbnZva2VkCgkgKiBAcmV0dXJucyB7RnVuY3Rpb259IGEgbmV3ICJkZXByZWNhdGVkIiB2ZXJzaW9uIG9mIGBmbmAKCSAqIEBhcGkgcHVibGljCgkgKi8KCglmdW5jdGlvbiBkZXByZWNhdGUgKGZuLCBtc2cpIHsKCSAgaWYgKGNvbmZpZygnbm9EZXByZWNhdGlvbicpKSB7CgkgICAgcmV0dXJuIGZuOwoJICB9CgoJICB2YXIgd2FybmVkID0gZmFsc2U7CgkgIGZ1bmN0aW9uIGRlcHJlY2F0ZWQoKSB7CgkgICAgaWYgKCF3YXJuZWQpIHsKCSAgICAgIGlmIChjb25maWcoJ3Rocm93RGVwcmVjYXRpb24nKSkgewoJICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTsKCSAgICAgIH0gZWxzZSBpZiAoY29uZmlnKCd0cmFjZURlcHJlY2F0aW9uJykpIHsKCSAgICAgICAgY29uc29sZS50cmFjZShtc2cpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgY29uc29sZS53YXJuKG1zZyk7CgkgICAgICB9CgkgICAgICB3YXJuZWQgPSB0cnVlOwoJICAgIH0KCSAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCSAgfQoKCSAgcmV0dXJuIGRlcHJlY2F0ZWQ7Cgl9CgoJLyoqCgkgKiBDaGVja3MgYGxvY2FsU3RvcmFnZWAgZm9yIGJvb2xlYW4gdmFsdWVzIGZvciB0aGUgZ2l2ZW4gYG5hbWVgLgoJICoKCSAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lCgkgKiBAcmV0dXJucyB7Qm9vbGVhbn0KCSAqIEBhcGkgcHJpdmF0ZQoJICovCgoJZnVuY3Rpb24gY29uZmlnIChuYW1lKSB7CgkgIC8vIGFjY2Vzc2luZyBnbG9iYWwubG9jYWxTdG9yYWdlIGNhbiB0cmlnZ2VyIGEgRE9NRXhjZXB0aW9uIGluIHNhbmRib3hlZCBpZnJhbWVzCgkgIHRyeSB7CgkgICAgaWYgKCFjb21tb25qc0dsb2JhbC5sb2NhbFN0b3JhZ2UpIHJldHVybiBmYWxzZTsKCSAgfSBjYXRjaCAoXykgewoJICAgIHJldHVybiBmYWxzZTsKCSAgfQoJICB2YXIgdmFsID0gY29tbW9uanNHbG9iYWwubG9jYWxTdG9yYWdlW25hbWVdOwoJICBpZiAobnVsbCA9PSB2YWwpIHJldHVybiBmYWxzZTsKCSAgcmV0dXJuIFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJzsKCX0KCgl2YXIgX3N0cmVhbV93cml0YWJsZSA9IFdyaXRhYmxlOwoJLy8gdGhlcmUgd2lsbCBiZSBvbmx5IDIgb2YgdGhlc2UgZm9yIGVhY2ggc3RyZWFtCgoKCWZ1bmN0aW9uIENvcmtlZFJlcXVlc3Qoc3RhdGUpIHsKCSAgdmFyIF90aGlzID0gdGhpczsKCgkgIHRoaXMubmV4dCA9IG51bGw7CgkgIHRoaXMuZW50cnkgPSBudWxsOwoKCSAgdGhpcy5maW5pc2ggPSBmdW5jdGlvbiAoKSB7CgkgICAgb25Db3JrZWRGaW5pc2goX3RoaXMsIHN0YXRlKTsKCSAgfTsKCX0KCS8qIDwvcmVwbGFjZW1lbnQ+ICovCgoJLyo8cmVwbGFjZW1lbnQ+Ki8KCgoJdmFyIER1cGxleCQxOwoJLyo8L3JlcGxhY2VtZW50PiovCgoJV3JpdGFibGUuV3JpdGFibGVTdGF0ZSA9IFdyaXRhYmxlU3RhdGU7CgkvKjxyZXBsYWNlbWVudD4qLwoKCXZhciBpbnRlcm5hbFV0aWwgPSB7CgkgIGRlcHJlY2F0ZTogYnJvd3NlcgoJfTsKCS8qPC9yZXBsYWNlbWVudD4qLwoKCS8qPHJlcGxhY2VtZW50PiovCgoKCS8qPC9yZXBsYWNlbWVudD4qLwoKCgl2YXIgQnVmZmVyJDMgPSBidWZmZXIuQnVmZmVyOwoKCXZhciBPdXJVaW50OEFycmF5JDEgPSBjb21tb25qc0dsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9OwoKCWZ1bmN0aW9uIF91aW50OEFycmF5VG9CdWZmZXIkMShjaHVuaykgewoJICByZXR1cm4gQnVmZmVyJDMuZnJvbShjaHVuayk7Cgl9CgoJZnVuY3Rpb24gX2lzVWludDhBcnJheSQxKG9iaikgewoJICByZXR1cm4gQnVmZmVyJDMuaXNCdWZmZXIob2JqKSB8fCBvYmogaW5zdGFuY2VvZiBPdXJVaW50OEFycmF5JDE7Cgl9CgoKCgl2YXIgZ2V0SGlnaFdhdGVyTWFyayQyID0gc3RhdGUuZ2V0SGlnaFdhdGVyTWFyazsKCgl2YXIgX3JlcXVpcmUkY29kZXMkMSA9IGVycm9yc0Jyb3dzZXIuY29kZXMsCgkgICAgRVJSX0lOVkFMSURfQVJHX1RZUEUkMSA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX0lOVkFMSURfQVJHX1RZUEUsCgkgICAgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQkMSA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQsCgkgICAgRVJSX01VTFRJUExFX0NBTExCQUNLID0gX3JlcXVpcmUkY29kZXMkMS5FUlJfTVVMVElQTEVfQ0FMTEJBQ0ssCgkgICAgRVJSX1NUUkVBTV9DQU5OT1RfUElQRSA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX1NUUkVBTV9DQU5OT1RfUElQRSwKCSAgICBFUlJfU1RSRUFNX0RFU1RST1lFRCA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX1NUUkVBTV9ERVNUUk9ZRUQsCgkgICAgRVJSX1NUUkVBTV9OVUxMX1ZBTFVFUyA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX1NUUkVBTV9OVUxMX1ZBTFVFUywKCSAgICBFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORCA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQsCgkgICAgRVJSX1VOS05PV05fRU5DT0RJTkcgPSBfcmVxdWlyZSRjb2RlcyQxLkVSUl9VTktOT1dOX0VOQ09ESU5HOwoKCXZhciBlcnJvck9yRGVzdHJveSQyID0gZGVzdHJveV8xLmVycm9yT3JEZXN0cm95OwoKCWluaGVyaXRzX2Jyb3dzZXIoV3JpdGFibGUsIHN0cmVhbUJyb3dzZXIpOwoKCWZ1bmN0aW9uIG5vcCgpIHt9CgoJZnVuY3Rpb24gV3JpdGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0sIGlzRHVwbGV4KSB7CgkgIER1cGxleCQxID0gRHVwbGV4JDEgfHwgY29tbW9uanNSZXF1aXJlKCIuL19zdHJlYW1fZHVwbGV4IiwgIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIiKTsKCSAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIER1cGxleCBzdHJlYW1zIGFyZSBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZSwgYnV0IHNoYXJlCgkgIC8vIHRoZSBzYW1lIG9wdGlvbnMgb2JqZWN0LgoJICAvLyBIb3dldmVyLCBzb21lIGNhc2VzIHJlcXVpcmUgc2V0dGluZyBvcHRpb25zIHRvIGRpZmZlcmVudAoJICAvLyB2YWx1ZXMgZm9yIHRoZSByZWFkYWJsZSBhbmQgdGhlIHdyaXRhYmxlIHNpZGVzIG9mIHRoZSBkdXBsZXggc3RyZWFtLAoJICAvLyBlLmcuIG9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlIHZzLiBvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZSwgZXRjLgoKCSAgaWYgKHR5cGVvZiBpc0R1cGxleCAhPT0gJ2Jvb2xlYW4nKSBpc0R1cGxleCA9IHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleCQxOyAvLyBvYmplY3Qgc3RyZWFtIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciBvciBub3QgdGhpcyBzdHJlYW0KCSAgLy8gY29udGFpbnMgYnVmZmVycyBvciBvYmplY3RzLgoKCSAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7CgkgIGlmIChpc0R1cGxleCkgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy53cml0YWJsZU9iamVjdE1vZGU7IC8vIHRoZSBwb2ludCBhdCB3aGljaCB3cml0ZSgpIHN0YXJ0cyByZXR1cm5pbmcgZmFsc2UKCSAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyB0aGF0IHdlIGFsd2F5cyByZXR1cm4gZmFsc2UgaWYKCSAgLy8gdGhlIGVudGlyZSBidWZmZXIgaXMgbm90IGZsdXNoZWQgaW1tZWRpYXRlbHkgb24gd3JpdGUoKQoKCSAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gZ2V0SGlnaFdhdGVyTWFyayQyKHRoaXMsIG9wdGlvbnMsICd3cml0YWJsZUhpZ2hXYXRlck1hcmsnLCBpc0R1cGxleCk7IC8vIGlmIF9maW5hbCBoYXMgYmVlbiBjYWxsZWQKCgkgIHRoaXMuZmluYWxDYWxsZWQgPSBmYWxzZTsgLy8gZHJhaW4gZXZlbnQgZmxhZy4KCgkgIHRoaXMubmVlZERyYWluID0gZmFsc2U7IC8vIGF0IHRoZSBzdGFydCBvZiBjYWxsaW5nIGVuZCgpCgoJICB0aGlzLmVuZGluZyA9IGZhbHNlOyAvLyB3aGVuIGVuZCgpIGhhcyBiZWVuIGNhbGxlZCwgYW5kIHJldHVybmVkCgoJICB0aGlzLmVuZGVkID0gZmFsc2U7IC8vIHdoZW4gJ2ZpbmlzaCcgaXMgZW1pdHRlZAoKCSAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOyAvLyBoYXMgaXQgYmVlbiBkZXN0cm95ZWQKCgkgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7IC8vIHNob3VsZCB3ZSBkZWNvZGUgc3RyaW5ncyBpbnRvIGJ1ZmZlcnMgYmVmb3JlIHBhc3NpbmcgdG8gX3dyaXRlPwoJICAvLyB0aGlzIGlzIGhlcmUgc28gdGhhdCBzb21lIG5vZGUtY29yZSBzdHJlYW1zIGNhbiBvcHRpbWl6ZSBzdHJpbmcKCSAgLy8gaGFuZGxpbmcgYXQgYSBsb3dlciBsZXZlbC4KCgkgIHZhciBub0RlY29kZSA9IG9wdGlvbnMuZGVjb2RlU3RyaW5ncyA9PT0gZmFsc2U7CgkgIHRoaXMuZGVjb2RlU3RyaW5ncyA9ICFub0RlY29kZTsgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZwoJICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuCgkgIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC4KCgkgIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnOyAvLyBub3QgYW4gYWN0dWFsIGJ1ZmZlciB3ZSBrZWVwIHRyYWNrIG9mLCBidXQgYSBtZWFzdXJlbWVudAoJICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nCgkgIC8vIHNvY2tldCBvciBmaWxlLgoKCSAgdGhpcy5sZW5ndGggPSAwOyAvLyBhIGZsYWcgdG8gc2VlIHdoZW4gd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhIHdyaXRlLgoKCSAgdGhpcy53cml0aW5nID0gZmFsc2U7IC8vIHdoZW4gdHJ1ZSBhbGwgd3JpdGVzIHdpbGwgYmUgYnVmZmVyZWQgdW50aWwgLnVuY29yaygpIGNhbGwKCgkgIHRoaXMuY29ya2VkID0gMDsgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksCgkgIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55CgkgIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsICJsYXRlciIgc2hvdWxkIGdlbmVyYWxseSBhbHNvCgkgIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLgoKCSAgdGhpcy5zeW5jID0gdHJ1ZTsgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaAoJICAvLyBtYXkgY2FsbCB0aGUgX3dyaXRlKCkgY2FsbGJhY2sgaW4gdGhlIHNhbWUgdGljaywgc28gdGhhdCB3ZSBkb24ndAoJICAvLyBlbmQgdXAgaW4gYW4gb3ZlcmxhcHBlZCBvbndyaXRlIHNpdHVhdGlvbi4KCgkgIHRoaXMuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlOyAvLyB0aGUgY2FsbGJhY2sgdGhhdCdzIHBhc3NlZCB0byBfd3JpdGUoY2h1bmssY2IpCgoJICB0aGlzLm9ud3JpdGUgPSBmdW5jdGlvbiAoZXIpIHsKCSAgICBvbndyaXRlKHN0cmVhbSwgZXIpOwoJICB9OyAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYikKCgoJICB0aGlzLndyaXRlY2IgPSBudWxsOyAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuCgoJICB0aGlzLndyaXRlbGVuID0gMDsKCSAgdGhpcy5idWZmZXJlZFJlcXVlc3QgPSBudWxsOwoJICB0aGlzLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOyAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrcwoJICAvLyB0aGlzIG11c3QgYmUgMCBiZWZvcmUgJ2ZpbmlzaCcgY2FuIGJlIGVtaXR0ZWQKCgkgIHRoaXMucGVuZGluZ2NiID0gMDsgLy8gZW1pdCBwcmVmaW5pc2ggaWYgdGhlIG9ubHkgdGhpbmcgd2UncmUgd2FpdGluZyBmb3IgaXMgX3dyaXRlIGNicwoJICAvLyBUaGlzIGlzIHJlbGV2YW50IGZvciBzeW5jaHJvbm91cyBUcmFuc2Zvcm0gc3RyZWFtcwoKCSAgdGhpcy5wcmVmaW5pc2hlZCA9IGZhbHNlOyAvLyBUcnVlIGlmIHRoZSBlcnJvciB3YXMgYWxyZWFkeSBlbWl0dGVkIGFuZCBzaG91bGQgbm90IGJlIHRocm93biBhZ2FpbgoKCSAgdGhpcy5lcnJvckVtaXR0ZWQgPSBmYWxzZTsgLy8gU2hvdWxkIGNsb3NlIGJlIGVtaXR0ZWQgb24gZGVzdHJveS4gRGVmYXVsdHMgdG8gdHJ1ZS4KCgkgIHRoaXMuZW1pdENsb3NlID0gb3B0aW9ucy5lbWl0Q2xvc2UgIT09IGZhbHNlOyAvLyBTaG91bGQgLmRlc3Ryb3koKSBiZSBjYWxsZWQgYWZ0ZXIgJ2ZpbmlzaCcgKGFuZCBwb3RlbnRpYWxseSAnZW5kJykKCgkgIHRoaXMuYXV0b0Rlc3Ryb3kgPSAhIW9wdGlvbnMuYXV0b0Rlc3Ryb3k7IC8vIGNvdW50IGJ1ZmZlcmVkIHJlcXVlc3RzCgoJICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdENvdW50ID0gMDsgLy8gYWxsb2NhdGUgdGhlIGZpcnN0IENvcmtlZFJlcXVlc3QsIHRoZXJlIGlzIGFsd2F5cwoJICAvLyBvbmUgYWxsb2NhdGVkIGFuZCBmcmVlIHRvIHVzZSwgYW5kIHdlIG1haW50YWluIGF0IG1vc3QgdHdvCgoJICB0aGlzLmNvcmtlZFJlcXVlc3RzRnJlZSA9IG5ldyBDb3JrZWRSZXF1ZXN0KHRoaXMpOwoJfQoKCVdyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIGdldEJ1ZmZlcigpIHsKCSAgdmFyIGN1cnJlbnQgPSB0aGlzLmJ1ZmZlcmVkUmVxdWVzdDsKCSAgdmFyIG91dCA9IFtdOwoKCSAgd2hpbGUgKGN1cnJlbnQpIHsKCSAgICBvdXQucHVzaChjdXJyZW50KTsKCSAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0OwoJICB9CgoJICByZXR1cm4gb3V0OwoJfTsKCgkoZnVuY3Rpb24gKCkgewoJICB0cnkgewoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZVN0YXRlLnByb3RvdHlwZSwgJ2J1ZmZlcicsIHsKCSAgICAgIGdldDogaW50ZXJuYWxVdGlsLmRlcHJlY2F0ZShmdW5jdGlvbiB3cml0YWJsZVN0YXRlQnVmZmVyR2V0dGVyKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5nZXRCdWZmZXIoKTsKCSAgICAgIH0sICdfd3JpdGFibGVTdGF0ZS5idWZmZXIgaXMgZGVwcmVjYXRlZC4gVXNlIF93cml0YWJsZVN0YXRlLmdldEJ1ZmZlciAnICsgJ2luc3RlYWQuJywgJ0RFUDAwMDMnKQoJICAgIH0pOwoJICB9IGNhdGNoIChfKSB7fQoJfSkoKTsgLy8gVGVzdCBfd3JpdGFibGVTdGF0ZSBmb3IgaW5oZXJpdGFuY2UgdG8gYWNjb3VudCBmb3IgRHVwbGV4IHN0cmVhbXMsCgkvLyB3aG9zZSBwcm90b3R5cGUgY2hhaW4gb25seSBwb2ludHMgdG8gUmVhZGFibGUuCgoKCXZhciByZWFsSGFzSW5zdGFuY2U7CgoJaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLmhhc0luc3RhbmNlICYmIHR5cGVvZiBGdW5jdGlvbi5wcm90b3R5cGVbU3ltYm9sLmhhc0luc3RhbmNlXSA9PT0gJ2Z1bmN0aW9uJykgewoJICByZWFsSGFzSW5zdGFuY2UgPSBGdW5jdGlvbi5wcm90b3R5cGVbU3ltYm9sLmhhc0luc3RhbmNlXTsKCSAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlLCBTeW1ib2wuaGFzSW5zdGFuY2UsIHsKCSAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUob2JqZWN0KSB7CgkgICAgICBpZiAocmVhbEhhc0luc3RhbmNlLmNhbGwodGhpcywgb2JqZWN0KSkgcmV0dXJuIHRydWU7CgkgICAgICBpZiAodGhpcyAhPT0gV3JpdGFibGUpIHJldHVybiBmYWxzZTsKCSAgICAgIHJldHVybiBvYmplY3QgJiYgb2JqZWN0Ll93cml0YWJsZVN0YXRlIGluc3RhbmNlb2YgV3JpdGFibGVTdGF0ZTsKCSAgICB9CgkgIH0pOwoJfSBlbHNlIHsKCSAgcmVhbEhhc0luc3RhbmNlID0gZnVuY3Rpb24gcmVhbEhhc0luc3RhbmNlKG9iamVjdCkgewoJICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiB0aGlzOwoJICB9OwoJfQoKCWZ1bmN0aW9uIFdyaXRhYmxlKG9wdGlvbnMpIHsKCSAgRHVwbGV4JDEgPSBEdXBsZXgkMSB8fCBjb21tb25qc1JlcXVpcmUoIi4vX3N0cmVhbV9kdXBsZXgiLCAiLyQkcm9sbHVwX2Jhc2UkJC9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYiIpOyAvLyBXcml0YWJsZSBjdG9yIGlzIGFwcGxpZWQgdG8gRHVwbGV4ZXMsIHRvby4KCSAgLy8gYHJlYWxIYXNJbnN0YW5jZWAgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgdXNpbmcgcGxhaW4gYGluc3RhbmNlb2ZgCgkgIC8vIHdvdWxkIHJldHVybiBmYWxzZSwgYXMgbm8gYF93cml0YWJsZVN0YXRlYCBwcm9wZXJ0eSBpcyBhdHRhY2hlZC4KCSAgLy8gVHJ5aW5nIHRvIHVzZSB0aGUgY3VzdG9tIGBpbnN0YW5jZW9mYCBmb3IgV3JpdGFibGUgaGVyZSB3aWxsIGFsc28gYnJlYWsgdGhlCgkgIC8vIE5vZGUuanMgTGF6eVRyYW5zZm9ybSBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaGFzIGEgbm9uLXRyaXZpYWwgZ2V0dGVyIGZvcgoJICAvLyBgX3dyaXRhYmxlU3RhdGVgIHRoYXQgd291bGQgbGVhZCB0byBpbmZpbml0ZSByZWN1cnNpb24uCgkgIC8vIENoZWNraW5nIGZvciBhIFN0cmVhbS5EdXBsZXggaW5zdGFuY2UgaXMgZmFzdGVyIGhlcmUgaW5zdGVhZCBvZiBpbnNpZGUKCSAgLy8gdGhlIFdyaXRhYmxlU3RhdGUgY29uc3RydWN0b3IsIGF0IGxlYXN0IHdpdGggVjggNi41CgoJICB2YXIgaXNEdXBsZXggPSB0aGlzIGluc3RhbmNlb2YgRHVwbGV4JDE7CgkgIGlmICghaXNEdXBsZXggJiYgIXJlYWxIYXNJbnN0YW5jZS5jYWxsKFdyaXRhYmxlLCB0aGlzKSkgcmV0dXJuIG5ldyBXcml0YWJsZShvcHRpb25zKTsKCSAgdGhpcy5fd3JpdGFibGVTdGF0ZSA9IG5ldyBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMsIGlzRHVwbGV4KTsgLy8gbGVnYWN5LgoKCSAgdGhpcy53cml0YWJsZSA9IHRydWU7CgoJICBpZiAob3B0aW9ucykgewoJICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fd3JpdGUgPSBvcHRpb25zLndyaXRlOwoJICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZXYgPT09ICdmdW5jdGlvbicpIHRoaXMuX3dyaXRldiA9IG9wdGlvbnMud3JpdGV2OwoJICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB0aGlzLl9kZXN0cm95ID0gb3B0aW9ucy5kZXN0cm95OwoJICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5maW5hbCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZmluYWwgPSBvcHRpb25zLmZpbmFsOwoJICB9CgoJICBzdHJlYW1Ccm93c2VyLmNhbGwodGhpcyk7Cgl9IC8vIE90aGVyd2lzZSBwZW9wbGUgY2FuIHBpcGUgV3JpdGFibGUgc3RyZWFtcywgd2hpY2ggaXMganVzdCB3cm9uZy4KCgoJV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7CgkgIGVycm9yT3JEZXN0cm95JDIodGhpcywgbmV3IEVSUl9TVFJFQU1fQ0FOTk9UX1BJUEUoKSk7Cgl9OwoKCWZ1bmN0aW9uIHdyaXRlQWZ0ZXJFbmQoc3RyZWFtLCBjYikgewoJICB2YXIgZXIgPSBuZXcgRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQoKTsgLy8gVE9ETzogZGVmZXIgZXJyb3IgZXZlbnRzIGNvbnNpc3RlbnRseSBldmVyeXdoZXJlLCBub3QganVzdCB0aGUgY2IKCgkgIGVycm9yT3JEZXN0cm95JDIoc3RyZWFtLCBlcik7CgkgIHByb2Nlc3MubmV4dFRpY2soY2IsIGVyKTsKCX0gLy8gQ2hlY2tzIHRoYXQgYSB1c2VyLXN1cHBsaWVkIGNodW5rIGlzIHZhbGlkLCBlc3BlY2lhbGx5IGZvciB0aGUgcGFydGljdWxhcgoJLy8gbW9kZSB0aGUgc3RyZWFtIGlzIGluLiBDdXJyZW50bHkgdGhpcyBtZWFucyB0aGF0IGBudWxsYCBpcyBuZXZlciBhY2NlcHRlZAoJLy8gYW5kIHVuZGVmaW5lZC9ub24tc3RyaW5nIHZhbHVlcyBhcmUgb25seSBhbGxvd2VkIGluIG9iamVjdCBtb2RlLgoKCglmdW5jdGlvbiB2YWxpZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBjYikgewoJICB2YXIgZXI7CgoJICBpZiAoY2h1bmsgPT09IG51bGwpIHsKCSAgICBlciA9IG5ldyBFUlJfU1RSRUFNX05VTExfVkFMVUVTKCk7CgkgIH0gZWxzZSBpZiAodHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJiAhc3RhdGUub2JqZWN0TW9kZSkgewoJICAgIGVyID0gbmV3IEVSUl9JTlZBTElEX0FSR19UWVBFJDEoJ2NodW5rJywgWydzdHJpbmcnLCAnQnVmZmVyJ10sIGNodW5rKTsKCSAgfQoKCSAgaWYgKGVyKSB7CgkgICAgZXJyb3JPckRlc3Ryb3kkMihzdHJlYW0sIGVyKTsKCSAgICBwcm9jZXNzLm5leHRUaWNrKGNiLCBlcik7CgkgICAgcmV0dXJuIGZhbHNlOwoJICB9CgoJICByZXR1cm4gdHJ1ZTsKCX0KCglXcml0YWJsZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewoJICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoJICB2YXIgcmV0ID0gZmFsc2U7CgoJICB2YXIgaXNCdWYgPSAhc3RhdGUub2JqZWN0TW9kZSAmJiBfaXNVaW50OEFycmF5JDEoY2h1bmspOwoKCSAgaWYgKGlzQnVmICYmICFCdWZmZXIkMy5pc0J1ZmZlcihjaHVuaykpIHsKCSAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIkMShjaHVuayk7CgkgIH0KCgkgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHsKCSAgICBjYiA9IGVuY29kaW5nOwoJICAgIGVuY29kaW5nID0gbnVsbDsKCSAgfQoKCSAgaWYgKGlzQnVmKSBlbmNvZGluZyA9ICdidWZmZXInO2Vsc2UgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7CgkgIGlmICh0eXBlb2YgY2IgIT09ICdmdW5jdGlvbicpIGNiID0gbm9wOwoJICBpZiAoc3RhdGUuZW5kaW5nKSB3cml0ZUFmdGVyRW5kKHRoaXMsIGNiKTtlbHNlIGlmIChpc0J1ZiB8fCB2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7CgkgICAgc3RhdGUucGVuZGluZ2NiKys7CgkgICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgaXNCdWYsIGNodW5rLCBlbmNvZGluZywgY2IpOwoJICB9CgkgIHJldHVybiByZXQ7Cgl9OwoKCVdyaXRhYmxlLnByb3RvdHlwZS5jb3JrID0gZnVuY3Rpb24gKCkgewoJICB0aGlzLl93cml0YWJsZVN0YXRlLmNvcmtlZCsrOwoJfTsKCglXcml0YWJsZS5wcm90b3R5cGUudW5jb3JrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoKCSAgaWYgKHN0YXRlLmNvcmtlZCkgewoJICAgIHN0YXRlLmNvcmtlZC0tOwoJICAgIGlmICghc3RhdGUud3JpdGluZyAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkgY2xlYXJCdWZmZXIodGhpcywgc3RhdGUpOwoJICB9Cgl9OwoKCVdyaXRhYmxlLnByb3RvdHlwZS5zZXREZWZhdWx0RW5jb2RpbmcgPSBmdW5jdGlvbiBzZXREZWZhdWx0RW5jb2RpbmcoZW5jb2RpbmcpIHsKCSAgLy8gbm9kZTo6UGFyc2VFbmNvZGluZygpIHJlcXVpcmVzIGxvd2VyIGNhc2UuCgkgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7CgkgIGlmICghKFsnaGV4JywgJ3V0ZjgnLCAndXRmLTgnLCAnYXNjaWknLCAnYmluYXJ5JywgJ2Jhc2U2NCcsICd1Y3MyJywgJ3Vjcy0yJywgJ3V0ZjE2bGUnLCAndXRmLTE2bGUnLCAncmF3J10uaW5kZXhPZigoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKSkgPiAtMSkpIHRocm93IG5ldyBFUlJfVU5LTk9XTl9FTkNPRElORyhlbmNvZGluZyk7CgkgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVmYXVsdEVuY29kaW5nID0gZW5jb2Rpbmc7CgkgIHJldHVybiB0aGlzOwoJfTsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUucHJvdG90eXBlLCAnd3JpdGFibGVCdWZmZXInLCB7CgkgIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlCgkgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgoJICAvLyB1c2VybGFuZCB3aWxsIGZhaWwKCSAgZW51bWVyYWJsZTogZmFsc2UsCgkgIGdldDogZnVuY3Rpb24gZ2V0KCkgewoJICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyKCk7CgkgIH0KCX0pOwoKCWZ1bmN0aW9uIGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpIHsKCSAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmIHN0YXRlLmRlY29kZVN0cmluZ3MgIT09IGZhbHNlICYmIHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHsKCSAgICBjaHVuayA9IEJ1ZmZlciQzLmZyb20oY2h1bmssIGVuY29kaW5nKTsKCSAgfQoKCSAgcmV0dXJuIGNodW5rOwoJfQoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICd3cml0YWJsZUhpZ2hXYXRlck1hcmsnLCB7CgkgIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlCgkgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgoJICAvLyB1c2VybGFuZCB3aWxsIGZhaWwKCSAgZW51bWVyYWJsZTogZmFsc2UsCgkgIGdldDogZnVuY3Rpb24gZ2V0KCkgewoJICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmhpZ2hXYXRlck1hcms7CgkgIH0KCX0pOyAvLyBpZiB3ZSdyZSBhbHJlYWR5IHdyaXRpbmcgc29tZXRoaW5nLCB0aGVuIGp1c3QgcHV0IHRoaXMKCS8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlCgkvLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLgoKCWZ1bmN0aW9uIHdyaXRlT3JCdWZmZXIoc3RyZWFtLCBzdGF0ZSwgaXNCdWYsIGNodW5rLCBlbmNvZGluZywgY2IpIHsKCSAgaWYgKCFpc0J1ZikgewoJICAgIHZhciBuZXdDaHVuayA9IGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpOwoKCSAgICBpZiAoY2h1bmsgIT09IG5ld0NodW5rKSB7CgkgICAgICBpc0J1ZiA9IHRydWU7CgkgICAgICBlbmNvZGluZyA9ICdidWZmZXInOwoJICAgICAgY2h1bmsgPSBuZXdDaHVuazsKCSAgICB9CgkgIH0KCgkgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDsKCSAgc3RhdGUubGVuZ3RoICs9IGxlbjsKCSAgdmFyIHJldCA9IHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcms7IC8vIHdlIG11c3QgZW5zdXJlIHRoYXQgcHJldmlvdXMgbmVlZERyYWluIHdpbGwgbm90IGJlIHJlc2V0IHRvIGZhbHNlLgoKCSAgaWYgKCFyZXQpIHN0YXRlLm5lZWREcmFpbiA9IHRydWU7CgoJICBpZiAoc3RhdGUud3JpdGluZyB8fCBzdGF0ZS5jb3JrZWQpIHsKCSAgICB2YXIgbGFzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CgkgICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IHsKCSAgICAgIGNodW5rOiBjaHVuaywKCSAgICAgIGVuY29kaW5nOiBlbmNvZGluZywKCSAgICAgIGlzQnVmOiBpc0J1ZiwKCSAgICAgIGNhbGxiYWNrOiBjYiwKCSAgICAgIG5leHQ6IG51bGwKCSAgICB9OwoKCSAgICBpZiAobGFzdCkgewoJICAgICAgbGFzdC5uZXh0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKCSAgICB9IGVsc2UgewoJICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKCSAgICB9CgoJICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50ICs9IDE7CgkgIH0gZWxzZSB7CgkgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTsKCSAgfQoKCSAgcmV0dXJuIHJldDsKCX0KCglmdW5jdGlvbiBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHdyaXRldiwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7CgkgIHN0YXRlLndyaXRlbGVuID0gbGVuOwoJICBzdGF0ZS53cml0ZWNiID0gY2I7CgkgIHN0YXRlLndyaXRpbmcgPSB0cnVlOwoJICBzdGF0ZS5zeW5jID0gdHJ1ZTsKCSAgaWYgKHN0YXRlLmRlc3Ryb3llZCkgc3RhdGUub253cml0ZShuZXcgRVJSX1NUUkVBTV9ERVNUUk9ZRUQoJ3dyaXRlJykpO2Vsc2UgaWYgKHdyaXRldikgc3RyZWFtLl93cml0ZXYoY2h1bmssIHN0YXRlLm9ud3JpdGUpO2Vsc2Ugc3RyZWFtLl93cml0ZShjaHVuaywgZW5jb2RpbmcsIHN0YXRlLm9ud3JpdGUpOwoJICBzdGF0ZS5zeW5jID0gZmFsc2U7Cgl9CgoJZnVuY3Rpb24gb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYikgewoJICAtLXN0YXRlLnBlbmRpbmdjYjsKCgkgIGlmIChzeW5jKSB7CgkgICAgLy8gZGVmZXIgdGhlIGNhbGxiYWNrIGlmIHdlIGFyZSBiZWluZyBjYWxsZWQgc3luY2hyb25vdXNseQoJICAgIC8vIHRvIGF2b2lkIHBpbGluZyB1cCB0aGluZ3Mgb24gdGhlIHN0YWNrCgkgICAgcHJvY2Vzcy5uZXh0VGljayhjYiwgZXIpOyAvLyB0aGlzIGNhbiBlbWl0IGZpbmlzaCwgYW5kIGl0IHdpbGwgYWx3YXlzIGhhcHBlbgoJICAgIC8vIGFmdGVyIGVycm9yCgoJICAgIHByb2Nlc3MubmV4dFRpY2soZmluaXNoTWF5YmUsIHN0cmVhbSwgc3RhdGUpOwoJICAgIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlOwoJICAgIGVycm9yT3JEZXN0cm95JDIoc3RyZWFtLCBlcik7CgkgIH0gZWxzZSB7CgkgICAgLy8gdGhlIGNhbGxlciBleHBlY3QgdGhpcyB0byBoYXBwZW4gYmVmb3JlIGlmCgkgICAgLy8gaXQgaXMgYXN5bmMKCSAgICBjYihlcik7CgkgICAgc3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7CgkgICAgZXJyb3JPckRlc3Ryb3kkMihzdHJlYW0sIGVyKTsgLy8gdGhpcyBjYW4gZW1pdCBmaW5pc2gsIGJ1dCBmaW5pc2ggbXVzdAoJICAgIC8vIGFsd2F5cyBmb2xsb3cgZXJyb3IKCgkgICAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7CgkgIH0KCX0KCglmdW5jdGlvbiBvbndyaXRlU3RhdGVVcGRhdGUoc3RhdGUpIHsKCSAgc3RhdGUud3JpdGluZyA9IGZhbHNlOwoJICBzdGF0ZS53cml0ZWNiID0gbnVsbDsKCSAgc3RhdGUubGVuZ3RoIC09IHN0YXRlLndyaXRlbGVuOwoJICBzdGF0ZS53cml0ZWxlbiA9IDA7Cgl9CgoJZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7CgkgIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTsKCSAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jOwoJICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiOwoJICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgRVJSX01VTFRJUExFX0NBTExCQUNLKCk7CgkgIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7CgkgIGlmIChlcikgb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYik7ZWxzZSB7CgkgICAgLy8gQ2hlY2sgaWYgd2UncmUgYWN0dWFsbHkgcmVhZHkgdG8gZmluaXNoLCBidXQgZG9uJ3QgZW1pdCB5ZXQKCSAgICB2YXIgZmluaXNoZWQgPSBuZWVkRmluaXNoKHN0YXRlKSB8fCBzdHJlYW0uZGVzdHJveWVkOwoKCSAgICBpZiAoIWZpbmlzaGVkICYmICFzdGF0ZS5jb3JrZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSB7CgkgICAgICBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKTsKCSAgICB9CgoJICAgIGlmIChzeW5jKSB7CgkgICAgICBwcm9jZXNzLm5leHRUaWNrKGFmdGVyV3JpdGUsIHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7CgkgICAgfSBlbHNlIHsKCSAgICAgIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTsKCSAgICB9CgkgIH0KCX0KCglmdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikgewoJICBpZiAoIWZpbmlzaGVkKSBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7CgkgIHN0YXRlLnBlbmRpbmdjYi0tOwoJICBjYigpOwoJICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKCX0gLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3QKCS8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm4KCS8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuCgoKCWZ1bmN0aW9uIG9ud3JpdGVEcmFpbihzdHJlYW0sIHN0YXRlKSB7CgkgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUubmVlZERyYWluKSB7CgkgICAgc3RhdGUubmVlZERyYWluID0gZmFsc2U7CgkgICAgc3RyZWFtLmVtaXQoJ2RyYWluJyk7CgkgIH0KCX0gLy8gaWYgdGhlcmUncyBzb21ldGhpbmcgaW4gdGhlIGJ1ZmZlciB3YWl0aW5nLCB0aGVuIHByb2Nlc3MgaXQKCgoJZnVuY3Rpb24gY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSkgewoJICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gdHJ1ZTsKCSAgdmFyIGVudHJ5ID0gc3RhdGUuYnVmZmVyZWRSZXF1ZXN0OwoKCSAgaWYgKHN0cmVhbS5fd3JpdGV2ICYmIGVudHJ5ICYmIGVudHJ5Lm5leHQpIHsKCSAgICAvLyBGYXN0IGNhc2UsIHdyaXRlIGV2ZXJ5dGhpbmcgdXNpbmcgX3dyaXRldigpCgkgICAgdmFyIGwgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudDsKCSAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5KGwpOwoJICAgIHZhciBob2xkZXIgPSBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWU7CgkgICAgaG9sZGVyLmVudHJ5ID0gZW50cnk7CgkgICAgdmFyIGNvdW50ID0gMDsKCSAgICB2YXIgYWxsQnVmZmVycyA9IHRydWU7CgoJICAgIHdoaWxlIChlbnRyeSkgewoJICAgICAgYnVmZmVyW2NvdW50XSA9IGVudHJ5OwoJICAgICAgaWYgKCFlbnRyeS5pc0J1ZikgYWxsQnVmZmVycyA9IGZhbHNlOwoJICAgICAgZW50cnkgPSBlbnRyeS5uZXh0OwoJICAgICAgY291bnQgKz0gMTsKCSAgICB9CgoJICAgIGJ1ZmZlci5hbGxCdWZmZXJzID0gYWxsQnVmZmVyczsKCSAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHRydWUsIHN0YXRlLmxlbmd0aCwgYnVmZmVyLCAnJywgaG9sZGVyLmZpbmlzaCk7IC8vIGRvV3JpdGUgaXMgYWxtb3N0IGFsd2F5cyBhc3luYywgZGVmZXIgdGhlc2UgdG8gc2F2ZSBhIGJpdCBvZiB0aW1lCgkgICAgLy8gYXMgdGhlIGhvdCBwYXRoIGVuZHMgd2l0aCBkb1dyaXRlCgoJICAgIHN0YXRlLnBlbmRpbmdjYisrOwoJICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOwoKCSAgICBpZiAoaG9sZGVyLm5leHQpIHsKCSAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSA9IGhvbGRlci5uZXh0OwoJICAgICAgaG9sZGVyLm5leHQgPSBudWxsOwoJICAgIH0gZWxzZSB7CgkgICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdChzdGF0ZSk7CgkgICAgfQoKCSAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7CgkgIH0gZWxzZSB7CgkgICAgLy8gU2xvdyBjYXNlLCB3cml0ZSBjaHVua3Mgb25lLWJ5LW9uZQoJICAgIHdoaWxlIChlbnRyeSkgewoJICAgICAgdmFyIGNodW5rID0gZW50cnkuY2h1bms7CgkgICAgICB2YXIgZW5jb2RpbmcgPSBlbnRyeS5lbmNvZGluZzsKCSAgICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrOwoJICAgICAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwoJICAgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTsKCSAgICAgIGVudHJ5ID0gZW50cnkubmV4dDsKCSAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50LS07IC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuCgkgICAgICAvLyBpdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gd2FpdCB1bnRpbCBpdCBkb2VzLgoJICAgICAgLy8gYWxzbywgdGhhdCBtZWFucyB0aGF0IHRoZSBjaHVuayBhbmQgY2IgYXJlIGN1cnJlbnRseQoJICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uCgoJICAgICAgaWYgKHN0YXRlLndyaXRpbmcpIHsKCSAgICAgICAgYnJlYWs7CgkgICAgICB9CgkgICAgfQoKCSAgICBpZiAoZW50cnkgPT09IG51bGwpIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOwoJICB9CgoJICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPSBlbnRyeTsKCSAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlOwoJfQoKCVdyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewoJICBjYihuZXcgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQkMSgnX3dyaXRlKCknKSk7Cgl9OwoKCVdyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGV2ID0gbnVsbDsKCglXcml0YWJsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHsKCSAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTsKCgkgIGlmICh0eXBlb2YgY2h1bmsgPT09ICdmdW5jdGlvbicpIHsKCSAgICBjYiA9IGNodW5rOwoJICAgIGNodW5rID0gbnVsbDsKCSAgICBlbmNvZGluZyA9IG51bGw7CgkgIH0gZWxzZSBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnZnVuY3Rpb24nKSB7CgkgICAgY2IgPSBlbmNvZGluZzsKCSAgICBlbmNvZGluZyA9IG51bGw7CgkgIH0KCgkgIGlmIChjaHVuayAhPT0gbnVsbCAmJiBjaHVuayAhPT0gdW5kZWZpbmVkKSB0aGlzLndyaXRlKGNodW5rLCBlbmNvZGluZyk7IC8vIC5lbmQoKSBmdWxseSB1bmNvcmtzCgoJICBpZiAoc3RhdGUuY29ya2VkKSB7CgkgICAgc3RhdGUuY29ya2VkID0gMTsKCSAgICB0aGlzLnVuY29yaygpOwoJICB9IC8vIGlnbm9yZSB1bm5lY2Vzc2FyeSBlbmQoKSBjYWxscy4KCgoJICBpZiAoIXN0YXRlLmVuZGluZykgZW5kV3JpdGFibGUodGhpcywgc3RhdGUsIGNiKTsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICd3cml0YWJsZUxlbmd0aCcsIHsKCSAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKCSAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCgkgIC8vIHVzZXJsYW5kIHdpbGwgZmFpbAoJICBlbnVtZXJhYmxlOiBmYWxzZSwKCSAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUubGVuZ3RoOwoJICB9Cgl9KTsKCglmdW5jdGlvbiBuZWVkRmluaXNoKHN0YXRlKSB7CgkgIHJldHVybiBzdGF0ZS5lbmRpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLndyaXRpbmc7Cgl9CgoJZnVuY3Rpb24gY2FsbEZpbmFsKHN0cmVhbSwgc3RhdGUpIHsKCSAgc3RyZWFtLl9maW5hbChmdW5jdGlvbiAoZXJyKSB7CgkgICAgc3RhdGUucGVuZGluZ2NiLS07CgoJICAgIGlmIChlcnIpIHsKCSAgICAgIGVycm9yT3JEZXN0cm95JDIoc3RyZWFtLCBlcnIpOwoJICAgIH0KCgkgICAgc3RhdGUucHJlZmluaXNoZWQgPSB0cnVlOwoJICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTsKCSAgICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKCSAgfSk7Cgl9CgoJZnVuY3Rpb24gcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpIHsKCSAgaWYgKCFzdGF0ZS5wcmVmaW5pc2hlZCAmJiAhc3RhdGUuZmluYWxDYWxsZWQpIHsKCSAgICBpZiAodHlwZW9mIHN0cmVhbS5fZmluYWwgPT09ICdmdW5jdGlvbicgJiYgIXN0YXRlLmRlc3Ryb3llZCkgewoJICAgICAgc3RhdGUucGVuZGluZ2NiKys7CgkgICAgICBzdGF0ZS5maW5hbENhbGxlZCA9IHRydWU7CgkgICAgICBwcm9jZXNzLm5leHRUaWNrKGNhbGxGaW5hbCwgc3RyZWFtLCBzdGF0ZSk7CgkgICAgfSBlbHNlIHsKCSAgICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTsKCSAgICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTsKCSAgICB9CgkgIH0KCX0KCglmdW5jdGlvbiBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKSB7CgkgIHZhciBuZWVkID0gbmVlZEZpbmlzaChzdGF0ZSk7CgoJICBpZiAobmVlZCkgewoJICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTsKCgkgICAgaWYgKHN0YXRlLnBlbmRpbmdjYiA9PT0gMCkgewoJICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlOwoJICAgICAgc3RyZWFtLmVtaXQoJ2ZpbmlzaCcpOwoKCSAgICAgIGlmIChzdGF0ZS5hdXRvRGVzdHJveSkgewoJICAgICAgICAvLyBJbiBjYXNlIG9mIGR1cGxleCBzdHJlYW1zIHdlIG5lZWQgYSB3YXkgdG8gZGV0ZWN0CgkgICAgICAgIC8vIGlmIHRoZSByZWFkYWJsZSBzaWRlIGlzIHJlYWR5IGZvciBhdXRvRGVzdHJveSBhcyB3ZWxsCgkgICAgICAgIHZhciByU3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgoJICAgICAgICBpZiAoIXJTdGF0ZSB8fCByU3RhdGUuYXV0b0Rlc3Ryb3kgJiYgclN0YXRlLmVuZEVtaXR0ZWQpIHsKCSAgICAgICAgICBzdHJlYW0uZGVzdHJveSgpOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfQoJICB9CgoJICByZXR1cm4gbmVlZDsKCX0KCglmdW5jdGlvbiBlbmRXcml0YWJsZShzdHJlYW0sIHN0YXRlLCBjYikgewoJICBzdGF0ZS5lbmRpbmcgPSB0cnVlOwoJICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKCgkgIGlmIChjYikgewoJICAgIGlmIChzdGF0ZS5maW5pc2hlZCkgcHJvY2Vzcy5uZXh0VGljayhjYik7ZWxzZSBzdHJlYW0ub25jZSgnZmluaXNoJywgY2IpOwoJICB9CgoJICBzdGF0ZS5lbmRlZCA9IHRydWU7CgkgIHN0cmVhbS53cml0YWJsZSA9IGZhbHNlOwoJfQoKCWZ1bmN0aW9uIG9uQ29ya2VkRmluaXNoKGNvcmtSZXEsIHN0YXRlLCBlcnIpIHsKCSAgdmFyIGVudHJ5ID0gY29ya1JlcS5lbnRyeTsKCSAgY29ya1JlcS5lbnRyeSA9IG51bGw7CgoJICB3aGlsZSAoZW50cnkpIHsKCSAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjazsKCSAgICBzdGF0ZS5wZW5kaW5nY2ItLTsKCSAgICBjYihlcnIpOwoJICAgIGVudHJ5ID0gZW50cnkubmV4dDsKCSAgfSAvLyByZXVzZSB0aGUgZnJlZSBjb3JrUmVxLgoKCgkgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gY29ya1JlcTsKCX0KCglPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUucHJvdG90eXBlLCAnZGVzdHJveWVkJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICBpZiAodGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7CgkgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfQoKCSAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQ7CgkgIH0sCgkgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CgkgICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtCgkgICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldAoJICAgIGlmICghdGhpcy5fd3JpdGFibGVTdGF0ZSkgewoJICAgICAgcmV0dXJuOwoJICAgIH0gLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseQoJICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZAoKCgkgICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTsKCSAgfQoJfSk7CglXcml0YWJsZS5wcm90b3R5cGUuZGVzdHJveSA9IGRlc3Ryb3lfMS5kZXN0cm95OwoJV3JpdGFibGUucHJvdG90eXBlLl91bmRlc3Ryb3kgPSBkZXN0cm95XzEudW5kZXN0cm95OwoKCVdyaXRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNiKSB7CgkgIGNiKGVycik7Cgl9OwoKCWNvbW1vbmpzUmVnaXN0ZXIoIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9kdXBsZXguanMiLCBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CgkvKjxyZXBsYWNlbWVudD4qLwoKCXZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikgewoJICB2YXIga2V5cyA9IFtdOwoKCSAgZm9yICh2YXIga2V5IGluIG9iaikgewoJICAgIGtleXMucHVzaChrZXkpOwoJICB9CgoJICByZXR1cm4ga2V5czsKCX07CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCgoJbW9kdWxlLmV4cG9ydHMgPSBEdXBsZXg7CgoJdmFyIFJlYWRhYmxlID0gX3N0cmVhbV9yZWFkYWJsZTsKCgl2YXIgV3JpdGFibGUgPSBfc3RyZWFtX3dyaXRhYmxlOwoKCWluaGVyaXRzX2Jyb3dzZXIoRHVwbGV4LCBSZWFkYWJsZSk7CgoJewoJICAvLyBBbGxvdyB0aGUga2V5cyBhcnJheSB0byBiZSBHQydlZC4KCSAgdmFyIGtleXMgPSBvYmplY3RLZXlzKFdyaXRhYmxlLnByb3RvdHlwZSk7CgoJICBmb3IgKHZhciB2ID0gMDsgdiA8IGtleXMubGVuZ3RoOyB2KyspIHsKCSAgICB2YXIgbWV0aG9kID0ga2V5c1t2XTsKCSAgICBpZiAoIUR1cGxleC5wcm90b3R5cGVbbWV0aG9kXSkgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07CgkgIH0KCX0KCglmdW5jdGlvbiBEdXBsZXgob3B0aW9ucykgewoJICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7CgkgIFJlYWRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7CgkgIFdyaXRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7CgkgIHRoaXMuYWxsb3dIYWxmT3BlbiA9IHRydWU7CgoJICBpZiAob3B0aW9ucykgewoJICAgIGlmIChvcHRpb25zLnJlYWRhYmxlID09PSBmYWxzZSkgdGhpcy5yZWFkYWJsZSA9IGZhbHNlOwoJICAgIGlmIChvcHRpb25zLndyaXRhYmxlID09PSBmYWxzZSkgdGhpcy53cml0YWJsZSA9IGZhbHNlOwoKCSAgICBpZiAob3B0aW9ucy5hbGxvd0hhbGZPcGVuID09PSBmYWxzZSkgewoJICAgICAgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7CgkgICAgICB0aGlzLm9uY2UoJ2VuZCcsIG9uZW5kKTsKCSAgICB9CgkgIH0KCX0KCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRHVwbGV4LnByb3RvdHlwZSwgJ3dyaXRhYmxlSGlnaFdhdGVyTWFyaycsIHsKCSAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKCSAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCgkgIC8vIHVzZXJsYW5kIHdpbGwgZmFpbAoJICBlbnVtZXJhYmxlOiBmYWxzZSwKCSAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUuaGlnaFdhdGVyTWFyazsKCSAgfQoJfSk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRHVwbGV4LnByb3RvdHlwZSwgJ3dyaXRhYmxlQnVmZmVyJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZSAmJiB0aGlzLl93cml0YWJsZVN0YXRlLmdldEJ1ZmZlcigpOwoJICB9Cgl9KTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAnd3JpdGFibGVMZW5ndGgnLCB7CgkgIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlCgkgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgoJICAvLyB1c2VybGFuZCB3aWxsIGZhaWwKCSAgZW51bWVyYWJsZTogZmFsc2UsCgkgIGdldDogZnVuY3Rpb24gZ2V0KCkgewoJICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmxlbmd0aDsKCSAgfQoJfSk7IC8vIHRoZSBuby1oYWxmLW9wZW4gZW5mb3JjZXIKCglmdW5jdGlvbiBvbmVuZCgpIHsKCSAgLy8gSWYgdGhlIHdyaXRhYmxlIHNpZGUgZW5kZWQsIHRoZW4gd2UncmUgb2suCgkgIGlmICh0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkKSByZXR1cm47IC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi4KCSAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suCgoJICBwcm9jZXNzLm5leHRUaWNrKG9uRW5kTlQsIHRoaXMpOwoJfQoKCWZ1bmN0aW9uIG9uRW5kTlQoc2VsZikgewoJICBzZWxmLmVuZCgpOwoJfQoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAnZGVzdHJveWVkJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkgewoJICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH0KCgkgICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkOwoJICB9LAoJICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewoJICAgIC8vIHdlIGlnbm9yZSB0aGUgdmFsdWUgaWYgdGhlIHN0cmVhbQoJICAgIC8vIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCB5ZXQKCSAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkgewoJICAgICAgcmV0dXJuOwoJICAgIH0gLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseQoJICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZAoKCgkgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTsKCSAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IHZhbHVlOwoJICB9Cgl9KTsKCX0pOwoKCXZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKCWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKCXZhciBUaW55RW1pdHRlciA9IGZ1bmN0aW9uICgpIHsKCSAgZnVuY3Rpb24gVGlueUVtaXR0ZXIoKSB7CgkgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRpbnlFbWl0dGVyKTsKCgkgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdfX2xpc3RlbmVycycsIHsKCSAgICAgIHZhbHVlOiB7fSwKCSAgICAgIGVudW1lcmFibGU6IGZhbHNlLAoJICAgICAgd3JpdGFibGU6IGZhbHNlCgkgICAgfSk7CgkgIH0KCgkgIF9jcmVhdGVDbGFzcyhUaW55RW1pdHRlciwgW3sKCSAgICBrZXk6ICdlbWl0JywKCSAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdChldmVudE5hbWUpIHsKCSAgICAgIGlmICghdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdKSByZXR1cm4gdGhpczsKCgkgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKCSAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07CgkgICAgICB9CgoJICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwoJICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CgkgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7CgoJICAgICAgdHJ5IHsKCSAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkgewoJICAgICAgICAgIHZhciBoYW5kbGVyID0gX3N0ZXAudmFsdWU7CgoJICAgICAgICAgIGhhbmRsZXIuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTsKCSAgICAgICAgfQoJICAgICAgfSBjYXRjaCAoZXJyKSB7CgkgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKCSAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7CgkgICAgICB9IGZpbmFsbHkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7CgkgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGZpbmFsbHkgewoJICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikgewoJICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnb25jZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UoZXZlbnROYW1lLCBoYW5kbGVyKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIHZhciBvbmNlID0gZnVuY3Rpb24gb25jZSgpIHsKCSAgICAgICAgX3RoaXMub2ZmKGV2ZW50TmFtZSwgb25jZSk7CgkgICAgICAgIGhhbmRsZXIuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpOwoJICAgICAgfTsKCgkgICAgICByZXR1cm4gdGhpcy5vbihldmVudE5hbWUsIG9uY2UpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ29uJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnROYW1lLCBoYW5kbGVyKSB7CgkgICAgICBpZiAoIXRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSkgdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdID0gW107CgoJICAgICAgdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdLnB1c2goaGFuZGxlcik7CgoJICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnb2ZmJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGV2ZW50TmFtZSwgaGFuZGxlcikgewoJICAgICAgaWYgKGhhbmRsZXIpIHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSA9IHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXS5maWx0ZXIoZnVuY3Rpb24gKGgpIHsKCSAgICAgICAgcmV0dXJuIGggIT09IGhhbmRsZXI7CgkgICAgICB9KTtlbHNlIHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdOwoKCSAgICAgIHJldHVybiB0aGlzOwoJICAgIH0KCSAgfV0pOwoKCSAgcmV0dXJuIFRpbnlFbWl0dGVyOwoJfSgpOwoKCXZhciB0aW55RW1pdHRlciA9IFRpbnlFbWl0dGVyOwoKCXZhciBfY3JlYXRlQ2xhc3MkMSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgoJdmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoInZhbHVlIiBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfTsKCgl2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OwoKCWZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfQoKCWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayQxKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgoJZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOyB9CgoJZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0KCglmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkkMihvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgoKCgl2YXIgTUVTU0FHRV9SRVNVTFQgPSAwOwoJdmFyIE1FU1NBR0VfRVZFTlQgPSAxOwoKCXZhciBSRVNVTFRfRVJST1IgPSAwOwoJdmFyIFJFU1VMVF9TVUNDRVNTID0gMTsKCgl2YXIgREVGQVVMVF9IQU5ETEVSID0gJ21haW4nOwoKCXZhciBpc1Byb21pc2UgPSBmdW5jdGlvbiBpc1Byb21pc2UobykgewoJICByZXR1cm4gKHR5cGVvZiBvID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvKSkgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvLnRoZW4gPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG8uY2F0Y2ggPT09ICdmdW5jdGlvbic7Cgl9OwoKCWZ1bmN0aW9uIFJlZ2lzdGVyUHJvbWlzZShmbikgewoJICB2YXIgaGFuZGxlcnMgPSBfZGVmaW5lUHJvcGVydHkkMih7fSwgREVGQVVMVF9IQU5ETEVSLCBmbik7CgkgIHZhciBzZW5kUG9zdE1lc3NhZ2UgPSBzZWxmLnBvc3RNZXNzYWdlLmJpbmQoc2VsZik7CgoJICB2YXIgc2VydmVyID0gbmV3IChmdW5jdGlvbiAoX1RpbnlFbWl0dGVyKSB7CgkgICAgX2luaGVyaXRzKFdvcmtlclJlZ2lzdGVyLCBfVGlueUVtaXR0ZXIpOwoKCSAgICBmdW5jdGlvbiBXb3JrZXJSZWdpc3RlcigpIHsKCSAgICAgIF9jbGFzc0NhbGxDaGVjayQxKHRoaXMsIFdvcmtlclJlZ2lzdGVyKTsKCgkgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFdvcmtlclJlZ2lzdGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoV29ya2VyUmVnaXN0ZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKCSAgICB9CgoJICAgIF9jcmVhdGVDbGFzcyQxKFdvcmtlclJlZ2lzdGVyLCBbewoJICAgICAga2V5OiAnZW1pdCcsCgkgICAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdChldmVudE5hbWUpIHsKCSAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CgkgICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07CgkgICAgICAgIH0KCgkgICAgICAgIHNlbmRQb3N0TWVzc2FnZSh7IGV2ZW50TmFtZTogZXZlbnROYW1lLCBhcmdzOiBhcmdzIH0pOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICAgIH0KCSAgICB9LCB7CgkgICAgICBrZXk6ICdlbWl0TG9jYWxseScsCgkgICAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdExvY2FsbHkoZXZlbnROYW1lKSB7CgkgICAgICAgIHZhciBfZ2V0MjsKCgkgICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHsKCSAgICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdOwoJICAgICAgICB9CgoJICAgICAgICAoX2dldDIgPSBfZ2V0KFdvcmtlclJlZ2lzdGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFdvcmtlclJlZ2lzdGVyLnByb3RvdHlwZSksICdlbWl0JywgdGhpcykpLmNhbGwuYXBwbHkoX2dldDIsIFt0aGlzLCBldmVudE5hbWVdLmNvbmNhdChhcmdzKSk7CgkgICAgICB9CgkgICAgfSwgewoJICAgICAga2V5OiAnb3BlcmF0aW9uJywKCSAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVyYXRpb24obmFtZSwgaGFuZGxlcikgewoJICAgICAgICBoYW5kbGVyc1tuYW1lXSA9IGhhbmRsZXI7CgkgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgfQoJICAgIH1dKTsKCgkgICAgcmV0dXJuIFdvcmtlclJlZ2lzdGVyOwoJICB9KHRpbnlFbWl0dGVyKSkoKTsKCgkgIHZhciBydW4gPSBmdW5jdGlvbiBydW4obWVzc2FnZUlkLCBwYXlsb2FkLCBoYW5kbGVyTmFtZSkgewoKCSAgICB2YXIgb25TdWNjZXNzID0gZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkgewoJICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQgaW5zdGFuY2VvZiBUcmFuc2ZlcmFibGVSZXNwb25zZSkgewoJICAgICAgICBzZW5kUmVzdWx0KG1lc3NhZ2VJZCwgUkVTVUxUX1NVQ0NFU1MsIHJlc3VsdC5wYXlsb2FkLCByZXN1bHQudHJhbnNmZXJhYmxlKTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHNlbmRSZXN1bHQobWVzc2FnZUlkLCBSRVNVTFRfU1VDQ0VTUywgcmVzdWx0KTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICB2YXIgb25FcnJvciA9IGZ1bmN0aW9uIG9uRXJyb3IoZSkgewoJICAgICAgc2VuZFJlc3VsdChtZXNzYWdlSWQsIFJFU1VMVF9FUlJPUiwgewoJICAgICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsCgkgICAgICAgIHN0YWNrOiBlLnN0YWNrCgkgICAgICB9KTsKCSAgICB9OwoKCSAgICB0cnkgewoJICAgICAgdmFyIHJlc3VsdCA9IHJ1bkZuKG1lc3NhZ2VJZCwgcGF5bG9hZCwgaGFuZGxlck5hbWUpOwoJICAgICAgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7CgkgICAgICAgIHJlc3VsdC50aGVuKG9uU3VjY2VzcykuY2F0Y2gob25FcnJvcik7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBvblN1Y2Nlc3MocmVzdWx0KTsKCSAgICAgIH0KCSAgICB9IGNhdGNoIChlKSB7CgkgICAgICBvbkVycm9yKGUpOwoJICAgIH0KCSAgfTsKCgkgIHZhciBydW5GbiA9IGZ1bmN0aW9uIHJ1bkZuKG1lc3NhZ2VJZCwgcGF5bG9hZCwgaGFuZGxlck5hbWUpIHsKCSAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2hhbmRsZXJOYW1lIHx8IERFRkFVTFRfSEFORExFUl07CgkgICAgaWYgKCFoYW5kbGVyKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBmb3VuZCBoYW5kbGVyIGZvciB0aGlzIHJlcXVlc3QnKTsKCgkgICAgcmV0dXJuIGhhbmRsZXIocGF5bG9hZCwgc2VuZEV2ZW50LmJpbmQobnVsbCwgbWVzc2FnZUlkKSk7CgkgIH07CgoJICB2YXIgc2VuZFJlc3VsdCA9IGZ1bmN0aW9uIHNlbmRSZXN1bHQobWVzc2FnZUlkLCBzdWNjZXNzLCBwYXlsb2FkKSB7CgkgICAgdmFyIHRyYW5zZmVyYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogW107CgoJICAgIHNlbmRQb3N0TWVzc2FnZShbTUVTU0FHRV9SRVNVTFQsIG1lc3NhZ2VJZCwgc3VjY2VzcywgcGF5bG9hZF0sIHRyYW5zZmVyYWJsZSk7CgkgIH07CgoJICB2YXIgc2VuZEV2ZW50ID0gZnVuY3Rpb24gc2VuZEV2ZW50KG1lc3NhZ2VJZCwgZXZlbnROYW1lLCBwYXlsb2FkKSB7CgkgICAgaWYgKCFldmVudE5hbWUpIHRocm93IG5ldyBFcnJvcignZXZlbnROYW1lIGlzIHJlcXVpcmVkJyk7CgoJICAgIGlmICh0eXBlb2YgZXZlbnROYW1lICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKCdldmVudE5hbWUgc2hvdWxkIGJlIHN0cmluZycpOwoKCSAgICBzZW5kUG9zdE1lc3NhZ2UoW01FU1NBR0VfRVZFTlQsIG1lc3NhZ2VJZCwgZXZlbnROYW1lLCBwYXlsb2FkXSk7CgkgIH07CgoJICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoX3JlZikgewoJICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwoKCSAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewoJICAgICAgcnVuLmFwcGx5KHVuZGVmaW5lZCwgX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEpKTsKCSAgICB9IGVsc2UgaWYgKGRhdGEgJiYgZGF0YS5ldmVudE5hbWUpIHsKCSAgICAgIHNlcnZlci5lbWl0TG9jYWxseS5hcHBseShzZXJ2ZXIsIFtkYXRhLmV2ZW50TmFtZV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShkYXRhLmFyZ3MpKSk7CgkgICAgfQoJICB9KTsKCgkgIHJldHVybiBzZXJ2ZXI7Cgl9CgoJdmFyIFRyYW5zZmVyYWJsZVJlc3BvbnNlID0gZnVuY3Rpb24gVHJhbnNmZXJhYmxlUmVzcG9uc2UocGF5bG9hZCwgdHJhbnNmZXJhYmxlKSB7CgkgIF9jbGFzc0NhbGxDaGVjayQxKHRoaXMsIFRyYW5zZmVyYWJsZVJlc3BvbnNlKTsKCgkgIHRoaXMucGF5bG9hZCA9IHBheWxvYWQ7CgkgIHRoaXMudHJhbnNmZXJhYmxlID0gdHJhbnNmZXJhYmxlOwoJfTsKCgl2YXIgcmVnaXN0ZXIgPSBSZWdpc3RlclByb21pc2U7Cgl2YXIgVHJhbnNmZXJhYmxlUmVzcG9uc2VfMSA9IFRyYW5zZmVyYWJsZVJlc3BvbnNlOwoJcmVnaXN0ZXIuVHJhbnNmZXJhYmxlUmVzcG9uc2UgPSBUcmFuc2ZlcmFibGVSZXNwb25zZV8xOwoKCS8qIGVzbGludC1kaXNhYmxlICovCgkvLyBwcmV0dGllci1pZ25vcmUKCglyZWdpc3RlcihmdW5jdGlvbiAobWVzc2FnZSwgZW1pdCkgewoJICB2YXIgYXJyYXkgPSBtZXNzYWdlLmFycmF5OwoJICB2YXIgbWluID0gbWVzc2FnZS5taW47CgkgIHZhciBtYXggPSBtZXNzYWdlLm1heDsKCSAgdmFyIG9mZnNldCA9IG1lc3NhZ2UuY29tcG9uZW50IHx8IDA7CgkgIHZhciBzdGVwID0gbWVzc2FnZS5udW1iZXJPZkNvbXBvbmVudHMgfHwgMTsKCSAgdmFyIG51bWJlck9mQmlucyA9IG1lc3NhZ2UubnVtYmVyT2ZCaW5zOwoJICB2YXIgZGVsdGEgPSBtYXggLSBtaW47CgkgIHZhciBoaXN0b2dyYW0gPSBuZXcgRmxvYXQzMkFycmF5KG51bWJlck9mQmlucyk7CgkgIGhpc3RvZ3JhbS5maWxsKDApOwoJICB2YXIgbGVuID0gYXJyYXkubGVuZ3RoOwoKCSAgZm9yICh2YXIgaSA9IG9mZnNldDsgaSA8IGxlbjsgaSArPSBzdGVwKSB7CgkgICAgdmFyIGlkeCA9IE1hdGguZmxvb3IoKG51bWJlck9mQmlucyAtIDEpICogKE51bWJlcihhcnJheVtpXSkgLSBtaW4pIC8gZGVsdGEpOwoJICAgIGhpc3RvZ3JhbVtpZHhdICs9IDE7CgkgIH0KCgkgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IHJlZ2lzdGVyLlRyYW5zZmVyYWJsZVJlc3BvbnNlKGhpc3RvZ3JhbSwgW2hpc3RvZ3JhbS5idWZmZXJdKSk7Cgl9KTsKCn0oKSk7Cgo=",qI="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tcHV0ZUhpc3RvZ3JhbS53b3JrZXIuanMiLCJzb3VyY2VzIjpbIndvcmtlcjovL3dlYi13b3JrZXIvbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL2ludGVybmFsL3N0cmVhbXMvc3RyZWFtLWJyb3dzZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9iYXNlNjQtanMvaW5kZXguanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL2J1ZmZlcl9saXN0LmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3kuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vZXJyb3JzLWJyb3dzZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL2ludGVybmFsL3N0cmVhbXMvc3RhdGUuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvc2FmZS1idWZmZXIvaW5kZXguanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9zdHJpbmdfZGVjb2Rlci9saWIvc3RyaW5nX2RlY29kZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL2ludGVybmFsL3N0cmVhbXMvZW5kLW9mLXN0cmVhbS5qcyIsIndvcmtlcjovL3dlYi13b3JrZXIvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvaW50ZXJuYWwvc3RyZWFtcy9hc3luY19pdGVyYXRvci5qcyIsIndvcmtlcjovL3dlYi13b3JrZXIvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvaW50ZXJuYWwvc3RyZWFtcy9mcm9tLWJyb3dzZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcmVhZGFibGUuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy91dGlsLWRlcHJlY2F0ZS9icm93c2VyLmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX2R1cGxleC5qcyIsIndvcmtlcjovL3dlYi13b3JrZXIvbm9kZV9tb2R1bGVzL3dlYndvcmtlci1wcm9taXNlL2xpYi90aW55LWVtaXR0ZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy93ZWJ3b3JrZXItcHJvbWlzZS9saWIvcmVnaXN0ZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL1NvdXJjZXMvSW50ZXJhY3Rpb24vV2lkZ2V0cy9QaWVjZXdpc2VHYXVzc2lhbldpZGdldC9Db21wdXRlSGlzdG9ncmFtLndvcmtlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsXG52YXIgUmVmbGVjdEFwcGx5ID0gUiAmJiB0eXBlb2YgUi5hcHBseSA9PT0gJ2Z1bmN0aW9uJ1xuICA/IFIuYXBwbHlcbiAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykge1xuICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcbiAgfVxuXG52YXIgUmVmbGVjdE93bktleXNcbmlmIChSICYmIHR5cGVvZiBSLm93bktleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXNcbn0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpXG4gICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7XG4gIH07XG59IGVsc2Uge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbn1cblxudmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRFbWl0dGVyLmluaXQuY2FsbCh0aGlzKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xubW9kdWxlLmV4cG9ydHMub25jZSA9IG9uY2U7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG5mdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgfHwgYXJnIDwgMCB8fCBOdW1iZXJJc05hTihhcmcpKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpO1xuICAgIH1cbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICB9XG59KTtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICBpZiAodGhpcy5fZXZlbnRzID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHtcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59O1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPCAwIHx8IE51bWJlcklzTmFOKG4pKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7XG4gIH1cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBfZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcbiAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgdmFyIGVyO1xuICAgIGlmIChhcmdzLmxlbmd0aCA+IDApXG4gICAgICBlciA9IGFyZ3NbMF07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIC8vIE5vdGU6IFRoZSBjb21tZW50cyBvbiB0aGUgYHRocm93YCBsaW5lcyBhcmUgaW50ZW50aW9uYWwsIHRoZXkgc2hvd1xuICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi5cbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH1cbiAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIGVycm9yLicgKyAoZXIgPyAnICgnICsgZXIubWVzc2FnZSArICcpJyA6ICcnKSk7XG4gICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gIH1cblxuICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTtcblxuICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gICAgaWYgKGV2ZW50cy5uZXdMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID1cbiAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7XG4gICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBtID0gX2dldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAvLyBObyBlcnJvciBjb2RlIGZvciB0aGlzIHNpbmNlIGl0IGlzIGEgV2FybmluZ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgU3RyaW5nKHR5cGUpICsgJyBsaXN0ZW5lcnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdCcpO1xuICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICB3LnR5cGUgPSB0eXBlO1xuICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG5cbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpO1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzdGF0ZSA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHVuZGVmaW5lZCwgdGFyZ2V0OiB0YXJnZXQsIHR5cGU6IHR5cGUsIGxpc3RlbmVyOiBsaXN0ZW5lciB9O1xuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHN0YXRlLndyYXBGbiA9IHdyYXBwZWQ7XG4gIHJldHVybiB3cmFwcGVkO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbi8vIEVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZiBhbmQgb25seSBpZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGxpc3QsIGV2ZW50cywgcG9zaXRpb24sIGksIG9yaWdpbmFsTGlzdGVuZXI7XG5cbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGxpc3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdO1xuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzLCBldmVudHMsIGk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gW107XG5cbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG4gIGlmIChldmxpc3RlbmVyID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIHVud3JhcCA/XG4gICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdO1xufTtcblxuZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHtcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKVxuICAgIGxpc3RbaW5kZXhdID0gbGlzdFtpbmRleCArIDFdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBvbmNlKGVtaXR0ZXIsIG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmdW5jdGlvbiBldmVudExpc3RlbmVyKCkge1xuICAgICAgaWYgKGVycm9yTGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgIH07XG4gICAgdmFyIGVycm9yTGlzdGVuZXI7XG5cbiAgICAvLyBBZGRpbmcgYW4gZXJyb3IgbGlzdGVuZXIgaXMgbm90IG9wdGlvbmFsIGJlY2F1c2VcbiAgICAvLyBpZiBhbiBlcnJvciBpcyB0aHJvd24gb24gYW4gZXZlbnQgZW1pdHRlciB3ZSBjYW5ub3RcbiAgICAvLyBndWFyYW50ZWUgdGhhdCB0aGUgYWN0dWFsIGV2ZW50IHdlIGFyZSB3YWl0aW5nIHdpbGxcbiAgICAvLyBiZSBmaXJlZC4gVGhlIHJlc3VsdCBjb3VsZCBiZSBhIHNpbGVudCB3YXkgdG8gY3JlYXRlXG4gICAgLy8gbWVtb3J5IG9yIGZpbGUgZGVzY3JpcHRvciBsZWFrcywgd2hpY2ggaXMgc29tZXRoaW5nXG4gICAgLy8gd2Ugc2hvdWxkIGF2b2lkLlxuICAgIGlmIChuYW1lICE9PSAnZXJyb3InKSB7XG4gICAgICBlcnJvckxpc3RlbmVyID0gZnVuY3Rpb24gZXJyb3JMaXN0ZW5lcihlcnIpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCBldmVudExpc3RlbmVyKTtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9O1xuXG4gICAgICBlbWl0dGVyLm9uY2UoJ2Vycm9yJywgZXJyb3JMaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgZW1pdHRlci5vbmNlKG5hbWUsIGV2ZW50TGlzdGVuZXIpO1xuICB9KTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xuIiwiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxuLy8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLlxuLy8gU2VlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQjVVJMX2FwcGxpY2F0aW9uc1xucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gZ2V0TGVucyAoYjY0KSB7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIFRyaW0gb2ZmIGV4dHJhIGJ5dGVzIGFmdGVyIHBsYWNlaG9sZGVyIGJ5dGVzIGFyZSBmb3VuZFxuICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9iZWF0Z2FtbWl0L2Jhc2U2NC1qcy9pc3N1ZXMvNDJcbiAgdmFyIHZhbGlkTGVuID0gYjY0LmluZGV4T2YoJz0nKVxuICBpZiAodmFsaWRMZW4gPT09IC0xKSB2YWxpZExlbiA9IGxlblxuXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSB2YWxpZExlbiA9PT0gbGVuXG4gICAgPyAwXG4gICAgOiA0IC0gKHZhbGlkTGVuICUgNClcblxuICByZXR1cm4gW3ZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW5dXG59XG5cbi8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpXG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIF9ieXRlTGVuZ3RoIChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHtcbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KVxuICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdXG5cbiAgdmFyIGFyciA9IG5ldyBBcnIoX2J5dGVMZW5ndGgoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSlcblxuICB2YXIgY3VyQnl0ZSA9IDBcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIHZhciBsZW4gPSBwbGFjZUhvbGRlcnNMZW4gPiAwXG4gICAgPyB2YWxpZExlbiAtIDRcbiAgICA6IHZhbGlkTGVuXG5cbiAgdmFyIGlcbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8XG4gICAgICByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXVxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiAxNikgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMikge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNClcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDEpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCA0KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMilcbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG4gIHJldHVybiBsb29rdXBbbnVtID4+IDE4ICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gPj4gMTIgJiAweDNGXSArXG4gICAgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gJiAweDNGXVxufVxuXG5mdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHRtcFxuICB2YXIgb3V0cHV0ID0gW11cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcbiAgICB0bXAgPVxuICAgICAgKCh1aW50OFtpXSA8PCAxNikgJiAweEZGMDAwMCkgK1xuICAgICAgKCh1aW50OFtpICsgMV0gPDwgOCkgJiAweEZGMDApICtcbiAgICAgICh1aW50OFtpICsgMl0gJiAweEZGKVxuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKVxuICB9XG4gIHJldHVybiBvdXRwdXQuam9pbignJylcbn1cblxuZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSAodWludDgpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG4gIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuICB2YXIgcGFydHMgPSBbXVxuICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblxuICAvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG4gIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcbiAgICBwYXJ0cy5wdXNoKGVuY29kZUNodW5rKFxuICAgICAgdWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKVxuICAgICkpXG4gIH1cblxuICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG4gIGlmIChleHRyYUJ5dGVzID09PSAxKSB7XG4gICAgdG1wID0gdWludDhbbGVuIC0gMV1cbiAgICBwYXJ0cy5wdXNoKFxuICAgICAgbG9va3VwW3RtcCA+PiAyXSArXG4gICAgICBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M0ZdICtcbiAgICAgICc9PSdcbiAgICApXG4gIH0gZWxzZSBpZiAoZXh0cmFCeXRlcyA9PT0gMikge1xuICAgIHRtcCA9ICh1aW50OFtsZW4gLSAyXSA8PCA4KSArIHVpbnQ4W2xlbiAtIDFdXG4gICAgcGFydHMucHVzaChcbiAgICAgIGxvb2t1cFt0bXAgPj4gMTBdICtcbiAgICAgIGxvb2t1cFsodG1wID4+IDQpICYgMHgzRl0gK1xuICAgICAgbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXSArXG4gICAgICAnPSdcbiAgICApXG4gIH1cblxuICByZXR1cm4gcGFydHMuam9pbignJylcbn1cbiIsIi8qISBpZWVlNzU0LiBCU0QtMy1DbGF1c2UgTGljZW5zZS4gRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnL29wZW5zb3VyY2U+ICovXG5leHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbVxuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IChlICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IChtICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIGlmIChlID09PSAwKSB7XG4gICAgZSA9IDEgLSBlQmlhc1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSlcbiAgfSBlbHNlIHtcbiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG4gICAgZSA9IGUgLSBlQmlhc1xuICB9XG4gIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG59XG5cbmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG0sIGNcbiAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKCh2YWx1ZSAqIGMpIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG4iLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cbid1c2Ugc3RyaWN0J1xuXG5jb25zdCBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxuY29uc3QgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxuY29uc3QgY3VzdG9tSW5zcGVjdFN5bWJvbCA9XG4gICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2xbJ2ZvciddID09PSAnZnVuY3Rpb24nKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGRvdC1ub3RhdGlvblxuICAgID8gU3ltYm9sWydmb3InXSgnbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGRvdC1ub3RhdGlvblxuICAgIDogbnVsbFxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5cbmNvbnN0IEtfTUFYX0xFTkdUSCA9IDB4N2ZmZmZmZmZcbmV4cG9ydHMua01heExlbmd0aCA9IEtfTUFYX0xFTkdUSFxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBQcmludCB3YXJuaW5nIGFuZCByZWNvbW1lbmQgdXNpbmcgYGJ1ZmZlcmAgdjQueCB3aGljaCBoYXMgYW4gT2JqZWN0XG4gKiAgICAgICAgICAgICAgIGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBXZSByZXBvcnQgdGhhdCB0aGUgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBpZiB0aGUgYXJlIG5vdCBzdWJjbGFzc2FibGVcbiAqIHVzaW5nIF9fcHJvdG9fXy4gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWBcbiAqIChTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOCkuIElFIDEwIGxhY2tzIHN1cHBvcnRcbiAqIGZvciBfX3Byb3RvX18gYW5kIGhhcyBhIGJ1Z2d5IHR5cGVkIGFycmF5IGltcGxlbWVudGF0aW9uLlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICBjb25zb2xlLmVycm9yKFxuICAgICdUaGlzIGJyb3dzZXIgbGFja3MgdHlwZWQgYXJyYXkgKFVpbnQ4QXJyYXkpIHN1cHBvcnQgd2hpY2ggaXMgcmVxdWlyZWQgYnkgJyArXG4gICAgJ2BidWZmZXJgIHY1LnguIFVzZSBgYnVmZmVyYCB2NC54IGlmIHlvdSByZXF1aXJlIG9sZCBicm93c2VyIHN1cHBvcnQuJ1xuICApXG59XG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgLy8gQ2FuIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkP1xuICB0cnkge1xuICAgIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgY29uc3QgcHJvdG8gPSB7IGZvbzogZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfSB9XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHByb3RvLCBVaW50OEFycmF5LnByb3RvdHlwZSlcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoYXJyLCBwcm90bylcbiAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MlxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlci5wcm90b3R5cGUsICdwYXJlbnQnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKHRoaXMpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyXG4gIH1cbn0pXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIucHJvdG90eXBlLCAnb2Zmc2V0Jywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0aGlzKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmJ5dGVPZmZzZXRcbiAgfVxufSlcblxuZnVuY3Rpb24gY3JlYXRlQnVmZmVyIChsZW5ndGgpIHtcbiAgaWYgKGxlbmd0aCA+IEtfTUFYX0xFTkdUSCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgXCInICsgbGVuZ3RoICsgJ1wiIGlzIGludmFsaWQgZm9yIG9wdGlvbiBcInNpemVcIicpXG4gIH1cbiAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2VcbiAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKVxuICBPYmplY3Quc2V0UHJvdG90eXBlT2YoYnVmLCBCdWZmZXIucHJvdG90eXBlKVxuICByZXR1cm4gYnVmXG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cblxuZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICAvLyBDb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ1RoZSBcInN0cmluZ1wiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBzdHJpbmcuIFJlY2VpdmVkIHR5cGUgbnVtYmVyJ1xuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gYWxsb2NVbnNhZmUoYXJnKVxuICB9XG4gIHJldHVybiBmcm9tKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxuZnVuY3Rpb24gZnJvbSAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0KVxuICB9XG5cbiAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZnJvbUFycmF5Vmlldyh2YWx1ZSlcbiAgfVxuXG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICdUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCAnICtcbiAgICAgICdvciBBcnJheS1saWtlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSAnICsgKHR5cGVvZiB2YWx1ZSlcbiAgICApXG4gIH1cblxuICBpZiAoaXNJbnN0YW5jZSh2YWx1ZSwgQXJyYXlCdWZmZXIpIHx8XG4gICAgICAodmFsdWUgJiYgaXNJbnN0YW5jZSh2YWx1ZS5idWZmZXIsIEFycmF5QnVmZmVyKSkpIHtcbiAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAodHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgKGlzSW5zdGFuY2UodmFsdWUsIFNoYXJlZEFycmF5QnVmZmVyKSB8fFxuICAgICAgKHZhbHVlICYmIGlzSW5zdGFuY2UodmFsdWUuYnVmZmVyLCBTaGFyZWRBcnJheUJ1ZmZlcikpKSkge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICdUaGUgXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlIG51bWJlcidcbiAgICApXG4gIH1cblxuICBjb25zdCB2YWx1ZU9mID0gdmFsdWUudmFsdWVPZiAmJiB2YWx1ZS52YWx1ZU9mKClcbiAgaWYgKHZhbHVlT2YgIT0gbnVsbCAmJiB2YWx1ZU9mICE9PSB2YWx1ZSkge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbSh2YWx1ZU9mLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBjb25zdCBiID0gZnJvbU9iamVjdCh2YWx1ZSlcbiAgaWYgKGIpIHJldHVybiBiXG5cbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1ByaW1pdGl2ZSAhPSBudWxsICYmXG4gICAgICB0eXBlb2YgdmFsdWVbU3ltYm9sLnRvUHJpbWl0aXZlXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbSh2YWx1ZVtTeW1ib2wudG9QcmltaXRpdmVdKCdzdHJpbmcnKSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAnVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgJyArXG4gICAgJ29yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlICcgKyAodHlwZW9mIHZhbHVlKVxuICApXG59XG5cbi8qKlxuICogRnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG8gQnVmZmVyKGFyZywgZW5jb2RpbmcpIGJ1dCB0aHJvd3MgYSBUeXBlRXJyb3JcbiAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLlxuICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKVxuICogQnVmZmVyLmZyb20oYXJyYXkpXG4gKiBCdWZmZXIuZnJvbShidWZmZXIpXG4gKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSlcbiAqKi9cbkJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGZyb20odmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuLy8gTm90ZTogQ2hhbmdlIHByb3RvdHlwZSAqYWZ0ZXIqIEJ1ZmZlci5mcm9tIGlzIGRlZmluZWQgdG8gd29ya2Fyb3VuZCBDaHJvbWUgYnVnOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC8xNDhcbk9iamVjdC5zZXRQcm90b3R5cGVPZihCdWZmZXIucHJvdG90eXBlLCBVaW50OEFycmF5LnByb3RvdHlwZSlcbk9iamVjdC5zZXRQcm90b3R5cGVPZihCdWZmZXIsIFVpbnQ4QXJyYXkpXG5cbmZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBudW1iZXInKVxuICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBcIicgKyBzaXplICsgJ1wiIGlzIGludmFsaWQgZm9yIG9wdGlvbiBcInNpemVcIicpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgaWYgKHNpemUgPD0gMCkge1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSlcbiAgfVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG4gICAgLy8gYmUgaW50ZXJwcmV0ZWQgYXMgYSBzdGFydCBvZmZzZXQuXG4gICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZydcbiAgICAgID8gY3JlYXRlQnVmZmVyKHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG4gICAgICA6IGNyZWF0ZUJ1ZmZlcihzaXplKS5maWxsKGZpbGwpXG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplKVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSlcbiAqKi9cbkJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICByZXR1cm4gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpXG59XG5cbmZ1bmN0aW9uIGFsbG9jVW5zYWZlIChzaXplKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMClcbn1cblxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShzaXplKVxufVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShzaXplKVxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgfVxuXG4gIGNvbnN0IGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG4gIGxldCBidWYgPSBjcmVhdGVCdWZmZXIobGVuZ3RoKVxuXG4gIGNvbnN0IGFjdHVhbCA9IGJ1Zi53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgYnVmID0gYnVmLnNsaWNlKDAsIGFjdHVhbClcbiAgfVxuXG4gIHJldHVybiBidWZcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAoYXJyYXkpIHtcbiAgY29uc3QgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIGNvbnN0IGJ1ZiA9IGNyZWF0ZUJ1ZmZlcihsZW5ndGgpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICBidWZbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiBidWZcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5VmlldyAoYXJyYXlWaWV3KSB7XG4gIGlmIChpc0luc3RhbmNlKGFycmF5VmlldywgVWludDhBcnJheSkpIHtcbiAgICBjb25zdCBjb3B5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlWaWV3KVxuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIoY29weS5idWZmZXIsIGNvcHkuYnl0ZU9mZnNldCwgY29weS5ieXRlTGVuZ3RoKVxuICB9XG4gIHJldHVybiBmcm9tQXJyYXlMaWtlKGFycmF5Vmlldylcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyIChhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcIm9mZnNldFwiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wibGVuZ3RoXCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGxldCBidWZcbiAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5KVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpXG4gIH0gZWxzZSB7XG4gICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlXG4gIE9iamVjdC5zZXRQcm90b3R5cGVPZihidWYsIEJ1ZmZlci5wcm90b3R5cGUpXG5cbiAgcmV0dXJuIGJ1ZlxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0IChvYmopIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmopKSB7XG4gICAgY29uc3QgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcbiAgICBjb25zdCBidWYgPSBjcmVhdGVCdWZmZXIobGVuKVxuXG4gICAgaWYgKGJ1Zi5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBidWZcbiAgICB9XG5cbiAgICBvYmouY29weShidWYsIDAsIDAsIGxlbilcbiAgICByZXR1cm4gYnVmXG4gIH1cblxuICBpZiAob2JqLmxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBudW1iZXJJc05hTihvYmoubGVuZ3RoKSkge1xuICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcigwKVxuICAgIH1cbiAgICByZXR1cm4gZnJvbUFycmF5TGlrZShvYmopXG4gIH1cblxuICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIEFycmF5LmlzQXJyYXkob2JqLmRhdGEpKSB7XG4gICAgcmV0dXJuIGZyb21BcnJheUxpa2Uob2JqLmRhdGEpXG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XG4gIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IEtfTUFYX0xFTkdUSGAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcbiAgaWYgKGxlbmd0aCA+PSBLX01BWF9MRU5HVEgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsgS19NQVhfTEVOR1RILnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuICB9XG4gIHJldHVybiBsZW5ndGggfCAwXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIgKGxlbmd0aCkge1xuICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXFcbiAgICBsZW5ndGggPSAwXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKVxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuICByZXR1cm4gYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyID09PSB0cnVlICYmXG4gICAgYiAhPT0gQnVmZmVyLnByb3RvdHlwZSAvLyBzbyBCdWZmZXIuaXNCdWZmZXIoQnVmZmVyLnByb3RvdHlwZSkgd2lsbCBiZSBmYWxzZVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcbiAgaWYgKGlzSW5zdGFuY2UoYSwgVWludDhBcnJheSkpIGEgPSBCdWZmZXIuZnJvbShhLCBhLm9mZnNldCwgYS5ieXRlTGVuZ3RoKVxuICBpZiAoaXNJbnN0YW5jZShiLCBVaW50OEFycmF5KSkgYiA9IEJ1ZmZlci5mcm9tKGIsIGIub2Zmc2V0LCBiLmJ5dGVMZW5ndGgpXG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgJ1RoZSBcImJ1ZjFcIiwgXCJidWYyXCIgYXJndW1lbnRzIG11c3QgYmUgb25lIG9mIHR5cGUgQnVmZmVyIG9yIFVpbnQ4QXJyYXknXG4gICAgKVxuICB9XG5cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cbiAgbGV0IHggPSBhLmxlbmd0aFxuICBsZXQgeSA9IGIubGVuZ3RoXG5cbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgeCA9IGFbaV1cbiAgICAgIHkgPSBiW2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuQnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgY2FzZSAndXRmOCc6XG4gICAgY2FzZSAndXRmLTgnOlxuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdsYXRpbjEnOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1Y3MtMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShsaXN0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gIH1cblxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApXG4gIH1cblxuICBsZXQgaVxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpXG4gIGxldCBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgbGV0IGJ1ZiA9IGxpc3RbaV1cbiAgICBpZiAoaXNJbnN0YW5jZShidWYsIFVpbnQ4QXJyYXkpKSB7XG4gICAgICBpZiAocG9zICsgYnVmLmxlbmd0aCA+IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgYnVmID0gQnVmZmVyLmZyb20oYnVmKVxuICAgICAgICBidWYuY29weShidWZmZXIsIHBvcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKFxuICAgICAgICAgIGJ1ZmZlcixcbiAgICAgICAgICBidWYsXG4gICAgICAgICAgcG9zXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpXG4gICAgfVxuICAgIHBvcyArPSBidWYubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZmZlclxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkge1xuICAgIHJldHVybiBzdHJpbmcubGVuZ3RoXG4gIH1cbiAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IGlzSW5zdGFuY2Uoc3RyaW5nLCBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgJ1RoZSBcInN0cmluZ1wiIGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIG9yIEFycmF5QnVmZmVyLiAnICtcbiAgICAgICdSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2Ygc3RyaW5nXG4gICAgKVxuICB9XG5cbiAgY29uc3QgbGVuID0gc3RyaW5nLmxlbmd0aFxuICBjb25zdCBtdXN0TWF0Y2ggPSAoYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdID09PSB0cnVlKVxuICBpZiAoIW11c3RNYXRjaCAmJiBsZW4gPT09IDApIHJldHVybiAwXG5cbiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uXG4gIGxldCBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxlblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDJcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBsZW4gPj4+IDFcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHtcbiAgICAgICAgICByZXR1cm4gbXVzdE1hdGNoID8gLTEgOiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuICAgICAgICB9XG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5CdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuICBsZXQgbG93ZXJlZENhc2UgPSBmYWxzZVxuXG4gIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgXCJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyXCIgc2luY2UgaXQncyBhIHJlYWQtb25seVxuICAvLyBwcm9wZXJ0eSBvZiBhIHR5cGVkIGFycmF5LlxuXG4gIC8vIFRoaXMgYmVoYXZlcyBuZWl0aGVyIGxpa2UgU3RyaW5nIG5vciBVaW50OEFycmF5IGluIHRoYXQgd2Ugc2V0IHN0YXJ0L2VuZFxuICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuXG4gIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sXG4gIC8vIFNlY3Rpb24gMTMuMy4zLjcgUnVudGltZSBTZW1hbnRpY3M6IEtleWVkQmluZGluZ0luaXRpYWxpemF0aW9uLlxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICAvLyBSZXR1cm4gZWFybHkgaWYgc3RhcnQgPiB0aGlzLmxlbmd0aC4gRG9uZSBoZXJlIHRvIHByZXZlbnQgcG90ZW50aWFsIHVpbnQzMlxuICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LlxuICBpZiAoc3RhcnQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChlbmQgPD0gMCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLy8gRm9yY2UgY29lcmNpb24gdG8gdWludDMyLiBUaGlzIHdpbGwgYWxzbyBjb2VyY2UgZmFsc2V5L05hTiB2YWx1ZXMgdG8gMC5cbiAgZW5kID4+Pj0gMFxuICBzdGFydCA+Pj49IDBcblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuLy8gVGhpcyBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIChhbmQgdGhlIGBpcy1idWZmZXJgIG5wbSBwYWNrYWdlKVxuLy8gdG8gZGV0ZWN0IGEgQnVmZmVyIGluc3RhbmNlLiBJdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgYGluc3RhbmNlb2YgQnVmZmVyYFxuLy8gcmVsaWFibHkgaW4gYSBicm93c2VyaWZ5IGNvbnRleHQgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBtdWx0aXBsZSBkaWZmZXJlbnRcbi8vIGNvcGllcyBvZiB0aGUgJ2J1ZmZlcicgcGFja2FnZSBpbiB1c2UuIFRoaXMgbWV0aG9kIHdvcmtzIGV2ZW4gZm9yIEJ1ZmZlclxuLy8gaW5zdGFuY2VzIHRoYXQgd2VyZSBjcmVhdGVkIGZyb20gYW5vdGhlciBjb3B5IG9mIHRoZSBgYnVmZmVyYCBwYWNrYWdlLlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9pc3N1ZXMvMTU0XG5CdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWVcblxuZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkge1xuICBjb25zdCBpID0gYltuXVxuICBiW25dID0gYlttXVxuICBiW21dID0gaVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIGNvbnN0IGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSAyICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzJylcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMSlcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XG4gIGNvbnN0IGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA0ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJylcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMilcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXA2NCA9IGZ1bmN0aW9uIHN3YXA2NCAoKSB7XG4gIGNvbnN0IGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgNylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcbiAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICBjb25zdCBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0xvY2FsZVN0cmluZyA9IEJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmdcblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICBsZXQgc3RyID0gJydcbiAgY29uc3QgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLnJlcGxhY2UoLyguezJ9KS9nLCAnJDEgJykudHJpbSgpXG4gIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cbmlmIChjdXN0b21JbnNwZWN0U3ltYm9sKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGVbY3VzdG9tSW5zcGVjdFN5bWJvbF0gPSBCdWZmZXIucHJvdG90eXBlLmluc3BlY3Rcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHtcbiAgaWYgKGlzSW5zdGFuY2UodGFyZ2V0LCBVaW50OEFycmF5KSkge1xuICAgIHRhcmdldCA9IEJ1ZmZlci5mcm9tKHRhcmdldCwgdGFyZ2V0Lm9mZnNldCwgdGFyZ2V0LmJ5dGVMZW5ndGgpXG4gIH1cbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAnVGhlIFwidGFyZ2V0XCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheS4gJyArXG4gICAgICAnUmVjZWl2ZWQgdHlwZSAnICsgKHR5cGVvZiB0YXJnZXQpXG4gICAgKVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNTdGFydCA9IDBcbiAgfVxuICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoc3RhcnQgPCAwIHx8IGVuZCA+IHRhcmdldC5sZW5ndGggfHwgdGhpc1N0YXJ0IDwgMCB8fCB0aGlzRW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuICAgIHJldHVybiAtMVxuICB9XG4gIGlmIChzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgc3RhcnQgPj4+PSAwXG4gIGVuZCA+Pj49IDBcbiAgdGhpc1N0YXJ0ID4+Pj0gMFxuICB0aGlzRW5kID4+Pj0gMFxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cbiAgbGV0IHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0XG4gIGxldCB5ID0gZW5kIC0gc3RhcnRcbiAgY29uc3QgbGVuID0gTWF0aC5taW4oeCwgeSlcblxuICBjb25zdCB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKVxuICBjb25zdCB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkge1xuICAgICAgeCA9IHRoaXNDb3B5W2ldXG4gICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbi8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCxcbi8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuXG4vL1xuLy8gQXJndW1lbnRzOlxuLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2hcbi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG4vLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzJcbi8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nXG4vLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaFxuICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXRcbiAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldFxuICAgIGJ5dGVPZmZzZXQgPSAwXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcbiAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkge1xuICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuICB9XG4gIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldCAvLyBDb2VyY2UgdG8gTnVtYmVyLlxuICBpZiAobnVtYmVySXNOYU4oYnl0ZU9mZnNldCkpIHtcbiAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCBcImZvb1wiLCBldGMsIHNlYXJjaCB3aG9sZSBidWZmZXJcbiAgICBieXRlT2Zmc2V0ID0gZGlyID8gMCA6IChidWZmZXIubGVuZ3RoIC0gMSlcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0XG4gIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBpZiAoZGlyKSByZXR1cm4gLTFcbiAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMVxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XG4gICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDBcbiAgICBlbHNlIHJldHVybiAtMVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIHZhbFxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuICB9XG5cbiAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2ZcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgLy8gU3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlsc1xuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDB4RkYgLy8gU2VhcmNoIGZvciBhIGJ5dGUgdmFsdWUgWzAtMjU1XVxuICAgIGlmICh0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKGRpcikge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbdmFsXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgbGV0IGluZGV4U2l6ZSA9IDFcbiAgbGV0IGFyckxlbmd0aCA9IGFyci5sZW5ndGhcbiAgbGV0IHZhbExlbmd0aCA9IHZhbC5sZW5ndGhcblxuICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHxcbiAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgICAgfVxuICAgICAgaW5kZXhTaXplID0gMlxuICAgICAgYXJyTGVuZ3RoIC89IDJcbiAgICAgIHZhbExlbmd0aCAvPSAyXG4gICAgICBieXRlT2Zmc2V0IC89IDJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcbiAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG4gICAgICByZXR1cm4gYnVmW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG4gICAgfVxuICB9XG5cbiAgbGV0IGlcbiAgaWYgKGRpcikge1xuICAgIGxldCBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKSBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGxldCBmb3VuZCA9IHRydWVcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgY29uc3QgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGxldCBpXG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcbiAgICBpZiAobnVtYmVySXNOYU4ocGFyc2VkKSkgcmV0dXJuIGlcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWRcbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCA+Pj4gMFxuICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgfSBlbHNlIHtcbiAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG4gICAgICBsZW5ndGggPSB1bmRlZmluZWRcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJ1xuICAgIClcbiAgfVxuXG4gIGNvbnN0IHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZ1xuXG4gIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgbGV0IGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICBjb25zdCByZXMgPSBbXVxuXG4gIGxldCBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICBjb25zdCBmaXJzdEJ5dGUgPSBidWZbaV1cbiAgICBsZXQgY29kZVBvaW50ID0gbnVsbFxuICAgIGxldCBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpXG4gICAgICA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpXG4gICAgICAgICAgPyAzXG4gICAgICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRilcbiAgICAgICAgICAgICAgPyAyXG4gICAgICAgICAgICAgIDogMVxuXG4gICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xuICAgICAgbGV0IHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXG4gICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7XG4gICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkge1xuICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYVxuICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuICAgICAgY29kZVBvaW50ID0gMHhGRkZEXG4gICAgICBieXRlc1BlclNlcXVlbmNlID0gMVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcbiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcbiAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGXG4gICAgfVxuXG4gICAgcmVzLnB1c2goY29kZVBvaW50KVxuICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZVxuICB9XG5cbiAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpXG59XG5cbi8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aFxuLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eVxuY29uc3QgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIGNvbnN0IGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgbGV0IHJlcyA9ICcnXG4gIGxldCBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBsZXQgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgbGV0IHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgY29uc3QgbGVuID0gYnVmLmxlbmd0aFxuXG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXG4gIGxldCBvdXQgPSAnJ1xuICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIG91dCArPSBoZXhTbGljZUxvb2t1cFRhYmxlW2J1ZltpXV1cbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGNvbnN0IGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIGxldCByZXMgPSAnJ1xuICAvLyBJZiBieXRlcy5sZW5ndGggaXMgb2RkLCB0aGUgbGFzdCA4IGJpdHMgbXVzdCBiZSBpZ25vcmVkIChzYW1lIGFzIG5vZGUuanMpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoIC0gMTsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyAoYnl0ZXNbaSArIDFdICogMjU2KSlcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xuICBjb25zdCBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIGNvbnN0IG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZClcbiAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2VcbiAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG5ld0J1ZiwgQnVmZmVyLnByb3RvdHlwZSlcblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVaW50TEUgPVxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICBsZXQgdmFsID0gdGhpc1tvZmZzZXRdXG4gIGxldCBtdWwgPSAxXG4gIGxldCBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVpbnRCRSA9XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcbiAgfVxuXG4gIGxldCB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cbiAgbGV0IG11bCA9IDFcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVaW50OCA9XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVaW50MTZMRSA9XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVpbnQxNkJFID1cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVWludDMyTEUgPVxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVaW50MzJCRSA9XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRCaWdVSW50NjRMRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnVUludDY0TEUgKG9mZnNldCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0JylcbiAgY29uc3QgZmlyc3QgPSB0aGlzW29mZnNldF1cbiAgY29uc3QgbGFzdCA9IHRoaXNbb2Zmc2V0ICsgN11cbiAgaWYgKGZpcnN0ID09PSB1bmRlZmluZWQgfHwgbGFzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYm91bmRzRXJyb3Iob2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDgpXG4gIH1cblxuICBjb25zdCBsbyA9IGZpcnN0ICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMjRcblxuICBjb25zdCBoaSA9IHRoaXNbKytvZmZzZXRdICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICtcbiAgICBsYXN0ICogMiAqKiAyNFxuXG4gIHJldHVybiBCaWdJbnQobG8pICsgKEJpZ0ludChoaSkgPDwgQmlnSW50KDMyKSlcbn0pXG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEJpZ1VJbnQ2NEJFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdVSW50NjRCRSAob2Zmc2V0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICB2YWxpZGF0ZU51bWJlcihvZmZzZXQsICdvZmZzZXQnKVxuICBjb25zdCBmaXJzdCA9IHRoaXNbb2Zmc2V0XVxuICBjb25zdCBsYXN0ID0gdGhpc1tvZmZzZXQgKyA3XVxuICBpZiAoZmlyc3QgPT09IHVuZGVmaW5lZCB8fCBsYXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICBib3VuZHNFcnJvcihvZmZzZXQsIHRoaXMubGVuZ3RoIC0gOClcbiAgfVxuXG4gIGNvbnN0IGhpID0gZmlyc3QgKiAyICoqIDI0ICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgK1xuICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICtcbiAgICB0aGlzWysrb2Zmc2V0XVxuXG4gIGNvbnN0IGxvID0gdGhpc1srK29mZnNldF0gKiAyICoqIDI0ICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgK1xuICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICtcbiAgICBsYXN0XG5cbiAgcmV0dXJuIChCaWdJbnQoaGkpIDw8IEJpZ0ludCgzMikpICsgQmlnSW50KGxvKVxufSlcblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgbGV0IHZhbCA9IHRoaXNbb2Zmc2V0XVxuICBsZXQgbXVsID0gMVxuICBsZXQgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIGxldCBpID0gYnl0ZUxlbmd0aFxuICBsZXQgbXVsID0gMVxuICBsZXQgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgY29uc3QgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIGNvbnN0IHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRCaWdJbnQ2NExFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdJbnQ2NExFIChvZmZzZXQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIHZhbGlkYXRlTnVtYmVyKG9mZnNldCwgJ29mZnNldCcpXG4gIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdXG4gIGNvbnN0IGxhc3QgPSB0aGlzW29mZnNldCArIDddXG4gIGlmIChmaXJzdCA9PT0gdW5kZWZpbmVkIHx8IGxhc3QgPT09IHVuZGVmaW5lZCkge1xuICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgdGhpcy5sZW5ndGggLSA4KVxuICB9XG5cbiAgY29uc3QgdmFsID0gdGhpc1tvZmZzZXQgKyA0XSArXG4gICAgdGhpc1tvZmZzZXQgKyA1XSAqIDIgKiogOCArXG4gICAgdGhpc1tvZmZzZXQgKyA2XSAqIDIgKiogMTYgK1xuICAgIChsYXN0IDw8IDI0KSAvLyBPdmVyZmxvd1xuXG4gIHJldHVybiAoQmlnSW50KHZhbCkgPDwgQmlnSW50KDMyKSkgK1xuICAgIEJpZ0ludChmaXJzdCArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDggK1xuICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDI0KVxufSlcblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkQmlnSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnSW50NjRCRSAob2Zmc2V0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICB2YWxpZGF0ZU51bWJlcihvZmZzZXQsICdvZmZzZXQnKVxuICBjb25zdCBmaXJzdCA9IHRoaXNbb2Zmc2V0XVxuICBjb25zdCBsYXN0ID0gdGhpc1tvZmZzZXQgKyA3XVxuICBpZiAoZmlyc3QgPT09IHVuZGVmaW5lZCB8fCBsYXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICBib3VuZHNFcnJvcihvZmZzZXQsIHRoaXMubGVuZ3RoIC0gOClcbiAgfVxuXG4gIGNvbnN0IHZhbCA9IChmaXJzdCA8PCAyNCkgKyAvLyBPdmVyZmxvd1xuICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDggK1xuICAgIHRoaXNbKytvZmZzZXRdXG5cbiAgcmV0dXJuIChCaWdJbnQodmFsKSA8PCBCaWdJbnQoMzIpKSArXG4gICAgQmlnSW50KHRoaXNbKytvZmZzZXRdICogMiAqKiAyNCArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArXG4gICAgbGFzdClcbn0pXG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpXG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVWludExFID1cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjb25zdCBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIGxldCBtdWwgPSAxXG4gIGxldCBpID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVaW50QkUgPVxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNvbnN0IG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgbGV0IGkgPSBieXRlTGVuZ3RoIC0gMVxuICBsZXQgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQ4ID1cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVWludDE2TEUgPVxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQxNkJFID1cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVaW50MzJMRSA9XG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVWludDMyQkUgPVxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gd3J0QmlnVUludDY0TEUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbWluLCBtYXgpIHtcbiAgY2hlY2tJbnRCSSh2YWx1ZSwgbWluLCBtYXgsIGJ1Ziwgb2Zmc2V0LCA3KVxuXG4gIGxldCBsbyA9IE51bWJlcih2YWx1ZSAmIEJpZ0ludCgweGZmZmZmZmZmKSlcbiAgYnVmW29mZnNldCsrXSA9IGxvXG4gIGxvID0gbG8gPj4gOFxuICBidWZbb2Zmc2V0KytdID0gbG9cbiAgbG8gPSBsbyA+PiA4XG4gIGJ1ZltvZmZzZXQrK10gPSBsb1xuICBsbyA9IGxvID4+IDhcbiAgYnVmW29mZnNldCsrXSA9IGxvXG4gIGxldCBoaSA9IE51bWJlcih2YWx1ZSA+PiBCaWdJbnQoMzIpICYgQmlnSW50KDB4ZmZmZmZmZmYpKVxuICBidWZbb2Zmc2V0KytdID0gaGlcbiAgaGkgPSBoaSA+PiA4XG4gIGJ1ZltvZmZzZXQrK10gPSBoaVxuICBoaSA9IGhpID4+IDhcbiAgYnVmW29mZnNldCsrXSA9IGhpXG4gIGhpID0gaGkgPj4gOFxuICBidWZbb2Zmc2V0KytdID0gaGlcbiAgcmV0dXJuIG9mZnNldFxufVxuXG5mdW5jdGlvbiB3cnRCaWdVSW50NjRCRSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBtaW4sIG1heCkge1xuICBjaGVja0ludEJJKHZhbHVlLCBtaW4sIG1heCwgYnVmLCBvZmZzZXQsIDcpXG5cbiAgbGV0IGxvID0gTnVtYmVyKHZhbHVlICYgQmlnSW50KDB4ZmZmZmZmZmYpKVxuICBidWZbb2Zmc2V0ICsgN10gPSBsb1xuICBsbyA9IGxvID4+IDhcbiAgYnVmW29mZnNldCArIDZdID0gbG9cbiAgbG8gPSBsbyA+PiA4XG4gIGJ1ZltvZmZzZXQgKyA1XSA9IGxvXG4gIGxvID0gbG8gPj4gOFxuICBidWZbb2Zmc2V0ICsgNF0gPSBsb1xuICBsZXQgaGkgPSBOdW1iZXIodmFsdWUgPj4gQmlnSW50KDMyKSAmIEJpZ0ludCgweGZmZmZmZmZmKSlcbiAgYnVmW29mZnNldCArIDNdID0gaGlcbiAgaGkgPSBoaSA+PiA4XG4gIGJ1ZltvZmZzZXQgKyAyXSA9IGhpXG4gIGhpID0gaGkgPj4gOFxuICBidWZbb2Zmc2V0ICsgMV0gPSBoaVxuICBoaSA9IGhpID4+IDhcbiAgYnVmW29mZnNldF0gPSBoaVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlQmlnVUludDY0TEUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gd3JpdGVCaWdVSW50NjRMRSAodmFsdWUsIG9mZnNldCA9IDApIHtcbiAgcmV0dXJuIHdydEJpZ1VJbnQ2NExFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIEJpZ0ludCgwKSwgQmlnSW50KCcweGZmZmZmZmZmZmZmZmZmZmYnKSlcbn0pXG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVCaWdVSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiB3cml0ZUJpZ1VJbnQ2NEJFICh2YWx1ZSwgb2Zmc2V0ID0gMCkge1xuICByZXR1cm4gd3J0QmlnVUludDY0QkUodGhpcywgdmFsdWUsIG9mZnNldCwgQmlnSW50KDApLCBCaWdJbnQoJzB4ZmZmZmZmZmZmZmZmZmZmZicpKVxufSlcblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjb25zdCBsaW1pdCA9IE1hdGgucG93KDIsICg4ICogYnl0ZUxlbmd0aCkgLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICBsZXQgaSA9IDBcbiAgbGV0IG11bCA9IDFcbiAgbGV0IHN1YiA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpIC0gMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjb25zdCBsaW1pdCA9IE1hdGgucG93KDIsICg4ICogYnl0ZUxlbmd0aCkgLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICBsZXQgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIGxldCBtdWwgPSAxXG4gIGxldCBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlQmlnSW50NjRMRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiB3cml0ZUJpZ0ludDY0TEUgKHZhbHVlLCBvZmZzZXQgPSAwKSB7XG4gIHJldHVybiB3cnRCaWdVSW50NjRMRSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAtQmlnSW50KCcweDgwMDAwMDAwMDAwMDAwMDAnKSwgQmlnSW50KCcweDdmZmZmZmZmZmZmZmZmZmYnKSlcbn0pXG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVCaWdJbnQ2NEJFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHdyaXRlQmlnSW50NjRCRSAodmFsdWUsIG9mZnNldCA9IDApIHtcbiAgcmV0dXJuIHdydEJpZ1VJbnQ2NEJFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIC1CaWdJbnQoJzB4ODAwMDAwMDAwMDAwMDAwMCcpLCBCaWdJbnQoJzB4N2ZmZmZmZmZmZmZmZmZmZicpKVxufSlcblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgc2hvdWxkIGJlIGEgQnVmZmVyJylcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcbiAgfVxuXG4gIGNvbnN0IGxlbiA9IGVuZCAtIHN0YXJ0XG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIFVzZSBidWlsdC1pbiB3aGVuIGF2YWlsYWJsZSwgbWlzc2luZyBmcm9tIElFMTFcbiAgICB0aGlzLmNvcHlXaXRoaW4odGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpXG4gIH0gZWxzZSB7XG4gICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoXG4gICAgICB0YXJnZXQsXG4gICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpLFxuICAgICAgdGFyZ2V0U3RhcnRcbiAgICApXG4gIH1cblxuICByZXR1cm4gbGVuXG59XG5cbi8vIFVzYWdlOlxuLy8gICAgYnVmZmVyLmZpbGwobnVtYmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKHN0cmluZ1ssIG9mZnNldFssIGVuZF1dWywgZW5jb2RpbmddKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykge1xuICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBzdGFydFxuICAgICAgc3RhcnQgPSAwXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5kXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH1cbiAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nJylcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgIH1cbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3QgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoKGVuY29kaW5nID09PSAndXRmOCcgJiYgY29kZSA8IDEyOCkgfHxcbiAgICAgICAgICBlbmNvZGluZyA9PT0gJ2xhdGluMScpIHtcbiAgICAgICAgLy8gRmFzdCBwYXRoOiBJZiBgdmFsYCBmaXRzIGludG8gYSBzaW5nbGUgYnl0ZSwgdXNlIHRoYXQgbnVtZXJpYyB2YWx1ZS5cbiAgICAgICAgdmFsID0gY29kZVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDI1NVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdib29sZWFuJykge1xuICAgIHZhbCA9IE51bWJlcih2YWwpXG4gIH1cblxuICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cbiAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXG4gIGlmICghdmFsKSB2YWwgPSAwXG5cbiAgbGV0IGlcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgdGhpc1tpXSA9IHZhbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCBieXRlcyA9IEJ1ZmZlci5pc0J1ZmZlcih2YWwpXG4gICAgICA/IHZhbFxuICAgICAgOiBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuICAgIGNvbnN0IGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSB2YWx1ZSBcIicgKyB2YWwgK1xuICAgICAgICAnXCIgaXMgaW52YWxpZCBmb3IgYXJndW1lbnQgXCJ2YWx1ZVwiJylcbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHtcbiAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLy8gQ1VTVE9NIEVSUk9SU1xuLy8gPT09PT09PT09PT09PVxuXG4vLyBTaW1wbGlmaWVkIHZlcnNpb25zIGZyb20gTm9kZSwgY2hhbmdlZCBmb3IgQnVmZmVyLW9ubHkgdXNhZ2VcbmNvbnN0IGVycm9ycyA9IHt9XG5mdW5jdGlvbiBFIChzeW0sIGdldE1lc3NhZ2UsIEJhc2UpIHtcbiAgZXJyb3JzW3N5bV0gPSBjbGFzcyBOb2RlRXJyb3IgZXh0ZW5kcyBCYXNlIHtcbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICBzdXBlcigpXG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbWVzc2FnZScsIHtcbiAgICAgICAgdmFsdWU6IGdldE1lc3NhZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSlcblxuICAgICAgLy8gQWRkIHRoZSBlcnJvciBjb2RlIHRvIHRoZSBuYW1lIHRvIGluY2x1ZGUgaXQgaW4gdGhlIHN0YWNrIHRyYWNlLlxuICAgICAgdGhpcy5uYW1lID0gYCR7dGhpcy5uYW1lfSBbJHtzeW19XWBcbiAgICAgIC8vIEFjY2VzcyB0aGUgc3RhY2sgdG8gZ2VuZXJhdGUgdGhlIGVycm9yIG1lc3NhZ2UgaW5jbHVkaW5nIHRoZSBlcnJvciBjb2RlXG4gICAgICAvLyBmcm9tIHRoZSBuYW1lLlxuICAgICAgdGhpcy5zdGFjayAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC1leHByZXNzaW9uc1xuICAgICAgLy8gUmVzZXQgdGhlIG5hbWUgdG8gdGhlIGFjdHVhbCBuYW1lLlxuICAgICAgZGVsZXRlIHRoaXMubmFtZVxuICAgIH1cblxuICAgIGdldCBjb2RlICgpIHtcbiAgICAgIHJldHVybiBzeW1cbiAgICB9XG5cbiAgICBzZXQgY29kZSAodmFsdWUpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnY29kZScsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdG9TdHJpbmcgKCkge1xuICAgICAgcmV0dXJuIGAke3RoaXMubmFtZX0gWyR7c3ltfV06ICR7dGhpcy5tZXNzYWdlfWBcbiAgICB9XG4gIH1cbn1cblxuRSgnRVJSX0JVRkZFUl9PVVRfT0ZfQk9VTkRTJyxcbiAgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuIGAke25hbWV9IGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kc2BcbiAgICB9XG5cbiAgICByZXR1cm4gJ0F0dGVtcHQgdG8gYWNjZXNzIG1lbW9yeSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnXG4gIH0sIFJhbmdlRXJyb3IpXG5FKCdFUlJfSU5WQUxJRF9BUkdfVFlQRScsXG4gIGZ1bmN0aW9uIChuYW1lLCBhY3R1YWwpIHtcbiAgICByZXR1cm4gYFRoZSBcIiR7bmFtZX1cIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlICR7dHlwZW9mIGFjdHVhbH1gXG4gIH0sIFR5cGVFcnJvcilcbkUoJ0VSUl9PVVRfT0ZfUkFOR0UnLFxuICBmdW5jdGlvbiAoc3RyLCByYW5nZSwgaW5wdXQpIHtcbiAgICBsZXQgbXNnID0gYFRoZSB2YWx1ZSBvZiBcIiR7c3RyfVwiIGlzIG91dCBvZiByYW5nZS5gXG4gICAgbGV0IHJlY2VpdmVkID0gaW5wdXRcbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihpbnB1dCkgJiYgTWF0aC5hYnMoaW5wdXQpID4gMiAqKiAzMikge1xuICAgICAgcmVjZWl2ZWQgPSBhZGROdW1lcmljYWxTZXBhcmF0b3IoU3RyaW5nKGlucHV0KSlcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ2JpZ2ludCcpIHtcbiAgICAgIHJlY2VpdmVkID0gU3RyaW5nKGlucHV0KVxuICAgICAgaWYgKGlucHV0ID4gQmlnSW50KDIpICoqIEJpZ0ludCgzMikgfHwgaW5wdXQgPCAtKEJpZ0ludCgyKSAqKiBCaWdJbnQoMzIpKSkge1xuICAgICAgICByZWNlaXZlZCA9IGFkZE51bWVyaWNhbFNlcGFyYXRvcihyZWNlaXZlZClcbiAgICAgIH1cbiAgICAgIHJlY2VpdmVkICs9ICduJ1xuICAgIH1cbiAgICBtc2cgKz0gYCBJdCBtdXN0IGJlICR7cmFuZ2V9LiBSZWNlaXZlZCAke3JlY2VpdmVkfWBcbiAgICByZXR1cm4gbXNnXG4gIH0sIFJhbmdlRXJyb3IpXG5cbmZ1bmN0aW9uIGFkZE51bWVyaWNhbFNlcGFyYXRvciAodmFsKSB7XG4gIGxldCByZXMgPSAnJ1xuICBsZXQgaSA9IHZhbC5sZW5ndGhcbiAgY29uc3Qgc3RhcnQgPSB2YWxbMF0gPT09ICctJyA/IDEgOiAwXG4gIGZvciAoOyBpID49IHN0YXJ0ICsgNDsgaSAtPSAzKSB7XG4gICAgcmVzID0gYF8ke3ZhbC5zbGljZShpIC0gMywgaSl9JHtyZXN9YFxuICB9XG4gIHJldHVybiBgJHt2YWwuc2xpY2UoMCwgaSl9JHtyZXN9YFxufVxuXG4vLyBDSEVDSyBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiBjaGVja0JvdW5kcyAoYnVmLCBvZmZzZXQsIGJ5dGVMZW5ndGgpIHtcbiAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0JylcbiAgaWYgKGJ1ZltvZmZzZXRdID09PSB1bmRlZmluZWQgfHwgYnVmW29mZnNldCArIGJ5dGVMZW5ndGhdID09PSB1bmRlZmluZWQpIHtcbiAgICBib3VuZHNFcnJvcihvZmZzZXQsIGJ1Zi5sZW5ndGggLSAoYnl0ZUxlbmd0aCArIDEpKVxuICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50QkkgKHZhbHVlLCBtaW4sIG1heCwgYnVmLCBvZmZzZXQsIGJ5dGVMZW5ndGgpIHtcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB7XG4gICAgY29uc3QgbiA9IHR5cGVvZiBtaW4gPT09ICdiaWdpbnQnID8gJ24nIDogJydcbiAgICBsZXQgcmFuZ2VcbiAgICBpZiAoYnl0ZUxlbmd0aCA+IDMpIHtcbiAgICAgIGlmIChtaW4gPT09IDAgfHwgbWluID09PSBCaWdJbnQoMCkpIHtcbiAgICAgICAgcmFuZ2UgPSBgPj0gMCR7bn0gYW5kIDwgMiR7bn0gKiogJHsoYnl0ZUxlbmd0aCArIDEpICogOH0ke259YFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmFuZ2UgPSBgPj0gLSgyJHtufSAqKiAkeyhieXRlTGVuZ3RoICsgMSkgKiA4IC0gMX0ke259KSBhbmQgPCAyICoqIGAgK1xuICAgICAgICAgICAgICAgIGAkeyhieXRlTGVuZ3RoICsgMSkgKiA4IC0gMX0ke259YFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByYW5nZSA9IGA+PSAke21pbn0ke259IGFuZCA8PSAke21heH0ke259YFxuICAgIH1cbiAgICB0aHJvdyBuZXcgZXJyb3JzLkVSUl9PVVRfT0ZfUkFOR0UoJ3ZhbHVlJywgcmFuZ2UsIHZhbHVlKVxuICB9XG4gIGNoZWNrQm91bmRzKGJ1Ziwgb2Zmc2V0LCBieXRlTGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZU51bWJlciAodmFsdWUsIG5hbWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLkVSUl9JTlZBTElEX0FSR19UWVBFKG5hbWUsICdudW1iZXInLCB2YWx1ZSlcbiAgfVxufVxuXG5mdW5jdGlvbiBib3VuZHNFcnJvciAodmFsdWUsIGxlbmd0aCwgdHlwZSkge1xuICBpZiAoTWF0aC5mbG9vcih2YWx1ZSkgIT09IHZhbHVlKSB7XG4gICAgdmFsaWRhdGVOdW1iZXIodmFsdWUsIHR5cGUpXG4gICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfT1VUX09GX1JBTkdFKHR5cGUgfHwgJ29mZnNldCcsICdhbiBpbnRlZ2VyJywgdmFsdWUpXG4gIH1cblxuICBpZiAobGVuZ3RoIDwgMCkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuRVJSX0JVRkZFUl9PVVRfT0ZfQk9VTkRTKClcbiAgfVxuXG4gIHRocm93IG5ldyBlcnJvcnMuRVJSX09VVF9PRl9SQU5HRSh0eXBlIHx8ICdvZmZzZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYD49ICR7dHlwZSA/IDEgOiAwfSBhbmQgPD0gJHtsZW5ndGh9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlKVxufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbmNvbnN0IElOVkFMSURfQkFTRTY0X1JFID0gL1teKy8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgdGFrZXMgZXF1YWwgc2lnbnMgYXMgZW5kIG9mIHRoZSBCYXNlNjQgZW5jb2RpbmdcbiAgc3RyID0gc3RyLnNwbGl0KCc9JylbMF1cbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0ci50cmltKCkucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICBsZXQgY29kZVBvaW50XG4gIGNvbnN0IGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgbGV0IGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIGNvbnN0IGJ5dGVzID0gW11cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSlcblxuICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcbiAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkge1xuICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgICAvLyBubyBsZWFkIHlldFxuICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XG4gICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgbGVhZFxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpclxuICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMFxuICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgfVxuXG4gICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnl0ZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHtcbiAgY29uc3QgYnl0ZUFycmF5ID0gW11cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICBsZXQgYywgaGksIGxvXG4gIGNvbnN0IGJ5dGVBcnJheSA9IFtdXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgbGV0IGlcbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuICB9XG4gIHJldHVybiBpXG59XG5cbi8vIEFycmF5QnVmZmVyIG9yIFVpbnQ4QXJyYXkgb2JqZWN0cyBmcm9tIG90aGVyIGNvbnRleHRzIChpLmUuIGlmcmFtZXMpIGRvIG5vdCBwYXNzXG4vLyB0aGUgYGluc3RhbmNlb2ZgIGNoZWNrIGJ1dCB0aGV5IHNob3VsZCBiZSB0cmVhdGVkIGFzIG9mIHRoYXQgdHlwZS5cbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzE2NlxuZnVuY3Rpb24gaXNJbnN0YW5jZSAob2JqLCB0eXBlKSB7XG4gIHJldHVybiBvYmogaW5zdGFuY2VvZiB0eXBlIHx8XG4gICAgKG9iaiAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3RvciAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3Rvci5uYW1lICE9IG51bGwgJiZcbiAgICAgIG9iai5jb25zdHJ1Y3Rvci5uYW1lID09PSB0eXBlLm5hbWUpXG59XG5mdW5jdGlvbiBudW1iZXJJc05hTiAob2JqKSB7XG4gIC8vIEZvciBJRTExIHN1cHBvcnRcbiAgcmV0dXJuIG9iaiAhPT0gb2JqIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXG59XG5cbi8vIENyZWF0ZSBsb29rdXAgdGFibGUgZm9yIGB0b1N0cmluZygnaGV4JylgXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL2lzc3Vlcy8yMTlcbmNvbnN0IGhleFNsaWNlTG9va3VwVGFibGUgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBhbHBoYWJldCA9ICcwMTIzNDU2Nzg5YWJjZGVmJ1xuICBjb25zdCB0YWJsZSA9IG5ldyBBcnJheSgyNTYpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgIGNvbnN0IGkxNiA9IGkgKiAxNlxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTY7ICsraikge1xuICAgICAgdGFibGVbaTE2ICsgal0gPSBhbHBoYWJldFtpXSArIGFscGhhYmV0W2pdXG4gICAgfVxuICB9XG4gIHJldHVybiB0YWJsZVxufSkoKVxuXG4vLyBSZXR1cm4gbm90IGZ1bmN0aW9uIHdpdGggRXJyb3IgaWYgQmlnSW50IG5vdCBzdXBwb3J0ZWRcbmZ1bmN0aW9uIGRlZmluZUJpZ0ludE1ldGhvZCAoZm4pIHtcbiAgcmV0dXJuIHR5cGVvZiBCaWdJbnQgPT09ICd1bmRlZmluZWQnID8gQnVmZmVyQmlnSW50Tm90RGVmaW5lZCA6IGZuXG59XG5cbmZ1bmN0aW9uIEJ1ZmZlckJpZ0ludE5vdERlZmluZWQgKCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0JpZ0ludCBub3Qgc3VwcG9ydGVkJylcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ2J1ZmZlcicpLFxuICAgIEJ1ZmZlciA9IF9yZXF1aXJlLkJ1ZmZlcjtcblxudmFyIF9yZXF1aXJlMiA9IHJlcXVpcmUoJ3V0aWwnKSxcbiAgICBpbnNwZWN0ID0gX3JlcXVpcmUyLmluc3BlY3Q7XG5cbnZhciBjdXN0b20gPSBpbnNwZWN0ICYmIGluc3BlY3QuY3VzdG9tIHx8ICdpbnNwZWN0JztcblxuZnVuY3Rpb24gY29weUJ1ZmZlcihzcmMsIHRhcmdldCwgb2Zmc2V0KSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuY29weS5jYWxsKHNyYywgdGFyZ2V0LCBvZmZzZXQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEJ1ZmZlckxpc3QoKSB7XG4gICAgdGhpcy5oZWFkID0gbnVsbDtcbiAgICB0aGlzLnRhaWwgPSBudWxsO1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBCdWZmZXJMaXN0LnByb3RvdHlwZTtcblxuICBfcHJvdG8ucHVzaCA9IGZ1bmN0aW9uIHB1c2godikge1xuICAgIHZhciBlbnRyeSA9IHtcbiAgICAgIGRhdGE6IHYsXG4gICAgICBuZXh0OiBudWxsXG4gICAgfTtcbiAgICBpZiAodGhpcy5sZW5ndGggPiAwKSB0aGlzLnRhaWwubmV4dCA9IGVudHJ5O2Vsc2UgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgKyt0aGlzLmxlbmd0aDtcbiAgfTtcblxuICBfcHJvdG8udW5zaGlmdCA9IGZ1bmN0aW9uIHVuc2hpZnQodikge1xuICAgIHZhciBlbnRyeSA9IHtcbiAgICAgIGRhdGE6IHYsXG4gICAgICBuZXh0OiB0aGlzLmhlYWRcbiAgICB9O1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgdGhpcy50YWlsID0gZW50cnk7XG4gICAgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgKyt0aGlzLmxlbmd0aDtcbiAgfTtcblxuICBfcHJvdG8uc2hpZnQgPSBmdW5jdGlvbiBzaGlmdCgpIHtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICB2YXIgcmV0ID0gdGhpcy5oZWFkLmRhdGE7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO2Vsc2UgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5leHQ7XG4gICAgLS10aGlzLmxlbmd0aDtcbiAgICByZXR1cm4gcmV0O1xuICB9O1xuXG4gIF9wcm90by5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICB9O1xuXG4gIF9wcm90by5qb2luID0gZnVuY3Rpb24gam9pbihzKSB7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gJyc7XG4gICAgdmFyIHAgPSB0aGlzLmhlYWQ7XG4gICAgdmFyIHJldCA9ICcnICsgcC5kYXRhO1xuXG4gICAgd2hpbGUgKHAgPSBwLm5leHQpIHtcbiAgICAgIHJldCArPSBzICsgcC5kYXRhO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH07XG5cbiAgX3Byb3RvLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdChuKSB7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gQnVmZmVyLmFsbG9jKDApO1xuICAgIHZhciByZXQgPSBCdWZmZXIuYWxsb2NVbnNhZmUobiA+Pj4gMCk7XG4gICAgdmFyIHAgPSB0aGlzLmhlYWQ7XG4gICAgdmFyIGkgPSAwO1xuXG4gICAgd2hpbGUgKHApIHtcbiAgICAgIGNvcHlCdWZmZXIocC5kYXRhLCByZXQsIGkpO1xuICAgICAgaSArPSBwLmRhdGEubGVuZ3RoO1xuICAgICAgcCA9IHAubmV4dDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xuICB9IC8vIENvbnN1bWVzIGEgc3BlY2lmaWVkIGFtb3VudCBvZiBieXRlcyBvciBjaGFyYWN0ZXJzIGZyb20gdGhlIGJ1ZmZlcmVkIGRhdGEuXG4gIDtcblxuICBfcHJvdG8uY29uc3VtZSA9IGZ1bmN0aW9uIGNvbnN1bWUobiwgaGFzU3RyaW5ncykge1xuICAgIHZhciByZXQ7XG5cbiAgICBpZiAobiA8IHRoaXMuaGVhZC5kYXRhLmxlbmd0aCkge1xuICAgICAgLy8gYHNsaWNlYCBpcyB0aGUgc2FtZSBmb3IgYnVmZmVycyBhbmQgc3RyaW5ncy5cbiAgICAgIHJldCA9IHRoaXMuaGVhZC5kYXRhLnNsaWNlKDAsIG4pO1xuICAgICAgdGhpcy5oZWFkLmRhdGEgPSB0aGlzLmhlYWQuZGF0YS5zbGljZShuKTtcbiAgICB9IGVsc2UgaWYgKG4gPT09IHRoaXMuaGVhZC5kYXRhLmxlbmd0aCkge1xuICAgICAgLy8gRmlyc3QgY2h1bmsgaXMgYSBwZXJmZWN0IG1hdGNoLlxuICAgICAgcmV0ID0gdGhpcy5zaGlmdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZXN1bHQgc3BhbnMgbW9yZSB0aGFuIG9uZSBidWZmZXIuXG4gICAgICByZXQgPSBoYXNTdHJpbmdzID8gdGhpcy5fZ2V0U3RyaW5nKG4pIDogdGhpcy5fZ2V0QnVmZmVyKG4pO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH07XG5cbiAgX3Byb3RvLmZpcnN0ID0gZnVuY3Rpb24gZmlyc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZC5kYXRhO1xuICB9IC8vIENvbnN1bWVzIGEgc3BlY2lmaWVkIGFtb3VudCBvZiBjaGFyYWN0ZXJzIGZyb20gdGhlIGJ1ZmZlcmVkIGRhdGEuXG4gIDtcblxuICBfcHJvdG8uX2dldFN0cmluZyA9IGZ1bmN0aW9uIF9nZXRTdHJpbmcobikge1xuICAgIHZhciBwID0gdGhpcy5oZWFkO1xuICAgIHZhciBjID0gMTtcbiAgICB2YXIgcmV0ID0gcC5kYXRhO1xuICAgIG4gLT0gcmV0Lmxlbmd0aDtcblxuICAgIHdoaWxlIChwID0gcC5uZXh0KSB7XG4gICAgICB2YXIgc3RyID0gcC5kYXRhO1xuICAgICAgdmFyIG5iID0gbiA+IHN0ci5sZW5ndGggPyBzdHIubGVuZ3RoIDogbjtcbiAgICAgIGlmIChuYiA9PT0gc3RyLmxlbmd0aCkgcmV0ICs9IHN0cjtlbHNlIHJldCArPSBzdHIuc2xpY2UoMCwgbik7XG4gICAgICBuIC09IG5iO1xuXG4gICAgICBpZiAobiA9PT0gMCkge1xuICAgICAgICBpZiAobmIgPT09IHN0ci5sZW5ndGgpIHtcbiAgICAgICAgICArK2M7XG4gICAgICAgICAgaWYgKHAubmV4dCkgdGhpcy5oZWFkID0gcC5uZXh0O2Vsc2UgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmhlYWQgPSBwO1xuICAgICAgICAgIHAuZGF0YSA9IHN0ci5zbGljZShuYik7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgKytjO1xuICAgIH1cblxuICAgIHRoaXMubGVuZ3RoIC09IGM7XG4gICAgcmV0dXJuIHJldDtcbiAgfSAvLyBDb25zdW1lcyBhIHNwZWNpZmllZCBhbW91bnQgb2YgYnl0ZXMgZnJvbSB0aGUgYnVmZmVyZWQgZGF0YS5cbiAgO1xuXG4gIF9wcm90by5fZ2V0QnVmZmVyID0gZnVuY3Rpb24gX2dldEJ1ZmZlcihuKSB7XG4gICAgdmFyIHJldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuKTtcbiAgICB2YXIgcCA9IHRoaXMuaGVhZDtcbiAgICB2YXIgYyA9IDE7XG4gICAgcC5kYXRhLmNvcHkocmV0KTtcbiAgICBuIC09IHAuZGF0YS5sZW5ndGg7XG5cbiAgICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgICAgdmFyIGJ1ZiA9IHAuZGF0YTtcbiAgICAgIHZhciBuYiA9IG4gPiBidWYubGVuZ3RoID8gYnVmLmxlbmd0aCA6IG47XG4gICAgICBidWYuY29weShyZXQsIHJldC5sZW5ndGggLSBuLCAwLCBuYik7XG4gICAgICBuIC09IG5iO1xuXG4gICAgICBpZiAobiA9PT0gMCkge1xuICAgICAgICBpZiAobmIgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICAgICAgICArK2M7XG4gICAgICAgICAgaWYgKHAubmV4dCkgdGhpcy5oZWFkID0gcC5uZXh0O2Vsc2UgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmhlYWQgPSBwO1xuICAgICAgICAgIHAuZGF0YSA9IGJ1Zi5zbGljZShuYik7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgKytjO1xuICAgIH1cblxuICAgIHRoaXMubGVuZ3RoIC09IGM7XG4gICAgcmV0dXJuIHJldDtcbiAgfSAvLyBNYWtlIHN1cmUgdGhlIGxpbmtlZCBsaXN0IG9ubHkgc2hvd3MgdGhlIG1pbmltYWwgbmVjZXNzYXJ5IGluZm9ybWF0aW9uLlxuICA7XG5cbiAgX3Byb3RvW2N1c3RvbV0gPSBmdW5jdGlvbiAoXywgb3B0aW9ucykge1xuICAgIHJldHVybiBpbnNwZWN0KHRoaXMsIF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHtcbiAgICAgIC8vIE9ubHkgaW5zcGVjdCBvbmUgbGV2ZWwuXG4gICAgICBkZXB0aDogMCxcbiAgICAgIC8vIEl0IHNob3VsZCBub3QgcmVjdXJzZS5cbiAgICAgIGN1c3RvbUluc3BlY3Q6IGZhbHNlXG4gICAgfSkpO1xuICB9O1xuXG4gIHJldHVybiBCdWZmZXJMaXN0O1xufSgpOyIsIid1c2Ugc3RyaWN0JzsgLy8gdW5kb2N1bWVudGVkIGNiKCkgQVBJLCBuZWVkZWQgZm9yIGNvcmUsIG5vdCBmb3IgcHVibGljIEFQSVxuXG5mdW5jdGlvbiBkZXN0cm95KGVyciwgY2IpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgcmVhZGFibGVEZXN0cm95ZWQgPSB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB2YXIgd3JpdGFibGVEZXN0cm95ZWQgPSB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuXG4gIGlmIChyZWFkYWJsZURlc3Ryb3llZCB8fCB3cml0YWJsZURlc3Ryb3llZCkge1xuICAgIGlmIChjYikge1xuICAgICAgY2IoZXJyKTtcbiAgICB9IGVsc2UgaWYgKGVycikge1xuICAgICAgaWYgKCF0aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdEVycm9yTlQsIHRoaXMsIGVycik7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCkge1xuICAgICAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdEVycm9yTlQsIHRoaXMsIGVycik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0gLy8gd2Ugc2V0IGRlc3Ryb3llZCB0byB0cnVlIGJlZm9yZSBmaXJpbmcgZXJyb3IgY2FsbGJhY2tzIGluIG9yZGVyXG4gIC8vIHRvIG1ha2UgaXQgcmUtZW50cmFuY2Ugc2FmZSBpbiBjYXNlIGRlc3Ryb3koKSBpcyBjYWxsZWQgd2l0aGluIGNhbGxiYWNrc1xuXG5cbiAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7XG4gIH0gLy8gaWYgdGhpcyBpcyBhIGR1cGxleCBzdHJlYW0gbWFyayB0aGUgd3JpdGFibGUgcGFydCBhcyBkZXN0cm95ZWQgYXMgd2VsbFxuXG5cbiAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7XG4gIH1cblxuICB0aGlzLl9kZXN0cm95KGVyciB8fCBudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKCFjYiAmJiBlcnIpIHtcbiAgICAgIGlmICghX3RoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0RXJyb3JBbmRDbG9zZU5ULCBfdGhpcywgZXJyKTtcbiAgICAgIH0gZWxzZSBpZiAoIV90aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCkge1xuICAgICAgICBfdGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRFcnJvckFuZENsb3NlTlQsIF90aGlzLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2VOVCwgX3RoaXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY2IpIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlTlQsIF90aGlzKTtcbiAgICAgIGNiKGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlTlQsIF90aGlzKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBlbWl0RXJyb3JBbmRDbG9zZU5UKHNlbGYsIGVycikge1xuICBlbWl0RXJyb3JOVChzZWxmLCBlcnIpO1xuICBlbWl0Q2xvc2VOVChzZWxmKTtcbn1cblxuZnVuY3Rpb24gZW1pdENsb3NlTlQoc2VsZikge1xuICBpZiAoc2VsZi5fd3JpdGFibGVTdGF0ZSAmJiAhc2VsZi5fd3JpdGFibGVTdGF0ZS5lbWl0Q2xvc2UpIHJldHVybjtcbiAgaWYgKHNlbGYuX3JlYWRhYmxlU3RhdGUgJiYgIXNlbGYuX3JlYWRhYmxlU3RhdGUuZW1pdENsb3NlKSByZXR1cm47XG4gIHNlbGYuZW1pdCgnY2xvc2UnKTtcbn1cblxuZnVuY3Rpb24gdW5kZXN0cm95KCkge1xuICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSkge1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kRW1pdHRlZCA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQgPSBmYWxzZTtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZmluYWxDYWxsZWQgPSBmYWxzZTtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLnByZWZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdEVycm9yTlQoc2VsZiwgZXJyKSB7XG4gIHNlbGYuZW1pdCgnZXJyb3InLCBlcnIpO1xufVxuXG5mdW5jdGlvbiBlcnJvck9yRGVzdHJveShzdHJlYW0sIGVycikge1xuICAvLyBXZSBoYXZlIHRlc3RzIHRoYXQgcmVseSBvbiBlcnJvcnMgYmVpbmcgZW1pdHRlZFxuICAvLyBpbiB0aGUgc2FtZSB0aWNrLCBzbyBjaGFuZ2luZyB0aGlzIGlzIHNlbXZlciBtYWpvci5cbiAgLy8gRm9yIG5vdyB3aGVuIHlvdSBvcHQtaW4gdG8gYXV0b0Rlc3Ryb3kgd2UgYWxsb3dcbiAgLy8gdGhlIGVycm9yIHRvIGJlIGVtaXR0ZWQgbmV4dFRpY2suIEluIGEgZnV0dXJlXG4gIC8vIHNlbXZlciBtYWpvciB1cGRhdGUgd2Ugc2hvdWxkIGNoYW5nZSB0aGUgZGVmYXVsdCB0byB0aGlzLlxuICB2YXIgclN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgd1N0YXRlID0gc3RyZWFtLl93cml0YWJsZVN0YXRlO1xuICBpZiAoclN0YXRlICYmIHJTdGF0ZS5hdXRvRGVzdHJveSB8fCB3U3RhdGUgJiYgd1N0YXRlLmF1dG9EZXN0cm95KSBzdHJlYW0uZGVzdHJveShlcnIpO2Vsc2Ugc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXJyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gIHVuZGVzdHJveTogdW5kZXN0cm95LFxuICBlcnJvck9yRGVzdHJveTogZXJyb3JPckRlc3Ryb3lcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIGNvZGVzID0ge307XG5cbmZ1bmN0aW9uIGNyZWF0ZUVycm9yVHlwZShjb2RlLCBtZXNzYWdlLCBCYXNlKSB7XG4gIGlmICghQmFzZSkge1xuICAgIEJhc2UgPSBFcnJvcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE1lc3NhZ2UoYXJnMSwgYXJnMiwgYXJnMykge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbWVzc2FnZShhcmcxLCBhcmcyLCBhcmczKTtcbiAgICB9XG4gIH1cblxuICB2YXIgTm9kZUVycm9yID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0Jhc2UpIHtcbiAgICBfaW5oZXJpdHNMb29zZShOb2RlRXJyb3IsIF9CYXNlKTtcblxuICAgIGZ1bmN0aW9uIE5vZGVFcnJvcihhcmcxLCBhcmcyLCBhcmczKSB7XG4gICAgICByZXR1cm4gX0Jhc2UuY2FsbCh0aGlzLCBnZXRNZXNzYWdlKGFyZzEsIGFyZzIsIGFyZzMpKSB8fCB0aGlzO1xuICAgIH1cblxuICAgIHJldHVybiBOb2RlRXJyb3I7XG4gIH0oQmFzZSk7XG5cbiAgTm9kZUVycm9yLnByb3RvdHlwZS5uYW1lID0gQmFzZS5uYW1lO1xuICBOb2RlRXJyb3IucHJvdG90eXBlLmNvZGUgPSBjb2RlO1xuICBjb2Rlc1tjb2RlXSA9IE5vZGVFcnJvcjtcbn0gLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2Jsb2IvdjEwLjguMC9saWIvaW50ZXJuYWwvZXJyb3JzLmpzXG5cblxuZnVuY3Rpb24gb25lT2YoZXhwZWN0ZWQsIHRoaW5nKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGV4cGVjdGVkKSkge1xuICAgIHZhciBsZW4gPSBleHBlY3RlZC5sZW5ndGg7XG4gICAgZXhwZWN0ZWQgPSBleHBlY3RlZC5tYXAoZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiBTdHJpbmcoaSk7XG4gICAgfSk7XG5cbiAgICBpZiAobGVuID4gMikge1xuICAgICAgcmV0dXJuIFwib25lIG9mIFwiLmNvbmNhdCh0aGluZywgXCIgXCIpLmNvbmNhdChleHBlY3RlZC5zbGljZSgwLCBsZW4gLSAxKS5qb2luKCcsICcpLCBcIiwgb3IgXCIpICsgZXhwZWN0ZWRbbGVuIC0gMV07XG4gICAgfSBlbHNlIGlmIChsZW4gPT09IDIpIHtcbiAgICAgIHJldHVybiBcIm9uZSBvZiBcIi5jb25jYXQodGhpbmcsIFwiIFwiKS5jb25jYXQoZXhwZWN0ZWRbMF0sIFwiIG9yIFwiKS5jb25jYXQoZXhwZWN0ZWRbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJvZiBcIi5jb25jYXQodGhpbmcsIFwiIFwiKS5jb25jYXQoZXhwZWN0ZWRbMF0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gXCJvZiBcIi5jb25jYXQodGhpbmcsIFwiIFwiKS5jb25jYXQoU3RyaW5nKGV4cGVjdGVkKSk7XG4gIH1cbn0gLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL3N0YXJ0c1dpdGhcblxuXG5mdW5jdGlvbiBzdGFydHNXaXRoKHN0ciwgc2VhcmNoLCBwb3MpIHtcbiAgcmV0dXJuIHN0ci5zdWJzdHIoIXBvcyB8fCBwb3MgPCAwID8gMCA6ICtwb3MsIHNlYXJjaC5sZW5ndGgpID09PSBzZWFyY2g7XG59IC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9lbmRzV2l0aFxuXG5cbmZ1bmN0aW9uIGVuZHNXaXRoKHN0ciwgc2VhcmNoLCB0aGlzX2xlbikge1xuICBpZiAodGhpc19sZW4gPT09IHVuZGVmaW5lZCB8fCB0aGlzX2xlbiA+IHN0ci5sZW5ndGgpIHtcbiAgICB0aGlzX2xlbiA9IHN0ci5sZW5ndGg7XG4gIH1cblxuICByZXR1cm4gc3RyLnN1YnN0cmluZyh0aGlzX2xlbiAtIHNlYXJjaC5sZW5ndGgsIHRoaXNfbGVuKSA9PT0gc2VhcmNoO1xufSAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvaW5jbHVkZXNcblxuXG5mdW5jdGlvbiBpbmNsdWRlcyhzdHIsIHNlYXJjaCwgc3RhcnQpIHtcbiAgaWYgKHR5cGVvZiBzdGFydCAhPT0gJ251bWJlcicpIHtcbiAgICBzdGFydCA9IDA7XG4gIH1cblxuICBpZiAoc3RhcnQgKyBzZWFyY2gubGVuZ3RoID4gc3RyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyLmluZGV4T2Yoc2VhcmNoLCBzdGFydCkgIT09IC0xO1xuICB9XG59XG5cbmNyZWF0ZUVycm9yVHlwZSgnRVJSX0lOVkFMSURfT1BUX1ZBTFVFJywgZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiAnVGhlIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiIGlzIGludmFsaWQgZm9yIG9wdGlvbiBcIicgKyBuYW1lICsgJ1wiJztcbn0sIFR5cGVFcnJvcik7XG5jcmVhdGVFcnJvclR5cGUoJ0VSUl9JTlZBTElEX0FSR19UWVBFJywgZnVuY3Rpb24gKG5hbWUsIGV4cGVjdGVkLCBhY3R1YWwpIHtcbiAgLy8gZGV0ZXJtaW5lcjogJ211c3QgYmUnIG9yICdtdXN0IG5vdCBiZSdcbiAgdmFyIGRldGVybWluZXI7XG5cbiAgaWYgKHR5cGVvZiBleHBlY3RlZCA9PT0gJ3N0cmluZycgJiYgc3RhcnRzV2l0aChleHBlY3RlZCwgJ25vdCAnKSkge1xuICAgIGRldGVybWluZXIgPSAnbXVzdCBub3QgYmUnO1xuICAgIGV4cGVjdGVkID0gZXhwZWN0ZWQucmVwbGFjZSgvXm5vdCAvLCAnJyk7XG4gIH0gZWxzZSB7XG4gICAgZGV0ZXJtaW5lciA9ICdtdXN0IGJlJztcbiAgfVxuXG4gIHZhciBtc2c7XG5cbiAgaWYgKGVuZHNXaXRoKG5hbWUsICcgYXJndW1lbnQnKSkge1xuICAgIC8vIEZvciBjYXNlcyBsaWtlICdmaXJzdCBhcmd1bWVudCdcbiAgICBtc2cgPSBcIlRoZSBcIi5jb25jYXQobmFtZSwgXCIgXCIpLmNvbmNhdChkZXRlcm1pbmVyLCBcIiBcIikuY29uY2F0KG9uZU9mKGV4cGVjdGVkLCAndHlwZScpKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdHlwZSA9IGluY2x1ZGVzKG5hbWUsICcuJykgPyAncHJvcGVydHknIDogJ2FyZ3VtZW50JztcbiAgICBtc2cgPSBcIlRoZSBcXFwiXCIuY29uY2F0KG5hbWUsIFwiXFxcIiBcIikuY29uY2F0KHR5cGUsIFwiIFwiKS5jb25jYXQoZGV0ZXJtaW5lciwgXCIgXCIpLmNvbmNhdChvbmVPZihleHBlY3RlZCwgJ3R5cGUnKSk7XG4gIH1cblxuICBtc2cgKz0gXCIuIFJlY2VpdmVkIHR5cGUgXCIuY29uY2F0KHR5cGVvZiBhY3R1YWwpO1xuICByZXR1cm4gbXNnO1xufSwgVHlwZUVycm9yKTtcbmNyZWF0ZUVycm9yVHlwZSgnRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRicsICdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpO1xuY3JlYXRlRXJyb3JUeXBlKCdFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCcsIGZ1bmN0aW9uIChuYW1lKSB7XG4gIHJldHVybiAnVGhlICcgKyBuYW1lICsgJyBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkJztcbn0pO1xuY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRScsICdQcmVtYXR1cmUgY2xvc2UnKTtcbmNyZWF0ZUVycm9yVHlwZSgnRVJSX1NUUkVBTV9ERVNUUk9ZRUQnLCBmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gJ0Nhbm5vdCBjYWxsICcgKyBuYW1lICsgJyBhZnRlciBhIHN0cmVhbSB3YXMgZGVzdHJveWVkJztcbn0pO1xuY3JlYXRlRXJyb3JUeXBlKCdFUlJfTVVMVElQTEVfQ0FMTEJBQ0snLCAnQ2FsbGJhY2sgY2FsbGVkIG11bHRpcGxlIHRpbWVzJyk7XG5jcmVhdGVFcnJvclR5cGUoJ0VSUl9TVFJFQU1fQ0FOTk9UX1BJUEUnLCAnQ2Fubm90IHBpcGUsIG5vdCByZWFkYWJsZScpO1xuY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORCcsICd3cml0ZSBhZnRlciBlbmQnKTtcbmNyZWF0ZUVycm9yVHlwZSgnRVJSX1NUUkVBTV9OVUxMX1ZBTFVFUycsICdNYXkgbm90IHdyaXRlIG51bGwgdmFsdWVzIHRvIHN0cmVhbScsIFR5cGVFcnJvcik7XG5jcmVhdGVFcnJvclR5cGUoJ0VSUl9VTktOT1dOX0VOQ09ESU5HJywgZnVuY3Rpb24gKGFyZykge1xuICByZXR1cm4gJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBhcmc7XG59LCBUeXBlRXJyb3IpO1xuY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX1VOU0hJRlRfQUZURVJfRU5EX0VWRU5UJywgJ3N0cmVhbS51bnNoaWZ0KCkgYWZ0ZXIgZW5kIGV2ZW50Jyk7XG5tb2R1bGUuZXhwb3J0cy5jb2RlcyA9IGNvZGVzO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgRVJSX0lOVkFMSURfT1BUX1ZBTFVFID0gcmVxdWlyZSgnLi4vLi4vLi4vZXJyb3JzJykuY29kZXMuRVJSX0lOVkFMSURfT1BUX1ZBTFVFO1xuXG5mdW5jdGlvbiBoaWdoV2F0ZXJNYXJrRnJvbShvcHRpb25zLCBpc0R1cGxleCwgZHVwbGV4S2V5KSB7XG4gIHJldHVybiBvcHRpb25zLmhpZ2hXYXRlck1hcmsgIT0gbnVsbCA/IG9wdGlvbnMuaGlnaFdhdGVyTWFyayA6IGlzRHVwbGV4ID8gb3B0aW9uc1tkdXBsZXhLZXldIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0SGlnaFdhdGVyTWFyayhzdGF0ZSwgb3B0aW9ucywgZHVwbGV4S2V5LCBpc0R1cGxleCkge1xuICB2YXIgaHdtID0gaGlnaFdhdGVyTWFya0Zyb20ob3B0aW9ucywgaXNEdXBsZXgsIGR1cGxleEtleSk7XG5cbiAgaWYgKGh3bSAhPSBudWxsKSB7XG4gICAgaWYgKCEoaXNGaW5pdGUoaHdtKSAmJiBNYXRoLmZsb29yKGh3bSkgPT09IGh3bSkgfHwgaHdtIDwgMCkge1xuICAgICAgdmFyIG5hbWUgPSBpc0R1cGxleCA/IGR1cGxleEtleSA6ICdoaWdoV2F0ZXJNYXJrJztcbiAgICAgIHRocm93IG5ldyBFUlJfSU5WQUxJRF9PUFRfVkFMVUUobmFtZSwgaHdtKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTWF0aC5mbG9vcihod20pO1xuICB9IC8vIERlZmF1bHQgdmFsdWVcblxuXG4gIHJldHVybiBzdGF0ZS5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRIaWdoV2F0ZXJNYXJrOiBnZXRIaWdoV2F0ZXJNYXJrXG59OyIsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm9kZS9uby1kZXByZWNhdGVkLWFwaSAqL1xudmFyIGJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpXG52YXIgQnVmZmVyID0gYnVmZmVyLkJ1ZmZlclxuXG4vLyBhbHRlcm5hdGl2ZSB0byB1c2luZyBPYmplY3Qua2V5cyBmb3Igb2xkIGJyb3dzZXJzXG5mdW5jdGlvbiBjb3B5UHJvcHMgKHNyYywgZHN0KSB7XG4gIGZvciAodmFyIGtleSBpbiBzcmMpIHtcbiAgICBkc3Rba2V5XSA9IHNyY1trZXldXG4gIH1cbn1cbmlmIChCdWZmZXIuZnJvbSAmJiBCdWZmZXIuYWxsb2MgJiYgQnVmZmVyLmFsbG9jVW5zYWZlICYmIEJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBidWZmZXJcbn0gZWxzZSB7XG4gIC8vIENvcHkgcHJvcGVydGllcyBmcm9tIHJlcXVpcmUoJ2J1ZmZlcicpXG4gIGNvcHlQcm9wcyhidWZmZXIsIGV4cG9ydHMpXG4gIGV4cG9ydHMuQnVmZmVyID0gU2FmZUJ1ZmZlclxufVxuXG5mdW5jdGlvbiBTYWZlQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG4vLyBDb3B5IHN0YXRpYyBtZXRob2RzIGZyb20gQnVmZmVyXG5jb3B5UHJvcHMoQnVmZmVyLCBTYWZlQnVmZmVyKVxuXG5TYWZlQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHJldHVybiBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cblNhZmVCdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHZhciBidWYgPSBCdWZmZXIoc2l6ZSlcbiAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSB7XG4gICAgICBidWYuZmlsbChmaWxsLCBlbmNvZGluZylcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmLmZpbGwoZmlsbClcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYnVmLmZpbGwoMClcbiAgfVxuICByZXR1cm4gYnVmXG59XG5cblNhZmVCdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlcihzaXplKVxufVxuXG5TYWZlQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfVxuICByZXR1cm4gYnVmZmVyLlNsb3dCdWZmZXIoc2l6ZSlcbn1cbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbi8qPHJlcGxhY2VtZW50PiovXG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgaXNFbmNvZGluZyA9IEJ1ZmZlci5pc0VuY29kaW5nIHx8IGZ1bmN0aW9uIChlbmNvZGluZykge1xuICBlbmNvZGluZyA9ICcnICsgZW5jb2Rpbmc7XG4gIHN3aXRjaCAoZW5jb2RpbmcgJiYgZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6Y2FzZSAndXRmOCc6Y2FzZSAndXRmLTgnOmNhc2UgJ2FzY2lpJzpjYXNlICdiaW5hcnknOmNhc2UgJ2Jhc2U2NCc6Y2FzZSAndWNzMic6Y2FzZSAndWNzLTInOmNhc2UgJ3V0ZjE2bGUnOmNhc2UgJ3V0Zi0xNmxlJzpjYXNlICdyYXcnOlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuZnVuY3Rpb24gX25vcm1hbGl6ZUVuY29kaW5nKGVuYykge1xuICBpZiAoIWVuYykgcmV0dXJuICd1dGY4JztcbiAgdmFyIHJldHJpZWQ7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmMpIHtcbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gJ3V0ZjgnO1xuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuICd1dGYxNmxlJztcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gJ2xhdGluMSc7XG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGVuYztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChyZXRyaWVkKSByZXR1cm47IC8vIHVuZGVmaW5lZFxuICAgICAgICBlbmMgPSAoJycgKyBlbmMpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHJpZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufTtcblxuLy8gRG8gbm90IGNhY2hlIGBCdWZmZXIuaXNFbmNvZGluZ2Agd2hlbiBjaGVja2luZyBlbmNvZGluZyBuYW1lcyBhcyBzb21lXG4vLyBtb2R1bGVzIG1vbmtleS1wYXRjaCBpdCB0byBzdXBwb3J0IGFkZGl0aW9uYWwgZW5jb2RpbmdzXG5mdW5jdGlvbiBub3JtYWxpemVFbmNvZGluZyhlbmMpIHtcbiAgdmFyIG5lbmMgPSBfbm9ybWFsaXplRW5jb2RpbmcoZW5jKTtcbiAgaWYgKHR5cGVvZiBuZW5jICE9PSAnc3RyaW5nJyAmJiAoQnVmZmVyLmlzRW5jb2RpbmcgPT09IGlzRW5jb2RpbmcgfHwgIWlzRW5jb2RpbmcoZW5jKSkpIHRocm93IG5ldyBFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuYyk7XG4gIHJldHVybiBuZW5jIHx8IGVuYztcbn1cblxuLy8gU3RyaW5nRGVjb2RlciBwcm92aWRlcyBhbiBpbnRlcmZhY2UgZm9yIGVmZmljaWVudGx5IHNwbGl0dGluZyBhIHNlcmllcyBvZlxuLy8gYnVmZmVycyBpbnRvIGEgc2VyaWVzIG9mIEpTIHN0cmluZ3Mgd2l0aG91dCBicmVha2luZyBhcGFydCBtdWx0aS1ieXRlXG4vLyBjaGFyYWN0ZXJzLlxuZXhwb3J0cy5TdHJpbmdEZWNvZGVyID0gU3RyaW5nRGVjb2RlcjtcbmZ1bmN0aW9uIFN0cmluZ0RlY29kZXIoZW5jb2RpbmcpIHtcbiAgdGhpcy5lbmNvZGluZyA9IG5vcm1hbGl6ZUVuY29kaW5nKGVuY29kaW5nKTtcbiAgdmFyIG5iO1xuICBzd2l0Y2ggKHRoaXMuZW5jb2RpbmcpIHtcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIHRoaXMudGV4dCA9IHV0ZjE2VGV4dDtcbiAgICAgIHRoaXMuZW5kID0gdXRmMTZFbmQ7XG4gICAgICBuYiA9IDQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlICd1dGY4JzpcbiAgICAgIHRoaXMuZmlsbExhc3QgPSB1dGY4RmlsbExhc3Q7XG4gICAgICBuYiA9IDQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgdGhpcy50ZXh0ID0gYmFzZTY0VGV4dDtcbiAgICAgIHRoaXMuZW5kID0gYmFzZTY0RW5kO1xuICAgICAgbmIgPSAzO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRoaXMud3JpdGUgPSBzaW1wbGVXcml0ZTtcbiAgICAgIHRoaXMuZW5kID0gc2ltcGxlRW5kO1xuICAgICAgcmV0dXJuO1xuICB9XG4gIHRoaXMubGFzdE5lZWQgPSAwO1xuICB0aGlzLmxhc3RUb3RhbCA9IDA7XG4gIHRoaXMubGFzdENoYXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobmIpO1xufVxuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChidWYpIHtcbiAgaWYgKGJ1Zi5sZW5ndGggPT09IDApIHJldHVybiAnJztcbiAgdmFyIHI7XG4gIHZhciBpO1xuICBpZiAodGhpcy5sYXN0TmVlZCkge1xuICAgIHIgPSB0aGlzLmZpbGxMYXN0KGJ1Zik7XG4gICAgaWYgKHIgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnO1xuICAgIGkgPSB0aGlzLmxhc3ROZWVkO1xuICAgIHRoaXMubGFzdE5lZWQgPSAwO1xuICB9IGVsc2Uge1xuICAgIGkgPSAwO1xuICB9XG4gIGlmIChpIDwgYnVmLmxlbmd0aCkgcmV0dXJuIHIgPyByICsgdGhpcy50ZXh0KGJ1ZiwgaSkgOiB0aGlzLnRleHQoYnVmLCBpKTtcbiAgcmV0dXJuIHIgfHwgJyc7XG59O1xuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQgPSB1dGY4RW5kO1xuXG4vLyBSZXR1cm5zIG9ubHkgY29tcGxldGUgY2hhcmFjdGVycyBpbiBhIEJ1ZmZlclxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUudGV4dCA9IHV0ZjhUZXh0O1xuXG4vLyBBdHRlbXB0cyB0byBjb21wbGV0ZSBhIHBhcnRpYWwgbm9uLVVURi04IGNoYXJhY3RlciB1c2luZyBieXRlcyBmcm9tIGEgQnVmZmVyXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5maWxsTGFzdCA9IGZ1bmN0aW9uIChidWYpIHtcbiAgaWYgKHRoaXMubGFzdE5lZWQgPD0gYnVmLmxlbmd0aCkge1xuICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgdGhpcy5sYXN0TmVlZCk7XG4gICAgcmV0dXJuIHRoaXMubGFzdENoYXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywgMCwgdGhpcy5sYXN0VG90YWwpO1xuICB9XG4gIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgYnVmLmxlbmd0aCk7XG4gIHRoaXMubGFzdE5lZWQgLT0gYnVmLmxlbmd0aDtcbn07XG5cbi8vIENoZWNrcyB0aGUgdHlwZSBvZiBhIFVURi04IGJ5dGUsIHdoZXRoZXIgaXQncyBBU0NJSSwgYSBsZWFkaW5nIGJ5dGUsIG9yIGFcbi8vIGNvbnRpbnVhdGlvbiBieXRlLiBJZiBhbiBpbnZhbGlkIGJ5dGUgaXMgZGV0ZWN0ZWQsIC0yIGlzIHJldHVybmVkLlxuZnVuY3Rpb24gdXRmOENoZWNrQnl0ZShieXRlKSB7XG4gIGlmIChieXRlIDw9IDB4N0YpIHJldHVybiAwO2Vsc2UgaWYgKGJ5dGUgPj4gNSA9PT0gMHgwNikgcmV0dXJuIDI7ZWxzZSBpZiAoYnl0ZSA+PiA0ID09PSAweDBFKSByZXR1cm4gMztlbHNlIGlmIChieXRlID4+IDMgPT09IDB4MUUpIHJldHVybiA0O1xuICByZXR1cm4gYnl0ZSA+PiA2ID09PSAweDAyID8gLTEgOiAtMjtcbn1cblxuLy8gQ2hlY2tzIGF0IG1vc3QgMyBieXRlcyBhdCB0aGUgZW5kIG9mIGEgQnVmZmVyIGluIG9yZGVyIHRvIGRldGVjdCBhblxuLy8gaW5jb21wbGV0ZSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3Rlci4gVGhlIHRvdGFsIG51bWJlciBvZiBieXRlcyAoMiwgMywgb3IgNClcbi8vIG5lZWRlZCB0byBjb21wbGV0ZSB0aGUgVVRGLTggY2hhcmFjdGVyIChpZiBhcHBsaWNhYmxlKSBhcmUgcmV0dXJuZWQuXG5mdW5jdGlvbiB1dGY4Q2hlY2tJbmNvbXBsZXRlKHNlbGYsIGJ1ZiwgaSkge1xuICB2YXIgaiA9IGJ1Zi5sZW5ndGggLSAxO1xuICBpZiAoaiA8IGkpIHJldHVybiAwO1xuICB2YXIgbmIgPSB1dGY4Q2hlY2tCeXRlKGJ1ZltqXSk7XG4gIGlmIChuYiA+PSAwKSB7XG4gICAgaWYgKG5iID4gMCkgc2VsZi5sYXN0TmVlZCA9IG5iIC0gMTtcbiAgICByZXR1cm4gbmI7XG4gIH1cbiAgaWYgKC0taiA8IGkgfHwgbmIgPT09IC0yKSByZXR1cm4gMDtcbiAgbmIgPSB1dGY4Q2hlY2tCeXRlKGJ1ZltqXSk7XG4gIGlmIChuYiA+PSAwKSB7XG4gICAgaWYgKG5iID4gMCkgc2VsZi5sYXN0TmVlZCA9IG5iIC0gMjtcbiAgICByZXR1cm4gbmI7XG4gIH1cbiAgaWYgKC0taiA8IGkgfHwgbmIgPT09IC0yKSByZXR1cm4gMDtcbiAgbmIgPSB1dGY4Q2hlY2tCeXRlKGJ1ZltqXSk7XG4gIGlmIChuYiA+PSAwKSB7XG4gICAgaWYgKG5iID4gMCkge1xuICAgICAgaWYgKG5iID09PSAyKSBuYiA9IDA7ZWxzZSBzZWxmLmxhc3ROZWVkID0gbmIgLSAzO1xuICAgIH1cbiAgICByZXR1cm4gbmI7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5cbi8vIFZhbGlkYXRlcyBhcyBtYW55IGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3RlciBhc1xuLy8gbmVlZGVkIG9yIGFyZSBhdmFpbGFibGUuIElmIHdlIHNlZSBhIG5vbi1jb250aW51YXRpb24gYnl0ZSB3aGVyZSB3ZSBleHBlY3Rcbi8vIG9uZSwgd2UgXCJyZXBsYWNlXCIgdGhlIHZhbGlkYXRlZCBjb250aW51YXRpb24gYnl0ZXMgd2UndmUgc2VlbiBzbyBmYXIgd2l0aFxuLy8gYSBzaW5nbGUgVVRGLTggcmVwbGFjZW1lbnQgY2hhcmFjdGVyICgnXFx1ZmZmZCcpLCB0byBtYXRjaCB2OCdzIFVURi04IGRlY29kaW5nXG4vLyBiZWhhdmlvci4gVGhlIGNvbnRpbnVhdGlvbiBieXRlIGNoZWNrIGlzIGluY2x1ZGVkIHRocmVlIHRpbWVzIGluIHRoZSBjYXNlXG4vLyB3aGVyZSBhbGwgb2YgdGhlIGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBjaGFyYWN0ZXIgZXhpc3QgaW4gdGhlIHNhbWUgYnVmZmVyLlxuLy8gSXQgaXMgYWxzbyBkb25lIHRoaXMgd2F5IGFzIGEgc2xpZ2h0IHBlcmZvcm1hbmNlIGluY3JlYXNlIGluc3RlYWQgb2YgdXNpbmcgYVxuLy8gbG9vcC5cbmZ1bmN0aW9uIHV0ZjhDaGVja0V4dHJhQnl0ZXMoc2VsZiwgYnVmLCBwKSB7XG4gIGlmICgoYnVmWzBdICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICBzZWxmLmxhc3ROZWVkID0gMDtcbiAgICByZXR1cm4gJ1xcdWZmZmQnO1xuICB9XG4gIGlmIChzZWxmLmxhc3ROZWVkID4gMSAmJiBidWYubGVuZ3RoID4gMSkge1xuICAgIGlmICgoYnVmWzFdICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgIHNlbGYubGFzdE5lZWQgPSAxO1xuICAgICAgcmV0dXJuICdcXHVmZmZkJztcbiAgICB9XG4gICAgaWYgKHNlbGYubGFzdE5lZWQgPiAyICYmIGJ1Zi5sZW5ndGggPiAyKSB7XG4gICAgICBpZiAoKGJ1ZlsyXSAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgIHNlbGYubGFzdE5lZWQgPSAyO1xuICAgICAgICByZXR1cm4gJ1xcdWZmZmQnO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBBdHRlbXB0cyB0byBjb21wbGV0ZSBhIG11bHRpLWJ5dGUgVVRGLTggY2hhcmFjdGVyIHVzaW5nIGJ5dGVzIGZyb20gYSBCdWZmZXIuXG5mdW5jdGlvbiB1dGY4RmlsbExhc3QoYnVmKSB7XG4gIHZhciBwID0gdGhpcy5sYXN0VG90YWwgLSB0aGlzLmxhc3ROZWVkO1xuICB2YXIgciA9IHV0ZjhDaGVja0V4dHJhQnl0ZXModGhpcywgYnVmLCBwKTtcbiAgaWYgKHIgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHI7XG4gIGlmICh0aGlzLmxhc3ROZWVkIDw9IGJ1Zi5sZW5ndGgpIHtcbiAgICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCBwLCAwLCB0aGlzLmxhc3ROZWVkKTtcbiAgICByZXR1cm4gdGhpcy5sYXN0Q2hhci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCB0aGlzLmxhc3RUb3RhbCk7XG4gIH1cbiAgYnVmLmNvcHkodGhpcy5sYXN0Q2hhciwgcCwgMCwgYnVmLmxlbmd0aCk7XG4gIHRoaXMubGFzdE5lZWQgLT0gYnVmLmxlbmd0aDtcbn1cblxuLy8gUmV0dXJucyBhbGwgY29tcGxldGUgVVRGLTggY2hhcmFjdGVycyBpbiBhIEJ1ZmZlci4gSWYgdGhlIEJ1ZmZlciBlbmRlZCBvbiBhXG4vLyBwYXJ0aWFsIGNoYXJhY3RlciwgdGhlIGNoYXJhY3RlcidzIGJ5dGVzIGFyZSBidWZmZXJlZCB1bnRpbCB0aGUgcmVxdWlyZWRcbi8vIG51bWJlciBvZiBieXRlcyBhcmUgYXZhaWxhYmxlLlxuZnVuY3Rpb24gdXRmOFRleHQoYnVmLCBpKSB7XG4gIHZhciB0b3RhbCA9IHV0ZjhDaGVja0luY29tcGxldGUodGhpcywgYnVmLCBpKTtcbiAgaWYgKCF0aGlzLmxhc3ROZWVkKSByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGY4JywgaSk7XG4gIHRoaXMubGFzdFRvdGFsID0gdG90YWw7XG4gIHZhciBlbmQgPSBidWYubGVuZ3RoIC0gKHRvdGFsIC0gdGhpcy5sYXN0TmVlZCk7XG4gIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIDAsIGVuZCk7XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ3V0ZjgnLCBpLCBlbmQpO1xufVxuXG4vLyBGb3IgVVRGLTgsIGEgcmVwbGFjZW1lbnQgY2hhcmFjdGVyIGlzIGFkZGVkIHdoZW4gZW5kaW5nIG9uIGEgcGFydGlhbFxuLy8gY2hhcmFjdGVyLlxuZnVuY3Rpb24gdXRmOEVuZChidWYpIHtcbiAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xuICBpZiAodGhpcy5sYXN0TmVlZCkgcmV0dXJuIHIgKyAnXFx1ZmZmZCc7XG4gIHJldHVybiByO1xufVxuXG4vLyBVVEYtMTZMRSB0eXBpY2FsbHkgbmVlZHMgdHdvIGJ5dGVzIHBlciBjaGFyYWN0ZXIsIGJ1dCBldmVuIGlmIHdlIGhhdmUgYW4gZXZlblxuLy8gbnVtYmVyIG9mIGJ5dGVzIGF2YWlsYWJsZSwgd2UgbmVlZCB0byBjaGVjayBpZiB3ZSBlbmQgb24gYSBsZWFkaW5nL2hpZ2hcbi8vIHN1cnJvZ2F0ZS4gSW4gdGhhdCBjYXNlLCB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBuZXh0IHR3byBieXRlcyBpbiBvcmRlciB0b1xuLy8gZGVjb2RlIHRoZSBsYXN0IGNoYXJhY3RlciBwcm9wZXJseS5cbmZ1bmN0aW9uIHV0ZjE2VGV4dChidWYsIGkpIHtcbiAgaWYgKChidWYubGVuZ3RoIC0gaSkgJSAyID09PSAwKSB7XG4gICAgdmFyIHIgPSBidWYudG9TdHJpbmcoJ3V0ZjE2bGUnLCBpKTtcbiAgICBpZiAocikge1xuICAgICAgdmFyIGMgPSByLmNoYXJDb2RlQXQoci5sZW5ndGggLSAxKTtcbiAgICAgIGlmIChjID49IDB4RDgwMCAmJiBjIDw9IDB4REJGRikge1xuICAgICAgICB0aGlzLmxhc3ROZWVkID0gMjtcbiAgICAgICAgdGhpcy5sYXN0VG90YWwgPSA0O1xuICAgICAgICB0aGlzLmxhc3RDaGFyWzBdID0gYnVmW2J1Zi5sZW5ndGggLSAyXTtcbiAgICAgICAgdGhpcy5sYXN0Q2hhclsxXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiByLnNsaWNlKDAsIC0xKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH1cbiAgdGhpcy5sYXN0TmVlZCA9IDE7XG4gIHRoaXMubGFzdFRvdGFsID0gMjtcbiAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ3V0ZjE2bGUnLCBpLCBidWYubGVuZ3RoIC0gMSk7XG59XG5cbi8vIEZvciBVVEYtMTZMRSB3ZSBkbyBub3QgZXhwbGljaXRseSBhcHBlbmQgc3BlY2lhbCByZXBsYWNlbWVudCBjaGFyYWN0ZXJzIGlmIHdlXG4vLyBlbmQgb24gYSBwYXJ0aWFsIGNoYXJhY3Rlciwgd2Ugc2ltcGx5IGxldCB2OCBoYW5kbGUgdGhhdC5cbmZ1bmN0aW9uIHV0ZjE2RW5kKGJ1Zikge1xuICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7XG4gIGlmICh0aGlzLmxhc3ROZWVkKSB7XG4gICAgdmFyIGVuZCA9IHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZDtcbiAgICByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoJ3V0ZjE2bGUnLCAwLCBlbmQpO1xuICB9XG4gIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiBiYXNlNjRUZXh0KGJ1ZiwgaSkge1xuICB2YXIgbiA9IChidWYubGVuZ3RoIC0gaSkgJSAzO1xuICBpZiAobiA9PT0gMCkgcmV0dXJuIGJ1Zi50b1N0cmluZygnYmFzZTY0JywgaSk7XG4gIHRoaXMubGFzdE5lZWQgPSAzIC0gbjtcbiAgdGhpcy5sYXN0VG90YWwgPSAzO1xuICBpZiAobiA9PT0gMSkge1xuICAgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDJdO1xuICAgIHRoaXMubGFzdENoYXJbMV0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ2Jhc2U2NCcsIGksIGJ1Zi5sZW5ndGggLSBuKTtcbn1cblxuZnVuY3Rpb24gYmFzZTY0RW5kKGJ1Zikge1xuICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7XG4gIGlmICh0aGlzLmxhc3ROZWVkKSByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoJ2Jhc2U2NCcsIDAsIDMgLSB0aGlzLmxhc3ROZWVkKTtcbiAgcmV0dXJuIHI7XG59XG5cbi8vIFBhc3MgYnl0ZXMgb24gdGhyb3VnaCBmb3Igc2luZ2xlLWJ5dGUgZW5jb2RpbmdzIChlLmcuIGFzY2lpLCBsYXRpbjEsIGhleClcbmZ1bmN0aW9uIHNpbXBsZVdyaXRlKGJ1Zikge1xuICByZXR1cm4gYnVmLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO1xufVxuXG5mdW5jdGlvbiBzaW1wbGVFbmQoYnVmKSB7XG4gIHJldHVybiBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xufSIsIi8vIFBvcnRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9tYWZpbnRvc2gvZW5kLW9mLXN0cmVhbSB3aXRoXG4vLyBwZXJtaXNzaW9uIGZyb20gdGhlIGF1dGhvciwgTWF0aGlhcyBCdXVzIChAbWFmaW50b3NoKS5cbid1c2Ugc3RyaWN0JztcblxudmFyIEVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFID0gcmVxdWlyZSgnLi4vLi4vLi4vZXJyb3JzJykuY29kZXMuRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0U7XG5cbmZ1bmN0aW9uIG9uY2UoY2FsbGJhY2spIHtcbiAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYWxsZWQpIHJldHVybjtcbiAgICBjYWxsZWQgPSB0cnVlO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gaXNSZXF1ZXN0KHN0cmVhbSkge1xuICByZXR1cm4gc3RyZWFtLnNldEhlYWRlciAmJiB0eXBlb2Ygc3RyZWFtLmFib3J0ID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBlb3Moc3RyZWFtLCBvcHRzLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbicpIHJldHVybiBlb3Moc3RyZWFtLCBudWxsLCBvcHRzKTtcbiAgaWYgKCFvcHRzKSBvcHRzID0ge307XG4gIGNhbGxiYWNrID0gb25jZShjYWxsYmFjayB8fCBub29wKTtcbiAgdmFyIHJlYWRhYmxlID0gb3B0cy5yZWFkYWJsZSB8fCBvcHRzLnJlYWRhYmxlICE9PSBmYWxzZSAmJiBzdHJlYW0ucmVhZGFibGU7XG4gIHZhciB3cml0YWJsZSA9IG9wdHMud3JpdGFibGUgfHwgb3B0cy53cml0YWJsZSAhPT0gZmFsc2UgJiYgc3RyZWFtLndyaXRhYmxlO1xuXG4gIHZhciBvbmxlZ2FjeWZpbmlzaCA9IGZ1bmN0aW9uIG9ubGVnYWN5ZmluaXNoKCkge1xuICAgIGlmICghc3RyZWFtLndyaXRhYmxlKSBvbmZpbmlzaCgpO1xuICB9O1xuXG4gIHZhciB3cml0YWJsZUVuZGVkID0gc3RyZWFtLl93cml0YWJsZVN0YXRlICYmIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZDtcblxuICB2YXIgb25maW5pc2ggPSBmdW5jdGlvbiBvbmZpbmlzaCgpIHtcbiAgICB3cml0YWJsZSA9IGZhbHNlO1xuICAgIHdyaXRhYmxlRW5kZWQgPSB0cnVlO1xuICAgIGlmICghcmVhZGFibGUpIGNhbGxiYWNrLmNhbGwoc3RyZWFtKTtcbiAgfTtcblxuICB2YXIgcmVhZGFibGVFbmRlZCA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZSAmJiBzdHJlYW0uX3JlYWRhYmxlU3RhdGUuZW5kRW1pdHRlZDtcblxuICB2YXIgb25lbmQgPSBmdW5jdGlvbiBvbmVuZCgpIHtcbiAgICByZWFkYWJsZSA9IGZhbHNlO1xuICAgIHJlYWRhYmxlRW5kZWQgPSB0cnVlO1xuICAgIGlmICghd3JpdGFibGUpIGNhbGxiYWNrLmNhbGwoc3RyZWFtKTtcbiAgfTtcblxuICB2YXIgb25lcnJvciA9IGZ1bmN0aW9uIG9uZXJyb3IoZXJyKSB7XG4gICAgY2FsbGJhY2suY2FsbChzdHJlYW0sIGVycik7XG4gIH07XG5cbiAgdmFyIG9uY2xvc2UgPSBmdW5jdGlvbiBvbmNsb3NlKCkge1xuICAgIHZhciBlcnI7XG5cbiAgICBpZiAocmVhZGFibGUgJiYgIXJlYWRhYmxlRW5kZWQpIHtcbiAgICAgIGlmICghc3RyZWFtLl9yZWFkYWJsZVN0YXRlIHx8ICFzdHJlYW0uX3JlYWRhYmxlU3RhdGUuZW5kZWQpIGVyciA9IG5ldyBFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRSgpO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwoc3RyZWFtLCBlcnIpO1xuICAgIH1cblxuICAgIGlmICh3cml0YWJsZSAmJiAhd3JpdGFibGVFbmRlZCkge1xuICAgICAgaWYgKCFzdHJlYW0uX3dyaXRhYmxlU3RhdGUgfHwgIXN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lbmRlZCkgZXJyID0gbmV3IEVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFKCk7XG4gICAgICByZXR1cm4gY2FsbGJhY2suY2FsbChzdHJlYW0sIGVycik7XG4gICAgfVxuICB9O1xuXG4gIHZhciBvbnJlcXVlc3QgPSBmdW5jdGlvbiBvbnJlcXVlc3QoKSB7XG4gICAgc3RyZWFtLnJlcS5vbignZmluaXNoJywgb25maW5pc2gpO1xuICB9O1xuXG4gIGlmIChpc1JlcXVlc3Qoc3RyZWFtKSkge1xuICAgIHN0cmVhbS5vbignY29tcGxldGUnLCBvbmZpbmlzaCk7XG4gICAgc3RyZWFtLm9uKCdhYm9ydCcsIG9uY2xvc2UpO1xuICAgIGlmIChzdHJlYW0ucmVxKSBvbnJlcXVlc3QoKTtlbHNlIHN0cmVhbS5vbigncmVxdWVzdCcsIG9ucmVxdWVzdCk7XG4gIH0gZWxzZSBpZiAod3JpdGFibGUgJiYgIXN0cmVhbS5fd3JpdGFibGVTdGF0ZSkge1xuICAgIC8vIGxlZ2FjeSBzdHJlYW1zXG4gICAgc3RyZWFtLm9uKCdlbmQnLCBvbmxlZ2FjeWZpbmlzaCk7XG4gICAgc3RyZWFtLm9uKCdjbG9zZScsIG9ubGVnYWN5ZmluaXNoKTtcbiAgfVxuXG4gIHN0cmVhbS5vbignZW5kJywgb25lbmQpO1xuICBzdHJlYW0ub24oJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgaWYgKG9wdHMuZXJyb3IgIT09IGZhbHNlKSBzdHJlYW0ub24oJ2Vycm9yJywgb25lcnJvcik7XG4gIHN0cmVhbS5vbignY2xvc2UnLCBvbmNsb3NlKTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2NvbXBsZXRlJywgb25maW5pc2gpO1xuICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignYWJvcnQnLCBvbmNsb3NlKTtcbiAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ3JlcXVlc3QnLCBvbnJlcXVlc3QpO1xuICAgIGlmIChzdHJlYW0ucmVxKSBzdHJlYW0ucmVxLnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG4gICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmxlZ2FjeWZpbmlzaCk7XG4gICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9ubGVnYWN5ZmluaXNoKTtcbiAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTtcbiAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVvczsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfT2JqZWN0JHNldFByb3RvdHlwZU87XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBmaW5pc2hlZCA9IHJlcXVpcmUoJy4vZW5kLW9mLXN0cmVhbScpO1xuXG52YXIga0xhc3RSZXNvbHZlID0gU3ltYm9sKCdsYXN0UmVzb2x2ZScpO1xudmFyIGtMYXN0UmVqZWN0ID0gU3ltYm9sKCdsYXN0UmVqZWN0Jyk7XG52YXIga0Vycm9yID0gU3ltYm9sKCdlcnJvcicpO1xudmFyIGtFbmRlZCA9IFN5bWJvbCgnZW5kZWQnKTtcbnZhciBrTGFzdFByb21pc2UgPSBTeW1ib2woJ2xhc3RQcm9taXNlJyk7XG52YXIga0hhbmRsZVByb21pc2UgPSBTeW1ib2woJ2hhbmRsZVByb21pc2UnKTtcbnZhciBrU3RyZWFtID0gU3ltYm9sKCdzdHJlYW0nKTtcblxuZnVuY3Rpb24gY3JlYXRlSXRlclJlc3VsdCh2YWx1ZSwgZG9uZSkge1xuICByZXR1cm4ge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBkb25lOiBkb25lXG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlYWRBbmRSZXNvbHZlKGl0ZXIpIHtcbiAgdmFyIHJlc29sdmUgPSBpdGVyW2tMYXN0UmVzb2x2ZV07XG5cbiAgaWYgKHJlc29sdmUgIT09IG51bGwpIHtcbiAgICB2YXIgZGF0YSA9IGl0ZXJba1N0cmVhbV0ucmVhZCgpOyAvLyB3ZSBkZWZlciBpZiBkYXRhIGlzIG51bGxcbiAgICAvLyB3ZSBjYW4gYmUgZXhwZWN0aW5nIGVpdGhlciAnZW5kJyBvclxuICAgIC8vICdlcnJvcidcblxuICAgIGlmIChkYXRhICE9PSBudWxsKSB7XG4gICAgICBpdGVyW2tMYXN0UHJvbWlzZV0gPSBudWxsO1xuICAgICAgaXRlcltrTGFzdFJlc29sdmVdID0gbnVsbDtcbiAgICAgIGl0ZXJba0xhc3RSZWplY3RdID0gbnVsbDtcbiAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdChkYXRhLCBmYWxzZSkpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBvblJlYWRhYmxlKGl0ZXIpIHtcbiAgLy8gd2Ugd2FpdCBmb3IgdGhlIG5leHQgdGljaywgYmVjYXVzZSBpdCBtaWdodFxuICAvLyBlbWl0IGFuIGVycm9yIHdpdGggcHJvY2Vzcy5uZXh0VGlja1xuICBwcm9jZXNzLm5leHRUaWNrKHJlYWRBbmRSZXNvbHZlLCBpdGVyKTtcbn1cblxuZnVuY3Rpb24gd3JhcEZvck5leHQobGFzdFByb21pc2UsIGl0ZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBsYXN0UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpdGVyW2tFbmRlZF0pIHtcbiAgICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGl0ZXJba0hhbmRsZVByb21pc2VdKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfSwgcmVqZWN0KTtcbiAgfTtcbn1cblxudmFyIEFzeW5jSXRlcmF0b3JQcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZnVuY3Rpb24gKCkge30pO1xudmFyIFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvclByb3RvdHlwZSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZigoX09iamVjdCRzZXRQcm90b3R5cGVPID0ge1xuICBnZXQgc3RyZWFtKCkge1xuICAgIHJldHVybiB0aGlzW2tTdHJlYW1dO1xuICB9LFxuXG4gIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIC8vIGlmIHdlIGhhdmUgZGV0ZWN0ZWQgYW4gZXJyb3IgaW4gdGhlIG1lYW53aGlsZVxuICAgIC8vIHJlamVjdCBzdHJhaWdodCBhd2F5XG4gICAgdmFyIGVycm9yID0gdGhpc1trRXJyb3JdO1xuXG4gICAgaWYgKGVycm9yICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cblxuICAgIGlmICh0aGlzW2tFbmRlZF0pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY3JlYXRlSXRlclJlc3VsdCh1bmRlZmluZWQsIHRydWUpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpc1trU3RyZWFtXS5kZXN0cm95ZWQpIHtcbiAgICAgIC8vIFdlIG5lZWQgdG8gZGVmZXIgdmlhIG5leHRUaWNrIGJlY2F1c2UgaWYgLmRlc3Ryb3koZXJyKSBpc1xuICAgICAgLy8gY2FsbGVkLCB0aGUgZXJyb3Igd2lsbCBiZSBlbWl0dGVkIHZpYSBuZXh0VGljaywgYW5kXG4gICAgICAvLyB3ZSBjYW5ub3QgZ3VhcmFudGVlIHRoYXQgdGhlcmUgaXMgbm8gZXJyb3IgbGluZ2VyaW5nIGFyb3VuZFxuICAgICAgLy8gd2FpdGluZyB0byBiZSBlbWl0dGVkLlxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKF90aGlzW2tFcnJvcl0pIHtcbiAgICAgICAgICAgIHJlamVjdChfdGhpc1trRXJyb3JdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IC8vIGlmIHdlIGhhdmUgbXVsdGlwbGUgbmV4dCgpIGNhbGxzXG4gICAgLy8gd2Ugd2lsbCB3YWl0IGZvciB0aGUgcHJldmlvdXMgUHJvbWlzZSB0byBmaW5pc2hcbiAgICAvLyB0aGlzIGxvZ2ljIGlzIG9wdGltaXplZCB0byBzdXBwb3J0IGZvciBhd2FpdCBsb29wcyxcbiAgICAvLyB3aGVyZSBuZXh0KCkgaXMgb25seSBjYWxsZWQgb25jZSBhdCBhIHRpbWVcblxuXG4gICAgdmFyIGxhc3RQcm9taXNlID0gdGhpc1trTGFzdFByb21pc2VdO1xuICAgIHZhciBwcm9taXNlO1xuXG4gICAgaWYgKGxhc3RQcm9taXNlKSB7XG4gICAgICBwcm9taXNlID0gbmV3IFByb21pc2Uod3JhcEZvck5leHQobGFzdFByb21pc2UsIHRoaXMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZmFzdCBwYXRoIG5lZWRlZCB0byBzdXBwb3J0IG11bHRpcGxlIHRoaXMucHVzaCgpXG4gICAgICAvLyB3aXRob3V0IHRyaWdnZXJpbmcgdGhlIG5leHQoKSBxdWV1ZVxuICAgICAgdmFyIGRhdGEgPSB0aGlzW2tTdHJlYW1dLnJlYWQoKTtcblxuICAgICAgaWYgKGRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KGRhdGEsIGZhbHNlKSk7XG4gICAgICB9XG5cbiAgICAgIHByb21pc2UgPSBuZXcgUHJvbWlzZSh0aGlzW2tIYW5kbGVQcm9taXNlXSk7XG4gICAgfVxuXG4gICAgdGhpc1trTGFzdFByb21pc2VdID0gcHJvbWlzZTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxufSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3Qkc2V0UHJvdG90eXBlTywgU3ltYm9sLmFzeW5jSXRlcmF0b3IsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXM7XG59KSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3Qkc2V0UHJvdG90eXBlTywgXCJyZXR1cm5cIiwgZnVuY3Rpb24gX3JldHVybigpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgLy8gZGVzdHJveShlcnIsIGNiKSBpcyBhIHByaXZhdGUgQVBJXG4gIC8vIHdlIGNhbiBndWFyYW50ZWUgd2UgaGF2ZSB0aGF0IGhlcmUsIGJlY2F1c2Ugd2UgY29udHJvbCB0aGVcbiAgLy8gUmVhZGFibGUgY2xhc3MgdGhpcyBpcyBhdHRhY2hlZCB0b1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIF90aGlzMltrU3RyZWFtXS5kZXN0cm95KG51bGwsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpO1xuICAgIH0pO1xuICB9KTtcbn0pLCBfT2JqZWN0JHNldFByb3RvdHlwZU8pLCBBc3luY0l0ZXJhdG9yUHJvdG90eXBlKTtcblxudmFyIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvciA9IGZ1bmN0aW9uIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcihzdHJlYW0pIHtcbiAgdmFyIF9PYmplY3QkY3JlYXRlO1xuXG4gIHZhciBpdGVyYXRvciA9IE9iamVjdC5jcmVhdGUoUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yUHJvdG90eXBlLCAoX09iamVjdCRjcmVhdGUgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBrU3RyZWFtLCB7XG4gICAgdmFsdWU6IHN0cmVhbSxcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9KSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBrTGFzdFJlc29sdmUsIHtcbiAgICB2YWx1ZTogbnVsbCxcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9KSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBrTGFzdFJlamVjdCwge1xuICAgIHZhbHVlOiBudWxsLFxuICAgIHdyaXRhYmxlOiB0cnVlXG4gIH0pLCBfZGVmaW5lUHJvcGVydHkoX09iamVjdCRjcmVhdGUsIGtFcnJvciwge1xuICAgIHZhbHVlOiBudWxsLFxuICAgIHdyaXRhYmxlOiB0cnVlXG4gIH0pLCBfZGVmaW5lUHJvcGVydHkoX09iamVjdCRjcmVhdGUsIGtFbmRlZCwge1xuICAgIHZhbHVlOiBzdHJlYW0uX3JlYWRhYmxlU3RhdGUuZW5kRW1pdHRlZCxcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9KSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBrSGFuZGxlUHJvbWlzZSwge1xuICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBkYXRhID0gaXRlcmF0b3Jba1N0cmVhbV0ucmVhZCgpO1xuXG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICBpdGVyYXRvcltrTGFzdFByb21pc2VdID0gbnVsbDtcbiAgICAgICAgaXRlcmF0b3Jba0xhc3RSZXNvbHZlXSA9IG51bGw7XG4gICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IG51bGw7XG4gICAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdChkYXRhLCBmYWxzZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlcmF0b3Jba0xhc3RSZXNvbHZlXSA9IHJlc29sdmU7XG4gICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IHJlamVjdDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHdyaXRhYmxlOiB0cnVlXG4gIH0pLCBfT2JqZWN0JGNyZWF0ZSkpO1xuICBpdGVyYXRvcltrTGFzdFByb21pc2VdID0gbnVsbDtcbiAgZmluaXNoZWQoc3RyZWFtLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKGVyciAmJiBlcnIuY29kZSAhPT0gJ0VSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFJykge1xuICAgICAgdmFyIHJlamVjdCA9IGl0ZXJhdG9yW2tMYXN0UmVqZWN0XTsgLy8gcmVqZWN0IGlmIHdlIGFyZSB3YWl0aW5nIGZvciBkYXRhIGluIHRoZSBQcm9taXNlXG4gICAgICAvLyByZXR1cm5lZCBieSBuZXh0KCkgYW5kIHN0b3JlIHRoZSBlcnJvclxuXG4gICAgICBpZiAocmVqZWN0ICE9PSBudWxsKSB7XG4gICAgICAgIGl0ZXJhdG9yW2tMYXN0UHJvbWlzZV0gPSBudWxsO1xuICAgICAgICBpdGVyYXRvcltrTGFzdFJlc29sdmVdID0gbnVsbDtcbiAgICAgICAgaXRlcmF0b3Jba0xhc3RSZWplY3RdID0gbnVsbDtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9XG5cbiAgICAgIGl0ZXJhdG9yW2tFcnJvcl0gPSBlcnI7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHJlc29sdmUgPSBpdGVyYXRvcltrTGFzdFJlc29sdmVdO1xuXG4gICAgaWYgKHJlc29sdmUgIT09IG51bGwpIHtcbiAgICAgIGl0ZXJhdG9yW2tMYXN0UHJvbWlzZV0gPSBudWxsO1xuICAgICAgaXRlcmF0b3Jba0xhc3RSZXNvbHZlXSA9IG51bGw7XG4gICAgICBpdGVyYXRvcltrTGFzdFJlamVjdF0gPSBudWxsO1xuICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpO1xuICAgIH1cblxuICAgIGl0ZXJhdG9yW2tFbmRlZF0gPSB0cnVlO1xuICB9KTtcbiAgc3RyZWFtLm9uKCdyZWFkYWJsZScsIG9uUmVhZGFibGUuYmluZChudWxsLCBpdGVyYXRvcikpO1xuICByZXR1cm4gaXRlcmF0b3I7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcjsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdSZWFkYWJsZS5mcm9tIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGJyb3dzZXInKVxufTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlO1xuLyo8cmVwbGFjZW1lbnQ+Ki9cblxudmFyIER1cGxleDtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5SZWFkYWJsZS5SZWFkYWJsZVN0YXRlID0gUmVhZGFibGVTdGF0ZTtcbi8qPHJlcGxhY2VtZW50PiovXG5cbnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcblxudmFyIEVFbGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uIEVFbGlzdGVuZXJDb3VudChlbWl0dGVyLCB0eXBlKSB7XG4gIHJldHVybiBlbWl0dGVyLmxpc3RlbmVycyh0eXBlKS5sZW5ndGg7XG59O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG5cblxudmFyIFN0cmVhbSA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0nKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7XG5cbnZhciBPdXJVaW50OEFycmF5ID0gZ2xvYmFsLlVpbnQ4QXJyYXkgfHwgZnVuY3Rpb24gKCkge307XG5cbmZ1bmN0aW9uIF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspIHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGNodW5rKTtcbn1cblxuZnVuY3Rpb24gX2lzVWludDhBcnJheShvYmopIHtcbiAgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXk7XG59XG4vKjxyZXBsYWNlbWVudD4qL1xuXG5cbnZhciBkZWJ1Z1V0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbnZhciBkZWJ1ZztcblxuaWYgKGRlYnVnVXRpbCAmJiBkZWJ1Z1V0aWwuZGVidWdsb2cpIHtcbiAgZGVidWcgPSBkZWJ1Z1V0aWwuZGVidWdsb2coJ3N0cmVhbScpO1xufSBlbHNlIHtcbiAgZGVidWcgPSBmdW5jdGlvbiBkZWJ1ZygpIHt9O1xufVxuLyo8L3JlcGxhY2VtZW50PiovXG5cblxudmFyIEJ1ZmZlckxpc3QgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvYnVmZmVyX2xpc3QnKTtcblxudmFyIGRlc3Ryb3lJbXBsID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3knKTtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL3N0YXRlJyksXG4gICAgZ2V0SGlnaFdhdGVyTWFyayA9IF9yZXF1aXJlLmdldEhpZ2hXYXRlck1hcms7XG5cbnZhciBfcmVxdWlyZSRjb2RlcyA9IHJlcXVpcmUoJy4uL2Vycm9ycycpLmNvZGVzLFxuICAgIEVSUl9JTlZBTElEX0FSR19UWVBFID0gX3JlcXVpcmUkY29kZXMuRVJSX0lOVkFMSURfQVJHX1RZUEUsXG4gICAgRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRiA9IF9yZXF1aXJlJGNvZGVzLkVSUl9TVFJFQU1fUFVTSF9BRlRFUl9FT0YsXG4gICAgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCxcbiAgICBFUlJfU1RSRUFNX1VOU0hJRlRfQUZURVJfRU5EX0VWRU5UID0gX3JlcXVpcmUkY29kZXMuRVJSX1NUUkVBTV9VTlNISUZUX0FGVEVSX0VORF9FVkVOVDsgLy8gTGF6eSBsb2FkZWQgdG8gaW1wcm92ZSB0aGUgc3RhcnR1cCBwZXJmb3JtYW5jZS5cblxuXG52YXIgU3RyaW5nRGVjb2RlcjtcbnZhciBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I7XG52YXIgZnJvbTtcblxucmVxdWlyZSgnaW5oZXJpdHMnKShSZWFkYWJsZSwgU3RyZWFtKTtcblxudmFyIGVycm9yT3JEZXN0cm95ID0gZGVzdHJveUltcGwuZXJyb3JPckRlc3Ryb3k7XG52YXIga1Byb3h5RXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddO1xuXG5mdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIoZW1pdHRlciwgZXZlbnQsIGZuKSB7XG4gIC8vIFNhZGx5IHRoaXMgaXMgbm90IGNhY2hlYWJsZSBhcyBzb21lIGxpYnJhcmllcyBidW5kbGUgdGhlaXIgb3duXG4gIC8vIGV2ZW50IGVtaXR0ZXIgaW1wbGVtZW50YXRpb24gd2l0aCB0aGVtLlxuICBpZiAodHlwZW9mIGVtaXR0ZXIucHJlcGVuZExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSByZXR1cm4gZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIoZXZlbnQsIGZuKTsgLy8gVGhpcyBpcyBhIGhhY2sgdG8gbWFrZSBzdXJlIHRoYXQgb3VyIGVycm9yIGhhbmRsZXIgaXMgYXR0YWNoZWQgYmVmb3JlIGFueVxuICAvLyB1c2VybGFuZCBvbmVzLiAgTkVWRVIgRE8gVEhJUy4gVGhpcyBpcyBoZXJlIG9ubHkgYmVjYXVzZSB0aGlzIGNvZGUgbmVlZHNcbiAgLy8gdG8gY29udGludWUgdG8gd29yayB3aXRoIG9sZGVyIHZlcnNpb25zIG9mIE5vZGUuanMgdGhhdCBkbyBub3QgaW5jbHVkZVxuICAvLyB0aGUgcHJlcGVuZExpc3RlbmVyKCkgbWV0aG9kLiBUaGUgZ29hbCBpcyB0byBldmVudHVhbGx5IHJlbW92ZSB0aGlzIGhhY2suXG5cbiAgaWYgKCFlbWl0dGVyLl9ldmVudHMgfHwgIWVtaXR0ZXIuX2V2ZW50c1tldmVudF0pIGVtaXR0ZXIub24oZXZlbnQsIGZuKTtlbHNlIGlmIChBcnJheS5pc0FycmF5KGVtaXR0ZXIuX2V2ZW50c1tldmVudF0pKSBlbWl0dGVyLl9ldmVudHNbZXZlbnRdLnVuc2hpZnQoZm4pO2Vsc2UgZW1pdHRlci5fZXZlbnRzW2V2ZW50XSA9IFtmbiwgZW1pdHRlci5fZXZlbnRzW2V2ZW50XV07XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtLCBpc0R1cGxleCkge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRHVwbGV4IHN0cmVhbXMgYXJlIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLCBidXQgc2hhcmVcbiAgLy8gdGhlIHNhbWUgb3B0aW9ucyBvYmplY3QuXG4gIC8vIEhvd2V2ZXIsIHNvbWUgY2FzZXMgcmVxdWlyZSBzZXR0aW5nIG9wdGlvbnMgdG8gZGlmZmVyZW50XG4gIC8vIHZhbHVlcyBmb3IgdGhlIHJlYWRhYmxlIGFuZCB0aGUgd3JpdGFibGUgc2lkZXMgb2YgdGhlIGR1cGxleCBzdHJlYW0uXG4gIC8vIFRoZXNlIG9wdGlvbnMgY2FuIGJlIHByb3ZpZGVkIHNlcGFyYXRlbHkgYXMgcmVhZGFibGVYWFggYW5kIHdyaXRhYmxlWFhYLlxuXG4gIGlmICh0eXBlb2YgaXNEdXBsZXggIT09ICdib29sZWFuJykgaXNEdXBsZXggPSBzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXg7IC8vIG9iamVjdCBzdHJlYW0gZmxhZy4gVXNlZCB0byBtYWtlIHJlYWQobikgaWdub3JlIG4gYW5kIHRvXG4gIC8vIG1ha2UgYWxsIHRoZSBidWZmZXIgbWVyZ2luZyBhbmQgbGVuZ3RoIGNoZWNrcyBnbyBhd2F5XG5cbiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7XG4gIGlmIChpc0R1cGxleCkgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy5yZWFkYWJsZU9iamVjdE1vZGU7IC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgXCJkb24ndCBjYWxsIF9yZWFkIHByZWVtcHRpdmVseSBldmVyXCJcblxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBnZXRIaWdoV2F0ZXJNYXJrKHRoaXMsIG9wdGlvbnMsICdyZWFkYWJsZUhpZ2hXYXRlck1hcmsnLCBpc0R1cGxleCk7IC8vIEEgbGlua2VkIGxpc3QgaXMgdXNlZCB0byBzdG9yZSBkYXRhIGNodW5rcyBpbnN0ZWFkIG9mIGFuIGFycmF5IGJlY2F1c2UgdGhlXG4gIC8vIGxpbmtlZCBsaXN0IGNhbiByZW1vdmUgZWxlbWVudHMgZnJvbSB0aGUgYmVnaW5uaW5nIGZhc3RlciB0aGFuXG4gIC8vIGFycmF5LnNoaWZ0KClcblxuICB0aGlzLmJ1ZmZlciA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIHRoaXMubGVuZ3RoID0gMDtcbiAgdGhpcy5waXBlcyA9IG51bGw7XG4gIHRoaXMucGlwZXNDb3VudCA9IDA7XG4gIHRoaXMuZmxvd2luZyA9IG51bGw7XG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7XG4gIHRoaXMucmVhZGluZyA9IGZhbHNlOyAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBldmVudCAncmVhZGFibGUnLydkYXRhJyBpcyBlbWl0dGVkXG4gIC8vIGltbWVkaWF0ZWx5LCBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlXG4gIC8vIGFueSBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCByZWFkIGNhbGwuXG5cbiAgdGhpcy5zeW5jID0gdHJ1ZTsgLy8gd2hlbmV2ZXIgd2UgcmV0dXJuIG51bGwsIHRoZW4gd2Ugc2V0IGEgZmxhZyB0byBzYXlcbiAgLy8gdGhhdCB3ZSdyZSBhd2FpdGluZyBhICdyZWFkYWJsZScgZXZlbnQgZW1pc3Npb24uXG5cbiAgdGhpcy5uZWVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5yZWFkYWJsZUxpc3RlbmluZyA9IGZhbHNlO1xuICB0aGlzLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlO1xuICB0aGlzLnBhdXNlZCA9IHRydWU7IC8vIFNob3VsZCBjbG9zZSBiZSBlbWl0dGVkIG9uIGRlc3Ryb3kuIERlZmF1bHRzIHRvIHRydWUuXG5cbiAgdGhpcy5lbWl0Q2xvc2UgPSBvcHRpb25zLmVtaXRDbG9zZSAhPT0gZmFsc2U7IC8vIFNob3VsZCAuZGVzdHJveSgpIGJlIGNhbGxlZCBhZnRlciAnZW5kJyAoYW5kIHBvdGVudGlhbGx5ICdmaW5pc2gnKVxuXG4gIHRoaXMuYXV0b0Rlc3Ryb3kgPSAhIW9wdGlvbnMuYXV0b0Rlc3Ryb3k7IC8vIGhhcyBpdCBiZWVuIGRlc3Ryb3llZFxuXG4gIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7IC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcbiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG5cbiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7IC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzXG5cbiAgdGhpcy5hd2FpdERyYWluID0gMDsgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZFxuXG4gIHRoaXMucmVhZGluZ01vcmUgPSBmYWxzZTtcbiAgdGhpcy5kZWNvZGVyID0gbnVsbDtcbiAgdGhpcy5lbmNvZGluZyA9IG51bGw7XG5cbiAgaWYgKG9wdGlvbnMuZW5jb2RpbmcpIHtcbiAgICBpZiAoIVN0cmluZ0RlY29kZXIpIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyO1xuICAgIHRoaXMuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKG9wdGlvbnMuZW5jb2RpbmcpO1xuICAgIHRoaXMuZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlKG9wdGlvbnMpIHtcbiAgRHVwbGV4ID0gRHVwbGV4IHx8IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlYWRhYmxlKSkgcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTsgLy8gQ2hlY2tpbmcgZm9yIGEgU3RyZWFtLkR1cGxleCBpbnN0YW5jZSBpcyBmYXN0ZXIgaGVyZSBpbnN0ZWFkIG9mIGluc2lkZVxuICAvLyB0aGUgUmVhZGFibGVTdGF0ZSBjb25zdHJ1Y3RvciwgYXQgbGVhc3Qgd2l0aCBWOCA2LjVcblxuICB2YXIgaXNEdXBsZXggPSB0aGlzIGluc3RhbmNlb2YgRHVwbGV4O1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlID0gbmV3IFJlYWRhYmxlU3RhdGUob3B0aW9ucywgdGhpcywgaXNEdXBsZXgpOyAvLyBsZWdhY3lcblxuICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTtcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yZWFkID09PSAnZnVuY3Rpb24nKSB0aGlzLl9yZWFkID0gb3B0aW9ucy5yZWFkO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB0aGlzLl9kZXN0cm95ID0gb3B0aW9ucy5kZXN0cm95O1xuICB9XG5cbiAgU3RyZWFtLmNhbGwodGhpcyk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZS5wcm90b3R5cGUsICdkZXN0cm95ZWQnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtXG4gICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldFxuICAgIGlmICghdGhpcy5fcmVhZGFibGVTdGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuXG5cbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHZhbHVlO1xuICB9XG59KTtcblJlYWRhYmxlLnByb3RvdHlwZS5kZXN0cm95ID0gZGVzdHJveUltcGwuZGVzdHJveTtcblJlYWRhYmxlLnByb3RvdHlwZS5fdW5kZXN0cm95ID0gZGVzdHJveUltcGwudW5kZXN0cm95O1xuXG5SZWFkYWJsZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICBjYihlcnIpO1xufTsgLy8gTWFudWFsbHkgc2hvdmUgc29tZXRoaW5nIGludG8gdGhlIHJlYWQoKSBidWZmZXIuXG4vLyBUaGlzIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGlnaFdhdGVyTWFyayBoYXMgbm90IGJlZW4gaGl0IHlldCxcbi8vIHNpbWlsYXIgdG8gaG93IFdyaXRhYmxlLndyaXRlKCkgcmV0dXJucyB0cnVlIGlmIHlvdSBzaG91bGRcbi8vIHdyaXRlKCkgc29tZSBtb3JlLlxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZykge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgc2tpcENodW5rQ2hlY2s7XG5cbiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlKSB7XG4gICAgaWYgKHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuXG4gICAgICBpZiAoZW5jb2RpbmcgIT09IHN0YXRlLmVuY29kaW5nKSB7XG4gICAgICAgIGNodW5rID0gQnVmZmVyLmZyb20oY2h1bmssIGVuY29kaW5nKTtcbiAgICAgICAgZW5jb2RpbmcgPSAnJztcbiAgICAgIH1cblxuICAgICAgc2tpcENodW5rQ2hlY2sgPSB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBza2lwQ2h1bmtDaGVjayA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBjaHVuaywgZW5jb2RpbmcsIGZhbHNlLCBza2lwQ2h1bmtDaGVjayk7XG59OyAvLyBVbnNoaWZ0IHNob3VsZCAqYWx3YXlzKiBiZSBzb21ldGhpbmcgZGlyZWN0bHkgb3V0IG9mIHJlYWQoKVxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24gKGNodW5rKSB7XG4gIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIGNodW5rLCBudWxsLCB0cnVlLCBmYWxzZSk7XG59O1xuXG5mdW5jdGlvbiByZWFkYWJsZUFkZENodW5rKHN0cmVhbSwgY2h1bmssIGVuY29kaW5nLCBhZGRUb0Zyb250LCBza2lwQ2h1bmtDaGVjaykge1xuICBkZWJ1ZygncmVhZGFibGVBZGRDaHVuaycsIGNodW5rKTtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuXG4gIGlmIChjaHVuayA9PT0gbnVsbCkge1xuICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgICBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciBlcjtcbiAgICBpZiAoIXNraXBDaHVua0NoZWNrKSBlciA9IGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspO1xuXG4gICAgaWYgKGVyKSB7XG4gICAgICBlcnJvck9yRGVzdHJveShzdHJlYW0sIGVyKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgIXN0YXRlLm9iamVjdE1vZGUgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGNodW5rKSAhPT0gQnVmZmVyLnByb3RvdHlwZSkge1xuICAgICAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWRkVG9Gcm9udCkge1xuICAgICAgICBpZiAoc3RhdGUuZW5kRW1pdHRlZCkgZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBuZXcgRVJSX1NUUkVBTV9VTlNISUZUX0FGVEVSX0VORF9FVkVOVCgpKTtlbHNlIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kZWQpIHtcbiAgICAgICAgZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBuZXcgRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRigpKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZGVzdHJveWVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhZW5jb2RpbmcpIHtcbiAgICAgICAgICBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspO1xuICAgICAgICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlIHx8IGNodW5rLmxlbmd0aCAhPT0gMCkgYWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGZhbHNlKTtlbHNlIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWFkZFRvRnJvbnQpIHtcbiAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgICAgIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuICB9IC8vIFdlIGNhbiBwdXNoIG1vcmUgZGF0YSBpZiB3ZSBhcmUgYmVsb3cgdGhlIGhpZ2hXYXRlck1hcmsuXG4gIC8vIEFsc28sIGlmIHdlIGhhdmUgbm8gZGF0YSB5ZXQsIHdlIGNhbiBzdGFuZCBzb21lIG1vcmUgYnl0ZXMuXG4gIC8vIFRoaXMgaXMgdG8gd29yayBhcm91bmQgY2FzZXMgd2hlcmUgaHdtPTAsIHN1Y2ggYXMgdGhlIHJlcGwuXG5cblxuICByZXR1cm4gIXN0YXRlLmVuZGVkICYmIChzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCk7XG59XG5cbmZ1bmN0aW9uIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBhZGRUb0Zyb250KSB7XG4gIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykge1xuICAgIHN0YXRlLmF3YWl0RHJhaW4gPSAwO1xuICAgIHN0cmVhbS5lbWl0KCdkYXRhJywgY2h1bmspO1xuICB9IGVsc2Uge1xuICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uXG4gICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuICAgIGlmIChhZGRUb0Zyb250KSBzdGF0ZS5idWZmZXIudW5zaGlmdChjaHVuayk7ZWxzZSBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG4gICAgaWYgKHN0YXRlLm5lZWRSZWFkYWJsZSkgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG4gIH1cblxuICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xufVxuXG5mdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7XG4gIHZhciBlcjtcblxuICBpZiAoIV9pc1VpbnQ4QXJyYXkoY2h1bmspICYmIHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIGVyID0gbmV3IEVSUl9JTlZBTElEX0FSR19UWVBFKCdjaHVuaycsIFsnc3RyaW5nJywgJ0J1ZmZlcicsICdVaW50OEFycmF5J10sIGNodW5rKTtcbiAgfVxuXG4gIHJldHVybiBlcjtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLmlzUGF1c2VkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID09PSBmYWxzZTtcbn07IC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS5zZXRFbmNvZGluZyA9IGZ1bmN0aW9uIChlbmMpIHtcbiAgaWYgKCFTdHJpbmdEZWNvZGVyKSBTdHJpbmdEZWNvZGVyID0gcmVxdWlyZSgnc3RyaW5nX2RlY29kZXIvJykuU3RyaW5nRGVjb2RlcjtcbiAgdmFyIGRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBkZWNvZGVyOyAvLyBJZiBzZXRFbmNvZGluZyhudWxsKSwgZGVjb2Rlci5lbmNvZGluZyBlcXVhbHMgdXRmOFxuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIuZW5jb2Rpbmc7IC8vIEl0ZXJhdGUgb3ZlciBjdXJyZW50IGJ1ZmZlciB0byBjb252ZXJ0IGFscmVhZHkgc3RvcmVkIEJ1ZmZlcnM6XG5cbiAgdmFyIHAgPSB0aGlzLl9yZWFkYWJsZVN0YXRlLmJ1ZmZlci5oZWFkO1xuICB2YXIgY29udGVudCA9ICcnO1xuXG4gIHdoaWxlIChwICE9PSBudWxsKSB7XG4gICAgY29udGVudCArPSBkZWNvZGVyLndyaXRlKHAuZGF0YSk7XG4gICAgcCA9IHAubmV4dDtcbiAgfVxuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLmNsZWFyKCk7XG5cbiAgaWYgKGNvbnRlbnQgIT09ICcnKSB0aGlzLl9yZWFkYWJsZVN0YXRlLmJ1ZmZlci5wdXNoKGNvbnRlbnQpO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmxlbmd0aCA9IGNvbnRlbnQubGVuZ3RoO1xuICByZXR1cm4gdGhpcztcbn07IC8vIERvbid0IHJhaXNlIHRoZSBod20gPiAxR0JcblxuXG52YXIgTUFYX0hXTSA9IDB4NDAwMDAwMDA7XG5cbmZ1bmN0aW9uIGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pIHtcbiAgaWYgKG4gPj0gTUFYX0hXTSkge1xuICAgIC8vIFRPRE8ocm9uYWcpOiBUaHJvdyBFUlJfVkFMVUVfT1VUX09GX1JBTkdFLlxuICAgIG4gPSBNQVhfSFdNO1xuICB9IGVsc2Uge1xuICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDIgdG8gcHJldmVudCBpbmNyZWFzaW5nIGh3bSBleGNlc3NpdmVseSBpblxuICAgIC8vIHRpbnkgYW1vdW50c1xuICAgIG4tLTtcbiAgICBuIHw9IG4gPj4+IDE7XG4gICAgbiB8PSBuID4+PiAyO1xuICAgIG4gfD0gbiA+Pj4gNDtcbiAgICBuIHw9IG4gPj4+IDg7XG4gICAgbiB8PSBuID4+PiAxNjtcbiAgICBuKys7XG4gIH1cblxuICByZXR1cm4gbjtcbn0gLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmdcbi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuXG5cblxuZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkge1xuICBpZiAobiA8PSAwIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgcmV0dXJuIDA7XG4gIGlmIChzdGF0ZS5vYmplY3RNb2RlKSByZXR1cm4gMTtcblxuICBpZiAobiAhPT0gbikge1xuICAgIC8vIE9ubHkgZmxvdyBvbmUgYnVmZmVyIGF0IGEgdGltZVxuICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCkgcmV0dXJuIHN0YXRlLmJ1ZmZlci5oZWFkLmRhdGEubGVuZ3RoO2Vsc2UgcmV0dXJuIHN0YXRlLmxlbmd0aDtcbiAgfSAvLyBJZiB3ZSdyZSBhc2tpbmcgZm9yIG1vcmUgdGhhbiB0aGUgY3VycmVudCBod20sIHRoZW4gcmFpc2UgdGhlIGh3bS5cblxuXG4gIGlmIChuID4gc3RhdGUuaGlnaFdhdGVyTWFyaykgc3RhdGUuaGlnaFdhdGVyTWFyayA9IGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pO1xuICBpZiAobiA8PSBzdGF0ZS5sZW5ndGgpIHJldHVybiBuOyAvLyBEb24ndCBoYXZlIGVub3VnaFxuXG4gIGlmICghc3RhdGUuZW5kZWQpIHtcbiAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmV0dXJuIHN0YXRlLmxlbmd0aDtcbn0gLy8geW91IGNhbiBvdmVycmlkZSBlaXRoZXIgdGhpcyBtZXRob2QsIG9yIHRoZSBhc3luYyBfcmVhZChuKSBiZWxvdy5cblxuXG5SZWFkYWJsZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChuKSB7XG4gIGRlYnVnKCdyZWFkJywgbik7XG4gIG4gPSBwYXJzZUludChuLCAxMCk7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciBuT3JpZyA9IG47XG4gIGlmIChuICE9PSAwKSBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsgLy8gaWYgd2UncmUgZG9pbmcgcmVhZCgwKSB0byB0cmlnZ2VyIGEgcmVhZGFibGUgZXZlbnQsIGJ1dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYSBidW5jaCBvZiBkYXRhIGluIHRoZSBidWZmZXIsIHRoZW4ganVzdCB0cmlnZ2VyXG4gIC8vIHRoZSAncmVhZGFibGUnIGV2ZW50IGFuZCBtb3ZlIG9uLlxuXG4gIGlmIChuID09PSAwICYmIHN0YXRlLm5lZWRSZWFkYWJsZSAmJiAoKHN0YXRlLmhpZ2hXYXRlck1hcmsgIT09IDAgPyBzdGF0ZS5sZW5ndGggPj0gc3RhdGUuaGlnaFdhdGVyTWFyayA6IHN0YXRlLmxlbmd0aCA+IDApIHx8IHN0YXRlLmVuZGVkKSkge1xuICAgIGRlYnVnKCdyZWFkOiBlbWl0UmVhZGFibGUnLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTtcbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtlbHNlIGVtaXRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG4gPSBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKTsgLy8gaWYgd2UndmUgZW5kZWQsIGFuZCB3ZSdyZSBub3cgY2xlYXIsIHRoZW4gZmluaXNoIGl0IHVwLlxuXG4gIGlmIChuID09PSAwICYmIHN0YXRlLmVuZGVkKSB7XG4gICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgZW5kUmVhZGFibGUodGhpcyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gLy8gQWxsIHRoZSBhY3R1YWwgY2h1bmsgZ2VuZXJhdGlvbiBsb2dpYyBuZWVkcyB0byBiZVxuICAvLyAqYmVsb3cqIHRoZSBjYWxsIHRvIF9yZWFkLiAgVGhlIHJlYXNvbiBpcyB0aGF0IGluIGNlcnRhaW5cbiAgLy8gc3ludGhldGljIHN0cmVhbSBjYXNlcywgc3VjaCBhcyBwYXNzdGhyb3VnaCBzdHJlYW1zLCBfcmVhZFxuICAvLyBtYXkgYmUgYSBjb21wbGV0ZWx5IHN5bmNocm9ub3VzIG9wZXJhdGlvbiB3aGljaCBtYXkgY2hhbmdlXG4gIC8vIHRoZSBzdGF0ZSBvZiB0aGUgcmVhZCBidWZmZXIsIHByb3ZpZGluZyBlbm91Z2ggZGF0YSB3aGVuXG4gIC8vIGJlZm9yZSB0aGVyZSB3YXMgKm5vdCogZW5vdWdoLlxuICAvL1xuICAvLyBTbywgdGhlIHN0ZXBzIGFyZTpcbiAgLy8gMS4gRmlndXJlIG91dCB3aGF0IHRoZSBzdGF0ZSBvZiB0aGluZ3Mgd2lsbCBiZSBhZnRlciB3ZSBkb1xuICAvLyBhIHJlYWQgZnJvbSB0aGUgYnVmZmVyLlxuICAvL1xuICAvLyAyLiBJZiB0aGF0IHJlc3VsdGluZyBzdGF0ZSB3aWxsIHRyaWdnZXIgYSBfcmVhZCwgdGhlbiBjYWxsIF9yZWFkLlxuICAvLyBOb3RlIHRoYXQgdGhpcyBtYXkgYmUgYXN5bmNocm9ub3VzLCBvciBzeW5jaHJvbm91cy4gIFllcywgaXQgaXNcbiAgLy8gZGVlcGx5IHVnbHkgdG8gd3JpdGUgQVBJcyB0aGlzIHdheSwgYnV0IHRoYXQgc3RpbGwgZG9lc24ndCBtZWFuXG4gIC8vIHRoYXQgdGhlIFJlYWRhYmxlIGNsYXNzIHNob3VsZCBiZWhhdmUgaW1wcm9wZXJseSwgYXMgc3RyZWFtcyBhcmVcbiAgLy8gZGVzaWduZWQgdG8gYmUgc3luYy9hc3luYyBhZ25vc3RpYy5cbiAgLy8gVGFrZSBub3RlIGlmIHRoZSBfcmVhZCBjYWxsIGlzIHN5bmMgb3IgYXN5bmMgKGllLCBpZiB0aGUgcmVhZCBjYWxsXG4gIC8vIGhhcyByZXR1cm5lZCB5ZXQpLCBzbyB0aGF0IHdlIGtub3cgd2hldGhlciBvciBub3QgaXQncyBzYWZlIHRvIGVtaXRcbiAgLy8gJ3JlYWRhYmxlJyBldGMuXG4gIC8vXG4gIC8vIDMuIEFjdHVhbGx5IHB1bGwgdGhlIHJlcXVlc3RlZCBjaHVua3Mgb3V0IG9mIHRoZSBidWZmZXIgYW5kIHJldHVybi5cbiAgLy8gaWYgd2UgbmVlZCBhIHJlYWRhYmxlIGV2ZW50LCB0aGVuIHdlIG5lZWQgdG8gZG8gc29tZSByZWFkaW5nLlxuXG5cbiAgdmFyIGRvUmVhZCA9IHN0YXRlLm5lZWRSZWFkYWJsZTtcbiAgZGVidWcoJ25lZWQgcmVhZGFibGUnLCBkb1JlYWQpOyAvLyBpZiB3ZSBjdXJyZW50bHkgaGF2ZSBsZXNzIHRoYW4gdGhlIGhpZ2hXYXRlck1hcmssIHRoZW4gYWxzbyByZWFkIHNvbWVcblxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwIHx8IHN0YXRlLmxlbmd0aCAtIG4gPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZG9SZWFkID0gdHJ1ZTtcbiAgICBkZWJ1ZygnbGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsnLCBkb1JlYWQpO1xuICB9IC8vIGhvd2V2ZXIsIGlmIHdlJ3ZlIGVuZGVkLCB0aGVuIHRoZXJlJ3Mgbm8gcG9pbnQsIGFuZCBpZiB3ZSdyZSBhbHJlYWR5XG4gIC8vIHJlYWRpbmcsIHRoZW4gaXQncyB1bm5lY2Vzc2FyeS5cblxuXG4gIGlmIChzdGF0ZS5lbmRlZCB8fCBzdGF0ZS5yZWFkaW5nKSB7XG4gICAgZG9SZWFkID0gZmFsc2U7XG4gICAgZGVidWcoJ3JlYWRpbmcgb3IgZW5kZWQnLCBkb1JlYWQpO1xuICB9IGVsc2UgaWYgKGRvUmVhZCkge1xuICAgIGRlYnVnKCdkbyByZWFkJyk7XG4gICAgc3RhdGUucmVhZGluZyA9IHRydWU7XG4gICAgc3RhdGUuc3luYyA9IHRydWU7IC8vIGlmIHRoZSBsZW5ndGggaXMgY3VycmVudGx5IHplcm8sIHRoZW4gd2UgKm5lZWQqIGEgcmVhZGFibGUgZXZlbnQuXG5cbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOyAvLyBjYWxsIGludGVybmFsIHJlYWQgbWV0aG9kXG5cbiAgICB0aGlzLl9yZWFkKHN0YXRlLmhpZ2hXYXRlck1hcmspO1xuXG4gICAgc3RhdGUuc3luYyA9IGZhbHNlOyAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLFxuICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci5cblxuICAgIGlmICghc3RhdGUucmVhZGluZykgbiA9IGhvd011Y2hUb1JlYWQobk9yaWcsIHN0YXRlKTtcbiAgfVxuXG4gIHZhciByZXQ7XG4gIGlmIChuID4gMCkgcmV0ID0gZnJvbUxpc3Qobiwgc3RhdGUpO2Vsc2UgcmV0ID0gbnVsbDtcblxuICBpZiAocmV0ID09PSBudWxsKSB7XG4gICAgc3RhdGUubmVlZFJlYWRhYmxlID0gc3RhdGUubGVuZ3RoIDw9IHN0YXRlLmhpZ2hXYXRlck1hcms7XG4gICAgbiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgc3RhdGUubGVuZ3RoIC09IG47XG4gICAgc3RhdGUuYXdhaXREcmFpbiA9IDA7XG4gIH1cblxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBub3RoaW5nIGluIHRoZSBidWZmZXIsIHRoZW4gd2Ugd2FudCB0byBrbm93XG4gICAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLlxuICAgIGlmICghc3RhdGUuZW5kZWQpIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7IC8vIElmIHdlIHRyaWVkIHRvIHJlYWQoKSBwYXN0IHRoZSBFT0YsIHRoZW4gZW1pdCBlbmQgb24gdGhlIG5leHQgdGljay5cblxuICAgIGlmIChuT3JpZyAhPT0gbiAmJiBzdGF0ZS5lbmRlZCkgZW5kUmVhZGFibGUodGhpcyk7XG4gIH1cblxuICBpZiAocmV0ICE9PSBudWxsKSB0aGlzLmVtaXQoJ2RhdGEnLCByZXQpO1xuICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKSB7XG4gIGRlYnVnKCdvbkVvZkNodW5rJyk7XG4gIGlmIChzdGF0ZS5lbmRlZCkgcmV0dXJuO1xuXG4gIGlmIChzdGF0ZS5kZWNvZGVyKSB7XG4gICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcblxuICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHtcbiAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTtcbiAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICBzdGF0ZS5lbmRlZCA9IHRydWU7XG5cbiAgaWYgKHN0YXRlLnN5bmMpIHtcbiAgICAvLyBpZiB3ZSBhcmUgc3luYywgd2FpdCB1bnRpbCBuZXh0IHRpY2sgdG8gZW1pdCB0aGUgZGF0YS5cbiAgICAvLyBPdGhlcndpc2Ugd2UgcmlzayBlbWl0dGluZyBkYXRhIGluIHRoZSBmbG93KClcbiAgICAvLyB0aGUgcmVhZGFibGUgY29kZSB0cmlnZ2VycyBkdXJpbmcgYSByZWFkKCkgY2FsbFxuICAgIGVtaXRSZWFkYWJsZShzdHJlYW0pO1xuICB9IGVsc2Uge1xuICAgIC8vIGVtaXQgJ3JlYWRhYmxlJyBub3cgdG8gbWFrZSBzdXJlIGl0IGdldHMgcGlja2VkIHVwLlxuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuXG4gICAgaWYgKCFzdGF0ZS5lbWl0dGVkUmVhZGFibGUpIHtcbiAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgICBlbWl0UmVhZGFibGVfKHN0cmVhbSk7XG4gICAgfVxuICB9XG59IC8vIERvbid0IGVtaXQgcmVhZGFibGUgcmlnaHQgYXdheSBpbiBzeW5jIG1vZGUsIGJlY2F1c2UgdGhpcyBjYW4gdHJpZ2dlclxuLy8gYW5vdGhlciByZWFkKCkgY2FsbCA9PiBzdGFjayBvdmVyZmxvdy4gIFRoaXMgd2F5LCBpdCBtaWdodCB0cmlnZ2VyXG4vLyBhIG5leHRUaWNrIHJlY3Vyc2lvbiB3YXJuaW5nLCBidXQgdGhhdCdzIG5vdCBzbyBiYWQuXG5cblxuZnVuY3Rpb24gZW1pdFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIGRlYnVnKCdlbWl0UmVhZGFibGUnLCBzdGF0ZS5uZWVkUmVhZGFibGUsIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSk7XG4gIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuXG4gIGlmICghc3RhdGUuZW1pdHRlZFJlYWRhYmxlKSB7XG4gICAgZGVidWcoJ2VtaXRSZWFkYWJsZScsIHN0YXRlLmZsb3dpbmcpO1xuICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0UmVhZGFibGVfLCBzdHJlYW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgZGVidWcoJ2VtaXRSZWFkYWJsZV8nLCBzdGF0ZS5kZXN0cm95ZWQsIHN0YXRlLmxlbmd0aCwgc3RhdGUuZW5kZWQpO1xuXG4gIGlmICghc3RhdGUuZGVzdHJveWVkICYmIChzdGF0ZS5sZW5ndGggfHwgc3RhdGUuZW5kZWQpKSB7XG4gICAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7XG4gICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG4gIH0gLy8gVGhlIHN0cmVhbSBuZWVkcyBhbm90aGVyIHJlYWRhYmxlIGV2ZW50IGlmXG4gIC8vIDEuIEl0IGlzIG5vdCBmbG93aW5nLCBhcyB0aGUgZmxvdyBtZWNoYW5pc20gd2lsbCB0YWtlXG4gIC8vICAgIGNhcmUgb2YgaXQuXG4gIC8vIDIuIEl0IGlzIG5vdCBlbmRlZC5cbiAgLy8gMy4gSXQgaXMgYmVsb3cgdGhlIGhpZ2hXYXRlck1hcmssIHNvIHdlIGNhbiBzY2hlZHVsZVxuICAvLyAgICBhbm90aGVyIHJlYWRhYmxlIGxhdGVyLlxuXG5cbiAgc3RhdGUubmVlZFJlYWRhYmxlID0gIXN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLmVuZGVkICYmIHN0YXRlLmxlbmd0aCA8PSBzdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICBmbG93KHN0cmVhbSk7XG59IC8vIGF0IHRoaXMgcG9pbnQsIHRoZSB1c2VyIGhhcyBwcmVzdW1hYmx5IHNlZW4gdGhlICdyZWFkYWJsZScgZXZlbnQsXG4vLyBhbmQgY2FsbGVkIHJlYWQoKSB0byBjb25zdW1lIHNvbWUgZGF0YS4gIHRoYXQgbWF5IGhhdmUgdHJpZ2dlcmVkXG4vLyBpbiB0dXJuIGFub3RoZXIgX3JlYWQobikgY2FsbCwgaW4gd2hpY2ggY2FzZSByZWFkaW5nID0gdHJ1ZSBpZlxuLy8gaXQncyBpbiBwcm9ncmVzcy5cbi8vIEhvd2V2ZXIsIGlmIHdlJ3JlIG5vdCBlbmRlZCwgb3IgcmVhZGluZywgYW5kIHRoZSBsZW5ndGggPCBod20sXG4vLyB0aGVuIGdvIGFoZWFkIGFuZCB0cnkgdG8gcmVhZCBzb21lIG1vcmUgcHJlZW1wdGl2ZWx5LlxuXG5cbmZ1bmN0aW9uIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlYWRpbmdNb3JlKSB7XG4gICAgc3RhdGUucmVhZGluZ01vcmUgPSB0cnVlO1xuICAgIHByb2Nlc3MubmV4dFRpY2sobWF5YmVSZWFkTW9yZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgLy8gQXR0ZW1wdCB0byByZWFkIG1vcmUgZGF0YSBpZiB3ZSBzaG91bGQuXG4gIC8vXG4gIC8vIFRoZSBjb25kaXRpb25zIGZvciByZWFkaW5nIG1vcmUgZGF0YSBhcmUgKG9uZSBvZik6XG4gIC8vIC0gTm90IGVub3VnaCBkYXRhIGJ1ZmZlcmVkIChzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKS4gVGhlIGxvb3BcbiAgLy8gICBpcyByZXNwb25zaWJsZSBmb3IgZmlsbGluZyB0aGUgYnVmZmVyIHdpdGggZW5vdWdoIGRhdGEgaWYgc3VjaCBkYXRhXG4gIC8vICAgaXMgYXZhaWxhYmxlLiBJZiBoaWdoV2F0ZXJNYXJrIGlzIDAgYW5kIHdlIGFyZSBub3QgaW4gdGhlIGZsb3dpbmcgbW9kZVxuICAvLyAgIHdlIHNob3VsZCBfbm90XyBhdHRlbXB0IHRvIGJ1ZmZlciBhbnkgZXh0cmEgZGF0YS4gV2UnbGwgZ2V0IG1vcmUgZGF0YVxuICAvLyAgIHdoZW4gdGhlIHN0cmVhbSBjb25zdW1lciBjYWxscyByZWFkKCkgaW5zdGVhZC5cbiAgLy8gLSBObyBkYXRhIGluIHRoZSBidWZmZXIsIGFuZCB0aGUgc3RyZWFtIGlzIGluIGZsb3dpbmcgbW9kZS4gSW4gdGhpcyBtb2RlXG4gIC8vICAgdGhlIGxvb3AgYmVsb3cgaXMgcmVzcG9uc2libGUgZm9yIGVuc3VyaW5nIHJlYWQoKSBpcyBjYWxsZWQuIEZhaWxpbmcgdG9cbiAgLy8gICBjYWxsIHJlYWQgaGVyZSB3b3VsZCBhYm9ydCB0aGUgZmxvdyBhbmQgdGhlcmUncyBubyBvdGhlciBtZWNoYW5pc20gZm9yXG4gIC8vICAgY29udGludWluZyB0aGUgZmxvdyBpZiB0aGUgc3RyZWFtIGNvbnN1bWVyIGhhcyBqdXN0IHN1YnNjcmliZWQgdG8gdGhlXG4gIC8vICAgJ2RhdGEnIGV2ZW50LlxuICAvL1xuICAvLyBJbiBhZGRpdGlvbiB0byB0aGUgYWJvdmUgY29uZGl0aW9ucyB0byBrZWVwIHJlYWRpbmcgZGF0YSwgdGhlIGZvbGxvd2luZ1xuICAvLyBjb25kaXRpb25zIHByZXZlbnQgdGhlIGRhdGEgZnJvbSBiZWluZyByZWFkOlxuICAvLyAtIFRoZSBzdHJlYW0gaGFzIGVuZGVkIChzdGF0ZS5lbmRlZCkuXG4gIC8vIC0gVGhlcmUgaXMgYWxyZWFkeSBhIHBlbmRpbmcgJ3JlYWQnIG9wZXJhdGlvbiAoc3RhdGUucmVhZGluZykuIFRoaXMgaXMgYVxuICAvLyAgIGNhc2Ugd2hlcmUgdGhlIHRoZSBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgaW1wbGVtZW50YXRpb24gZGVmaW5lZCBfcmVhZCgpXG4gIC8vICAgbWV0aG9kLCBidXQgdGhleSBhcmUgcHJvY2Vzc2luZyB0aGUgY2FsbCBhc3luY2hyb25vdXNseSBhbmQgaGF2ZSBfbm90X1xuICAvLyAgIGNhbGxlZCBwdXNoKCkgd2l0aCBuZXcgZGF0YS4gSW4gdGhpcyBjYXNlIHdlIHNraXAgcGVyZm9ybWluZyBtb3JlXG4gIC8vICAgcmVhZCgpcy4gVGhlIGV4ZWN1dGlvbiBlbmRzIGluIHRoaXMgbWV0aG9kIGFnYWluIGFmdGVyIHRoZSBfcmVhZCgpIGVuZHNcbiAgLy8gICB1cCBjYWxsaW5nIHB1c2goKSB3aXRoIG1vcmUgZGF0YS5cbiAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5lbmRlZCAmJiAoc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkpIHtcbiAgICB2YXIgbGVuID0gc3RhdGUubGVuZ3RoO1xuICAgIGRlYnVnKCdtYXliZVJlYWRNb3JlIHJlYWQgMCcpO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICAgIGlmIChsZW4gPT09IHN0YXRlLmxlbmd0aCkgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy5cbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgc3RhdGUucmVhZGluZ01vcmUgPSBmYWxzZTtcbn0gLy8gYWJzdHJhY3QgbWV0aG9kLiAgdG8gYmUgb3ZlcnJpZGRlbiBpbiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLlxuLy8gY2FsbCBjYihlciwgZGF0YSkgd2hlcmUgZGF0YSBpcyA8PSBuIGluIGxlbmd0aC5cbi8vIGZvciB2aXJ0dWFsIChub24tc3RyaW5nLCBub24tYnVmZmVyKSBzdHJlYW1zLCBcImxlbmd0aFwiIGlzIHNvbWV3aGF0XG4vLyBhcmJpdHJhcnksIGFuZCBwZXJoYXBzIG5vdCB2ZXJ5IG1lYW5pbmdmdWwuXG5cblxuUmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgZXJyb3JPckRlc3Ryb3kodGhpcywgbmV3IEVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEKCdfcmVhZCgpJykpO1xufTtcblxuUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoZGVzdCwgcGlwZU9wdHMpIHtcbiAgdmFyIHNyYyA9IHRoaXM7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgc3dpdGNoIChzdGF0ZS5waXBlc0NvdW50KSB7XG4gICAgY2FzZSAwOlxuICAgICAgc3RhdGUucGlwZXMgPSBkZXN0O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIDE6XG4gICAgICBzdGF0ZS5waXBlcyA9IFtzdGF0ZS5waXBlcywgZGVzdF07XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBzdGF0ZS5waXBlcy5wdXNoKGRlc3QpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICBzdGF0ZS5waXBlc0NvdW50ICs9IDE7XG4gIGRlYnVnKCdwaXBlIGNvdW50PSVkIG9wdHM9JWonLCBzdGF0ZS5waXBlc0NvdW50LCBwaXBlT3B0cyk7XG4gIHZhciBkb0VuZCA9ICghcGlwZU9wdHMgfHwgcGlwZU9wdHMuZW5kICE9PSBmYWxzZSkgJiYgZGVzdCAhPT0gcHJvY2Vzcy5zdGRvdXQgJiYgZGVzdCAhPT0gcHJvY2Vzcy5zdGRlcnI7XG4gIHZhciBlbmRGbiA9IGRvRW5kID8gb25lbmQgOiB1bnBpcGU7XG4gIGlmIChzdGF0ZS5lbmRFbWl0dGVkKSBwcm9jZXNzLm5leHRUaWNrKGVuZEZuKTtlbHNlIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7XG4gIGRlc3Qub24oJ3VucGlwZScsIG9udW5waXBlKTtcblxuICBmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSwgdW5waXBlSW5mbykge1xuICAgIGRlYnVnKCdvbnVucGlwZScpO1xuXG4gICAgaWYgKHJlYWRhYmxlID09PSBzcmMpIHtcbiAgICAgIGlmICh1bnBpcGVJbmZvICYmIHVucGlwZUluZm8uaGFzVW5waXBlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdW5waXBlSW5mby5oYXNVbnBpcGVkID0gdHJ1ZTtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uZW5kKCkge1xuICAgIGRlYnVnKCdvbmVuZCcpO1xuICAgIGRlc3QuZW5kKCk7XG4gIH0gLy8gd2hlbiB0aGUgZGVzdCBkcmFpbnMsIGl0IHJlZHVjZXMgdGhlIGF3YWl0RHJhaW4gY291bnRlclxuICAvLyBvbiB0aGUgc291cmNlLiAgVGhpcyB3b3VsZCBiZSBtb3JlIGVsZWdhbnQgd2l0aCBhIC5vbmNlKClcbiAgLy8gaGFuZGxlciBpbiBmbG93KCksIGJ1dCBhZGRpbmcgYW5kIHJlbW92aW5nIHJlcGVhdGVkbHkgaXNcbiAgLy8gdG9vIHNsb3cuXG5cblxuICB2YXIgb25kcmFpbiA9IHBpcGVPbkRyYWluKHNyYyk7XG4gIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7XG4gIHZhciBjbGVhbmVkVXAgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgIGRlYnVnKCdjbGVhbnVwJyk7IC8vIGNsZWFudXAgZXZlbnQgaGFuZGxlcnMgb25jZSB0aGUgcGlwZSBpcyBicm9rZW5cblxuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCd1bnBpcGUnLCBvbnVucGlwZSk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCB1bnBpcGUpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uZGF0YSk7XG4gICAgY2xlYW5lZFVwID0gdHJ1ZTsgLy8gaWYgdGhlIHJlYWRlciBpcyB3YWl0aW5nIGZvciBhIGRyYWluIGV2ZW50IGZyb20gdGhpc1xuICAgIC8vIHNwZWNpZmljIHdyaXRlciwgdGhlbiBpdCB3b3VsZCBjYXVzZSBpdCB0byBuZXZlciBzdGFydFxuICAgIC8vIGZsb3dpbmcgYWdhaW4uXG4gICAgLy8gU28sIGlmIHRoaXMgaXMgYXdhaXRpbmcgYSBkcmFpbiwgdGhlbiB3ZSBqdXN0IGNhbGwgaXQgbm93LlxuICAgIC8vIElmIHdlIGRvbid0IGtub3csIHRoZW4gYXNzdW1lIHRoYXQgd2UgYXJlIHdhaXRpbmcgZm9yIG9uZS5cblxuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluICYmICghZGVzdC5fd3JpdGFibGVTdGF0ZSB8fCBkZXN0Ll93cml0YWJsZVN0YXRlLm5lZWREcmFpbikpIG9uZHJhaW4oKTtcbiAgfVxuXG4gIHNyYy5vbignZGF0YScsIG9uZGF0YSk7XG5cbiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG4gICAgZGVidWcoJ29uZGF0YScpO1xuICAgIHZhciByZXQgPSBkZXN0LndyaXRlKGNodW5rKTtcbiAgICBkZWJ1ZygnZGVzdC53cml0ZScsIHJldCk7XG5cbiAgICBpZiAocmV0ID09PSBmYWxzZSkge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlXG4gICAgICAvLyB0byBnZXQgc3R1Y2sgaW4gYSBwZXJtYW5lbnRseSBwYXVzZWQgc3RhdGUgaWYgdGhhdCB3cml0ZVxuICAgICAgLy8gYWxzbyByZXR1cm5lZCBmYWxzZS5cbiAgICAgIC8vID0+IENoZWNrIHdoZXRoZXIgYGRlc3RgIGlzIHN0aWxsIGEgcGlwaW5nIGRlc3RpbmF0aW9uLlxuICAgICAgaWYgKChzdGF0ZS5waXBlc0NvdW50ID09PSAxICYmIHN0YXRlLnBpcGVzID09PSBkZXN0IHx8IHN0YXRlLnBpcGVzQ291bnQgPiAxICYmIGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpICE9PSAtMSkgJiYgIWNsZWFuZWRVcCkge1xuICAgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJywgc3RhdGUuYXdhaXREcmFpbik7XG4gICAgICAgIHN0YXRlLmF3YWl0RHJhaW4rKztcbiAgICAgIH1cblxuICAgICAgc3JjLnBhdXNlKCk7XG4gICAgfVxuICB9IC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LlxuICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuXG5cblxuICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7XG4gICAgZGVidWcoJ29uZXJyb3InLCBlcik7XG4gICAgdW5waXBlKCk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBpZiAoRUVsaXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKSBlcnJvck9yRGVzdHJveShkZXN0LCBlcik7XG4gIH0gLy8gTWFrZSBzdXJlIG91ciBlcnJvciBoYW5kbGVyIGlzIGF0dGFjaGVkIGJlZm9yZSB1c2VybGFuZCBvbmVzLlxuXG5cbiAgcHJlcGVuZExpc3RlbmVyKGRlc3QsICdlcnJvcicsIG9uZXJyb3IpOyAvLyBCb3RoIGNsb3NlIGFuZCBmaW5pc2ggc2hvdWxkIHRyaWdnZXIgdW5waXBlLCBidXQgb25seSBvbmNlLlxuXG4gIGZ1bmN0aW9uIG9uY2xvc2UoKSB7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuICAgIHVucGlwZSgpO1xuICB9XG5cbiAgZGVzdC5vbmNlKCdjbG9zZScsIG9uY2xvc2UpO1xuXG4gIGZ1bmN0aW9uIG9uZmluaXNoKCkge1xuICAgIGRlYnVnKCdvbmZpbmlzaCcpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG4gICAgdW5waXBlKCk7XG4gIH1cblxuICBkZXN0Lm9uY2UoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcblxuICBmdW5jdGlvbiB1bnBpcGUoKSB7XG4gICAgZGVidWcoJ3VucGlwZScpO1xuICAgIHNyYy51bnBpcGUoZGVzdCk7XG4gIH0gLy8gdGVsbCB0aGUgZGVzdCB0aGF0IGl0J3MgYmVpbmcgcGlwZWQgdG9cblxuXG4gIGRlc3QuZW1pdCgncGlwZScsIHNyYyk7IC8vIHN0YXJ0IHRoZSBmbG93IGlmIGl0IGhhc24ndCBiZWVuIHN0YXJ0ZWQgYWxyZWFkeS5cblxuICBpZiAoIXN0YXRlLmZsb3dpbmcpIHtcbiAgICBkZWJ1ZygncGlwZSByZXN1bWUnKTtcbiAgICBzcmMucmVzdW1lKCk7XG4gIH1cblxuICByZXR1cm4gZGVzdDtcbn07XG5cbmZ1bmN0aW9uIHBpcGVPbkRyYWluKHNyYykge1xuICByZXR1cm4gZnVuY3Rpb24gcGlwZU9uRHJhaW5GdW5jdGlvblJlc3VsdCgpIHtcbiAgICB2YXIgc3RhdGUgPSBzcmMuX3JlYWRhYmxlU3RhdGU7XG4gICAgZGVidWcoJ3BpcGVPbkRyYWluJywgc3RhdGUuYXdhaXREcmFpbik7XG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4pIHN0YXRlLmF3YWl0RHJhaW4tLTtcblxuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluID09PSAwICYmIEVFbGlzdGVuZXJDb3VudChzcmMsICdkYXRhJykpIHtcbiAgICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgICAgZmxvdyhzcmMpO1xuICAgIH1cbiAgfTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciB1bnBpcGVJbmZvID0ge1xuICAgIGhhc1VucGlwZWQ6IGZhbHNlXG4gIH07IC8vIGlmIHdlJ3JlIG5vdCBwaXBpbmcgYW55d2hlcmUsIHRoZW4gZG8gbm90aGluZy5cblxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMCkgcmV0dXJuIHRoaXM7IC8vIGp1c3Qgb25lIGRlc3RpbmF0aW9uLiAgbW9zdCBjb21tb24gY2FzZS5cblxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSkge1xuICAgIC8vIHBhc3NlZCBpbiBvbmUsIGJ1dCBpdCdzIG5vdCB0aGUgcmlnaHQgb25lLlxuICAgIGlmIChkZXN0ICYmIGRlc3QgIT09IHN0YXRlLnBpcGVzKSByZXR1cm4gdGhpcztcbiAgICBpZiAoIWRlc3QpIGRlc3QgPSBzdGF0ZS5waXBlczsgLy8gZ290IGEgbWF0Y2guXG5cbiAgICBzdGF0ZS5waXBlcyA9IG51bGw7XG4gICAgc3RhdGUucGlwZXNDb3VudCA9IDA7XG4gICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuICAgIGlmIChkZXN0KSBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMsIHVucGlwZUluZm8pO1xuICAgIHJldHVybiB0aGlzO1xuICB9IC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuXG5cblxuICBpZiAoIWRlc3QpIHtcbiAgICAvLyByZW1vdmUgYWxsLlxuICAgIHZhciBkZXN0cyA9IHN0YXRlLnBpcGVzO1xuICAgIHZhciBsZW4gPSBzdGF0ZS5waXBlc0NvdW50O1xuICAgIHN0YXRlLnBpcGVzID0gbnVsbDtcbiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDtcbiAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBkZXN0c1tpXS5lbWl0KCd1bnBpcGUnLCB0aGlzLCB7XG4gICAgICAgIGhhc1VucGlwZWQ6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSAvLyB0cnkgdG8gZmluZCB0aGUgcmlnaHQgb25lLlxuXG5cbiAgdmFyIGluZGV4ID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7XG4gIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiB0aGlzO1xuICBzdGF0ZS5waXBlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICBzdGF0ZS5waXBlc0NvdW50IC09IDE7XG4gIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdO1xuICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMsIHVucGlwZUluZm8pO1xuICByZXR1cm4gdGhpcztcbn07IC8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3Jcbi8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nXG5cblxuUmVhZGFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2LCBmbikge1xuICB2YXIgcmVzID0gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsIGV2LCBmbik7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgaWYgKGV2ID09PSAnZGF0YScpIHtcbiAgICAvLyB1cGRhdGUgcmVhZGFibGVMaXN0ZW5pbmcgc28gdGhhdCByZXN1bWUoKSBtYXkgYmUgYSBuby1vcFxuICAgIC8vIGEgZmV3IGxpbmVzIGRvd24uIFRoaXMgaXMgbmVlZGVkIHRvIHN1cHBvcnQgb25jZSgncmVhZGFibGUnKS5cbiAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHRoaXMubGlzdGVuZXJDb3VudCgncmVhZGFibGUnKSA+IDA7IC8vIFRyeSBzdGFydCBmbG93aW5nIG9uIG5leHQgdGljayBpZiBzdHJlYW0gaXNuJ3QgZXhwbGljaXRseSBwYXVzZWRcblxuICAgIGlmIChzdGF0ZS5mbG93aW5nICE9PSBmYWxzZSkgdGhpcy5yZXN1bWUoKTtcbiAgfSBlbHNlIGlmIChldiA9PT0gJ3JlYWRhYmxlJykge1xuICAgIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiAhc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcpIHtcbiAgICAgIHN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nID0gc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlO1xuICAgICAgZGVidWcoJ29uIHJlYWRhYmxlJywgc3RhdGUubGVuZ3RoLCBzdGF0ZS5yZWFkaW5nKTtcblxuICAgICAgaWYgKHN0YXRlLmxlbmd0aCkge1xuICAgICAgICBlbWl0UmVhZGFibGUodGhpcyk7XG4gICAgICB9IGVsc2UgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soblJlYWRpbmdOZXh0VGljaywgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5cblJlYWRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IFJlYWRhYmxlLnByb3RvdHlwZS5vbjtcblxuUmVhZGFibGUucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKGV2LCBmbikge1xuICB2YXIgcmVzID0gU3RyZWFtLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lci5jYWxsKHRoaXMsIGV2LCBmbik7XG5cbiAgaWYgKGV2ID09PSAncmVhZGFibGUnKSB7XG4gICAgLy8gV2UgbmVlZCB0byBjaGVjayBpZiB0aGVyZSBpcyBzb21lb25lIHN0aWxsIGxpc3RlbmluZyB0b1xuICAgIC8vIHJlYWRhYmxlIGFuZCByZXNldCB0aGUgc3RhdGUuIEhvd2V2ZXIgdGhpcyBuZWVkcyB0byBoYXBwZW5cbiAgICAvLyBhZnRlciByZWFkYWJsZSBoYXMgYmVlbiBlbWl0dGVkIGJ1dCBiZWZvcmUgSS9PIChuZXh0VGljaykgdG9cbiAgICAvLyBzdXBwb3J0IG9uY2UoJ3JlYWRhYmxlJywgZm4pIGN5Y2xlcy4gVGhpcyBtZWFucyB0aGF0IGNhbGxpbmdcbiAgICAvLyByZXN1bWUgd2l0aGluIHRoZSBzYW1lIHRpY2sgd2lsbCBoYXZlIG5vXG4gICAgLy8gZWZmZWN0LlxuICAgIHByb2Nlc3MubmV4dFRpY2sodXBkYXRlUmVhZGFibGVMaXN0ZW5pbmcsIHRoaXMpO1xuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5cblJlYWRhYmxlLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZXYpIHtcbiAgdmFyIHJlcyA9IFN0cmVhbS5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgaWYgKGV2ID09PSAncmVhZGFibGUnIHx8IGV2ID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIGlmIHRoZXJlIGlzIHNvbWVvbmUgc3RpbGwgbGlzdGVuaW5nIHRvXG4gICAgLy8gcmVhZGFibGUgYW5kIHJlc2V0IHRoZSBzdGF0ZS4gSG93ZXZlciB0aGlzIG5lZWRzIHRvIGhhcHBlblxuICAgIC8vIGFmdGVyIHJlYWRhYmxlIGhhcyBiZWVuIGVtaXR0ZWQgYnV0IGJlZm9yZSBJL08gKG5leHRUaWNrKSB0b1xuICAgIC8vIHN1cHBvcnQgb25jZSgncmVhZGFibGUnLCBmbikgY3ljbGVzLiBUaGlzIG1lYW5zIHRoYXQgY2FsbGluZ1xuICAgIC8vIHJlc3VtZSB3aXRoaW4gdGhlIHNhbWUgdGljayB3aWxsIGhhdmUgbm9cbiAgICAvLyBlZmZlY3QuXG4gICAgcHJvY2Vzcy5uZXh0VGljayh1cGRhdGVSZWFkYWJsZUxpc3RlbmluZywgdGhpcyk7XG4gIH1cblxuICByZXR1cm4gcmVzO1xufTtcblxuZnVuY3Rpb24gdXBkYXRlUmVhZGFibGVMaXN0ZW5pbmcoc2VsZikge1xuICB2YXIgc3RhdGUgPSBzZWxmLl9yZWFkYWJsZVN0YXRlO1xuICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHNlbGYubGlzdGVuZXJDb3VudCgncmVhZGFibGUnKSA+IDA7XG5cbiAgaWYgKHN0YXRlLnJlc3VtZVNjaGVkdWxlZCAmJiAhc3RhdGUucGF1c2VkKSB7XG4gICAgLy8gZmxvd2luZyBuZWVkcyB0byBiZSBzZXQgdG8gdHJ1ZSBub3csIG90aGVyd2lzZVxuICAgIC8vIHRoZSB1cGNvbWluZyByZXN1bWUgd2lsbCBub3QgZmxvdy5cbiAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsgLy8gY3J1ZGUgd2F5IHRvIGNoZWNrIGlmIHdlIHNob3VsZCByZXN1bWVcbiAgfSBlbHNlIGlmIChzZWxmLmxpc3RlbmVyQ291bnQoJ2RhdGEnKSA+IDApIHtcbiAgICBzZWxmLnJlc3VtZSgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG5SZWFkaW5nTmV4dFRpY2soc2VsZikge1xuICBkZWJ1ZygncmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwJyk7XG4gIHNlbGYucmVhZCgwKTtcbn0gLy8gcGF1c2UoKSBhbmQgcmVzdW1lKCkgYXJlIHJlbW5hbnRzIG9mIHRoZSBsZWdhY3kgcmVhZGFibGUgc3RyZWFtIEFQSVxuLy8gSWYgdGhlIHVzZXIgdXNlcyB0aGVtLCB0aGVuIHN3aXRjaCBpbnRvIG9sZCBtb2RlLlxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3Jlc3VtZScpOyAvLyB3ZSBmbG93IG9ubHkgaWYgdGhlcmUgaXMgbm8gb25lIGxpc3RlbmluZ1xuICAgIC8vIGZvciByZWFkYWJsZSwgYnV0IHdlIHN0aWxsIGhhdmUgdG8gY2FsbFxuICAgIC8vIHJlc3VtZSgpXG5cbiAgICBzdGF0ZS5mbG93aW5nID0gIXN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nO1xuICAgIHJlc3VtZSh0aGlzLCBzdGF0ZSk7XG4gIH1cblxuICBzdGF0ZS5wYXVzZWQgPSBmYWxzZTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiByZXN1bWUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlc3VtZVNjaGVkdWxlZCkge1xuICAgIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IHRydWU7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhyZXN1bWVfLCBzdHJlYW0sIHN0YXRlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXN1bWVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgZGVidWcoJ3Jlc3VtZScsIHN0YXRlLnJlYWRpbmcpO1xuXG4gIGlmICghc3RhdGUucmVhZGluZykge1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICB9XG5cbiAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7XG4gIHN0cmVhbS5lbWl0KCdyZXN1bWUnKTtcbiAgZmxvdyhzdHJlYW0pO1xuICBpZiAoc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUucmVhZGluZykgc3RyZWFtLnJlYWQoMCk7XG59XG5cblJlYWRhYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHtcbiAgZGVidWcoJ2NhbGwgcGF1c2UgZmxvd2luZz0laicsIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyk7XG5cbiAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyAhPT0gZmFsc2UpIHtcbiAgICBkZWJ1ZygncGF1c2UnKTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXQoJ3BhdXNlJyk7XG4gIH1cblxuICB0aGlzLl9yZWFkYWJsZVN0YXRlLnBhdXNlZCA9IHRydWU7XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gZmxvdyhzdHJlYW0pIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICBkZWJ1ZygnZmxvdycsIHN0YXRlLmZsb3dpbmcpO1xuXG4gIHdoaWxlIChzdGF0ZS5mbG93aW5nICYmIHN0cmVhbS5yZWFkKCkgIT09IG51bGwpIHtcbiAgICA7XG4gIH1cbn0gLy8gd3JhcCBhbiBvbGQtc3R5bGUgc3RyZWFtIGFzIHRoZSBhc3luYyBkYXRhIHNvdXJjZS5cbi8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS5cbi8vIEl0IGlzIGFuIHVnbHkgdW5mb3J0dW5hdGUgbWVzcyBvZiBoaXN0b3J5LlxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKHN0cmVhbSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciBwYXVzZWQgPSBmYWxzZTtcbiAgc3RyZWFtLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgZW5kJyk7XG5cbiAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhc3RhdGUuZW5kZWQpIHtcbiAgICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7XG4gICAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSBfdGhpcy5wdXNoKGNodW5rKTtcbiAgICB9XG5cbiAgICBfdGhpcy5wdXNoKG51bGwpO1xuICB9KTtcbiAgc3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgZGF0YScpO1xuICAgIGlmIChzdGF0ZS5kZWNvZGVyKSBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspOyAvLyBkb24ndCBza2lwIG92ZXIgZmFsc3kgdmFsdWVzIGluIG9iamVjdE1vZGVcblxuICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlICYmIChjaHVuayA9PT0gbnVsbCB8fCBjaHVuayA9PT0gdW5kZWZpbmVkKSkgcmV0dXJuO2Vsc2UgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmICghY2h1bmsgfHwgIWNodW5rLmxlbmd0aCkpIHJldHVybjtcblxuICAgIHZhciByZXQgPSBfdGhpcy5wdXNoKGNodW5rKTtcblxuICAgIGlmICghcmV0KSB7XG4gICAgICBwYXVzZWQgPSB0cnVlO1xuICAgICAgc3RyZWFtLnBhdXNlKCk7XG4gICAgfVxuICB9KTsgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLlxuICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy5cblxuICBmb3IgKHZhciBpIGluIHN0cmVhbSkge1xuICAgIGlmICh0aGlzW2ldID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHN0cmVhbVtpXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpc1tpXSA9IGZ1bmN0aW9uIG1ldGhvZFdyYXAobWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBtZXRob2RXcmFwUmV0dXJuRnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHN0cmVhbVttZXRob2RdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0oaSk7XG4gICAgfVxuICB9IC8vIHByb3h5IGNlcnRhaW4gaW1wb3J0YW50IGV2ZW50cy5cblxuXG4gIGZvciAodmFyIG4gPSAwOyBuIDwga1Byb3h5RXZlbnRzLmxlbmd0aDsgbisrKSB7XG4gICAgc3RyZWFtLm9uKGtQcm94eUV2ZW50c1tuXSwgdGhpcy5lbWl0LmJpbmQodGhpcywga1Byb3h5RXZlbnRzW25dKSk7XG4gIH0gLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZVxuICAvLyB1bmRlcmx5aW5nIHN0cmVhbS5cblxuXG4gIHRoaXMuX3JlYWQgPSBmdW5jdGlvbiAobikge1xuICAgIGRlYnVnKCd3cmFwcGVkIF9yZWFkJywgbik7XG5cbiAgICBpZiAocGF1c2VkKSB7XG4gICAgICBwYXVzZWQgPSBmYWxzZTtcbiAgICAgIHN0cmVhbS5yZXN1bWUoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5pZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuICBSZWFkYWJsZS5wcm90b3R5cGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL2FzeW5jX2l0ZXJhdG9yJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcih0aGlzKTtcbiAgfTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgJ3JlYWRhYmxlSGlnaFdhdGVyTWFyaycsIHtcbiAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGVcbiAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluXG4gIC8vIHVzZXJsYW5kIHdpbGwgZmFpbFxuICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuaGlnaFdhdGVyTWFyaztcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAncmVhZGFibGVCdWZmZXInLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyO1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZS5wcm90b3R5cGUsICdyZWFkYWJsZUZsb3dpbmcnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmc7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gc2V0KHN0YXRlKSB7XG4gICAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHtcbiAgICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IHN0YXRlO1xuICAgIH1cbiAgfVxufSk7IC8vIGV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS5cblxuUmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAncmVhZGFibGVMZW5ndGgnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmxlbmd0aDtcbiAgfVxufSk7IC8vIFBsdWNrIG9mZiBuIGJ5dGVzIGZyb20gYW4gYXJyYXkgb2YgYnVmZmVycy5cbi8vIExlbmd0aCBpcyB0aGUgY29tYmluZWQgbGVuZ3RocyBvZiBhbGwgdGhlIGJ1ZmZlcnMgaW4gdGhlIGxpc3QuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cblxuZnVuY3Rpb24gZnJvbUxpc3Qobiwgc3RhdGUpIHtcbiAgLy8gbm90aGluZyBidWZmZXJlZFxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgdmFyIHJldDtcbiAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldCA9IHN0YXRlLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYgKCFuIHx8IG4gPj0gc3RhdGUubGVuZ3RoKSB7XG4gICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBsaXN0XG4gICAgaWYgKHN0YXRlLmRlY29kZXIpIHJldCA9IHN0YXRlLmJ1ZmZlci5qb2luKCcnKTtlbHNlIGlmIChzdGF0ZS5idWZmZXIubGVuZ3RoID09PSAxKSByZXQgPSBzdGF0ZS5idWZmZXIuZmlyc3QoKTtlbHNlIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25jYXQoc3RhdGUubGVuZ3RoKTtcbiAgICBzdGF0ZS5idWZmZXIuY2xlYXIoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyByZWFkIHBhcnQgb2YgbGlzdFxuICAgIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25zdW1lKG4sIHN0YXRlLmRlY29kZXIpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIGRlYnVnKCdlbmRSZWFkYWJsZScsIHN0YXRlLmVuZEVtaXR0ZWQpO1xuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCkge1xuICAgIHN0YXRlLmVuZGVkID0gdHJ1ZTtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGVuZFJlYWRhYmxlTlQsIHN0YXRlLCBzdHJlYW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlTlQoc3RhdGUsIHN0cmVhbSkge1xuICBkZWJ1ZygnZW5kUmVhZGFibGVOVCcsIHN0YXRlLmVuZEVtaXR0ZWQsIHN0YXRlLmxlbmd0aCk7IC8vIENoZWNrIHRoYXQgd2UgZGlkbid0IGdldCBvbmUgbGFzdCB1bnNoaWZ0LlxuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZW5kJyk7XG5cbiAgICBpZiAoc3RhdGUuYXV0b0Rlc3Ryb3kpIHtcbiAgICAgIC8vIEluIGNhc2Ugb2YgZHVwbGV4IHN0cmVhbXMgd2UgbmVlZCBhIHdheSB0byBkZXRlY3RcbiAgICAgIC8vIGlmIHRoZSB3cml0YWJsZSBzaWRlIGlzIHJlYWR5IGZvciBhdXRvRGVzdHJveSBhcyB3ZWxsXG4gICAgICB2YXIgd1N0YXRlID0gc3RyZWFtLl93cml0YWJsZVN0YXRlO1xuXG4gICAgICBpZiAoIXdTdGF0ZSB8fCB3U3RhdGUuYXV0b0Rlc3Ryb3kgJiYgd1N0YXRlLmZpbmlzaGVkKSB7XG4gICAgICAgIHN0cmVhbS5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nKSB7XG4gIFJlYWRhYmxlLmZyb20gPSBmdW5jdGlvbiAoaXRlcmFibGUsIG9wdHMpIHtcbiAgICBpZiAoZnJvbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmcm9tID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL2Zyb20nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnJvbShSZWFkYWJsZSwgaXRlcmFibGUsIG9wdHMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBpbmRleE9mKHhzLCB4KSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKHhzW2ldID09PSB4KSByZXR1cm4gaTtcbiAgfVxuXG4gIHJldHVybiAtMTtcbn0iLCJcbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBkZXByZWNhdGU7XG5cbi8qKlxuICogTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbiAqIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4gKlxuICogSWYgYGxvY2FsU3RvcmFnZS5ub0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG4gKlxuICogSWYgYGxvY2FsU3RvcmFnZS50aHJvd0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGRlcHJlY2F0ZWQgZnVuY3Rpb25zXG4gKiB3aWxsIHRocm93IGFuIEVycm9yIHdoZW4gaW52b2tlZC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLnRyYWNlRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnNcbiAqIHdpbGwgaW52b2tlIGBjb25zb2xlLnRyYWNlKClgIGluc3RlYWQgb2YgYGNvbnNvbGUuZXJyb3IoKWAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSB0aGUgZnVuY3Rpb24gdG8gZGVwcmVjYXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gbXNnIC0gdGhlIHN0cmluZyB0byBwcmludCB0byB0aGUgY29uc29sZSB3aGVuIGBmbmAgaXMgaW52b2tlZFxuICogQHJldHVybnMge0Z1bmN0aW9ufSBhIG5ldyBcImRlcHJlY2F0ZWRcIiB2ZXJzaW9uIG9mIGBmbmBcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGVwcmVjYXRlIChmbiwgbXNnKSB7XG4gIGlmIChjb25maWcoJ25vRGVwcmVjYXRpb24nKSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKGNvbmZpZygndGhyb3dEZXByZWNhdGlvbicpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChjb25maWcoJ3RyYWNlRGVwcmVjYXRpb24nKSkge1xuICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4obXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGBsb2NhbFN0b3JhZ2VgIGZvciBib29sZWFuIHZhbHVlcyBmb3IgdGhlIGdpdmVuIGBuYW1lYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBjb25maWcgKG5hbWUpIHtcbiAgLy8gYWNjZXNzaW5nIGdsb2JhbC5sb2NhbFN0b3JhZ2UgY2FuIHRyaWdnZXIgYSBET01FeGNlcHRpb24gaW4gc2FuZGJveGVkIGlmcmFtZXNcbiAgdHJ5IHtcbiAgICBpZiAoIWdsb2JhbC5sb2NhbFN0b3JhZ2UpIHJldHVybiBmYWxzZTtcbiAgfSBjYXRjaCAoXykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdmFsID0gZ2xvYmFsLmxvY2FsU3RvcmFnZVtuYW1lXTtcbiAgaWYgKG51bGwgPT0gdmFsKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XG59XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbi8vIEEgYml0IHNpbXBsZXIgdGhhbiByZWFkYWJsZSBzdHJlYW1zLlxuLy8gSW1wbGVtZW50IGFuIGFzeW5jIC5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYiksIGFuZCBpdCdsbCBoYW5kbGUgYWxsXG4vLyB0aGUgZHJhaW4gZXZlbnQgZW1pc3Npb24gYW5kIGJ1ZmZlcmluZy5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBXcml0YWJsZTtcbi8qIDxyZXBsYWNlbWVudD4gKi9cblxuZnVuY3Rpb24gV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aGlzLmNodW5rID0gY2h1bms7XG4gIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZztcbiAgdGhpcy5jYWxsYmFjayA9IGNiO1xuICB0aGlzLm5leHQgPSBudWxsO1xufSAvLyBJdCBzZWVtcyBhIGxpbmtlZCBsaXN0IGJ1dCBpdCBpcyBub3Rcbi8vIHRoZXJlIHdpbGwgYmUgb25seSAyIG9mIHRoZXNlIGZvciBlYWNoIHN0cmVhbVxuXG5cbmZ1bmN0aW9uIENvcmtlZFJlcXVlc3Qoc3RhdGUpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLm5leHQgPSBudWxsO1xuICB0aGlzLmVudHJ5ID0gbnVsbDtcblxuICB0aGlzLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICBvbkNvcmtlZEZpbmlzaChfdGhpcywgc3RhdGUpO1xuICB9O1xufVxuLyogPC9yZXBsYWNlbWVudD4gKi9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cblxuXG52YXIgRHVwbGV4O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbldyaXRhYmxlLldyaXRhYmxlU3RhdGUgPSBXcml0YWJsZVN0YXRlO1xuLyo8cmVwbGFjZW1lbnQ+Ki9cblxudmFyIGludGVybmFsVXRpbCA9IHtcbiAgZGVwcmVjYXRlOiByZXF1aXJlKCd1dGlsLWRlcHJlY2F0ZScpXG59O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG5cbnZhciBTdHJlYW0gPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvc3RyZWFtJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyO1xuXG52YXIgT3VyVWludDhBcnJheSA9IGdsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9O1xuXG5mdW5jdGlvbiBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKSB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShjaHVuayk7XG59XG5cbmZ1bmN0aW9uIF9pc1VpbnQ4QXJyYXkob2JqKSB7XG4gIHJldHVybiBCdWZmZXIuaXNCdWZmZXIob2JqKSB8fCBvYmogaW5zdGFuY2VvZiBPdXJVaW50OEFycmF5O1xufVxuXG52YXIgZGVzdHJveUltcGwgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvZGVzdHJveScpO1xuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvc3RhdGUnKSxcbiAgICBnZXRIaWdoV2F0ZXJNYXJrID0gX3JlcXVpcmUuZ2V0SGlnaFdhdGVyTWFyaztcblxudmFyIF9yZXF1aXJlJGNvZGVzID0gcmVxdWlyZSgnLi4vZXJyb3JzJykuY29kZXMsXG4gICAgRVJSX0lOVkFMSURfQVJHX1RZUEUgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfSU5WQUxJRF9BUkdfVFlQRSxcbiAgICBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCA9IF9yZXF1aXJlJGNvZGVzLkVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVELFxuICAgIEVSUl9NVUxUSVBMRV9DQUxMQkFDSyA9IF9yZXF1aXJlJGNvZGVzLkVSUl9NVUxUSVBMRV9DQUxMQkFDSyxcbiAgICBFUlJfU1RSRUFNX0NBTk5PVF9QSVBFID0gX3JlcXVpcmUkY29kZXMuRVJSX1NUUkVBTV9DQU5OT1RfUElQRSxcbiAgICBFUlJfU1RSRUFNX0RFU1RST1lFRCA9IF9yZXF1aXJlJGNvZGVzLkVSUl9TVFJFQU1fREVTVFJPWUVELFxuICAgIEVSUl9TVFJFQU1fTlVMTF9WQUxVRVMgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfU1RSRUFNX05VTExfVkFMVUVTLFxuICAgIEVSUl9TVFJFQU1fV1JJVEVfQUZURVJfRU5EID0gX3JlcXVpcmUkY29kZXMuRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQsXG4gICAgRVJSX1VOS05PV05fRU5DT0RJTkcgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfVU5LTk9XTl9FTkNPRElORztcblxudmFyIGVycm9yT3JEZXN0cm95ID0gZGVzdHJveUltcGwuZXJyb3JPckRlc3Ryb3k7XG5cbnJlcXVpcmUoJ2luaGVyaXRzJykoV3JpdGFibGUsIFN0cmVhbSk7XG5cbmZ1bmN0aW9uIG5vcCgpIHt9XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtLCBpc0R1cGxleCkge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRHVwbGV4IHN0cmVhbXMgYXJlIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLCBidXQgc2hhcmVcbiAgLy8gdGhlIHNhbWUgb3B0aW9ucyBvYmplY3QuXG4gIC8vIEhvd2V2ZXIsIHNvbWUgY2FzZXMgcmVxdWlyZSBzZXR0aW5nIG9wdGlvbnMgdG8gZGlmZmVyZW50XG4gIC8vIHZhbHVlcyBmb3IgdGhlIHJlYWRhYmxlIGFuZCB0aGUgd3JpdGFibGUgc2lkZXMgb2YgdGhlIGR1cGxleCBzdHJlYW0sXG4gIC8vIGUuZy4gb3B0aW9ucy5yZWFkYWJsZU9iamVjdE1vZGUgdnMuIG9wdGlvbnMud3JpdGFibGVPYmplY3RNb2RlLCBldGMuXG5cbiAgaWYgKHR5cGVvZiBpc0R1cGxleCAhPT0gJ2Jvb2xlYW4nKSBpc0R1cGxleCA9IHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleDsgLy8gb2JqZWN0IHN0cmVhbSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoaXMgc3RyZWFtXG4gIC8vIGNvbnRhaW5zIGJ1ZmZlcnMgb3Igb2JqZWN0cy5cblxuICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcbiAgaWYgKGlzRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTsgLy8gdGhlIHBvaW50IGF0IHdoaWNoIHdyaXRlKCkgc3RhcnRzIHJldHVybmluZyBmYWxzZVxuICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zIHRoYXQgd2UgYWx3YXlzIHJldHVybiBmYWxzZSBpZlxuICAvLyB0aGUgZW50aXJlIGJ1ZmZlciBpcyBub3QgZmx1c2hlZCBpbW1lZGlhdGVseSBvbiB3cml0ZSgpXG5cbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gZ2V0SGlnaFdhdGVyTWFyayh0aGlzLCBvcHRpb25zLCAnd3JpdGFibGVIaWdoV2F0ZXJNYXJrJywgaXNEdXBsZXgpOyAvLyBpZiBfZmluYWwgaGFzIGJlZW4gY2FsbGVkXG5cbiAgdGhpcy5maW5hbENhbGxlZCA9IGZhbHNlOyAvLyBkcmFpbiBldmVudCBmbGFnLlxuXG4gIHRoaXMubmVlZERyYWluID0gZmFsc2U7IC8vIGF0IHRoZSBzdGFydCBvZiBjYWxsaW5nIGVuZCgpXG5cbiAgdGhpcy5lbmRpbmcgPSBmYWxzZTsgLy8gd2hlbiBlbmQoKSBoYXMgYmVlbiBjYWxsZWQsIGFuZCByZXR1cm5lZFxuXG4gIHRoaXMuZW5kZWQgPSBmYWxzZTsgLy8gd2hlbiAnZmluaXNoJyBpcyBlbWl0dGVkXG5cbiAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOyAvLyBoYXMgaXQgYmVlbiBkZXN0cm95ZWRcblxuICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlOyAvLyBzaG91bGQgd2UgZGVjb2RlIHN0cmluZ3MgaW50byBidWZmZXJzIGJlZm9yZSBwYXNzaW5nIHRvIF93cml0ZT9cbiAgLy8gdGhpcyBpcyBoZXJlIHNvIHRoYXQgc29tZSBub2RlLWNvcmUgc3RyZWFtcyBjYW4gb3B0aW1pemUgc3RyaW5nXG4gIC8vIGhhbmRsaW5nIGF0IGEgbG93ZXIgbGV2ZWwuXG5cbiAgdmFyIG5vRGVjb2RlID0gb3B0aW9ucy5kZWNvZGVTdHJpbmdzID09PSBmYWxzZTtcbiAgdGhpcy5kZWNvZGVTdHJpbmdzID0gIW5vRGVjb2RlOyAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nXG4gIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS5cbiAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLlxuXG4gIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnOyAvLyBub3QgYW4gYWN0dWFsIGJ1ZmZlciB3ZSBrZWVwIHRyYWNrIG9mLCBidXQgYSBtZWFzdXJlbWVudFxuICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nXG4gIC8vIHNvY2tldCBvciBmaWxlLlxuXG4gIHRoaXMubGVuZ3RoID0gMDsgLy8gYSBmbGFnIHRvIHNlZSB3aGVuIHdlJ3JlIGluIHRoZSBtaWRkbGUgb2YgYSB3cml0ZS5cblxuICB0aGlzLndyaXRpbmcgPSBmYWxzZTsgLy8gd2hlbiB0cnVlIGFsbCB3cml0ZXMgd2lsbCBiZSBidWZmZXJlZCB1bnRpbCAudW5jb3JrKCkgY2FsbFxuXG4gIHRoaXMuY29ya2VkID0gMDsgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksXG4gIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55XG4gIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cbiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuXG5cbiAgdGhpcy5zeW5jID0gdHJ1ZTsgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaFxuICAvLyBtYXkgY2FsbCB0aGUgX3dyaXRlKCkgY2FsbGJhY2sgaW4gdGhlIHNhbWUgdGljaywgc28gdGhhdCB3ZSBkb24ndFxuICAvLyBlbmQgdXAgaW4gYW4gb3ZlcmxhcHBlZCBvbndyaXRlIHNpdHVhdGlvbi5cblxuICB0aGlzLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTsgLy8gdGhlIGNhbGxiYWNrIHRoYXQncyBwYXNzZWQgdG8gX3dyaXRlKGNodW5rLGNiKVxuXG4gIHRoaXMub253cml0ZSA9IGZ1bmN0aW9uIChlcikge1xuICAgIG9ud3JpdGUoc3RyZWFtLCBlcik7XG4gIH07IC8vIHRoZSBjYWxsYmFjayB0aGF0IHRoZSB1c2VyIHN1cHBsaWVzIHRvIHdyaXRlKGNodW5rLGVuY29kaW5nLGNiKVxuXG5cbiAgdGhpcy53cml0ZWNiID0gbnVsbDsgLy8gdGhlIGFtb3VudCB0aGF0IGlzIGJlaW5nIHdyaXR0ZW4gd2hlbiBfd3JpdGUgaXMgY2FsbGVkLlxuXG4gIHRoaXMud3JpdGVsZW4gPSAwO1xuICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG4gIHRoaXMubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7IC8vIG51bWJlciBvZiBwZW5kaW5nIHVzZXItc3VwcGxpZWQgd3JpdGUgY2FsbGJhY2tzXG4gIC8vIHRoaXMgbXVzdCBiZSAwIGJlZm9yZSAnZmluaXNoJyBjYW4gYmUgZW1pdHRlZFxuXG4gIHRoaXMucGVuZGluZ2NiID0gMDsgLy8gZW1pdCBwcmVmaW5pc2ggaWYgdGhlIG9ubHkgdGhpbmcgd2UncmUgd2FpdGluZyBmb3IgaXMgX3dyaXRlIGNic1xuICAvLyBUaGlzIGlzIHJlbGV2YW50IGZvciBzeW5jaHJvbm91cyBUcmFuc2Zvcm0gc3RyZWFtc1xuXG4gIHRoaXMucHJlZmluaXNoZWQgPSBmYWxzZTsgLy8gVHJ1ZSBpZiB0aGUgZXJyb3Igd2FzIGFscmVhZHkgZW1pdHRlZCBhbmQgc2hvdWxkIG5vdCBiZSB0aHJvd24gYWdhaW5cblxuICB0aGlzLmVycm9yRW1pdHRlZCA9IGZhbHNlOyAvLyBTaG91bGQgY2xvc2UgYmUgZW1pdHRlZCBvbiBkZXN0cm95LiBEZWZhdWx0cyB0byB0cnVlLlxuXG4gIHRoaXMuZW1pdENsb3NlID0gb3B0aW9ucy5lbWl0Q2xvc2UgIT09IGZhbHNlOyAvLyBTaG91bGQgLmRlc3Ryb3koKSBiZSBjYWxsZWQgYWZ0ZXIgJ2ZpbmlzaCcgKGFuZCBwb3RlbnRpYWxseSAnZW5kJylcblxuICB0aGlzLmF1dG9EZXN0cm95ID0gISFvcHRpb25zLmF1dG9EZXN0cm95OyAvLyBjb3VudCBidWZmZXJlZCByZXF1ZXN0c1xuXG4gIHRoaXMuYnVmZmVyZWRSZXF1ZXN0Q291bnQgPSAwOyAvLyBhbGxvY2F0ZSB0aGUgZmlyc3QgQ29ya2VkUmVxdWVzdCwgdGhlcmUgaXMgYWx3YXlzXG4gIC8vIG9uZSBhbGxvY2F0ZWQgYW5kIGZyZWUgdG8gdXNlLCBhbmQgd2UgbWFpbnRhaW4gYXQgbW9zdCB0d29cblxuICB0aGlzLmNvcmtlZFJlcXVlc3RzRnJlZSA9IG5ldyBDb3JrZWRSZXF1ZXN0KHRoaXMpO1xufVxuXG5Xcml0YWJsZVN0YXRlLnByb3RvdHlwZS5nZXRCdWZmZXIgPSBmdW5jdGlvbiBnZXRCdWZmZXIoKSB7XG4gIHZhciBjdXJyZW50ID0gdGhpcy5idWZmZXJlZFJlcXVlc3Q7XG4gIHZhciBvdXQgPSBbXTtcblxuICB3aGlsZSAoY3VycmVudCkge1xuICAgIG91dC5wdXNoKGN1cnJlbnQpO1xuICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGVTdGF0ZS5wcm90b3R5cGUsICdidWZmZXInLCB7XG4gICAgICBnZXQ6IGludGVybmFsVXRpbC5kZXByZWNhdGUoZnVuY3Rpb24gd3JpdGFibGVTdGF0ZUJ1ZmZlckdldHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCk7XG4gICAgICB9LCAnX3dyaXRhYmxlU3RhdGUuYnVmZmVyIGlzIGRlcHJlY2F0ZWQuIFVzZSBfd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIgJyArICdpbnN0ZWFkLicsICdERVAwMDAzJylcbiAgICB9KTtcbiAgfSBjYXRjaCAoXykge31cbn0pKCk7IC8vIFRlc3QgX3dyaXRhYmxlU3RhdGUgZm9yIGluaGVyaXRhbmNlIHRvIGFjY291bnQgZm9yIER1cGxleCBzdHJlYW1zLFxuLy8gd2hvc2UgcHJvdG90eXBlIGNoYWluIG9ubHkgcG9pbnRzIHRvIFJlYWRhYmxlLlxuXG5cbnZhciByZWFsSGFzSW5zdGFuY2U7XG5cbmlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5oYXNJbnN0YW5jZSAmJiB0eXBlb2YgRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgcmVhbEhhc0luc3RhbmNlID0gRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV07XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZSwgU3ltYm9sLmhhc0luc3RhbmNlLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKG9iamVjdCkge1xuICAgICAgaWYgKHJlYWxIYXNJbnN0YW5jZS5jYWxsKHRoaXMsIG9iamVjdCkpIHJldHVybiB0cnVlO1xuICAgICAgaWYgKHRoaXMgIT09IFdyaXRhYmxlKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gb2JqZWN0ICYmIG9iamVjdC5fd3JpdGFibGVTdGF0ZSBpbnN0YW5jZW9mIFdyaXRhYmxlU3RhdGU7XG4gICAgfVxuICB9KTtcbn0gZWxzZSB7XG4gIHJlYWxIYXNJbnN0YW5jZSA9IGZ1bmN0aW9uIHJlYWxIYXNJbnN0YW5jZShvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgdGhpcztcbiAgfTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpOyAvLyBXcml0YWJsZSBjdG9yIGlzIGFwcGxpZWQgdG8gRHVwbGV4ZXMsIHRvby5cbiAgLy8gYHJlYWxIYXNJbnN0YW5jZWAgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgdXNpbmcgcGxhaW4gYGluc3RhbmNlb2ZgXG4gIC8vIHdvdWxkIHJldHVybiBmYWxzZSwgYXMgbm8gYF93cml0YWJsZVN0YXRlYCBwcm9wZXJ0eSBpcyBhdHRhY2hlZC5cbiAgLy8gVHJ5aW5nIHRvIHVzZSB0aGUgY3VzdG9tIGBpbnN0YW5jZW9mYCBmb3IgV3JpdGFibGUgaGVyZSB3aWxsIGFsc28gYnJlYWsgdGhlXG4gIC8vIE5vZGUuanMgTGF6eVRyYW5zZm9ybSBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaGFzIGEgbm9uLXRyaXZpYWwgZ2V0dGVyIGZvclxuICAvLyBgX3dyaXRhYmxlU3RhdGVgIHRoYXQgd291bGQgbGVhZCB0byBpbmZpbml0ZSByZWN1cnNpb24uXG4gIC8vIENoZWNraW5nIGZvciBhIFN0cmVhbS5EdXBsZXggaW5zdGFuY2UgaXMgZmFzdGVyIGhlcmUgaW5zdGVhZCBvZiBpbnNpZGVcbiAgLy8gdGhlIFdyaXRhYmxlU3RhdGUgY29uc3RydWN0b3IsIGF0IGxlYXN0IHdpdGggVjggNi41XG5cbiAgdmFyIGlzRHVwbGV4ID0gdGhpcyBpbnN0YW5jZW9mIER1cGxleDtcbiAgaWYgKCFpc0R1cGxleCAmJiAhcmVhbEhhc0luc3RhbmNlLmNhbGwoV3JpdGFibGUsIHRoaXMpKSByZXR1cm4gbmV3IFdyaXRhYmxlKG9wdGlvbnMpO1xuICB0aGlzLl93cml0YWJsZVN0YXRlID0gbmV3IFdyaXRhYmxlU3RhdGUob3B0aW9ucywgdGhpcywgaXNEdXBsZXgpOyAvLyBsZWdhY3kuXG5cbiAgdGhpcy53cml0YWJsZSA9IHRydWU7XG5cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGUgPT09ICdmdW5jdGlvbicpIHRoaXMuX3dyaXRlID0gb3B0aW9ucy53cml0ZTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGV2ID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZXYgPSBvcHRpb25zLndyaXRldjtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZGVzdHJveSA9IG9wdGlvbnMuZGVzdHJveTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmluYWwgPT09ICdmdW5jdGlvbicpIHRoaXMuX2ZpbmFsID0gb3B0aW9ucy5maW5hbDtcbiAgfVxuXG4gIFN0cmVhbS5jYWxsKHRoaXMpO1xufSAvLyBPdGhlcndpc2UgcGVvcGxlIGNhbiBwaXBlIFdyaXRhYmxlIHN0cmVhbXMsIHdoaWNoIGlzIGp1c3Qgd3JvbmcuXG5cblxuV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7XG4gIGVycm9yT3JEZXN0cm95KHRoaXMsIG5ldyBFUlJfU1RSRUFNX0NBTk5PVF9QSVBFKCkpO1xufTtcblxuZnVuY3Rpb24gd3JpdGVBZnRlckVuZChzdHJlYW0sIGNiKSB7XG4gIHZhciBlciA9IG5ldyBFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORCgpOyAvLyBUT0RPOiBkZWZlciBlcnJvciBldmVudHMgY29uc2lzdGVudGx5IGV2ZXJ5d2hlcmUsIG5vdCBqdXN0IHRoZSBjYlxuXG4gIGVycm9yT3JEZXN0cm95KHN0cmVhbSwgZXIpO1xuICBwcm9jZXNzLm5leHRUaWNrKGNiLCBlcik7XG59IC8vIENoZWNrcyB0aGF0IGEgdXNlci1zdXBwbGllZCBjaHVuayBpcyB2YWxpZCwgZXNwZWNpYWxseSBmb3IgdGhlIHBhcnRpY3VsYXJcbi8vIG1vZGUgdGhlIHN0cmVhbSBpcyBpbi4gQ3VycmVudGx5IHRoaXMgbWVhbnMgdGhhdCBgbnVsbGAgaXMgbmV2ZXIgYWNjZXB0ZWRcbi8vIGFuZCB1bmRlZmluZWQvbm9uLXN0cmluZyB2YWx1ZXMgYXJlIG9ubHkgYWxsb3dlZCBpbiBvYmplY3QgbW9kZS5cblxuXG5mdW5jdGlvbiB2YWxpZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBjYikge1xuICB2YXIgZXI7XG5cbiAgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgZXIgPSBuZXcgRVJSX1NUUkVBTV9OVUxMX1ZBTFVFUygpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlciA9IG5ldyBFUlJfSU5WQUxJRF9BUkdfVFlQRSgnY2h1bmsnLCBbJ3N0cmluZycsICdCdWZmZXInXSwgY2h1bmspO1xuICB9XG5cbiAgaWYgKGVyKSB7XG4gICAgZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBlcik7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhjYiwgZXIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5Xcml0YWJsZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuICB2YXIgcmV0ID0gZmFsc2U7XG5cbiAgdmFyIGlzQnVmID0gIXN0YXRlLm9iamVjdE1vZGUgJiYgX2lzVWludDhBcnJheShjaHVuayk7XG5cbiAgaWYgKGlzQnVmICYmICFCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSB7XG4gICAgY2h1bmsgPSBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGVuY29kaW5nO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfVxuXG4gIGlmIChpc0J1ZikgZW5jb2RpbmcgPSAnYnVmZmVyJztlbHNlIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSBjYiA9IG5vcDtcbiAgaWYgKHN0YXRlLmVuZGluZykgd3JpdGVBZnRlckVuZCh0aGlzLCBjYik7ZWxzZSBpZiAoaXNCdWYgfHwgdmFsaWRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssIGNiKSkge1xuICAgIHN0YXRlLnBlbmRpbmdjYisrO1xuICAgIHJldCA9IHdyaXRlT3JCdWZmZXIodGhpcywgc3RhdGUsIGlzQnVmLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLmNvcmsgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3dyaXRhYmxlU3RhdGUuY29ya2VkKys7XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUudW5jb3JrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIGlmIChzdGF0ZS5jb3JrZWQpIHtcbiAgICBzdGF0ZS5jb3JrZWQtLTtcbiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiYgIXN0YXRlLmNvcmtlZCAmJiAhc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyAmJiBzdGF0ZS5idWZmZXJlZFJlcXVlc3QpIGNsZWFyQnVmZmVyKHRoaXMsIHN0YXRlKTtcbiAgfVxufTtcblxuV3JpdGFibGUucHJvdG90eXBlLnNldERlZmF1bHRFbmNvZGluZyA9IGZ1bmN0aW9uIHNldERlZmF1bHRFbmNvZGluZyhlbmNvZGluZykge1xuICAvLyBub2RlOjpQYXJzZUVuY29kaW5nKCkgcmVxdWlyZXMgbG93ZXIgY2FzZS5cbiAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycpIGVuY29kaW5nID0gZW5jb2RpbmcudG9Mb3dlckNhc2UoKTtcbiAgaWYgKCEoWydoZXgnLCAndXRmOCcsICd1dGYtOCcsICdhc2NpaScsICdiaW5hcnknLCAnYmFzZTY0JywgJ3VjczInLCAndWNzLTInLCAndXRmMTZsZScsICd1dGYtMTZsZScsICdyYXcnXS5pbmRleE9mKChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpKSA+IC0xKSkgdGhyb3cgbmV3IEVSUl9VTktOT1dOX0VOQ09ESU5HKGVuY29kaW5nKTtcbiAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZWZhdWx0RW5jb2RpbmcgPSBlbmNvZGluZztcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUucHJvdG90eXBlLCAnd3JpdGFibGVCdWZmZXInLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyKCk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBkZWNvZGVDaHVuayhzdGF0ZSwgY2h1bmssIGVuY29kaW5nKSB7XG4gIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJiBzdGF0ZS5kZWNvZGVTdHJpbmdzICE9PSBmYWxzZSAmJiB0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7XG4gICAgY2h1bmsgPSBCdWZmZXIuZnJvbShjaHVuaywgZW5jb2RpbmcpO1xuICB9XG5cbiAgcmV0dXJuIGNodW5rO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUucHJvdG90eXBlLCAnd3JpdGFibGVIaWdoV2F0ZXJNYXJrJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICB9XG59KTsgLy8gaWYgd2UncmUgYWxyZWFkeSB3cml0aW5nIHNvbWV0aGluZywgdGhlbiBqdXN0IHB1dCB0aGlzXG4vLyBpbiB0aGUgcXVldWUsIGFuZCB3YWl0IG91ciB0dXJuLiAgT3RoZXJ3aXNlLCBjYWxsIF93cml0ZVxuLy8gSWYgd2UgcmV0dXJuIGZhbHNlLCB0aGVuIHdlIG5lZWQgYSBkcmFpbiBldmVudCwgc28gc2V0IHRoYXQgZmxhZy5cblxuZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBpc0J1ZiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBpZiAoIWlzQnVmKSB7XG4gICAgdmFyIG5ld0NodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7XG5cbiAgICBpZiAoY2h1bmsgIT09IG5ld0NodW5rKSB7XG4gICAgICBpc0J1ZiA9IHRydWU7XG4gICAgICBlbmNvZGluZyA9ICdidWZmZXInO1xuICAgICAgY2h1bmsgPSBuZXdDaHVuaztcbiAgICB9XG4gIH1cblxuICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG4gIHN0YXRlLmxlbmd0aCArPSBsZW47XG4gIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrOyAvLyB3ZSBtdXN0IGVuc3VyZSB0aGF0IHByZXZpb3VzIG5lZWREcmFpbiB3aWxsIG5vdCBiZSByZXNldCB0byBmYWxzZS5cblxuICBpZiAoIXJldCkgc3RhdGUubmVlZERyYWluID0gdHJ1ZTtcblxuICBpZiAoc3RhdGUud3JpdGluZyB8fCBzdGF0ZS5jb3JrZWQpIHtcbiAgICB2YXIgbGFzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7XG4gICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IHtcbiAgICAgIGNodW5rOiBjaHVuayxcbiAgICAgIGVuY29kaW5nOiBlbmNvZGluZyxcbiAgICAgIGlzQnVmOiBpc0J1ZixcbiAgICAgIGNhbGxiYWNrOiBjYixcbiAgICAgIG5leHQ6IG51bGxcbiAgICB9O1xuXG4gICAgaWYgKGxhc3QpIHtcbiAgICAgIGxhc3QubmV4dCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7XG4gICAgfVxuXG4gICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgKz0gMTtcbiAgfSBlbHNlIHtcbiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB3cml0ZXYsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBzdGF0ZS53cml0ZWxlbiA9IGxlbjtcbiAgc3RhdGUud3JpdGVjYiA9IGNiO1xuICBzdGF0ZS53cml0aW5nID0gdHJ1ZTtcbiAgc3RhdGUuc3luYyA9IHRydWU7XG4gIGlmIChzdGF0ZS5kZXN0cm95ZWQpIHN0YXRlLm9ud3JpdGUobmV3IEVSUl9TVFJFQU1fREVTVFJPWUVEKCd3cml0ZScpKTtlbHNlIGlmICh3cml0ZXYpIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZS5vbndyaXRlKTtlbHNlIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZS5vbndyaXRlKTtcbiAgc3RhdGUuc3luYyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKSB7XG4gIC0tc3RhdGUucGVuZGluZ2NiO1xuXG4gIGlmIChzeW5jKSB7XG4gICAgLy8gZGVmZXIgdGhlIGNhbGxiYWNrIGlmIHdlIGFyZSBiZWluZyBjYWxsZWQgc3luY2hyb25vdXNseVxuICAgIC8vIHRvIGF2b2lkIHBpbGluZyB1cCB0aGluZ3Mgb24gdGhlIHN0YWNrXG4gICAgcHJvY2Vzcy5uZXh0VGljayhjYiwgZXIpOyAvLyB0aGlzIGNhbiBlbWl0IGZpbmlzaCwgYW5kIGl0IHdpbGwgYWx3YXlzIGhhcHBlblxuICAgIC8vIGFmdGVyIGVycm9yXG5cbiAgICBwcm9jZXNzLm5leHRUaWNrKGZpbmlzaE1heWJlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTtcbiAgICBlcnJvck9yRGVzdHJveShzdHJlYW0sIGVyKTtcbiAgfSBlbHNlIHtcbiAgICAvLyB0aGUgY2FsbGVyIGV4cGVjdCB0aGlzIHRvIGhhcHBlbiBiZWZvcmUgaWZcbiAgICAvLyBpdCBpcyBhc3luY1xuICAgIGNiKGVyKTtcbiAgICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTtcbiAgICBlcnJvck9yRGVzdHJveShzdHJlYW0sIGVyKTsgLy8gdGhpcyBjYW4gZW1pdCBmaW5pc2gsIGJ1dCBmaW5pc2ggbXVzdFxuICAgIC8vIGFsd2F5cyBmb2xsb3cgZXJyb3JcblxuICAgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkge1xuICBzdGF0ZS53cml0aW5nID0gZmFsc2U7XG4gIHN0YXRlLndyaXRlY2IgPSBudWxsO1xuICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47XG4gIHN0YXRlLndyaXRlbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jO1xuICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiO1xuICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgRVJSX01VTFRJUExFX0NBTExCQUNLKCk7XG4gIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7XG4gIGlmIChlcikgb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYik7ZWxzZSB7XG4gICAgLy8gQ2hlY2sgaWYgd2UncmUgYWN0dWFsbHkgcmVhZHkgdG8gZmluaXNoLCBidXQgZG9uJ3QgZW1pdCB5ZXRcbiAgICB2YXIgZmluaXNoZWQgPSBuZWVkRmluaXNoKHN0YXRlKSB8fCBzdHJlYW0uZGVzdHJveWVkO1xuXG4gICAgaWYgKCFmaW5pc2hlZCAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkge1xuICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soYWZ0ZXJXcml0ZSwgc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikge1xuICBpZiAoIWZpbmlzaGVkKSBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7XG4gIHN0YXRlLnBlbmRpbmdjYi0tO1xuICBjYigpO1xuICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcbn0gLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3Rcbi8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm5cbi8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuXG5cblxuZnVuY3Rpb24gb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5uZWVkRHJhaW4pIHtcbiAgICBzdGF0ZS5uZWVkRHJhaW4gPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZHJhaW4nKTtcbiAgfVxufSAvLyBpZiB0aGVyZSdzIHNvbWV0aGluZyBpbiB0aGUgYnVmZmVyIHdhaXRpbmcsIHRoZW4gcHJvY2VzcyBpdFxuXG5cbmZ1bmN0aW9uIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpIHtcbiAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IHRydWU7XG4gIHZhciBlbnRyeSA9IHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdDtcblxuICBpZiAoc3RyZWFtLl93cml0ZXYgJiYgZW50cnkgJiYgZW50cnkubmV4dCkge1xuICAgIC8vIEZhc3QgY2FzZSwgd3JpdGUgZXZlcnl0aGluZyB1c2luZyBfd3JpdGV2KClcbiAgICB2YXIgbCA9IHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50O1xuICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXkobCk7XG4gICAgdmFyIGhvbGRlciA9IHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZTtcbiAgICBob2xkZXIuZW50cnkgPSBlbnRyeTtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHZhciBhbGxCdWZmZXJzID0gdHJ1ZTtcblxuICAgIHdoaWxlIChlbnRyeSkge1xuICAgICAgYnVmZmVyW2NvdW50XSA9IGVudHJ5O1xuICAgICAgaWYgKCFlbnRyeS5pc0J1ZikgYWxsQnVmZmVycyA9IGZhbHNlO1xuICAgICAgZW50cnkgPSBlbnRyeS5uZXh0O1xuICAgICAgY291bnQgKz0gMTtcbiAgICB9XG5cbiAgICBidWZmZXIuYWxsQnVmZmVycyA9IGFsbEJ1ZmZlcnM7XG4gICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB0cnVlLCBzdGF0ZS5sZW5ndGgsIGJ1ZmZlciwgJycsIGhvbGRlci5maW5pc2gpOyAvLyBkb1dyaXRlIGlzIGFsbW9zdCBhbHdheXMgYXN5bmMsIGRlZmVyIHRoZXNlIHRvIHNhdmUgYSBiaXQgb2YgdGltZVxuICAgIC8vIGFzIHRoZSBob3QgcGF0aCBlbmRzIHdpdGggZG9Xcml0ZVxuXG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG5cbiAgICBpZiAoaG9sZGVyLm5leHQpIHtcbiAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSA9IGhvbGRlci5uZXh0O1xuICAgICAgaG9sZGVyLm5leHQgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdChzdGF0ZSk7XG4gICAgfVxuXG4gICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFNsb3cgY2FzZSwgd3JpdGUgY2h1bmtzIG9uZS1ieS1vbmVcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIHZhciBjaHVuayA9IGVudHJ5LmNodW5rO1xuICAgICAgdmFyIGVuY29kaW5nID0gZW50cnkuZW5jb2Rpbmc7XG4gICAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjaztcbiAgICAgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcbiAgICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7XG4gICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudC0tOyAvLyBpZiB3ZSBkaWRuJ3QgY2FsbCB0aGUgb253cml0ZSBpbW1lZGlhdGVseSwgdGhlblxuICAgICAgLy8gaXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHdhaXQgdW50aWwgaXQgZG9lcy5cbiAgICAgIC8vIGFsc28sIHRoYXQgbWVhbnMgdGhhdCB0aGUgY2h1bmsgYW5kIGNiIGFyZSBjdXJyZW50bHlcbiAgICAgIC8vIGJlaW5nIHByb2Nlc3NlZCwgc28gbW92ZSB0aGUgYnVmZmVyIGNvdW50ZXIgcGFzdCB0aGVtLlxuXG4gICAgICBpZiAoc3RhdGUud3JpdGluZykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZW50cnkgPT09IG51bGwpIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsO1xuICB9XG5cbiAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gZW50cnk7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNiKG5ldyBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCgnX3dyaXRlKCknKSk7XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuX3dyaXRldiA9IG51bGw7XG5cbldyaXRhYmxlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIGlmICh0eXBlb2YgY2h1bmsgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGNodW5rO1xuICAgIGNodW5rID0gbnVsbDtcbiAgICBlbmNvZGluZyA9IG51bGw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBlbmNvZGluZztcbiAgICBlbmNvZGluZyA9IG51bGw7XG4gIH1cblxuICBpZiAoY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCkgdGhpcy53cml0ZShjaHVuaywgZW5jb2RpbmcpOyAvLyAuZW5kKCkgZnVsbHkgdW5jb3Jrc1xuXG4gIGlmIChzdGF0ZS5jb3JrZWQpIHtcbiAgICBzdGF0ZS5jb3JrZWQgPSAxO1xuICAgIHRoaXMudW5jb3JrKCk7XG4gIH0gLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLlxuXG5cbiAgaWYgKCFzdGF0ZS5lbmRpbmcpIGVuZFdyaXRhYmxlKHRoaXMsIHN0YXRlLCBjYik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlLnByb3RvdHlwZSwgJ3dyaXRhYmxlTGVuZ3RoJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5sZW5ndGg7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBuZWVkRmluaXNoKHN0YXRlKSB7XG4gIHJldHVybiBzdGF0ZS5lbmRpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLndyaXRpbmc7XG59XG5cbmZ1bmN0aW9uIGNhbGxGaW5hbChzdHJlYW0sIHN0YXRlKSB7XG4gIHN0cmVhbS5fZmluYWwoZnVuY3Rpb24gKGVycikge1xuICAgIHN0YXRlLnBlbmRpbmdjYi0tO1xuXG4gICAgaWYgKGVycikge1xuICAgICAgZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBlcnIpO1xuICAgIH1cblxuICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0uZW1pdCgncHJlZmluaXNoJyk7XG4gICAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnByZWZpbmlzaGVkICYmICFzdGF0ZS5maW5hbENhbGxlZCkge1xuICAgIGlmICh0eXBlb2Ygc3RyZWFtLl9maW5hbCA9PT0gJ2Z1bmN0aW9uJyAmJiAhc3RhdGUuZGVzdHJveWVkKSB7XG4gICAgICBzdGF0ZS5wZW5kaW5nY2IrKztcbiAgICAgIHN0YXRlLmZpbmFsQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soY2FsbEZpbmFsLCBzdHJlYW0sIHN0YXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUucHJlZmluaXNoZWQgPSB0cnVlO1xuICAgICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKSB7XG4gIHZhciBuZWVkID0gbmVlZEZpbmlzaChzdGF0ZSk7XG5cbiAgaWYgKG5lZWQpIHtcbiAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG5cbiAgICBpZiAoc3RhdGUucGVuZGluZ2NiID09PSAwKSB7XG4gICAgICBzdGF0ZS5maW5pc2hlZCA9IHRydWU7XG4gICAgICBzdHJlYW0uZW1pdCgnZmluaXNoJyk7XG5cbiAgICAgIGlmIChzdGF0ZS5hdXRvRGVzdHJveSkge1xuICAgICAgICAvLyBJbiBjYXNlIG9mIGR1cGxleCBzdHJlYW1zIHdlIG5lZWQgYSB3YXkgdG8gZGV0ZWN0XG4gICAgICAgIC8vIGlmIHRoZSByZWFkYWJsZSBzaWRlIGlzIHJlYWR5IGZvciBhdXRvRGVzdHJveSBhcyB3ZWxsXG4gICAgICAgIHZhciByU3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cbiAgICAgICAgaWYgKCFyU3RhdGUgfHwgclN0YXRlLmF1dG9EZXN0cm95ICYmIHJTdGF0ZS5lbmRFbWl0dGVkKSB7XG4gICAgICAgICAgc3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZWVkO1xufVxuXG5mdW5jdGlvbiBlbmRXcml0YWJsZShzdHJlYW0sIHN0YXRlLCBjYikge1xuICBzdGF0ZS5lbmRpbmcgPSB0cnVlO1xuICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcblxuICBpZiAoY2IpIHtcbiAgICBpZiAoc3RhdGUuZmluaXNoZWQpIHByb2Nlc3MubmV4dFRpY2soY2IpO2Vsc2Ugc3RyZWFtLm9uY2UoJ2ZpbmlzaCcsIGNiKTtcbiAgfVxuXG4gIHN0YXRlLmVuZGVkID0gdHJ1ZTtcbiAgc3RyZWFtLndyaXRhYmxlID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIG9uQ29ya2VkRmluaXNoKGNvcmtSZXEsIHN0YXRlLCBlcnIpIHtcbiAgdmFyIGVudHJ5ID0gY29ya1JlcS5lbnRyeTtcbiAgY29ya1JlcS5lbnRyeSA9IG51bGw7XG5cbiAgd2hpbGUgKGVudHJ5KSB7XG4gICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7XG4gICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgY2IoZXJyKTtcbiAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gIH0gLy8gcmV1c2UgdGhlIGZyZWUgY29ya1JlcS5cblxuXG4gIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gY29ya1JlcTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlLnByb3RvdHlwZSwgJ2Rlc3Ryb3llZCcsIHtcbiAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGVcbiAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluXG4gIC8vIHVzZXJsYW5kIHdpbGwgZmFpbFxuICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZDtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAvLyB3ZSBpZ25vcmUgdGhlIHZhbHVlIGlmIHRoZSBzdHJlYW1cbiAgICAvLyBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgeWV0XG4gICAgaWYgKCF0aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LCB0aGUgdXNlciBpcyBleHBsaWNpdGx5XG4gICAgLy8gbWFuYWdpbmcgZGVzdHJveWVkXG5cblxuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gIH1cbn0pO1xuV3JpdGFibGUucHJvdG90eXBlLmRlc3Ryb3kgPSBkZXN0cm95SW1wbC5kZXN0cm95O1xuV3JpdGFibGUucHJvdG90eXBlLl91bmRlc3Ryb3kgPSBkZXN0cm95SW1wbC51bmRlc3Ryb3k7XG5cbldyaXRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNiKSB7XG4gIGNiKGVycik7XG59OyIsImNvbnN0IGNvbW1vbmpzUmVnaXN0ZXIgPSByZXF1aXJlKCdcdTAwMDBjb21tb25qc0hlbHBlcnMuanM/Y29tbW9uanNSZWdpc3RlcicpO1xuY29tbW9uanNSZWdpc3RlcihcIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9kdXBsZXguanNcIiwgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykge1xuICAvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbi8vIGEgZHVwbGV4IHN0cmVhbSBpcyBqdXN0IGEgc3RyZWFtIHRoYXQgaXMgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUuXG4vLyBTaW5jZSBKUyBkb2Vzbid0IGhhdmUgbXVsdGlwbGUgcHJvdG90eXBhbCBpbmhlcml0YW5jZSwgdGhpcyBjbGFzc1xuLy8gcHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gUmVhZGFibGUsIGFuZCB0aGVuIHBhcmFzaXRpY2FsbHkgZnJvbVxuLy8gV3JpdGFibGUuXG4ndXNlIHN0cmljdCc7XG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIGtleXMgPSBbXTtcblxuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAga2V5cy5wdXNoKGtleSk7XG4gIH1cblxuICByZXR1cm4ga2V5cztcbn07XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG5tb2R1bGUuZXhwb3J0cyA9IER1cGxleDtcblxudmFyIFJlYWRhYmxlID0gcmVxdWlyZSgnLi9fc3RyZWFtX3JlYWRhYmxlJyk7XG5cbnZhciBXcml0YWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV93cml0YWJsZScpO1xuXG5yZXF1aXJlKCdpbmhlcml0cycpKER1cGxleCwgUmVhZGFibGUpO1xuXG57XG4gIC8vIEFsbG93IHRoZSBrZXlzIGFycmF5IHRvIGJlIEdDJ2VkLlxuICB2YXIga2V5cyA9IG9iamVjdEtleXMoV3JpdGFibGUucHJvdG90eXBlKTtcblxuICBmb3IgKHZhciB2ID0gMDsgdiA8IGtleXMubGVuZ3RoOyB2KyspIHtcbiAgICB2YXIgbWV0aG9kID0ga2V5c1t2XTtcbiAgICBpZiAoIUR1cGxleC5wcm90b3R5cGVbbWV0aG9kXSkgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07XG4gIH1cbn1cblxuZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpIHJldHVybiBuZXcgRHVwbGV4KG9wdGlvbnMpO1xuICBSZWFkYWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICBXcml0YWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICB0aGlzLmFsbG93SGFsZk9wZW4gPSB0cnVlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMucmVhZGFibGUgPT09IGZhbHNlKSB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG4gICAgaWYgKG9wdGlvbnMud3JpdGFibGUgPT09IGZhbHNlKSB0aGlzLndyaXRhYmxlID0gZmFsc2U7XG5cbiAgICBpZiAob3B0aW9ucy5hbGxvd0hhbGZPcGVuID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7XG4gICAgICB0aGlzLm9uY2UoJ2VuZCcsIG9uZW5kKTtcbiAgICB9XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KER1cGxleC5wcm90b3R5cGUsICd3cml0YWJsZUhpZ2hXYXRlck1hcmsnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmhpZ2hXYXRlck1hcms7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KER1cGxleC5wcm90b3R5cGUsICd3cml0YWJsZUJ1ZmZlcicsIHtcbiAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGVcbiAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluXG4gIC8vIHVzZXJsYW5kIHdpbGwgZmFpbFxuICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUgJiYgdGhpcy5fd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIoKTtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRHVwbGV4LnByb3RvdHlwZSwgJ3dyaXRhYmxlTGVuZ3RoJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5sZW5ndGg7XG4gIH1cbn0pOyAvLyB0aGUgbm8taGFsZi1vcGVuIGVuZm9yY2VyXG5cbmZ1bmN0aW9uIG9uZW5kKCkge1xuICAvLyBJZiB0aGUgd3JpdGFibGUgc2lkZSBlbmRlZCwgdGhlbiB3ZSdyZSBvay5cbiAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQpIHJldHVybjsgLy8gbm8gbW9yZSBkYXRhIGNhbiBiZSB3cml0dGVuLlxuICAvLyBCdXQgYWxsb3cgbW9yZSB3cml0ZXMgdG8gaGFwcGVuIGluIHRoaXMgdGljay5cblxuICBwcm9jZXNzLm5leHRUaWNrKG9uRW5kTlQsIHRoaXMpO1xufVxuXG5mdW5jdGlvbiBvbkVuZE5UKHNlbGYpIHtcbiAgc2VsZi5lbmQoKTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KER1cGxleC5wcm90b3R5cGUsICdkZXN0cm95ZWQnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlID09PSB1bmRlZmluZWQgfHwgdGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgIC8vIHdlIGlnbm9yZSB0aGUgdmFsdWUgaWYgdGhlIHN0cmVhbVxuICAgIC8vIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCB5ZXRcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuXG5cbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHZhbHVlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gIH1cbn0pO1xufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgVGlueUVtaXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFRpbnlFbWl0dGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUaW55RW1pdHRlcik7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ19fbGlzdGVuZXJzJywge1xuICAgICAgdmFsdWU6IHt9LFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogZmFsc2VcbiAgICB9KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhUaW55RW1pdHRlciwgW3tcbiAgICBrZXk6ICdlbWl0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdChldmVudE5hbWUpIHtcbiAgICAgIGlmICghdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdKSByZXR1cm4gdGhpcztcblxuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgIHZhciBoYW5kbGVyID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICBoYW5kbGVyLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbmNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25jZShldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHZhciBvbmNlID0gZnVuY3Rpb24gb25jZSgpIHtcbiAgICAgICAgX3RoaXMub2ZmKGV2ZW50TmFtZSwgb25jZSk7XG4gICAgICAgIGhhbmRsZXIuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHRoaXMub24oZXZlbnROYW1lLCBvbmNlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uKGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgICAgaWYgKCF0aGlzLl9fbGlzdGVuZXJzW2V2ZW50TmFtZV0pIHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdO1xuXG4gICAgICB0aGlzLl9fbGlzdGVuZXJzW2V2ZW50TmFtZV0ucHVzaChoYW5kbGVyKTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb2ZmJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgICAgaWYgKGhhbmRsZXIpIHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSA9IHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXS5maWx0ZXIoZnVuY3Rpb24gKGgpIHtcbiAgICAgICAgcmV0dXJuIGggIT09IGhhbmRsZXI7XG4gICAgICB9KTtlbHNlIHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVGlueUVtaXR0ZXI7XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gVGlueUVtaXR0ZXI7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2dldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgeyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgcmV0dXJuIGdldChwYXJlbnQsIHByb3BlcnR5LCByZWNlaXZlcik7IH0gfSBlbHNlIGlmIChcInZhbHVlXCIgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH07XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIFRpbnlFbWl0dGVyID0gcmVxdWlyZSgnLi90aW55LWVtaXR0ZXInKTtcblxudmFyIE1FU1NBR0VfUkVTVUxUID0gMDtcbnZhciBNRVNTQUdFX0VWRU5UID0gMTtcblxudmFyIFJFU1VMVF9FUlJPUiA9IDA7XG52YXIgUkVTVUxUX1NVQ0NFU1MgPSAxO1xuXG52YXIgREVGQVVMVF9IQU5ETEVSID0gJ21haW4nO1xuXG52YXIgaXNQcm9taXNlID0gZnVuY3Rpb24gaXNQcm9taXNlKG8pIHtcbiAgcmV0dXJuICh0eXBlb2YgbyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YobykpID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygby50aGVuID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvLmNhdGNoID09PSAnZnVuY3Rpb24nO1xufTtcblxuZnVuY3Rpb24gUmVnaXN0ZXJQcm9taXNlKGZuKSB7XG4gIHZhciBoYW5kbGVycyA9IF9kZWZpbmVQcm9wZXJ0eSh7fSwgREVGQVVMVF9IQU5ETEVSLCBmbik7XG4gIHZhciBzZW5kUG9zdE1lc3NhZ2UgPSBzZWxmLnBvc3RNZXNzYWdlLmJpbmQoc2VsZik7XG5cbiAgdmFyIHNlcnZlciA9IG5ldyAoZnVuY3Rpb24gKF9UaW55RW1pdHRlcikge1xuICAgIF9pbmhlcml0cyhXb3JrZXJSZWdpc3RlciwgX1RpbnlFbWl0dGVyKTtcblxuICAgIGZ1bmN0aW9uIFdvcmtlclJlZ2lzdGVyKCkge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdvcmtlclJlZ2lzdGVyKTtcblxuICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChXb3JrZXJSZWdpc3Rlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFdvcmtlclJlZ2lzdGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFdvcmtlclJlZ2lzdGVyLCBbe1xuICAgICAga2V5OiAnZW1pdCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdChldmVudE5hbWUpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICBzZW5kUG9zdE1lc3NhZ2UoeyBldmVudE5hbWU6IGV2ZW50TmFtZSwgYXJnczogYXJncyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnZW1pdExvY2FsbHknLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVtaXRMb2NhbGx5KGV2ZW50TmFtZSkge1xuICAgICAgICB2YXIgX2dldDI7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIgPiAxID8gX2xlbjIgLSAxIDogMCksIF9rZXkyID0gMTsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICAgIGFyZ3NbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICAgIH1cblxuICAgICAgICAoX2dldDIgPSBfZ2V0KFdvcmtlclJlZ2lzdGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFdvcmtlclJlZ2lzdGVyLnByb3RvdHlwZSksICdlbWl0JywgdGhpcykpLmNhbGwuYXBwbHkoX2dldDIsIFt0aGlzLCBldmVudE5hbWVdLmNvbmNhdChhcmdzKSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnb3BlcmF0aW9uJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVyYXRpb24obmFtZSwgaGFuZGxlcikge1xuICAgICAgICBoYW5kbGVyc1tuYW1lXSA9IGhhbmRsZXI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBXb3JrZXJSZWdpc3RlcjtcbiAgfShUaW55RW1pdHRlcikpKCk7XG5cbiAgdmFyIHJ1biA9IGZ1bmN0aW9uIHJ1bihtZXNzYWdlSWQsIHBheWxvYWQsIGhhbmRsZXJOYW1lKSB7XG5cbiAgICB2YXIgb25TdWNjZXNzID0gZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge1xuICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQgaW5zdGFuY2VvZiBUcmFuc2ZlcmFibGVSZXNwb25zZSkge1xuICAgICAgICBzZW5kUmVzdWx0KG1lc3NhZ2VJZCwgUkVTVUxUX1NVQ0NFU1MsIHJlc3VsdC5wYXlsb2FkLCByZXN1bHQudHJhbnNmZXJhYmxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbmRSZXN1bHQobWVzc2FnZUlkLCBSRVNVTFRfU1VDQ0VTUywgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKGUpIHtcbiAgICAgIHNlbmRSZXN1bHQobWVzc2FnZUlkLCBSRVNVTFRfRVJST1IsIHtcbiAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgICBzdGFjazogZS5zdGFja1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICB2YXIgcmVzdWx0ID0gcnVuRm4obWVzc2FnZUlkLCBwYXlsb2FkLCBoYW5kbGVyTmFtZSk7XG4gICAgICBpZiAoaXNQcm9taXNlKHJlc3VsdCkpIHtcbiAgICAgICAgcmVzdWx0LnRoZW4ob25TdWNjZXNzKS5jYXRjaChvbkVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9uU3VjY2VzcyhyZXN1bHQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG9uRXJyb3IoZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBydW5GbiA9IGZ1bmN0aW9uIHJ1bkZuKG1lc3NhZ2VJZCwgcGF5bG9hZCwgaGFuZGxlck5hbWUpIHtcbiAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2hhbmRsZXJOYW1lIHx8IERFRkFVTFRfSEFORExFUl07XG4gICAgaWYgKCFoYW5kbGVyKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBmb3VuZCBoYW5kbGVyIGZvciB0aGlzIHJlcXVlc3QnKTtcblxuICAgIHJldHVybiBoYW5kbGVyKHBheWxvYWQsIHNlbmRFdmVudC5iaW5kKG51bGwsIG1lc3NhZ2VJZCkpO1xuICB9O1xuXG4gIHZhciBzZW5kUmVzdWx0ID0gZnVuY3Rpb24gc2VuZFJlc3VsdChtZXNzYWdlSWQsIHN1Y2Nlc3MsIHBheWxvYWQpIHtcbiAgICB2YXIgdHJhbnNmZXJhYmxlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBbXTtcblxuICAgIHNlbmRQb3N0TWVzc2FnZShbTUVTU0FHRV9SRVNVTFQsIG1lc3NhZ2VJZCwgc3VjY2VzcywgcGF5bG9hZF0sIHRyYW5zZmVyYWJsZSk7XG4gIH07XG5cbiAgdmFyIHNlbmRFdmVudCA9IGZ1bmN0aW9uIHNlbmRFdmVudChtZXNzYWdlSWQsIGV2ZW50TmFtZSwgcGF5bG9hZCkge1xuICAgIGlmICghZXZlbnROYW1lKSB0aHJvdyBuZXcgRXJyb3IoJ2V2ZW50TmFtZSBpcyByZXF1aXJlZCcpO1xuXG4gICAgaWYgKHR5cGVvZiBldmVudE5hbWUgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgRXJyb3IoJ2V2ZW50TmFtZSBzaG91bGQgYmUgc3RyaW5nJyk7XG5cbiAgICBzZW5kUG9zdE1lc3NhZ2UoW01FU1NBR0VfRVZFTlQsIG1lc3NhZ2VJZCwgZXZlbnROYW1lLCBwYXlsb2FkXSk7XG4gIH07XG5cbiAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICBydW4uYXBwbHkodW5kZWZpbmVkLCBfdG9Db25zdW1hYmxlQXJyYXkoZGF0YSkpO1xuICAgIH0gZWxzZSBpZiAoZGF0YSAmJiBkYXRhLmV2ZW50TmFtZSkge1xuICAgICAgc2VydmVyLmVtaXRMb2NhbGx5LmFwcGx5KHNlcnZlciwgW2RhdGEuZXZlbnROYW1lXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEuYXJncykpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBzZXJ2ZXI7XG59XG5cbnZhciBUcmFuc2ZlcmFibGVSZXNwb25zZSA9IGZ1bmN0aW9uIFRyYW5zZmVyYWJsZVJlc3BvbnNlKHBheWxvYWQsIHRyYW5zZmVyYWJsZSkge1xuICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHJhbnNmZXJhYmxlUmVzcG9uc2UpO1xuXG4gIHRoaXMucGF5bG9hZCA9IHBheWxvYWQ7XG4gIHRoaXMudHJhbnNmZXJhYmxlID0gdHJhbnNmZXJhYmxlO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWdpc3RlclByb21pc2U7XG5tb2R1bGUuZXhwb3J0cy5UcmFuc2ZlcmFibGVSZXNwb25zZSA9IFRyYW5zZmVyYWJsZVJlc3BvbnNlOyIsImltcG9ydCByZWdpc3RlcldlYndvcmtlciBmcm9tICd3ZWJ3b3JrZXItcHJvbWlzZS9saWIvcmVnaXN0ZXInO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLy8gcHJldHRpZXItaWdub3JlXG5yZWdpc3RlcldlYndvcmtlcihmdW5jdGlvbiAobWVzc2FnZSwgZW1pdCkge1xuICB2YXIgYXJyYXkgPSBtZXNzYWdlLmFycmF5O1xuICB2YXIgbWluID0gbWVzc2FnZS5taW47XG4gIHZhciBtYXggPSBtZXNzYWdlLm1heDtcblxuICB2YXIgb2Zmc2V0ID0gbWVzc2FnZS5jb21wb25lbnQgfHwgMDtcbiAgdmFyIHN0ZXAgPSBtZXNzYWdlLm51bWJlck9mQ29tcG9uZW50cyB8fCAxO1xuXG4gIHZhciBudW1iZXJPZkJpbnMgPSBtZXNzYWdlLm51bWJlck9mQmlucztcbiAgdmFyIGRlbHRhID0gbWF4IC0gbWluO1xuICB2YXIgaGlzdG9ncmFtID0gbmV3IEZsb2F0MzJBcnJheShudW1iZXJPZkJpbnMpO1xuICBoaXN0b2dyYW0uZmlsbCgwKTtcbiAgdmFyIGxlbiA9IGFycmF5Lmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IG9mZnNldDsgaSA8IGxlbjsgaSArPSBzdGVwKSB7XG4gICAgdmFyIGlkeCA9IE1hdGguZmxvb3IoXG4gICAgICAobnVtYmVyT2ZCaW5zIC0gMSkgKiAoTnVtYmVyKGFycmF5W2ldKSAtIG1pbikgLyBkZWx0YVxuICAgICk7XG4gICAgaGlzdG9ncmFtW2lkeF0gKz0gMTtcbiAgfVxuXG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoXG4gICAgbmV3IHJlZ2lzdGVyV2Vid29ya2VyLlRyYW5zZmVyYWJsZVJlc3BvbnNlKGhpc3RvZ3JhbSwgW2hpc3RvZ3JhbS5idWZmZXJdKVxuICApO1xufSk7XG4iXSwibmFtZXMiOlsicmVxdWlyZSQkMCIsImJhc2U2NCIsIl9yZXF1aXJlIiwiX3JlcXVpcmUyIiwiQnVmZmVyIiwib25jZSIsIl9kZWZpbmVQcm9wZXJ0eSIsImZpbmlzaGVkIiwicmVxdWlyZSQkMSIsImdsb2JhbCIsImdldEhpZ2hXYXRlck1hcmsiLCJyZXF1aXJlJCQyIiwiU3RyaW5nRGVjb2RlciIsImNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvciIsInJlcXVpcmUkJDMiLCJTdHJlYW0iLCJlcnJvck9yRGVzdHJveSIsImRlc3Ryb3lJbXBsIiwiY29tbW9uanNIZWxwZXJzLmNvbW1vbmpzUmVxdWlyZSIsIkJ1ZmZlckxpc3QiLCJyZXF1aXJlJCQ0IiwicmVxdWlyZSQkNSIsInJlcXVpcmUkJDYiLCJEdXBsZXgiLCJPdXJVaW50OEFycmF5IiwiX3VpbnQ4QXJyYXlUb0J1ZmZlciIsIl9pc1VpbnQ4QXJyYXkiLCJfcmVxdWlyZSRjb2RlcyIsIkVSUl9JTlZBTElEX0FSR19UWVBFIiwiRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQiLCJfY3JlYXRlQ2xhc3MiLCJfY2xhc3NDYWxsQ2hlY2siLCJUaW55RW1pdHRlciIsInJlZ2lzdGVyV2Vid29ya2VyIiwibWVzc2FnZSIsImVtaXQiLCJhcnJheSIsIm1pbiIsIm1heCIsIm9mZnNldCIsImNvbXBvbmVudCIsInN0ZXAiLCJudW1iZXJPZkNvbXBvbmVudHMiLCJudW1iZXJPZkJpbnMiLCJkZWx0YSIsImhpc3RvZ3JhbSIsIkZsb2F0MzJBcnJheSIsImZpbGwiLCJsZW4iLCJsZW5ndGgiLCJpIiwiaWR4IiwiTWF0aCIsImZsb29yIiwiTnVtYmVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJUcmFuc2ZlcmFibGVSZXNwb25zZSIsImJ1ZmZlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQUFBO0FBc0JBO0NB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QyxDQUFDLElBQUksQ0FBQztDQUN4QyxPQUFPLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBQztDQUM3QyxJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxLQUFJO0NBQy9CLEdBQUc7QUFDSDtDQUNBLEVBQUUsSUFBSSxlQUFlLEtBQUssQ0FBQyxFQUFFO0NBQzdCLElBQUksR0FBRztDQUNQLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUU7Q0FDekMsT0FBTyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDN0MsT0FBTyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUM7Q0FDN0MsSUFBSSxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksS0FBSTtDQUN0QyxJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxLQUFJO0NBQy9CLEdBQUc7QUFDSDtDQUNBLEVBQUUsT0FBTyxHQUFHO0NBQ1osQ0FBQztBQUNEO0NBQ0EsU0FBUyxlQUFlLEVBQUUsR0FBRyxFQUFFO0NBQy9CLEVBQUUsT0FBTyxNQUFNLENBQUMsR0FBRyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7Q0FDakMsSUFBSSxNQUFNLENBQUMsR0FBRyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7Q0FDNUIsSUFBSSxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7Q0FDM0IsSUFBSSxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztDQUN0QixDQUFDO0FBQ0Q7Q0FDQSxTQUFTLFdBQVcsRUFBRSxLQUFL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QUUsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUM7Q0FDNUIsRUFBRSxJQUFJLEtBQUssR0FBRyxJQUFJLElBQUksRUFBQztDQUN2QixFQUFFLElBQUksS0FBSyxHQUFHLENBQUMsRUFBQztDQUNoQixFQUFFLElBQUksQ0FBQyxHQUFHLElBQUksSUFBSSxNQUFNLEdBQUcsQ0FBQyxJQUFJLEVBQUM7Q0FDakMsRUFBRSxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBQztDQUN2QixFQUFFLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFDO0FBQzVCO0NBQ0EsRUFBRSxDQUFDLElBQUksRUFBQztBQUNSO0NBQ0EsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFDO0NBQy9CLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFDO0NBQ2hCLEVBQUUsS0FBSyxJQUFJLEtBQUk7Q0FDZixFQUFFLE9BQU8sS0FBSyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxFQUFFLEVBQUU7QUFDOUU7Q0FDQSxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUM7Q0FDL0IsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUM7Q0FDaEIsRUFBRSxLQUFLLElBQUksS0FBSTtDQUNmLEVBQUUsT0FBTyxLQUFLLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUUsRUFBRTtBQUM5RTtDQUNBLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO0NBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQUs7Q0FDakIsR0FBRyxNQUFNLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRTtDQUN6QixJQUFJLE9BQU8sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksUUFBUSxDQUFDO0NBQzlDLEdBQUcsTUFBTTtDQUNULElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUM7Q0FDN0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQUs7Q0FDakIsR0FBRztDQUNILEVBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM7Q0FDakQsRUFBQztBQUNEO0NBQ0EsU0FBYSxHQUFHLFVBQVUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUU7Q0FDckUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBQztDQUNiLEVBQUUsSUFBSSxJQUFJLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLElBQUksR0FBRyxFQUFDO0NBQ3BDLEVBQUUsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUM7Q0FDNUIsRUFBRSxJQUFJLEtBQUssR0FBRyxJQUFJLElBQUksRUFBQztDQUN2QixFQUFFLElBQUksRUFBRSxJQUFJLElBQUksS0FBSyxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUs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UyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFDO0NBQ2hDLFVBQVUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLE1BQU0sSUFBSSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUU7Q0FDM0UsWUFBWSxhQUFhLEdBQUcsQ0FBQyxTQUFTLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLFVBQVUsR0FBRyxJQUFJLEtBQUssR0FBRyxJQUFJLFNBQVMsR0FBRyxJQUFJLEVBQUM7Q0FDdEcsWUFBWSxJQUFJLGFBQWEsR0FBRyxLQUFLLEtBQUssYUFBYSxHQUFHLE1BQU0sSUFBSSxhQUFhLEdBQUcsTUFBTSxDQUFDLEVBQUU7Q0FDN0YsY0FBYyxTQUFTLEdBQUcsY0FBYTtDQUN2QyxhQUFhO0NBQ2IsV0FBVztDQUNYLFVBQVUsS0FBSztDQUNmLFFBQVEsS0FBSyxDQUFDO0NBQ2QsVUFBVSxVQUFVLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUM7Q0FDakMsVUFBVSxTQUFTLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUM7Q0FDaEMsVUFBVSxVQUFVLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUM7Q0FDakMsVUFBVSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksTUFBTSxJQUFJLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxNQUFNLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFO0NBQzNHLFlBQVksYUFBYSxHQUFHLENBQUMsU0FBUyxHQUFHLEdBQUcsS0FBSyxJQUFJLEdBQUcsQ0FBQyxVQUFVLEdBQUcsSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFNBQVMsR0FBRyxJQUFJLEtBQUssR0FBRyxJQUFJLFVBQVUsR0FBRyxJQUFJLEVBQUM7Q0FDcEksWUFBWSxJQUFJLGFBQWEsR0FBRyxNQUFNLElBQUksYUFBYSxHQUFHLFFBQVEsRUFBRTtDQUNwRSxjQUFjLFNBQVMsR0FBRyxjQUFhO0NBQ3ZDLGFBQWE7Q0FDYixXQUFXO0NBQ1gsT0FBTztDQUNQLEtBQUs7QUFDTDtDQUNBLElBQUksSUFBSSxTQUFTLEtBQUssSUFBSSxFQUFFO0NBQzVCO0NBQ0E7Q0FDQSxNQUFNLFNBQVMsR0FBRyxPQUFNO0NBQ3hCLE1BQU0sZ0JBQWdCLEdBQUcsRUFBQztDQUMxQixLQUFLLE1BQU0sSUFBSSxTQUFTLEdBQUcsTUFBTSxFQUFFO0NBQ25DO0NBQ0EsTUFBTSxTQUFTLElBQUksUUFBTztDQUMxQixNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxLQUFLLEVBQUUsR0FBRyxLQUFLLEdBQUcsTUFBTSxFQUFDO0NBQ2pELE1BQU0sU0FBUyxHQUFHLE1BQU0sR0FBRyxTQUFTLEdBQUcsTUFBSztDQUM1QyxLQUFLO0FBQ0w7Q0FDQSxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFDO0NBQ3ZCLElBQUksQ0FBQyxJQUFJLGlCQUFnQjtDQUN6QixHQUFHO0FBQ0g7Q0FDQSxFQUFFLE9BQU8scUJBQXFCLENBQUMsR0FBRyxDQUFDO0NBQ25DLENBQUM7QUFDRDtDQUNBO0NBQ0E7Q0FDQTtDQUNBLE1BQU0sb0JBQW9CLEdBQUcsT0FBTTtBQUNuQztDQUNBLFNBQVMscUJBQXFCLEVBQUUsVUFBVSxFQUFFO0NBQzVDLEVBQUUsTUFBTSxHQUFHLEdBQUcsVUFBVSxDQUFDLE9BQU07Q0FDL0IsRUFBRSxJQUFJLEdBQUcsSUFBSSxvQkFBb0IsRUFBRTtDQUNuQyxJQUFJLE9BQU8sTUFBTSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQztDQUN4RCxHQUFHO0FBQ0g7Q0FDQTtDQUNBLEVBQUUsSUFBSSxHQUFHLEdBQUcsR0FBRTtDQUNkLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBQztDQUNYLEVBQUUsT0FBTyxDQUFDLEdBQUcsR0FBRyxFQUFFO0NBQ2xCLElBQUksR0FBRyxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSztDQUNwQyxNQUFNLE1BQU07Q0FDWixNQUFNLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxvQkFBb0IsQ0FBQztDQUNwRCxNQUFLO0NBQ0wsR0FBRztDQUNILEVBQUUsT0FBTyxHQUFHO0NBQ1osQ0FBQztBQUNEO0NBQ0EsU0FBUyxVQUFVLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUU7Q0FDdEMsRUFBRSxJQUFJLEdBQUcsR0FBRyxHQUFFO0NBQ2QsRUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBQztBQUNqQztDQUNBLEVBQUUsS0FBSyxJQUFJLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRTtDQUNwQyxJQUFJLEdBQUcsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUM7Q0FDN0MsR0FBRztDQUNILEVBQUUsT0FBTyxHQUFHO0NBQ1osQ0FBQztBQUNEO0NBQ0EsU0FBUyxXQUFXLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUU7Q0FDdkMsRUFBRSxJQUFJLEdBQUcsR0FBRyxHQUFFO0NBQ2QsRUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBQztBQUNqQztDQUNBLEVBQUUsS0FBSyxJQUFJLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRTtDQUNwQyxJQUFJLEdBQUcsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBQztDQUN0QyxHQUFHO0NBQ0gsRUFBRSxPQUFPLEdBQUc7Q0FDWixDQUFDO0FBQ0Q7Q0FDQSxTQUFTLFFBQVEsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRTtDQUNwQyxFQUFFLE1BQU0sR0FBRyxHQUFHLEdBQUcsQ0FBQyxPQUFNO0FBQ3hCO0NBQ0EsRUFBRSxJQUFJLENBQUMsS0FBSyxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLEVBQUM7Q0FDcEMsRUFBRSxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsSUFBRztBQUM3QztDQUNBLEVBQUUsSUFBSSxHQUFHLEdBQUcsR0FBRTtDQUNkLEVBQUUsS0FBSyxJQUFJLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRTtDQUNwQyxJQUFJLEdBQUcsSUFBSSxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUM7Q0FDdEMsR0FBRztDQUNILEVBQUUsT0FBTyxHQUFHO0NBQ1osQ0FBQztBQUNEO0NBQ0EsU0FBUyxZQUFZLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUU7Q0FDeEMsRUFBRSxNQUFNLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUM7Q0FDckMsRUFBRSxJQUFJLEdBQUcsR0FBRyxHQUFFO0NBQ2Q7Q0FDQSxFQUFFLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFO0NBQ2hELElBQUksR0FBRyxJQUFJLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUM7Q0FDL0QsR0FBRztDQUNILEVBQUUsT0FBTyxHQUFHO0NBQ1osQ0FBQztBQUNEO0NBQ0EsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsU0FBUyxLQUFLLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRTtDQUNyRCxFQUFFLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFNO0NBQ3pCLEVBQUUsS0FBSyxHQUFHLENBQUMsQ0FBQyxNQUFLO0NBQ2pCLEVBQUUsR0FBRyxHQUFHLEdBQUcsS0FBSyxTQUFTLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFHO0FBQ3ZDO0NBQ0EsRUFBRSxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUU7Q0FDakIsSUFBSSxLQUFLLElBQUksSUFBRztDQUNoQixJQUFJLElBQUksS0FBSyxHQUFHLENBQUMsRUFBRSxLQUFLLEdBQUcsRUFBQztDQUM1QixHQUFHLE1BQU0sSUFBSSxLQUFLLEdBQUcsR0FBRyxFQUFFO0NBQzFCLElBQUksS0FBSyxHQUFHLElBQUc7Q0FDZixHQUFHO0FBQ0g7Q0FDQSxFQUFFLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRTtDQUNmLElBQUksR0FBRyxJQUFJLElBQUc7Q0FDZCxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsRUFBQztDQUN4QixHQUFHLE1BQU0sSUFBSSxHQUFHLEdBQUcsR0FBRyxFQUFFO0NBQ3hCLElBQUksR0FBRyxHQUFHLElBQUc7Q0FDYixHQUFHO0FBQ0g7Q0FDQSxFQUFFLElBQUksR0FBRyxHQUFHLEtBQUssRUFBRSxHQUFHLEdBQUcsTUFBSztBQUM5QjtDQUNBLEVBQUUsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFDO0NBQzFDO0NBQ0EsRUFBRSxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsU0FBUyxFQUFDO0FBQ2pEO0NBQ0EsRUFBRSxPQUFPLE1BQU07Q0FDZixFQUFDO0FBQ0Q7Q0FDQTtDQUNBO0NBQ0E7Q0FDQSxTQUFTLFdBQVcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRTtDQUMzQyxFQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxNQUFNLEdBQUcsQ0FBQyxFQUFFLE1BQU0sSUFBSSxVQUFVLENBQUMsb0JBQW9CLENBQUM7Q0FDbEYsRUFBRSxJQUFJLE1BQU0sR0FBRyxHQUFHLEdBQUcsTUFBTSxFQUFFLE1BQU0sSUFBSSxVQUFVLENBQUMsdUNBQXVDLENBQUM7Q0FDMUYsQ0FBQztBQUNEO0NBQ0EsTUFBTSxDQUFDLFNBQVMsQ0FBQyxVQUFVO0NBQzNCLE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxHQUFHLFNBQVMsVUFBVSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFO0NBQ2pGLEVBQUUsTUFBTSxHQUFHLE1BQU0sS0FBSyxFQUFDO0NBQ3ZCLEVBQUUsVUFBVSxHQUFHLFVBQVUsS0FBSyxFQUFDO0NBQy9CLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFDO0FBQzdEO0NBQ0EsRUFBRSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFDO0NBQ3hCLEVBQUUsSUFBSSxHQUFHLEdBQUcsRUFBQztDQUNiLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBQztDQUNYLEVBQUUsT0FBTyxFQUFFLENBQUMsR0FBRyxVQUFVLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxFQUFFO0NBQzdDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBRztDQUNqQyxHQUFHO0FBQ0g7Q0FDQSxFQUFFLE9BQU8sR0FBRztDQUNaLEVBQUM7QUFDRDtDQUNBLE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBVTtDQUMzQixNQUFNLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxTQUFTLFVBQVUsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRTtDQUNqRixFQUFFLE1BQU0sR0FBRyxNQUFNLEtBQUssRUFBQztDQUN2QixFQUFFLFVBQVUsR0FBRyxVQUFVLEtBQUssRUFBQztDQUMvQixFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUU7Q0FDakIsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFDO0NBQ2hELEdBQUc7QUFDSDtDQUNBLEVBQUUsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLFVBQVUsRUFBQztDQUN2QyxFQUFFLElBQUksR0FBRyxHQUFHLEVBQUM7Q0FDYixFQUFFLE9BQU8sVUFBVSxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEVBQUU7Q0FDM0MsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLFVBQVUsQ0FBQyxHQUFHLElBQUc7Q0FDNUMsR0FBRztBQUNIO0NBQ0EsRUFBRSxPQUFPLEdBQUc7Q0FDWixFQUFDO0FBQ0Q7Q0FDQSxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVM7Q0FDMUIsTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsU0FBUyxTQUFTLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRTtDQUNuRSxFQUFFLE1BQU0sR0FBRyxNQUFNLEtBQUssRUFBQztDQUN2QixFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBQztDQUNwRCxFQUFFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztDQUNyQixFQUFDO0FBQ0Q7Q0FDQSxNQUFNLENBQUMsU0FBUyxDQUFDLFlBQVk7Q0FDN0IsTUFBTSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEdBQUcsU0FBUyxZQUFZLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRTtDQUN6RSxFQUFFLE1BQU0sR0FBRyxNQUFNLEtBQUssRUFBQztDQUN2QixFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBQztDQUNwRCxFQUFFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0NBQy9DLEVBQUM7QUFDRDtDQUNBLE1BQU0sQ0FBQyxTQUFTLENBQUMsWUFBWTtDQUM3QixNQUFNLENBQUMsU0FBUyxDQUFDLFlBQVksR0FBRyxTQUFTLFlBQVksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFO0NBQ3pFLEVBQUUsTUFBTSxHQUFHLE1BQU0sS0FBSyxFQUFDO0NBQ3ZCLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFDO0NBQ3BELEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7Q0FDL0MsRUFBQztBQUNEO0NBQ0EsTUFBTSxDQUFDLFNBQVMsQ0FBQyxZQUFZO0NBQzdCLE1BQU0sQ0FBQyxTQUFTLENBQUMsWUFBWSxHQUFHLFNBQVMsWUFBWSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUU7Q0FDekUsRUFBRSxNQUFNLEdBQUcsTUFBTSxLQUFLLEVBQUM7Q0FDdkIsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUM7QUFDcEQ7Q0FDQSxFQUFFLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7Q0FDdkIsT0FBTyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztDQUM3QixPQUFPLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0NBQzlCLE9BQU8sSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUM7Q0FDcEMsRUFBQztBQUNEO0NBQ0EsTUFBTSxDQUFDLFNBQVMsQ0FBQyxZQUFZO0NBQzdCLE1BQU0sQ0FBQyxTQUFTLENBQUMsWUFBWSxHQUFHLFNBQVMsWUFBWSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUU7Q0FDekUsRUFBRSxNQUFNLEdBQUcsTUFBTSxLQUFLLEVBQUM7Q0FDdkIsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUM7QUFDcEQ7Q0FDQSxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsU0FBUztDQUNsQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFO0NBQzVCLEtBQUssSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDM0IsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0NBQ3JCLEVBQUM7QUFDRDtDQUNBLE1BQU0sQ0FBQyxTQUFTLENBQUMsZUFBZSxHQUFHLGtCQUFrQixDQUFDLFNBQVMsZUFBZSxFQUFFLE1BQU0sRUFBRTtDQUN4RixFQUFFLE1BQU0sR0FBRyxNQUFNLEtBQUssRUFBQztDQUN2QixFQUFFLGNBQWMsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFDO0NBQ2xDLEVBQUUsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBQztDQUM1QixFQUFFLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFDO0NBQy9CLEVBQUUsSUFBSSxLQUFLLEtBQUssU0FBUyxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUU7Q0FDakQsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFDO0NBQ3hDLEdBQUc7QUFDSDtDQUNBLEVBQUUsTUFBTSxFQUFFLEdBQUcsS0FBSztDQUNsQixJQUFJLElBQUksQ0FBQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDO0NBQzNCLElBQUksSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUU7Q0FDNUIsSUFBSSxJQUFJLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRTtBQUM1QjtDQUNBLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDO0NBQzNCLElBQUksSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM7Q0FDM0IsSUFBSSxJQUFJLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRTtDQUM1QixJQUFJLElBQUksR0FBRyxDQUFDLElBQUksR0FBRTtBQUNsQjtDQUNBLEVBQUUsT0FBTyxNQUFNLENBQUMsRUFBRSxDQUFDLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztDQUNoRCxDQUFDLEVBQUM7QUFDRjtDQUNBLE1BQU0sQ0FBQyxTQUFTLENBQUMsZUFBZSxHQUFHLGtCQUFrQixDQUFDLFNBQVMsZUFBZSxFQUFFLE1BQU0sRUFBRTtDQUN4RixFQUFFLE1BQU0sR0FBRyxNQUFNLEtBQUssRUFBQztDQUN2QixFQUFFLGNBQWMsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFDO0NBQ2xDLEVBQUUsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBQztDQUM1QixFQUFFLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFDO0NBQy9CLEVBQUUsSUFBSSxLQUFLLEtBQUssU0FBUyxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUU7Q0FDakQsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFDO0NBQ3hDLEdBQUc7QUFDSDtDQUNBLEVBQUUsTUFBTSxFQUFFLEdBQUcsS0FBSyxHQUFHLENBQUMsSUFBSSxFQUFFO0NBQzVCLElBQUksSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUU7Q0FDNUIsSUFBSSxJQUFJLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQztDQUMzQixJQUFJLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBQztBQUNsQjtDQUNBLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUU7Q0FDckMsSUFBSSxJQUFJLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRTtDQUM1QixJQUFJLElBQUksQ0FBQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDO0NBQzNCLElBQUksS0FBSTtBQUNSO0NBQ0EsRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxNQUFNLENBQUMsRUFBRSxDQUFDO0NBQ2hELENBQUMsRUFBQztBQUNGO0NBQ0EsTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsU0FBUyxTQUFTLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUU7Q0FDL0UsRUFBRSxNQUFNLEdBQUcsTUFBTSxLQUFLLEVBQUM7Q0FDdkIsRUFBRSxVQUFVLEdBQUcsVUFBVSxLQUFLLEVBQUM7Q0FDL0IsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUM7QUFDN0Q7Q0FDQSxFQUFFLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUM7Q0FDeEIsRUFBRSxJQUFJLEdBQUcsR0FBRyxFQUFDO0NBQ2IsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFDO0NBQ1gsRUFBRSxPQUFPLEVBQUUsQ0FBQyxHQUFHLFVBQVUsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEVBQUU7Q0FDN0MsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFHO0NBQ2pDLEdBQUc7Q0FDSCxFQUFFLEdBQUcsSUFBSSxLQUFJO0FBQ2I7Q0FDQSxFQUFFLElBQUksR0FBRyxJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsRUFBQztBQUNwRDtDQUNBLEVBQUUsT0FBTyxHQUFHO0NBQ1osRUFBQztBQUNEO0NBQ0EsTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsU0FBUyxTQUFTLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUU7Q0FDL0UsRUFBRSxNQUFNLEdBQUcsTUFBTSxLQUFLLEVBQUM7Q0FDdkIsRUFBRSxVQUFVLEdBQUcsVUFBVSxLQUFLLEVBQUM7Q0FDL0IsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUM7QUFDN0Q7Q0FDQSxFQUFFLElBQUksQ0FBQyxHQUFHLFdBQVU7Q0FDcEIsRUFBRSxJQUFJLEdBQUcsR0FBRyxFQUFDO0NBQ2IsRUFBRSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxFQUFDO0NBQzlCLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsRUFBRTtDQUNsQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBRztDQUNuQyxHQUFHO0NBQ0gsRUFBRSxHQUFHLElBQUksS0FBSTtBQUNiO0NBQ0EsRUFBRSxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLEVBQUM7QUFDcEQ7Q0FDQSxFQUFFLE9BQU8sR0FBRztDQUNaLEVBQUM7QUFDRDtDQUNBLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLFNBQVMsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUU7Q0FDakUsRUFBRSxNQUFNLEdBQUcsTUFBTSxLQUFLLEVBQUM7Q0FDdkIsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLEVB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QUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7Q0FDdkQsRUFBRSxVQUFVLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUM7QUFDN0M7Q0FDQSxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFDO0NBQzdDLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRTtDQUNwQixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBQztDQUNkLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRTtDQUNwQixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBQztDQUNkLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRTtDQUNwQixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBQztDQUNkLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRTtDQUNwQixFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBQztDQUMzRCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUU7Q0FDcEIsRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUM7Q0FDZCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUU7Q0FDcEIsRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUM7Q0FDZCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUU7Q0FDcEIsRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUM7Q0FDZCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUU7Q0FDcEIsRUFBRSxPQUFPLE1BQU07Q0FDZixDQUFDO0FBQ0Q7Q0FDQSxTQUFTLGNBQWMsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFO0NBQ3ZELEVBQUUsVUFBVSxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFDO0FBQzdDO0NBQ0EsRUFBRSxJQUFJLEVBQUUsR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBQztDQUM3QyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRTtDQUN0QixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBQztDQUNkLEVBQUUsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFFO0NBQ3RCLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFDO0NBQ2QsRUFBRSxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUU7Q0FDdEIsRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUM7Q0FDZCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRTtDQUN0QixFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBQztDQUMzRCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRTtDQUN0QixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBQztDQUNkLEVBQUUsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFFO0NBQ3RCLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFDO0NBQ2QsRUFBRSxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUU7Q0FDdEIsRUFBRSxFQUFFLEdBQUcsRUFB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S0FBSyxHQUFHLFNBQVMsS0FBSyxHQUFHO0NBQ2xDLElBQUksT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztDQUMxQixHQUFHO0NBQ0gsR0FBRztBQUNIO0NBQ0EsRUFBRSxNQUFNLENBQUMsVUFBVSxHQUFHLFNBQVMsVUFBVSxDQUFDLENBQUMsRUFBRTtDQUM3QyxJQUFJLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7Q0FDdEIsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDZCxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7Q0FDckIsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQztBQUNwQjtDQUNBLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRTtDQUN2QixNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7Q0FDdkIsTUFBTSxJQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztDQUMvQyxNQUFNLElBQUksRUFBRSxLQUFLLEdBQUcsQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztDQUNwRSxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDZDtDQUNBLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO0NBQ25CLFFBQVEsSUFBSSxFQUFFLEtBQUssR0FBRyxDQUFDLE1BQU0sRUFBRTtDQUMvQixVQUFVLEVBQUUsQ0FBQyxDQUFDO0NBQ2QsVUFBVSxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztDQUMzRSxTQUFTLE1BQU07Q0FDZixVQUFVLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO0NBQ3hCLFVBQVUsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQ2pDLFNBQVM7QUFDVDtDQUNBLFFBQVEsTUFBTTtDQUNkLE9BQU87QUFDUDtDQUNBLE1BQU0sRUFBRSxDQUFDLENBQUM7Q0FDVixLQUFLO0FBQ0w7Q0FDQSxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDO0NBQ3JCLElBQUksT0FBTyxHQUFHLENBQUM7Q0FDZixHQUFHO0NBQ0gsR0FBRztBQUNIO0NBQ0EsRUFBRSxNQUFNLENBQUMsVUFBVSxHQUFHLFNBQVMsVUFBVSxDQUFDLENBQUMsRUFBRTtDQUM3QyxJQUFJLElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDcEMsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO0NBQ3RCLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQ2QsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNyQixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUN2QjtDQUNBLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRTtDQUN2QixNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7Q0FDdkIsTUFBTSxJQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztDQUMvQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztDQUMzQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDZDtDQUNBLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO0NBQ25CLFFBQVEsSUFBSSxFQUFFLEtBQUssR0FBRyxDQUFDLE1BQU0sRUFBRTtDQUMvQixVQUFVLEVBQUUsQ0FBQyxDQUFDO0NBQ2QsVUFBVSxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztDQUMzRSxTQUFTLE1BQU07Q0FDZixVQUFVLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO0NBQ3hCLFVBQVUsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQ2pDLFNBQVM7QUFDVDtDQUNBLFFBQVEsTUFBTTtDQUNkLE9BQU87QUFDUDtDQUNBLE1BQU0sRUFBRSxDQUFDLENBQUM7Q0FDVixLQUFLO0FBQ0w7Q0FDQSxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDO0NBQ3JCLElBQUksT0FBTyxHQUFHLENBQUM7Q0FDZixHQUFHO0NBQ0gsR0FBRztBQUNIO0NBQ0EsRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsVUFBVSxDQUFDLEVBQUUsT0FBTyxFQUFFO0NBQ3pDLElBQUksT0FBTyxPQUFPLENBQUMsSUFBSSxFQUFFLGFBQWEsQ0FBQyxFQUFFLEVBQUUsT0FBTyxFQUFFO0NBQ3BEO0NBQ0EsTUFBTSxLQUFLLEVBQUUsQ0FBQztDQUNkO0NBQ0EsTUFBTSxhQUFhLEVBQUUsS0FBSztDQUMxQixLQUFLLENBQUMsQ0FBQyxDQUFDO0NBQ1IsR0FBRyxDQUFDO0FBQ0o7Q0FDQSxFQUFFLE9BQU8sVUFBVSxDQUFDO0NBQ3BCLENBQUMsRUFBRTs7Q0M1TEgsU0FBUyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRTtDQUMxQixFQUFFLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQztBQUNuQjtDQUNBLEVBQUUsSUFBSSxpQkFBaUIsR0FBRyxJQUFJLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDO0NBQy9FLEVBQUUsSUFBSSxpQkFBaUIsR0FBRyxJQUFJLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDO0FBQy9FO0NBQ0EsRUFBRSxJQUFJLGlCQUFpQixJQUFJLGlCQUFpQixFQUFFO0NBQzlDLElBQUksSUFBSSxFQUFFLEVBQUU7Q0FDWixNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNkLEtBQUssTUFBTSxJQUFJLEdBQUcsRUFBRTtDQUNwQixNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFO0NBQ2hDLFFBQVEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQ2pELE9BQU8sTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLEVBQUU7Q0FDcEQsUUFBUSxJQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7Q0FDaEQsUUFBUSxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7Q0FDakQsT0FBTztDQUNQLEtBQUs7QUFDTDtDQUNBLElBQUksT0FBTyxJQUFJLENBQUM7Q0FDaEIsR0FBRztDQUNIO0FBQ0E7QUFDQTtDQUNBLEVBQUUsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO0NBQzNCLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO0NBQ3pDLEdBQUc7QUFDSDtBQUNBO0NBQ0EsRUFBRSxJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7Q0FDM0IsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7Q0FDekMsR0FBRztBQUNIO0NBQ0EsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsSUFBSSxJQUFJLEVBQUUsVUFBVSxHQUFHLEVBQUU7Q0FDNUMsSUFBSSxJQUFJLENBQUMsRUFBRSxJQUFJLEdBQUcsRUFBRTtDQUNwQixNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFO0NBQ2pDLFFBQVEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7Q0FDMUQsT0FBTyxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLFlBQVksRUFBRTtDQUNyRCxRQUFRLEtBQUssQ0FBQyxjQUFjLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztDQUNqRCxRQUFRLE9BQU8sQ0FBQyxRQUFRLENBQUMsbUJBQW1CLEVBQUUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQzFELE9BQU8sTUFBTTtDQUNiLFFBQVEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUM7Q0FDN0MsT0FBTztDQUNQLEtBQUssTUFBTSxJQUFJLEVBQUUsRUFBRTtDQUNuQixNQUFNLE9BQU8sQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFDO0NBQzNDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQ2QsS0FBSyxNQUFNO0NBQ1gsTUFBTSxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsQ0FBQztDQUMzQyxLQUFLO0NBQ0wsR0FBRyxDQUFDLENBQUM7QUFDTDtDQUNBLEVBQUUsT0FBTyxJQUFJLENBQUM7Q0FDZCxDQUFDO0FBQ0Q7Q0FDQSxTQUFTLG1CQUFtQixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUU7Q0FDeEMsRUFBRSxXQUFXLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQ3pCLEVBQUUsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0NBQ3BCLENBQUM7QUFDRDtDQUNBLFNBQVMsV0FBVyxDQUFDLElBQUksRUFBRTtDQUMzQixFQUFFLElBQUksSUFBSSxDQUFDLGNBQWMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxFQUFFLE9BQU87Q0FDcEUsRUFBRSxJQUFJLElBQUksQ0FBQyxjQUFjLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsRUFBRSxPQUFPO0NBQ3BFLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztDQUNyQixDQUFDO0FBQ0Q7Q0FDQSxTQUFTLFNBQVMsR0FBRztDQUNyQixFQUFFLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtDQUMzQixJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztDQUMxQyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztDQUN4QyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztDQUN0QyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztDQUMzQyxHQUFHO0FBQ0g7Q0FDQSxFQUFFLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtDQUMzQixJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztDQUMxQyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztDQUN0QyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztDQUN2QyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztDQUM1QyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztDQUM1QyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztDQUN6QyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztDQUM3QyxHQUFHO0NBQ0gsQ0FBQztBQUNEO0NBQ0EsU0FBUyxXQUFXLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRTtDQUNoQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQzFCLENBQUM7QUFDRDtDQUNBLFNBQVMsY0FBYyxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUU7Q0FDckM7Q0FDQTtDQUNBO0NBQ0E7Q0FDQTtDQUNBLEVBQUUsSUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQztDQUNyQyxFQUFFLElBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxjQUFjLENBQUM7Q0FDckMsRUFBRSxJQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsV0FBVyxJQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztDQUN2SCxDQUFDO0FBQ0Q7Q0FDQSxhQUFjLEdBQUc7Q0FDakIsRUFBRSxPQUFPLEVBQUUsT0FBTztDQUNsQixFQUFFLFNBQVMsRUFBRSxTQUFTO0NBQ3RCLEVBQUUsY0FBYyxFQUFFLGNBQWM7Q0FDaEMsQ0FBQzs7Q0N0R0QsU0FBUyxjQUFjLENBQUMsUUFBUSxFQUFFLFVBQVUsRUFBRSxFQUFFLFFBQVEsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxFQUFFO0FBQ3ZMO0NBQ0EsSUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQ2Y7Q0FDQSxTQUFTLGVBQWUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtDQUM5QyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUU7Q0FDYixJQUFJLElBQUksR0FBRyxLQUFLLENBQUM7Q0FDakIsR0FBRztBQUNIO0NBQ0EsRUFBRSxTQUFTLFVBQVUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRTtDQUN4QyxJQUFJLElBQUksT0FBTyxPQUFPLEtBQUssUUFBUSxFQUFFO0NBQ3JDLE1BQU0sT0FBTyxPQUFPLENBQUM7Q0FDckIsS0FBSyxNQUFNO0NBQ1gsTUFBTSxPQUFPLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0NBQ3ZDLEtBQUs7Q0FDTCxHQUFHO0FBQ0g7Q0FDQSxFQUFFLElBQUksU0FBUztDQUNmO0NBQ0EsRUFBRSxVQUFVLEtBQUssRUFBRTtDQUNuQixJQUFJLGNBQWMsQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDckM7Q0FDQSxJQUFJLFNBQVMsU0FBUyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0NBQ3pDLE1BQU0sT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQztDQUNwRSxLQUFLO0FBQ0w7Q0FDQSxJQUFJLE9BQU8sU0FBUyxDQUFDO0NBQ3JCLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNWO0NBQ0EsRUFBRSxTQUFTLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO0NBQ3ZDLEVBQUUsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0NBQ2xDLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQztDQUMxQixDQUFDO0FBQ0Q7QUFDQTtDQUNBLFNBQVMsS0FBSyxDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUU7Q0FDaEMsRUFBRSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7Q0FDL0IsSUFBSSxJQUFJLEdBQUcsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO0NBQzlCLElBQUksUUFBUSxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEVBQUU7Q0FDekMsTUFBTSxPQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUN2QixLQUFLLENBQUMsQ0FBQztBQUNQO0NBQ0EsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUU7Q0FDakIsTUFBTSxPQUFPLFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7Q0FDckgsS0FBSyxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsRUFBRTtDQUMxQixNQUFNLE9BQU8sU0FBUyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDMUYsS0FBSyxNQUFNO0NBQ1gsTUFBTSxPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUMxRCxLQUFLO0NBQ0wsR0FBRyxNQUFNO0NBQ1QsSUFBSSxPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztDQUM3RCxHQUFHO0NBQ0gsQ0FBQztBQUNEO0FBQ0E7Q0FDQSxTQUFTLFVBQVUsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRTtDQUN0QyxFQUFFLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssTUFBTSxDQUFDO0NBQzFFLENBQUM7QUFDRDtBQUNBO0NBQ0EsU0FBUyxRQUFRLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUU7Q0FDekMsRUFBRSxJQUFJLFFBQVEsS0FBSyxTQUFTLElBQUksUUFBUSxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUU7Q0FDdkQsSUFBSSxRQUFRLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQztDQUMxQixHQUFHO0FBQ0g7Q0FDQSxFQUFFLE9BQU8sR0FBRyxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsS0FBSyxNQUFNLENBQUM7Q0FDdEUsQ0FBQztBQUNEO0FBQ0E7Q0FDQSxTQUFTLFFBQVEsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtDQUN0QyxFQUFFLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxFQUFFO0NBQ2pDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztDQUNkLEdBQUc7QUFDSDtDQUNBLEVBQUUsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFO0NBQzFDLElBQUksT0FBTyxLQUFLLENBQUM7Q0FDakIsR0FBRyxNQUFNO0NBQ1QsSUFBSSxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0NBQzdDLEdBQUc7Q0FDSCxDQUFDO0FBQ0Q7Q0FDQSxlQUFlLENBQUMsdUJBQXVCLEVBQUUsVUFBVSxJQUFJLEVBQUUsS0FBSyxFQUFFO0NBQ2hFLEVBQUUsT0FBTyxhQUFhLEdBQUcsS0FBSyxHQUFHLDJCQUEyQixHQUFHLElBQUksR0FBRyxHQUFHLENBQUM7Q0FDMUUsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0NBQ2QsZUFBZSxDQUFDLHNCQUFzQixFQUFFLFVBQVUsSUFBSSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUU7Q0FDMUU7Q0FDQSxFQUFFLElBQUksVUFBVSxDQUFDO0FBQ2pCO0NBQ0EsRUFBRSxJQUFJLE9BQU8sUUFBUSxLQUFLLFFBQVEsSUFBSSxVQUFVLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO0NBQ3BFLElBQUksVUFBVSxHQUFHLGFBQWEsQ0FBQztDQUMvQixJQUFJLFFBQVEsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztDQUM3QyxHQUFHLE1BQU07Q0FDVCxJQUFJLFVBQVUsR0FBRyxTQUFTLENBQUM7Q0FDM0IsR0FBRztBQUNIO0NBQ0EsRUFBRSxJQUFJLEdBQUcsQ0FBQztBQUNWO0NBQ0EsRUFBRSxJQUFJLFFBQVEsQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDLEVBQUU7Q0FDbkM7Q0FDQSxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7Q0FDM0YsR0FBRyxNQUFNO0NBQ1QsSUFBSSxJQUFJLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxHQUFHLFVBQVUsR0FBRyxVQUFVLENBQUM7Q0FDN0QsSUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7Q0FDakgsR0FBRztBQUNIO0NBQ0EsRUFBRSxHQUFHLElBQUksa0JBQWtCLENBQUMsTUFBTSxDQUFDLE9BQU8sTUFBTSxDQUFDLENBQUM7Q0FDbEQsRUFBRSxPQUFPLEdBQUcsQ0FBQztDQUNiLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztDQUNkLGVBQWUsQ0FBQywyQkFBMkIsRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO0NBQ3hFLGVBQWUsQ0FBQyw0QkFBNEIsRUFBRSxVQUFVLElBQUksRUFBRTtDQUM5RCxFQUFFLE9BQU8sTUFBTSxHQUFHLElBQUksR0FBRyw0QkFBNEIsQ0FBQztDQUN0RCxDQUFDLENBQUMsQ0FBQztDQUNILGVBQWUsQ0FBQyw0QkFBNEIsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0NBQ2pFLGVBQWUsQ0FBQyxzQkFBc0IsRUFBRSxVQUFVLElBQUksRUFBRTtDQUN4RCxFQUFFLE9BQU8sY0FBYyxHQUFHLElBQUksR0FBRywrQkFBK0IsQ0FBQztDQUNqRSxDQUFDLENBQUMsQ0FBQztDQUNILGVBQWUsQ0FBQyx1QkFBdUIsRUFBRSxnQ0FBZ0MsQ0FBQyxDQUFDO0NBQzNFLGVBQWUsQ0FBQyx3QkFBd0IsRUFBRSwyQkFBMkIsQ0FBQyxDQUFDO0NBQ3ZFLGVBQWUsQ0FBQyw0QkFBNEIsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0NBQ2pFLGVBQWUsQ0FBQyx3QkFBd0IsRUFBRSxxQ0FBcUMsRUFBRSxTQUFTLENBQUMsQ0FBQztDQUM1RixlQUFlLENBQUMsc0JBQXNCLEVBQUUsVUFBVSxHQUFHLEVBQUU7Q0FDdkQsRUFBRSxPQUFPLG9CQUFvQixHQUFHLEdBQUcsQ0FBQztDQUNwQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7Q0FDZCxlQUFlLENBQUMsb0NBQW9DLEVBQUUsa0NBQWtDLENBQUMsQ0FBQztDQUMxRixXQUFvQixHQUFHLEtBQUs7Ozs7OztDQzVINUIsSUFBSSxxQkFBcUIsR0FBR0gsYUFBMEIsQ0FBQyxLQUFLLENBQUMscUJBQXFCLENBQUM7QUFDbkY7Q0FDQSxTQUFTLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFO0NBQ3pELEVBQUUsT0FBTyxPQUFPLENBQUMsYUFBYSxJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsYUFBYSxHQUFHLFFBQVEsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDO0NBQ3RHLENBQUM7QUFDRDtDQUNBLFNBQVMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFO0NBQy9ELEVBQUUsSUFBSSxHQUFHLEdBQUcsaUJBQWlCLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxTQUFTLENBQUMsQ0FBQztBQUM1RDtDQUNBLEVBQUUsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFO0NBQ25CLElBQUksSUFBSSxFQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUU7Q0FDaEUsTUFBTSxJQUFJLElBQUksR0FBRyxRQUFRLEdBQUcsU0FBUyxHQUFHLGVBQWUsQ0FBQztDQUN4RCxNQUFNLE1BQU0sSUFBSSxxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7Q0FDakQsS0FBSztBQUNMO0NBQ0EsSUFBSSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDM0IsR0FBRztBQUNIO0FBQ0E7Q0FDQSxFQUFFLE9BQU8sS0FBSyxDQUFDLFVBQVUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQztDQUMzQyxDQUFDO0FBQ0Q7Q0FDQSxTQUFjLEdBQUc7Q0FDakIsRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0I7Q0FDcEMsQ0FBQzs7O0NDMUJELElBQUksT0FBTyxNQUFNLENBQUMsTUFBTSxLQUFLLFVBQVUsRUFBRTtDQUN6QztDQUNBLEVBQUUsaUJBQWlCLFNBQVMsUUFBUSxDQUFDLElBQUksRUFBRSxTQUFTLEVBQUU7Q0FDdEQsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLFVBQVM7Q0FDM0IsSUFBSSxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRTtDQUN4RCxNQUFNLFdBQVcsRUFBRTtDQUNuQixRQUFRLEtBQUssRUFBRSxJQUFJO0NBQ25CLFFBQVEsVUFBVSxFQUFFLEtBQUs7Q0FDekIsUUFBUSxRQUFRLEVBQUUsSUFBSTtDQUN0QixRQUFRLFlBQVksRUFBRSxJQUFJO0NBQzFCLE9BQU87Q0FDUCxLQUFLLENBQUMsQ0FBQztDQUNQLEdBQUcsQ0FBQztDQUNKLENBQUMsTUFBTTtDQUNQO0NBQ0EsRUFBRSxpQkFBaUIsU0FBUyxRQUFRLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRTtDQUN0RCxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsVUFBUztDQUMzQixJQUFJLElBQUksUUFBUSxHQUFHLFlBQVksR0FBRTtDQUNqQyxJQUFJLFFBQVEsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLFVBQVM7Q0FDNUMsSUFBSSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksUUFBUSxHQUFFO0NBQ25DLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEdBQUcsS0FBSTtDQUNyQyxJQUFHO0NBQ0g7Ozs7OztDQ3BCQSxJQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTTtBQUMxQjtDQUNBO0NBQ0EsU0FBUyxTQUFTLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRTtDQUM5QixFQUFFLEtBQUssSUFBSSxHQUFHLElBQUksR0FBRyxFQUFFO0NBQ3ZCLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEVBQUM7Q0FDdkIsR0FBRztDQUNILENBQUM7Q0FDRCxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksTUFBTSxDQUFDLEtBQUssSUFBSSxNQUFNLENBQUMsV0FBVyxJQUFJLE1BQU0sQ0FBQyxlQUFlLEVBQUU7Q0FDakYsRUFBRSxpQkFBaUIsT0FBTTtDQUN6QixDQUFDLE1BQU07Q0FDUDtDQUNBLEVBQUUsU0FBUyxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUM7Q0FDNUIsRUFBRSxpQkFBaUIsV0FBVTtDQUM3QixDQUFDO0FBQ0Q7Q0FDQSxTQUFTLFVBQVUsRUFBRSxHQUFHLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxFQUFFO0NBQ3BELEVBQUUsT0FBTyxNQUFNLENBQUMsR0FBRyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sQ0FBQztDQUM5QyxDQUFDO0FBQ0Q7Q0FDQTtDQUNBLFNBQVMsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFDO0FBQzdCO0NBQ0EsVUFBVSxDQUFDLElBQUksR0FBRyxVQUFVLEdBQUcsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLEVBQUU7Q0FDM0QsRUFBRSxJQUFJLE9BQU8sR0FBRyxLQUFLLFFBQVEsRUFBRTtDQUMvQixJQUFJLE1BQU0sSUFBSSxTQUFTLENBQUMsK0JBQStCLENBQUM7Q0FDeEQsR0FBRztDQUNILEVBQUUsT0FBTyxNQUFNLENBQUMsR0FBRyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sQ0FBQztDQUM5QyxFQUFDO0FBQ0Q7Q0FDQSxVQUFVLENBQUMsS0FBSyxHQUFHLFVBQVUsSUFBSSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUU7Q0FDbkQsRUFBRSxJQUFJLE9BQU8sSUFBSSxLQUFLLFFBQVEsRUFBRTtDQUNoQyxJQUFJLE1BQU0sSUFBSSxTQUFTLENBQUMsMkJBQTJCLENBQUM7Q0FDcEQsR0FBRztDQUNILEVBQUUsSUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLElBQUksRUFBQztDQUN4QixFQUFFLElBQUksSUFBSSxLQUFLLFNBQVMsRUFBRTtDQUMxQixJQUFJLElBQUksT0FBTyxRQUFRLEtBQUssUUFBUSxFQUFFO0NBQ3RDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFDO0NBQzlCLEtBQUssTUFBTTtDQUNYLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUM7Q0FDcEIsS0FBSztDQUNMLEdBQUcsTUFBTTtDQUNULElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUM7Q0FDZixHQUFHO0NBQ0gsRUFBRSxPQUFPLEdBQUc7Q0FDWixFQUFDO0FBQ0Q7Q0FDQSxVQUFVLENBQUMsV0FBVyxHQUFHLFVBQVUsSUFBSSxFQUFFO0NBQ3pDLEVBQUUsSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLEVBQUU7Q0FDaEMsSUFBSSxNQUFNLElBQUksU0FBUyxDQUFDLDJCQUEyQixDQUFDO0NBQ3BELEdBQUc7Q0FDSCxFQUFFLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQztDQUNyQixFQUFDO0FBQ0Q7Q0FDQSxVQUFVLENBQUMsZUFBZSxHQUFHLFVBQVUsSUFBSSxFQUFFO0NBQzdDLEVBQUUsSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLEVBQUU7Q0FDaEMsSUFBSSxNQUFNLElBQUksU0FBUyxDQUFDLDJCQUEyQixDQUFDO0NBQ3BELEdBQUc7Q0FDSCxFQUFFLE9BQU8sTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUM7Q0FDaEM7OztDQ3RDQTtBQUNBO0NBQ0EsSUFBSUksUUFBTSxHQUFHSixVQUFzQixDQUFDLE1BQU0sQ0FBQztDQUMzQztBQUNBO0NBQ0EsSUFBSSxVQUFVLEdBQUdJLFFBQU0sQ0FBQyxVQUFVLElBQUksVUFBVSxRQUFRLEVBQUU7Q0FDMUQsRUFBRSxRQUFRLEdBQUcsRUFBRSxHQUFHLFFBQVEsQ0FBQztDQUMzQixFQUFFLFFBQVEsUUFBUSxJQUFJLFFBQVEsQ0FBQyxXQUFXLEVBQUU7Q0FDNUMsSUFBSSxLQUFLLEtBQUssQ0FBQyxLQUFLLE1BQU0sQ0FBQyxLQUFLLE9BQU8sQ0FBQyxLQUFLLE9BQU8sQ0FBQyxLQUFLLFFBQVEsQ0FBQyxLQUFLLFFBQVEsQ0FBQyxLQUFLLE1BQU0sQ0FBQyxLQUFLLE9BQU8sQ0FBQyxLQUFLLFNBQVMsQ0FBQyxLQUFLLFVBQVUsQ0FBQyxLQUFLLEtBQUs7Q0FDbkosTUFBTSxPQUFPLElBQUksQ0FBQztDQUNsQixJQUFJO0NBQ0osTUFBTSxPQUFPLEtBQUssQ0FBQztDQUNuQixHQUFHO0NBQ0gsQ0FBQyxDQUFDO0FBQ0Y7Q0FDQSxTQUFTLGtCQUFrQixDQUFDLEdBQUcsRUFBRTtDQUNqQyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsT0FBTyxNQUFNLENBQUM7Q0FDMUIsRUFBRSxJQUFJLE9BQU8sQ0FBQztDQUNkLEVBQUUsT0FBTyxJQUFJLEVBQUU7Q0FDZixJQUFJLFFBQVEsR0FBRztDQUNmLE1BQU0sS0FBSyxNQUFNLENBQUM7Q0FDbEIsTUFBTSxLQUFLLE9BQU87Q0FDbEIsUUFBUSxPQUFPLE1BQU0sQ0FBQztDQUN0QixNQUFNLEtBQUssTUFBTSxDQUFDO0NBQ2xCLE1BQU0sS0FBSyxPQUFPLENBQUM7Q0FDbkIsTUFBTSxLQUFLLFNBQVMsQ0FBQztDQUNyQixNQUFNLEtBQUssVUFBVTtDQUNyQixRQUFRLE9BQU8sU0FBUyxDQUFDO0NBQ3pCLE1BQU0sS0FBSyxRQUFRLENBQUM7Q0FDcEIsTUFBTSxLQUFLLFFBQVE7Q0FDbkIsUUFBUSxPQUFPLFFBQVEsQ0FBQztDQUN4QixNQUFNLEtBQUssUUFBUSxDQUFDO0NBQ3BCLE1BQU0sS0FBSyxPQUFPLENBQUM7Q0FDbkIsTUFBTSxLQUFLLEtBQUs7Q0FDaEIsUUFBUSxPQUFPLEdBQUcsQ0FBQztDQUNuQixNQUFNO0NBQ04sUUFBUSxJQUFJLE9BQU8sRUFBRSxPQUFPO0NBQzVCLFFBQVEsR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsRUFBRSxXQUFXLEVBQUUsQ0FBQztDQUN2QyxRQUFRLE9BQU8sR0FBRyxJQUFJLENBQUM7Q0FDdkIsS0FBSztDQUNMLEdBQUc7Q0FDSCxDQUNBO0NBQ0E7Q0FDQTtDQUNBLFNBQVMsaUJBQWlCLENBQUMsR0FBRyxFQUFFO0NBQ2hDLEVBQUUsSUFBSSxJQUFJLEdBQUcsa0JBQWtCLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDckMsRUFBRSxJQUFJLE9BQU8sSUFBSSxLQUFLLFFBQVEsS0FBS0EsUUFBTSxDQUFDLFVBQVUsS0FBSyxVQUFVLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLG9CQUFvQixHQUFHLEdBQUcsQ0FBQyxDQUFDO0NBQ3RJLEVBQUUsT0FBTyxJQUFJLElBQUksR0FBRyxDQUFDO0NBQ3JCLENBQUM7QUFDRDtDQUNBO0NBQ0E7Q0FDQTtDQUNBLG1CQUFxQixHQUFHLGFBQWEsQ0FBQztDQUN0QyxTQUFTLGFBQWEsQ0FBQyxRQUFRLEVBQUU7Q0FDakMsRUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0NBQzlDLEVBQUUsSUFBSSxFQUFFLENBQUM7Q0FDVCxFQUFFLFFBQVEsSUFBSSxDQUFDLFFBQVE7Q0FDdkIsSUFBSSxLQUFLLFNBQVM7Q0FDbEIsTUFBTSxJQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQztDQUM1QixNQUFNLElBQUksQ0FBQyxHQUFHLEdBQUcsUUFBUSxDQUFDO0NBQzFCLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQztDQUNiLE1BQU0sTUFBTTtDQUNaLElBQUksS0FBSyxNQUFNO0NBQ2YsTUFBTSxJQUFJLENBQUMsUUFBUSxHQUFHLFlBQVksQ0FBQztDQUNuQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7Q0FDYixNQUFNLE1BQU07Q0FDWixJQUFJLEtBQUssUUFBUTtDQUNqQixNQUFNLElBQUksQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDO0NBQzdCLE1BQU0sSUFBSSxDQUFDLEdBQUcsR0FBRyxTQUFTLENBQUM7Q0FDM0IsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQ2IsTUFBTSxNQUFNO0NBQ1osSUFBSTtDQUNKLE1BQU0sSUFBSSxDQUFDLEtBQUssR0FBRyxXQUFXLENBQUM7Q0FDL0IsTUFBTSxJQUFJLENBQUMsR0FBRyxHQUFHLFNBQVMsQ0FBQztDQUMzQixNQUFNLE9BQU87Q0FDYixHQUFHO0NBQ0gsRUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztDQUNwQixFQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO0NBQ3JCLEVBQUUsSUFBSSxDQUFDLFFBQVEsR0FBR0EsUUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztDQUN6QyxDQUFDO0FBQ0Q7Q0FDQSxhQUFhLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxVQUFVLEdBQUcsRUFBRTtDQUMvQyxFQUFFLElBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUM7Q0FDbEMsRUFBRSxJQUFJLENBQUMsQ0FBQztDQUNSLEVBQUUsSUFBSSxDQUFDLENBQUM7Q0FDUixFQUFFLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtDQUNyQixJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQzNCLElBQUksSUFBSSxDQUFDLEtBQUssU0FBUyxFQUFFLE9BQU8sRUFBRSxDQUFDO0NBQ25DLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7Q0FDdEIsSUFBSSxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztDQUN0QixHQUFHLE1BQU07Q0FDVCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDVixHQUFHO0NBQ0gsRUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztDQUMzRSxFQUFFLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztDQUNqQixDQUFDLENBQUM7QUFDRjtDQUNBLGFBQWEsQ0FBQyxTQUFTLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQztBQUN0QztDQUNBO0NBQ0EsYUFBYSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDO0FBQ3hDO0NBQ0E7Q0FDQSxhQUFhLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxVQUFVLEdBQUcsRUFBRTtDQUNsRCxFQUFFLElBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFO0NBQ25DLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0NBQzlFLElBQUksT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7Q0FDcEUsR0FBRztDQUNILEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0NBQ3pFLEVBQUUsSUFBSSxDQUFDLFFBQVEsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDO0NBQzlCLENBQUMsQ0FBQztBQUNGO0NBQ0E7Q0FDQTtDQUNBLFNBQVMsYUFBYSxDQUFDLElBQUksRUFBRTtDQUM3QixFQUFFLElBQUksSUFBSSxJQUFJLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQyxLQUFLLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUMsS0FBSyxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDLEtBQUssSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztDQUMvSSxFQUFFLE9BQU8sSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Q0FDdEMsQ0FBQztBQUNEO0NBQ0E7Q0FDQTtDQUNBO0NBQ0EsU0FBUyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtDQUMzQyxFQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0NBQ3pCLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0NBQ3RCLEVBQUUsSUFBSSxFQUFFLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2pDLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO0NBQ2YsSUFBSSxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQ3ZDLElBQUksT0FBTyxFQUFFLENBQUM7Q0FDZCxHQUFHO0NBQ0gsRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Q0FDckMsRUFBRSxFQUFFLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQzdCLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO0NBQ2YsSUFBSSxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQ3ZDLElBQUksT0FBTyxFQUFFLENBQUM7Q0FDZCxHQUFHO0NBQ0gsRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Q0FDckMsRUFBRSxFQUFFLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQzdCLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO0NBQ2YsSUFBSSxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUU7Q0FDaEIsTUFBTSxJQUFJLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztDQUN2RCxLQUFLO0NBQ0wsSUFB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QUFRLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQ2xDLEVBQUUsT0FBTyxHQUFHLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7Q0FDdEMsQ0FBQztBQUNEO0NBQ0E7Q0FDQTtDQUNBLFNBQVMsT0FBTyxDQUFDLEdBQUcsRUFBRTtDQUN0QixFQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0NBQ25ELEVBQUUsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxHQUFHLFFBQVEsQ0FBQztDQUN6QyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0NBQ1gsQ0FBQztBQUNEO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQSxTQUFTLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFO0NBQzNCLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7Q0FDbEMsSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztDQUN2QyxJQUFJLElBQUksQ0FBQyxFQUFFO0NBQ1gsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7Q0FDekMsTUFBTSxJQUFJLENBQUMsSUFBSSxNQUFNLElBQUksQ0FBQyxJQUFJLE1BQU0sRUFBRTtDQUN0QyxRQUFRLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO0NBQzFCLFFBQVEsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7Q0FDM0IsUUFBUSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFD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QUFDLFdBQVcsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDLE9BQU8sV0FBVyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUNwakI7Q0FDQSxJQUFJLElBQUksR0FBRyxTQUFTLEdBQUcsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxFQUFFLElBQUksTUFBTSxLQUFLLElBQUksRUFBRSxNQUFNLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUUsRUFBRSxJQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxNQUFNLEtBQUssSUFBSSxFQUFFLEVBQUUsT0FBTyxTQUFTLENBQUMsRUFBRSxNQUFNLEVBQUUsT0FBTyxHQUFHLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQyxFQUFFLEVBQUUsTUFBTSxJQUFJLE9BQU8sSUFBSSxJQUFJLEVBQUUsRUFBRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksTUFBTSxLQUFLLFNBQVMsRUFBRSxFQUFFLE9BQU8sU0FBUyxDQUFDLEVBQUUsQ0FBQyxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDM2U7Q0FDQSxJQUFJLE9BQU8sR0FBRyxPQUFPLE1BQU0sS0FBSyxVQUFVLElBQUksT0FBTyxNQUFNLENBQUMsUUFBUSxLQUFLLFFBQVEsR0FBRyxVQUFVLEdBQUcsRUFBRSxFQUFFLE9BQU8sT0FBTyxHQUFHLENBQUMsRUFBRSxHQUFHLFVBQVUsR0FBRyxFQUFFLEVBQUUsT0FBTyxHQUFHLElBQUksT0FBTyxNQUFNLEtBQUssVUFBVSxJ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",$I=!1,function(e){return eu=eu||function(e,t,n){var Q=void 0===t?null:t,B=function(e,t){var n=atob(e);if(t){for(var Q=new Uint8Array(n.length),B=0,a=n.length;B<a;++B)Q[B]=n.charCodeAt(B);return String.fromCharCode.apply(null,new Uint16Array(Q.buffer))}return n}(e,void 0!==n&&n),a=B.indexOf("\n",10)+1,s=B.substring(a)+(Q?"//# sourceMappingURL="+Q:""),r=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(r)}(_I,qI,$I),new Worker(eu,e)});function nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function Qu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bu={adjustPosition:"-webkit-grab",adjustHeight:"row-resize",adjustBias:"crosshair",adjustWidth:"col-resize",adjustZoom:"col-resize"},au=[],su={adjustPosition:function(e,t,n){var Q=n.originalXY,B=n.gaussian,a=n.originalGaussian.position-Q[0];return B.position=e+a,!0},adjustHeight:function(e,t,n){var Q=n.model,B=n.gaussian;return B.height=1-t,B.height=Math.min(1,Math.max(Q.gaussianMinimumHeight,B.height)),!0},adjustBias:function(e,t,n){var Q=n.originalXY,B=n.gaussian,a=n.originalGaussian;return B.xBias=a.xBias-(Q[0]-e)/B.height,B.yBias=a.yBias+4*(Q[1]-t)/B.height,B.xBias=Math.max(-1,Math.min(1,B.xBias)),B.yBias=Math.max(0,Math.min(2,B.yBias)),!0},adjustWidth:function(e,t,n){var Q=n.originalXY,B=n.gaussian,a=n.originalGaussian,s=n.gaussianSide;return B.width=s<0?a.width-(Q[0]-e):a.width+(Q[0]-e),B.width<.001&&(B.width=.001),!0},adjustZoom:function(e,t,n){var Q=n.rangeZoom,B=n.publicAPI,a=Q[1]-Q[0],s=(e-Q[0])/a,r=Math.abs(s-Q[0]),U=Math.abs(s-Q[1]);if(Math.abs(s-.5*(Q[0]+Q[1]))<Math.min(r,U)){var F=.5*a;Q[0]=Math.min(Math.max(s-F,0),Q[1]-.1),Q[1]=Math.max(Math.min(s+F,1),Q[0]+.1)}else r<U?Q[0]=Math.min(Math.max(s,0),Q[1]-.1):Q[1]=Math.max(Math.min(s,1),Q[0]+.1);return B.invokeZoomChange(Q),!1}};function ru(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n=[];n.length<t;)n.push(0);for(var Q=e.length;Q--;)for(var B=e[Q],a=B.position,s=B.height,r=B.width,U=B.xBias,F=B.yBias,l=0;l<t;l++){var o=l/(t-1);if(o>a+r||o<a-r)n[l]<0&&(n[l]=0);else{var g=r<.001?.001:r,i=((0===U||o===a+U?o:o>a+U?g===U?a:a+g/(g-U)*(o-a-U):-g===U?a:a-g/(g+U)*(o-a-U))-a)/g,c=Math.exp(-4*i*i),d=1-i*i,I=1,u=s*(F<1?F*d+(1-F)*c:(2-F)*d+(F-1)*I);u>n[l]&&(n[l]=u)}}return n}function Uu(e,t,n){var Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{lineWidth:1,strokeStyle:"#000"},B=t[3],a=t[2]/(n.length-1),s=!!Q.fillStyle,r=B+t[1];e.lineWidth=Q.lineWidth,e.strokeStyle=Q.strokeStyle,e.beginPath(),e.moveTo(t[0],t[1]+t[3]);for(var U=0;U<n.length;U++)e.lineTo(t[0]+U*a,Math.max(t[1],r-n[U]*B));if(s){if(e.fillStyle=Q.fillStyle,e.lineTo(t[0]+t[2],t[1]+t[3]),Q.clip)return void e.clip();e.fill()}e.stroke()}function Fu(e,t,n){var Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,1];return[Q[0]+(e-n[0])/n[2]*(Q[1]-Q[0]),(t-n[1])/n[3]]}function lu(e,t){var n=t.map((function(t){return Math.abs(t.position-e)})),Q=Math.min.apply(Math,Object(B.a)(n));return n.indexOf(Q)}function ou(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){var Q=n.offsetX,B=n.offsetY;t&&n.preventDefault(),e(Q,B)}}function gu(){au.filter((function(e){return e.ready})).forEach((function(e){e.callbacks.forEach((function(t){t.touches===e.touches&&t.clicks===e.count&&t.action.apply(t,Object(B.a)(e.singleTouche))})),e.ts=0,e.count=0,e.touches=0,e.ready=!1}))}function iu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Q=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(a){var s=a.target.getBoundingClientRect(),r=Array.prototype.map.call(a.touches,(function(e){return[e.pageX-s.left,e.pageY-s.top]})).reduce((function(e,t){return[e[0]+t[0],e[1]+t[1]]}),[0,0]).map((function(e){return e/a.touches.length}));"touchstart"===a.type?(clearTimeout(au[e].timeout),au[e].ts=a.timeStamp,au[e].singleTouche=r,au[e].touches=a.touches.length):"touchmove"===a.type?(au[e].ts=0,au[e].count=0,au[e].ready=!1):"touchend"===a.type&&(a.timeStamp-au[e].ts<au[e].deltaT?(au[e].count+=1,au[e].ready=!0,Q&&a.preventDefault(),au[e].timeout=setTimeout(gu,au[e].deltaT)):au[e].ready=!1),a.touches.length===n&&(t.apply(void 0,Object(B.a)(r)),Q&&a.preventDefault())}}function cu(e,t,n){return function(Q){return e()?t(Q):n(Q)}}function du(e,t){if(!t)return e;var n=e.length-1,Q=t.map((function(e){return Math.round(e*n)}));return e.slice(Q[0],Q[1]+1)}var Iu={applyGaussianToPiecewiseFunction:function(e,t,n,Q){for(var B=ru(e,t),a=[],s=(n[1]-n[0])/(B.length-1),r=0;r<B.length;r++){var U=n[0]+s*r,F=B[r];a.push({x:U,y:F,midpoint:.5,sharpness:0})}Q.setNodes(a)},computeOpacities:ru,createListener:ou,drawChart:Uu,findGaussian:lu,listenerSelector:cu,normalizeCoordinates:Fu};function uu(e,t){t.classHierarchy.push("vtkPiecewiseGaussianWidget"),t.canvas||(t.canvas=document.createElement("canvas")),e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.canvas),t.container!==n&&(t.container=n,t.container&&t.container.appendChild(t.canvas),e.modified())},e.setGaussians=function(n){t.gaussians!==n&&(t.gaussians=n,t.opacities=ru(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified())},e.addGaussian=function(n,Q,B,a,s){var r=t.gaussians.length;return t.gaussians.push({position:n,height:Q,width:B,xBias:a,yBias:s}),t.opacities=ru(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified(),r},e.removeGaussian=function(n){t.gaussians.splice(n,1),t.opacities=ru(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified()},e.setSize=function(n,Q){t.canvas.setAttribute("width",n),t.canvas.setAttribute("height",Q),t.size[0]===n&&t.size[1]===Q||(t.size=[n,Q],t.colorCanvasMTime=0,e.modified())},e.updateStyle=function(n){t.style=Qu(Qu({},t.style),n),e.modified()},e.setDataArray=function(n){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},B=Q.numberOfBinToConsiders,a=void 0===B?1:B,s=Q.numberOfBinsToSkip,r=void 0===s?1:s,U=Q.numberOfComponents,F=void 0===U?1:U,l=Q.component,o=void 0===l?0:l;t.histogram=null,t.histogramArray=n,t.dataRange=Object(u.b)(n,o,F);var g=Object(Ue.a)(t.dataRange,2),i=g[0],c=g[1],d=4,I=Math.floor(n.length/d)||1;I+=I%F;for(var C=0,m=[],b=[];C<n.length;){var S=new tu;b.push(S);var y=new jI(S),Z=C,x=Math.min(C+I,n.length-1),G=new n.constructor(n.slice(Z,x+1));m.push(y.postMessage({array:G,component:o,numberOfComponents:F,min:i,max:c,numberOfBins:t.numberOfBins},[G.buffer])),C+=I}Promise.all(m).then((function(n){b.forEach((function(e){return e.terminate()})),t.histogram=new Float32Array(t.numberOfBins),t.histogram.fill(0),n.forEach((function(e){for(var n=0,Q=e.length;n<Q;++n)t.histogram[n]+=e[n]}));var Q=Math.min(a,t.histogram.length-r),B=Array.from(t.histogram);B.sort((function(e,t){return Number(e)-Number(t)}));for(var s=0;s<r;s++)B.pop();for(;B.length>Q;)B.shift();for(var U=B.reduce((function(e,t){return e+t}),0)/Q,F=0,l=t.histogram.length;F<l;++F)t.histogram[F]/=U;e.modified(),setTimeout(e.render,0)})),e.modified()},e.onClick=function(n,Q){var B=Fu(n,Q,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),s=Object(Ue.a)(B,2),r=s[0],U=s[1];if(r<0&&t.style.iconSize>1){for(var F=t.style.iconSize+t.style.padding,l=F,o=0;Q>l;)o+=1,l+=F;switch(o){case 0:var g=e.addGaussian(0,1,.1,0,0),i=t.gaussians[g],c=Qu({},i),d=su.adjustPosition;t.activeGaussian=g,t.selectedGaussian=g,a.c.setImmediate((function(){e.onDown(n,Q),t.dragAction={originalXY:[0,0],action:d,gaussian:i,originalGaussian:c}}));break;case 1:-1!==t.selectedGaussian&&e.removeGaussian(t.selectedGaussian);break;default:t.selectedGaussian=-1,t.dragAction=null}}else if(r<0||r>1||U<0||U>1)t.selectedGaussian=-1,t.dragAction=null;else{var I=lu(r,t.gaussians);I!==t.selectedGaussian&&(t.selectedGaussian=I,e.modified())}return!0},e.onHover=function(n,Q){var B=20/t.canvas.height,a=Fu(n,Q,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),s=Object(Ue.a)(a,2),r=s[0],U=s[1],F=Fu(n,Q,t.graphArea),l=Object(Ue.a)(F,1)[0],o=r<0?t.selectedGaussian:lu(r,t.gaussians);t.canvas.style.cursor="default";var g=t.gaussians[o];if(t.enableRangeZoom&&l>=0&&Q<t.graphArea[1]-6){var i=(t.rangeZoom[1]-t.rangeZoom[0])/3;l<t.rangeZoom[0]+i||l>t.rangeZoom[1]-i?t.canvas.style.cursor=Bu.adjustZoom:t.canvas.style.cursor=Bu.adjustPosition,t.dragAction={rangeZoom:t.rangeZoom,action:su.adjustZoom}}else if(g&&l>=0){var c,d=1-U;c=d>g.height+B?"adjustPosition":d>g.height-B?Math.abs(r-g.position)<B?"adjustHeight":"adjustPosition":d>.5*g.height+B?"adjustPosition":d>.5*g.height-B?Math.abs(r-g.position)<B?"adjustBias":"adjustPosition":d>B?"adjustPosition":"adjustWidth",t.canvas.style.cursor=Bu[c];var I=su[c],u=Qu({},g);t.dragAction={originalXY:[r,U],action:I,gaussian:g,originalGaussian:u}}return o!==t.activeGaussian&&(t.activeGaussian=o,e.modified()),!0},e.onDown=function(n,Q){t.mouseIsDown||e.invokeAnimation(!0),t.mouseIsDown=!0;var B=Fu(n,Q,t.graphArea,t.enableRangeZoom?t.rangeZoom:null)[0],a=lu(B,t.gaussians);t.gaussianSide=0;var s=t.gaussians[a];return s&&(t.gaussianSide=s.position-B),a!==t.selectedGaussian&&B>0&&(t.selectedGaussian=a,e.modified()),!0},e.onDrag=function(n,Q){if(t.dragAction){var B=Fu(n,Q,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),a=Object(Ue.a)(B,2),s=a[0],r=a[1];(0,t.dragAction.action)(s,r,Qu({gaussianSide:t.gaussianSide,model:t,publicAPI:e},t.dragAction))&&(t.opacities=ru(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e,!0)),e.modified()}return!0},e.onUp=function(n,Q){return t.mouseIsDown&&e.invokeAnimation(!1),t.mouseIsDown=!1,!0},e.onLeave=function(n,Q){return e.onUp(n,Q),t.canvas.style.cursor="default",t.activeGaussian=-1,e.modified(),!0},e.onAddGaussian=function(n,Q){var B=Fu(n,Q,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),a=Object(Ue.a)(B,2),s=a[0],r=a[1];return s>=0&&e.addGaussian(s,1-r,.1,0,0),!0},e.onRemoveGaussian=function(n,Q){var B=Fu(n,Q,t.graphArea,t.enableRangeZoom?t.rangeZoom:null)[0],a=lu(B,t.gaussians);return B>=0&&-1!==a&&e.removeGaussian(a),!0},e.bindMouseListeners=function(){if(!t.listeners){var n=function(){return!!t.mouseIsDown},Q=function(){for(var e=au.length,t=arguments.length,n=new Array(t),Q=0;Q<t;Q++)n[Q]=arguments[Q];return au.push({callbacks:n,timeout:0,deltaT:200,count:0,ready:!1}),e}({clicks:1,touches:1,action:e.onClick},{clicks:2,touches:1,action:e.onAddGaussian},{clicks:2,touches:2,action:e.onRemoveGaussian});t.listeners={mousemove:cu(n,ou(e.onDrag),ou(e.onHover)),dblclick:ou(e.onAddGaussian),contextmenu:ou(e.onRemoveGaussian),click:ou(e.onClick),mouseup:ou(e.onUp),mousedown:ou(e.onDown),mouseout:ou(e.onLeave),touchstart:iu(Q,a.c.chain(e.onHover,e.onDown)),touchmove:cu(n,iu(Q,e.onDrag),iu(Q,e.onHover)),touchend:iu(Q,e.onUp,0)},Object.keys(t.listeners).forEach((function(e){t.canvas.addEventListener(e,t.listeners[e],!1)}))}},e.unbindMouseListeners=function(){t.listeners&&(Object.keys(t.listeners).forEach((function(e){t.canvas.removeEventListener(e,t.listeners[e])})),delete t.listeners)},e.render=function(){var e=t.canvas.getContext("2d");e.imageSmoothingEnabled=!0;var n=Object(Ue.a)(t.size,2),Q=n[0],B=n[1],a=t.style.padding,s=[Math.floor(t.style.iconSize+a),Math.floor(a),Math.ceil(Q-2*a-t.style.iconSize),Math.ceil(B-2*a)],r=t.style.zoomControlHeight;if(t.enableRangeZoom&&(s[1]+=Math.floor(r),s[3]-=Math.floor(r)),t.graphArea=s,e.clearRect(0,0,Q,B),e.lineJoin="round",e.fillStyle=t.style.backgroundColor,e.fillRect.apply(e,s),t.style.iconSize>1){var U=Math.round(t.style.iconSize/2-t.style.strokeWidth),F=Math.round(U+a+t.style.strokeWidth);e.beginPath(),e.lineWidth=t.style.buttonStrokeWidth,e.strokeStyle=t.style.buttonStrokeColor,e.arc(F-a/2,F,U,0,2*Math.PI,!1),e.fillStyle=t.style.buttonFillColor,e.fill(),e.stroke(),e.moveTo(F-U+t.style.strokeWidth+2-a/2,F),e.lineTo(F+U-t.style.strokeWidth-2-a/2,F),e.stroke(),e.moveTo(F-a/2,F-U+t.style.strokeWidth+2),e.lineTo(F-a/2,F+U-t.style.strokeWidth-2),e.stroke(),-1===t.selectedGaussian?(e.fillStyle=t.style.buttonDisableFillColor,e.lineWidth=t.style.buttonDisableStrokeWidth,e.strokeStyle=t.style.buttonDisableStrokeColor):(e.fillStyle=t.style.buttonFillColor,e.lineWidth=t.style.buttonStrokeWidth,e.strokeStyle=t.style.buttonStrokeColor),e.beginPath(),e.arc(F-a/2,F+a/2+t.style.iconSize,U,0,2*Math.PI,!1),e.fill(),e.stroke(),e.moveTo(F-U+t.style.strokeWidth+2-a/2,F+a/2+t.style.iconSize),e.lineTo(F+U-t.style.strokeWidth-2-a/2,F+a/2+t.style.iconSize),e.stroke()}if(t.histogram&&Uu(e,s,du(t.histogram,t.rangeZoom),{lineWidth:1,strokeStyle:t.style.histogramColor,fillStyle:t.style.histogramColor}),Uu(e,s,du(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:t.style.strokeWidth,strokeStyle:t.style.strokeColor}),t.colorTransferFunction&&t.colorTransferFunction.getSize()){var l=t.dataRange||t.colorTransferFunction.getMappingRange();t.colorCanvas&&t.colorCanvasMTime===t.colorTransferFunction.getMTime()||(t.colorCanvasMTime=t.colorTransferFunction.getMTime(),t.colorCanvas=function(e,t,n,Q){var B=Q||document.createElement("canvas");B.setAttribute("width",t),B.setAttribute("height",256);for(var a=B.getContext("2d"),s=e.getUint8Table(n[0],n[1],t,4),r=a.getImageData(0,0,t,256),U=0;U<256;U++)r.data.set(s,4*U*t);for(var F=256*t*4,l=4*t,o=3;o<F;o+=4)r.data[o]=255-Math.floor(o/l);return a.putImageData(r,0,0),B}(t.colorTransferFunction,s[2],l,t.colorCanvas)),e.save(),Uu(e,s,du(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:1,strokeStyle:"rgba(0,0,0,0)",fillStyle:"rgba(0,0,0,1)",clip:!0}),t.enableRangeZoom?e.drawImage(t.colorCanvas,t.rangeZoom[0]*s[2],0,s[2],s[3],s[0],s[1],s[2]/(t.rangeZoom[1]-t.rangeZoom[0]),s[3]):e.drawImage(t.colorCanvas,s[0],s[1]),e.restore()}else t.backgroundImage&&(t.colorCanvas=function(e,t,n){var Q=n||document.createElement("canvas");return Q.setAttribute("width",t),Q.setAttribute("height",256),Q.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,256),Q}(t.backgroundImage,s[2],t.colorCanvas),e.save(),Uu(e,s,du(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:1,strokeStyle:"rgba(0,0,0,0)",fillStyle:"rgba(0,0,0,1)",clip:!0}),e.drawImage(t.colorCanvas,s[0],s[1]),e.restore());t.enableRangeZoom&&(e.fillStyle=t.style.zoomControlColor,e.beginPath(),e.rect(s[0]+t.rangeZoom[0]*s[2],0,(t.rangeZoom[1]-t.rangeZoom[0])*s[2],r),e.fill());var o,g,i=t.gaussians[t.activeGaussian]||t.gaussians[t.selectedGaussian];if(i){Uu(e,s,du(ru([i],s[2]),t.enableRangeZoom&&t.rangeZoom),{lineWidth:t.style.activeStrokeWidth,strokeStyle:t.style.activeColor});var c=s[0]+(o=i.position,((g=t.enableRangeZoom&&t.rangeZoom)?(o-g[0])/(g[1]-g[0]):o)*s[2]),d=s[1]+(1-i.height)*s[3],I=s[1]+(1-.5*i.height)*s[3],u=s[1]+s[3],C=i.width*s[2];t.enableRangeZoom&&(C/=t.rangeZoom[1]-t.rangeZoom[0]),e.lineWidth=t.style.handleWidth,e.strokeStyle=t.style.handleColor,e.fillStyle=t.style.backgroundColor,e.beginPath(),e.moveTo(c,s[1]+(1-i.height)*s[3]),e.lineTo(c,s[1]+s[3]),e.stroke(),e.beginPath(),e.arc(c,d,6,0,2*Math.PI),e.fill(),e.stroke();var m=Math.min(.1*C,i.height*s[3]*.2);e.beginPath(),e.rect(c-m,I-m,2*m,2*m),e.fill(),e.stroke(),e.beginPath();var b=.8*C;e.rect(c-b,u-5,2*b,10),e.fill(),e.stroke()}},e.getOpacityNodes=function(e){for(var n=e||t.dataRange,Q=(n[1]-n[0])/(t.opacities.length-1),B=[],a=0;a<t.opacities.length;a++){var s=n[0]+Q*a,r=t.opacities[a];B.push({x:s,y:r,midpoint:.5,sharpness:0})}return B},e.applyOpacity=function(t,n){var Q=e.getOpacityNodes(n);t.setNodes(Q)},e.getOpacityRange=function(e){for(var n=e||t.dataRange,Q=(n[1]-n[0])/(t.opacities.length-1),B=t.opacities.length-1,a=0,s=0;s<t.opacities.length;s++)t.opacities[s]>0&&(B=Math.min(B,s)),t.opacities[s]>0&&(a=Math.max(a,s));return[n[0]+B*Q,n[0]+a*Q]};var n=e.setEnableRangeZoom;e.setEnableRangeZoom=function(e){var Q=n(e);return Q&&(t.colorCanvasMTime=0,t.rangeZoom=[0,1]),Q};var Q=e.setRangeZoom;e.setRangeZoom=function(){var e=Q.apply(void 0,arguments);return e&&(t.colorCanvasMTime=0),e},e.onModified((function(){return e.render()})),e.setSize.apply(e,Object(B.a)(t.size))}var Cu={histogram:[],numberOfBins:256,histogramArray:null,dataRange:[0,1],gaussians:[],opacities:[],size:[600,300],piecewiseSize:256,colorCanvasMTime:0,gaussianMinimumHeight:.05,style:{backgroundColor:"rgba(255, 255, 255, 1)",histogramColor:"rgba(200, 200, 200, 0.5)",strokeColor:"rgb(0, 0, 0)",activeColor:"rgb(0, 0, 150)",buttonDisableFillColor:"rgba(255, 255, 255, 0.5)",buttonDisableStrokeColor:"rgba(0, 0, 0, 0.5)",buttonStrokeColor:"rgba(0, 0, 0, 1)",buttonFillColor:"rgba(255, 255, 255, 1)",handleColor:"rgb(0, 150, 0)",strokeWidth:2,activeStrokeWidth:3,buttonStrokeWidth:1.5,handleWidth:3,iconSize:20,padding:10,zoomControlHeight:10,zoomControlColor:"#999"},activeGaussian:-1,selectedGaussian:-1,enableRangeZoom:!0,rangeZoom:[0,1]};function mu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cu,n),a.c.obj(e,t),a.c.setGet(e,t,["piecewiseSize","numberOfBins","colorTransferFunction","backgroundImage","enableRangeZoom","gaussianMinimumHeight"]),a.c.setGetArray(e,t,["rangeZoom"],2),a.c.get(e,t,["size","canvas","gaussians"]),a.c.event(e,t,"opacityChange"),a.c.event(e,t,"animation"),a.c.event(e,t,"zoomChange"),uu(e,t)}var bu=Qu({newInstance:a.c.newInstance(mu,"vtkPiecewiseGaussianWidget"),extend:mu},Iu);var Su={container:"VolumeController-module_container__2HNSO",line:"VolumeController-module_line__3rtqL",button:"VolumeController-module_button__2T-xL",sliderEntry:"VolumeController-module_sliderEntry__27XSC",sliderIcon:"VolumeController-module_sliderIcon__U8YAZ VolumeController-module_button__2T-xL",slider:"VolumeController-module_slider__3PS68",piecewiseEditor:"VolumeController-module_piecewiseEditor__2_jav",select:"VolumeController-module_select__7mbfS",presets:"VolumeController-module_presets__1h4j5 VolumeController-module_select__7mbfS",shadow:"VolumeController-module_shadow__29K9t VolumeController-module_select__7mbfS",buttonDarkBG:"VolumeController-module_buttonDarkBG__3W1zO VolumeController-module_button__2T-xL",presetsDarkBG:"VolumeController-module_presetsDarkBG__2ZI2W VolumeController-module_presets__1h4j5 VolumeController-module_select__7mbfS",shadowDarkBG:"VolumeController-module_shadowDarkBG__WHYZ- VolumeController-module_shadow__29K9t VolumeController-module_select__7mbfS",buttonBrightBG:"VolumeController-module_buttonBrightBG__2dstz VolumeController-module_button__2T-xL",presetsBrightBG:"VolumeController-module_presetsBrightBG__3_VRC VolumeController-module_presets__1h4j5 VolumeController-module_select__7mbfS",shadowBrightBG:"VolumeController-module_shadowBrightBG__YCHpe VolumeController-module_shadow__29K9t VolumeController-module_select__7mbfS"};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var Q=document.head||document.getElementsByTagName("head")[0],B=document.createElement("style");B.type="text/css","top"===n&&Q.firstChild?Q.insertBefore(B,Q.firstChild):Q.appendChild(B),B.styleSheet?B.styleSheet.cssText=e:B.appendChild(document.createTextNode(e))}}(".VolumeController-module_container__2HNSO {\n  display: flex;\n  align-items: stretch;\n  flex-direction: column;\n  justify-content: space-between;\n  position: absolute;\n  top: 5px;\n  left: 5px;\n  background: rgba(128, 128, 128, 0.5);\n  border-radius: 5px;\n  padding: 2px;\n  border: 0.5px solid black;\n  box-sizing: border-box;\n}\n\n.VolumeController-module_line__3rtqL {\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.VolumeController-module_button__2T-xL {\n  cursor: pointer;\n  width: 1rem;\n  margin-left: 5px;\n  margin-right: 5px;\n}\n\n.VolumeController-module_button__2T-xL svg {\n  width: 1rem;\n  height: 1rem;\n}\n\n.VolumeController-module_sliderEntry__27XSC {\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.VolumeController-module_sliderIcon__U8YAZ {\n  height: 1rem;\n}\n\n.VolumeController-module_slider__3PS68 {\n  flex: 1;\n  min-height: 1rem;\n  width: 5px;\n}\n\n.VolumeController-module_piecewiseEditor__2_jav {\n  flex: 1;\n}\n\n.VolumeController-module_select__7mbfS {\n  flex: 1;\n  border: none;\n  background: transparent;\n  color: white;\n  border: none;\n  -moz-appearance: none;\n  width: 5px;\n}\n\n.VolumeController-module_select__7mbfS select:focus {\n  outline: none;\n  border: none;\n}\n\n.VolumeController-module_presets__1h4j5 {\n}\n\n.VolumeController-module_shadow__29K9t {\n}\n\n.VolumeController-module_buttonDarkBG__3W1zO {\n}\n\n.VolumeController-module_presetsDarkBG__2ZI2W {\n  color: white;\n}\n\n.VolumeController-module_presetsDarkBG__2ZI2W option {\n  color: black;\n}\n\n.VolumeController-module_shadowDarkBG__WHYZ- {\n  color: white;\n}\n\n.VolumeController-module_shadowDarkBG__WHYZ- option {\n  color: black;\n}\n\n.VolumeController-module_buttonBrightBG__2dstz {\n}\n\n.VolumeController-module_presetsBrightBG__3_VRC {\n  color: black;\n}\n\n.VolumeController-module_presetsBrightBG__3_VRC option {\n  color: white;\n}\n\n.VolumeController-module_shadowBrightBG__YCHpe {\n  color: black;\n}\n\n.VolumeController-module_shadowBrightBG__YCHpe option {\n  color: white;\n}\n");var yu=II.rgbPresetNames.map((function(e){return'<option value="'.concat(e,'">').concat(e,"</option>")}));function Zu(e,t){function n(){var e=!!Number(t.el.querySelector(".js-shadow").value);t.actor.getProperty().setShade(e),t.renderWindow.render()}function Q(){var e=t.actor.getMapper().getInputData();if(e){var n=e.getPointData().getScalars()||e.getPointData().getArrays()[0],Q=t.rescaleColorMap?t.colorDataRange:n.getRange(),a=II.getPresetByName(t.el.querySelector(".js-color-preset").value),s=t.actor.getProperty().getRGBTransferFunction(0);s.applyColorMap(a),s.setMappingRange.apply(s,Object(B.a)(Q)),s.updateRange(),t.renderWindow.render()}}function a(){var e=Number(t.el.querySelector(".js-spacing").value),n=t.actor.getMapper().getInputData(),Q=.7*Math.sqrt(n.getSpacing().map((function(e){return e*e})).reduce((function(e,t){return e+t}),0));t.actor.getMapper().setSampleDistance(Q*Math.pow(2,3*e-1.5)),t.renderWindow.render()}function s(){var e=Number(t.el.querySelector(".js-edge").value);if(0===e)t.actor.getProperty().setUseGradientOpacity(0,!1);else{var n=t.actor.getMapper().getInputData(),Q=(n.getPointData().getScalars()||n.getPointData().getArrays()[0]).getRange();t.actor.getProperty().setUseGradientOpacity(0,!0);var B=Math.max(0,e-.3)/.7;t.actor.getProperty().setGradientOpacityMinimumValue(0,.2*(Q[1]-Q[0])*B*B),t.actor.getProperty().setGradientOpacityMaximumValue(0,1*(Q[1]-Q[0])*e*e)}t.renderWindow.render()}t.classHierarchy.push("vtkVolumeController"),t.el=document.createElement("div"),t.el.setAttribute("class",Su.container),t.widget=bu.newInstance({numberOfBins:256,size:t.size}),e.setupContent=function(B,r,U){var F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"erdc_rainbow_bright";e.setActor(r),e.setRenderWindow(B);var o=t.actor.getMapper().getInputData(),g=o.getPointData().getScalars()||o.getPointData().getArrays()[0],i=t.actor.getProperty().getRGBTransferFunction(0),c=t.actor.getProperty().getScalarOpacity(0),d=U?"DarkBG":"BrightBG",I={};["button","presets","shadow"].forEach((function(e){I[e]=Su["".concat(e).concat(d)]})),t.el.innerHTML='\n      <div class="'.concat(Su.line,'">\n        <div class="').concat(I.button,' js-button">').concat(MI,'</div>\n        <select class="').concat(I.shadow,' js-shadow js-toggle">\n          <option value="1">Use Shadow</option>\n          <option value="0">No Shadow</option>\n        </select>\n        <select class="').concat(I.presets,' js-color-preset js-toggle">\n          ').concat(yu,'\n        </select>\n      </div>\n      <div class="').concat(Su.line,' js-toggle">\n        <div class="').concat(Su.sliderEntry,'">\n          <div class="').concat(Su.sliderIcon,'">').concat(YI,'</div>\n          <input type="range" min="0" max="1" value="0.4" step="0.01" class="').concat(Su.slider,' js-spacing" />\n        </div>\n        <div class="').concat(Su.sliderEntry,'">\n          <div class="').concat(Su.sliderIcon,'">').concat(TI,'</div>\n          <input type="range" min="0" max="1" value="0.2" step="0.01" class="').concat(Su.slider,' js-edge" />\n        </div>\n      </div>\n      <div class="').concat(Su.piecewiseEditor,' js-pwf js-toggle"></div>\n    ');var u=t.el.querySelector(".js-button"),C=t.el.querySelector(".js-shadow"),m=t.el.querySelector(".js-color-preset"),b=t.el.querySelector(".js-spacing"),S=t.el.querySelector(".js-edge"),y=t.el.querySelector(".js-pwf");t.widget.updateStyle({backgroundColor:"rgba(255, 255, 255, 0.6)",histogramColor:"rgba(100, 100, 100, 0.5)",strokeColor:"rgb(0, 0, 0)",activeColor:"rgb(255, 255, 255)",handleColor:"rgb(50, 150, 50)",buttonDisableFillColor:"rgba(255, 255, 255, 0.5)",buttonDisableStrokeColor:"rgba(0, 0, 0, 0.5)",buttonStrokeColor:"rgba(0, 0, 0, 1)",buttonFillColor:"rgba(255, 255, 255, 1)",strokeWidth:2,activeStrokeWidth:3,buttonStrokeWidth:1.5,handleWidth:3,iconSize:0,padding:10}),t.widget.addGaussian(.5,1,.5,.5,.4),t.widget.setDataArray(g.getData()),t.widget.setColorTransferFunction(i),t.widget.applyOpacity(c),t.widget.setContainer(y),t.widget.bindMouseListeners(),t.colorDataRange=t.widget.getOpacityRange(),u.addEventListener("click",e.toggleVisibility),C.addEventListener("change",n),m.addEventListener("change",Q),b.addEventListener("input",a),S.addEventListener("input",s),t.widget.onOpacityChange((function(){t.widget.applyOpacity(c),t.colorDataRange=t.widget.getOpacityRange(),t.rescaleColorMap&&Q(),t.renderWindow.getInteractor().isAnimating()||t.renderWindow.render()})),t.widget.onAnimation((function(e){e?t.renderWindow.getInteractor().requestAnimation(t.widget):(t.renderWindow.getInteractor().cancelAnimation(t.widget),t.renderWindow.render())})),i.onModified((function(){t.widget.render(),t.renderWindow.getInteractor().isAnimating()||t.renderWindow.render()})),C.value=Number(F)?"1":"0",m.value=l,n(),Q(),a(),s()},e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.el),t.container!==n&&(t.container=n,t.container&&t.container.appendChild(t.el),e.modified())};var r=e.setRescaleColorMap;e.setRescaleColorMap=function(e){return!!r(e)&&(Q(),!0)},e.toggleVisibility=function(){e.setExpanded(!e.getExpanded())},e.setExpanded=function(e){var n=t.el.querySelectorAll(".js-toggle"),Q=n.length;if(t.expanded=e,t.expanded)for(;Q--;)n[Q].style.display="flex";else for(;Q--;)n[Q].style.display="none"},e.getExpanded=function(){return t.expanded},e.setSize=t.widget.setSize,e.render=t.widget.render,e.onAnimation=t.widget.onAnimation,e.onModified(e.render),e.setSize.apply(e,Object(B.a)(t.size))}var xu={size:[600,300],expanded:!0,rescaleColorMap:!1};function Gu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xu,n),a.c.obj(e,t),a.c.setGet(e,t,["actor","renderWindow","rescaleColorMap"]),a.c.get(e,t,["widget"]),Zu(e,t)}var Vu={newInstance:a.c.newInstance(Gu,"vtkVolumeController"),extend:Gu};var Ru=function(e){qB(n,Qa.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,Q=na(e);if(t){var B=na(this).constructor;n=Reflect.construct(Q,arguments,B)}else n=Q.apply(this,arguments);return ta(this,n)}}(n);function n(e){var Q;Object(Ze.a)(this,n),(Q=t.call(this,e)).subscriptions=[],Q.containerRef=Ba.a.createRef();var B=e.size,a=e.rescaleColorMap;return Q.controller=Vu.newInstance({size:B,rescaleColorMap:a}),Q}return Object(xe.a)(n,[{key:"render",value:function(){var e=this;return Ba.a.createElement(Sd.Consumer,null,(function(t){return Ba.a.createElement(yd.Consumer,null,(function(n){return e.view=t,e.representation=n,Ba.a.createElement("div",{ref:e.containerRef})}))}))}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e,t,n){var Q;(Q=this.controller).setSize.apply(Q,Object(B.a)(this.props.size)),this.controller.render()}},{key:"componentWillUnmount",value:function(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.controller.setContainer(null),this.controller.delete(),this.controller=null}},{key:"init",value:function(){var e=this,t=this.containerRef.current,n=this.view,Q=n.renderWindow,B=n.props,a=this.representation.volume,s=B.background[0]+B.background[1]+B.background[2]<1.5;if(a&&a.getMapper()&&a.getMapper().getInputData()){var r=a.getMapper().getInputData();this.controller.setContainer(t),this.controller.setupContent(Q,a,s),this.controller.render(),this.view.resetCamera(),this.view.renderView(),this.subscriptions.push(r.onModified((function(){return e.onDataChange()}),-1))}else setTimeout((function(){return e.init()}),100)}},{key:"onDataChange",value:function(){var e=this.controller.getWidget();if(this.representation&&this.representation.volume){var t=this.representation.volume.getMapper().getInputData(),n=t.getPointData().getScalars()||t.getPointData().getArrays()[0];e.setDataArray(n.getData())}}}]),n}();Ru.defaultProps={size:[400,150],rescaleColorMap:!0},Ru.propTypes={id:sa.a.string,size:sa.a.arrayOf(sa.a.number),rescaleColorMap:sa.a.bool};var Lu=Ru;function pu(e){return Ba.a.createElement(Zd.Consumer,null,(function(t){return Ba.a.createElement(xd.Provider,{value:t.getDataSet().getPointData()},e.children)}))}pu.defaultProps={},pu.propTypes={children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var hu=pu;var Nu=function(e){qB(n,Qa.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,Q=na(e);if(t){var B=na(this).constructor;n=Reflect.construct(Q,arguments,B)}else n=Q.apply(this,arguments);return ta(this,n)}}(n);function n(e){var Q;return Object(Ze.a)(this,n),(Q=t.call(this,e)).polydata=U.a.newInstance(),Q}return Object(xe.a)(n,[{key:"render",value:function(){var e=this;return Ba.a.createElement(yd.Consumer,null,(function(t){return Ba.a.createElement(Gd.Consumer,null,(function(n){return e.representation=t,e.downstream||(e.downstream=n),Ba.a.createElement(Zd.Provider,{value:e},Ba.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}},{key:"componentDidMount",value:function(){this.update(this.props),this.downstream.setInputData(this.polydata,this.props.port)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.polydata.delete(),this.polydata=null}},{key:"update",value:function(e,t){var n=e.connectivity,Q=e.points,B=e.verts,a=e.lines,s=e.polys,r=e.strips,U=!1,F=Q&&Q.length>196608?Uint32Array:Uint16Array;if(!Q||t&&Q===t.points||(this.polydata.getPoints().setData(Float64Array.from(Q),3),U=!0),!B||t&&B===t.verts||(this.polydata.getVerts().setData(F.from(B)),U=!0),!a||t&&a===t.lines||(this.polydata.getLines().setData(F.from(a)),U=!0),!s||t&&s===t.polys||(this.polydata.getPolys().setData(F.from(s)),U=!0),!r||t&&r===t.strips||(this.polydata.getStrips().setData(F.from(r)),U=!0),n&&(n||!t||n!==t.connectivity)){var l=Q.length/3;switch(n){case"points":var o=new Uint32Array(l+1);o[0]=l;for(var g=0;g<l;g++)o[g+1]=g;this.polydata.getVerts().setData(o),U=!0;break;case"triangles":for(var i=new Uint32Array(l+l/3),c=0,d=0;d<l;d+=3)i[c++]=3,i[c++]=d+0,i[c++]=d+1,i[c++]=d+2;this.polydata.getPolys().setData(i),U=!0;break;case"strips":var I=new Uint32Array(l+1);I[0]=l;for(var u=0;u<l;u++)I[u+1]=u;this.polydata.getStrips().setData(I),U=!0}}U&&this.modified()}},{key:"getDataSet",value:function(){return this.polydata}},{key:"modified",value:function(){this.polydata.modified(),this.representation&&this.representation.dataChanged()}}]),n}();Nu.defaultProps={port:0,points:[],connectivity:"manual"},Nu.propTypes={id:sa.a.string,port:sa.a.number,points:sa.a.arrayOf(sa.a.number),verts:sa.a.arrayOf(sa.a.number),lines:sa.a.arrayOf(sa.a.number),polys:sa.a.arrayOf(sa.a.number),strips:sa.a.arrayOf(sa.a.number),connectivity:sa.a.string,children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var Du=Nu;var Au=function(e){qB(n,Qa.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,Q=na(e);if(t){var B=na(this).constructor;n=Reflect.construct(Q,arguments,B)}else n=Q.apply(this,arguments);return ta(this,n)}}(n);function n(e){var Q;return Object(Ze.a)(this,n),(Q=t.call(this,e)).reader=null,Q}return Object(xe.a)(n,[{key:"render",value:function(){var e=this;return Ba.a.createElement(Sd.Consumer,null,(function(t){return Ba.a.createElement(yd.Consumer,null,(function(n){return e.representation=n,Ba.a.createElement(Gd.Consumer,null,(function(n){if(!e.reader){var Q=e.props.vtkClass;e.reader=Object(h.a)({vtkClass:Q})}return e.downstream||(n.setInputConnection(e.reader.getOutputPort(),e.props.port),e.downstream=n),e.view=t,Ba.a.createElement(Gd.Provider,{value:e.reader},Ba.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.reader.delete(),this.reader=null}},{key:"update",value:function(e,t){var n=this,Q=e.vtkClass,B=e.url,a=e.parseAsText,s=e.parseAsArrayBuffer;!Q||t&&Q===t.vtkClass||(this.reader=Object(h.a)({vtkClass:Q}),this.downstream.setInputConnection(this.reader.getOutputPort(),this.props.port)),!B||t&&B===t.url||this.reader.setUrl(B).then((function(){n.representation&&n.representation.dataChanged(),n.view&&(n.props.resetCameraOnUpdate&&n.view.resetCamera(),n.props.renderOnUpdate&&n.view.renderView())})),!a||t&&a===t.parseAsText||(this.reader.parseAsText(a),this.representation&&this.representation.dataChanged()),!s||t&&s===t.parseAsArrayBuffer||(this.reader.parseAsArrayBuffer(Et.toArrayBuffer(s)),this.representation&&this.representation.dataChanged()),this.view&&(this.props.resetCameraOnUpdate&&this.view.resetCamera(),this.props.renderOnUpdate&&this.view.renderView())}}]),n}();Au.defaultProps={port:0,vtkClass:"",renderOnUpdate:!0,resetCameraOnUpdate:!0},Au.propTypes={id:sa.a.string,port:sa.a.number,vtkClass:sa.a.string,url:sa.a.string,parseAsText:sa.a.string,parseAsArrayBuffer:sa.a.string,renderOnUpdate:sa.a.bool,resetCameraOnUpdate:sa.a.bool,children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var Eu=Au;function fu(e,t){t.classHierarchy.push("vtkTrivialProducer"),e.requestData=function(e,t){t.length=e.length;for(var n=0;n<e.length;n++)t[n]=e[n]}}var Ju=a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,n),a.c.obj(e,t),a.c.algo(e,t,1,1),fu(e,t)}),"vtkTrivialProducer"),vu={},Wu=function(e){qB(n,Qa.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,Q=na(e);if(t){var B=na(this).constructor;n=Reflect.construct(Q,arguments,B)}else n=Q.apply(this,arguments);return ta(this,n)}}(n);function n(){return Object(Ze.a)(this,n),t.apply(this,arguments)}return Object(xe.a)(n,[{key:"getTrivialProducer",value:function(){var e=vu[this.props.name];return e||(e=Ju(),vu[this.props.name]=e),e}},{key:"render",value:function(){var e=this;return Ba.a.createElement(Gd.Consumer,null,(function(t){return e.downstream||(e.downstream=t),Ba.a.createElement(Gd.Provider,{value:e.getTrivialProducer()},Ba.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}},{key:"componentDidMount",value:function(){this.downstream&&this.downstream.setInputConnection(this.getTrivialProducer().getOutputPort(),this.props.port)}}]),n}();Wu.defaultProps={port:0,name:"shared"},Wu.propTypes={id:sa.a.string,port:sa.a.number,name:sa.a.string,children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var Xu=Wu;function Hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function ku(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hu(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tu=As.VectorMode,Mu=new Float64Array(3),Yu=new Float64Array(3),wu=new Float64Array(3),Ou=new Float64Array(3),zu=new Float64Array(3),Pu=new Float64Array(3),Ku=new Float64Array(16);function ju(e,t){e.strokeStyle=t.strokeColor,e.lineWidth=t.strokeSize,e.fillStyle=t.fontColor,e.font="".concat(t.fontStyle," ").concat(t.fontSize,"px ").concat(t.fontFamily)}function _u(e,t){t.classHierarchy.push("vtkScalarBarActor");var n=new Map;e.computeAndApplyAutomatedSettings=function(){var n=Math.pow(t.lastSize[0]/700,.8),Q=Math.pow(t.lastSize[1]/700,.8),B=Math.min(n,Q);t.axisTextStyle.fontSize=Math.max(24*B,12),t.lastAspectRatio>1?t.tickTextStyle.fontSize=Math.max(20*B,10):t.tickTextStyle.fontSize=Math.max(16*B,10);var a=e.updateTextureAtlas();if(t.topTitle=!1,t.lastAspectRatio>1){t.tickLabelPixelOffset=.4*t.tickTextStyle.fontSize;var s=2*(a.tickWidth+t.tickLabelPixelOffset)/t.lastSize[0];t.axisTitlePixelOffset=.8*t.axisTextStyle.fontSize;var r=2*(a.titleHeight+t.axisTitlePixelOffset)/t.lastSize[0];s+.4*r>2*a.titleWidth/t.lastSize[0]?(t.topTitle=!0,t.boxSize[0]=s+.4*r,t.boxPosition=[.98-t.boxSize[0],-.92]):(t.boxSize[0]=s+1.4*r,t.boxPosition=[.99-t.boxSize[0],-.92]),t.boxSize[1]=Math.max(1.2,Math.min(1.84/Q,1.84))}else{t.axisTitlePixelOffset=2*t.tickTextStyle.fontSize,t.tickLabelPixelOffset=.5*t.tickTextStyle.fontSize;var U=2*(a.tickHeight+t.tickLabelPixelOffset)/t.lastSize[1],F=2*(a.titleHeight+t.axisTitlePixelOffset)/t.lastSize[1],l=2*a.tickWidth/t.lastSize[0];t.boxSize[0]=Math.min(1.9,Math.max(1.4,1.4*l*(t.ticks.length+3))),t.boxSize[1]=U+F,t.boxPosition=[-.5*t.boxSize[0],-.97]}e.recomputeBarSegments(a)},e.update=function(){if(t.scalarsToColors&&t.visibility){if(t.barMapper.setLookupTable(t.scalarsToColors),t.forceUpdate||Math.max(t.scalarsToColors.getMTime(),e.getMTime())>t.lastRebuildTime.getMTime()){var n=t.scalarsToColors.getMappingRange();t.lastTickBounds=Object(B.a)(n),t.barMapper.setScalarRange(t.lastTickBounds);var Q=sc().domain([t.lastTickBounds[0],t.lastTickBounds[1]]);t.ticks=Q.ticks(5);var a=Q.tickFormat(5);if(t.tickStrings=t.ticks.map(a),t.automated)e.computeAndApplyAutomatedSettings();else{var s=e.updateTextureAtlas();e.recomputeBarSegments(s)}t.forceViewUpdate=!0,t.lastRebuildTime.modified(),t.forceUpdate=!1}(t.forceViewUpdate||t.camera.getMTime()>t.lastRedrawTime.getMTime())&&(e.updatePolyDataForLabels(),e.updatePolyDataForBarSegments(),t.lastRedrawTime.modified(),t.forceViewUpdate=!1)}},e.completedImage=function(Q){t.nextImage&&t.nextImage.complete&&(t.tmTexture.setImage(t.nextImage),t.nextImage=null,n=t.nextAtlas,t.nextAtlas=null,Q&&(t.forceViewUpdate=!0,e.update()))},e.updateTextureAtlas=function(){t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left";var n={},Q=new Map,a=0,s=1;ju(t.tmContext,t.axisTextStyle);var r=t.tmContext.measureText(t.axisLabel),U={height:r.actualBoundingBoxAscent+2,startingHeight:s,width:r.width+2,textStyle:t.axisTextStyle};Q.set(t.axisLabel,U),s+=U.height,a=U.width,n.titleWidth=U.width,n.titleHeight=U.height,n.tickWidth=0,n.tickHeight=0,ju(t.tmContext,t.tickTextStyle);for(var F=[].concat(Object(B.a)(t.tickStrings),["NaN","Below","Above"]),l=0;l<F.length;l++)Q.has(F[l])||(U={height:(r=t.tmContext.measureText(F[l])).actualBoundingBoxAscent+2,startingHeight:s,width:r.width+2,textStyle:t.tickTextStyle},Q.set(F[l],U),s+=U.height,a<U.width&&(a=U.width),n.tickWidth<U.width&&(n.tickWidth=U.width),n.tickHeight<U.height&&(n.tickHeight=U.height));a=Object(u.h)(a),s=Object(u.h)(s),Q.forEach((function(e){e.tcoords=[0,(s-e.startingHeight-e.height)/s,e.width/a,(s-e.startingHeight-e.height)/s,e.width/a,(s-e.startingHeight)/s,0,(s-e.startingHeight)/s]})),t.tmCanvas.width=a,t.tmCanvas.height=s,t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t.tmContext.clearRect(0,0,a,s),Q.forEach((function(e,n){ju(t.tmContext,e.textStyle),t.tmContext.fillText(n,1,e.startingHeight+e.height-1)}));var o=new Image;return o.src=t.tmCanvas.toDataURL("image/png"),t.nextImage=o,t.nextAtlas=Q,o.complete?e.completedImage(!1):o.addEventListener("load",(function(){e.completedImage(!0)})),n},e.computeBarSize=function(e){t.vertical=t.boxSize[1]>t.boxSize[0];var n=2*e.tickHeight/t.lastSize[1],Q=[1,1];if(t.vertical){var B=2*(e.tickWidth+t.tickLabelPixelOffset)/t.lastSize[0];if(t.topTitle){var a=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[1];t.barSize[0]=t.boxSize[0]-B,t.barSize[1]=t.boxSize[1]-a}else{var s=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[0];t.barSize[0]=t.boxSize[0]-s-B,t.barSize[1]=t.boxSize[1]}t.barPosition[0]=t.boxPosition[0]+B,t.barPosition[1]=t.boxPosition[1],Q[1]=n}else{var r=(2*e.tickWidth-8)/t.lastSize[0],U=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[1];t.barSize[0]=t.boxSize[0],t.barPosition[0]=t.boxPosition[0],t.barSize[1]=t.boxSize[1]-U-n,t.barPosition[1]=t.boxPosition[1],Q[0]=r}return Q},e.recomputeBarSegments=function(n){var Q=e.computeBarSize(n);t.barSegments=[];var B=[0,0],a=t.vertical?1:0,s=t.vertical?.01:.02;function r(e,n){t.barSegments.push({corners:[[].concat(B),[B[0]+Q[0],B[1]],[B[0]+Q[0],B[1]+Q[1]],[B[0],B[1]+Q[1]]],scalars:n,title:e}),B[a]+=Q[a]+s}"function"==typeof t.scalarsToColors.getNanColor&&r("NaN",[NaN,NaN,NaN,NaN]),"function"==typeof t.scalarsToColors.getUseBelowRangeColor&&t.scalarsToColors.getUseBelowRangeColor()&&r("Below",[-.1,-.1,-.1,-.1]);var U="function"==typeof t.scalarsToColors.getUseAboveRangeColor&&t.scalarsToColors.getUseAboveRangeColor();B[a]+=s;var F=Q[a];Q[a]=U?1-2*s-Q[a]-B[a]:1-s-B[a],r("ticks",t.vertical?[0,0,.995,.995]:[0,.995,.995,0]),U&&(Q[a]=F,B[a]+=s,r("Above",[1.1,1.1,1.1,1.1]))},e.createPolyDataForOneLabel=function(e,t,Q,B,a,s,r){var U=n.get(e);if(U){var F=r.ptIdx,l=r.cellIdx;Mu[0]=t[0],Mu[1]=t[1],Mu[2]=t[2],a[0]<-.5?Object(y.b)(wu,Q,a[0]*s-U.width):a[0]>.5?Object(y.b)(wu,Q,a[0]*s):Object(y.b)(wu,Q,a[0]*s-U.width/2),Object(y.g)(Mu,Mu,wu),Object(y.b)(wu,B,a[1]*s-U.height/2),Object(y.g)(Mu,Mu,wu),r.points[3*F]=Mu[0],r.points[3*F+1]=Mu[1],r.points[3*F+2]=Mu[2],r.tcoords[2*F]=U.tcoords[0],r.tcoords[2*F+1]=U.tcoords[1],F++,Object(y.b)(wu,Q,U.width),Object(y.g)(Mu,Mu,wu),r.points[3*F]=Mu[0],r.points[3*F+1]=Mu[1],r.points[3*F+2]=Mu[2],r.tcoords[2*F]=U.tcoords[2],r.tcoords[2*F+1]=U.tcoords[3],F++,Object(y.b)(wu,B,U.height),Object(y.g)(Mu,Mu,wu),r.points[3*F]=Mu[0],r.points[3*F+1]=Mu[1],r.points[3*F+2]=Mu[2],r.tcoords[2*F]=U.tcoords[4],r.tcoords[2*F+1]=U.tcoords[5],F++,Object(y.b)(wu,Q,U.width),Object(y.a)(Mu,Mu,wu),r.points[3*F]=Mu[0],r.points[3*F+1]=Mu[1],r.points[3*F+2]=Mu[2],r.tcoords[2*F]=U.tcoords[6],r.tcoords[2*F+1]=U.tcoords[7],F++,r.polys[4*l]=3,r.polys[4*l+1]=F-4,r.polys[4*l+2]=F-3,r.polys[4*l+3]=F-2,l++,r.polys[4*l]=3,r.polys[4*l+1]=F-4,r.polys[4*l+2]=F-2,r.polys[4*l+3]=F-1,r.ptIdx+=4,r.cellIdx+=2}},e.updatePolyDataForLabels=function(){var n=t.camera.getCompositeProjectionMatrix(t.lastAspectRatio,-1,1);Object(S.i)(n,n),Object(S.g)(Ku,n);var Q=t.lastSize;wu[0]=0,wu[1]=0,wu[2]=-.99,Object(y.q)(Mu,wu,Ku),wu[0]+=.1,Object(y.q)(Yu,wu,Ku),Object(y.a)(zu,Yu,Mu),wu[0]-=.1,wu[1]+=.1,Object(y.q)(Yu,wu,Ku),Object(y.a)(Pu,Yu,Mu);for(var B=0;B<3;B++)zu[B]/=.05*Q[0],Pu[B]/=.05*Q[1];var a=t.tickStrings.length+t.barSegments.length,r=4*a,U=2*a,F=new Float64Array(3*r),l=new Uint16Array(4*U),o=new Float32Array(2*r),g={ptIdx:0,cellIdx:0,polys:l,points:F,tcoords:o},i=t.vertical?0:1,c=t.vertical?1:0,d=[0,1];t.vertical?(t.topTitle?(wu[0]=t.boxPosition[0]+.5*t.boxSize[0],wu[1]=t.barPosition[1]+t.barSize[1],Object(y.q)(Mu,wu,Ku),e.createPolyDataForOneLabel(t.axisLabel,Mu,zu,Pu,[0,1],t.axisTitlePixelOffset,g)):(wu[0]=t.barPosition[0]+t.barSize[0],wu[1]=t.barPosition[1]+.5*t.barSize[1],Object(y.q)(Mu,wu,Ku),Object(y.b)(zu,zu,-1),e.createPolyDataForOneLabel(t.axisLabel,Mu,Pu,zu,[0,-1],t.axisTitlePixelOffset,g),Object(y.b)(zu,zu,-1)),d=[-1,0]):(wu[0]=t.barPosition[0]+.5*t.barSize[0],wu[1]=t.barPosition[1]+t.barSize[1],Object(y.q)(Mu,wu,Ku),e.createPolyDataForOneLabel(t.axisLabel,Mu,zu,Pu,d,t.axisTitlePixelOffset,g)),Ou[2]=-.99,Ou[i]=t.barPosition[i]+(.5*d[i]+.5)*t.barSize[i],Ou[c]=t.barPosition[c]+.5*t.barSize[c];for(var I=null,u=0;u<t.barSegments.length;u++){var C=t.barSegments[u];"ticks"===C.title?I=C:(Ou[c]=t.barPosition[c]+.5*t.barSize[c]*(C.corners[2][c]+C.corners[0][c]),Object(y.q)(Mu,Ou,Ku),e.createPolyDataForOneLabel(C.title,Mu,zu,Pu,d,t.tickLabelPixelOffset,g))}for(var m=t.barPosition[c]+t.barSize[c]*I.corners[0][c],b=t.barSize[c]*(I.corners[2][c]-I.corners[0][c]),Z=0;Z<t.ticks.length;Z++){var x=(t.ticks[Z]-t.lastTickBounds[0])/(t.lastTickBounds[1]-t.lastTickBounds[0]);Ou[c]=m+b*x,Object(y.q)(Mu,Ou,Ku),e.createPolyDataForOneLabel(t.tickStrings[Z],Mu,zu,Pu,d,t.tickLabelPixelOffset,g)}var G=s.a.newInstance({numberOfComponents:2,values:o,name:"TextureCoordinates"});t.tmPolyData.getPointData().setTCoords(G),t.tmPolyData.getPoints().setData(F,3),t.tmPolyData.getPoints().modified(),t.tmPolyData.getPolys().setData(l,1),t.tmPolyData.getPolys().modified(),t.tmPolyData.modified()},e.updatePolyDataForBarSegments=function(){var e=t.camera.getCompositeProjectionMatrix(t.lastAspectRatio,-1,1);Object(S.i)(e,e),Object(S.g)(Ku,e);var n=4+("function"==typeof t.scalarsToColors.getNanColor&&"function"==typeof t.scalarsToColors.getAboveRangeColor&&"function"==typeof t.scalarsToColors.getBelowRangeColor?12:0),Q=n,B=1;t.scalarsToColors.getVectorMode()===Tu.COMPONENT&&(B=t.scalarsToColors.getVectorComponent()+1);for(var a=new Float64Array(3*n),r=new Uint16Array(5*Q),U=new Float32Array(n*B),F=0,l=0,o=0;o<t.barSegments.length;o++){var g=t.barSegments[o];Ou[1]=t.barPosition[1]+.5*t.barSize[1],Ou[2]=-.99;for(var i=0;i<4;i++){Ou[0]=t.barPosition[0]+g.corners[i][0]*t.barSize[0],Ou[1]=t.barPosition[1]+g.corners[i][1]*t.barSize[1],Object(y.q)(Mu,Ou,Ku),a[3*F]=Mu[0],a[3*F+1]=Mu[1],a[3*F+2]=Mu[2];for(var c=0;c<B;c++)U[F*B+c]=t.lastTickBounds[0]+g.scalars[i]*(t.lastTickBounds[1]-t.lastTickBounds[0]);F++}r[5*l]=4,r[5*l+1]=F-4,r[5*l+2]=F-3,r[5*l+3]=F-2,r[5*l+4]=F-1,l++}var d=s.a.newInstance({numberOfComponents:B,values:U,name:"Scalars"});t.polyData.getPointData().setScalars(d),t.polyData.getPoints().setData(a,3),t.polyData.getPoints().modified(),t.polyData.getPolys().setData(r,1),t.polyData.getPolys().modified(),t.polyData.modified()},e.getActors=function(){return[t.barActor,t.tmActor]},e.getNestedProps=function(){return e.getActors()},e.setTickTextStyle=function(n){t.tickTextStyle=ku(ku({},t.tickTextStyle),n),e.modified()},e.setAxisTextStyle=function(n){t.axisTextStyle=ku(ku({},t.axisTextStyle),n),e.modified()},e.setVisibility=function(n){t.visibility!==n&&(t.visibility=n,t.barActor.setVisibility(n),t.tmActor.setVisibility(n),e.modified())}}function qu(e){return ku({automated:!0,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"}},e)}function $u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,qu(n)),Ng.extend(e,t,n),e.getProperty().setDiffuse(0),e.getProperty().setAmbient(1),t.lastSize=[800,800],t.lastAspectRatio=1,t.textValues=[],t.lastTickBounds=[],t.barMapper=ir.newInstance(),t.barMapper.setInterpolateScalarsBeforeMapping(!0),t.polyData=U.a.newInstance(),t.barMapper.setInputData(t.polyData),t.barActor=Ng.newInstance(),t.barActor.setMapper(t.barMapper),t.barActor.setProperty(e.getProperty()),t.lastRedrawTime={},a.c.obj(t.lastRedrawTime,{mtime:0}),t.lastRebuildTime={},a.c.obj(t.lastRebuildTime,{mtime:0}),t.textPolyData=U.a.newInstance(),t.tmPolyData=U.a.newInstance(),t.tmMapper=ir.newInstance(),t.tmMapper.setInputData(t.tmPolyData),t.tmTexture=Xg.newInstance(),t.tmTexture.setInterpolate(!1),t.tmActor=Ng.newInstance(),t.tmActor.setMapper(t.tmMapper),t.tmActor.addTexture(t.tmTexture),t.tmActor.setProperty(e.getProperty()),t.tmCanvas=document.createElement("canvas"),t.tmContext=t.tmCanvas.getContext("2d"),t.mapper=fg.newInstance(),t.pixelMapperPolyData=U.a.newInstance(),t.mapper.setInputData(t.pixelMapperPolyData),t.mapper.setCallback((function(n,Q,B,a,s){t.camera=Q,t.lastSize[0]===s[0]&&t.lastSize[1]===s[1]||(t.lastSize[0]=s[0],t.lastSize[1]=s[1],t.lastAspectRatio=s[0]/s[1],t.forceUpdate=!0),e.update()})),a.c.setGet(e,t,["automated","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset"]),a.c.get(e,t,["axisTextStyle","tickTextStyle"]),a.c.getArray(e,t,["boxPosition","boxSize"]),a.c.setArray(e,t,["boxPosition","boxSize"],2),_u(e,t)}var eC={newInstance:a.c.newInstance($u,"vtkScalarBarActor"),extend:$u};var tC=function(e){qB(n,Qa.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,Q=na(e);if(t){var B=na(this).constructor;n=Reflect.construct(Q,arguments,B)}else n=Q.apply(this,arguments);return ta(this,n)}}(n);function n(e){var Q;return Object(Ze.a)(this,n),(Q=t.call(this,e)).actor=Ng.newInstance({representationId:e.id}),Q.lookupTable=Kd.newInstance(),Q.mapper=ir.newInstance({lookupTable:Q.lookupTable,useLookupTableScalarRange:!0}),Q.actor.setMapper(Q.mapper),Q.cubeAxes=Gc.newInstance({visibility:!1,dataBounds:[-1,1,-1,1,-1,1]}),Q.cubeAxes.getActors().forEach((function(e){return(0,e.setVisibility)(!1)})),Q.scalarBar=eC.newInstance(),Q.scalarBar.setScalarsToColors(Q.lookupTable),Q.scalarBar.setVisibility(!1),Q.subscriptions=[],Q.subscriptions.push(Q.mapper.onModified((function e(){if(Q.mapper.getInputData()){1===Q.subscriptions.length&&Q.subscriptions.push(Q.mapper.getInputData().onModified(e));var t=Q.mapper.getInputData().getBounds();t[0]<t[1]&&(Q.cubeAxes.setDataBounds(t),Q.view&&Q.view.renderView())}}))),Q}return Object(xe.a)(n,[{key:"render",value:function(){var e=this;return Ba.a.createElement(Sd.Consumer,null,(function(t){return e.view||(e.cubeAxes.setCamera(t.renderer.getActiveCamera()),t.renderer.addActor(e.scalarBar),t.renderer.addActor(e.cubeAxes),t.renderer.addActor(e.actor),e.view=t),Ba.a.createElement(yd.Provider,{value:e},Ba.a.createElement(Gd.Provider,{value:e.mapper},Ba.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.view&&this.view.renderer&&(this.view.renderer.removeActor(this.scalarBar),this.view.renderer.removeActor(this.cubeAxes),this.view.renderer.removeActor(this.actor)),this.scalarBar.delete(),this.scalarBar=null,this.cubeAxes.delete(),this.cubeAxes=null,this.actor.delete(),this.actor=null,this.mapper.delete(),this.mapper=null,this.lookupTable.delete(),this.lookupTable=null}},{key:"update",value:function(e,t){var n,Q=0,a=e.cubeAxesStyle,s=e.showCubeAxes,r=e.actor,U=e.mapper,F=e.property,l=e.colorMapPreset,o=e.colorDataRange;if(!r||t&&r===t.actor||this.actor.set(r),!U||t&&U===t.mapper||this.mapper.set(U),!F||t&&F===t.property||this.actor.getProperty().set(F),l&&(!t||l!==t.colorMapPreset)){var g,i=II.getPresetByName(l);this.lookupTable.applyColorMap(i),(g=this.lookupTable).setMappingRange.apply(g,Object(B.a)(o)),this.lookupTable.updateRange()}!o||t&&o===t.colorDataRange||((n=this.lookupTable).setMappingRange.apply(n,Object(B.a)(o)),this.lookupTable.updateRange()),!a||t&&a===t.cubeAxesStyle||(this.cubeAxes.set(a),Q++),s!==this.cubeAxes.getVisibility()&&(this.cubeAxes.setVisibility(s),this.cubeAxes.getActors().forEach((function(e){return(0,e.setVisibility)(s)})),Q++),this.scalarBar.setVisibility(e.showScalarBar)&&Q++,this.scalarBar.setAxisLabel(e.scalarBarTitle)&&Q++,this.scalarBar.set(e.scalarBarStyle||{})&&Q++,this.view&&Q&&this.view.renderView()}},{key:"dataChanged",value:function(){this.view&&this.view.renderView()}}]),n}();tC.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1],showCubeAxes:!1,showScalarBar:!1,scalarBarTitle:""},tC.propTypes={id:sa.a.string,actor:sa.a.object,mapper:sa.a.object,property:sa.a.object,colorMapPreset:sa.a.string,colorDataRange:sa.a.arrayOf(sa.a.number),showCubeAxes:sa.a.bool,cubeAxesStyle:sa.a.object,showScalarBar:sa.a.bool,scalarBarTitle:sa.a.string,scalarBarStyle:sa.a.object,children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var nC=tC,QC={OrientationModes:{DIRECTION:0,ROTATION:1,MATRIX:2},ScaleModes:{SCALE_BY_CONSTANT:0,SCALE_BY_MAGNITUDE:1,SCALE_BY_COMPONENTS:2}};function BC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var aC=QC.OrientationModes,sC=QC.ScaleModes,rC=a.c.vtkErrorMacro;function UC(e,t){t.classHierarchy.push("vtkGlyph3DMapper"),e.getOrientationModeAsString=function(){return a.c.enumToString(aC,t.orientationMode)},e.setOrientationModeToDirection=function(){return e.setOrientationMode(aC.DIRECTION)},e.setOrientationModeToRotation=function(){return e.setOrientationMode(aC.ROTATION)},e.setOrientationModeToMatrix=function(){return e.setOrientationMode(aC.MATRIX)},e.getOrientationArrayData=function(){var n=e.getInputData(0);return n&&n.getPointData()?t.orientationArray?n.getPointData().getArray(t.orientationArray):n.getPointData().getVectors():null},e.getScaleModeAsString=function(){return a.c.enumToString(sC,t.scaleMode)},e.setScaleModeToScaleByMagnitude=function(){return e.setScaleMode(sC.SCALE_BY_MAGNITUDE)},e.setScaleModeToScaleByComponents=function(){return e.setScaleMode(sC.SCALE_BY_COMPONENTS)},e.setScaleModeToScaleByConstant=function(){return e.setScaleMode(sC.SCALE_BY_CONSTANT)},e.getScaleArrayData=function(){var n=e.getInputData(0);return n&&n.getPointData()?t.scaleArray?n.getPointData().getArray(t.scaleArray):n.getPointData().getScalars():null},e.getBounds=function(){var n=e.getInputData(0),Q=e.getInputData(1);return n&&Q?(e.buildArrays(),t.bounds):Object(u.j)()},e.buildArrays=function(){var n=e.getInputData(0),Q=e.getInputData(1);if(t.buildTime.getMTime()<Q.getMTime()||t.buildTime.getMTime()<n.getMTime()||t.buildTime.getMTime()<e.getMTime()){var a=n.getPoints().getData(),s=e.getScaleArrayData(),r=null,U=0;s&&(r=s.getData(),U=s.getNumberOfComponents()),t.scaling&&s&&t.scaleMode===sC.SCALE_BY_COMPONENTS&&3!==s.getNumberOfComponents()&&(rC("Cannot scale by components since scale array does not have 3 components."),s=null);var F=Q.getBounds(),l=[];st.getCorners(F,l),t.bounds[0]=st.INIT_BOUNDS[0],t.bounds[1]=st.INIT_BOUNDS[1],t.bounds[2]=st.INIT_BOUNDS[2],t.bounds[3]=st.INIT_BOUNDS[3],t.bounds[4]=st.INIT_BOUNDS[4],t.bounds[5]=st.INIT_BOUNDS[5];var o=new Float64Array(3),g=e.getOrientationArrayData(),i=Object(S.h)(new Float64Array(16)),c=[],d=[],I=a.length/3;t.matrixArray=new Float32Array(16*I);var C=t.matrixArray.buffer;t.normalArray=new Float32Array(9*I);for(var m=t.normalArray.buffer,b=[],Z=0;Z<I;++Z){var x=new Float32Array(C,64*Z,16);if(c[0]=a[3*Z],c[1]=a[3*Z+1],c[2]=a[3*Z+2],Object(S.s)(x,i,c),g){var G=[];switch(g.getTuple(Z,G),t.orientationMode){case aC.MATRIX:var V=[].concat(Object(B.a)(G.slice(0,3)),[0],Object(B.a)(G.slice(3,6)),[0],Object(B.a)(G.slice(6,9)),[0,0,0,0,1]);Object(S.l)(x,x,V);break;case aC.ROTATION:Object(S.c)(x,x,G[2]),Object(S.a)(x,x,G[0]),Object(S.b)(x,x,G[1]);break;case aC.DIRECTION:if(0===G[1]&&0===G[2])G[0]<0&&Object(S.b)(x,x,3.1415926);else{var R=Object(u.A)(G),L=[];L[0]=(G[0]+R)/2,L[1]=G[1]/2,L[2]=G[2]/2,Object(S.q)(x,x,3.1415926,L)}}}if(t.scaling){if(d[0]=t.scaleFactor,d[1]=t.scaleFactor,d[2]=t.scaleFactor,s)switch(t.scaleMode){case sC.SCALE_BY_MAGNITUDE:for(var p=0;p<U;++p)b[p]=r[Z*U+p];d[0]*=Object(u.A)(b,U),d[1]=d[0],d[2]=d[0];break;case sC.SCALE_BY_COMPONENTS:for(var h=0;h<U;++h)b[h]=r[Z*U+h];d[0]*=b[0],d[1]*=b[1],d[2]*=b[2];break;case sC.SCALE_BY_CONSTANT:}0===d[0]&&(d[0]=1e-10),0===d[1]&&(d[1]=1e-10),0===d[2]&&(d[2]=1e-10),Object(S.r)(x,x,d)}for(var N=0;N<8;++N)Object(y.q)(o,l[N],x),o[0]<t.bounds[0]&&(t.bounds[0]=o[0]),o[1]<t.bounds[2]&&(t.bounds[2]=o[1]),o[2]<t.bounds[4]&&(t.bounds[4]=o[2]),o[0]>t.bounds[1]&&(t.bounds[1]=o[0]),o[1]>t.bounds[3]&&(t.bounds[3]=o[1]),o[2]>t.bounds[5]&&(t.bounds[5]=o[2]);var D=new Float32Array(m,36*Z,9);dt(D,x),Ct(D,D),ut(D,D)}var A=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),t.colorArray=null;var E=e.getLookupTable();E&&A&&(E.build(),t.colorArray=E.mapScalars(A,t.colorMode,0)),t.buildTime.modified()}},e.getPrimitiveCount=function(){var t=e.getInputData(1),n=e.getInputData().getPoints().getNumberOfValues()/3;return{points:n*t.getPoints().getNumberOfValues()/3,verts:n*(t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells()),lines:n*(t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells()),triangles:n*(t.getPolys().getNumberOfValues()-3*t.getLines().getNumberOfCells())}}}var FC={orient:!0,orientationMode:aC.DIRECTION,orientationArray:null,scaling:!0,scaleFactor:1,scaleMode:sC.SCALE_BY_MAGNITUDE,scaleArray:null,matrixArray:null,normalArray:null,colorArray:null};function lC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,FC,n),ir.extend(e,t,n),a.c.algo(e,t,2,0),t.buildTime={},a.c.obj(t.buildTime,{mtime:0}),t.boundsTime={},a.c.obj(t.boundsTime,{mtime:0}),a.c.setGet(e,t,["orient","orientationMode","orientationArray","scaleArray","scaleFactor","scaleMode","scaling"]),a.c.get(e,t,["colorArray","matrixArray","normalArray","buildTime"]),UC(e,t)}var oC=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BC(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(lC,"vtkGlyph3DMapper"),extend:lC},QC);var gC=function(e){qB(n,Qa.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,Q=na(e);if(t){var B=na(this).constructor;n=Reflect.construct(Q,arguments,B)}else n=Q.apply(this,arguments);return ta(this,n)}}(n);function n(e){var Q;return Object(Ze.a)(this,n),(Q=t.call(this,e)).actor=Ng.newInstance(),Q.lookupTable=Kd.newInstance(),Q.mapper=oC.newInstance({lookupTable:Q.lookupTable,useLookupTableScalarRange:!0}),Q.actor.setMapper(Q.mapper),Q}return Object(xe.a)(n,[{key:"render",value:function(){var e=this;return Ba.a.createElement(Sd.Consumer,null,(function(t){return e.view||(t.renderer.addActor(e.actor),e.view=t),Ba.a.createElement(yd.Provider,{value:e},Ba.a.createElement(Gd.Provider,{value:e.mapper},Ba.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.view&&this.view.renderer.removeActor(this.actor),this.actor.delete(),this.actor=null,this.mapper.delete(),this.mapper=null,this.lookupTable.delete(),this.lookupTable=null}},{key:"update",value:function(e,t){var n,Q=e.actor,a=e.mapper,s=e.property,r=e.colorMapPreset,U=e.colorDataRange;if(!Q||t&&Q===t.actor||this.actor.set(Q),!a||t&&a===t.mapper||this.mapper.set(a),!s||t&&s===t.property||this.actor.getProperty().set(s),r&&(!t||r!==t.colorMapPreset)){var F,l=II.getPresetByName(r);this.lookupTable.applyColorMap(l),(F=this.lookupTable).setMappingRange.apply(F,Object(B.a)(U)),this.lookupTable.updateRange()}!U||t&&U===t.colorDataRange||((n=this.lookupTable).setMappingRange.apply(n,Object(B.a)(U)),this.lookupTable.updateRange())}},{key:"dataChanged",value:function(){this.view&&this.view.renderView()}}]),n}();gC.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1]},gC.propTypes={id:sa.a.string,actor:sa.a.object,mapper:sa.a.object,property:sa.a.object,colorMapPreset:sa.a.string,colorDataRange:sa.a.arrayOf(sa.a.number),children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var iC=gC;var cC=function(e){qB(n,Qa.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,Q=na(e);if(t){var B=na(this).constructor;n=Reflect.construct(Q,arguments,B)}else n=Q.apply(this,arguments);return ta(this,n)}}(n);function n(e){var Q;return Object(Ze.a)(this,n),(Q=t.call(this,e)).imageData=Lt.newInstance(),Q}return Object(xe.a)(n,[{key:"render",value:function(){var e=this;return Ba.a.createElement(yd.Consumer,null,(function(t){return Ba.a.createElement(Gd.Consumer,null,(function(n){return e.representation=t,e.downstream||(e.downstream=n),Ba.a.createElement(Zd.Provider,{value:e},Ba.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}},{key:"componentDidMount",value:function(){this.update(this.props),this.downstream.setInputData(this.imageData,this.props.port)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.imageData.delete(),this.imageData=null}},{key:"update",value:function(e,t){var n=e.dimensions,Q=e.spacing,B=e.origin,a=e.direction;this.imageData.set({dimensions:n,spacing:Q,origin:B,direction:a})}},{key:"getDataSet",value:function(){return this.imageData}},{key:"modified",value:function(){this.imageData.modified(),this.representation&&this.representation.dataChanged()}}]),n}();cC.defaultProps={port:0,dimensions:[1,1,1],spacing:[1,1,1],origin:[0,0,0],direction:[1,0,0,0,1,0,0,0,1]},cC.propTypes={id:sa.a.string,port:sa.a.number,dimensions:sa.a.arrayOf(sa.a.number),spacing:sa.a.arrayOf(sa.a.number),origin:sa.a.arrayOf(sa.a.number),direction:sa.a.arrayOf(sa.a.number),children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var dC=cC;var IC=function(e){qB(n,Qa.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,Q=na(e);if(t){var B=na(this).constructor;n=Reflect.construct(Q,arguments,B)}else n=Q.apply(this,arguments);return ta(this,n)}}(n);function n(e){var Q;return Object(Ze.a)(this,n),(Q=t.call(this,e)).array=s.a.newInstance({name:"scalars",empty:!0}),Q.arrayAttached=!1,Q}return Object(xe.a)(n,[{key:"render",value:function(){var e=this;return Ba.a.createElement(Zd.Consumer,null,(function(t){return e.dataset=t,Ba.a.createElement(xd.Consumer,null,(function(t){return e.fields||(e.fields=t),Ba.a.createElement("div",{key:e.props.id,name:e.props.name})}))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.fields.removeArray(this.array),this.array.delete(),this.array=null}},{key:"update",value:function(e,t){var n=e.name,Q=e.type,B=e.values,s=e.numberOfComponents,r=a.a[Q],U=!1;this.array.setName(n),!Q||t&&Q===t.type||(U=!0),!s||t&&s===t.numberOfComponents||(U=!0),!B||!U&&t&&B===t.values||(this.array.setData(r.from(B),s),U=!0),this.arrayAttached||(this.fields[this.props.registration](this.array),this.arrayAttached=!0,U=!0),U&&this.dataset&&this.dataset.modified()}}]),n}();IC.defaultProps={name:"scalars",type:"Float32Array",values:[],numberOfComponents:1,registration:"addArray"},IC.propTypes={id:sa.a.string,type:sa.a.string,name:sa.a.string,values:sa.a.arrayOf(sa.a.number),numberOfComponents:sa.a.number,registration:sa.a.string};var uC=IC;function CC(e){return Ba.a.createElement(Zd.Consumer,null,(function(t){return Ba.a.createElement(xd.Provider,{value:t.getDataSet().getFieldData()},e.children)}))}CC.defaultProps={},CC.propTypes={children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var mC=CC;function bC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}function SC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bC(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yC=function(e){qB(n,Qa.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,Q=na(e);if(t){var B=na(this).constructor;n=Reflect.construct(Q,arguments,B)}else n=Q.apply(this,arguments);return ta(this,n)}}(n);function n(e){var Q;return Object(Ze.a)(this,n),(Q=t.call(this,e)).algo=null,Q}return Object(xe.a)(n,[{key:"render",value:function(){var e=this;return Ba.a.createElement(yd.Consumer,null,(function(t){return Ba.a.createElement(Gd.Consumer,null,(function(n){if(e.representation=t,!e.algo){var Q=e.props,B=Q.vtkClass,a=Q.state;e.algo=Object(h.a)(SC({vtkClass:B},a))}return e.downstream||(n.setInputConnection(e.algo.getOutputPort(),e.props.port),e.downstream=n),Ba.a.createElement(Gd.Provider,{value:e.algo},Ba.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.algo.delete(),this.algo=null}},{key:"update",value:function(e,t){var n=e.vtkClass,Q=e.state;!n||t&&n===t.vtkClass||(this.algo=Object(h.a)(SC({vtkClass:n},Q)),this.downstream.setInputConnection(this.algo.getOutputPort(),this.props.port)),!Q||t&&Q===t.state||(this.algo.set(Q),this.representation&&this.representation.dataChanged())}}]),n}();yC.defaultProps={port:0,vtkClass:"vtkConeSource",state:{}},yC.propTypes={id:sa.a.string,port:sa.a.number,vtkClass:sa.a.string,state:sa.a.object,children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var ZC=yC;function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(e);t&&(Q=Q.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,Q)}return n}var GC=a.c.vtkWarningMacro;function VC(e,t){t.classHierarchy.push("vtkCalculator"),e.setFormula=function(n){return n!==t.formula&&(t.formula=n,e.modified(),!0)},e.getFormula=function(){return t.formula},e.augmentInputArrays=function(e,t){var n=t.slice(0);return e!==Cd.b.POINT&&e!==Cd.b.VERTEX||n.push({location:Cd.b.COORDINATE}),n},e.createSimpleFormulaObject=function(t,n,Q,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{getArrays:function(){return{input:e.augmentInputArrays(t,n.map((function(e){return{location:t,name:e}}))),output:[{location:t,name:Q,attribute:"outputAttributeType"in s?s.outputAttributeType:W.a.SCALARS,numberOfComponents:"numberOfOutputComponents"in s?s.numberOfOutputComponents:1}]}},evaluate:function(e,t){var n=new Array(e.length),Q=e.map((function(e,t){var Q=e.getNumberOfComponents(),B=e.getData();return 1===Q?function(e){return B[e]}:function(Q){return e.getTuple(Q,n[t])}})),s=t[0],r=s.getData(),U=s.getNumberOfComponents(),F=new Array(U);if(1===U)r.forEach((function(e,t){r[t]=a.apply(void 0,Object(B.a)(Q.map((function(e){return e(t)}))).concat([t,F]))}));else for(var l=s.getNumberOfTuples(),o=function(e){F=a.apply(void 0,Object(B.a)(Q.map((function(t){return t(e)}))).concat([e,F])),s.setTuple(e,F)},g=0;g<l;++g)o(g)}}},e.setFormulaSimple=function(t,n,Q,B){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e.setFormula(e.createSimpleFormulaObject(t,n,Q,B,a))},e.prepareArrays=function(e,t,n){var Q=[],B=[];return e.input.forEach((function(e){if(e.location===Cd.b.COORDINATE)Q.push(t.getPoints());else{var n=[[Cd.b.UNIFORM,function(e){return e.getFieldData()}],[Cd.b.POINT,function(e){return e.getPointData()}],[Cd.b.CELL,function(e){return e.getCellData()}],[Cd.b.VERTEX,function(e){return e.getVertexData()}],[Cd.b.EDGE,function(e){return e.getEdgeData()}],[Cd.b.ROW,function(e){return e.getRowData()}]].reduce((function(e,t){return e[t[0]]=t[1],e}),{}),B="location"in e&&e.location in n?n[e.location](t):null;B?e.name?Q.push(B.getArrayByName(e.name)):"index"in e?Q.push(B.getArrayByIndex(e.index)):"attribute"in e&&e.location!==Cd.b.UNIFORM?Q.push(B.getActiveAttribute(e.attribute)):(GC('No matching array for specifier "'.concat(JSON.stringify(e),'".')),Q.push(null)):(GC('Specifier "'.concat(JSON.stringify(e),'" did not provide a usable location.')),Q.push(null))}})),e.output.forEach((function(e){var Q=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xC(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),a="numberOfComponents"in Q?Q.numberOfComponents:1;if(e.location===Cd.b.UNIFORM&&"tuples"in Q&&(Q.size=a*Q.tuples),e.location===Cd.b.COORDINATE){var r=t.getPoints(),U=N.a.newInstance({dataType:r.getDataType()});U.setNumberOfPoints(r.getNumberOfPoints(),r.getNumberOfComponents()),n.setPoints(U),B.push(U)}else{var F=[[Cd.b.UNIFORM,function(e){return e.getFieldData()},function(e,t){return"tuples"in t?t.tuples:0}],[Cd.b.POINT,function(e){return e.getPointData()},function(e){return e.getPoints().getNumberOfPoints()}],[Cd.b.CELL,function(e){return e.getCellData()},function(e){return e.getNumberOfCells()}],[Cd.b.VERTEX,function(e){return e.getVertexData()},function(e){return e.getNumberOfVertices()}],[Cd.b.EDGE,function(e){return e.getEdgeData()},function(e){return e.getNumberOfEdges()}],[Cd.b.ROW,function(e){return e.getRowData()},function(e){return e.getNumberOfRows()}]].reduce((function(e,t){return e[t[0]]={getData:t[1],getSize:t[2]},e}),{}),l=null,o=0;if("location"in e&&e.location in F&&(l=F[e.location].getData(n),o=F[e.location].getSize(t,Q)),o<=0)GC("Output array size could not be determined for ".concat(JSON.stringify(e),".")),B.push(null);else if(l){Q.size=a*o;var g=s.a.newInstance(Q),i=l.addArray(g);"attribute"in Q&&e.location!==Cd.b.UNIFORM&&l.setActiveAttributeByIndex(i,Q.attribute),B.push(g)}else GC('Specifier "'.concat(JSON.stringify(e),'" did not provide a usable location.')),B.push(null)}})),{arraysIn:Q,arraysOut:B}},e.requestData=function(n,Q){if(!t.formula)return 0;var B=t.formula.getArrays(n),a=Object(h.a)({vtkClass:n[0].getClassName()});a.shallowCopy(n[0]),Q[0]=a;var s=e.prepareArrays(B,n[0],Q[0]);return t.formula.evaluate(s.arraysIn,s.arraysOut),1}}var RC={formula:{getArrays:function(){return{input:[],output:[]}},evaluate:function(){return null}}};function LC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,RC,n),a.c.obj(e,t),a.c.algo(e,t,1,1),VC(e,t)}var pC={newInstance:a.c.newInstance(LC,"vtkCalculator"),extend:LC};var hC=rt.a.FieldDataTypes,NC=function(e){qB(n,Qa.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,Q=na(e);if(t){var B=na(this).constructor;n=Reflect.construct(Q,arguments,B)}else n=Q.apply(this,arguments);return ta(this,n)}}(n);function n(e){var Q;return Object(Ze.a)(this,n),(Q=t.call(this,e)).calculator=pC.newInstance(),Q}return Object(xe.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.name,Q=t.arrays,B=t.location,a=t.formula;return this.calculator.setFormulaSimple(hC[B],Q,n,a),Ba.a.createElement(Gd.Consumer,null,(function(t){return e.downstream||(t.setInputConnection(e.calculator.getOutputPort(),e.props.port),e.downstream=t),Ba.a.createElement(Gd.Provider,{value:e.calculator},Ba.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}},{key:"componentWillUnmount",value:function(){this.calculator.delete(),this.calculator=null}}]),n}();NC.defaultProps={port:0,name:"scalars",location:"POINT",arrays:[],formula:function(e){return e[0]}},NC.propTypes={id:sa.a.string,port:sa.a.number,name:sa.a.string,location:sa.a.string,arrays:sa.a.arrayOf(sa.a.string),formula:sa.a.func,children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var DC=NC;function AC(e){return Ba.a.createElement(Zd.Consumer,null,(function(t){return Ba.a.createElement(xd.Provider,{value:t.getDataSet().getCellData()},e.children)}))}AC.defaultProps={},AC.propTypes={children:sa.a.oneOfType([sa.a.arrayOf(sa.a.node),sa.a.node])};var EC={VolumeRepresentation:CI,SliceRepresentation:kI,VolumeController:Lu,PointData:hu,PolyData:Du,Reader:Eu,ShareDataSet:Xu,View:pd,GeometryRepresentation:nC,GlyphRepresentation:iC,ImageData:dC,DataArray:uC,FieldData:mC,Algorithm:ZC,Calculator:DC,CellData:AC};function fC(e){var t=0,n=null,Q=null;return e.rgb&&(n=e.rgb,t=3,Q="Uint8Array"),e.rgba&&(n=e.rgb,t=4,Q="Uint8Array"),e.scalars&&(n=e.scalars,t=1,Q="Float32Array"),console.log("nbComponents",t),Ba.a.createElement(nC,{id:e.id,colorMapPreset:e.colorMapPreset,colorDataRange:e.colorDataRange,property:e.property,showCubeAxes:e.showCubeAxes,cubeAxesStyle:e.cubeAxesStyle,showScalarBar:e.showScalarBar,scalarBarTitle:e.scalarBarTitle,scalarBarStyle:e.scalarBarStyle},Ba.a.createElement(Du,{points:e.xyz,connectivity:"points"},t&&Ba.a.createElement(hu,null,Ba.a.createElement(uC,{registration:"setScalars",numberOfComponents:t,values:n,type:Q}))))}fC.defaultProps={xyz:[0,0,0],colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1],showCubeAxes:!1,showScalarBar:!1,scalarBarTitle:""},fC.propTypes={id:sa.a.string,xyz:sa.a.arrayOf(sa.a.number),rgb:sa.a.arrayOf(sa.a.number),rgba:sa.a.arrayOf(sa.a.number),scalars:sa.a.arrayOf(sa.a.number),colorMapPreset:sa.a.string,colorDataRange:sa.a.arrayOf(sa.a.number),property:sa.a.object,showCubeAxes:sa.a.bool,cubeAxesStyle:sa.a.object,showScalarBar:sa.a.bool,scalarBarTitle:sa.a.string,scalarBarStyle:sa.a.object};var JC=fC;function vC(e){var t=0,n=null,Q=null;return e.rgb&&(n=e.rgb,t=3,Q="Uint8Array"),e.rgba&&(n=e.rgb,t=4,Q="Uint8Array"),e.scalars&&(n=e.scalars,t=1,Q=e.scalarsType),Ba.a.createElement(CI,{id:e.id,colorMapPreset:e.colorMapPreset,colorDataRange:e.colorDataRange,property:e.property,mapper:e.mapper,volume:e.volume},e.volumeController&&Ba.a.createElement(Lu,{rescaleColorMap:e.rescaleColorMap,size:e.controllerSize}),Ba.a.createElement(dC,{dimensions:e.dimensions,origin:e.origin,spacing:e.spacing},Ba.a.createElement(hu,null,Ba.a.createElement(uC,{registration:"setScalars",numberOfComponents:t,values:n,type:Q}))))}vC.defaultProps={scalarsType:"Float32Array",colorMapPreset:"erdc_rainbow_bright",colorDataRange:"auto",volumeController:!0,rescaleColorMap:!0,controllerSize:[400,150]},vC.propTypes={id:sa.a.string,dimensions:sa.a.arrayOf(sa.a.number),spacing:sa.a.arrayOf(sa.a.number),origin:sa.a.arrayOf(sa.a.number),rgb:sa.a.arrayOf(sa.a.number),rgba:sa.a.arrayOf(sa.a.number),scalars:sa.a.arrayOf(sa.a.number),scalarsType:sa.a.string,mapper:sa.a.object,volume:sa.a.object,property:sa.a.object,colorMapPreset:sa.a.string,volumeController:sa.a.bool,controllerSize:sa.a.arrayOf(sa.a.number),rescaleColorMap:sa.a.bool,colorDataRange:sa.a.oneOfType([sa.a.arrayOf(sa.a.number),sa.a.string])};var WC={PointCloudRepresentation:JC,VolumeDataRepresentation:vC},XC=EC.VolumeRepresentation,HC=EC.SliceRepresentation,kC=EC.VolumeController,TC=EC.PointData,MC=EC.PolyData,YC=EC.Reader,wC=EC.ShareDataSet,OC=EC.View,zC=EC.GeometryRepresentation,PC=EC.GlyphRepresentation,KC=EC.ImageData,jC=EC.DataArray,_C=EC.FieldData,qC=EC.Algorithm,$C=EC.Calculator,em=EC.CellData,tm=WC.PointCloudRepresentation,nm=WC.VolumeDataRepresentation,Qm={ViewContext:Sd,RepresentationContext:yd,DataSetContext:Zd,FieldsContext:xd,DownstreamContext:Gd},Bm={Core:EC,Representations:WC,Contexts:Qm};t.default=Q}]]);
//# sourceMappingURL=async-ReactVTK.js.map
//# sourceMappingURL=async-ReactVTK.js.map