/*! For license information please see dash_vtk.min.js.LICENSE.txt */
window.dash_vtk=function(e){function t(t){for(var n,a,s=t[0],i=t[1],o=0,l=[];o<s.length;o++)a=s[o],r[a]&&l.push(r[a][0]),r[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(F&&F(t);l.length;)l.shift()()}var n={},r={2:0};function a(e){return s.p+""+({0:"async-Algorithm",1:"async-View"}[e]||e)+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=i);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=a(e);var B=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(Q);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;B.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",B.name="ChunkLoadError",B.type=a,B.request=s,n[1](B)}r[e]=void 0}};var Q=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var i,o=function(){var e=document.currentScript;if(!e){for(var t=document.getElementsByTagName("script"),n=[],r=0;r<t.length;r++)n.push(t[r]);e=(n=n.filter((function(e){return!e.async&&!e.text&&!e.textContent}))).slice(-1)[0]}return e};if(Object.defineProperty(s,"p",{get:(i=o().src.split("/").slice(0,-1).join("/")+"/",function(){return i})}),void 0!==a){var l=a;a=function(e){var t=function(e){return/\/_dash-component-suites\//.test(e.src)}(o()),n=l(e);if(!t)return n;var r=n.split("/"),a=r.slice(-1)[0].split(".");return a.splice(1,0,"v0_0_7m1617845290"),r.splice(-1,1,a.join(".")),r.join("/")}}var B=window.webpackJsonpdash_vtk=window.webpackJsonpdash_vtk||[],Q=B.push.bind(B);B.push=t,B=B.slice();for(var c=0;c<B.length;c++)t(B[c]);var F=Q;return s(s.s=72)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return J})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return A})),n.d(t,"f",(function(){return D})),n.d(t,"g",(function(){return x})),n.d(t,"h",(function(){return L})),n.d(t,"i",(function(){return V})),n.d(t,"j",(function(){return N})),n.d(t,"k",(function(){return d})),n.d(t,"l",(function(){return u})),n.d(t,"m",(function(){return I}));var r=n(15),a=n(35),s=n(9),i=n(7),o=(n(5),n(22));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=0,c=Symbol("void"),F={};function U(){}["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach((function(e){F[e]=U})),e.console=console.hasOwnProperty("log")?console:F;var g={debug:U,error:e.console.error||U,info:e.console.info||U,log:e.console.log||U,warn:e.console.warn||U};function d(){g.debug.apply(g,arguments)}function u(){g.error.apply(g,arguments)}function I(){g.warn.apply(g,arguments)}var m={};var C={Float32Array:Float32Array,Float64Array:Float64Array,Uint8Array:Uint8Array,Int8Array:Int8Array,Uint16Array:Uint16Array,Int16Array:Int16Array,Uint32Array:Uint32Array,Int32Array:Int32Array};function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}function y(e){Object.keys(e).forEach((function(t){Array.isArray(e[t])&&(e[t]=[].concat(e[t]))}))}function S(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}function h(e){return e.isA?e.getState():e}function Z(e){setTimeout(e,0)}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(t);var n=[];function r(e){n[e]=null}function a(e){return Object.freeze({unsubscribe:function(){r(e)}})}return Number.isInteger(t.mtime)||(t.mtime=++Q),t.classHierarchy=["vtkObject"],e.isDeleted=function(){return!!t.deleted},e.modified=function(r){t.deleted?u("instance deleted - cannot call any method"):r&&r<e.getMTime()||(t.mtime=++Q,n.forEach((function(t){return t&&t(e)})))},e.onModified=function(e){if(t.deleted)return u("instance deleted - cannot call any method"),null;var r=n.length;return n.push(e),a(r)},e.getMTime=function(){return t.mtime},e.isA=function(e){for(var n=t.classHierarchy.length;n--;)if(t.classHierarchy[n]===e)return!0;return!1},e.getClassName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.classHierarchy[t.classHierarchy.length-1-e]},e.set=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!1;return Object.keys(n).forEach((function(o){var l=a?null:e["set".concat(b(o))];l&&Array.isArray(n[o])&&l.length>1?s=l.apply(void 0,Object(i.a)(n[o]))||s:l?s=l(n[o])||s:(-1!==["mtime"].indexOf(o)||r||I("Warning: Set value to model directly ".concat(o,", ").concat(n[o])),t[o]=n[o],s=!0)})),s},e.get=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return t;var a={};return n.forEach((function(e){a[e]=t[e]})),a},e.getReferenceByName=function(e){return t[e]},e.delete=function(){Object.keys(t).forEach((function(e){return delete t[e]})),n.forEach((function(e,t){return r(t)})),t.deleted=!0},e.getState=function(){var n=B(B({},t),{},{vtkClass:e.getClassName()});Object.keys(n).forEach((function(e){null===n[e]||void 0===n[e]?delete n[e]:n[e].isA?n[e]=n[e].getState():Array.isArray(n[e])&&(n[e]=n[e].map(h))}));var r={};return Object.keys(n).sort().forEach((function(e){r[e]=n[e]})),r.mtime&&delete r.mtime,r},e.shallowCopy=function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.getClassName()!==e.getClassName())throw new Error("Cannot ShallowCopy ".concat(n.getClassName()," into ").concat(e.getClassName()));var a=n.get(),s=Object.keys(t).sort(),i=Object.keys(a).sort();i.forEach((function(e){var n=s.indexOf(e);-1===n?r&&d("add ".concat(e," in shallowCopy")):s.splice(n,1),t[e]=a[e]})),s.length&&r&&d("Untouched keys: ".concat(s.join(", "))),e.modified()},e}function p(e,t,n){n.forEach((function(n){"object"===Object(a.a)(n)?e["get".concat(b(n.name))]=function(){return t[n.name]}:e["get".concat(b(n))]=function(){return t[n]}}))}var G={enum:function(e,t,n){return function(r){if("string"==typeof r){if(void 0!==n.enum[r])return t[n.name]!==n.enum[r]&&(t[n.name]=n.enum[r],e.modified(),!0);throw u("Set Enum with invalid argument ".concat(n,", ").concat(r)),new RangeError("Set Enum with invalid string argument")}if("number"==typeof r){if(t[n.name]!==r){if(-1!==Object.keys(n.enum).map((function(e){return n.enum[e]})).indexOf(r))return t[n.name]=r,e.modified(),!0;throw u("Set Enum outside numeric range ".concat(n,", ").concat(r)),new RangeError("Set Enum outside numeric range")}return!1}throw u("Set Enum with invalid argument (String/Number) ".concat(n,", ").concat(r)),new TypeError("Set Enum with invalid argument (String/Number)")}}};function R(e){if("object"===Object(a.a)(e)){var t=G[e.type];if(t)return function(n,r){return t(n,r,e)};throw u("No setter for field ".concat(e)),new TypeError("No setter for field")}return function(t,n){return function(r){return n.deleted?(u("instance deleted - cannot call any method"),!1):n[e]!==r&&(n[e]=r,t.modified(),!0)}}}function L(e,t,n){n.forEach((function(n){"object"===Object(a.a)(n)?e["set".concat(b(n.name))]=R(n)(e,t):e["set".concat(b(n))]=R(n)(e,t)}))}function V(e,t,n){p(e,t,n),L(e,t,n)}function A(e,t,n){n.forEach((function(n){e["get".concat(b(n))]=function(){return[].concat(t[n])},e["get".concat(b(n),"ByReference")]=function(){return t[n]}}))}function f(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;n.forEach((function(n){e["set".concat(b(n))]=function(){if(t.deleted)return u("instance deleted - cannot call any method"),!1;for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];var l=i;if(1===l.length&&Array.isArray(l[0])&&(l=l[0]),l.length!==r){if(!(l.length<r&&void 0!==a))throw new RangeError("Invalid number of values for array setter (".concat(n,")"));for(l=[].concat(l);l.length<r;)l.push(a)}var B=!1;return t[n].forEach((function(e,t){if(e!==l[t]){if(B)return;B=!0}})),!(!B&&t[n].length===l.length||(t[n]=[].concat(l),e.modified(),0))},e["set".concat(b(n),"From")]=function(e){var r=t[n];e.forEach((function(e,t){r[t]=e}))}}))}function N(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;A(e,t,n),f(e,t,n,r,a)}var E=Symbol("Event abort");function D(e,t){var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r={};return e(r,n,t),Object.freeze(r)};return t&&o.a.register(t,n),n}function v(e){return e&&e.isA&&e.isA("vtkObject")}function J(e,t,n){var r,a=this;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];var l=a,B=function(){r=null,n||e.apply(l,i)},Q=n&&!r;clearTimeout(r),r=setTimeout(B,t),Q&&e.apply(l,i)}}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.keystore=Object.assign(t.keystore||{},n),e.setKey=function(e,n){t.keystore[e]=n},e.getKey=function(e){return t.keystore[e]},e.getAllKeys=function(){return Object.keys(t.keystore)},e.deleteKey=function(e){return delete t.keystore[e]},e.clearKeystore=function(){return e.getAllKeys().forEach((function(e){return delete t.keystore[e]}))}}var X=1;var H={algo:function(e,t,n,r){function a(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.deleted?u("instance deleted - cannot call any method"):r>=t.numberOfInputs?u("algorithm ".concat(e.getClassName()," only has ").concat(t.numberOfInputs," input ports. To add more input ports, use addInputData()")):(t.inputData[r]!==n||t.inputConnection[r])&&(t.inputData[r]=n,t.inputConnection[r]=null,e.modified&&e.modified())}function s(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.deleted)u("instance deleted - cannot call any method");else{if(r>=t.numberOfInputs){var a="algorithm ".concat(e.getClassName()," only has ");return a+="".concat(t.numberOfInputs),void u(a+=" input ports. To add more input ports, use addInputConnection()")}t.inputData[r]=null,t.inputConnection[r]=n}}function i(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.deleted?(u("instance deleted - cannot call any method"),null):(e.shouldUpdate()&&e.update(),t.output[n])}if(t.inputData?t.inputData=t.inputData.map(o.a):t.inputData=[],t.inputConnection?t.inputConnection=t.inputConnection.map(o.a):t.inputConnection=[],t.output?t.output=t.output.map(o.a):t.output=[],t.inputArrayToProcess?t.inputArrayToProcess=t.inputArrayToProcess.map(o.a):t.inputArrayToProcess=[],t.numberOfInputs=n,e.shouldUpdate=function(){for(var n=e.getMTime(),a=r,s=1/0;a--;){if(!t.output[a])return!0;var i=t.output[a].getMTime();if(i<n)return!0;i<s&&(s=i)}for(a=t.numberOfInputs;a--;)if(t.inputConnection[a]&&t.inputConnection[a].filter.shouldUpdate())return!0;for(a=t.numberOfInputs;a--;)if(e.getInputData(a)&&e.getInputData(a).getMTime()>s)return!0;return!1},t.numberOfInputs){for(var l=t.numberOfInputs;l--;)t.inputData.push(null),t.inputConnection.push(null);e.setInputData=a,e.setInputConnection=s,e.addInputData=function(e){t.deleted?u("instance deleted - cannot call any method"):(t.numberOfInputs++,a(e,t.numberOfInputs-1))},e.addInputConnection=function(e){t.deleted?u("instance deleted - cannot call any method"):(t.numberOfInputs++,s(e,t.numberOfInputs-1))},e.getInputData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]&&(t.inputData[e]=t.inputConnection[e]()),t.inputData[e]},e.getInputConnection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]}}r&&(e.getOutputData=i,e.getOutputPort=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=function(){return i(t)};return n.filter=e,n}),e.update=function(){var n=[];if(t.numberOfInputs)for(var r=0;r<t.numberOfInputs;)n[r]=e.getInputData(r),r++;e.shouldUpdate()&&e.requestData&&e.requestData(n,t.output)},e.getNumberOfInputPorts=function(){return t.numberOfInputs},e.getNumberOfOutputPorts=function(){return r||t.output.length},e.getInputArrayToProcess=function(e){var n=t.inputArrayToProcess[e],r=t.inputData[e];return n&&r?r["get".concat(n.fieldAssociation)]().getArray(n.arrayName):null},e.setInputArrayToProcess=function(e,n,r){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Scalars";t.inputArrayToProcess.length<e;)t.inputArrayToProcess.push(null);t.inputArrayToProcess[e]={arrayName:n,fieldAssociation:r,attributeType:a}}},capitalize:b,chain:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.filter((function(e){return!!e})).map((function(e){return e.apply(void 0,n)}))}},debounce:J,enumToString:function(e,t){return Object.keys(e).find((function(n){return e[n]===t}))},event:function(e,t,n){var a=[],s=e.delete,i=1;function o(e){for(var t=0;t<a.length;++t)if(Object(r.a)(a[t],1)[0]===e)return void a.splice(t,1)}function l(e){return Object.freeze({unsubscribe:function(){o(e)}})}e["invoke".concat(b(n))]=function(){var n=arguments;if(t.deleted)u("instance deleted - cannot call any method");else for(var s=a.slice(),i=function(t){var a=Object(r.a)(s[t],3),i=a[1],o=a[2];if(!i)return"continue";if(o<0)setTimeout((function(){return i.apply(e,n)}),1-o);else if(i.apply(e,n)===E)return"break"},o=0;o<s.length;++o){var l=i(o);if("continue"!==l&&"break"===l)break}},e["on".concat(b(n))]=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e.apply)return console.error("Invalid callback for event ".concat(n)),null;if(t.deleted)return u("instance deleted - cannot call any method"),null;var s=i++;return a.push([s,e,r]),a.sort((function(e,t){return t[2]-e[2]})),l(s)},e.delete=function(){s(),a.forEach((function(e){return o(Object(r.a)(e,1)[0])}))}},EVENT_ABORT:E,formatBytesToProperUnit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=["TB","GB","MB","KB"],a=Number(e),s="B";a>n;)a/=n,s=r.pop();return"".concat(a.toFixed(t)," ").concat(s)},formatNumbersWithThousandSeparator:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=[],r=e;r>1e3;)n.push("000".concat(r%1e3).slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(t)},get:p,getArray:A,getCurrentGlobalMTime:function(){return Q},getStateArrayMapFunc:h,isVtkObject:v,keystore:W,newInstance:D,normalizeWheel:function(e){var t=0,n=0,r=0,a=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,a=10*n,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||a)&&e.deltaMode&&(1===e.deltaMode?(r*=40,a*=40):(r*=800,a*=800)),r&&!t&&(t=r<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:a}},obj:x,proxy:function(e,t){W(e,t);var n=e.delete;t.proxyId="".concat(X++),t.ui=JSON.parse(JSON.stringify(t.ui||[])),p(e,t,["proxyId","proxyGroup","proxyName"]),V(e,t,["proxyManager"]);var r={},a={};function i(e,t){a[t]||(a[t]=[]);for(var n=a[t],s=0;s<e.length;s++)n.push(e[s].name),r[e[s].name]=e[s],e[s].children&&e[s].children.length&&i(e[s].children,e[s].name)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"__root__";return a[e]}function l(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"__root__",r=[],a=t.proxyId,s=o(n)||[],i=0;i<s.length;i++){var B=s[i],Q=e["get".concat(b(B))],c=Q?Q():void 0,F={id:a,name:B,value:c},U=l(B);U.length&&(F.children=U),r.push(F)}return r}i(t.ui,"__root__"),e.updateUI=function(n){t.ui=JSON.parse(JSON.stringify(n||[])),Object.keys(r).forEach((function(e){return delete r[e]})),Object.keys(a).forEach((function(e){return delete a[e]})),i(t.ui,"__root__"),e.modified()},e.updateProxyProperty=function(e,t){var n=r[e];n?Object.assign(n,t):r[e]=B({},t)},e.activate=function(){if(t.proxyManager){var n="setActive".concat(b(e.getProxyGroup().slice(0,-1)));t.proxyManager[n]&&t.proxyManager[n](e)}},t.propertyLinkSubscribers={},e.registerPropertyLinkForGC=function(e,n){n in t.propertyLinkSubscribers||(t.propertyLinkSubscribers[n]=[]),t.propertyLinkSubscribers[n].push(e)},e.gcPropertyLinks=function(n){for(var r=t.propertyLinkSubscribers[n]||[];r.length;)r.pop().unbind(e)},t.propertyLinkMap={},e.getPropertyLink=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.propertyLinkMap[e])return t.propertyLinkMap[e];var r=null,a=[],i=0,o=!1;function l(n){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o)return null;var B=[],Q=null;for(i=a.length;i--;){var c=a[i];c.instance===n?Q=c:B.push(c)}if(!Q)return null;var F=Q.instance["get".concat(b(Q.propertyName))]();if(!S(F,r)||l){for(r=F,o=!0;B.length;){var U=B.pop();U.instance.set(Object(s.a)({},U.propertyName,r))}o=!1}return t.propertyLinkMap[e].persistent&&(t.propertyLinkMap[e].value=F),F}function B(e,t){var n=[];for(i=a.length;i--;){var r=a[i];r.instance!==e||r.propertyName!==t&&void 0!==t||(r.subscription.unsubscribe(),n.push(i))}for(;n.length;)a.splice(n.pop(),1)}function Q(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n.onModified(l),Q=a[0];return a.push({instance:n,propertyName:r,subscription:o}),i&&(t.propertyLinkMap[e].persistent&&void 0!==t.propertyLinkMap[e].value?n.set(Object(s.a)({},r,t.propertyLinkMap[e].value)):Q&&l(Q.instance,!0)),{unsubscribe:function(){return B(n,r)}}}function c(){for(;a.length;)a.pop().subscription.unsubscribe()}var F={bind:Q,unbind:B,unsubscribe:c,persistent:n};return t.propertyLinkMap[e]=F,F},e.listPropertyNames=function(){return l().map((function(e){return e.name}))},e.getPropertyByName=function(e){return l().find((function(t){return t.name===e}))},e.getPropertyDomainByName=function(e){return(r[e]||{}).domain},e.getProxySection=function(){return{id:t.proxyId,name:t.proxyGroup,ui:t.ui,properties:l()}},e.delete=function(){for(var r=Object.keys(t.propertyLinkMap),a=r.length;a--;)t.propertyLinkMap[r[a]].unsubscribe();Object.keys(t.propertyLinkSubscribers).forEach(e.gcPropertyLinks),n()},Z((function(){if(t.links)for(var n=0;n<t.links.length;n++){var r=t.links[n],a=r.link,s=r.property,i=r.persistent,o=r.updateOnBind;if("application"===r.type){var l=t.proxyManager.getPropertyLink(a,i);e.registerPropertyLinkForGC(l,"application"),l.bind(e,s,o)}}}))},proxyPropertyMapping:function(e,t,n){for(var r=e.delete,a=[],s=Object.keys(n),i=s.length;i--;){var o=s[i],l=n[o],B=l.modelKey,Q=l.property,c=l.modified,F=void 0===c||c,U=b(Q),g=b(o);e["get".concat(g)]=t[B]["get".concat(U)],e["set".concat(g)]=t[B]["set".concat(U)],F&&a.push(t[B].onModified(e.modified))}e.delete=function(){for(;a.length;)a.pop().unsubscribe();r()}},proxyPropertyState:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};function a(e){for(var n=Object.keys(e),r=n.length;r--;){var a=n[r];t[a].set(e[a])}}t.this=e;for(var s=Object.keys(r),i=s.length,o=function(){var o=s[i];t[o]=r[o];var l=n[o];e["set".concat(b(o))]=function(n){n!==t[o]&&(t[o]=n,a(l[n]),e.modified())}};i--;)o();s.length&&p(e,t,s)},safeArrays:y,set:L,setArray:f,setGet:V,setGetArray:N,setImmediate:Z,setLoggerFunction:function(e,t){g[e]&&(g[e]=t||U)},throttle:function(e,t){var n=!1,r=null;function a(){n=!1,null!==r&&(s.apply(void 0,Object(i.a)(r)),r=null)}function s(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];n?r=i:(n=!0,e.apply(void 0,i),setTimeout(a,t))}return s},traverseInstanceTree:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(v(t)){if(a.indexOf(t)>=0)return r;a.push(t);var s=n(t);void 0!==s&&r.push(s);var i=t.get();Object.keys(i).forEach((function(t){var s=i[t];Array.isArray(s)?s.forEach((function(t){e(t,n,r,a)})):e(s,n,r,a)}))}return r},TYPED_ARRAYS:C,uncapitalize:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},VOID:c,vtkDebugMacro:d,vtkErrorMacro:u,vtkInfoMacro:function(){g.info.apply(g,arguments)},vtkLogMacro:function(){g.log.apply(g,arguments)},vtkOnceErrorMacro:function(e){m[e]||(g.error(e),m[e]=!0)},vtkWarningMacro:I};t.c=H}).call(this,n(39))},function(e,t){e.exports=window.PropTypes},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return Q})),n.d(t,"c",(function(){return W})),n.d(t,"d",(function(){return L})),n.d(t,"e",(function(){return A})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return B})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return y})),n.d(t,"j",(function(){return H})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return E})),n.d(t,"m",(function(){return F})),n.d(t,"n",(function(){return Z})),n.d(t,"o",(function(){return p})),n.d(t,"p",(function(){return D})),n.d(t,"q",(function(){return u})),n.d(t,"r",(function(){return J})),n.d(t,"s",(function(){return b})),n.d(t,"t",(function(){return d})),n.d(t,"u",(function(){return V})),n.d(t,"v",(function(){return X})),n.d(t,"w",(function(){return I})),n.d(t,"x",(function(){return g})),n.d(t,"y",(function(){return C})),n.d(t,"z",(function(){return S})),n.d(t,"A",(function(){return m})),n.d(t,"B",(function(){return o})),n.d(t,"C",(function(){return R})),n.d(t,"D",(function(){return N})),n.d(t,"E",(function(){return U})),n.d(t,"F",(function(){return l}));var r=n(15),a=(n(5),n(0)),s=(n(56),a.c.vtkWarningMacro);function i(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=[];t.length<e;)t.push(0);return t}function o(e){return e/180*Math.PI}function l(e){return 180*e/Math.PI}var B=Math.floor;function Q(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=1/0,a=-1/0,s=t,i=e.length;s<i;s+=n)e[s]<r&&(r=e[s]),a<e[s]&&(a=e[s]);return[r,a]}function c(e){for(var t=1;t<e;)t*=2;return t}function F(e){return e===c(e)}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t-e;return e+n*Math.random()}function g(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function d(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function u(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function I(e,t,n){var r=e[1]*t[2]-e[2]*t[1],a=e[2]*t[0]-e[0]*t[2],s=e[0]*t[1]-e[1]*t[0];return n[0]=r,n[1]=a,n[2]=s,n}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(t){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:for(var n=0,r=0;r<t;r++)n+=e[r]*e[r];return Math.sqrt(n)}}function C(e){var t=m(e);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t),t}function b(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2])}function y(e){var t=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}(e);return 0!==t&&(e[0]/=t,e[1]/=t),t}function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 2===t.length?t[0][0]*t[1][1]-t[1][0]*t[0][1]:4===t.length?t[0]*t[3]-t[1]*t[2]:Number.NaN}function h(e,t,n){var r=e[0][0]*t[0]+e[0][1]*t[1]+e[0][2]*t[2],a=e[1][0]*t[0]+e[1][1]*t[1]+e[1][2]*t[2],s=e[2][0]*t[0]+e[2][1]*t[1]+e[2][2]*t[2];n[0]=r,n[1]=a,n[2]=s}var Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;if(e.length!==t.length)return!1;function r(e,r){return Math.abs(e-t[r])<=n}return e.every(r)};function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!"".concat(e).includes("e"))return+"".concat(Math.round("".concat(e,"e+").concat(t)),"e-").concat(t);var n="".concat(e).split("e"),r="";return+n[1]+t>0&&(r="+"),+"".concat(Math.round("".concat(+n[0],"e").concat(r).concat(+n[1]+t)),"e-").concat(t)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[0]=x(e[0],n),t[1]=x(e[1],n),t[2]=x(e[2],n),t}function G(e,t,n){var r,a,o,l,B,Q,c,F=0,U=i(n);for(r=0;r<n;r++){for(l=0,a=0;a<n;a++)(c=Math.abs(e[r][a]))>l&&(l=c);if(0===l)return s("Unable to factor linear system"),0;U[r]=1/l}for(a=0;a<n;a++){for(r=0;r<a;r++){for(B=e[r][a],o=0;o<r;o++)B-=e[r][o]*e[o][a];e[r][a]=B}for(l=0,r=a;r<n;r++){for(B=e[r][a],o=0;o<a;o++)B-=e[r][o]*e[o][a];e[r][a]=B,(Q=U[r]*Math.abs(B))>=l&&(l=Q,F=r)}if(a!==F){for(o=0;o<n;o++)Q=e[F][o],e[F][o]=e[a][o],e[a][o]=Q;U[F]=U[a]}if(t[a]=F,Math.abs(e[a][a])<=1e-12)return s("Unable to factor linear system"),0;if(a!==n-1)for(Q=1/e[a][a],r=a+1;r<n;r++)e[r][a]*=Q}return 1}function R(e,t,n){if(2===n){var r=i(2),a=S(e[0][0],e[0][1],e[1][0],e[1][1]);return 0===a?0:(r[0]=(e[1][1]*t[0]-e[0][1]*t[1])/a,r[1]=(-e[1][0]*t[0]+e[0][0]*t[1])/a,t[0]=r[0],t[1]=r[1],1)}if(1===n)return 0===e[0][0]?0:(t[0]/=e[0][0],1);var s=i(n);return 0===G(e,s,n)?0:(function(e,t,n,r){var a,s,i,o,l;for(i=-1,a=0;a<r;a++){if(l=n[o=t[a]],n[o]=n[a],i>=0)for(s=i;s<=a-1;s++)l-=e[a][s]*n[s];else 0!==l&&(i=a);n[a]=l}for(a=r-1;a>=0;a--){for(l=n[a],s=a+1;s<r;s++)l-=e[a][s]*n[s];n[a]=l/e[a][a]}}(e,s,t,n),1)}function L(e,t){var n,a,s=Object(r.a)(e,3),i=s[0],o=s[1],l=s[2],B=i,Q=i;o>B?B=o:o<Q&&(Q=o),l>B?B=l:l<Q&&(Q=l);var c=B;(a=c>0?(B-Q)/B:0)>0?(n=i===B?1/6*(o-l)/(B-Q):o===B?1/3+1/6*(l-i)/(B-Q):2/3+1/6*(i-o)/(B-Q))<0&&(n+=1):n=0,t[0]=n,t[1]=a,t[2]=c}function V(e,t){var n,a,s,i=Object(r.a)(e,3),o=i[0],l=i[1],B=i[2],Q=1/3,c=1/6,F=2/3;o>c&&o<=Q?(a=1,n=(Q-o)/c,s=0):o>Q&&o<=.5?(a=1,s=(o-Q)/c,n=0):o>.5&&o<=F?(s=1,a=(F-o)/c,n=0):o>F&&o<=5/6?(s=1,n=(o-F)/c,a=0):o>5/6&&o<=1?(n=1,s=(1-o)/c,a=0):(n=1,a=o/c,s=0),n=l*n+(1-l),a=l*a+(1-l),s=l*s+(1-l),n*=B,a*=B,s*=B,t[0]=n,t[1]=a,t[2]=s}function A(e,t){var n=[0,0,0];(function(e,t){var n=Object(r.a)(e,3),a=n[0],s=n[1],i=n[2];a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,s>.04045?s=Math.pow((s+.055)/1.055,2.4):s/=12.92,i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,t[0]=.4124*a+.3576*s+.1805*i,t[1]=.2126*a+.7152*s+.0722*i,t[2]=.0193*a+.1192*s+.9505*i})(e,n),function(e,t){var n=Object(r.a)(e,3),a=n[0]/.9505,s=n[1]/1,i=n[2]/1.089;a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,t[0]=116*s-16,t[1]=500*(a-s),t[2]=200*(s-i)}(n,t)}function f(e,t){var n=[0,0,0];(function(e,t){var n=Object(r.a)(e,3),a=(n[0]+16)/116,s=n[1]/500+a,i=a-n[2]/200;a=Math.pow(a,3)>.008856?Math.pow(a,3):(a-16/116)/7.787,s=Math.pow(s,3)>.008856?Math.pow(s,3):(s-16/116)/7.787,i=Math.pow(i,3)>.008856?Math.pow(i,3):(i-16/116)/7.787,t[0]=.9505*s,t[1]=1*a,t[2]=1.089*i})(e,n),function(e,t){var n=Object(r.a)(e,3),a=n[0],s=n[1],i=n[2],o=3.2406*a+-1.5372*s+-.4986*i,l=-.9689*a+1.8758*s+.0415*i,B=.0557*a+-.204*s+1.057*i;o>.0031308?o=1.055*Math.pow(o,1/2.4)-.055:o*=12.92,l>.0031308?l=1.055*Math.pow(l,1/2.4)-.055:l*=12.92,B>.0031308?B=1.055*Math.pow(B,1/2.4)-.055:B*=12.92;var Q=o;Q<l&&(Q=l),Q<B&&(Q=B),Q>1&&(o/=Q,l/=Q,B/=Q),o<0&&(o=0),l<0&&(l=0),B<0&&(B=0),t[0]=o,t[1]=l,t[2]=B}(n,t)}function N(e){e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1}function E(e){return!(e[1]-e[0]<0)}function D(e,t,n){n[0]=Math.min(e[0],t[0]),n[1]=Math.max(e[0],t[0]),n[2]=Math.min(e[1],t[1]),n[3]=Math.max(e[1],t[1]),n[4]=Math.min(e[2],t[2]),n[5]=Math.max(e[2],t[2])}function v(e,t,n){return e<t?t:e>n?n:e}function J(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return r[0]=v(e[0],t[0],n[0]),r[1]=v(e[1],t[1],n[1]),r[2]=v(e[2],t[2],n[2]),r}var W=function(e){return!Number.isFinite(e)},X=Number.isNaN;function H(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return F})),n.d(t,"b",(function(){return U})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return i})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return l})),n.d(t,"m",(function(){return C})),n.d(t,"n",(function(){return S})),n.d(t,"o",(function(){return b})),n.d(t,"p",(function(){return G})),n.d(t,"q",(function(){return c})),n.d(t,"r",(function(){return Q})),n.d(t,"s",(function(){return B}));var r=n(12);function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function i(e,t){if(e===t){var n=t[1],r=t[2],a=t[3],s=t[6],i=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=a,e[13]=i,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function o(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],i=t[4],o=t[5],l=t[6],B=t[7],Q=t[8],c=t[9],F=t[10],U=t[11],g=t[12],d=t[13],u=t[14],I=t[15],m=n*o-r*i,C=n*l-a*i,b=n*B-s*i,y=r*l-a*o,S=r*B-s*o,h=a*B-s*l,Z=Q*d-c*g,x=Q*u-F*g,p=Q*I-U*g,G=c*u-F*d,R=c*I-U*d,L=F*I-U*u,V=m*L-C*R+b*G+y*p-S*x+h*Z;return V?(V=1/V,e[0]=(o*L-l*R+B*G)*V,e[1]=(a*R-r*L-s*G)*V,e[2]=(d*h-u*S+I*y)*V,e[3]=(F*S-c*h-U*y)*V,e[4]=(l*p-i*L-B*x)*V,e[5]=(n*L-a*p+s*x)*V,e[6]=(u*b-g*h-I*C)*V,e[7]=(Q*h-F*b+U*C)*V,e[8]=(i*R-o*p+B*Z)*V,e[9]=(r*p-n*R-s*Z)*V,e[10]=(g*S-d*b+I*m)*V,e[11]=(c*b-Q*S-U*m)*V,e[12]=(o*x-i*G-l*Z)*V,e[13]=(n*G-r*x+a*Z)*V,e[14]=(d*C-g*y-u*m)*V,e[15]=(Q*y-c*C+F*m)*V,e):null}function l(e,t,n){var r=t[0],a=t[1],s=t[2],i=t[3],o=t[4],l=t[5],B=t[6],Q=t[7],c=t[8],F=t[9],U=t[10],g=t[11],d=t[12],u=t[13],I=t[14],m=t[15],C=n[0],b=n[1],y=n[2],S=n[3];return e[0]=C*r+b*o+y*c+S*d,e[1]=C*a+b*l+y*F+S*u,e[2]=C*s+b*B+y*U+S*I,e[3]=C*i+b*Q+y*g+S*m,C=n[4],b=n[5],y=n[6],S=n[7],e[4]=C*r+b*o+y*c+S*d,e[5]=C*a+b*l+y*F+S*u,e[6]=C*s+b*B+y*U+S*I,e[7]=C*i+b*Q+y*g+S*m,C=n[8],b=n[9],y=n[10],S=n[11],e[8]=C*r+b*o+y*c+S*d,e[9]=C*a+b*l+y*F+S*u,e[10]=C*s+b*B+y*U+S*I,e[11]=C*i+b*Q+y*g+S*m,C=n[12],b=n[13],y=n[14],S=n[15],e[12]=C*r+b*o+y*c+S*d,e[13]=C*a+b*l+y*F+S*u,e[14]=C*s+b*B+y*U+S*I,e[15]=C*i+b*Q+y*g+S*m,e}function B(e,t,n){var r,a,s,i,o,l,B,Q,c,F,U,g,d=n[0],u=n[1],I=n[2];return t===e?(e[12]=t[0]*d+t[4]*u+t[8]*I+t[12],e[13]=t[1]*d+t[5]*u+t[9]*I+t[13],e[14]=t[2]*d+t[6]*u+t[10]*I+t[14],e[15]=t[3]*d+t[7]*u+t[11]*I+t[15]):(r=t[0],a=t[1],s=t[2],i=t[3],o=t[4],l=t[5],B=t[6],Q=t[7],c=t[8],F=t[9],U=t[10],g=t[11],e[0]=r,e[1]=a,e[2]=s,e[3]=i,e[4]=o,e[5]=l,e[6]=B,e[7]=Q,e[8]=c,e[9]=F,e[10]=U,e[11]=g,e[12]=r*d+o*u+c*I+t[12],e[13]=a*d+l*u+F*I+t[13],e[14]=s*d+B*u+U*I+t[14],e[15]=i*d+Q*u+g*I+t[15]),e}function Q(e,t,n){var r=n[0],a=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function c(e,t,n,a){var s,i,o,l,B,Q,c,F,U,g,d,u,I,m,C,b,y,S,h,Z,x,p,G,R,L=a[0],V=a[1],A=a[2],f=Math.hypot(L,V,A);return f<r.b?null:(L*=f=1/f,V*=f,A*=f,s=Math.sin(n),o=1-(i=Math.cos(n)),l=t[0],B=t[1],Q=t[2],c=t[3],F=t[4],U=t[5],g=t[6],d=t[7],u=t[8],I=t[9],m=t[10],C=t[11],b=L*L*o+i,y=V*L*o+A*s,S=A*L*o-V*s,h=L*V*o-A*s,Z=V*V*o+i,x=A*V*o+L*s,p=L*A*o+V*s,G=V*A*o-L*s,R=A*A*o+i,e[0]=l*b+F*y+u*S,e[1]=B*b+U*y+I*S,e[2]=Q*b+g*y+m*S,e[3]=c*b+d*y+C*S,e[4]=l*h+F*Z+u*x,e[5]=B*h+U*Z+I*x,e[6]=Q*h+g*Z+m*x,e[7]=c*h+d*Z+C*x,e[8]=l*p+F*G+u*R,e[9]=B*p+U*G+I*R,e[10]=Q*p+g*G+m*R,e[11]=c*p+d*G+C*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function F(e,t,n){var r=Math.sin(n),a=Math.cos(n),s=t[4],i=t[5],o=t[6],l=t[7],B=t[8],Q=t[9],c=t[10],F=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*a+B*r,e[5]=i*a+Q*r,e[6]=o*a+c*r,e[7]=l*a+F*r,e[8]=B*a-s*r,e[9]=Q*a-i*r,e[10]=c*a-o*r,e[11]=F*a-l*r,e}function U(e,t,n){var r=Math.sin(n),a=Math.cos(n),s=t[0],i=t[1],o=t[2],l=t[3],B=t[8],Q=t[9],c=t[10],F=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a-B*r,e[1]=i*a-Q*r,e[2]=o*a-c*r,e[3]=l*a-F*r,e[8]=s*r+B*a,e[9]=i*r+Q*a,e[10]=o*r+c*a,e[11]=l*r+F*a,e}function g(e,t,n){var r=Math.sin(n),a=Math.cos(n),s=t[0],i=t[1],o=t[2],l=t[3],B=t[4],Q=t[5],c=t[6],F=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a+B*r,e[1]=i*a+Q*r,e[2]=o*a+c*r,e[3]=l*a+F*r,e[4]=B*a-s*r,e[5]=Q*a-i*r,e[6]=c*a-o*r,e[7]=F*a-l*r,e}function d(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function u(e,t,n){var a,s,i,o=n[0],l=n[1],B=n[2],Q=Math.hypot(o,l,B);return Q<r.b?null:(o*=Q=1/Q,l*=Q,B*=Q,a=Math.sin(t),i=1-(s=Math.cos(t)),e[0]=o*o*i+s,e[1]=l*o*i+B*a,e[2]=B*o*i-l*a,e[3]=0,e[4]=o*l*i-B*a,e[5]=l*l*i+s,e[6]=B*l*i+o*a,e[7]=0,e[8]=o*B*i+l*a,e[9]=l*B*i-o*a,e[10]=B*B*i+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function I(e,t,n){var r=t[0],a=t[1],s=t[2],i=t[3],o=r+r,l=a+a,B=s+s,Q=r*o,c=r*l,F=r*B,U=a*l,g=a*B,d=s*B,u=i*o,I=i*l,m=i*B;return e[0]=1-(U+d),e[1]=c+m,e[2]=F-I,e[3]=0,e[4]=c-m,e[5]=1-(Q+d),e[6]=g+u,e[7]=0,e[8]=F+I,e[9]=g-u,e[10]=1-(Q+U),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function m(e,t){var n=t[0],r=t[1],a=t[2],s=t[4],i=t[5],o=t[6],l=t[8],B=t[9],Q=t[10];return e[0]=Math.hypot(n,r,a),e[1]=Math.hypot(s,i,o),e[2]=Math.hypot(l,B,Q),e}function C(e,t){var n=new r.a(3);m(n,t);var a=1/n[0],s=1/n[1],i=1/n[2],o=t[0]*a,l=t[1]*s,B=t[2]*i,Q=t[4]*a,c=t[5]*s,F=t[6]*i,U=t[8]*a,g=t[9]*s,d=t[10]*i,u=o+c+d,I=0;return u>0?(I=2*Math.sqrt(u+1),e[3]=.25*I,e[0]=(F-g)/I,e[1]=(U-B)/I,e[2]=(l-Q)/I):o>c&&o>d?(I=2*Math.sqrt(1+o-c-d),e[3]=(F-g)/I,e[0]=.25*I,e[1]=(l+Q)/I,e[2]=(U+B)/I):c>d?(I=2*Math.sqrt(1+c-o-d),e[3]=(U-B)/I,e[0]=(l+Q)/I,e[1]=.25*I,e[2]=(F+g)/I):(I=2*Math.sqrt(1+d-o-c),e[3]=(l-Q)/I,e[0]=(U+B)/I,e[1]=(F+g)/I,e[2]=.25*I),e}function b(e,t,n,r){var a=t[0],s=t[1],i=t[2],o=t[3],l=a+a,B=s+s,Q=i+i,c=a*l,F=a*B,U=a*Q,g=s*B,d=s*Q,u=i*Q,I=o*l,m=o*B,C=o*Q,b=r[0],y=r[1],S=r[2];return e[0]=(1-(g+u))*b,e[1]=(F+C)*b,e[2]=(U-m)*b,e[3]=0,e[4]=(F-C)*y,e[5]=(1-(c+u))*y,e[6]=(d+I)*y,e[7]=0,e[8]=(U+m)*S,e[9]=(d-I)*S,e[10]=(1-(c+g))*S,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function y(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],i=n+n,o=r+r,l=a+a,B=n*i,Q=r*i,c=r*o,F=a*i,U=a*o,g=a*l,d=s*i,u=s*o,I=s*l;return e[0]=1-c-g,e[1]=Q+I,e[2]=F-u,e[3]=0,e[4]=Q-I,e[5]=1-B-g,e[6]=U+d,e[7]=0,e[8]=F+u,e[9]=U-d,e[10]=1-B-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S(e,t,n,r,a,s,i){var o=1/(t-n),l=1/(r-a),B=1/(s-i);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*B,e[11]=0,e[12]=(t+n)*o,e[13]=(a+r)*l,e[14]=(i+s)*B,e[15]=1,e}function h(e,t,n,a){var i,o,l,B,Q,c,F,U,g,d,u=t[0],I=t[1],m=t[2],C=a[0],b=a[1],y=a[2],S=n[0],h=n[1],Z=n[2];return Math.abs(u-S)<r.b&&Math.abs(I-h)<r.b&&Math.abs(m-Z)<r.b?s(e):(F=u-S,U=I-h,g=m-Z,i=b*(g*=d=1/Math.hypot(F,U,g))-y*(U*=d),o=y*(F*=d)-C*g,l=C*U-b*F,(d=Math.hypot(i,o,l))?(i*=d=1/d,o*=d,l*=d):(i=0,o=0,l=0),B=U*l-g*o,Q=g*i-F*l,c=F*o-U*i,(d=Math.hypot(B,Q,c))?(B*=d=1/d,Q*=d,c*=d):(B=0,Q=0,c=0),e[0]=i,e[1]=B,e[2]=F,e[3]=0,e[4]=o,e[5]=Q,e[6]=U,e[7]=0,e[8]=l,e[9]=c,e[10]=g,e[11]=0,e[12]=-(i*u+o*I+l*m),e[13]=-(B*u+Q*I+c*m),e[14]=-(F*u+U*I+g*m),e[15]=1,e)}function Z(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}var x=l,p=Z,G=Object.freeze({__proto__:null,create:function(){var e=new r.a(16);return r.a!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},clone:function(e){var t=new r.a(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:a,fromValues:function(e,t,n,a,s,i,o,l,B,Q,c,F,U,g,d,u){var I=new r.a(16);return I[0]=e,I[1]=t,I[2]=n,I[3]=a,I[4]=s,I[5]=i,I[6]=o,I[7]=l,I[8]=B,I[9]=Q,I[10]=c,I[11]=F,I[12]=U,I[13]=g,I[14]=d,I[15]=u,I},set:function(e,t,n,r,a,s,i,o,l,B,Q,c,F,U,g,d,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=s,e[5]=i,e[6]=o,e[7]=l,e[8]=B,e[9]=Q,e[10]=c,e[11]=F,e[12]=U,e[13]=g,e[14]=d,e[15]=u,e},identity:s,transpose:i,invert:o,adjoint:function(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],i=t[4],o=t[5],l=t[6],B=t[7],Q=t[8],c=t[9],F=t[10],U=t[11],g=t[12],d=t[13],u=t[14],I=t[15];return e[0]=o*(F*I-U*u)-c*(l*I-B*u)+d*(l*U-B*F),e[1]=-(r*(F*I-U*u)-c*(a*I-s*u)+d*(a*U-s*F)),e[2]=r*(l*I-B*u)-o*(a*I-s*u)+d*(a*B-s*l),e[3]=-(r*(l*U-B*F)-o*(a*U-s*F)+c*(a*B-s*l)),e[4]=-(i*(F*I-U*u)-Q*(l*I-B*u)+g*(l*U-B*F)),e[5]=n*(F*I-U*u)-Q*(a*I-s*u)+g*(a*U-s*F),e[6]=-(n*(l*I-B*u)-i*(a*I-s*u)+g*(a*B-s*l)),e[7]=n*(l*U-B*F)-i*(a*U-s*F)+Q*(a*B-s*l),e[8]=i*(c*I-U*d)-Q*(o*I-B*d)+g*(o*U-B*c),e[9]=-(n*(c*I-U*d)-Q*(r*I-s*d)+g*(r*U-s*c)),e[10]=n*(o*I-B*d)-i*(r*I-s*d)+g*(r*B-s*o),e[11]=-(n*(o*U-B*c)-i*(r*U-s*c)+Q*(r*B-s*o)),e[12]=-(i*(c*u-F*d)-Q*(o*u-l*d)+g*(o*F-l*c)),e[13]=n*(c*u-F*d)-Q*(r*u-a*d)+g*(r*F-a*c),e[14]=-(n*(o*u-l*d)-i*(r*u-a*d)+g*(r*l-a*o)),e[15]=n*(o*F-l*c)-i*(r*F-a*c)+Q*(r*l-a*o),e},determinant:function(e){var t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],i=e[5],o=e[6],l=e[7],B=e[8],Q=e[9],c=e[10],F=e[11],U=e[12],g=e[13],d=e[14],u=e[15];return(t*i-n*s)*(c*u-F*d)-(t*o-r*s)*(Q*u-F*g)+(t*l-a*s)*(Q*d-c*g)+(n*o-r*i)*(B*u-F*U)-(n*l-a*i)*(B*d-c*U)+(r*l-a*o)*(B*g-Q*U)},multiply:l,translate:B,scale:Q,rotate:c,rotateX:F,rotateY:U,rotateZ:g,fromTranslation:d,fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotation:u,fromXRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromYRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotationTranslation:I,fromQuat2:function(e,t){var n=new r.a(3),a=-t[0],s=-t[1],i=-t[2],o=t[3],l=t[4],B=t[5],Q=t[6],c=t[7],F=a*a+s*s+i*i+o*o;return F>0?(n[0]=2*(l*o+c*a+B*i-Q*s)/F,n[1]=2*(B*o+c*s+Q*a-l*i)/F,n[2]=2*(Q*o+c*i+l*s-B*a)/F):(n[0]=2*(l*o+c*a+B*i-Q*s),n[1]=2*(B*o+c*s+Q*a-l*i),n[2]=2*(Q*o+c*i+l*s-B*a)),I(e,t,n),e},getTranslation:function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},getScaling:m,getRotation:C,fromRotationTranslationScale:b,fromRotationTranslationScaleOrigin:function(e,t,n,r,a){var s=t[0],i=t[1],o=t[2],l=t[3],B=s+s,Q=i+i,c=o+o,F=s*B,U=s*Q,g=s*c,d=i*Q,u=i*c,I=o*c,m=l*B,C=l*Q,b=l*c,y=r[0],S=r[1],h=r[2],Z=a[0],x=a[1],p=a[2],G=(1-(d+I))*y,R=(U+b)*y,L=(g-C)*y,V=(U-b)*S,A=(1-(F+I))*S,f=(u+m)*S,N=(g+C)*h,E=(u-m)*h,D=(1-(F+d))*h;return e[0]=G,e[1]=R,e[2]=L,e[3]=0,e[4]=V,e[5]=A,e[6]=f,e[7]=0,e[8]=N,e[9]=E,e[10]=D,e[11]=0,e[12]=n[0]+Z-(G*Z+V*x+N*p),e[13]=n[1]+x-(R*Z+A*x+E*p),e[14]=n[2]+p-(L*Z+f*x+D*p),e[15]=1,e},fromQuat:y,frustum:function(e,t,n,r,a,s,i){var o=1/(n-t),l=1/(a-r),B=1/(s-i);return e[0]=2*s*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(n+t)*o,e[9]=(a+r)*l,e[10]=(i+s)*B,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*s*2*B,e[15]=0,e},perspective:function(e,t,n,r,a){var s,i=1/Math.tan(t/2);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(s=1/(r-a),e[10]=(a+r)*s,e[14]=2*a*r*s):(e[10]=-1,e[14]=-2*r),e},perspectiveFromFieldOfView:function(e,t,n,r){var a=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(i+o),B=2/(a+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=B,e[6]=0,e[7]=0,e[8]=-(i-o)*l*.5,e[9]=(a-s)*B*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},ortho:S,lookAt:h,targetTo:function(e,t,n,r){var a=t[0],s=t[1],i=t[2],o=r[0],l=r[1],B=r[2],Q=a-n[0],c=s-n[1],F=i-n[2],U=Q*Q+c*c+F*F;U>0&&(Q*=U=1/Math.sqrt(U),c*=U,F*=U);var g=l*F-B*c,d=B*Q-o*F,u=o*c-l*Q;return(U=g*g+d*d+u*u)>0&&(g*=U=1/Math.sqrt(U),d*=U,u*=U),e[0]=g,e[1]=d,e[2]=u,e[3]=0,e[4]=c*u-F*d,e[5]=F*g-Q*u,e[6]=Q*d-c*g,e[7]=0,e[8]=Q,e[9]=c,e[10]=F,e[11]=0,e[12]=a,e[13]=s,e[14]=i,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},subtract:Z,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},equals:function(e,t){var n=e[0],a=e[1],s=e[2],i=e[3],o=e[4],l=e[5],B=e[6],Q=e[7],c=e[8],F=e[9],U=e[10],g=e[11],d=e[12],u=e[13],I=e[14],m=e[15],C=t[0],b=t[1],y=t[2],S=t[3],h=t[4],Z=t[5],x=t[6],p=t[7],G=t[8],R=t[9],L=t[10],V=t[11],A=t[12],f=t[13],N=t[14],E=t[15];return Math.abs(n-C)<=r.b*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(a-b)<=r.b*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(s-y)<=r.b*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(i-S)<=r.b*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(o-h)<=r.b*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(l-Z)<=r.b*Math.max(1,Math.abs(l),Math.abs(Z))&&Math.abs(B-x)<=r.b*Math.max(1,Math.abs(B),Math.abs(x))&&Math.abs(Q-p)<=r.b*Math.max(1,Math.abs(Q),Math.abs(p))&&Math.abs(c-G)<=r.b*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(F-R)<=r.b*Math.max(1,Math.abs(F),Math.abs(R))&&Math.abs(U-L)<=r.b*Math.max(1,Math.abs(U),Math.abs(L))&&Math.abs(g-V)<=r.b*Math.max(1,Math.abs(g),Math.abs(V))&&Math.abs(d-A)<=r.b*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(u-f)<=r.b*Math.max(1,Math.abs(u),Math.abs(f))&&Math.abs(I-N)<=r.b*Math.max(1,Math.abs(I),Math.abs(N))&&Math.abs(m-E)<=r.b*Math.max(1,Math.abs(m),Math.abs(E))},mul:x,sub:p})},function(e,t){e.exports=window.React},function(e,t,n){"use strict";(function(e){var t=n(11),r=n(31),a=n(49),s=n(51);Object(t.c)("/$$rollup_base$$/node_modules/readable-stream/lib/_stream_duplex.js",(function(t,n){var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=F;var o=a.a,l=s.a;Object(r.a)(F,o);for(var B=i(l.prototype),Q=0;Q<B.length;Q++){var c=B[Q];F.prototype[c]||(F.prototype[c]=l.prototype[c])}function F(e){if(!(this instanceof F))return new F(e);o.call(this,e),l.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",U)))}function U(){this._writableState.ended||e.nextTick(g,this)}function g(e){e.end()}Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(F.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(F.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}))}).call(this,n(42))},function(e,t,n){"use strict";n.d(t,"a",(function(){return B})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return C})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return Z})),n.d(t,"i",(function(){return I})),n.d(t,"j",(function(){return s})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return m})),n.d(t,"m",(function(){return S})),n.d(t,"n",(function(){return a})),n.d(t,"o",(function(){return i})),n.d(t,"p",(function(){return o})),n.d(t,"q",(function(){return y})),n.d(t,"r",(function(){return E}));var r=n(12);function a(){var e=new r.a(3);return r.a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function s(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function i(e,t,n){var a=new r.a(3);return a[0]=e,a[1]=t,a[2]=n,a}function o(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function l(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function B(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Q(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function c(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function F(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function U(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.hypot(n,r,a)}function g(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function d(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function u(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function I(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function m(e,t){var n=t[0],r=t[1],a=t[2],s=n*n+r*r+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function C(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function b(e,t,n){var r=t[0],a=t[1],s=t[2],i=n[0],o=n[1],l=n[2];return e[0]=a*l-s*o,e[1]=s*i-r*l,e[2]=r*o-a*i,e}function y(e,t,n){var r=t[0],a=t[1],s=t[2],i=n[3]*r+n[7]*a+n[11]*s+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*a+n[8]*s+n[12])/i,e[1]=(n[1]*r+n[5]*a+n[9]*s+n[13])/i,e[2]=(n[2]*r+n[6]*a+n[10]*s+n[14])/i,e}function S(e,t,n){var r=t[0],a=t[1],s=t[2];return e[0]=r*n[0]+a*n[3]+s*n[6],e[1]=r*n[1]+a*n[4]+s*n[7],e[2]=r*n[2]+a*n[5]+s*n[8],e}function h(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Z(e,t){var n=e[0],a=e[1],s=e[2],i=t[0],o=t[1],l=t[2];return Math.abs(n-i)<=r.b*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-o)<=r.b*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(s-l)<=r.b*Math.max(1,Math.abs(s),Math.abs(l))}var x,p=B,G=Q,R=c,L=U,V=g,A=s,f=d,N=(x=a(),function(e,t,n,r,a,s){var i,o;for(t||(t=3),n||(n=0),o=r?Math.min(r*t+n,e.length):e.length,i=n;i<o;i+=t)x[0]=e[i],x[1]=e[i+1],x[2]=e[i+2],a(x,x,s),e[i]=x[0],e[i+1]=x[1],e[i+2]=x[2];return e}),E=Object.freeze({__proto__:null,create:a,clone:function(e){var t=new r.a(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},length:s,fromValues:i,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:o,add:l,subtract:B,multiply:Q,divide:c,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:F,scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},distance:U,squaredDistance:g,squaredLength:d,negate:u,inverse:I,normalize:m,dot:C,cross:b,lerp:function(e,t,n,r){var a=t[0],s=t[1],i=t[2];return e[0]=a+r*(n[0]-a),e[1]=s+r*(n[1]-s),e[2]=i+r*(n[2]-i),e},hermite:function(e,t,n,r,a,s){var i=s*s,o=i*(2*s-3)+1,l=i*(s-2)+s,B=i*(s-1),Q=i*(3-2*s);return e[0]=t[0]*o+n[0]*l+r[0]*B+a[0]*Q,e[1]=t[1]*o+n[1]*l+r[1]*B+a[1]*Q,e[2]=t[2]*o+n[2]*l+r[2]*B+a[2]*Q,e},bezier:function(e,t,n,r,a,s){var i=1-s,o=i*i,l=s*s,B=o*i,Q=3*s*o,c=3*l*i,F=l*s;return e[0]=t[0]*B+n[0]*Q+r[0]*c+a[0]*F,e[1]=t[1]*B+n[1]*Q+r[1]*c+a[1]*F,e[2]=t[2]*B+n[2]*Q+r[2]*c+a[2]*F,e},random:function(e,t){t=t||1;var n=2*Object(r.c)()*Math.PI,a=2*Object(r.c)()-1,s=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(n)*s,e[1]=Math.sin(n)*s,e[2]=a*t,e},transformMat4:y,transformMat3:S,transformQuat:function(e,t,n){var r=n[0],a=n[1],s=n[2],i=n[3],o=t[0],l=t[1],B=t[2],Q=a*B-s*l,c=s*o-r*B,F=r*l-a*o,U=a*F-s*c,g=s*Q-r*F,d=r*c-a*Q,u=2*i;return Q*=u,c*=u,F*=u,U*=2,g*=2,d*=2,e[0]=o+Q+U,e[1]=l+c+g,e[2]=B+F+d,e},rotateX:function(e,t,n,r){var a=[],s=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],s[0]=a[0],s[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),s[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},rotateY:function(e,t,n,r){var a=[],s=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],s[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),s[1]=a[1],s[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},rotateZ:function(e,t,n,r){var a=[],s=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],s[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),s[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),s[2]=a[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e},angle:function(e,t){var n=e[0],r=e[1],a=e[2],s=t[0],i=t[1],o=t[2],l=Math.sqrt(n*n+r*r+a*a)*Math.sqrt(s*s+i*i+o*o),B=l&&C(e,t)/l;return Math.acos(Math.min(Math.max(B,-1),1))},zero:function(e){return e[0]=0,e[1]=0,e[2]=0,e},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:h,equals:Z,sub:p,mul:G,div:R,dist:L,sqrDist:V,len:A,sqrLen:f,forEach:N})},function(e,t,n){"use strict";var r=n(47),a=function(e){if(Array.isArray(e))return Object(r.a)(e)},s=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},i=n(48),o=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};t.a=function(e){return a(e)||s(e)||Object(i.a)(e)||o()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var r=n(11),a=n(20),s=n(52),i=n(25),o=n(62),l=n(24),B=Object(r.d)((function(e,t){function n(e){return e}function r(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}t.newBlob=function(e,n){t.checkSupport("blob");try{return new Blob([e],{type:n})}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var B={stringifyByChunk:function(e,t,n){var r=[],a=0,s=e.length;if(s<=n)return String.fromCharCode.apply(null,e);for(;a<s;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(a,Math.min(a+n,s)))):r.push(String.fromCharCode.apply(null,e.subarray(a,Math.min(a+n,s)))),a+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return a.a.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return a.a.nodebuffer&&1===String.fromCharCode.apply(null,i.a.allocBuffer(1)).length}catch(e){return!1}}()}};function Q(e){var n=65536,r=t.getTypeOf(e),a=!0;if("uint8array"===r?a=B.applyCanBeUsed.uint8array:"nodebuffer"===r&&(a=B.applyCanBeUsed.nodebuffer),a)for(;n>1;)try{return B.stringifyByChunk(e,r,n)}catch(e){n=Math.floor(n/2)}return B.stringifyByChar(e)}function c(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}t.applyFromCharCode=Q;var F={};F.string={string:n,array:function(e){return r(e,new Array(e.length))},arraybuffer:function(e){return F.string.uint8array(e).buffer},uint8array:function(e){return r(e,new Uint8Array(e.length))},nodebuffer:function(e){return r(e,i.a.allocBuffer(e.length))}},F.array={string:Q,array:n,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.a.newBufferFrom(e)}},F.arraybuffer={string:function(e){return Q(new Uint8Array(e))},array:function(e){return c(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:n,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.a.newBufferFrom(new Uint8Array(e))}},F.uint8array={string:Q,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:n,nodebuffer:function(e){return i.a.newBufferFrom(e)}},F.nodebuffer={string:Q,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return F.nodebuffer.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:n},t.transformTo=function(e,n){if(n||(n=""),!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return F[r][e](n)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":a.a.nodebuffer&&i.a.isBuffer(e)?"nodebuffer":a.a.uint8array&&e instanceof Uint8Array?"uint8array":a.a.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!a.a[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},t.delay=function(e,t,n){Object(o.a)((function(){e.apply(n||null,t||[])}))},t.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},t.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},t.prepareContent=function(e,n,i,o,B){return l.a.Promise.resolve(n).then((function(e){return a.a.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new l.a.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(n){var Q,c=t.getTypeOf(n);return c?("arraybuffer"===c?n=t.transformTo("uint8array",n):"string"===c&&(B?n=s.a.decode(n):i&&!0!==o&&(n=r(Q=n,a.a.uint8array?new Uint8Array(Q.length):new Array(Q.length)))),n):l.a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}}),"/$$rollup_base$$/node_modules/jszip/lib")},function(e,t,n){"use strict";t.a=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=n(9),a=(n(5),n(0)),s=n(17),i=n(2);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=s.c.DefaultDataType,Q=[];function c(){var e=Number.MAX_VALUE,t=-Number.MAX_VALUE,n=0,r=0;return{add:function(a){e>a&&(e=a),t<a&&(t=a),n++,r+=a},get:function(){return{min:e,max:t,count:n,sum:r,mean:r/n}},getRange:function(){return{min:e,max:t}}}}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=c(),a=e.length,s=0;if(t<0&&n>1){for(var i=0;i<a;i+=n){s=0;for(var o=0;o<n;o++)s+=e[i+o]*e[i+o];s=Math.pow(s,.5),r.add(s)}return r.getRange()}for(var l=t<0?0:t,B=l;B<a;B+=n)r.add(e[B]);return r.getRange()}function U(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e||[];n.length<=t;)n.push(null);return n}function g(e){return Object.prototype.toString.call(e).slice(8,-1)}var d={computeRange:F,createRangeHelper:c,getDataType:g,getMaxNorm:function(e){for(var t=e.getNumberOfComponents(),n=0,r=0;r<e.getNumberOfTuples();++r){var a=Object(i.A)(e.getTuple(r),t);a>n&&(n=a)}return n}};function u(e,t){function n(){t.ranges=null,e.modified()}t.classHierarchy.push("vtkDataArray"),e.getElementComponentSize=function(){return t.values.BYTES_PER_ELEMENT},e.getComponent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+n]},e.setComponent=function(e,r,a){a!==t.values[e*t.numberOfComponents+r]&&(t.values[e*t.numberOfComponents+r]=a,n())},e.getData=function(){return t.values},e.getRange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=e<0?t.numberOfComponents:e,r=null;return t.ranges||(t.ranges=U(t.ranges,t.numberOfComponents)),(r=t.ranges[n])?(t.rangeTuple[0]=r.min,t.rangeTuple[1]=r.max,t.rangeTuple):(r=F(t.values,e,t.numberOfComponents),t.ranges[n]=r,t.rangeTuple[0]=r.min,t.rangeTuple[1]=r.max,t.rangeTuple)},e.setRange=function(e,n){t.ranges||(t.ranges=U(t.ranges,t.numberOfComponents));var r={min:e.min,max:e.max};return t.ranges[n]=r,t.rangeTuple[0]=r.min,t.rangeTuple[1]=r.max,t.rangeTuple},e.setTuple=function(e,n){for(var r=e*t.numberOfComponents,a=0;a<t.numberOfComponents;a++)t.values[r+a]=n[a]},e.getTuple=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q,r=t.numberOfComponents||1;n.length!==r&&(n.length=r);var a=e*r;if(1===r)n[0]=t.values[a];else if(2===r)n[0]=t.values[a],n[1]=t.values[a+1];else if(3===r)n[0]=t.values[a],n[1]=t.values[a+1],n[2]=t.values[a+2];else if(4===r)n[0]=t.values[a],n[1]=t.values[a+1],n[2]=t.values[a+2],n[3]=t.values[a+3];else for(var s=0;s<r;s++)n[s]=t.values[a+s];return n},e.getTupleLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e*t.numberOfComponents},e.getNumberOfComponents=function(){return t.numberOfComponents},e.getNumberOfValues=function(){return t.values.length},e.getNumberOfTuples=function(){return t.values.length/t.numberOfComponents},e.getDataType=function(){return t.dataType},e.newClone=function(){return C({empty:!0,name:t.name,dataType:t.dataType,numberOfComponents:t.numberOfComponents})},e.getName=function(){return t.name||(e.modified(),t.name="vtkDataArray".concat(e.getMTime())),t.name},e.setData=function(e,r){t.values=e,t.size=e.length,t.dataType=g(e),r&&(t.numberOfComponents=r),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),n()},e.getState=function(){var n=l(l({},t),{},{vtkClass:e.getClassName()});n.values=Array.from(n.values),delete n.buffer,Object.keys(n).forEach((function(e){n[e]||delete n[e]}));var r={};return Object.keys(n).sort().forEach((function(e){r[e]=n[e]})),r.mtime&&delete r.mtime,r}}var I={name:"",numberOfComponents:1,size:0,dataType:B,rangeTuple:[0,0]};function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,I,n),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");t.values?Array.isArray(t.values)&&(t.values=window[t.dataType].from(t.values)):t.values=new window[t.dataType](t.size),t.values&&(t.size=t.values.length,t.dataType=g(t.values)),Object(a.g)(e,t),Object(a.h)(e,t,["name","numberOfComponents"]),u(e,t)}var C=Object(a.f)(m,"vtkDataArray"),b=l(l({newInstance:C,extend:m},d),s.c);t.a=b},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return a}));var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}function i(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return d(e,null==t?n.path:t)}},n.exports),n.exports}function o(e,t){l[e]=t}const l=Object.create(null),B=Object.create(null),Q={id:"<rollup>",exports:{},parent:void 0,filename:null,loaded:!1,children:[],paths:[]},c=["",".js",".json"];function F(e){const t=(e=e.replace(/\\/g,"/")).split("/"),n=""===t[0];for(let e=1;e<t.length;e++)"."!==t[e]&&""!==t[e]||t.splice(e--,1);for(let e=1;e<t.length;e++)".."===t[e]&&e>0&&".."!==t[e-1]&&"."!==t[e-1]&&(t.splice(--e,2),e--);return e=t.join("/"),n&&"/"!==e[0]?e="/"+e:0===e.length&&(e="."),e}function U(){if(0===arguments.length)return".";let e;for(let t=0;t<arguments.length;++t){let n=arguments[t];n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":e}function g(e){if(0===e.length)return".";let t=e.length-1;for(;t>0;){const n=e.charCodeAt(t);if((47===n||92===n)&&t!==e.length-1)break;t--}return t>0?e.substr(0,t):47===e.chartCodeAt(0)||92===e.chartCodeAt(0)?e.charAt(0):"."}function d(e,t){const a=function(e){let t=e[0];if("/"===t||"\\"===t)return!1;let n=e[1],r=e[2];return!(!("."!==t||n&&"/"!==n&&"\\"!==n)||!("."!==t||"."!==n||r&&"/"!==r&&"\\"!==r))&&(":"!==n||"/"!==r&&"\\"!==r)}(e);let s;for(e=F(e);;){s=a?F(t?t+"/node_modules/"+e:U("node_modules",e)):t?F(t+"/"+e):e;for(let e=0;e<c.length;e++){const t=s+c[e];let n=B[t];if(n)return n.exports;const a=l[t];if(a){B[t]=n={id:t,filename:t,path:g(t),exports:{},parent:Q,loaded:!1,children:[],paths:[],require:function(e,t){return d(e,null==t?n.path:t)}};try{a.call(r,n,n.exports)}catch(e){throw delete B[t],e}return n.loaded=!0,n.exports}}if(!a)break;const n=F(t+"/..");if(n===t)break;t=n}return n(65)(e)}d.cache=B}).call(this,n(39))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o}));var r=1e-6,a="undefined"!=typeof Float32Array?Float32Array:Array,s=Math.random,i=Math.PI/180;function o(e){return e*i}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.d(t,"a",(function(){return a})),r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}};var a=r},function(e,t,n){"use strict";var r=n(7),a=(n(5),n(0)),s=n(10),i=n(26),o=n(16);function l(e,t){function n(){for(;t.cellFields.length<t.radius.length;)t.cellFields.push(t.cellFields.length)}t.classHierarchy.push("vtkConcentricCylinderSource"),e.clearRadius=function(){t.radius=[],t.cellFields=[],e.modified()},e.addRadius=function(r,a){t.radius.push(r),void 0!==a&&t.cellFields.push(a),n(),e.modified()},e.getNumberOfRadius=function(){return t.radius.length},e.getRadius=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.radius[e]},e.setRadius=function(n,r){t.radius[n]=r,e.modified()},e.setCellField=function(n,r){t.cellFields[n]=r,e.modified()},e.removeMask=function(){t.mask=null,e.modified()},e.setMaskLayer=function(n,r){var a=!1;!t.mask&&r&&(a=!0,t.mask=[]),t.mask&&(!t.mask[n]!=!r&&(a=!0),t.mask[n]=r),a&&e.modified()},e.getMaskLayer=function(e){return void 0===e?t.mask:t.mask[e]},e.requestData=function(e,a){var l;if(!t.deleted&&t.radius.length){n();var B=a[0],Q=t.radius.length,c=t.height/2,F=0,U=0,g=t.startTheta<t.endTheta?t.startTheta:t.endTheta;g*=Math.PI/180;var d=t.endTheta>t.startTheta?t.endTheta:t.startTheta;d*=Math.PI/180;var u=t.resolution,I=!1;d>=g+2*Math.PI?d=g+2*Math.PI:(++u,I=!0);var m=(d-g)/t.resolution,C=u*Q*2+2;if(t.skipInnerFaces||t.mask)if(!t.skipInnerFaces&&t.mask){t.mask[0]||(F+=2*(u+1)+5*u+(I?10:0),U+=2+u+(I?2:0));for(var b=1;b<Q;b++)t.mask[b]||(F+=20*u+(I?10:0),U+=4*u+(I?2:0))}else{t.skipInnerFaces&&t.mask&&t.mask[0]||(F+=2*(u+1)+(I?10:0),U+=2+(I?2:0),(1===t.radius.length||!t.skipInnerFaces||t.mask&&t.mask[1])&&(F+=5*u,U+=u));for(var y=1;y<Q;y++)if(!t.skipInnerFaces||!t.mask||!t.mask[y]){var S=Q-1===y;F+=10*u+(I?10:0),U+=2*u+(I?2:0),(!t.skipInnerFaces||t.mask&&t.mask[y-1])&&(F+=5*u,U+=u),(S||!t.skipInnerFaces||t.mask&&t.mask[y+1])&&(F+=5*u,U+=u)}}else F=2*(u+1)+5*u+(Q-1)*u*20+(I?10*Q:0),U=2+u+4*(Q-1)*u+(I?2*Q:0);var h=0,Z=new window[t.pointType](3*C),x=0,p=new Uint32Array(F),G=0,R=new Float32Array(U);Z[3*h+0]=0,Z[3*h+1]=0,Z[3*h+2]=c,Z[3*++h+0]=0,Z[3*h+1]=0,Z[3*h+2]=-c,h++;for(var L=0;L<Q;L++){for(var V=t.radius[L],A=0;A<u;A++){var f=g+A*m;Z[3*h+0]=V*Math.cos(f),Z[3*h+1]=V*Math.sin(f),Z[3*h+2]=c,h++}for(var N=0;N<u;N++){var E=g+N*m;Z[3*h+0]=V*Math.cos(E),Z[3*h+1]=V*Math.sin(E),Z[3*h+2]=-c,h++}}var D=t.cellFields[0];if(!t.mask||!t.mask[0]){R[G++]=D,p[x++]=u+(I?1:0),I&&(p[x++]=0);for(var v=0;v<u;v++)p[x++]=v+2;R[G++]=D,p[x++]=u+(I?1:0),I&&(p[x++]=1);for(var J=0;J<u;J++)p[x++]=2*u-J-1+2;if(!t.skipInnerFaces||t.mask&&t.mask[1]||1===Q)for(var W=0;W<t.resolution;W++)p[x++]=4,p[x++]=(W+1)%u+2,p[x++]=W+2,p[x++]=W+u+2,p[x++]=(W+1)%u+u+2,R[G++]=D;I&&(p[x++]=4,p[x++]=2,p[x++]=0,p[x++]=1,p[x++]=u+2,R[G++]=D,p[x++]=4,p[x++]=0,p[x++]=u+1,p[x++]=2*u+1,p[x++]=1,R[G++]=D)}for(var X=1;X<Q;X++)if(!t.mask||!t.mask[X]){var H=2*u*(X-1)+2,T=H+2*u,k=Q-1===X;D=t.cellFields[X];for(var M=0;M<t.resolution;M++)p[x++]=4,p[x++]=M+H,p[x++]=(M+1)%u+H,p[x++]=(M+1)%u+T,p[x++]=M+T,R[G++]=D;for(var w=0;w<t.resolution;w++)p[x++]=4,p[x++]=(w+1)%u+H+u,p[x++]=w+H+u,p[x++]=w+T+u,p[x++]=(w+1)%u+T+u,R[G++]=D;if(!t.skipInnerFaces||t.mask&&t.mask[X-1])for(var Y=0;Y<t.resolution;Y++)p[x++]=4,p[x++]=Y+H,p[x++]=(Y+1)%u+H,p[x++]=(Y+1)%u+u+H,p[x++]=Y+u+H,R[G++]=D;if(!t.skipInnerFaces||k||t.mask&&(t.mask[X+1]||k))for(var O=0;O<t.resolution;O++)p[x++]=4,p[x++]=(O+1)%u+T,p[x++]=O+T,p[x++]=O+u+T,p[x++]=(O+1)%u+u+T,R[G++]=D;I&&(p[x++]=4,p[x++]=T,p[x++]=H,p[x++]=u+H,p[x++]=u+T,R[G++]=D,p[x++]=4,p[x++]=t.resolution+T,p[x++]=t.resolution+H,p[x++]=t.resolution+u+H,p[x++]=t.resolution+u+T,R[G++]=D)}(l=i.a.buildFromRadian()).translate.apply(l,Object(r.a)(t.center)).rotateFromDirections([0,0,1],t.direction).apply(Z),(B=o.a.newInstance()).getPoints().setData(Z,3),B.getPolys().setData(p,1),B.getCellData().setScalars(s.a.newInstance({name:"layer",values:R})),a[0]=B}}}var B={height:1,radius:[.5],cellFields:[1],resolution:6,startTheta:0,endTheta:360,center:[0,0,0],direction:[0,0,1],skipInnerFaces:!0,mask:null,pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,B,n),a.c.obj(e,t),a.c.setGet(e,t,["height","resolution","startTheta","endTheta","skipInnerFaces"]),a.c.setGetArray(e,t,["center","direction"],3),a.c.getArray(e,t,["cellFields"]),a.c.algo(e,t,0,1),l(e,t)}),"vtkConcentricCylinderSource");function Q(e,t){t.classHierarchy.push("vtkConeSource"),e.requestData=function(e,n){var a;if(!t.deleted){var s=n[0],l=2*Math.PI/t.resolution,B=-t.height/2,Q=t.resolution+1,c=4*t.resolution+1+t.resolution,F=0,U=new window[t.pointType](3*Q),g=0,d=new Uint32Array(c);U[0]=t.height/2,U[1]=0,U[2]=0,t.capping&&(d[g++]=t.resolution);for(var u=0;u<t.resolution;u++)U[3*++F+0]=B,U[3*F+1]=t.radius*Math.cos(u*l),U[3*F+2]=t.radius*Math.sin(u*l),t.capping&&(d[t.resolution-g+++1]=F);for(var I=0;I<t.resolution;I++)d[g++]=3,d[g++]=0,d[g++]=I+1,d[g++]=I+2>t.resolution?1:I+2;(a=i.a.buildFromRadian()).translate.apply(a,Object(r.a)(t.center)).rotateFromDirections([1,0,0],t.direction).apply(U),(s=o.a.newInstance()).getPoints().setData(U,3),s.getPolys().setData(d,1),n[0]=s}}}var c={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c,n),a.c.obj(e,t),a.c.setGet(e,t,["height","radius","resolution","capping"]),a.c.setGetArray(e,t,["center","direction"],3),a.c.algo(e,t,0,1),Q(e,t)}),"vtkConeSource");function F(e,t){t.classHierarchy.push("vtkCubeSource"),e.setBounds=function(){var e=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))e=arguments.length<=0?void 0:arguments[0];else for(var n=0;n<arguments.length;n++)e.push(n<0||arguments.length<=n?void 0:arguments[n]);6===e.length&&(t.xLength=e[1]-e[0],t.yLength=e[3]-e[2],t.zLength=e[5]-e[4],t.center=[(e[0]+e[1])/2,(e[2]+e[3])/2,(e[4]+e[5])/2])},e.requestData=function(e,n){var a;if(!t.deleted){var l=o.a.newInstance();n[0]=l;var B=new window[t.pointType](72);l.getPoints().setData(B,3);var Q=new window[t.pointType](72),c=s.a.newInstance({name:"Normals",values:Q,numberOfComponents:3});l.getPointData().setNormals(c);var F=2;!0===t.generate3DTextureCoordinates&&(F=3);var U=new window[t.pointType](24*F),g=s.a.newInstance({name:"TextureCoordinates",values:U,numberOfComponents:F});l.getPointData().setTCoords(g);var d=[0,0,0],u=[0,0,0],I=[0,0],m=0;d[0]=-t.xLength/2,u[0]=-1,u[1]=0,u[2]=0;for(var C=0;C<2;C++){d[1]=-t.yLength/2;for(var b=0;b<2;b++){I[1]=d[1]+.5,d[2]=-t.zLength/2;for(var y=0;y<2;y++)I[0]=(d[2]+.5)*(1-2*C),B[3*m]=d[0],B[3*m+1]=d[1],B[3*m+2]=d[2],Q[3*m]=u[0],Q[3*m+1]=u[1],Q[3*m+2]=u[2],2===F?(U[m*F]=I[0],U[m*F+1]=I[1]):(U[m*F]=2*C-1,U[m*F+1]=2*b-1,U[m*F+2]=2*y-1),m++,d[2]+=t.zLength;d[1]+=t.yLength}d[0]+=t.xLength,u[0]+=2}d[1]=-t.yLength/2,u[1]=-1,u[0]=0,u[2]=0;for(var S=0;S<2;S++){d[0]=-t.xLength/2;for(var h=0;h<2;h++){I[0]=(d[0]+.5)*(2*S-1),d[2]=-t.zLength/2;for(var Z=0;Z<2;Z++)I[1]=-1*(d[2]+.5),B[3*m]=d[0],B[3*m+1]=d[1],B[3*m+2]=d[2],Q[3*m]=u[0],Q[3*m+1]=u[1],Q[3*m+2]=u[2],2===F?(U[m*F]=I[0],U[m*F+1]=I[1]):(U[m*F]=2*h-1,U[m*F+1]=2*S-1,U[m*F+2]=2*Z-1),m++,d[2]+=t.zLength;d[0]+=t.xLength}d[1]+=t.yLength,u[1]+=2}d[2]=-t.zLength/2,u[2]=-1,u[0]=0,u[1]=0;for(var x=0;x<2;x++){d[1]=-t.yLength/2;for(var p=0;p<2;p++){I[1]=d[1]+.5,d[0]=-t.xLength/2;for(var G=0;G<2;G++)I[0]=(d[0]+.5)*(2*x-1),B[3*m]=d[0],B[3*m+1]=d[1],B[3*m+2]=d[2],Q[3*m]=u[0],Q[3*m+1]=u[1],Q[3*m+2]=u[2],2===F?(U[m*F]=I[0],U[m*F+1]=I[1]):(U[m*F]=2*G-1,U[m*F+1]=2*p-1,U[m*F+2]=2*x-1),m++,d[0]+=t.xLength;d[1]+=t.yLength}d[2]+=t.zLength,u[2]+=2}i.a.buildFromDegree().rotateX(t.rotations[0]).rotateY(t.rotations[1]).rotateZ(t.rotations[2]).apply(B).apply(Q),(a=i.a.buildFromRadian()).translate.apply(a,Object(r.a)(t.center)).apply(B);var R=new window[t.pointType](30);l.getPolys().setData(R,1);var L=0;R[L++]=4,R[L++]=0,R[L++]=1,R[L++]=3,R[L++]=2,R[L++]=4,R[L++]=4,R[L++]=6,R[L++]=7,R[L++]=5,R[L++]=4,R[L++]=8,R[L++]=10,R[L++]=11,R[L++]=9,R[L++]=4,R[L++]=12,R[L++]=13,R[L++]=15,R[L++]=14,R[L++]=4,R[L++]=16,R[L++]=18,R[L++]=19,R[L++]=17,R[L++]=4,R[L++]=20,R[L++]=21,R[L++]=23,R[29]=22}}}var U={xLength:1,yLength:1,zLength:1,center:[0,0,0],rotations:[0,0,0],pointType:"Float32Array",generate3DTextureCoordinates:!1};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,U,n),a.c.obj(e,t),a.c.setGet(e,t,["xLength","yLength","zLength","generate3DTextureCoordinates"]),a.c.setGetArray(e,t,["center","rotations"],3),a.c.algo(e,t,0,1),F(e,t)}),"vtkCubeSource");function g(e,t){t.classHierarchy.push("vtkCylinderSource"),e.requestData=function(e,n){var a,l;if(!t.deleted){var B=n[0],Q=2*Math.PI/t.resolution,c=2*t.resolution,F=5*t.resolution;t.capping&&(c=4*t.resolution,F=7*t.resolution+2);for(var U=new window[t.pointType](3*c),g=0,d=new Uint32Array(F),u=new Float32Array(3*c),I=s.a.newInstance({numberOfComponents:3,values:u,name:"Normals"}),m=new Float32Array(2*c),C=s.a.newInstance({numberOfComponents:2,values:m,name:"TCoords"}),b=[0,0,0],y=[0,0,0],S=[0,0,0],h=[0,0,0],Z=[0,0],x=[0,0],p=0;p<t.resolution;p++){b[0]=Math.cos(p*Q),y[0]=b[0],S[0]=t.radius*b[0]+t.center[0],h[0]=S[0],Z[0]=Math.abs(2*p/t.resolution-1),x[0]=Z[0],S[1]=.5*t.height+t.center[1],h[1]=-.5*t.height+t.center[1],Z[1]=0,x[1]=1,b[2]=-Math.sin(p*Q),y[2]=b[2],S[2]=t.radius*b[2]+t.center[2],h[2]=S[2];for(var G=2*p,R=0;R<3;R++)u[3*G+R]=b[R],u[3*(G+1)+R]=y[R],U[3*G+R]=S[R],U[3*(G+1)+R]=h[R],R<2&&(m[2*G+R]=Z[R],m[2*(G+1)+R]=x[R])}for(var L=0;L<t.resolution;L++){d[g++]=4,d[g++]=2*L,d[g++]=2*L+1;var V=(2*L+3)%(2*t.resolution);d[g++]=V,d[g++]=V-1}if(t.capping){for(var A=0;A<t.resolution;A++){S[0]=t.radius*Math.cos(A*Q),h[0]=S[0],Z[0]=S[0],x[0]=S[0],S[0]+=t.center[0],h[0]+=t.center[0],b[1]=1,y[1]=-1,S[1]=.5*t.height+t.center[1],h[1]=-.5*t.height+t.center[1],S[2]=-t.radius*Math.sin(A*Q),h[2]=S[2],Z[1]=S[2],x[1]=S[2],S[2]+=t.center[2],h[2]+=t.center[2];for(var f=2*t.resolution+A,N=3*t.resolution+t.resolution-A-1,E=0;E<3;E++)u[3*f+E]=b[E],u[3*N+E]=y[E],U[3*f+E]=S[E],U[3*N+E]=h[E],E<2&&(m[2*f+E]=Z[E],m[2*N+E]=x[E])}d[g++]=t.resolution;for(var D=0;D<t.resolution;D++)d[g++]=2*t.resolution+D;d[g++]=t.resolution;for(var v=0;v<t.resolution;v++)d[g++]=3*t.resolution+v}(a=(l=i.a.buildFromRadian()).translate.apply(l,Object(r.a)(t.center)).rotateFromDirections([0,1,0],t.direction)).translate.apply(a,Object(r.a)(t.center.map((function(e){return-1*e})))).apply(U),(B=o.a.newInstance()).getPoints().setData(U,3),B.getPolys().setData(d,1),B.getPointData().setNormals(I),B.getPointData().setTCoords(C),n[0]=B}}}var d={height:1,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d,n),a.c.obj(e,t),a.c.setGet(e,t,["height","radius","resolution","capping"]),a.c.setGetArray(e,t,["center","direction"],3),a.c.algo(e,t,0,1),g(e,t)}),"vtkCylinderSource");var u=n(2),I=a.c.vtkWarningMacro;function m(e,t){t.classHierarchy.push("vtkLineSource"),e.requestData=function(e,n){if(!t.deleted){var r=n[0],a=r?r.getPoints().getDataType():"Float32Array",s=o.a.newInstance(),i=new Float32Array(3);if(Object(u.t)(t.point2,t.point1,i),Object(u.A)(i)<=0)I("Zero-length line definition");else{var l=t.resolution,B=l+1,Q=new window[a](3*B);s.getPoints().setData(Q,3);var c=new Uint32Array(B+1);s.getLines().setData(c,1);for(var F=0,U=0,g=0;g<l+1;g++)U=g/l,Q[3*F]=t.point1[0]+U*i[0],Q[3*F+1]=t.point1[1]+U*i[1],Q[3*F+2]=t.point1[2]+U*i[2],F++;F=0,c[0]=B;for(var d=0;d<B;d++)c[d+1]=d;n[0]=s}}}}var C={resolution:10,point1:[-1,0,0],point2:[1,0,0],pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,C,n),a.c.obj(e,t),a.c.setGet(e,t,["resolution"]),a.c.setGetArray(e,t,["point1","point2"],3),a.c.algo(e,t,0,1),m(e,t)}),"vtkLineSource");var b=n(3),y=n(6),S=a.c.vtkWarningMacro;function h(e,t){t.classHierarchy.push("vtkPlaneSource"),e.requestData=function(n,r){if(!t.deleted){var a=r[0],i=a?a.getPoints().getDataType():"Float32Array",l=o.a.newInstance(),B=new Float32Array(3),Q=new Float32Array(3);if(Object(u.t)(t.point1,t.origin,B),Object(u.t)(t.point2,t.origin,Q),e.updatePlane(B,Q)){var c=t.xResolution,F=t.yResolution,U=(c+1)*(F+1),g=c*F,d=new window[i](3*U);l.getPoints().setData(d,3);var I=new Uint32Array(5*g);l.getPolys().setData(I,1);var m=new Float32Array(3*U),C=s.a.newInstance({numberOfComponents:3,values:m,name:"Normals"});l.getPointData().setNormals(C);var b=new Float32Array(2*U),y=s.a.newInstance({numberOfComponents:2,values:b,name:"TextureCoordinates"});l.getPointData().setTCoords(y);for(var h=new Float32Array(2),Z=0,x=0;x<F+1;x++){h[1]=x/F;for(var p=0;p<c+1;p++)h[0]=p/c,d[3*Z]=t.origin[0]+h[0]*B[0]+h[1]*Q[0],d[3*Z+1]=t.origin[1]+h[0]*B[1]+h[1]*Q[1],d[3*Z+2]=t.origin[2]+h[0]*B[2]+h[1]*Q[2],b[2*Z]=h[0],b[2*Z+1]=h[1],m[3*Z]=t.normal[0],m[3*Z+1]=t.normal[1],m[3*Z+2]=t.normal[2],Z++}Z=0;for(var G=0;G<F;G++)for(var R=0;R<c;R++)I[5*Z+0]=4,I[5*Z+1]=R+G*(c+1),I[5*Z+2]=I[5*Z+1]+1,I[5*Z+3]=I[5*Z+1]+c+2,I[5*Z+4]=I[5*Z+1]+c+1,Z++;r[0]=l}else S("Bad plane definition")}},e.setNormal=function(){var n=[];if(1===arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=Object(r.a)(arguments.length<=0?void 0:arguments[0]):3===arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),0!==Object(u.y)(n)){var a=Object(u.q)(t.normal,n),s=0,i=[];a<1&&(a<=-1?(s=Object(u.B)(180),Object(u.t)(t.point1,t.origin,i)):(Object(u.w)(t.normal,n,i),s=Math.acos(a)),e.rotate(s,i))}},e.rotate=function(n,r){if(!(Math.abs(n)<1e-6)){var a=Object(b.h)(new Float64Array(16)),s=[];Object(y.e)(s,t.center),Object(b.s)(a,a,t.center),Object(b.q)(a,a,n,r),Object(b.s)(a,a,s),Object(y.q)(t.origin,t.origin,a),Object(y.q)(t.point1,t.point1,a),Object(y.q)(t.point2,t.point2,a),i.a.buildFromRadian().rotate(n,r).apply(t.normal),e.modified()}},e.setCenter=function(){var n=[];if(1===arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=Object(r.a)(arguments.length<=0?void 0:arguments[0]):3===arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Object(y.f)(n,t.center)){var a=[];Object(u.t)(t.point1,t.origin,a);var s=[];Object(u.t)(t.point2,t.origin,s);for(var i=0;i<3;i++)t.center[i]=n[i],t.origin[i]=t.center[i]-.5*(a[i]+s[i]),t.point1[i]=t.origin[i]+a[i],t.point2[i]=t.origin[i]+s[i];e.modified()}},e.setPoint1=function(){var n=[];if(1===arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=Object(r.a)(arguments.length<=0?void 0:arguments[0]):3===arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Object(y.f)(n,t.point1)){var a=[],s=[];t.point1=Object(r.a)(n),Object(u.t)(t.point1,t.origin,a),Object(u.t)(t.point2,t.origin,s),e.updatePlane(a,s),e.modified()}},e.setPoint2=function(){var n=[];if(1===arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=Object(r.a)(arguments.length<=0?void 0:arguments[0]):3===arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Object(y.f)(n,t.point2)){var a=[],s=[];t.point2=Object(r.a)(n),Object(u.t)(t.point1,t.origin,a),Object(u.t)(t.point2,t.origin,s),e.updatePlane(a,s),e.modified()}},e.updatePlane=function(e,n){for(var r=0;r<3;r++)t.center[r]=t.origin[r]+.5*(e[r]+n[r]);return Object(u.w)(e,n,t.normal),0!==Object(u.y)(t.normal)}}var Z={xResolution:10,yResolution:10,origin:[0,0,0],point1:[1,0,0],point2:[0,1,0],pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Z,n),t.normal=[0,0,1],t.center=[0,0,0],a.c.obj(e,t),a.c.setGet(e,t,["xResolution","yResolution"]),a.c.setGetArray(e,t,["origin"],3),a.c.getArray(e,t,["point1","point2","normal","center"],3),a.c.algo(e,t,0,1),h(e,t),e.setPoint1(t.point1),e.setPoint2(t.point2)}),"vtkPlaneSource");function x(e,t){t.classHierarchy.push("vtkPointSource"),e.requestData=function(e,n){if(!t.deleted){var r=n[0],a=r?r.getPoints().getDataType():"Float32Array",s=o.a.newInstance(),i=t.numberOfPoints,l=new window[a](3*i);s.getPoints().setData(l,3);var B,Q,c,F,U,g=new Uint32Array(i+1);s.getVerts().setData(g,1);for(var d=0;d<i;d++)B=1-2*Object(u.E)(),Q=Math.sqrt(1-B*B),F=(c=t.radius*Math.pow(Object(u.E)(),.33333333))*Q,U=2*Math.PI*Object(u.E)(),l[3*d]=t.center[0]+F*Math.cos(U),l[3*d+1]=t.center[1]+F*Math.sin(U),l[3*d+2]=t.center[2]+c*B;g[0]=i;for(var I=0;I<i;I++)g[I+1]=I;n[0]=s}}}var p={numberOfPoints:10,center:[0,0,0],radius:.5,pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,p,n),a.c.obj(e,t),a.c.setGet(e,t,["numberOfPoints","radius"]),a.c.setGetArray(e,t,["center"],3),a.c.algo(e,t,0,1),x(e,t)}),"vtkPointSource");function G(e,t){t.classHierarchy.push("vtkSphereSource"),e.requestData=function(e,n){if(!t.deleted){var r=n[0],a=r?r.getPoints().getDataType():"Float32Array";r=o.a.newInstance();var i=0,l=t.thetaResolution,B=t.startTheta<t.endTheta?t.startTheta:t.endTheta;B*=Math.PI/180;var Q=t.endTheta>t.startTheta?t.endTheta:t.startTheta;Q*=Math.PI/180;var c=t.startPhi<t.endPhi?t.startPhi:t.endPhi;c*=Math.PI/180;var F=t.endPhi>t.startPhi?t.endPhi:t.startPhi;F*=Math.PI/180,Math.abs(B-Q)<2*Math.PI&&++l;var U=(Q-B)/t.thetaResolution,g=t.startPhi<=0?1:0,d=t.phiResolution+(t.endPhi>=180?-1:0),u=t.phiResolution*l+2,I=2*t.phiResolution*t.thetaResolution,m=0,C=new window[a](3*u),b=new Float32Array(3*u),y=0,S=new Uint32Array(5*I);t.startPhi<=0&&(C[3*m+0]=t.center[0],C[3*m+1]=t.center[1],C[3*m+2]=t.center[2]+t.radius,b[3*m+0]=0,b[3*m+1]=0,b[3*m+2]=1,m++,i++),t.endPhi>=180&&(C[3*m+0]=t.center[0],C[3*m+1]=t.center[1],C[3*m+2]=t.center[2]-t.radius,b[3*m+0]=0,b[3*m+1]=0,b[3*m+2]=-1,m++,i++);for(var h=t.phiResolution-i,Z=(F-c)/(t.phiResolution-1),x=0;x<l;x++)for(var p=B+x*U,G=g;G<d;G++){var R=c+G*Z,L=t.radius*Math.sin(R);b[3*m+0]=L*Math.cos(p),b[3*m+1]=L*Math.sin(p),b[3*m+2]=t.radius*Math.cos(R),C[3*m+0]=b[3*m+0]+t.center[0],C[3*m+1]=b[3*m+1]+t.center[1],C[3*m+2]=b[3*m+2]+t.center[2];var V=Math.sqrt(b[3*m+0]*b[3*m+0]+b[3*m+1]*b[3*m+1]+b[3*m+2]*b[3*m+2]);V=0===V?1:V,b[3*m+0]/=V,b[3*m+1]/=V,b[3*m+2]/=V,m++}var A=h*l;if(Math.abs(B-Q)<2*Math.PI&&--l,t.startPhi<=0)for(var f=0;f<l;f++)S[y++]=3,S[y++]=h*f+i,S[y++]=h*(f+1)%A+i,S[y++]=0;if(t.endPhi>=180)for(var N=h-1+i,E=0;E<l;E++)S[y++]=3,S[y++]=h*E+N,S[y++]=i-1,S[y++]=h*(E+1)%A+N;for(var D=0;D<l;D++)for(var v=0;v<h-1;v++){var J=h*D+v+i,W=J+1,X=(h*(D+1)+v)%A+i+1;t.latLongTessellation?(S[y++]=4,S[y++]=J,S[y++]=W,S[y++]=X,S[y++]=X-1):(S[y++]=3,S[y++]=J,S[y++]=W,S[y++]=X,S[y++]=3,S[y++]=J,S[y++]=X,S[y++]=X-1)}C=C.subarray(0,3*m),r.getPoints().setData(C,3),b=b.subarray(0,3*m);var H=s.a.newInstance({name:"Normals",values:b,numberOfComponents:3});r.getPointData().setNormals(H),S=S.subarray(0,y),r.getPolys().setData(S,1),n[0]=r}}}var R={radius:.5,latLongTessellation:!1,thetaResolution:8,startTheta:0,endTheta:360,phiResolution:8,startPhi:0,endPhi:180,center:[0,0,0],pointType:"Float32Array"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,R,n),a.c.obj(e,t),a.c.setGet(e,t,["radius","latLongTessellation","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"]),a.c.setGetArray(e,t,["center"],3),a.c.algo(e,t,0,1),G(e,t)}),"vtkSphereSource");var L=n(22),V=n(29),A=a.c.vtkDebugMacro,f=a.c.vtkErrorMacro;function N(e,t){t.classHierarchy.push("vtkWarpScalar"),e.requestData=function(n,r){var a=n[0];if(!a)return f("Invalid or missing input"),1;var s=a.getPoints(),i=a.getPointData().getNormals(),o=e.getInputArrayToProcess(0);if(!s||!o)return A("No data to warp",!!s,!!o),r[0]=n[0],1;var l=s.getNumberOfPoints(),B=null,Q=[0,0,1];i&&!t.useNormal?(B=function(e,t){return[t.getData()[3*e],t.getData()[3*e+1],t.getData()[3*e+2]]},A("Using data normals")):e.getXyPlane()?(B=function(e,t){return Q},A("Using x-y plane normal")):(B=function(e,n){return t.normal},A("Using Normal instance variable"));for(var c=new Float32Array(3*l),F=s.getData(),U=0,g=[0,0,1],d=1,u=o.getData(),I=o.getNumberOfComponents(),m=0;m<l;++m)U=3*m,g=B(m,i),d=t.xyPlane?F[U+2]:u[m*I],c[U]=F[U]+t.scaleFactor*d*g[0],c[U+1]=F[U+1]+t.scaleFactor*d*g[1],c[U+2]=F[U+2]+t.scaleFactor*d*g[2];var C=Object(L.a)({vtkClass:a.getClassName()});C.shallowCopy(a);var b=V.a.newInstance();return b.setData(c,3),C.setPoints(b),r[0]=C,1}}var E={scaleFactor:1,useNormal:!1,normal:[0,0,1],xyPlane:!1};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,E,n),a.c.obj(e,t),a.c.algo(e,t,1,1),a.c.setGet(e,t,["scaleFactor","useNormal","xyPlane"]),a.c.setGetArray(e,t,["normal"],3),N(e,t)}),"vtkWarpScalar");var D=n(17),v=n(40),J=n(32),W={VaryRadius:{VARY_RADIUS_OFF:0,VARY_RADIUS_BY_SCALAR:1,VARY_RADIUS_BY_VECTOR:2,VARY_RADIUS_BY_ABSOLUTE_SCALAR:3},GenerateTCoords:{TCOORDS_OFF:0,TCOORDS_FROM_NORMALIZED_LENGTH:1,TCOORDS_FROM_LENGTH:2,TCOORDS_FROM_SCALARS:3}},X=W.VaryRadius,H=W.GenerateTCoords,T=a.c.vtkDebugMacro,k=a.c.vtkErrorMacro,M=a.c.vtkWarningMacro;function w(e,t){function n(e,n){var r=e;return t.sidesShareVertices?r+=t.numberOfSides*n:r+=2*t.numberOfSides*n,t.capping&&(r+=2*t.numberOfSides),r}function r(e,t,n){for(var r=t[n],a=e.slice(3*r,3*(r+1)),s=n+1;s<t.length;){var i=t[s];if(a!==e.slice(3*i,3*(i+1)))return s-1;++s}return t.length}function a(e,t,n){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=[0,0,1],i=t,o=i[0],l=0;l<i.length;l+=o+1)if(1===(o=i[l]))n.setTuple(i[l+1],s);else if(o>1){var B=0,Q=[0,0,0],c=[0,0,0],F=i.slice(l+1,l+1+o);if((B=r(e,F,0))!==o)!function(){var t=F[B],i=e.slice(3*t,3*(t+1)),l=F[B+1],U=e.slice(3*l,3*(l+1));if(Q=U.map((function(e,t){return e-i[t]})),Object(u.y)(Q),a)s=a;else{for(;++B<o;)if((B=r(e,F,B))!==o){t=F[B],i=e.slice(3*t,3*(t+1)),l=F[B+1],U=e.slice(3*l,3*(l+1));for(var g=0;g<3;++g)c[g]=U[g]-i[g];Object(u.y)(c);var d=[0,0,0];if(Object(u.w)(Q,c,d),Object(u.A)(d)>.001){s=d,Q=c;break}}if(B>=o)for(var I=0;I<3;++I)if(0!==Q[I]){s[(I+2)%3]=0,s[(I+1)%3]=1,s[I]=-Q[(I+1)%3]/Q[I];break}}Object(u.y)(s);for(var m=0;++B<o&&(B=r(e,F,B))!==o;){t=F[B],i=e.slice(3*t,3*(t+1)),l=F[B+1],U=e.slice(3*l,3*(l+1));for(var C=0;C<3;++C)c[C]=U[C]-i[C];Object(u.y)(c);var b=[0,0,0];if(Object(u.w)(Q,s,b),0!==Object(u.y)(b)){var y=[0,0,0];if(Object(u.w)(c,Q,y),0!==Object(u.y)(y)){var S=Object(u.q)(y,s),h=1-S*S;h=h>0?Math.sqrt(h):0;for(var Z=[0,0,0],x=0;x<3;++x)Z[x]=c[x]+Q[x];Object(u.y)(Z),Object(u.w)(Z,y,b),Object(u.w)(Q,y,Z),Object(u.q)(s,Z)*Object(u.q)(b,Z)<0&&(h*=-1);for(var p=m;p<B;++p)n.setTuple(F[p],s);m=B,Q=c,s=S*y+h*b}}}for(var G=m;G<o;++G)n.setTuple(F[G],s)}();else for(var U=0;U<o;++U)n.setTuple(F[U],s)}return 1}function i(e,n,r,a,s,i,o,l,B,Q,c,F,U,g){for(var d=[0,0,0],I=[0,0,0],m=[0,0,0],C=[0,0,0],b=[0,0,0],y=[0,0,0],S=[0,0,0],h=[0,0,0],Z=[0,0,0],x=[0,0,0],p=[0,0,0],G=1,R=e,L=0;L<n;++L){if(0===L){b=a.slice(3*r[0],3*(r[0]+1)),y=a.slice(3*r[1],3*(r[1]+1));for(var V=0;V<3;++V)d[V]=y[V]-b[V],I[V]=d[V],m[V]=-I[V];Object(u.y)(m)}else if(L===n-1){for(var A=0;A<3;++A)I[A]=d[A],b[A]=y[A],C[A]=d[A];Object(u.y)(C)}else{for(var f=0;f<3;++f)b[f]=y[f];y=a.slice(3*r[L+1],3*(r[L+1]+1));for(var N=0;N<3;++N)I[N]=d[N],d[N]=y[N]-b[N]}if(0===Object(u.y)(d))return M("Coincident points!"),0;for(var E=0;E<3;++E)S[E]=(I[E]+d[E])/2;if(h=U.slice(3*r[L],3*(r[L]+1)),0===Object(u.y)(S)&&(Object(u.w)(I,h,S),0===Object(u.y)(S)&&T("Using alternate bevel vector")),Object(u.w)(S,h,Z),0===Object(u.y)(Z)){var D="Bad normal: s = ";return D+="".concat(S[0],",  ").concat(S[1],", ").concat(S[2]),D+=" n = ".concat(h[0],",  ").concat(h[1],", ").concat(h[2]),M(D),0}if(Object(u.w)(Z,S,x),Object(u.y)(x),B&&t.varyRadius===X.VARY_RADIUS_BY_SCALAR)G=1+(t.radiusFactor-1)*(B.getComponent(r[L],0)-Q[0])/(Q[1]-Q[0]);else if(c&&t.varyRadius===X.VARY_RADIUS_BY_VECTOR)(G=Math.sqrt(F/Object(u.A)(c.getTuple(r[L]))))>t.radiusFactor&&(G=t.radiusFactor);else if(B&&t.varyRadius===X.VARY_RADIUS_BY_ABSOLUTE_SCALAR&&(G=B.getComponent(r[L],0))<0)return M("Scalar value less than zero, skipping line"),0;if(t.sidesShareVertices)for(var v=0;v<t.numberOfSides;++v){for(var J=0;J<3;++J)p[J]=Z[J]*Math.cos(v*g)+x[J]*Math.sin(v*g),S[J]=b[J]+t.radius*G*p[J],s[3*R+J]=S[J],l[3*R+J]=p[J];o.passData(i,r[L],R),R++}else for(var W=[0,0,0],H=[0,0,0],k=0;k<t.numberOfSides;++k){for(var w=0;w<3;++w)p[w]=Z[w]*Math.cos(k*g)+x[w]*Math.sin(k*g),W[w]=Z[w]*Math.cos((k-.5)*g)+x[w]*Math.sin((k-.5)*g),H[w]=Z[w]*Math.cos((k+.5)*g)+x[w]*Math.sin((k+.5)*g),S[w]=b[w]+t.radius*G*p[w],s[3*R+w]=S[w],l[3*R+w]=W[w],s[3*(R+1)+w]=S[w],l[3*(R+1)+w]=H[w];o.passData(i,r[L],R+1),R+=2}}if(t.capping){var Y=t.numberOfSides,O=1;t.sidesShareVertices||(Y=2*t.numberOfSides,O=2);for(var z=0;z<Y;z+=O){S=s.slice(3*(e+z),3*(e+z+1));for(var P=0;P<3;++P)s[3*R+P]=S[P],l[3*R+P]=m[P];o.passData(i,r[0],R),R++}var K=e+(n-1)*t.numberOfSides;t.sidesShareVertices||(K=e+2*(n-1)*t.numberOfSides);for(var j=0;j<Y;j+=O){S=s.slice(3*(K+j),3*(K+j+1));for(var _=0;_<3;++_)s[3*R+_]=S[_],l[3*R+_]=C[_];o.passData(i,r[n-1],R),R++}}return 1}function l(e,n,r,a,s,i,o){for(var l=0,B=0,Q=0,c=a,F=0,U=o.getData(),g=0;F<U.length&&g!==a;)F+=U[F]+1,g++;if(t.sidesShareVertices)for(var d=e;d<t.numberOfSides+e;d+=t.onRatio){l=d%t.numberOfSides,B=(d+1)%t.numberOfSides,U[F++]=2*n;for(var u=0;u<n;++u)Q=u*t.numberOfSides,U[F++]=e+B+Q,U[F++]=e+l+Q;i.passData(s,r,c++)}else for(var I=e;I<t.numberOfSides+e;I+=t.onRatio){l=I%t.numberOfSides*2+1,B=(I+1)%t.numberOfSides*2,U[F]=2*n,F++;for(var m=0;m<n;++m)Q=2*m*t.numberOfSides,U[F++]=e+B+Q,U[F++]=e+l+Q;i.passData(s,r,c++)}if(t.capping){var C=e+n*t.numberOfSides,b=0;t.sidesShareVertices||(C=e+2*n*t.numberOfSides),U[F++]=t.numberOfSides,U[F++]=C,U[F++]=C+1;var y=0;for(l=t.numberOfSides-1,B=2,y=0;y<t.numberOfSides-2;++y)y%2?(b=C+B,U[F++]=b,B++):(b=C+l,U[F++]=b,l--);for(i.passData(s,r,c++),C+=t.numberOfSides,U[F++]=t.numberOfSides,U[F++]=C,U[F++]=C+t.numberOfSides-1,l=t.numberOfSides-2,B=1,y=0;y<t.numberOfSides-2;++y)y%2?(b=C+l,U[F++]=b,l--):(b=C+B,U[F++]=b,B++);i.passData(s,r,c++)}return c}function B(e,n,r,a,s,i){var o=t.numberOfSides;t.sidesShareVertices||(o=2*t.numberOfSides);var l=0,B=0,Q=s.getData();if(t.generateTCoords===H.TCOORDS_FROM_SCALARS){B=Q[r[0]];for(var c=0;c<n;++c){l=(Q[r[c]]-B)/t.textureLength;for(var F=0;F<o;++F){var U=F/(o-1),g=2*(e+c*o+F);i[g]=l,i[g+1]=U}}}else if(t.generateTCoords===H.TCOORDS_FROM_LENGTH)for(var d=0,I=a.slice(3*r[0],3*(r[0]+1)),m=0;m<n;++m){var C=a.slice(3*r[m],3*(r[m]+1));l=(d+=Math.sqrt(Object(u.s)(C,I)))/t.textureLength;for(var b=0;b<o;++b){var y=b/(o-1),S=2*(e+m*o+b);i[S]=l,i[S+1]=y}for(var h=0;h<3;++h)I[h]=C[h]}else if(t.generateTCoords===H.TCOORDS_FROM_NORMALIZED_LENGTH){for(var Z=0,x=0,p=a.slice(3*r[0],3*(r[0]+1)),G=0;G<n;++G){var R=a.slice(3*r[G],3*(r[G]+1));x+=Math.sqrt(Object(u.s)(R,p));for(var L=0;L<3;++L)p[L]=R[L]}p=a.slice(3*r[0],3*(r[0]+1));for(var V=0;V<n;++V){var A=a.slice(3*r[V],3*(r[V]+1));l=(Z+=Math.sqrt(Object(u.s)(A,p)))/x;for(var f=0;f<o;++f){var N=f/(o-1),E=2*(e+V*o+f);i[E]=l,i[E+1]=N}for(var D=0;D<3;++D)p[D]=A[D]}}if(t.capping){for(var v=e+n*o,J=0;J<t.numberOfSides;++J){var W=2*(v+J);i[W]=0,i[W+1]=0}for(var X=0;X<t.numberOfSides;++X){var T=2*(v+t.numberOfSides+X);i[T]=0,i[T+1]=0}}}t.classHierarchy.push("vtkTubeFilter"),e.requestData=function(r,Q){var c=o.a.newInstance();Q[0]=c;var F=r[0];if(F){var U=F.getPoints();if(U){var g=U.getNumberOfPoints();if(!(g<1)){var d=F.getLines();if(d){var u=d.getNumberOfCells();if(!(u<1)){var I=g*t.numberOfSides;t.capping&&(I=(g+2*u)*t.numberOfSides);var m=U.getDataType();t.outputPointsPrecision===J.b.SINGLE?m=D.b.FLOAT:t.outputPointsPrecision===J.b.DOUBLE&&(m=D.b.DOUBLE);var C=V.a.newInstance({dataType:m,size:3*I,numberOfComponents:3}),b=3*I;t.capping&&(b=3*(I+2*t.numberOfSides));for(var y=new Float32Array(b),S=s.a.newInstance({numberOfComponents:3,values:y,name:"TubeNormals"}),h=0,Z=d.getData(),x=Z[0],p=0;p<Z.length;p+=x+1)h+=(2*(x=Z[p])+1)*Math.ceil(t.numberOfSides/t.onRatio),t.capping&&(h+=2*(t.numberOfSides+1));var G=new Uint32Array(h),R=v.a.newInstance({values:G}),L=0,A=F.getPointData().getNormals(),f=null,N=!1;A&&!t.useDefaultNormal||(f=new Float32Array(3*g),A=s.a.newInstance({numberOfComponents:3,values:f,name:"Normals"}),t.useDefaultNormal?f=f.map((function(e,n){var r=n%3;return t.defaultNormal[r]})):N=!0);for(var E=F.getPointData().getNumberOfArrays(),W=null,T=null,w=0;w<E;w++)W=F.getPointData().getArrayByIndex(w),T=s.a.newInstance({name:W.getName(),dataType:W.getDataType(),numberOfComponents:W.getNumberOfComponents(),size:I*W.getNumberOfComponents()}),c.getPointData().removeArrayByIndex(0),c.getPointData().addArray(T);var Y=d.getNumberOfCells()*t.numberOfSides;t.capping&&(Y+=2);for(var O=F.getCellData().getNumberOfArrays(),z=0;z<O;z++)W=F.getCellData().getArrayByIndex(z),T=s.a.newInstance({name:W.getName(),dataType:W.getDataType(),numberOfComponents:W.getNumberOfComponents(),size:Y*W.getNumberOfComponents()}),c.getCellData().removeArrayByIndex(0),c.getCellData().addArray(T);var P=e.getInputArrayToProcess(0),K=null,j=[];P&&(K=s.a.newInstance({name:P.getName(),dataType:P.getDataType(),numberOfComponents:P.getNumberOfComponents(),size:I*P.getNumberOfComponents()}),(j=P.getRange())[1]-j[0]==0&&(t.varyRadius===X.VARY_RADIUS_BY_SCALAR&&M("Scalar range is zero!"),j[1]=j[0]+1));var _=e.getInputArrayToProcess(1),q=0;_&&(q=_.getMaxNorm());var $=c.getCellData();$.copyNormalsOff(),$.passData(F.getCellData());var ee=c.getPointData();null!==ee.getNormals()&&ee.copyNormalsOff(),P&&K&&ee.setScalars(K);var te=null;if(t.generateTCoords===H.TCOORDS_FROM_SCALARS&&P||t.generateTCoords===H.TCOORDS_FROM_LENGTH||t.generateTCoords===H.TCOORDS_FROM_NORMALIZED_LENGTH){var ne=new Float32Array(2*I);te=s.a.newInstance({numberOfComponents:2,values:ne,name:"TCoords"}),ee.copyTCoordsOff()}ee.passData(F.getPointData());var re=2*Math.PI/t.numberOfSides;x=Z[0];for(var ae=0,se=F.getVerts().getNumberOfCells(),ie=0;ie<Z.length;ie+=x+1){x=Z[ie];var oe=Z.slice(ie+1,ie+1+x);if(x>1&&N){var le=Z.slice(ie,ie+x+1);a(U.getData(),le,A)}i(ae,x,oe,U.getData(),C.getData(),F.getPointData(),ee,y,P,j,_,q,f,re)?(L=l(ae,x,se,L,F.getCellData(),$,R),te&&B(ae,x,oe,U.getData(),P,te.getData())):M("Could not generate points"),ae=n(ae,x),se++}c.setPoints(C),c.setStrips(R),c.setPointData(ee),ee.setNormals(S),Q[0]=c}}}}}else k("Invalid or missing input")}}var Y={outputPointsPrecision:J.b.DEFAULT,radius:.5,varyRadius:X.VARY_RADIUS_OFF,numberOfSides:3,radiusFactor:10,defaultNormal:[0,0,1],useDefaultNormal:!1,sidesShareVertices:!0,capping:!1,onRatio:1,offset:0,generateTCoords:H.TCOORDS_OFF,textureLength:1};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Y,n),a.c.setGet(e,t,["outputPointsPrecision","radius","varyRadius","numberOfSides","radiusFactor","defaultNormal","useDefaultNormal","sidesShareVertices","capping","onRatio","offset","generateTCoords","textureLength"]),a.c.obj(e,t),a.c.algo(e,t,1,1),w(e,t)}),"vtkTubeFilter");var O=n(37),z=n(28),P={diffuse_red:"red",diffuse_green:"green",diffuse_blue:"blue"},K={patternHeader:/ply([\s\S]*)end_header\r?\n/,patternBody:/end_header\s([\s\S]*)$/};function j(e){var t="",n=0,r=K.patternHeader.exec(e);null!==r&&(t=r[1],n=r[0].length);for(var a,s,i,o={comments:[],elements:[],headerLength:n},l=t.split("\n"),B=0;B<l.length;B++){var Q=l[B];if(""!==(Q=Q.trim())){var c=void 0;switch(s=(i=Q.split(/\s+/)).shift(),Q=i.join(" "),s){case"format":o.format=i[0],o.version=i[1];break;case"comment":o.comments.push(Q);break;case"element":void 0!==a&&o.elements.push(a),(a={}).name=i[0],a.count=parseInt(i[1],10),a.properties=[];break;case"property":"list"===(c={type:i[0]}).type?(c.name=i[3],c.countType=i[1],c.itemType=i[2]):c.name=i[1],c.name in P&&(c.name=P[c.name]),a.properties.push(c);break;case"obj_info":o.objInfo=Q;break;default:console.warn("unhandled",s,i)}}}return void 0!==a&&o.elements.push(a),o}function _(e,t){var n=t.find((function(e){return"vertex"===e.name})),r=t.find((function(e){return"face"===e.name})),a=0,i=0;n&&(a=n.count),r&&(i=r.count);for(var l=new Float32Array(3*a),B=new Uint8Array(3*a),Q=new Float32Array(2*a),c=new Float32Array(3*a),F=e.colors.length>0,U=e.uvs.length>0,g=e.normals.length>0,d=e.faceVertexUvs.length>0,u=0;u<a;u++){var I=3*u+0,m=3*u+1,C=3*u+2;l[I]=e.vertices[I],l[m]=e.vertices[m],l[C]=e.vertices[C],F&&(B[I]=e.colors[I],B[m]=e.colors[m],B[C]=e.colors[C]),U&&(m=2*u+1,Q[I=2*u+0]=e.uvs[I],Q[m]=e.uvs[m]),g&&(c[I]=e.normals[I],c[m]=e.normals[m],c[C]=e.normals[C])}if(!U&&d)for(var b=0,y=0,S=0;S<i;++S){var h=e.indices[b++],Z=e.faceVertexUvs[y++];if(2*h===Z.length)for(var x=0;x<h;++x){var p=e.indices[b++];Q[2*p+0]=Z[2*x+0],Q[2*p+1]=Z[2*x+1]}else b+=h}var G=o.a.newInstance();if(G.getPoints().setData(l,3),F&&G.getPointData().setScalars(s.a.newInstance({numberOfComponents:3,values:B,name:"Scalars"})),U||d){var R=s.a.newInstance({numberOfComponents:2,values:Q,name:"TextureCoordinates"}),L=G.getPointData();L.addArray(R),L.setActiveTCoords(R.getName())}return g&&G.getPointData().setNormals(s.a.newInstance({numberOfComponents:3,name:"Normals",values:c})),G.getPolys().setData(Uint32Array.from(e.indices)),G}function q(e,t){var n;switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":n=parseInt(e,10);break;case"float":case"double":case"float32":case"float64":n=parseFloat(e);break;default:console.log("Unsupported type")}return n}function $(e,t){for(var n=t.split(/\s+/),r={},a=0;a<e.length;a++)if("list"===e[a].type){for(var s=[],i=q(n.shift(),e[a].countType),o=0;o<i;o++)s.push(q(n.shift(),e[a].itemType));r[e[a].name]=s}else r[e[a].name]=q(n.shift(),e[a].type);return r}function ee(e,t,n){if("vertex"===t)e.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&e.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n?e.uvs.push(n.s,n.t):"u"in n&&"v"in n?e.uvs.push(n.u,n.v):"texture_u"in n&&"texture_v"in n&&e.uvs.push(n.texture_u,n.texture_v),"red"in n&&"green"in n&&"blue"in n&&e.colors.push(n.red,n.green,n.blue);else if("face"===t){var r=n.vertex_indices||n.vertex_index,a=n.texcoord;r&&r.length>0&&(e.indices.push(r.length),r.forEach((function(t,n){e.indices.push(t)}))),e.faceVertexUvs.push(a)}}function te(e,t,n,r){var a;switch(n){case"int8":case"char":a=[e.getInt8(t),1];break;case"uint8":case"uchar":a=[e.getUint8(t),1];break;case"int16":case"short":a=[e.getInt16(t,r),2];break;case"uint16":case"ushort":a=[e.getUint16(t,r),2];break;case"int32":case"int":a=[e.getInt32(t,r),4];break;case"uint32":case"uint":a=[e.getUint32(t,r),4];break;case"float32":case"float":a=[e.getFloat32(t,r),4];break;case"float64":case"double":a=[e.getFloat64(t,r),8];break;default:console.log("Unsupported type")}return a}function ne(e,t,n,r){for(var a,s={},i=0,o=0;o<n.length;o++)if("list"===n[o].type){var l=[],B=(a=te(e,t+i,n[o].countType,r))[0];i+=a[1];for(var Q=0;Q<B;Q++)a=te(e,t+i,n[o].itemType,r),l.push(a[0]),i+=a[1];s[n[o].name]=l}else a=te(e,t+i,n[o].type,r),s[n[o].name]=a[0],i+=a[1];return[s,i]}function re(e,t){function n(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.compression,s=t.progressCallback;return r.binary?t.dataAccessHelper.fetchBinary(n,{compression:a,progressCallback:s}):t.dataAccessHelper.fetchText(e,n,{compression:a,progressCallback:s})}t.classHierarchy.push("vtkPLYReader"),t.dataAccessHelper||(t.dataAccessHelper=z.a.get("http")),e.setUrl=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{binary:!0};t.url=n;var a=n.split("/");return a.pop(),t.baseURL=a.join("/"),t.compression=r.compression,e.loadData({progressCallback:r.progressCallback,binary:!!r.binary})},e.loadData=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n(t.url,r);return a.then(e.parse),a},e.parse=function(t){"string"==typeof t?e.parseAsText(t):e.parseAsArrayBuffer(t)},e.parseAsArrayBuffer=function(n){if(n&&n!==t.parseData){e.modified();var r=j(O.a.arrayBufferToString(n));if("ascii"!==r.format){t.parseData=n;for(var a,s={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},i="binary_little_endian"===r.format,o=n instanceof ArrayBuffer?n:n.buffer,l=new DataView(o,r.headerLength),B=0,Q=0;Q<r.elements.length;Q++)for(var c=0;c<r.elements[Q].count;c++){B+=(a=ne(l,B,r.elements[Q].properties,i))[1];var F=a[0];ee(s,r.elements[Q].name,F)}var U=_(s,r.elements);t.output[0]=U}else e.parseAsText(n)}},e.parseAsText=function(n){if(n&&n!==t.parseData){e.modified(),t.parseData=n;var r=O.a.arrayBufferToString(n),a=j(r);if("ascii"!==a.format)e.parseAsArrayBuffer(n);else{var s={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},i=K.patternBody.exec(r),o="";null!==i&&(o=i[1]);for(var l=o.split("\n"),B=0,Q=0,c=0;c<l.length;c++){var F=l[c];if(""!==(F=F.trim())){Q>=a.elements[B].count&&(B++,Q=0);var U=$(a.elements[B].properties,F);ee(s,a.elements[B].name,U),Q++}}var g=_(s,a.elements);t.output[0]=g}}},e.requestData=function(n,r){e.parse(t.parseData)}}var ae={};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ae,n),a.c.obj(e,t),a.c.get(e,t,["url","baseURL"]),a.c.setGet(e,t,["dataAccessHelper"]),a.c.algo(e,t,0,1),re(e,t),t.compression||(t.compression=null),t.progressCallback||(t.progressCallback=null)}),"vtkPLYReader"),n(71);function se(e,t){t.classHierarchy.push("vtkElevationReader"),t.dataAccessHelper||(t.dataAccessHelper=z.a.get("http")),e.setUrl=function(n,r){return t.url=n,e.loadData(r)},e.loadData=function(n){return function(n,r){return t.dataAccessHelper.fetchText(e,n,r)}(t.url,n).then((function(t){return e.parseAsText(t),!0}))},e.parseAsText=function(n){t.csv=n,t.elevation=[],t.csv.split("\n").forEach((function(e,n){t.elevation.push(e.split(",").map((function(e){return Number(e)})))})),e.modified()},e.requestData=function(e,n){var r=o.a.newInstance();if(r.getPoints().setData(new Float32Array(0,0,0,1,1,1),3),t.elevation){var a=t.elevation.length,i=t.elevation[0].length,l=r.getPoints();l.setNumberOfPoints(i*a,3);var B=l.getData(),Q=v.a.newInstance({size:5*(i-1)*(a-1)});r.setPolys(Q);var c=Q.getData(),F=0,U=new Float32Array(i*a*2),g=s.a.newInstance({numberOfComponents:2,values:U,name:"TextureCoordinates"});r.getPointData().setTCoords(g);for(var d=0;d<a;d++)for(var u=0;u<i;u++){var I=d*i+u,m=3*I;B[m+0]=t.origin[0]+u*t.xSpacing*t.xDirection,B[m+1]=t.origin[1]+d*t.ySpacing*t.yDirection,B[m+2]=t.origin[2]+t.elevation[d][u]*t.zScaling,U[2*I]=u/(i-1),U[2*I+1]=1-d/(a-1),u>0&&d>0&&(c[F++]=4,c[F++]=I,c[F++]=I-1,c[F++]=I-1-i,c[F++]=I-i)}}t.output[0]=r},e.isBusy=function(){return!!t.requestCount}}var ie={origin:[0,0,0],xSpacing:1,ySpacing:1,zScaling:1,xDirection:1,yDirection:-1,requestCount:0};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ie,n),a.c.obj(e,t),a.c.get(e,t,["url"]),a.c.setGet(e,t,["dataAccessHelper","xSpacing","ySpacing","zScaling","xDirection","yDirection"]),a.c.algo(e,t,0,1),a.c.event(e,t,"busy"),se(e,t)}),"vtkElevationReader");var oe=n(15),le={};function Be(e,t,n,r){for(var a=0;a<r;a++)n.push(e[t+a])}function Qe(e){if("#"!==e[0]){var t,n,r=e.split(/[ \t]+/);if(r[0]===le.splitOn)r.shift(),le.pieces.push(r.join(" ").trim()),le.f.push([]),le.size++;else if("v"===r[0])le.v.push(Number(r[1])),le.v.push(Number(r[2])),le.v.push(Number(r[3]));else if("vt"===r[0])le.vt.push(Number(r[1])),le.vt.push(Number(r[2]));else if("vn"===r[0])le.vn.push(Number(r[1])),le.vn.push(Number(r[2])),le.vn.push(Number(r[3]));else if("f"===r[0]){0===le.size&&le.size++;var a=le.f[le.size-1];r.shift();var s=r.filter((function(e){return e.length>0&&"\r"!==e})),i=s.length;a.push(i);for(var o=0;o<i;o++)a.push((void 0,void 0,[n=(t=s[o].split("/").map((function(e){return Number(e)})))[0]-1,t[1]?t[1]-1:n,t[2]?t[2]-1:n]))}}}function ce(e,t){function n(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dataAccessHelper.fetchText(e,n,r)}t.classHierarchy.push("vtkOBJReader"),t.dataAccessHelper||(t.dataAccessHelper=z.a.get("http")),e.setUrl=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(-1!==n.indexOf(".obj")||r.fullpath){t.url=n;var a=n.split("/");a.pop(),t.baseURL=a.join("/")}else t.baseURL=n,t.url="".concat(n,"/index.obj");return e.loadData(r)},e.loadData=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(t.url,r).then(e.parseAsText)},e.parseAsText=function(n){return!n||(n!==t.parseData&&e.modified(),t.parseData=n,t.numberOfOutputs=0,r=t.splitMode,le.splitOn=r,le.pieces=[],le.v=[],le.vt=[],le.vn=[],le.f=[[]],le.size=0,n.split("\n").forEach(Qe),function(e){var t=!!le.vt.length,n=!!le.vn.length;if(e.splitMode){e.numberOfOutputs=le.size;for(var r=0;r<le.size;r++){for(var a={},i=o.a.newInstance({name:le.pieces[r]}),l=[],B=[],Q=[],c=[],F=le.f[r],U=F.length,g=0;g<U;){var d=F[g];c.push(d);for(var u=0;u<d;u++){var I=Object(oe.a)(F[g+u+1],3),m=I[0],C=I[1],b=I[2],y="".concat(m,"/").concat(C,"/").concat(b);void 0===a[y]&&(a[y]=l.length/3,Be(le.v,3*m,l,3),t&&Be(le.vt,2*C,B,2),n&&Be(le.vn,3*b,Q,3)),c.push(a[y])}g+=d+1}if(i.getPoints().setData(Float32Array.from(l),3),i.getPolys().setData(Uint32Array.from(c)),t){var S=s.a.newInstance({numberOfComponents:2,values:Float32Array.from(B),name:"TextureCoordinates"});i.getPointData().setTCoords(S)}if(n){var h=s.a.newInstance({numberOfComponents:3,values:Float32Array.from(Q),name:"Normals"});i.getPointData().setNormals(h)}e.output[r]=i}}else{e.numberOfOutputs=1;var Z=o.a.newInstance();if(Z.getPoints().setData(Float32Array.from(le.v),3),t&&le.v.length/3==le.vt.length/2){var x=s.a.newInstance({numberOfComponents:2,values:Float32Array.from(le.vt),name:"TextureCoordinates"});Z.getPointData().setTCoords(x)}if(n&&le.v.length===le.vn.length){var p=s.a.newInstance({numberOfComponents:3,values:Float32Array.from(le.vn),name:"Normals"});Z.getPointData().setNormals(p)}for(var G=[],R=le.f[0],L=R.length,V=0;V<L;){var A=R[V];G.push(A);for(var f=0;f<A;f++){var N=Object(oe.a)(R[V+f+1],1)[0];G.push(N)}V+=A+1}Z.getPolys().setData(Uint32Array.from(G)),e.output[0]=Z}}(t),!0);var r},e.requestData=function(n,r){e.parseAsText(t.parseData)},e.isBusy=function(){return!!t.requestCount},e.getNumberOfOutputPorts=function(){return t.numberOfOutputs}}var Fe={numberOfOutputs:1,requestCount:0,splitMode:null};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fe,n),a.c.obj(e,t),a.c.get(e,t,["url","baseURL"]),a.c.setGet(e,t,["dataAccessHelper","splitMode"]),a.c.algo(e,t,0,1),a.c.event(e,t,"busy"),ce(e,t)}),"vtkOBJReader");var Ue=["chemical json","name","inchi","formula","atoms","bonds","properties"];function ge(e,t){t.classHierarchy.push("vtkMolecule")}var de={"chemical json":0,name:"",inchi:"",formula:"",atoms:null,bonds:null,properties:null};function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,de,n),a.c.obj(e,t),t.atoms||(t.atoms={}),t.bonds||(t.bonds={}),t.properties||(t.properties={}),a.c.setGet(e,t,Ue),ge(0,t)}var Ie={newInstance:a.c.newInstance(ue,"vtkMolecule"),extend:ue},me={H:[1],He:[2],Li:[3],Be:[4],B:[5],C:[6],N:[7],O:[8],F:[9],Ne:[10],Na:[11],Mg:[12],Al:[13],Si:[14],P:[15],S:[16],Cl:[17],Ar:[18],K:[19],Ca:[20],Sc:[21],Ti:[22],V:[23],Cr:[24],Mn:[25],Fe:[26],Co:[27],Ni:[28],Cu:[29],Zn:[30],Ga:[31],Ge:[32],As:[33],Se:[34],Br:[35],Kr:[36],Rb:[37],Sr:[38],Y:[39],Zr:[40],Nb:[41],Mo:[42],Tc:[43],Ru:[44],Rh:[45],Pd:[46],Ag:[47],Cd:[48],In:[49],Sn:[50],Sb:[51],Te:[52],I:[53],Xe:[54],Cs:[55],Ba:[56],La:[57],Ce:[58],Pr:[59],Nd:[60],Pm:[61],Sm:[62],Eu:[63],Gd:[64],Tb:[65],Dy:[66],Ho:[67],Er:[68],Tm:[69],Yb:[70],Lu:[71],Hf:[72],Ta:[73],W:[74],Re:[75],Os:[76],Ir:[77],Pt:[78],Au:[79],Hg:[80],Tl:[81],Pb:[82],Bi:[83],Po:[84],At:[85],Rn:[86],Fr:[87],Ra:[88],Ac:[89],Th:[90],Pa:[91],U:[92],Np:[93],Pu:[94],Am:[95],Cm:[96],Bk:[97],Cf:[98],Es:[99],Fm:[100],Md:[101],No:[102],Lr:[103],Rf:[104],Db:[105],Sg:[106],Bh:[107],Hs:[108],Mt:[109],Ds:[110],Rg:[111],Cn:[112],Uut:[113],Uuq:[114],Uup:[115],Uuh:[116],Uus:[117],Uuo:[118]};function Ce(e,t){t.classHierarchy.push("vtkPDBReader"),t.dataAccessHelper||(t.dataAccessHelper=z.a.get("http")),e.setUrl=function(n,r){if(-1===n.indexOf(".pdb"))t.baseURL=n,t.url="".concat(n);else{t.url=n;var a=n.split("/");a.pop(),t.baseURL=a.join("/")}return e.loadData(r)},e.loadData=function(n){return function(n,r){return t.dataAccessHelper.fetchText(e,n,r)}(t.url,n).then(e.parseAsText)},e.parseAsText=function(n){return t.pdb=n,t.molecule=[],t.molecule=t.pdb.split("\n"),e.modified(),!0},e.requestData=function(e,n){var r=Ie.newInstance();if(t.molecule){var a=t.molecule.length,s=[],i=[];t.numberOfAtoms=0;for(var o=0;o<a&&"END"!==t.molecule[o];){var l=t.molecule[o].length,B=t.molecule[o],Q=B.substr(0,6).replace(/\s+/g,"");if(Q.toUpperCase(),"ATOM"===Q||"HETATM"===Q){var c=B.substr(12,4).replace(/\s+/g,""),F=B.substr(30,8).replace(/\s+/g,""),U=B.substr(38,8).replace(/\s+/g,""),g=B.substr(46,8).replace(/\s+/g,""),d="";l>=78&&(d=B.substr(76,2).replace(/\s+/g,"")),""===d&&(d=c.substr(0,2).replace(/\d/g,"")),s.push(F),s.push(U),s.push(g);var u=Object(oe.a)(me[d],1)[0];i.push(u),t.numberOfAtoms++}o++}r.getAtoms().elements={},r.getAtoms().elements.number=Int8Array.from(i),r.getAtoms().coords={},r.getAtoms().coords["3d"]=Float32Array.from(s)}t.output[0]=r},e.isBusy=function(){return!!t.requestCount}}var be={numberOfAtoms:0,requestCount:0};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,be,n),a.c.obj(e,t),a.c.get(e,t,["url","baseURL","numberOfAtoms","requestCount"]),a.c.setGet(e,t,["dataAccessHelper"]),a.c.algo(e,t,0,1),a.c.event(e,t,"busy"),Ce(e,t)}),"vtkPDBReader");var ye=n(9),Se=n(18),he=n(19),Ze=n(36);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pe=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function Ge(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Re(e){return e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function Le(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ve(e){return Le(e,pe)}function Ae(e){var t=Object(oe.a)(e,6),n=t[0],r=t[1],a=t[2],s=t[3],i=t[4],o=t[5];e[0]=n<(arguments.length<=1?void 0:arguments[1])?n:arguments.length<=1?void 0:arguments[1],e[1]=r>(arguments.length<=1?void 0:arguments[1])?r:arguments.length<=1?void 0:arguments[1],e[2]=a<(arguments.length<=2?void 0:arguments[2])?a:arguments.length<=2?void 0:arguments[2],e[3]=s>(arguments.length<=2?void 0:arguments[2])?s:arguments.length<=2?void 0:arguments[2],e[4]=i<(arguments.length<=3?void 0:arguments[3])?i:arguments.length<=3?void 0:arguments[3],e[5]=o>(arguments.length<=3?void 0:arguments[3])?o:arguments.length<=3?void 0:arguments[3]}function fe(e,t,n,r,a,s,i){var o=Object(oe.a)(e,6),l=o[0],B=o[1],Q=o[2],c=o[3],F=o[4],U=o[5];void 0===i?(e[0]=Math.min(t[0],l),e[1]=Math.max(t[1],B),e[2]=Math.min(t[2],Q),e[3]=Math.max(t[3],c),e[4]=Math.min(t[4],F),e[5]=Math.max(t[5],U)):(e[0]=Math.min(t,l),e[1]=Math.max(n,B),e[2]=Math.min(r,Q),e[3]=Math.max(a,c),e[4]=Math.min(s,F),e[5]=Math.max(i,U))}function Ne(e,t,n,r){var a=Object(oe.a)(e,6),s=a[0],i=a[1],o=a[2],l=a[3],B=a[4],Q=a[5];return e[0]=t,e[1]=t>i?t:i,e[2]=n,e[3]=n>l?n:l,e[4]=r,e[5]=r>Q?r:Q,s!==t||o!==n||B!==r}function Ee(e,t,n,r){var a=Object(oe.a)(e,6),s=a[0],i=a[1],o=a[2],l=a[3],B=a[4],Q=a[5];return e[0]=t<s?t:s,e[1]=t,e[2]=n<o?n:o,e[3]=n,e[4]=r<B?r:B,e[5]=r,i!==t||l!==n||Q!==r}function De(e,t){e[0]-=t,e[1]+=t,e[2]-=t,e[3]+=t,e[4]-=t,e[5]+=t}function ve(e,t,n,r){return!!Re(e)&&(t>=0?(e[0]*=t,e[1]*=t):(e[0]=t*e[1],e[1]=t*e[0]),n>=0?(e[2]*=n,e[3]*=n):(e[2]=n*e[3],e[3]=n*e[2]),r>=0?(e[4]*=r,e[5]*=r):(e[4]=r*e[5],e[5]=r*e[4]),!0)}function Je(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function We(e,t){return e[2*t+1]-e[2*t]}function Xe(e){return[We(e,0),We(e,1),We(e,2)]}function He(e){return e.slice(0,2)}function Te(e){return e.slice(2,4)}function ke(e){return e.slice(4,6)}function Me(e){var t=Xe(e);return t[0]>t[1]?t[0]>t[2]?t[0]:t[2]:t[1]>t[2]?t[1]:t[2]}function we(e){if(Re(e)){var t=Xe(e);return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}return null}function Ye(e){return[e[0],e[2],e[4]]}function Oe(e){return[e[1],e[3],e[5]]}function ze(e,t){return e<=0&&t>=0||e>=0&&t<=0}function Pe(e,t){for(var n=0,r=0;r<2;r++)for(var a=2;a<4;a++)for(var s=4;s<6;s++)t[n]=[e[r],e[a],e[s]],n++}function Ke(e,t,n){t[0]=e[0],t[1]=e[2],t[2]=e[4],n[0]=e[1],n[1]=e[3],n[2]=e[5]}function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Je(e);return t[0]=e[1]-n[0],t[1]=e[3]-n[1],t[2]=e[5]-n[2],t}function _e(e,t,n,r){for(var a=[].concat(pe),s=e.getData(),i=0;i<s.length;i+=3){var o=[s[i],s[i+1],s[i+2]],l=Object(u.q)(o,t);a[0]=Math.min(l,a[0]),a[1]=Math.max(l,a[1]);var B=Object(u.q)(o,n);a[2]=Math.min(B,a[2]),a[3]=Math.max(B,a[3]);var Q=Object(u.q)(o,r);a[4]=Math.min(Q,a[4]),a[5]=Math.max(Q,a[5])}return a}function qe(e,t,n,r,a){for(var s=!0,i=[],o=0,l=[],B=[0,0,0],Q=0;Q<3;Q++)t[Q]<e[2*Q]?(i[Q]=1,B[Q]=e[2*Q],s=!1):t[Q]>e[2*Q+1]?(i[Q]=0,B[Q]=e[2*Q+1],s=!1):i[Q]=2;if(s)return r[0]=t[0],r[1]=t[1],r[2]=t[2],a[0]=0,1;for(var c=0;c<3;c++)2!==i[c]&&0!==n[c]?l[c]=(B[c]-t[c])/n[c]:l[c]=-1;for(var F=0;F<3;F++)l[o]<l[F]&&(o=F);if(l[o]>1||l[o]<0)return 0;a[0]=l[o];for(var U=0;U<3;U++)if(o!==U){if(r[U]=t[U]+l[o]*n[U],r[U]<e[2*U]||r[U]>e[2*U+1])return 0}else r[U]=B[U];return 1}function $e(e,t,n){for(var r=[],a=0,s=1,i=1,o=4;o<=5;++o){r[2]=e[o];for(var l=2;l<=3;++l){r[1]=e[l];for(var B=0;B<=1;++B)if(r[0]=e[B],a=Ze.a.evaluate(n,t,r),i&&(s=a>=0?1:-1,i=0),0===a||s>0&&a<0||s<0&&a>0)return 1}}return 0}function et(e,t){if(!Re(e)||!Re(t))return!1;for(var n,r=[0,0,0,0,0,0],a=0;a<3;a++)if(n=!1,t[2*a]>=e[2*a]&&t[2*a]<=e[2*a+1]?(n=!0,r[2*a]=t[2*a]):e[2*a]>=t[2*a]&&e[2*a]<=t[2*a+1]&&(n=!0,r[2*a]=e[2*a]),t[2*a+1]>=e[2*a]&&t[2*a+1]<=e[2*a+1]?(n=!0,r[2*a+1]=t[2*a+1]):e[2*a+1]>=t[2*a]&&e[2*a+1]<=t[2*a+1]&&(n=!0,r[2*a+1]=e[2*a+1]),!n)return!1;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],!0}function tt(e,t){if(!Re(e)||!Re(t))return!1;for(var n=0;n<3;n++)if(!(t[2*n]>=e[2*n]&&t[2*n]<=e[2*n+1]||e[2*n]>=t[2*n]&&e[2*n]<=t[2*n+1]||t[2*n+1]>=e[2*n]&&t[2*n+1]<=e[2*n+1]||e[2*n+1]>=t[2*n]&&e[2*n+1]<=t[2*n+1]))return!1;return!0}function nt(e,t,n,r){return!(t<e[0]||t>e[1]||n<e[2]||n>e[3]||r<e[4]||r>e[5])}function rt(e,t,n){for(var r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],a=[0,0,0,0,0,0,0,0],s=0,i=0;i<2;i++)for(var o=2;o<4;o++)for(var l=4;l<6;l++){var B=[e[i],e[o],e[l]];a[s++]=Ze.a.evaluate(n,t,B)}for(var Q=2;Q--&&!(ze(a[r[Q][0]],a[r[Q][4]])&&ze(a[r[Q][1]],a[r[Q][5]])&&ze(a[r[Q][2]],a[r[Q][6]])&&ze(a[r[Q][3]],a[r[Q][7]])););if(Q<0)return!1;for(var c=Math.sign(n[Q]),F=Math.abs((e[2*Q+1]-e[2*Q])*n[Q]),U=c>0?1:0,g=0;g<4;g++)if(0!==F){var d=Math.abs(a[r[Q][g]])/F;c>0&&d<U&&(U=d),c<0&&d>U&&(U=d)}var u=(1-U)*e[2*Q]+U*e[2*Q+1];return c>0?e[2*Q]=u:e[2*Q+1]=u,!0}var at=function(){function e(t){Object(Se.a)(this,e),this.bounds=t,this.bounds||(this.bounds=new Float64Array(6),Le(this.bounds,pe))}return Object(he.a)(e,[{key:"getBounds",value:function(){return this.bounds}},{key:"equals",value:function(e){return Ge(this.bounds,e)}},{key:"isValid",value:function(){return Re(this.bounds)}},{key:"setBounds",value:function(e){return Le(this.bounds,e)}},{key:"reset",value:function(){return Ve(this.bounds)}},{key:"addPoint",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ae(this.bounds,t)}},{key:"addBounds",value:function(e,t,n,r,a,s){return fe(this.bounds,e,t,n,r,a,s)}},{key:"setMinPoint",value:function(e,t,n){return Ne(this.bounds,e,t,n)}},{key:"setMaxPoint",value:function(e,t,n){return Ee(this.bounds,e,t,n)}},{key:"inflate",value:function(e){return De(this.bounds,e)}},{key:"scale",value:function(e,t,n){return ve(this.bounds,e,t,n)}},{key:"getCenter",value:function(){return Je(this.bounds)}},{key:"getLength",value:function(e){return We(this.bounds,e)}},{key:"getLengths",value:function(){return Xe(this.bounds)}},{key:"getMaxLength",value:function(){return Me(this.bounds)}},{key:"getDiagonalLength",value:function(){return we(this.bounds)}},{key:"getMinPoint",value:function(){return Ye(this.bounds)}},{key:"getMaxPoint",value:function(){return Oe(this.bounds)}},{key:"getXRange",value:function(){return He(this.bounds)}},{key:"getYRange",value:function(){return Te(this.bounds)}},{key:"getZRange",value:function(){return ke(this.bounds)}},{key:"getCorners",value:function(e){return Pe(this.bounds,e)}},{key:"computeCornerPoints",value:function(e,t){return Ke(this.bounds,e,t)}},{key:"computeLocalBounds",value:function(e,t,n){return _e(this.bounds,e,t,n)}},{key:"computeScale3",value:function(e){return je(this.bounds,e)}},{key:"cutWithPlane",value:function(e,t){return rt(this.bounds,e,t)}},{key:"intersectBox",value:function(e,t,n,r){return qe(this.bounds,e,t,n,r)}},{key:"intersectPlane",value:function(e,t){return $e(this.bounds,e,t)}},{key:"intersect",value:function(e){return et(this.bounds,e)}},{key:"intersects",value:function(e){return tt(this.bounds,e)}},{key:"containsPoint",value:function(e,t,n){return nt(this.bounds,e,t,n)}},{key:"contains",value:function(e){return tt(this.bounds,e)}}]),e}(),st=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:function(e){var t=e&&e.bounds;return new at(t)}},{equals:Ge,isValid:Re,setBounds:Le,reset:Ve,addPoint:Ae,addBounds:fe,setMinPoint:Ne,setMaxPoint:Ee,inflate:De,scale:ve,getCenter:Je,getLength:We,getLengths:Xe,getMaxLength:Me,getDiagonalLength:we,getMinPoint:Ye,getMaxPoint:Oe,getXRange:He,getYRange:Te,getZRange:ke,getCorners:Pe,computeCornerPoints:Ke,computeLocalBounds:_e,computeScale3:je,cutWithPlane:rt,intersectBox:qe,intersectPlane:$e,intersect:et,intersects:tt,containsPoint:nt,contains:function(e,t){return!!tt(e,t)&&!!nt.apply(void 0,[e].concat(Object(r.a)(Ye(t))))&&!!nt.apply(void 0,[e].concat(Object(r.a)(Oe(t))))},INIT_BOUNDS:pe}),it=n(34),ot={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9},lt={StructuredType:ot};function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qt=lt.StructuredType;var ct=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({getDataDescriptionFromExtent:function(e){for(var t=0,n=0;n<3;++n)e[2*n]<e[2*n+1]&&t++;return e[0]>e[1]||e[2]>e[3]||e[4]>e[5]?Qt.EMPTY:3===t?Qt.XYZ_GRID:2===t?e[0]===e[1]?Qt.YZ_PLANE:e[2]===e[3]?Qt.XZ_PLANE:Qt.XY_PLANE:1===t?e[0]<e[1]?Qt.X_LINE:e[2]<e[3]?Qt.Y_LINE:Qt.Z_LINE:Qt.SINGLE_POINT}},lt),Ft=n(12);function Ut(){var e=new Ft.a(9);return Ft.a!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function gt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function dt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ut(e,t){if(e===t){var n=t[1],r=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function It(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],i=t[4],o=t[5],l=t[6],B=t[7],Q=t[8],c=Q*i-o*B,F=-Q*s+o*l,U=B*s-i*l,g=n*c+r*F+a*U;return g?(g=1/g,e[0]=c*g,e[1]=(-Q*r+a*B)*g,e[2]=(o*r-a*i)*g,e[3]=F*g,e[4]=(Q*n-a*l)*g,e[5]=(-o*n+a*s)*g,e[6]=U*g,e[7]=(-B*n+r*l)*g,e[8]=(i*n-r*s)*g,e):null}function mt(e,t,n){var r=t[0],a=t[1],s=t[2],i=t[3],o=t[4],l=t[5],B=t[6],Q=t[7],c=t[8],F=n[0],U=n[1],g=n[2],d=n[3],u=n[4],I=n[5],m=n[6],C=n[7],b=n[8];return e[0]=F*r+U*i+g*B,e[1]=F*a+U*o+g*Q,e[2]=F*s+U*l+g*c,e[3]=d*r+u*i+I*B,e[4]=d*a+u*o+I*Q,e[5]=d*s+u*l+I*c,e[6]=m*r+C*i+b*B,e[7]=m*a+C*o+b*Q,e[8]=m*s+C*l+b*c,e}function Ct(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}var bt=mt,yt=Ct,St=Object.freeze({__proto__:null,create:Ut,fromMat4:gt,clone:function(e){var t=new Ft.a(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},fromValues:function(e,t,n,r,a,s,i,o,l){var B=new Ft.a(9);return B[0]=e,B[1]=t,B[2]=n,B[3]=r,B[4]=a,B[5]=s,B[6]=i,B[7]=o,B[8]=l,B},set:function(e,t,n,r,a,s,i,o,l,B){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=s,e[5]=i,e[6]=o,e[7]=l,e[8]=B,e},identity:dt,transpose:ut,invert:It,adjoint:function(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],i=t[4],o=t[5],l=t[6],B=t[7],Q=t[8];return e[0]=i*Q-o*B,e[1]=a*B-r*Q,e[2]=r*o-a*i,e[3]=o*l-s*Q,e[4]=n*Q-a*l,e[5]=a*s-n*o,e[6]=s*B-i*l,e[7]=r*l-n*B,e[8]=n*i-r*s,e},determinant:function(e){var t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],i=e[5],o=e[6],l=e[7],B=e[8];return t*(B*s-i*l)+n*(-B*a+i*o)+r*(l*a-s*o)},multiply:mt,translate:function(e,t,n){var r=t[0],a=t[1],s=t[2],i=t[3],o=t[4],l=t[5],B=t[6],Q=t[7],c=t[8],F=n[0],U=n[1];return e[0]=r,e[1]=a,e[2]=s,e[3]=i,e[4]=o,e[5]=l,e[6]=F*r+U*i+B,e[7]=F*a+U*o+Q,e[8]=F*s+U*l+c,e},rotate:function(e,t,n){var r=t[0],a=t[1],s=t[2],i=t[3],o=t[4],l=t[5],B=t[6],Q=t[7],c=t[8],F=Math.sin(n),U=Math.cos(n);return e[0]=U*r+F*i,e[1]=U*a+F*o,e[2]=U*s+F*l,e[3]=U*i-F*r,e[4]=U*o-F*a,e[5]=U*l-F*s,e[6]=B,e[7]=Q,e[8]=c,e},scale:function(e,t,n){var r=n[0],a=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},fromRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:function(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],i=n+n,o=r+r,l=a+a,B=n*i,Q=r*i,c=r*o,F=a*i,U=a*o,g=a*l,d=s*i,u=s*o,I=s*l;return e[0]=1-c-g,e[3]=Q-I,e[6]=F+u,e[1]=Q+I,e[4]=1-B-g,e[7]=U-d,e[2]=F-u,e[5]=U+d,e[8]=1-B-c,e},normalFromMat4:function(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],i=t[4],o=t[5],l=t[6],B=t[7],Q=t[8],c=t[9],F=t[10],U=t[11],g=t[12],d=t[13],u=t[14],I=t[15],m=n*o-r*i,C=n*l-a*i,b=n*B-s*i,y=r*l-a*o,S=r*B-s*o,h=a*B-s*l,Z=Q*d-c*g,x=Q*u-F*g,p=Q*I-U*g,G=c*u-F*d,R=c*I-U*d,L=F*I-U*u,V=m*L-C*R+b*G+y*p-S*x+h*Z;return V?(V=1/V,e[0]=(o*L-l*R+B*G)*V,e[1]=(l*p-i*L-B*x)*V,e[2]=(i*R-o*p+B*Z)*V,e[3]=(a*R-r*L-s*G)*V,e[4]=(n*L-a*p+s*x)*V,e[5]=(r*p-n*R-s*Z)*V,e[6]=(d*h-u*S+I*y)*V,e[7]=(u*b-g*h-I*C)*V,e[8]=(g*S-d*b+I*m)*V,e):null},projection:function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},subtract:Ct,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){var n=e[0],r=e[1],a=e[2],s=e[3],i=e[4],o=e[5],l=e[6],B=e[7],Q=e[8],c=t[0],F=t[1],U=t[2],g=t[3],d=t[4],u=t[5],I=t[6],m=t[7],C=t[8];return Math.abs(n-c)<=Ft.b*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-F)<=Ft.b*Math.max(1,Math.abs(r),Math.abs(F))&&Math.abs(a-U)<=Ft.b*Math.max(1,Math.abs(a),Math.abs(U))&&Math.abs(s-g)<=Ft.b*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(i-d)<=Ft.b*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-u)<=Ft.b*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(l-I)<=Ft.b*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(B-m)<=Ft.b*Math.max(1,Math.abs(B),Math.abs(m))&&Math.abs(Q-C)<=Ft.b*Math.max(1,Math.abs(Q),Math.abs(C))},mul:bt,sub:yt}),ht=a.c.vtkErrorMacro;function Zt(e,t){t.classHierarchy.push("vtkImageData"),e.setExtent=function(){if(t.deleted)return ht("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=1===r.length?r[0]:r;if(6!==s.length)return!1;var i=!1;return t.extent.forEach((function(e,t){if(e!==s[t]){if(i)return;i=!0}})),i&&(t.extent=s.slice(),t.dataDescription=ct.getDataDescriptionFromExtent(t.extent),e.modified()),i},e.setDimensions=function(){var n,r,a;if(t.deleted)ht("instance deleted - cannot call any method");else{if(1===arguments.length){var s=arguments.length<=0?void 0:arguments[0];n=s[0],r=s[1],a=s[2]}else{if(3!==arguments.length)return void ht("Bad dimension specification");n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2]}e.setExtent(0,n-1,0,r-1,0,a-1)}},e.getDimensions=function(){return[t.extent[1]-t.extent[0]+1,t.extent[3]-t.extent[2]+1,t.extent[5]-t.extent[4]+1]},e.getNumberOfCells=function(){for(var t=e.getDimensions(),n=1,r=0;r<3;r++){if(0===t[r])return 0;t[r]>1&&(n*=t[r]-1)}return n},e.getNumberOfPoints=function(){var t=e.getDimensions();return t[0]*t[1]*t[2]},e.getPoint=function(n){var r=e.getDimensions();if(0===r[0]||0===r[1]||0===r[2])return ht("Requesting a point from an empty image."),null;var a=new Float64Array(3);switch(t.dataDescription){case ot.EMPTY:return null;case ot.SINGLE_POINT:break;case ot.X_LINE:a[0]=n;break;case ot.Y_LINE:a[1]=n;break;case ot.Z_LINE:a[2]=n;break;case ot.XY_PLANE:a[0]=n%r[0],a[1]=n/r[0];break;case ot.YZ_PLANE:a[1]=n%r[1],a[2]=n/r[1];break;case ot.XZ_PLANE:a[0]=n%r[0],a[2]=n/r[0];break;case ot.XYZ_GRID:a[0]=n%r[0],a[1]=n/r[0]%r[1],a[2]=n/(r[0]*r[1]);break;default:ht("Invalid dataDescription")}var s=[0,0,0];return e.indexToWorld(a,s),s},e.getBounds=function(){return e.extentToBounds(t.extent)},e.extentToBounds=function(t){var n=[t[0],t[2],t[4],t[1],t[2],t[4],t[0],t[3],t[4],t[1],t[3],t[4],t[0],t[2],t[5],t[1],t[2],t[5],t[0],t[3],t[5],t[1],t[3],t[5]],r=new Float64Array([n[0],n[1],n[2]]),a=new Float64Array(3);e.indexToWorld(r,a);for(var s=[a[0],a[0],a[1],a[1],a[2],a[2]],i=3;i<24;i+=3)Object(y.p)(r,n[i],n[i+1],n[i+2]),e.indexToWorld(r,a),a[0]<s[0]&&(s[0]=a[0]),a[1]<s[2]&&(s[2]=a[1]),a[2]<s[4]&&(s[4]=a[2]),a[0]>s[1]&&(s[1]=a[0]),a[1]>s[3]&&(s[3]=a[1]),a[2]>s[5]&&(s[5]=a[2]);return s},e.computeTransforms=function(){Object(b.e)(t.indexToWorld,t.origin),t.indexToWorld[0]=t.direction[0],t.indexToWorld[1]=t.direction[1],t.indexToWorld[2]=t.direction[2],t.indexToWorld[4]=t.direction[3],t.indexToWorld[5]=t.direction[4],t.indexToWorld[6]=t.direction[5],t.indexToWorld[8]=t.direction[6],t.indexToWorld[9]=t.direction[7],t.indexToWorld[10]=t.direction[8],Object(b.r)(t.indexToWorld,t.indexToWorld,t.spacing),Object(b.g)(t.worldToIndex,t.indexToWorld)},e.setDirection=function(){if(t.deleted)return ht("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=r;if(1!==s.length||!Array.isArray(s[0])&&s[0].constructor!==Float32Array&&s[0].constructor!==Float64Array||(s=s[0]),9!==s.length)throw new RangeError("Invalid number of values for array setter");var i=!1;if(t.direction.forEach((function(e,t){if(e!==s[t]){if(i)return;i=!0}})),i){for(var o=0;o<9;++o)t.direction[o]=s[o];e.modified()}return!0},e.indexToWorld=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(y.q)(n,e,t.indexToWorld),n},e.indexToWorldVec3=e.indexToWorld,e.worldToIndex=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(y.q)(n,e,t.worldToIndex),n},e.worldToIndexVec3=e.worldToIndex,e.indexToWorldBounds=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[0,0,0],a=[0,0,0];st.computeCornerPoints(e,r,a);var s=[0,0,0],i=[0,0,0];return Object(y.q)(s,r,t.indexToWorld),Object(y.q)(i,a,t.indexToWorld),Object(u.p)(s,i,n),n},e.worldToIndexBounds=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[0,0,0],a=[0,0,0];st.computeCornerPoints(e,r,a);var s=[0,0,0],i=[0,0,0];return Object(y.q)(s,r,t.worldToIndex),Object(y.q)(i,a,t.worldToIndex),Object(u.p)(s,i,n),n},e.onModified(e.computeTransforms),e.computeTransforms(),e.getCenter=function(){for(var t=e.getBounds(),n=[],r=0;r<3;r++)n[r]=(t[2*r+1]+t[2*r])/2;return n},e.computeHistogram=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[0,0,0,0,0,0];e.worldToIndexBounds(t,r);var a=[0,0,0],s=[0,0,0];st.computeCornerPoints(r,a,s),Object(u.o)(a,a),Object(u.o)(s,s);var i=e.getDimensions();Object(u.r)(a,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],a),Object(u.r)(s,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],s);for(var o=i[0],l=i[0]*i[1],B=e.getPointData().getScalars().getData(),Q=-1/0,c=1/0,F=0,U=0,g=0,d=a[2];d<=s[2];d++)for(var I=a[1];I<=s[1];I++)for(var m=a[0]+I*o+d*l,C=a[0];C<=s[0];C++){if(!n||n([C,I,d],r)){var b=B[m];b>Q&&(Q=b),b<c&&(c=b),F+=b*b,U+=b,g+=1}++m}var y=g>0?U/g:0,S=F-y*y,h=Math.sqrt(S);return{minimum:c,maximum:Q,average:y,variance:S,sigma:h}},e.computeIncrements=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=t,a=0;a<3;++a)n[a]=r,r*=e[2*a+1]-e[2*a]+1;return n},e.computeOffsetIndex=function(t){var n=Object(oe.a)(t,3),r=n[0],a=n[1],s=n[2],i=e.getExtent(),o=e.getPointData().getScalars().getNumberOfComponents(),l=e.computeIncrements(i,o);return Math.floor((Math.round(r)-i[0])*l[0]+(Math.round(a)-i[2])*l[1]+(Math.round(s)-i[4])*l[2])},e.getOffsetIndexFromWorld=function(t){for(var n=e.getExtent(),r=e.worldToIndex(t),a=0;a<3;++a)if(r[a]<n[2*a]||r[a]>n[2*a+1])return ht("GetScalarPointer: Pixel ".concat(r," is not in memory. Current extent = ").concat(n)),NaN;return e.computeOffsetIndex(r)},e.getScalarValueFromWorld=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.getPointData().getScalars().getNumberOfComponents();if(n<0||n>=r)return ht("GetScalarPointer: Scalar Component ".concat(n," is not within bounds. Current Scalar numberOfComponents: ").concat(r)),NaN;var a=e.getOffsetIndexFromWorld(t);return Number.isNaN(a)?a:e.getPointData().getScalars().getComponent(a,n)}}var xt={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:ot.EMPTY};function pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xt,n),it.a.extend(e,t,n),t.direction?Array.isArray(t.direction)&&(t.direction=new Float64Array(t.direction.slice(0,9))):t.direction=dt(new Float64Array(9)),t.indexToWorld=new Float64Array(16),t.worldToIndex=new Float64Array(16),a.c.get(e,t,["direction","indexToWorld","worldToIndex"]),a.c.setGetArray(e,t,["origin","spacing"],3),a.c.getArray(e,t,["extent"],6),Zt(e,t)}var Gt={newInstance:a.c.newInstance(pt,"vtkImageData"),extend:pt},Rt=n(41),Lt=n(23),Vt={Int8:Int8Array,UInt8:Uint8Array,Int16:Int16Array,UInt16:Uint16Array,Int32:Int32Array,UInt32:Uint32Array,Int64:Int32Array,UInt64:Uint32Array,Float32:Float32Array,Float64:Float64Array},At={Int8:1,UInt8:1,Int16:2,UInt16:2,Int32:4,UInt32:4,Int64:8,UInt64:8,Float32:4,Float64:8};function ft(e){var t=e.length-1;return e.filter((function(e,n){return n<t&&n%2==0}))}function Nt(e,t){if("UInt64"===t){var n=new Uint32Array(e.buffer,0,6),r=n[0],a=[8,r,n[2],n[4]];n=new Uint32Array(e.buffer,24,2*r);for(var s=0;s<r;s++)a.push(n[2*s]);return a}var i=new Uint32Array(e.buffer,0,3),o=i[0],l=[4,o,i[1],i[2]];i=new Uint32Array(e.buffer,12,o);for(var B=0;B<o;B++)l.push(i[B]);return l}function Et(e,t){var n=Lt.a.inflate(e);t.uint8.set(n,t.offset),t.offset+=n.length}function Dt(e,t,n,r,a,s){var i=t.getAttribute("type"),o=t.getAttribute("Name"),l=t.getAttribute("format"),B=Number(t.getAttribute("NumberOfComponents")||"1"),Q=null;if("ascii"===l){Q=new Vt[i](e*B);var c=0;t.firstChild.nodeValue.split(/[\\t \\n]+/).forEach((function(e){e.trim().length&&(Q[c++]=Number(e))}))}else if("binary"===l){var F=new Uint8Array(Rt.a.toArrayBuffer(t.firstChild.nodeValue.trim()));if("vtkZLibDataCompressor"===n){var U=new ArrayBuffer(At[i]*e*B);Q=new Vt[i](U);for(var g={offset:0,uint8:new Uint8Array(U)},d=Nt(F,a),u=d[1],I=F.length-(d.reduce((function(e,t){return e+t}),0)-(d[0]+d[1]+d[2]+d[3])),m=0;m<u;m++){var C=d[4+m];Et(new Uint8Array(F.buffer,I,C),g),I+=C}-1!==i.indexOf("Int64")&&(Q=ft(Q))}else Q=new Vt[i](F.buffer,At[a]),-1!==i.indexOf("Int64")&&(Q=ft(Q))}else if("appended"===l){var b,y=Number(t.getAttribute("offset")),S=(b=y%At[a]==0?new Vt[a](s,y,1):new Vt[a](s.slice(y,y+At[a])))[0]/At[i];-1!==i.indexOf("Int64")&&(S*=2),Q=(y+=At[a])%At[i]==0?new Vt[i](s,y,S):new Vt[i](s.slice(y,y+b[0])),-1!==i.indexOf("Int64")&&(Q=ft(Q))}else console.error("Format not supported",l);return{name:o,values:Q,numberOfComponents:B}}function vt(e,t){function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dataAccessHelper.fetchBinary(e,n)}t.classHierarchy.push("vtkXMLReader"),t.dataAccessHelper||(t.dataAccessHelper=z.a.get("http")),e.setUrl=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.url=n;var a=n.split("/");return a.pop(),t.baseURL=a.join("/"),e.loadData(r)},e.loadData=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(t.url,r).then(e.parseAsArrayBuffer)},e.parseAsArrayBuffer=function(n){if(!n)return!1;if(n===t.rawDataBuffer)return!0;e.modified();var r=function(e){return O.a.extractBinary(e,/^\s*<AppendedData\s+encoding="raw">\s*_/m,/\n\s*<\/AppendedData>/m)}(n),a=r.text,s=r.binaryBuffer;t.rawDataBuffer=n,t.binaryBuffer=s;var i=function(e){if(window.ActiveXObject){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t}return(new DOMParser).parseFromString(e,"application/xml")}(a).firstChild,o=i.getAttribute("type"),l=i.getAttribute("compressor"),B=i.getAttribute("byte_order"),Q=i.getAttribute("header_type")||"UInt32";if(l&&"vtkZLibDataCompressor"!==l)return console.error("Invalid compressor",l),!1;if(B&&"LittleEndian"!==B)return console.error("Only LittleEndian encoding is supported"),!1;if(o!==t.dataType)return console.error("Invalid data type",o,"expecting",t.dataType),!1;if(i.querySelector("AppendedData")){var c=i.querySelector("AppendedData"),F=c.getAttribute("encoding"),U=i.querySelectorAll("DataArray"),g=t.binaryBuffer;"base64"===F&&(g=c.textContent.trim().substr(1));for(var d=[],u=0;u<U.length;++u){var I,m=Number(U[u].getAttribute("offset"));I=u===U.length-1?g.length||g.byteLength:Number(U[u+1].getAttribute("offset")),"base64"===F?d.push(new Uint8Array(Rt.a.toArrayBuffer(g.substring(m,I)))):d.push(new Uint8Array(g.slice(m,I)))}if("vtkZLibDataCompressor"===l)for(var C=0;C<d.length;++C){var b,y=d[C],S=Nt(y,Q),h=S[1],Z=y.length-(S.reduce((function(e,t){return e+t}),0)-(S[0]+S[1]+S[2]+S[3]));b=h>0?0===S[3]?new ArrayBuffer(S[2]*h):new ArrayBuffer(S[2]*(h-1)+S[3]):new ArrayBuffer(0);for(var x=new Uint8Array(b),p={offset:0,uint8:x},G=0;G<h;G++){var R=S[4+G];Et(new Uint8Array(y.buffer,Z,R),p),Z+=R}var L=new Uint8Array(x.length+At[Q]);new Vt[Q](L.buffer,0,1)[0]=x.length,L.set(x,At[Q]),d[C]=L}for(var V=d.reduce((function(e,t){return e+t.length}),0),A=new ArrayBuffer(V),f=new Uint8Array(A),N=0,E=0;N<d.length;++N)U[N].setAttribute("offset",E),f.set(d[N],E),E+=d[N].length;if(t.binaryBuffer=A,!t.binaryBuffer)return console.error("Processing appended data format: requires binaryBuffer to parse"),!1}return e.parseXML(i,o,l,B,Q),!0},e.requestData=function(n,r){e.parseAsArrayBuffer(t.rawDataBuffer)}}var Jt={};var Wt={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jt,n),a.c.obj(e,t),a.c.get(e,t,["url","baseURL"]),a.c.setGet(e,t,["dataAccessHelper"]),a.c.algo(e,t,0,1),vt(e,t)},processDataArray:Dt,processFieldData:function(e,t,n,r,a,i,o){if(t){var l={};["Scalars","Vectors","Normals","Tensors","TCoords"].forEach((function(e){var r=t.getAttribute(e);r&&(l[r]=n["set".concat(e)])}));for(var B=t.getElementsByTagName("DataArray"),Q=B.length,c=0;c<Q;c++){var F=B[c],U=s.a.newInstance(Dt(e,F,r,0,i,o)),g=U.getName();(l[g]||n.addArray)(U)}}},processCells:function(e,t,n,r,a,s){for(var i={},o=t.getElementsByTagName("DataArray"),l=0;l<o.length;l++){var B=o[l];i[B.getAttribute("Name")]=B}var Q=Dt(e,i.offsets,n,0,a,s).values,c=Q[Q.length-1],F=Dt(c,i.connectivity,n,0,a,s).values,U=new Uint32Array(e+c),g=0,d=0;return Q.forEach((function(e){var t=e-d;U[g++]=t;for(var n=0;n<t;n++)U[g++]=F[d+n];d=e})),U}};function Xt(e,t){t.classHierarchy.push("vtkXMLImageDataReader"),e.parseXML=function(e,n,r,a,s){for(var i=e.getElementsByTagName(t.dataType)[0],o=i.getAttribute("Origin").split(" ").map((function(e){return Number(e)})),l=i.getAttribute("Spacing").split(" ").map((function(e){return Number(e)})),B=i.getElementsByTagName("Piece"),Q=B.length,c=0;c<Q;c++){var F=B[c],U=F.getAttribute("Extent").split(" ").map((function(e){return Number(e)})),g=Gt.newInstance({origin:o,spacing:l,extent:U});Wt.processFieldData(g.getNumberOfPoints(),F.getElementsByTagName("PointData")[0],g.getPointData(),r,a,s,t.binaryBuffer),Wt.processFieldData(g.getNumberOfCells(),F.getElementsByTagName("CellData")[0],g.getCellData(),r,a,s,t.binaryBuffer),t.output[c]=g}}}var Ht={dataType:"ImageData"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ht,n),Wt.extend(e,t,n),Xt(e,t)}),"vtkXMLImageDataReader");function Tt(e,t){t.classHierarchy.push("vtkXMLPolyDataReader"),e.parseXML=function(e,n,a,i,l){var B=e.getElementsByTagName(t.dataType)[0],Q=B.getElementsByTagName("FieldData")[0],c=B.getElementsByTagName("Piece"),F=c.length,U=[];Q&&(U=Object(r.a)(Q.getElementsByTagName("DataArray")).map((function(e){return function(e,t,n,r,a){var i=Number(e.getAttribute("NumberOfTuples"));return s.a.newInstance(Wt.processDataArray(i,e,t,n,r,a))}(e,a,i,l,t.binaryBuffer)})));for(var g=function(e){var n=o.a.newInstance(),r=c[e],s=function(e,t,n,r,a,s,i){var o=Number(n.getAttribute("NumberOf".concat(t)));if(o>0){var l=n.getElementsByTagName(t)[0].getElementsByTagName("DataArray")[0],B=Wt.processDataArray(o,l,r,a,s,i),Q=B.values,c=B.numberOfComponents;e["get".concat(t)]().setData(Q,c)}return o}(n,"Points",r,a,i,l,t.binaryBuffer),B=0;["Verts","Lines","Strips","Polys"].forEach((function(e){B+=function(e,t,n,r,a,s,i){var o=Number(n.getAttribute("NumberOf".concat(t)));if(o>0){var l=Wt.processCells(o,n.getElementsByTagName(t)[0],r,a,s,i);e["get".concat(t)]().setData(l)}return o}(n,e,r,a,i,l,t.binaryBuffer)})),Wt.processFieldData(s,r.getElementsByTagName("PointData")[0],n.getPointData(),a,i,l,t.binaryBuffer),Wt.processFieldData(B,r.getElementsByTagName("CellData")[0],n.getCellData(),a,i,l,t.binaryBuffer);for(var Q=n.getFieldData(),F=0;F<U.length;F++)Q.addArray(U[F]);t.output[e]=n},d=0;d<F;d++)g(d)}}var kt={dataType:"PolyData"};a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kt,n),Wt.extend(e,t,n),Tt(e,t)}),"vtkXMLPolyDataReader");var Mt=n(44),wt=Object(Mt.a)((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t})),Yt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)},Ot=n(35),zt=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},Pt=function(e,t){return!t||"object"!==Object(Ot.a)(t)&&"function"!=typeof t?zt(e):t},Kt=Object(Mt.a)((function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t})),jt=n(4),_t=n.n(jt),qt=n(1),$t=n.n(qt),en=a.c.vtkErrorMacro;function tn(e,t){t.classHierarchy.push("vtkViewNode"),e.build=function(e){},e.render=function(e){},e.traverse=function(n){var r=n.getTraverseOperation(),a=e[r];if(a)a(n);else{e.apply(n,!0);for(var s=0;s<t.children.length;s++)t.children[s].traverse(n);e.apply(n,!1)}},e.apply=function(t,n){var r=e[t.getOperation()];r&&r(n,t)},e.getViewNodeFor=function(n){if(t.renderable===n)return e;for(var r=0;r<t.children.length;++r){var a=t.children[r].getViewNodeFor(n);if(a)return a}},e.getFirstAncestorOfType=function(e){return t.parent?t.parent.isA(e)?t.parent:t.parent.getFirstAncestorOfType(e):null},e.addMissingNode=function(n){if(n){var r=t.renderableChildMap.get(n);if(void 0!==r)r.setVisited(!0);else{var a=e.createViewNode(n);a&&(a.setParent(e),a.setVisited(!0),t.renderableChildMap.set(n,a),t.children.push(a))}}},e.addMissingNodes=function(n){if(n&&n.length)for(var r=0;r<n.length;++r){var a=n[r],s=t.renderableChildMap.get(a);if(void 0!==s)s.setVisited(!0);else{var i=e.createViewNode(a);i&&(i.setParent(e),i.setVisited(!0),t.renderableChildMap.set(a,i),t.children.push(i))}}},e.prepareNodes=function(){for(var e=0;e<t.children.length;++e)t.children[e].setVisited(!1)},e.setVisited=function(e){t.visited=e},e.removeUnusedNodes=function(){for(var e=null,n=0;n<t.children.length;++n){var r=t.children[n];if(r.getVisited())r.setVisited(!1);else{var a=r.getRenderable();a&&t.renderableChildMap.delete(a),e||(e=[]),e.push(r)}}e&&(t.children=t.children.filter((function(t){return!e.includes(t)})))},e.createViewNode=function(e){if(!t.myFactory)return en("Cannot create view nodes without my own factory"),null;var n=t.myFactory.createNode(e);return n&&n.setRenderable(e),n}}var nn={parent:null,renderable:null,myFactory:null,children:[],visited:!1};function rn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,nn,n),a.c.obj(e,t),a.c.event(e,t,"event"),t.renderableChildMap=new Map,a.c.get(e,t,["visited"]),a.c.setGet(e,t,["parent","renderable","myFactory"]),a.c.getArray(e,t,["children"]),tn(e,t)}var an={newInstance:a.c.newInstance(rn,"vtkViewNode"),extend:rn,PASS_TYPES:["Build","Render"]},sn=navigator.gpu?"WebGPU":"WebGL",on=Object.create(null);function ln(e,t){on[e]=t}function Bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return on[e]&&on[e](t)}function Qn(e,t){t.classHierarchy.push("vtkRenderWindow"),e.addRenderer=function(n){e.hasRenderer(n)||(n.setRenderWindow(e),t.renderers.push(n),e.modified())},e.removeRenderer=function(n){t.renderers=t.renderers.filter((function(e){return e!==n})),e.modified()},e.hasRenderer=function(e){return-1!==t.renderers.indexOf(e)},e.newAPISpecificView=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Bn(e||t.defaultViewAPI,n)},e.addView=function(n){e.hasView(n)||(n.setRenderable(e),t.views.push(n),e.modified())},e.removeView=function(n){t.views=t.views.filter((function(e){return e!==n})),e.modified()},e.hasView=function(e){return-1!==t.views.indexOf(e)},e.render=function(){t.interactor?t.interactor.render():t.views.forEach((function(e){return e.traverseAllPasses()}))},e.getStatistics=function(){var e={propCount:0,invisiblePropCount:0};return t.renderers.forEach((function(t){t.getViewProps().forEach((function(t){if(t.getVisibility()){e.propCount+=1;var n=t.getMapper&&t.getMapper();if(n&&n.getPrimitiveCount){var r=n.getPrimitiveCount();Object.keys(r).forEach((function(t){e[t]||(e[t]=0),e[t]+=r[t]}))}}else e.invisiblePropCount+=1}))})),e.str=Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t])})).join("\n"),e},e.captureImages=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return a.c.setImmediate(e.render),t.views.map((function(e){return e.captureNextImage?e.captureNextImage(n):void 0})).filter((function(e){return!!e}))}}var cn={defaultViewAPI:sn,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1};function Fn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cn,n),a.c.obj(e,t),a.c.setGet(e,t,["interactor","numberOfLayers","views","defaultViewAPI"]),a.c.get(e,t,["neverRendered"]),a.c.getArray(e,t,["renderers"]),a.c.event(e,t,"completion"),Qn(e,t)}var Un={newInstance:a.c.newInstance(Fn,"vtkRenderWindow"),extend:Fn,registerViewConstructor:ln,listViewAPIs:function(){return Object.keys(on)},newAPISpecificView:Bn};function gn(e,t){t.classHierarchy.push("vtkRenderPass"),e.getOperation=function(){return t.currentOperation},e.setCurrentOperation=function(e){t.currentOperation=e,t.currentTraverseOperation="traverse".concat(a.c.capitalize(t.currentOperation))},e.getTraverseOperation=function(){return t.currentTraverseOperation},e.traverse=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.deleted||(t.currentParent=r,t.preDelegateOperations.forEach((function(t){e.setCurrentOperation(t),n.traverse(e)})),t.delegates.forEach((function(t){t.traverse(n,e)})),t.postDelegateOperations.forEach((function(t){e.setCurrentOperation(t),n.traverse(e)})))}}var dn={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function un(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dn,n),a.c.obj(e,t),a.c.get(e,t,["currentOperation"]),a.c.setGet(e,t,["delegates","currentParent","preDelegateOperations","postDelegateOperations"]),gn(e,t)}var In={newInstance:a.c.newInstance(un,"vtkRenderPass"),extend:un},mn={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},Cn={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5},bn={Wrap:mn,Filter:Cn};function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Sn=bn.Wrap,hn=bn.Filter,Zn=s.a.VtkDataTypes,xn=a.c.vtkDebugMacro,pn=a.c.vtkErrorMacro,Gn=a.c.vtkWarningMacro;function Rn(e,t){var n=this;function r(e,n){var r=[];if(e!==Zn.FLOAT&&t.openGLDataType===t.context.FLOAT)for(var a=t.width*t.height*t.components,s=0;s<n.length;s++){for(var i=new Float32Array(a),o=0;o<a;o++)i[o]=n[s][o];r.push(i)}if(e!==Zn.UNSIGNED_CHAR&&t.openGLDataType===t.context.UNSIGNED_BYTE)for(var l=t.width*t.height*t.components,B=0;B<n.length;B++){for(var Q=new Uint8Array(l),c=0;c<l;c++)Q[c]=n[B][c];r.push(Q)}if(0===r.length)for(var F=0;F<n.length;F++)r.push(n[F]);return r}function a(e){if(t.openGLRenderWindow.getWebgl2())return e;var n=[],r=t.width,a=t.height,s=t.components;if(e&&(!Object(u.m)(r)||!Object(u.m)(a)))for(var i=Object(u.h)(r),o=Object(u.h)(a),l=i*o*t.components,B=0;B<e.length;B++)if(null!==e[B]){var Q=null;switch(t.openGLDataType){case t.context.FLOAT:Q=new Float32Array(l);break;default:case t.context.UNSIGNED_BYTE:Q=new Uint8Array(l)}for(var c=a/o,F=r/i,U=0;U<o;U++){var g=U*i*s,d=U*c,I=Math.floor(d),m=Math.ceil(d);m>=a&&(m=a-1);var C=d-I,b=1-C;I=I*r*s,m=m*r*s;for(var y=0;y<i;y++){var S=y*s,h=y*F,Z=Math.floor(h),x=Math.ceil(h);x>=r&&(x=r-1);var p=h-Z;Z*=s,x*=s;for(var G=0;G<s;G++)Q[g+S+G]=e[B][I+Z+G]*b*(1-p)+e[B][I+x+G]*b*p+e[B][m+Z+G]*C*(1-p)+e[B][m+x+G]*C*p}}n.push(Q),t.width=i,t.height=o}else n.push(null);if(0===n.length)for(var R=0;R<e.length;R++)n.push(e[R]);return n}function s(e,t,n){for(var r=[],a=[],s=0;s<e;++s)r[s]=n[s],a[s]=n[s];for(var i=0,o=0;o<t;++o)for(var l=0;l<e;++l)n[i]<r[l]&&(r[l]=n[i]),n[i]>a[l]&&(a[l]=n[i]),i++;for(var B=[],Q=[],c=0;c<e;++c)r[c]===a[c]&&(a[c]=r[c]+1),B[c]=r[c],Q[c]=a[c]-r[c];return{scale:Q,offset:B}}t.classHierarchy.push("vtkOpenGLTexture"),e.render=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(n?t.openGLRenderWindow=n:(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent()),t.context=t.openGLRenderWindow.getContext(),t.renderable.getInterpolate()?(t.generateMipmap?e.setMinificationFilter(hn.LINEAR_MIPMAP_LINEAR):e.setMinificationFilter(hn.LINEAR),e.setMagnificationFilter(hn.LINEAR)):(e.setMinificationFilter(hn.NEAREST),e.setMagnificationFilter(hn.NEAREST)),t.renderable.getRepeat()&&(e.setWrapR(Sn.REPEAT),e.setWrapS(Sn.REPEAT),e.setWrapT(Sn.REPEAT)),t.renderable.getInputData()&&t.renderable.setImage(null),!t.handle||t.renderable.getMTime()>t.textureBuildTime.getMTime()){null!==t.renderable.getImage()&&(t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(hn.LINEAR_MIPMAP_LINEAR)),t.renderable.getImage()&&t.renderable.getImageLoaded()&&(e.create2DFromImage(t.renderable.getImage()),e.activate(),e.sendParameters(),t.textureBuildTime.modified()));var r=t.renderable.getInputData(0);if(r&&r.getPointData().getScalars()){for(var a=r.getExtent(),s=r.getPointData().getScalars(),i=[],o=0;o<t.renderable.getNumberOfInputPorts();++o){var l=t.renderable.getInputData(o),B=l?l.getPointData().getScalars().getData():null;B&&i.push(B)}t.renderable.getInterpolate()&&4===s.getNumberOfComponents()&&(t.generateMipmap=!0,e.setMinificationFilter(hn.LINEAR_MIPMAP_LINEAR)),i.length%6==0?e.createCubeFromRaw(a[1]-a[0]+1,a[3]-a[2]+1,s.getNumberOfComponents(),s.getDataType(),i):e.create2DFromRaw(a[1]-a[0]+1,a[3]-a[2]+1,s.getNumberOfComponents(),s.getDataType(),s.getData()),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}}t.handle&&e.activate()},e.destroyTexture=function(){e.deactivate(),t.context&&t.handle&&t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.components=0,t.width=0,t.height=0,t.depth=0,e.resetFormatAndType()},e.createTexture=function(){t.handle||(t.handle=t.context.createTexture(),t.target&&(t.context.bindTexture(t.target,t.handle),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.bindTexture(t.target,null)))},e.getTextureUnit=function(){return t.openGLRenderWindow?t.openGLRenderWindow.getTextureUnitForTexture(e):-1},e.activate=function(){t.openGLRenderWindow.activateTexture(e),e.bind()},e.deactivate=function(){t.openGLRenderWindow&&t.openGLRenderWindow.deactivateTexture(e)},e.releaseGraphicsResources=function(n){n&&t.handle&&(n.activateTexture(e),n.deactivateTexture(e),t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.internalFormat=0,t.format=0,t.openGLDataType=0,t.components=0,t.width=0,t.height=0,t.depth=0),t.shaderProgram&&(t.shaderProgram.releaseGraphicsResources(n),t.shaderProgram=null)},e.bind=function(){t.context.bindTexture(t.target,t.handle),t.autoParameters&&e.getMTime()>t.sendParametersTime.getMTime()&&e.sendParameters()},e.isBound=function(){var e=!1;if(t.context&&t.handle){var n=0;switch(t.target){case t.context.TEXTURE_2D:n=t.context.TEXTURE_BINDING_2D;break;default:Gn("impossible case")}e=t.context.getIntegerv(n)===t.handle}return e},e.sendParameters=function(){t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.openGLRenderWindow.getWebgl2()&&(t.context.texParameteri(t.target,t.context.TEXTURE_BASE_LEVEL,t.baseLevel),t.context.texParameteri(t.target,t.context.TEXTURE_MAX_LEVEL,t.maxLevel)),t.sendParametersTime.modified()},e.getInternalFormat=function(n,r){return t.internalFormat||(t.internalFormat=e.getDefaultInternalFormat(n,r)),t.internalFormat||xn("Unable to find suitable internal format for T=".concat(n," NC= ").concat(r)),t.internalFormat},e.getDefaultInternalFormat=function(e,r){var a=0;return(a=t.openGLRenderWindow.getDefaultTextureInternalFormat(e,r,!1))||(a=n.openGLRenderWindow.getDefaultTextureInternalFormat(e,r,!0))||(xn("Unsupported internal texture type!"),xn("Unable to find suitable internal format for T=".concat(e," NC= ").concat(r))),a},e.setInternalFormat=function(n){n!==t.internalFormat&&(t.internalFormat=n,e.modified())},e.getFormat=function(n,r){return t.format=e.getDefaultFormat(n,r),t.format},e.getDefaultFormat=function(e,n){if(t.openGLRenderWindow.getWebgl2())switch(n){case 1:return t.context.RED;case 2:return t.context.RG;case 3:return t.context.RGB;case 4:return t.context.RGBA;default:return t.context.RGB}else switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:return t.context.RGBA;default:return t.context.RGB}},e.resetFormatAndType=function(){t.format=0,t.internalFormat=0,t.openGLDataType=0},e.getDefaultDataType=function(e){if(t.openGLRenderWindow.getWebgl2())switch(e){case Zn.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case Zn.FLOAT:case Zn.VOID:default:return t.context.FLOAT}switch(e){case Zn.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case Zn.FLOAT:case Zn.VOID:default:return t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?t.context.FLOAT:t.context.UNSIGNED_BYTE}},e.getOpenGLDataType=function(n){return t.openGLDataType=e.getDefaultDataType(n),t.openGLDataType},e.getShiftAndScale=function(){var e=0,n=1;switch(t.openGLDataType){case t.context.BYTE:e=(n=127.5)-128;break;case t.context.UNSIGNED_BYTE:n=255,e=0;break;case t.context.SHORT:e=(n=32767.5)-32768;break;case t.context.UNSIGNED_SHORT:n=65536,e=0;break;case t.context.INT:e=(n=2147483647.5)-2147483648;break;case t.context.UNSIGNED_INT:n=4294967295,e=0;break;case t.context.FLOAT:}return{shift:e,scale:n}},e.getOpenGLFilterMode=function(e){switch(e){case hn.NEAREST:return t.context.NEAREST;case hn.LINEAR:return t.context.LINEAR;case hn.NEAREST_MIPMAP_NEAREST:return t.context.NEAREST_MIPMAP_NEAREST;case hn.NEAREST_MIPMAP_LINEAR:return t.context.NEAREST_MIPMAP_LINEAR;case hn.LINEAR_MIPMAP_NEAREST:return t.context.LINEAR_MIPMAP_NEAREST;case hn.LINEAR_MIPMAP_LINEAR:return t.context.LINEAR_MIPMAP_LINEAR;default:return t.context.NEAREST}},e.getOpenGLWrapMode=function(e){switch(e){case Sn.CLAMP_TO_EDGE:return t.context.CLAMP_TO_EDGE;case Sn.REPEAT:return t.context.REPEAT;case Sn.MIRRORED_REPEAT:return t.context.MIRRORED_REPEAT;default:return t.context.CLAMP_TO_EDGE}},e.create2DFromRaw=function(n,s,i,o,l){if(e.getOpenGLDataType(o),e.getInternalFormat(o,i),e.getFormat(o,i),!t.internalFormat||!t.format||!t.openGLDataType)return pn("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=i,t.width=n,t.height=s,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var B=a(r(o,[l]));return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,B[0]),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.createCubeFromRaw=function(n,s,i,o,l){if(e.getOpenGLDataType(o),e.getInternalFormat(o,i),e.getFormat(o,i),!t.internalFormat||!t.format||!t.openGLDataType)return pn("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_CUBE_MAP,t.components=i,t.width=n,t.height=s,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),t.maxLevel=l.length/6-1,e.createTexture(),e.bind();for(var B=a(r(o,l)),Q=[],c=t.width,F=t.height,U=0;U<B.length;U++){U%6==0&&0!==U&&(c/=2,F/=2),Q[U]=new window[o](F*c*t.components);for(var g=0;g<F;++g){var d=g*c*t.components,u=(F-g-1)*c*t.components;Q[U].set(B[U].slice(u,u+c*t.components),d)}}t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1);for(var I=0;I<6;I++)for(var m=0,C=t.width,b=t.height;C>=1&&b>=1;){var y=null;m<=t.maxLevel&&(y=Q[6*m+I]),t.context.texImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+I,m,t.internalFormat,C,b,0,t.format,t.openGLDataType,y),m++,C/=2,b/=2}return e.deactivate(),!0},e.createDepthFromRaw=function(n,r,a,s){return e.getOpenGLDataType(a),t.format=t.context.DEPTH_COMPONENT,t.openGLRenderWindow.getWebgl2()?a===Zn.FLOAT?t.internalFormat=t.context.DEPTH_COMPONENT32F:t.internalFormat=t.context.DEPTH_COMPONENT16:t.internalFormat=t.context.DEPTH_COMPONENT,t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_2D,t.components=1,t.width=n,t.height=r,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,s),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0):(pn("Failed to determine texture parameters."),!1)},e.create2DFromImage=function(n){if(e.getOpenGLDataType(Zn.UNSIGNED_CHAR),e.getInternalFormat(Zn.UNSIGNED_CHAR,4),e.getFormat(Zn.UNSIGNED_CHAR,4),!t.internalFormat||!t.format||!t.openGLDataType)return pn("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=4,t.width=n.width,t.height=n.height,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1);var r=!Object(u.m)(n.width)||!Object(u.m)(n.height),a=document.createElement("canvas");a.width=r?Object(u.h)(n.width):n.width,a.height=r?Object(u.h)(n.height):n.height;var s=a.getContext("2d");s.translate(0,a.height),s.scale(1,-1),s.drawImage(n,0,0,n.width,n.height,0,0,a.width,a.height),navigator.userAgent.indexOf("Chrome/69")>=0&&s.getImageData(0,0,1,1);var i=a;return t.context.texImage2D(t.target,0,t.internalFormat,t.format,t.openGLDataType,i),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.create3DFromRaw=function(n,r,a,s,i,o){return e.getOpenGLDataType(i),e.getInternalFormat(i,s),e.getFormat(i,s),t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_3D,t.components=s,t.width=n,t.height=r,t.depth=a,t.numberOfDimensions=3,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.texImage3D(t.target,0,t.internalFormat,t.width,t.height,t.depth,0,t.format,t.openGLDataType,o),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0):(pn("Failed to determine texture parameters."),!1)},e.create3DFilterableFromRaw=function(n,r,a,i,o,l){for(var B=n*r*a,Q=[],c=[],F=0;F<i;++F)Q[F]=0,c[F]=1;if(t.volumeInfo={scale:c,offset:Q,width:n,height:r,depth:a},t.openGLRenderWindow.getWebgl2()){if(o===Zn.FLOAT)return e.create3DFromRaw(n,r,a,i,o,l);if(o===Zn.UNSIGNED_CHAR){for(var U=0;U<i;++U)t.volumeInfo.scale[U]=255;return e.create3DFromRaw(n,r,a,i,o,l)}var g=new Float32Array(B*i),d=s(i,B,l),I=d.offset,m=d.scale;t.volumeInfo.offset=I,t.volumeInfo.scale=m;for(var C=0,b=m.map((function(e){return 1/e})),y=0;y<B;y++)for(var S=0;S<i;S++)g[C]=(l[C]-I[S])*b[S],C++;return e.create3DFromRaw(n,r,a,i,Zn.FLOAT,g)}var h=s(i,B,l),Z=function(e,t,n,r,a){e[t]=n},x=Zn.UNSIGNED_CHAR;if(o===Zn.UNSIGNED_CHAR)for(var p=0;p<i;++p)h.offset[p]=0,h.scale[p]=255;else t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?(x=Zn.FLOAT,Z=function(e,t,n,r,a){e[t]=(n-r)/a}):(x=Zn.UNSIGNED_CHAR,Z=function(e,t,n,r,a){e[t]=255*(n-r)/a});if(e.getOpenGLDataType(x),e.getInternalFormat(x,i),e.getFormat(x,i),!t.internalFormat||!t.format||!t.openGLDataType)return pn("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=i,t.depth=1,t.numberOfDimensions=2;var G=t.context.getParameter(t.context.MAX_TEXTURE_SIZE);G>4096&&(x===Zn.FLOAT||i>=3)&&(G=4096);var R=1,L=1;B>G*G&&(L=R=Math.ceil(Math.sqrt(B/(G*G))));var V=Math.sqrt(B)/R;V=Object(u.h)(V);var A,f=Math.floor(V*R/n),N=Math.ceil(a/f),E=Object(u.h)(r*N/L);t.width=V,t.height=E,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.volumeInfo.xreps=f,t.volumeInfo.yreps=N,t.volumeInfo.xstride=R,t.volumeInfo.ystride=L,t.volumeInfo.offset=h.offset,t.volumeInfo.scale=h.scale;var D=V*E*i;A=x===Zn.FLOAT?new Float32Array(D):new Uint8Array(D);for(var v=0,J=Math.floor(n/R),W=Math.floor(r/L),X=0;X<N;X++)for(var H=Math.min(f,a-X*f),T=i*(t.width-H*Math.floor(n/R)),k=0;k<W;k++){for(var M=0;M<H;M++)for(var w=i*((X*f+M)*n*r+L*k*n),Y=0;Y<J;Y++)for(var O=0;O<i;O++)Z(A,v,l[w+R*Y*i+O],h.offset[O],h.scale[O]),v++;v+=T}return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,A),e.deactivate(),!0},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.getMaximumTextureSize=function(e){return e&&e.isCurrent()?e.getIntegerv(e.MAX_TEXTURE_SIZE):-1}}var Ln={openGLRenderWindow:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:Sn.CLAMP_TO_EDGE,wrapT:Sn.CLAMP_TO_EDGE,wrapR:Sn.CLAMP_TO_EDGE,minificationFilter:hn.NEAREST,magnificationFilter:hn.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1};function Vn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ln,n),an.extend(e,t,n),t.sendParametersTime={},a.c.obj(t.sendParametersTime,{mtime:0}),t.textureBuildTime={},a.c.obj(t.textureBuildTime,{mtime:0}),a.c.set(e,t,["format","openGLDataType"]),a.c.setGet(e,t,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap"]),a.c.get(e,t,["width","height","volumeInfo","components","handle","target"]),Rn(e,t)}var An=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(Vn,"vtkOpenGLTexture"),extend:Vn},bn);function fn(e,t){t.classHierarchy.push("vtkFramebuffer"),e.getBothMode=function(){return t.context.FRAMEBUFFER},e.saveCurrentBindingsAndBuffers=function(t){var n=void 0!==t?t:e.getBothMode();e.saveCurrentBindings(n),e.saveCurrentBuffers(n)},e.saveCurrentBindings=function(e){var n=t.context;t.previousDrawBinding=n.getParameter(t.context.FRAMEBUFFER_BINDING),t.previousActiveFramebuffer=t.openGLRenderWindow.getActiveFramebuffer()},e.saveCurrentBuffers=function(e){},e.restorePreviousBindingsAndBuffers=function(t){var n=void 0!==t?t:e.getBothMode();e.restorePreviousBindings(n),e.restorePreviousBuffers(n)},e.restorePreviousBindings=function(e){var n=t.context;n.bindFramebuffer(n.FRAMEBUFFER,t.previousDrawBinding),t.openGLRenderWindow.setActiveFramebuffer(t.previousActiveFramebuffer)},e.restorePreviousBuffers=function(e){},e.bind=function(){t.context.bindFramebuffer(t.context.FRAMEBUFFER,t.glFramebuffer),t.colorTexture&&t.colorTexture.bind(),t.openGLRenderWindow.setActiveFramebuffer(e)},e.create=function(e,n){t.glFramebuffer=t.context.createFramebuffer(),t.glFramebuffer.width=e,t.glFramebuffer.height=n},e.setColorBuffer=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.context,s=r.COLOR_ATTACHMENT0;if(n>0){if(!t.openGLRenderWindow.getWebgl2())return void Object(a.l)("Using multiple framebuffer attachments requires WebGL 2");s+=n}t.colorTexture=e,r.framebufferTexture2D(r.FRAMEBUFFER,s,r.TEXTURE_2D,e.getHandle(),0)},e.removeColorBuffer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=t.context,r=n.COLOR_ATTACHMENT0;if(e>0){if(!t.openGLRenderWindow.getWebgl2())return void Object(a.l)("Using multiple framebuffer attachments requires WebGL 2");r+=e}n.framebufferTexture2D(n.FRAMEBUFFER,r,n.TEXTURE_2D,null,0)},e.setDepthBuffer=function(e){if(t.openGLRenderWindow.getWebgl2()){var n=t.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,e.getHandle(),0)}else Object(a.l)("Attaching depth buffer textures to fbo requires WebGL 2")},e.removeDepthBuffer=function(){if(t.openGLRenderWindow.getWebgl2()){var e=t.context;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,null,0)}else Object(a.l)("Attaching depth buffer textures to framebuffers requires WebGL 2")},e.getGLFramebuffer=function(){return t.glFramebuffer},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.releaseGraphicsResources=function(){t.glFramebuffer&&t.context.deleteFramebuffer(t.glFramebuffer),t.colorTexture&&t.colorTexture.releaseGraphicsResources()},e.getSize=function(){var e=[0,0];return null!==t.glFramebuffer&&(e[0]=t.glFramebuffer.width,e[1]=t.glFramebuffer.height),e},e.populateFramebuffer=function(){e.bind();var n=t.context,r=An.newInstance();r.setOpenGLRenderWindow(t.openGLRenderWindow),r.setMinificationFilter(Cn.LINEAR),r.setMagnificationFilter(Cn.LINEAR),r.create2DFromRaw(t.glFramebuffer.width,t.glFramebuffer.height,4,D.b.UNSIGNED_CHAR,null),e.setColorBuffer(r),t.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,t.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t.glFramebuffer.width,t.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,t.depthTexture)}}var Nn={openGLRenderWindow:null,glFramebuffer:null,colorTexture:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function En(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nn,n),Object(a.g)(e,t),Object(a.i)(e,t,["colorTexture"]),fn(e,t)}var Dn={newInstance:Object(a.f)(En,"vtkFramebuffer"),extend:En};function vn(e,t){t.classHierarchy.push("vtkForwardPass"),e.traverse=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t.deleted){t.currentParent=r,e.setCurrentOperation("buildPass"),n.traverse(e);for(var a=n.getRenderable().getNumberOfLayers(),s=n.getChildren(),i=0;i<a;i++)for(var o=0;o<s.length;o++){var l=s[o],B=n.getRenderable().getRenderers()[o];if(B.getDraw()&&B.getLayer()===i){if(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumeCount=0,e.setCurrentOperation("queryPass"),l.traverse(e),t.opaqueActorCount>0&&t.volumeCount>0||t.depthRequested){var Q=n.getFramebufferSize();null===t.framebuffer&&(t.framebuffer=Dn.newInstance()),t.framebuffer.setOpenGLRenderWindow(n),t.framebuffer.saveCurrentBindingsAndBuffers();var c=t.framebuffer.getSize();null!==c&&c[0]===Q[0]&&c[1]===Q[1]||(t.framebuffer.create(Q[0],Q[1]),t.framebuffer.populateFramebuffer()),t.framebuffer.bind(),e.setCurrentOperation("opaqueZBufferPass"),l.traverse(e),t.framebuffer.restorePreviousBindingsAndBuffers(),t.depthRequested=!1}e.setCurrentOperation("cameraPass"),l.traverse(e),t.opaqueActorCount>0&&(e.setCurrentOperation("opaquePass"),l.traverse(e)),t.translucentActorCount>0&&(e.setCurrentOperation("translucentPass"),l.traverse(e)),t.volumeCount>0&&(e.setCurrentOperation("volumePass"),l.traverse(e))}}}},e.getZBufferTexture=function(){return t.framebuffer?t.framebuffer.getColorTexture():null},e.requestDepth=function(){t.depthRequested=!0},e.incrementOpaqueActorCount=function(){return t.opaqueActorCount++},e.incrementTranslucentActorCount=function(){return t.translucentActorCount++},e.incrementVolumeCount=function(){return t.volumeCount++}}var Jn={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,framebuffer:null,depthRequested:!1};function Wn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jn,n),In.extend(e,t,n),a.c.get(e,t,["framebuffer"]),vn(e,t)}var Xn={newInstance:a.c.newInstance(Wn,"vtkForwardPass"),extend:Wn};function Hn(e,t){t.classHierarchy.push("vtkGenericWidgetRepresentation")}var Tn={};function kn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tn,n),an.extend(e,t,n),Hn(0,t)}var Mn={newInstance:a.c.newInstance(kn),extend:kn};function wn(e,t){t.classHierarchy.push("vtkOpenGLActor"),e.buildPass=function(n){if(n){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t.openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes(),t.ogltextures=null,t.activeTextures=null;for(var r=0;r<t.children.length;r++){var a=t.children[r];a.isA("vtkOpenGLTexture")?(t.ogltextures||(t.ogltextures=[]),t.ogltextures.push(a)):t.oglmapper=a}}},e.traverseOpaqueZBufferPass=function(t){e.traverseOpaquePass(t)},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.activateTextures=function(){if(t.ogltextures){t.activeTextures=[];for(var e=0;e<t.ogltextures.length;e++){var n=t.ogltextures[e];n.render(),n.getHandle()&&t.activeTextures.push(n)}}},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.opaqueZBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaquePass=function(n,r){if(n)t.openGLRenderWindow.enableDepthMask(),e.activateTextures();else if(t.activeTextures)for(var a=0;a<t.activeTextures.length;a++)t.activeTextures[a].deactivate()},e.translucentPass=function(n,r){if(n)t.openGLRenderWindow.disableDepthMask(),e.activateTextures();else if(t.activeTextures)for(var a=0;a<t.activeTextures.length;a++)t.activeTextures[a].deactivate()},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),Object(b.d)(t.keyMatrices.mcwc,t.renderable.getMatrix()),Object(b.i)(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.renderable.getIsIdentity()?dt(t.keyMatrices.normalMatrix):(gt(t.keyMatrices.normalMatrix,t.keyMatrices.mcwc),It(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),ut(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),t.keyMatrixTime.modified()),t.keyMatrices}}var Yn={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function On(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yn,n),an.extend(e,t,n),t.keyMatrixTime={},a.c.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:dt(new Float64Array(9)),mcwc:Object(b.h)(new Float64Array(16))},a.c.setGet(e,t,["context"]),a.c.get(e,t,["activeTextures"]),wn(e,t)}var zn={newInstance:a.c.newInstance(On),extend:On};function Pn(e,t){t.classHierarchy.push("vtkOpenGLActor2D"),e.buildPass=function(n){if(n){if(!t.renderable)return;t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children.forEach((function(e){e.isA("vtkOpenGLTexture")||e.traverse(n)})),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.children.forEach((function(e){e.isA("vtkOpenGLTexture")||e.traverse(n)})),e.apply(n,!1))},e.activateTextures=function(){t.activeTextures=[],t.children.forEach((function(e){e.isA("vtkOpenGLTexture")&&(e.render(),e.getHandle()&&t.activeTextures.push(e))}))},e.opaquePass=function(n,r){n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!0),e.activateTextures()):t.activeTextures.forEach((function(e){e.deactivate()}))},e.translucentPass=function(n,r){n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1),e.activateTextures()):(t.activeTextures.forEach((function(e){e.deactivate()})),t.context.depthMask(!0))}}var Kn={context:null,activeTextures:[]};function jn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Kn,n),an.extend(e,t,n),Object(a.i)(e,t,["context"]),Object(a.d)(e,t,["activeTextures"]),Pn(e,t)}var _n={newInstance:Object(a.f)(jn),extend:jn};function qn(e,t){t.classHierarchy.push("vtkOpenGLCamera"),e.buildPass=function(n){n&&(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext())},e.opaquePass=function(e){if(e){var n=t.openGLRenderer.getTiledSizeAndOrigin();t.context.viewport(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize),t.context.scissor(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize)}},e.translucentPass=e.opaquePass,e.opaqueZBufferPass=e.opaquePass,e.volumePass=e.opaquePass,e.getKeyMatrices=function(n){if(n!==t.lastRenderer||t.openGLRenderWindow.getMTime()>t.keyMatrixTime.getMTime()||e.getMTime()>t.keyMatrixTime.getMTime()||n.getMTime()>t.keyMatrixTime.getMTime()||t.renderable.getMTime()>t.keyMatrixTime.getMTime()){Object(b.d)(t.keyMatrices.wcvc,t.renderable.getViewMatrix()),gt(t.keyMatrices.normalMatrix,t.keyMatrices.wcvc),It(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),Object(b.i)(t.keyMatrices.wcvc,t.keyMatrices.wcvc);var r=t.openGLRenderer.getAspectRatio();Object(b.d)(t.keyMatrices.vcpc,t.renderable.getProjectionMatrix(r,-1,1)),Object(b.i)(t.keyMatrices.vcpc,t.keyMatrices.vcpc),Object(b.l)(t.keyMatrices.wcpc,t.keyMatrices.vcpc,t.keyMatrices.wcvc),t.keyMatrixTime.modified(),t.lastRenderer=n}return t.keyMatrices}}var $n={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function er(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$n,n),an.extend(e,t,n),t.keyMatrixTime={},Object(a.g)(t.keyMatrixTime),t.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},Object(a.i)(e,t,["context","keyMatrixTime"]),qn(e,t)}var tr={newInstance:Object(a.f)(er),extend:er},nr={FLAT:0,GOURAUD:1,PHONG:2},rr={POINTS:0,WIREFRAME:1,SURFACE:2},ar={Shading:nr,Representation:rr,Interpolation:nr};function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ir=ar.Representation,or=ar.Interpolation;function lr(e){return function(){return a.c.vtkErrorMacro("vtkProperty::".concat(e," - NOT IMPLEMENTED"))}}function Br(e,t){t.classHierarchy.push("vtkProperty"),e.setColor=function(n,r,a){Array.isArray(n)?t.color[0]===n[0]&&t.color[1]===n[1]&&t.color[2]===n[2]||(t.color[0]=n[0],t.color[1]=n[1],t.color[2]=n[2],e.modified()):t.color[0]===n&&t.color[1]===r&&t.color[2]===a||(t.color[0]=n,t.color[1]=r,t.color[2]=a,e.modified()),e.setDiffuseColor(t.color),e.setAmbientColor(t.color),e.setSpecularColor(t.color)},e.computeCompositeColor=lr("ComputeCompositeColor"),e.getColor=function(){var e=0;t.ambient+t.diffuse+t.specular>0&&(e=1/(t.ambient+t.diffuse+t.specular));for(var n=0;n<3;n++)t.color[n]=e*(t.ambient*t.ambientColor[n]+t.diffuse*t.diffuseColor[n]+t.specular*t.specularColor[n]);return[].concat(t.color)},e.addShaderVariable=lr("AddShaderVariable"),e.setInterpolationToFlat=function(){return e.setInterpolation(or.FLAT)},e.setInterpolationToGouraud=function(){return e.setInterpolation(or.GOURAUD)},e.setInterpolationToPhong=function(){return e.setInterpolation(or.PHONG)},e.getInterpolationAsString=function(){return a.c.enumToString(or,t.interpolation)},e.setRepresentationToWireframe=function(){return e.setRepresentation(ir.WIREFRAME)},e.setRepresentationToSurface=function(){return e.setRepresentation(ir.SURFACE)},e.setRepresentationToPoints=function(){return e.setRepresentation(ir.POINTS)},e.getRepresentationAsString=function(){return a.c.enumToString(ir,t.representation)}}var Qr={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,specular:0,specularPower:1,opacity:1,interpolation:or.GOURAUD,representation:ir.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function cr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qr,n),a.c.obj(e,t),a.c.setGet(e,t,["lighting","interpolation","ambient","diffuse","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation"]),a.c.setGetArray(e,t,["ambientColor","specularColor","diffuseColor","edgeColor"],3),Br(e,t)}var Fr=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(cr,"vtkProperty"),extend:cr},ar),Ur={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4},gr={VectorMode:{MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},ScalarMappingTarget:Ur},dr={ColorMode:{DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},GetArray:{BY_ID:0,BY_NAME:1},ScalarMode:{DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5}};function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ir=gr.ScalarMappingTarget,mr=gr.VectorMode,Cr=s.a.VtkDataTypes,br=dr.ColorMode,yr=a.c.vtkErrorMacro;function Sr(e){return e}function hr(e){return Math.floor(255*e+.5)}function Zr(e,t){t.classHierarchy.push("vtkScalarsToColors"),e.setVectorModeToMagnitude=function(){return e.setVectorMode(mr.MAGNITUDE)},e.setVectorModeToComponent=function(){return e.setVectorMode(mr.COMPONENT)},e.setVectorModeToRGBColors=function(){return e.setVectorMode(mr.RGBCOLORS)},e.build=function(){},e.isOpaque=function(){return!0},e.setAnnotations=function(n,r){if(!(n&&!r||!n&&r))if(n&&r&&n.length!==r.length)yr("Values and annotations do not have the same number of tuples so ignoring");else{if(t.annotationArray=[],r&&n)for(var a=r.length,s=0;s<a;s++)t.annotationArray.push({value:n[s],annotation:String(r[s])});e.updateAnnotatedValueMap(),e.modified()}},e.setAnnotation=function(n,r){var a=e.checkForAnnotatedValue(n),s=!1;return a>=0?t.annotationArray[a].annotation!==r&&(t.annotationArray[a].annotation=r,s=!0):(t.annotationArray.push({value:n,annotation:r}),a=t.annotationArray.length-1,s=!0),s&&(e.updateAnnotatedValueMap(),e.modified()),a},e.getNumberOfAnnotatedValues=function(){return t.annotationArray.length},e.getAnnotatedValue=function(e){return e<0||e>=t.annotationArray.length?null:t.annotationArray[e].value},e.getAnnotation=function(e){return void 0===t.annotationArray[e]?null:t.annotationArray[e].annotation},e.getAnnotatedValueIndex=function(n){return t.annotationArray.length?e.checkForAnnotatedValue(n):-1},e.removeAnnotation=function(n){var r=e.checkForAnnotatedValue(n),a=r>=0;return a&&(t.annotationArray.splice(r,1),e.updateAnnotatedValueMap(),e.modified()),a},e.resetAnnotations=function(){t.annotationArray=[],t.annotatedValueMap=[],e.modified()},e.getAnnotationColor=function(n,r){if(t.indexedLookup){var a=e.getAnnotatedValueIndex(n);e.getIndexedColor(a,r)}else e.getColor(parseFloat(n),r),r[3]=1},e.checkForAnnotatedValue=function(t){return e.getAnnotatedValueIndexInternal(t)},e.getAnnotatedValueIndexInternal=function(e){if(void 0!==t.annotatedValueMap[e]){var n=t.annotationArray.length;return t.annotatedValueMap[e]%n}return-1},e.getIndexedColor=function(e,t){t[0]=0,t[1]=0,t[2]=0,t[3]=0},e.updateAnnotatedValueMap=function(){t.annotatedValueMap=[];for(var e=t.annotationArray.length,n=0;n<e;n++)t.annotatedValueMap[t.annotationArray[n].value]=n},e.mapScalars=function(t,n,r){var a=t.getNumberOfComponents(),i=null;if(n===br.DEFAULT&&t.getDataType()===Cr.UNSIGNED_CHAR||n===br.DIRECT_SCALARS&&t)i=e.convertToRGBA(t,a,t.getNumberOfTuples());else{var o={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:Cr.UNSIGNED_CHAR},l=new window[o.dataType](4*t.getNumberOfTuples());o.values=l,o.size=l.length,i=s.a.newInstance(o);var B=r;B<0&&a>1?e.mapVectorsThroughTable(t,i,Ir.RGBA,-1,-1):(B<0&&(B=0),B>=a&&(B=a-1),e.mapScalarsThroughTable(t,i,Ir.RGBA,B))}return i},e.mapVectorsToMagnitude=function(e,t,n){for(var r=e.getNumberOfTuples(),a=e.getNumberOfComponents(),s=t.getData(),i=e.getData(),o=0;o<r;o++){for(var l=0,B=0;B<n;B++)l+=i[o*a+B]*i[o*a+B];s[o]=Math.sqrt(l)}},e.mapVectorsThroughTable=function(t,n,r,a,i){var o=e.getVectorMode(),l=i,B=a,Q=t.getNumberOfComponents();o===mr.COMPONENT?(-1===B&&(B=e.getVectorComponent()),B<0&&(B=0),B>=Q&&(B=Q-1)):(-1===l&&(l=e.getVectorSize()),l<=0?(B=0,l=Q):(B<0&&(B=0),B>=Q&&(B=Q-1),B+l>Q&&(l=Q-B)),o!==mr.MAGNITUDE||1!==Q&&1!==l||(o=mr.COMPONENT));var c=0;switch(B>0&&(c=B),o){case mr.COMPONENT:e.mapScalarsThroughTable(t,n,r,c);break;default:case mr.MAGNITUDE:var F=s.a.newInstance({numberOfComponents:1,values:new Float32Array(t.getNumberOfTuples())});e.mapVectorsToMagnitude(t,F,l),e.mapScalarsThroughTable(F,n,r,0);break;case mr.RGBCOLORS:}},e.luminanceToRGBA=function(e,t,n,r){for(var a=r(n),s=t.getData(),i=e.getData(),o=s.length,l=0,B=0;B<o;B+=1){var Q=r(s[B]);i[4*l]=Q,i[4*l+1]=Q,i[4*l+2]=Q,i[4*l+3]=a,l++}},e.luminanceAlphaToRGBA=function(e,t,n,r){for(var a=t.getData(),s=e.getData(),i=a.length,o=0,l=0;l<i;l+=2){var B=r(a[l]);s[o]=B,s[o+1]=B,s[o+2]=B,s[o+3]=r(a[l+1])*n,o+=4}},e.rGBToRGBA=function(e,t,n,r){for(var a=hr(n),s=t.getData(),i=e.getData(),o=s.length,l=0,B=0;B<o;B+=3)i[4*l]=r(s[B]),i[4*l+1]=r(s[B+1]),i[4*l+2]=r(s[B+2]),i[4*l+3]=a,l++},e.rGBAToRGBA=function(e,t,n,r){for(var a=t.getData(),s=e.getData(),i=a.length,o=0,l=0;l<i;l+=4)s[4*o]=r(a[l]),s[4*o+1]=r(a[l+1]),s[4*o+2]=r(a[l+2]),s[4*o+3]=r(a[l+3])*n,o++},e.convertToRGBA=function(n,r,a){var i=t.alpha;if(4===r&&i>=1&&n.getDataType()===Cr.UNSIGNED_CHAR)return n;var o=s.a.newInstance({numberOfComponents:4,empty:!0,size:4*a,dataType:Cr.UNSIGNED_CHAR});if(a<=0)return o;i=(i=i>0?i:0)<1?i:1;var l=Sr;switch(n.getDataType()!==Cr.FLOAT&&n.getDataType()!==Cr.DOUBLE||(l=hr),r){case 1:e.luminanceToRGBA(o,n,i,l);break;case 2:e.luminanceAlphaToRGBA(o,n,l);break;case 3:e.rGBToRGBA(o,n,i,l);break;case 4:e.rGBAToRGBA(o,n,i,l);break;default:return yr("Cannot convert colors"),null}return o},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return 16777216},e.setRange=function(t,n){return e.setMappingRange(t,n)},e.getRange=function(t,n){return e.getMappingRange()}}var xr={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:mr.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function pr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xr,n),a.c.obj(e,t),t.mappingRange=[0,255],t.annotationArray=[],t.annotatedValueMap=[],a.c.setGet(e,t,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),a.c.setArray(e,t,["mappingRange"],2),a.c.getArray(e,t,["mappingRange"]),Zr(e,t)}var Gr=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(pr,"vtkScalarsToColors"),extend:pr},gr),Rr=a.c.vtkErrorMacro;function Lr(e,t){t.classHierarchy.push("vtkLookupTable"),e.isOpaque=function(){if(t.opaqueFlagBuildTime.getMTime()<e.getMTime()){var n=!0;t.nanColor[3]<1&&(n=0),t.useBelowRangeColor&&t.belowRangeColor[3]<1&&(n=0),t.useAboveRangeColor&&t.aboveRangeColor[3]<1&&(n=0);for(var r=3;r<t.table.length&&n;r+=4)t.table[r]<255&&(n=!1);t.opaqueFlag=n,t.opaqueFlagBuildTime.modified()}return t.opaqueFlag},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return t.table.length},e.linearIndexLookup=function(e,t){var n=0;return n=e<t.range[0]?t.maxIndex+0+1.5:e>t.range[1]?t.maxIndex+1+1.5:(n=(e+t.shift)*t.scale)<t.maxIndex?n:t.maxIndex,Math.floor(n)},e.linearLookup=function(t,n,r){var a=4*(Object(u.v)(t)?Math.floor(r.maxIndex+1.5+2):e.linearIndexLookup(t,r));return[n[a],n[a+1],n[a+2],n[a+3]]},e.indexedLookupFunction=function(n,r,a){var s=e.getAnnotatedValueIndexInternal(n);-1===s&&(s=t.numberOfColors+2);var i=4*s;return[r[i],r[i+1],r[i+2],r[i+3]]},e.lookupShiftAndScale=function(e,t){t.shift=-e[0],t.scale=Number.MAX_VALUE,e[1]>e[0]&&(t.scale=(t.maxIndex+1)/(e[1]-e[0]))},e.mapScalarsThroughTable=function(n,r,a,s){var i=e.linearLookup;t.indexedLookup&&(i=e.indexedLookupFunction);var o=e.getMappingRange(),l={maxIndex:e.getNumberOfColors()-1,range:o,shift:0,scale:0};e.lookupShiftAndScale(o,l);var B=e.getAlpha(),Q=n.getNumberOfTuples(),c=n.getNumberOfComponents(),F=r.getData(),U=n.getData();if(B>=1){if(a===Ur.RGBA)for(var g=0;g<Q;g++){var d=i(U[g*c+s],t.table,l);F[4*g]=d[0],F[4*g+1]=d[1],F[4*g+2]=d[2],F[4*g+3]=d[3]}}else if(a===Ur.RGBA)for(var u=0;u<Q;u++){var I=i(U[u*c+s],t.table,l);F[4*u]=I[0],F[4*u+1]=I[1],F[4*u+2]=I[2],F[4*u+3]=Math.floor(I[3]*B+.5)}},e.forceBuild=function(){var n=0,r=0,a=0,s=0,i=t.numberOfColors-1;i&&(n=(t.hueRange[1]-t.hueRange[0])/i,r=(t.saturationRange[1]-t.saturationRange[0])/i,a=(t.valueRange[1]-t.valueRange[0])/i,s=(t.alphaRange[1]-t.alphaRange[0])/i);for(var o=[],l=[],B=0;B<=i;B++)o[0]=t.hueRange[0]+B*n,o[1]=t.saturationRange[0]+B*r,o[2]=t.valueRange[0]+B*a,Object(u.u)(o,l),l[3]=t.alphaRange[0]+B*s,t.table[4*B]=255*l[0]+.5,t.table[4*B+1]=255*l[1]+.5,t.table[4*B+2]=255*l[2]+.5,t.table[4*B+3]=255*l[3]+.5;e.buildSpecialColors(),t.buildTime.modified()},e.setTable=function(n){if(4===n.getNumberOfComponents())if(n.getDataType()===D.b.UNSIGNED_CHAR){t.numberOfColors=n.getNumberOfTuples();for(var r=n.getData(),a=0;a<r.length;a++)t.table[a]=r[a];e.buildSpecialColors(),t.insertTime.modified(),e.modified()}else Rr("Expected unsigned char values for RGBA colors");else Rr("Expected 4 components for RGBA colors")},e.buildSpecialColors=function(){var e=t.numberOfColors,n=t.table,r=4*(e+0);t.useBelowRangeColor||0===e?(n[r]=255*t.belowRangeColor[0]+.5,n[r+1]=255*t.belowRangeColor[1]+.5,n[r+2]=255*t.belowRangeColor[2]+.5,n[r+3]=255*t.belowRangeColor[3]+.5):(n[r]=n[0],n[r+1]=n[1],n[r+2]=n[2],n[r+3]=n[3]),r=4*(e+1),t.useAboveRangeColor||0===e?(n[r]=255*t.aboveRangeColor[0]+.5,n[r+1]=255*t.aboveRangeColor[1]+.5,n[r+2]=255*t.aboveRangeColor[2]+.5,n[r+3]=255*t.aboveRangeColor[3]+.5):(n[r]=n[4*(e-1)+0],n[r+1]=n[4*(e-1)+1],n[r+2]=n[4*(e-1)+2],n[r+3]=n[4*(e-1)+3]),n[r=4*(e+2)]=255*t.nanColor[0]+.5,n[r+1]=255*t.nanColor[1]+.5,n[r+2]=255*t.nanColor[2]+.5,n[r+3]=255*t.nanColor[3]+.5},e.build=function(){(t.table.length<1||e.getMTime()>t.buildTime.getMTime()&&t.insertTime.getMTime()<=t.buildTime.getMTime())&&e.forceBuild()},t.table.length>0&&t.insertTime.modified()}var Vr={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function Ar(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Vr,n),Gr.extend(e,t,n),t.table||(t.table=[]),t.buildTime={},a.c.obj(t.buildTime),t.opaqueFlagBuildTime={},a.c.obj(t.opaqueFlagBuildTime,{mtime:0}),t.insertTime={},a.c.obj(t.insertTime,{mtime:0}),a.c.get(e,t,["buildTime"]),a.c.setGet(e,t,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),a.c.setArray(e,t,["alphaRange","hueRange","saturationRange","valueRange"],2),a.c.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),a.c.getArray(e,t,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),Lr(e,t)}var fr={newInstance:a.c.newInstance(Ar,"vtkLookupTable"),extend:Ar};function Nr(e,t){e.update=function(){e.getInputData()},e.addClippingPlane=function(e){"vtkPlane"===e.getClassName()&&t.clippingPlanes.push(e)},e.getNumberOfClippingPlanes=function(){return t.clippingPlanes.length},e.removeAllClippingPlanes=function(){t.clippingPlanes.length=0},e.removeClippingPlane=function(e){e<0||e>=6||t.clippingPlanes.splice(e,1)},e.getClippingPlanes=function(){return t.clippingPlanes},e.setClippingPlanes=function(t){if(t)if(Array.isArray(t))for(var n=t.length,r=0;r<n&&r<6;r++)e.addClippingPlane(t[r]);else e.addClippingPlane(t)}}var Er={clippingPlanes:[]};var Dr={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Er,n),a.c.obj(e,t),a.c.algo(e,t,1,0),t.clippingPlanes||(t.clippingPlanes=[]),Nr(e,t)}};function vr(e,t){e.getBounds=function(){return 0},e.getBounds=function(n){e.getBounds();for(var r=0;r<6;r++)n[r]=t.bounds[r]},e.getCenter=function(){e.getBounds();for(var n=0;n<3;n++)t.center[n]=(t.bounds[2*n+1]+t.bounds[2*n])/2;return t.center.slice()},e.getLength=function(){var n=0,r=0;e.getBounds();for(var a=0;a<3;a++)r+=(n=t.bounds[2*a+1]-t.bounds[2*a])*n;return Math.sqrt(r)},e.getClippingPlaneInDataCoords=function(e,n,r){var s=t.clippingPlanes,i=e;if(s){var o=s.length;if(n>=0&&n<o){var l=s[n],B=l.getNormal(),Q=l.getOrigin(),c=B[0],F=B[1],U=B[2],g=-(c*Q[0]+F*Q[1]+U*Q[2]);return r[0]=c*i[0]+F*i[4]+U*i[8]+g*i[12],r[1]=c*i[1]+F*i[5]+U*i[9]+g*i[13],r[2]=c*i[2]+F*i[6]+U*i[10]+g*i[14],void(r[3]=c*i[3]+F*i[7]+U*i[11]+g*i[15])}}a.c.vtkErrorMacro("Clipping plane index ".concat(n," is out of range."))}}var Jr={bounds:[1,-1,1,-1,1,-1],center:[0,0,0]};var Wr={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jr,n),Dr.extend(e,t,n),t.bounds||Object(u.D)(t.bounds),t.center||(t.center=[0,0,0]),vr(e,t)}},Xr=1,Hr=0,Tr=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Hr=e}var Mr={getResolveCoincidentTopologyAsString:function(){return Tr[Hr]},getResolveCoincidentTopologyPolygonOffsetFaces:function(){return Xr},getResolveCoincidentTopology:function(){return Hr},setResolveCoincidentTopology:kr,setResolveCoincidentTopologyPolygonOffsetFaces:function(e){Xr=e},setResolveCoincidentTopologyToDefault:function(){kr(0)},setResolveCoincidentTopologyToOff:function(){kr(0)},setResolveCoincidentTopologyToPolygonOffset:function(){kr(1)}};function wr(e,t,n){n.forEach((function(n){e["get".concat(n.method)]=function(){return t[n.key]},e["set".concat(n.method)]=function(e,r){t[n.key]={factor:e,offset:r}}}))}var Yr=["Polygon","Line","Point"],Or={};wr(Or,{Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},Yr.map((function(e){return{key:e,method:"ResolveCoincidentTopology".concat(e,"OffsetParameters")}})));var zr={implementCoincidentTopologyMethods:function(e,t){void 0===t.resolveCoincidentTopology&&(t.resolveCoincidentTopology=!1),a.c.setGet(e,t,["resolveCoincidentTopology"]),t.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(Mr).forEach((function(t){e[t]=Mr[t]})),Object.keys(Or).forEach((function(t){e[t]=Or[t]})),wr(e,t.topologyOffset,Yr.map((function(e){return{key:e,method:"RelativeCoincidentTopology".concat(e,"OffsetParameters")}}))),e.getCoincidentTopologyPolygonOffsetParameters=function(){var t=Or.getResolveCoincidentTopologyPolygonOffsetParameters(),n=e.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyLineOffsetParameters=function(){var t=Or.getResolveCoincidentTopologyLineOffsetParameters(),n=e.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyPointOffsetParameter=function(){var t=Or.getResolveCoincidentTopologyPointOffsetParameters(),n=e.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}}},staticOffsetAPI:Or,otherStaticMethods:Mr,CATEGORIES:Yr};function Pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jr=zr.staticOffsetAPI,_r=zr.otherStaticMethods,qr=dr.ColorMode,$r=dr.ScalarMode,ea=dr.GetArray,ta=gr.VectorMode,na=s.a.VtkDataTypes;function ra(e){return function(){return a.c.vtkErrorMacro("vtkMapper::".concat(e," - NOT IMPLEMENTED"))}}function aa(e,t){t.classHierarchy.push("vtkMapper"),e.getBounds=function(){var n=e.getInputData();return n?(t.static||e.update(),t.bounds=n.getBounds()):t.bounds=Object(u.j)(),t.bounds},e.setForceCompileOnly=function(e){t.forceCompileOnly=e},e.createDefaultLookupTable=function(){t.lookupTable=fr.newInstance()},e.getColorModeAsString=function(){return a.c.enumToString(qr,t.colorMode)},e.setColorModeToDefault=function(){return e.setColorMode(0)},e.setColorModeToMapScalars=function(){return e.setColorMode(1)},e.setColorModeToDirectScalars=function(){return e.setColorMode(2)},e.getScalarModeAsString=function(){return a.c.enumToString($r,t.scalarMode)},e.setScalarModeToDefault=function(){return e.setScalarMode(0)},e.setScalarModeToUsePointData=function(){return e.setScalarMode(1)},e.setScalarModeToUseCellData=function(){return e.setScalarMode(2)},e.setScalarModeToUsePointFieldData=function(){return e.setScalarMode(3)},e.setScalarModeToUseCellFieldData=function(){return e.setScalarMode(4)},e.setScalarModeToUseFieldData=function(){return e.setScalarMode(5)},e.getAbstractScalars=function(e,n,r,a,s){if(!e||!t.scalarVisibility)return{scalars:null,cellFLag:!1};var i=null,o=!1;if(n===$r.DEFAULT)(i=e.getPointData().getScalars())||(i=e.getCellData().getScalars(),o=!0);else if(n===$r.USE_POINT_DATA)i=e.getPointData().getScalars();else if(n===$r.USE_CELL_DATA)i=e.getCellData().getScalars(),o=!0;else if(n===$r.USE_POINT_FIELD_DATA){var l=e.getPointData();i=r===ea.BY_ID?l.getArrayByIndex(a):l.getArrayByName(s)}else if(n===$r.USE_CELL_FIELD_DATA){var B=e.getCellData();o=!0,i=r===ea.BY_ID?B.getArrayByIndex(a):B.getArrayByName(s)}else if(n===$r.USE_FIELD_DATA){var Q=e.getFieldData();i=r===ea.BY_ID?Q.getArrayByIndex(a):Q.getArrayByName(s)}return{scalars:i,cellFlag:o}},e.mapScalars=function(n,r){var a=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(!a)return t.colorCoordinates=null,t.colorTextureMap=null,void(t.colorMapColors=null);var s="".concat(e.getMTime()).concat(a.getMTime()).concat(r);if(t.colorBuildString!==s){if(t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),e.canUseTextureMapForColoring(n))e.mapScalarsToTexture(a,r);else{t.colorCoordinates=null,t.colorTextureMap=null;var i=e.getLookupTable();i&&(i.build(),t.colorMapColors=i.mapScalars(a,t.colorMode,-1))}t.colorBuildString="".concat(e.getMTime()).concat(a.getMTime()).concat(r)}},e.scalarToTextureCoordinate=function(e,t,n){var r=.5,a=1;return Object(u.v)(e)||(a=.49,(r=(e-t)*n)>1e3?r=1e3:r<-1e3&&(r=-1e3)),{texCoordS:r,texCoordT:a}},e.createColorTextureCoordinates=function(t,n,r,a,s,i,o,l,B){var Q=(i[1]-i[0])/l,c=[];c[0]=i[0]-Q,c[1]=i[1]+Q;var F=1/(c[1]-c[0]),U=n.getData(),g=t.getData(),d=0,u=0;if(s<0||s>=a)for(var I=0;I<r;++I){for(var m=0,C=0;C<a;++C)m+=g[d]*g[d],d++;var b=Math.sqrt(m);B&&(b=fr.applyLogScale(b,o,i));var y=e.scalarToTextureCoordinate(b,c[0],F);U[u]=y.texCoordS,U[u+1]=y.texCoordT,u+=2}else{d+=s;for(var S=0;S<r;++S){var h=g[d];B&&(h=fr.applyLogScale(h,o,i));var Z=e.scalarToTextureCoordinate(h,c[0],F);U[u]=Z.texCoordS,U[u+1]=Z.texCoordT,u+=2,d+=a}}},e.mapScalarsToTexture=function(n,r){var a=t.lookupTable.getRange(),i=t.lookupTable.usingLogScale();i&&fr.getLogRange(a,a);var o=t.lookupTable.getAlpha();if(t.colorMapColors=null,null==t.colorTextureMap||e.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getAlpha()!==r){t.lookupTable.setAlpha(r),t.colorTextureMap=null,t.lookupTable.build();var l=t.lookupTable.getNumberOfAvailableColors();l>4094&&(l=4094),l+=2;for(var B=(a[1]-a[0])/(l-1-2),Q=new Float64Array(2*l),c=0;c<l;++c)Q[c]=a[0]+c*B-B,i&&(Q[c]=Math.pow(10,Q[c]));for(var F=0;F<l;++F)Q[F+l]=NaN;t.colorTextureMap=Gt.newInstance(),t.colorTextureMap.setExtent(0,l-1,0,1,0,0);var U=s.a.newInstance({numberOfComponents:1,values:Q});t.colorTextureMap.getPointData().setScalars(t.lookupTable.mapScalars(U,t.colorMode,0)),t.lookupTable.setAlpha(o)}if(!t.colorCoordinates||e.getMTime()>t.colorCoordinates.getMTime()||e.getInputData(0).getMTime()>t.colorCoordinates.getMTime()||t.lookupTable.getMTime()>t.colorCoordinates.getMTime()){t.colorCoordinates=null;var g=n.getNumberOfComponents(),d=n.getNumberOfTuples();t.colorCoordinates=s.a.newInstance({numberOfComponents:2,values:new Float32Array(2*d)});var u=t.lookupTable.getVectorComponent();t.lookupTable.getVectorMode()===ta.MAGNITUDE&&n.getNumberOfComponents()>1&&(u=-1),e.createColorTextureCoordinates(n,t.colorCoordinates,d,g,u,a,t.lookupTable.getRange(),t.colorTextureMap.getPointData().getScalars().getNumberOfTuples()/2-2,i)}},e.getIsOpaque=function(){var t=e.getLookupTable();return!t||(t.build(),t.isOpaque())},e.canUseTextureMapForColoring=function(n){if(!t.interpolateScalarsBeforeMapping)return!1;if(t.lookupTable&&t.lookupTable.getIndexedLookup())return!1;var r=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName),a=r.scalars;return!(!a||r.cellFlag||t.colorMode===qr.DEFAULT&&a.getDataType()===na.UNSIGNED_CHAR||t.colorMode===qr.DIRECT_SCALARS)},e.clearColorArrays=function(){t.colorMapColors=null,t.colorCoordinates=null,t.colorTextureMap=null},e.getLookupTable=function(){return t.lookupTable||e.createDefaultLookupTable(),t.lookupTable},e.getMTime=function(){var e=t.mtime;if(null!==t.lookupTable){var n=t.lookupTable.getMTime();e=n>e?n:e}return e},e.getPrimitiveCount=function(){var t=e.getInputData();return{points:t.getPoints().getNumberOfValues()/3,verts:t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells(),lines:t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells(),triangles:t.getPolys().getNumberOfValues()-3*t.getLines().getNumberOfCells()}},e.acquireInvertibleLookupTable=ra("AcquireInvertibleLookupTable"),e.valueToColor=ra("ValueToColor"),e.colorToValue=ra("ColorToValue"),e.useInvertibleColorFor=ra("UseInvertibleColorFor"),e.clearInvertibleColor=ra("ClearInvertibleColor")}var sa={colorMapColors:null,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,viewSpecificProperties:null,customShaderAttributes:[]};function ia(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sa,n),Wr.extend(e,t,n),a.c.get(e,t,["colorCoordinates","colorMapColors","colorTextureMap"]),a.c.setGet(e,t,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),a.c.setGetArray(e,t,["scalarRange"],2),t.viewSpecificProperties||(t.viewSpecificProperties={}),zr.implementCoincidentTopologyMethods(e,t),aa(e,t)}var oa=Kr(Kr(Kr({newInstance:a.c.newInstance(ia,"vtkMapper"),extend:ia},jr),_r),dr),la=a.c.vtkErrorMacro;function Ba(e,t){t.classHierarchy.push("vtkShader"),e.compile=function(){var e=t.context.VERTEX_SHADER;if(!t.source||!t.source.length||"Unknown"===t.shaderType)return!1;switch(0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0),t.shaderType){case"Fragment":e=t.context.FRAGMENT_SHADER;break;case"Vertex":default:e=t.context.VERTEX_SHADER}if(t.handle=t.context.createShader(e),t.context.shaderSource(t.handle,t.source),t.context.compileShader(t.handle),!t.context.getShaderParameter(t.handle,t.context.COMPILE_STATUS)){var n=t.context.getShaderInfoLog(t.handle);return la("Error compiling shader '".concat(t.source,"': ").concat(n)),t.context.deleteShader(t.handle),t.handle=0,!1}return!0},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0,t.dirty=!0)}}var Qa={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function ca(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qa,n),a.c.obj(e,t),a.c.setGet(e,t,["shaderType","source","error","handle","context"]),Ba(e,t)}var Fa={newInstance:a.c.newInstance(ca,"vtkShader"),extend:ca},Ua=a.c.vtkErrorMacro;function ga(e,t){t.classHierarchy.push("vtkShaderProgram"),e.compileShader=function(){return t.vertexShader.compile()?t.fragmentShader.compile()?e.attachShader(t.vertexShader)&&e.attachShader(t.fragmentShader)?e.link()?(e.setCompiled(!0),1):(Ua("Links failed: ".concat(t.error)),0):(Ua(t.error),0):(Ua(t.fragmentShader.getSource().split("\n").map((function(e,t){return"".concat(t,": ").concat(e)})).join("\n")),Ua(t.fragmentShader.getError()),0):(Ua(t.vertexShader.getSource().split("\n").map((function(e,t){return"".concat(t,": ").concat(e)})).join("\n")),Ua(t.vertexShader.getError()),0)},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0)},e.bind=function(){return!(!t.linked&&!e.link()||(t.context.useProgram(t.handle),e.setBound(!0),0))},e.isBound=function(){return!!t.bound},e.release=function(){t.context.useProgram(null),e.setBound(!1)},e.setContext=function(e){t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.link=function(){if(t.inked)return!0;if(0===t.handle)return t.error="Program has not been initialized, and/or does not have shaders.",!1;if(t.uniformLocs={},t.context.linkProgram(t.handle),!t.context.getProgramParameter(t.handle,t.context.LINK_STATUS)){var n=t.context.getProgramInfoLog(t.handle);return Ua("Error linking shader ".concat(n)),t.handle=0,!1}return e.setLinked(!0),t.attributeLocs={},!0},e.setUniformMatrix=function(n,r){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;var s=new Float32Array(r);return t.context.uniformMatrix4fv(a,!1,s),!0},e.setUniformMatrix3x3=function(n,r){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;var s=new Float32Array(r);return t.context.uniformMatrix3fv(a,!1,s),!0},e.setUniformf=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1f(a,r),!0)},e.setUniformfv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1fv(a,r),!0)},e.setUniformi=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1i(a,r),!0)},e.setUniformiv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1iv(a,r),!0)},e.setUniform2f=function(n,r,a){var s=e.findUniform(n);if(-1===s)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===a)throw new RangeError("Invalid number of values for array");return t.context.uniform2f(s,r,a),!0},e.setUniform2fv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2fv(a,r),!0)},e.setUniform2i=function(n,r,a){var s=e.findUniform(n);if(-1===s)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===a)throw new RangeError("Invalid number of values for array");return t.context.uniform2i(s,r,a),!0},e.setUniform2iv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2iv(a,r),!0)},e.setUniform3f=function(n,r,a,s){var i=e.findUniform(n);if(-1===i)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===s)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(i,r,a,s),!0},e.setUniform3fArray=function(n,r){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(!Array.isArray(r)||3!==r.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(a,r[0],r[1],r[2]),!0},e.setUniform3fv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3fv(a,r),!0)},e.setUniform3i=function(n){var r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=s;if(1===o.length&&Array.isArray(o[0])&&(o=o[0]),3!==o.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3i(r,o[0],o[1],o[2]),!0},e.setUniform3iv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3iv(a,r),!0)},e.setUniform4f=function(n){var r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=s;if(1===o.length&&Array.isArray(o[0])&&(o=o[0]),4!==o.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4f(r,o[0],o[1],o[2],o[3]),!0},e.setUniform4fv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4fv(a,r),!0)},e.setUniform4i=function(n){var r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=s;if(1===o.length&&Array.isArray(o[0])&&(o=o[0]),4!==o.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4i(r,o[0],o[1],o[2],o[3]),!0},e.setUniform4iv=function(n,r){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4iv(a,r),!0)},e.setUniform4fv=function(n,r,a){var s=e.findUniform(n);return-1===s?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4fv(s,a),!0)},e.findUniform=function(e){if(!e||!t.linked)return-1;var n=t.uniformLocs[e];return void 0!==n?n:null===(n=t.context.getUniformLocation(t.handle,e))?(t.error="Uniform ".concat(e," not found in current shader program."),t.uniformLocs[e]=-1,-1):(t.uniformLocs[e]=n,n)},e.isUniformUsed=function(e){if(!e)return!1;var n=t.uniformLocs[e];return void 0!==n?null!==n:t.linked?(n=t.context.getUniformLocation(t.handle,e),t.uniformLocs[e]=n,null!==n):(Ua("attempt to find uniform when the shader program is not linked"),!1)},e.isAttributeUsed=function(e){if(!e)return!1;var n=Object.keys(t.attributeLocs).indexOf(e);return-1!==n||(t.linked?-1!==(n=t.context.getAttribLocation(t.handle,e))&&(t.attributeLocs[e]=n,!0):(Ua("attempt to find uniform when the shader program is not linked"),!1))},e.attachShader=function(n){if(0===n.getHandle())return t.error="Shader object was not initialized, cannot attach it.",!1;if("Unknown"===n.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;if(0===t.handle){var r=t.context.createProgram();if(0===r)return t.error="Could not create shader program.",!1;t.handle=r,t.linked=!1}return"Vertex"===n.getShaderType()&&(0!==t.vertexShaderHandle&&t.comntext.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=n.getHandle()),"Fragment"===n.getShaderType()&&(0!==t.fragmentShaderHandle&&t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=n.getHandle()),t.context.attachShader(t.handle,n.getHandle()),e.setLinked(!1),!0},e.detachShader=function(e){if(0===e.getHandle())return t.error="shader object was not initialized, cannot attach it.",!1;if("Unknown"===e.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;switch(0===t.handle&&(t.error="This shader program has not been initialized yet."),e.getShaderType()){case"Vertex":return t.vertexShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.vertexShaderHandle=0,t.linked=!1,!0);case"Fragment":return t.fragmentShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.fragmentShaderHandle=0,t.linked=!1,!0);default:return!1}},e.setContext=function(e){t.context=e,t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.setLastCameraMTime=function(e){t.lastCameraMTime=e}}var da={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function ua(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,da,n),t.attributesLocs={},t.uniformLocs={},t.vertexShader=Fa.newInstance(),t.vertexShader.setShaderType("Vertex"),t.fragmentShader=Fa.newInstance(),t.fragmentShader.setShaderType("Fragment"),t.geometryShader=Fa.newInstance(),t.geometryShader.setShaderType("Geometry"),a.c.obj(e,t),a.c.get(e,t,["lastCameraMTime"]),a.c.setGet(e,t,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),ga(e,t)}var Ia,ma={newInstance:a.c.newInstance(ua,"vtkShaderProgram"),extend:ua,substitute:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Array.isArray(n)?n.join("\n"):n,s=!1;-1!==e.search(t)&&(s=!0);var i="";r&&(i="g");var o=new RegExp(t,i),l=e.replace(o,a);return{replace:s,result:l}}};function Ca(e,t,n){var r=t[0],a=t[1],s=t[2],i=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*s+n[12]*i,e[1]=n[1]*r+n[5]*a+n[9]*s+n[13]*i,e[2]=n[2]*r+n[6]*a+n[10]*s+n[14]*i,e[3]=n[3]*r+n[7]*a+n[11]*s+n[15]*i,e}function ba(){var e=new Ft.a(4);return Ft.a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function ya(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function Sa(e,t,n){var r=t[0],a=t[1],s=t[2],i=t[3],o=n[0],l=n[1],B=n[2],Q=n[3];return e[0]=r*Q+i*o+a*B-s*l,e[1]=a*Q+i*l+s*o-r*B,e[2]=s*Q+i*B+r*l-a*o,e[3]=i*Q-r*o-a*l-s*B,e}Ia=new Ft.a(4),Ft.a!=Float32Array&&(Ia[0]=0,Ia[1]=0,Ia[2]=0,Ia[3]=0);var ha=function(e,t,n,r){var a=new Ft.a(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a};Object(y.n)(),Object(y.o)(1,0,0),Object(y.o)(0,1,0),ba(),ba(),Ut();var Za={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2},xa={ObjectType:Za};function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ra=xa.ObjectType;function La(e,t){function n(e){switch(e){case Ra.ELEMENT_ARRAY_BUFFER:return t.context.ELEMENT_ARRAY_BUFFER;case Ra.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in t.context)return t.context.TEXTURE_BUFFER;default:case Ra.ARRAY_BUFFER:return t.context.ARRAY_BUFFER}}t.classHierarchy.push("vtkOpenGLBufferObject");var r=null,a=null,s=!0,i="";e.getType=function(){return r},e.setType=function(e){r=e},e.getHandle=function(){return a},e.isReady=function(){return!1===s},e.generateBuffer=function(e){var s=n(e);return null===a&&(a=t.context.createBuffer(),r=e),n(r)===s},e.upload=function(o,l){return e.generateBuffer(l)?(t.context.bindBuffer(n(r),a),t.context.bufferData(n(r),o,t.context.STATIC_DRAW),s=!1,!0):(i="Trying to upload array buffer to incompatible buffer.",!1)},e.bind=function(){return!!a&&(t.context.bindBuffer(n(r),a),!0)},e.release=function(){return!!a&&(t.context.bindBuffer(n(r),null),!0)},e.releaseGraphicsResources=function(){null!==a&&(t.context.bindBuffer(n(r),null),t.context.deleteBuffer(a),a=null)},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.getError=function(){return i}}var Va={objectType:Ra.ARRAY_BUFFER,openGLRenderWindow:null,context:null};function Aa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Va,n),a.c.obj(e,t),a.c.get(e,t,["openGLRenderWindow"]),La(e,t)}var fa=Ga(Ga({newInstance:a.c.newInstance(Aa),extend:Aa},{}),xa),Na=a.c.vtkErrorMacro;function Ea(e,t){t.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),e.setType(Za.ARRAY_BUFFER),e.createVBO=function(n,r,a,s){if(!n.getData()||!n.getData().length)return t.elementCount=0,0;t.blockSize=3,t.vertexOffset=0,t.normalOffset=0,t.tCoordOffset=0,t.tCoordComponents=0,t.colorComponents=0,t.colorOffset=0,t.customData=[];var i=s.points.getData(),o=null,l=null,B=null,Q=s.colors?s.colors.getNumberOfComponents():0,c=s.tcoords?s.tcoords.getNumberOfComponents():0;s.normals&&(t.normalOffset=4*t.blockSize,t.blockSize+=3,o=s.normals.getData()),s.customAttributes&&s.customAttributes.forEach((function(e){e&&(t.customData.push({data:e.getData(),offset:4*t.blockSize,components:e.getNumberOfComponents(),name:e.getName()}),t.blockSize+=e.getNumberOfComponents())})),s.tcoords&&(t.tCoordOffset=4*t.blockSize,t.tCoordComponents=c,t.blockSize+=c,l=s.tcoords.getData()),s.colors?(t.colorComponents=s.colors.getNumberOfComponents(),t.colorOffset=0,B=s.colors.getData(),t.colorBO||(t.colorBO=fa.newInstance()),t.colorBO.setOpenGLRenderWindow(t.openGLRenderWindow)):t.colorBO=null,t.stride=4*t.blockSize;var F,U=0,g=0,d=0,u=0,I=0,m=0,C={anythingToPoints:function(e,t,n){for(var r=0;r<e;++r)F(t[n+r])},linesToWireframe:function(e,t,n){for(var r=0;r<e-1;++r)F(t[n+r]),F(t[n+r+1])},polysToWireframe:function(e,t,n){if(e>2)for(var r=0;r<e;++r)F(t[n+r]),F(t[n+(r+1)%e])},stripsToWireframe:function(e,t,n){if(e>2){for(var r=0;r<e-1;++r)F(t[n+r]),F(t[n+r+1]);for(var a=0;a<e-2;a++)F(t[n+a]),F(t[n+a+2])}},polysToSurface:function(e,t,n){for(var r=0;r<e-2;r++)F(t[n+0]),F(t[n+r+1]),F(t[n+r+2])},stripsToSurface:function(e,t,n){for(var r=0;r<e-2;r++)F(t[n+r]),F(t[n+r+1+r%2]),F(t[n+r+1+(r+1)%2])}},b={anythingToPoints:function(e,t){return e},linesToWireframe:function(e,t){return e>1?2*(e-1):0},polysToWireframe:function(e,t){return e>2?2*e:0},stripsToWireframe:function(e,t){return e>2?4*e-6:0},polysToSurface:function(e,t){return e>2?3*(e-2):0},stripsToSurface:function(e,t,n){return e>2?3*(e-2):0}},y=null,S=null;a===rr.POINTS||"verts"===r?(y=C.anythingToPoints,S=b.anythingToPoints):a===rr.WIREFRAME||"lines"===r?(y=C["".concat(r,"ToWireframe")],S=b["".concat(r,"ToWireframe")]):(y=C["".concat(r,"ToSurface")],S=b["".concat(r,"ToSurface")]);for(var h=n.getData(),Z=h.length,x=0,p=0;p<Z;)x+=S(h[p],h),p+=h[p]+1;var G=null,R=new Float32Array(x*t.blockSize);B&&(G=new Uint8Array(4*x));for(var L=0,V=0,A=0,f=0,N=0;N<3;++N){var E=s.points.getRange(N),D=E[1]-E[0];A+=D*D;var v=.5*(E[1]+E[0]);f+=v*v}if(A>0&&(Math.abs(f)/A>1e6||Math.abs(Math.log10(A))>3||0===A&&f>1e6)){for(var J=new Float64Array(3),W=new Float64Array(3),X=0;X<3;++X){var H=s.points.getRange(X),T=H[1]-H[0];J[X]=.5*(H[1]+H[0]),W[X]=T>0?1/T:1}e.setCoordShiftAndScale(J,W)}else!0===t.coordShiftAndScaleEnabled&&e.setCoordShiftAndScale(null,null);F=function(e){if(U=3*e,t.coordShiftAndScaleEnabled?(R[L++]=(i[U++]-t.coordShift[0])*t.coordScale[0],R[L++]=(i[U++]-t.coordShift[1])*t.coordScale[1],R[L++]=(i[U++]-t.coordShift[2])*t.coordScale[2]):(R[L++]=i[U++],R[L++]=i[U++],R[L++]=i[U++]),null!==o&&(g=s.haveCellNormals?3*(m+s.cellOffset):3*e,R[L++]=o[g++],R[L++]=o[g++],R[L++]=o[g++]),t.customData.forEach((function(t){I=e*t.components;for(var n=0;n<t.components;++n)R[L++]=t.data[I++]})),null!==l){d=e*c;for(var n=0;n<c;++n)R[L++]=l[d++]}null!==B&&(u=s.haveCellScalars?(m+s.cellOffset)*Q:e*Q,G[V++]=B[u++],G[V++]=B[u++],G[V++]=B[u++],G[V++]=4===Q?B[u++]:255)};for(var k=0;k<Z;)y(h[k],h,k+1),k+=h[k]+1,m++;return t.elementCount=x,e.upload(R,Za.ARRAY_BUFFER),t.colorBO&&(t.colorBOStride=4,t.colorBO.upload(G,Za.ARRAY_BUFFER)),m},e.setCoordShiftAndScale=function(e,n){null===e||e.constructor===Float64Array&&3===e.length?null===n||n.constructor===Float64Array&&3===n.length?(null!==t.coordShift&&null!==e&&Object(y.h)(e,t.coordShift)||(t.coordShift=e),null!==t.coordScale&&null!==n&&Object(y.h)(n,t.coordScale)||(t.coordScale=n),t.coordShiftAndScaleEnabled=function(e,t){return null!==e&&null!==t&&!(Object(y.f)(e,[0,0,0])&&Object(y.f)(t,[1,1,1]))}(t.coordShift,t.coordScale),t.coordShiftAndScaleEnabled?t.inverseShiftAndScaleMatrix=function(e,t){var n=new Float64Array(3);Object(y.i)(n,t);var r=new Float64Array(16);return Object(b.o)(r,ba(),e,n),r}(t.coordShift,t.coordScale):t.inverseShiftAndScaleMatrix=null):Na("Wrong type for coordScale, expected vec3 or null"):Na("Wrong type for coordShift, expected vec3 or null")}}var Da={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function va(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Da,n),fa.extend(e,t,n),a.c.setGet(e,t,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),a.c.get(e,t,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),Ea(e,t)}var Ja={newInstance:a.c.newInstance(va),extend:va};function Wa(e,t){t.classHierarchy.push("vtkOpenGLVertexArrayObject"),e.exposedMethod=function(){},e.initialize=function(){t.instancingExtension=null,t.openGLRenderWindow.getWebgl2()||(t.instancingExtension=t.context.getExtension("ANGLE_instanced_arrays")),!t.forceEmulation&&t.openGLRenderWindow&&t.openGLRenderWindow.getWebgl2()?(t.extension=null,t.supported=!0,t.handleVAO=t.context.createVertexArray()):(t.extension=t.context.getExtension("OES_vertex_array_object"),!t.forceEmulation&&t.extension?(t.supported=!0,t.handleVAO=t.extension.createVertexArrayOES()):t.supported=!1)},e.isReady=function(){return 0!==t.handleVAO||!1===t.supported},e.bind=function(){if(e.isReady()||e.initialize(),e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(t.handleVAO):t.context.bindVertexArray(t.handleVAO);else if(e.isReady())for(var n=t.context,r=0;r<t.buffers.length;++r){var a=t.buffers[r];t.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(var s=0;s<a.attributes.length;++s)for(var i=a.attributes[s],o=i.isMatrix?i.size:1,l=0;l<o;++l)n.enableVertexAttribArray(i.index+l),n.vertexAttribPointer(i.index+l,i.size,i.type,i.normalize,i.stride,i.offset+i.stride*l/i.size),i.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(i.index+l,1):n.vertexAttribDivisor(i.index+l,1))}},e.release=function(){if(e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(null):t.context.bindVertexArray(null);else if(e.isReady())for(var n=t.context,r=0;r<t.buffers.length;++r){var a=t.buffers[r];t.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(var s=0;s<a.attributes.length;++s)for(var i=a.attributes[s],o=i.isMatrix?i.size:1,l=0;l<o;++l)n.enableVertexAttribArray(i.index+l),n.vertexAttribPointer(i.index+l,i.size,i.type,i.normalize,i.stride,i.offset+i.stride*l/i.size),i.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(i.index+l,0):n.vertexAttribDivisor(i.index+l,0)),n.disableVertexAttribArray(i.index+l)}},e.shaderProgramChanged=function(){e.release(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.handleProgram=0},e.releaseGraphicsResources=function(){e.shaderProgramChanged(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.supported=!0,t.handleProgram=0},e.addAttributeArray=function(t,n,r,a,s,i,o,l){return e.addAttributeArrayWithDivisor(t,n,r,a,s,i,o,l,0,!1)},e.addAttributeArrayWithDivisor=function(n,r,a,s,i,o,l,B,Q,c){if(!n)return!1;if(!n.isBound()||0===r.getHandle()||r.getType()!==Za.ARRAY_BUFFER)return!1;if(0===t.handleProgram&&(t.handleProgram=n.getHandle()),e.isReady()||e.initialize(),!e.isReady()||t.handleProgram!==n.getHandle())return!1;var F=t.context,U={};if(U.name=a,U.index=F.getAttribLocation(t.handleProgram,a),U.offset=s,U.stride=i,U.type=o,U.size=l,U.normalize=B,U.isMatrix=c,U.divisor=Q,-1===U.Index)return!1;if(r.bind(),F.enableVertexAttribArray(U.index),F.vertexAttribPointer(U.index,U.size,U.type,U.normalize,U.stride,U.offset),Q>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(U.index,1):F.vertexAttribDivisor(U.index,1)),U.buffer=r.getHandle(),!t.supported){for(var g=!1,d=0;d<t.buffers.length;++d){var u=t.buffers[d];if(u.buffer===U.buffer){g=!0;for(var I=!1,m=0;m<u.attributes.length;++m)u.attributes[m].name===a&&(I=!0,u.attributes[m]=U);I||u.attributes.push(U)}}g||t.buffers.push({buffer:U.buffer,attributes:[U]})}return!0},e.addAttributeMatrixWithDivisor=function(n,r,a,s,i,o,l,B,Q){var c=e.addAttributeArrayWithDivisor(n,r,a,s,i,o,l,B,Q,!0);if(!c)return c;for(var F=t.context,U=F.getAttribLocation(t.handleProgram,a),g=1;g<l;g++)F.enableVertexAttribArray(U+g),F.vertexAttribPointer(U+g,l,o,B,i,s+i*g/l),Q>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(U+g,1):F.vertexAttribDivisor(U+g,1));return!0},e.removeAttributeArray=function(n){if(!e.isReady()||0===t.handleProgram)return!1;if(!t.supported)for(var r=0;r<t.buffers.length;++r)for(var a=t.buffers[r],s=0;s<a.attributes.length;++s)if(a.attributes[s].name===n)return a.attributes.splice(s,1),a.attributes.length||t.buffers.splice(r,1),!0;return!0},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))}}var Xa={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null,openGLRenderWindow:null};function Ha(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xa,n),t.buffers=[],a.c.obj(e,t),a.c.get(e,t,["supported"]),a.c.setGet(e,t,["forceEmulation"]),Wa(e,t)}var Ta={newInstance:a.c.newInstance(Ha,"vtkOpenGLVertexArrayObject"),extend:Ha};function ka(e,t){t.classHierarchy.push("vtkOpenGLHelper"),e.setOpenGLRenderWindow=function(e){t.program.setContext(e.getContext()),t.VAO.setOpenGLRenderWindow(e),t.CABO.setOpenGLRenderWindow(e)},e.releaseGraphicsResources=function(e){t.VAO.releaseGraphicsResources(),t.CABO.releaseGraphicsResources(),t.CABO.setElementCount(0)}}var Ma={program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0};function wa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ma,n),a.c.obj(e,t),t.shaderSourceTime={},a.c.obj(t.shaderSourceTime),t.attributeUpdateTime={},a.c.obj(t.attributeUpdateTime),a.c.setGet(e,t,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType"]),t.program=ma.newInstance(),t.VAO=Ta.newInstance(),t.CABO=Ja.newInstance(),ka(e,t)}var Ya={newInstance:a.c.newInstance(wa),extend:wa},Oa="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexMC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// picking support\n//VTK::Picking::Dec\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::PrimID::Impl\n\n  //VTK::PositionVC::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::Picking::Impl\n}\n",za="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\nuniform int PrimitiveIDOffset;\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// optional color passed in from the vertex shader, vertexColor\n//VTK::Color::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// Depth Peeling Support\n//VTK::DepthPeeling::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\n//VTK::ZBuffer::Dec\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\n  //VTK::Depth::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::Color::Impl\n\n  // Generate the normal if we are not passed in one\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n\n  //VTK::ZBuffer::Impl\n}\n",Pa={implementReplaceShaderCoincidentOffset:function(e,t){e.replaceShaderCoincidentOffset=function(n,r,a){var s=e.getCoincidentParameters(r,a);if(s&&(0!==s.factor||0!==s.offset)){var i=n.Fragment;i=ma.substitute(i,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,t.context.getExtension("EXT_frag_depth")&&(0!==s.factor?(i=ma.substitute(i,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,i=ma.substitute(i,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):i=ma.substitute(i,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),t.openGLRenderWindow.getWebgl2()&&(0!==s.factor?(i=ma.substitute(i,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,i=ma.substitute(i,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):i=ma.substitute(i,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=i}}}},Ka={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6},ja=Fr.Representation,_a=Fr.Shading,qa=oa.ScalarMode,$a=An.Filter,es=An.Wrap,ts=a.c.vtkErrorMacro,ns={type:"StartEvent"},rs={type:"EndEvent"};function as(e,t){function n(e,t,n){return t.identity(n),e.reduce((function(e,n,r){return 0===r?n?t.copy(e,n):t.identity(e):n?t.multiply(e,e,n):e}),n)}t.classHierarchy.push("vtkOpenGLPolyDataMapper"),e.buildPass=function(n){n&&(t.openGLActor=e.getFirstAncestorOfType("vtkOpenGLActor"),t.openGLRenderer=t.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.openGLCamera=t.openGLRenderer.getViewNodeFor(t.openGLRenderer.getRenderable().getActiveCamera()))},e.translucentPass=function(t){t&&e.render()},e.opaqueZBufferPass=function(n){n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaquePass=function(t){t&&e.render()},e.render=function(){var n=t.openGLRenderWindow.getContext();if(t.context!==n){t.context=n;for(var r=Ka.Start;r<Ka.End;r++)t.primitives[r].setOpenGLRenderWindow(t.openGLRenderWindow)}var a=t.openGLActor.getRenderable(),s=t.openGLRenderer.getRenderable();e.renderPiece(s,a)},e.buildShaders=function(n,r,a){e.getShaderTemplate(n,r,a);var s=t.renderable.getViewSpecificProperties().OpenGL,i=null;if(s&&(i=s.ShaderReplacements),i)for(var o=0;o<i.length;o++){var l=i[o];if(l.replaceFirst){var B=l.shaderType,Q=n[B],c=ma.substitute(Q,l.originalValue,l.replacementValue,l.replaceAll);n[B]=c.result}}if(e.replaceShaderValues(n,r,a),i)for(var F=0;F<i.length;F++){var U=i[F];if(!U.replaceFirst){var g=U.shaderType,d=n[g],u=ma.substitute(d,U.originalValue,U.replacementValue,U.replaceAll);n[g]=u.result}}},e.getShaderTemplate=function(e,n,r){var a=t.renderable.getViewSpecificProperties().OpenGL,s=Oa;if(a){var i=a.VertexShaderCode;void 0!==i&&""!==i&&(s=i)}e.Vertex=s;var o=za;if(a){var l=a.FragmentShaderCode;void 0!==l&&""!==l&&(o=l)}e.Fragment=o;var B="";if(a){var Q=a.GeometryShaderCode;void 0!==Q&&(B=Q)}e.Geometry=B},e.replaceShaderColor=function(e,n,r){var a=e.Vertex,s=e.Geometry,i=e.Fragment,o=t.lastBoundBO.getReferenceByName("lastLightComplexity"),l=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];o&&(l=l.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var B=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];o&&(B=B.concat(["  vec3 specularColor;","  float specularPower;"])),B=B.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),o&&(B=B.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges||(l=l.concat(["varying vec4 vertexColorVSOutput;"]),a=ma.substitute(a,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,a=ma.substitute(a,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,s=ma.substitute(s,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,s=ma.substitute(s,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges?t.renderable.getInterpolateScalarsBeforeMapping()&&t.renderable.getColorCoordinates()&&!t.drawingEdges?i=ma.substitute(i,"//VTK::Color::Impl",B.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(r.getBackfaceProperty()&&!t.drawingEdges&&(l=l.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),o?(l=l.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),B=B.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):B=B.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),t.haveCellScalars&&!t.drawingEdges&&(l=l.concat(["uniform samplerBuffer texture1;"])),i=ma.substitute(i,"//VTK::Color::Impl",B).result):i=ma.substitute(i,"//VTK::Color::Impl",B.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result,i=ma.substitute(i,"//VTK::Color::Dec",l).result,e.Vertex=a,e.Geometry=s,e.Fragment=i},e.replaceShaderLight=function(e,n,r){var a=e.Fragment,s=t.lastBoundBO.getReferenceByName("lastLightComplexity"),i=t.lastBoundBO.getReferenceByName("lastLightCount"),o=[];switch(s){case 0:a=ma.substitute(a,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:a=ma.substitute(a,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(var l=0;l<i;++l)o=o.concat(["uniform vec3 lightColor".concat(l,";"),"uniform vec3 lightDirectionVC".concat(l,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(l,"; // normalized")]);a=ma.substitute(a,"//VTK::Light::Dec",o).result,o=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(var B=0;B<i;++B)o=o.concat(["  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC".concat(B,"));"),"  diffuseL += ((df".concat("",") * lightColor").concat(B,");"),"  if (dot(normalVCVSOutput, lightDirectionVC".concat(B,") < 0.0)"),"    {","    float sf = pow( max(0.0, dot(lightHalfAngleVC".concat(B,",normalVCVSOutput)), specularPower);"),"    specularL += ((sf".concat("",") * lightColor").concat(B,");"),"    }"]);o=o.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),a=ma.substitute(a,"//VTK::Light::Impl",o,!1).result;break;case 3:for(var Q=0;Q<i;++Q)o=o.concat(["uniform vec3 lightColor".concat(Q,";"),"uniform vec3 lightDirectionVC".concat(Q,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(Q,"; // normalized"),"uniform vec3 lightPositionVC".concat(Q,";"),"uniform vec3 lightAttenuation".concat(Q,";"),"uniform float lightConeAngle".concat(Q,";"),"uniform float lightExponent".concat(Q,";"),"uniform int lightPositional".concat(Q,";")]);a=ma.substitute(a,"//VTK::Light::Dec",o).result,o=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(var c=0;c<i;++c)o=o.concat(["  attenuation = 1.0;","  if (lightPositional".concat(c," == 0)"),"    {","      vertLightDirectionVC = lightDirectionVC".concat(c,";"),"    }","  else","    {","    vertLightDirectionVC = vertexVC.xyz - lightPositionVC".concat(c,";"),"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /","      (lightAttenuation".concat(c,".x"),"       + lightAttenuation".concat(c,".y * distanceVC"),"       + lightAttenuation".concat(c,".z * distanceVC * distanceVC);"),"    // per OpenGL standard cone angle is 90 or less for a spot light","    if (lightConeAngle".concat(c," <= 90.0)"),"      {","      float coneDot = dot(vertLightDirectionVC, lightDirectionVC".concat(c,");"),"      // if inside the cone","      if (coneDot >= cos(radians(lightConeAngle".concat(c,")))"),"        {","        attenuation = attenuation * pow(coneDot, lightExponent".concat(c,");"),"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));","    diffuseL += ((df".concat("",") * lightColor").concat(c,");"),"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {","      float sf = attenuation*pow( max(0.0, dot(lightHalfAngleVC".concat(c,",normalVCVSOutput)), specularPower);"),"    specularL += ((sf".concat("",") * lightColor").concat(c,");"),"    }"]);o=o.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),a=ma.substitute(a,"//VTK::Light::Impl",o,!1).result;break;default:ts("bad light complexity")}e.Fragment=a},e.replaceShaderNormal=function(n,r,a){if(t.lastBoundBO.getReferenceByName("lastLightComplexity")>0){var s=n.Vertex,i=n.Geometry,o=n.Fragment;t.lastBoundBO.getCABO().getNormalOffset()?(s=ma.substitute(s,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,s=ma.substitute(s,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,i=ma.substitute(i,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,i=ma.substitute(i,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,o=ma.substitute(o,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,o=ma.substitute(o,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):t.haveCellNormals?(o=ma.substitute(o,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,o=ma.substitute(o,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.getOpenGLMode(a.getProperty().getRepresentation(),t.lastBoundBO.getPrimitiveType())===t.context.LINES?(o=ma.substitute(o,"//VTK::UniformFlow::Impl",["  vec3 fdx = vec3(dFdx(vertexVC.x),dFdx(vertexVC.y),dFdx(vertexVC.z));","  vec3 fdy = vec3(dFdy(vertexVC.x),dFdy(vertexVC.y),dFdy(vertexVC.z));","  //VTK::UniformFlow::Impl"]).result,o=ma.substitute(o,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  fdx = normalize(fdx);","  fdy = normalize(fdy);","  if (abs(fdx.x) > 0.0)","    { normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(o=ma.substitute(o,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,o=ma.substitute(o,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,o=ma.substitute(o,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),n.Vertex=s,n.Geometry=i,n.Fragment=o}},e.replaceShaderPositionVC=function(e,n,r){var a=e.Vertex,s=e.Geometry,i=e.Fragment;r.getProperty().getRepresentation()!==ja.POINTS&&t.lastBoundBO.getPrimitiveType()!==Ka.Points||(a=ma.substitute(a,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = ".concat(r.getProperty().getPointSize(),".0;")],!1).result),t.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(a=ma.substitute(a,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,a=ma.substitute(a,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,a=ma.substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,s=ma.substitute(s,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,s=ma.substitute(s,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,i=ma.substitute(i,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,i=ma.substitute(i,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(a=ma.substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,a=ma.substitute(a,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),e.Vertex=a,e.Geometry=s,e.Fragment=i},e.replaceShaderTCoord=function(e,n,r){if(t.lastBoundBO.getCABO().getTCoordOffset()){var a=e.Vertex,s=e.Geometry,i=e.Fragment;if(t.drawingEdges)return;a=ma.substitute(a,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var o=t.openGLActor.getActiveTextures(),l=2,B=2;if(o&&o.length>0&&(l=o[0].getComponents(),o[0].getTarget()===t.context.TEXTURE_CUBE_MAP&&(B=3)),t.renderable.getColorTextureMap()&&(l=t.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),B=2),2===B){if(a=ma.substitute(a,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,s=ma.substitute(s,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,s=ma.substitute(s,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,i=ma.substitute(i,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,o&&o.length>=1)switch(l){case 1:i=ma.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:i=ma.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:i=ma.substitute(i,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*texture2D(texture1, tcoordVCVSOutput.st);").result}}else switch(a=ma.substitute(a,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,s=ma.substitute(s,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,s=ma.substitute(s,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,i=ma.substitute(i,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,l){case 1:i=ma.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:i=ma.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:i=ma.substitute(i,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*textureCube(texture1, tcoordVCVSOutput);").result}e.Vertex=a,e.Geometry=s,e.Fragment=i}},e.replaceShaderClip=function(e,n,r){var s=e.Vertex,i=e.Fragment;if(t.renderable.getNumberOfClippingPlanes()){var o=t.renderable.getNumberOfClippingPlanes();o>6&&(a.c.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),o=6),s=ma.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,s=ma.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,i=ma.substitute(i,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,i=ma.substitute(i,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}e.Vertex=s,e.Fragment=i},e.getCoincidentParameters=function(e,n){var r=null,a=n.getProperty();if(t.renderable.getResolveCoincidentTopology()||a.getEdgeVisibility()&&a.getRepresentation()===ja.SURFACE){var s=t.lastBoundBO.getPrimitiveType();s===Ka.Points||a.getRepresentation()===ja.POINTS?r=t.renderable.getCoincidentTopologyPointOffsetParameter():s===Ka.Lines||a.getRepresentation()===ja.WIREFRAME?r=t.renderable.getCoincidentTopologyLineOffsetParameters():s!==Ka.Tris&&s!==Ka.TriStrips||(r=t.renderable.getCoincidentTopologyPolygonOffsetParameters()),s!==Ka.TrisEdges&&s!==Ka.TriStripsEdges||((r=t.renderable.getCoincidentTopologyPolygonOffsetParameters()).factor/=2,r.offset/=2)}return r},e.replaceShaderPicking=function(e,t,n){var r=e.Fragment;r=ma.substitute(r,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,r=ma.substitute(r,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,e.Fragment=r},e.replaceShaderValues=function(n,r,a){if(e.replaceShaderColor(n,r,a),e.replaceShaderNormal(n,r,a),e.replaceShaderLight(n,r,a),e.replaceShaderTCoord(n,r,a),e.replaceShaderPicking(n,r,a),e.replaceShaderClip(n,r,a),e.replaceShaderCoincidentOffset(n,r,a),e.replaceShaderPositionVC(n,r,a),t.haveSeenDepthRequest){var s=n.Fragment;s=ma.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=ma.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,n.Fragment=s}},e.getNeedToRebuildShaders=function(n,r,a){var s=0,i=0,o=n.getPrimitiveType(),l=t.currentInput,B=!1,Q=l.getPointData().getNormals(),c=l.getCellData().getNormals(),F=a.getProperty().getInterpolation()===_a.FLAT,U=a.getProperty().getRepresentation(),g=e.getOpenGLMode(U,o);if(g===t.context.TRIANGLES||c&&!Q||!F&&Q?B=!0:F||g!==t.context.LINES||(B=!0),a.getProperty().getLighting()&&B){s=0;for(var d=r.getLightsByReference(),u=0;u<d.length;++u){var I=d[u];I.getSwitch()>0&&(i++,0===s&&(s=1)),1===s&&(i>1||1!==I.getIntensity()||!I.lightTypeIsHeadLight())&&(s=2),s<3&&I.getPositional()&&(s=3)}}var m=!1,C=t.lastBoundBO.getReferenceByName("lastLightComplexity"),b=t.lastBoundBO.getReferenceByName("lastLightCount");return C===s&&b===i||(t.lastBoundBO.set({lastLightComplexity:s},!0),t.lastBoundBO.set({lastLightCount:i},!0),m=!0),!!(t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||0===n.getProgram()||n.getShaderSourceTime().getMTime()<e.getMTime()||n.getShaderSourceTime().getMTime()<a.getMTime()||n.getShaderSourceTime().getMTime()<t.renderable.getMTime()||n.getShaderSourceTime().getMTime()<t.currentInput.getMTime()||m)&&(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,!0)},e.updateShaders=function(n,r,a){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,a)){var s={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(s,r,a);var i=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);i!==n.getProgram()&&(n.setProgram(i),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,a),e.setPropertyShaderParameters(n,r,a),e.setCameraShaderParameters(n,r,a),e.setLightingShaderParameters(n,r,a);var o=t.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach((function(e){e.callback(e.userData,n,r,a)}))},e.setMapperShaderParameters=function(n,r,s){if(n.getProgram().isUniformUsed("PrimitiveIDOffset")&&n.getProgram().setUniformi("PrimitiveIDOffset",t.primitiveIDOffset),n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){var i=t.lastBoundBO.getReferenceByName("lastLightComplexity");n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,!1)||ts("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("normalMC")&&n.getCABO().getNormalOffset()&&i>0?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"normalMC",n.getCABO().getNormalOffset(),n.getCABO().getStride(),t.context.FLOAT,3,!1)||ts("Error setting normalMC in shader VAO."):n.getVAO().removeAttributeArray("normalMC"),t.renderable.getCustomShaderAttributes().forEach((function(e,r){n.getProgram().isAttributeUsed("".concat(e,"MC"))&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"".concat(e,"MC"),n.getCABO().getCustomData()[r].offset,n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getCustomData()[r].components,!1)||ts("Error setting ".concat(e,"MC in shader VAO.")))})),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getTCoordComponents(),!1)||ts("Error setting tcoordMC in shader VAO."):n.getVAO().removeAttributeArray("tcoordMC"),n.getProgram().isAttributeUsed("scalarColor")&&n.getCABO().getColorComponents()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO().getColorBO(),"scalarColor",n.getCABO().getColorOffset(),n.getCABO().getColorBOStride(),t.context.UNSIGNED_BYTE,4,!0)||ts("Error setting scalarColor in shader VAO."):n.getVAO().removeAttributeArray("scalarColor"),n.getAttributeUpdateTime().modified()}if(t.renderable.getNumberOfClippingPlanes()){var o=t.renderable.getNumberOfClippingPlanes();o>6&&(a.c.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),o=6);for(var l=[],B=0;B<o;B++){var Q=[];t.renderable.getClippingPlaneInDataCoords(s.getMatrix(),B,Q);for(var c=0;c<4;c++)l.push(Q[c])}n.getProgram().setUniformi("numClipPlanes",o),n.getProgram().setUniform4fv("clipPlanes",6,l)}t.internalColorTexture&&n.getProgram().isUniformUsed("texture1")&&n.getProgram().setUniformi("texture1",t.internalColorTexture.getTextureUnit());var F=t.openGLActor.getActiveTextures();if(F)for(var U=0;U<F.length;++U){var g=F[U].getTextureUnit(),d="texture".concat(g+1);n.getProgram().isUniformUsed(d)&&n.getProgram().setUniformi(d,g)}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",t.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){var u=e.getCoincidentParameters(r,s);n.getProgram().setUniformf("coffset",u.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",u.factor)}var I=t.openGLRenderer.getSelector();n.getProgram().setUniform3fArray("mapperIndex",I?I.getPropColorValue():[0,0,0]),n.getProgram().setUniformi("picking",I?I.getCurrentPass()+1:0)},e.setLightingShaderParameters=function(e,n,a){var s=t.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(s<2)){for(var i=e.getProgram(),o=0,l=n.getLightsByReference(),B=0;B<l.length;++B){var Q=l[B];if(Q.getSwitch()>0){var c=Q.getColorByReference(),F=Q.getIntensity();t.lightColor[0]=c[0]*F,t.lightColor[1]=c[1]*F,t.lightColor[2]=c[2]*F;var U=Q.getDirection(),g=n.getActiveCamera().getViewMatrix(),d=Object(r.a)(U);Q.lightTypeIsSceneLight()&&(d[0]=g[0]*U[0]+g[1]*U[1]+g[2]*U[2],d[1]=g[4]*U[0]+g[5]*U[1]+g[6]*U[2],d[2]=g[8]*U[0]+g[9]*U[1]+g[10]*U[2],Object(u.y)(d)),t.lightDirection[0]=d[0],t.lightDirection[1]=d[1],t.lightDirection[2]=d[2],t.lightHalfAngle[0]=-t.lightDirection[0],t.lightHalfAngle[1]=-t.lightDirection[1],t.lightHalfAngle[2]=1-t.lightDirection[2],Object(u.y)(t.lightDirection),i.setUniform3fArray("lightColor".concat(o),t.lightColor),i.setUniform3fArray("lightDirectionVC".concat(o),t.lightDirection),i.setUniform3fArray("lightHalfAngleVC".concat(o),t.lightHalfAngle),o++}}if(!(s<3)){var I=n.getActiveCamera().getViewMatrix();Object(b.i)(I,I),o=0;for(var m=0;m<l.length;++m){var C=l[m];if(C.getSwitch()>0){var S=C.getTransformedPosition(),h=new Float64Array(3);Object(y.q)(h,S,I),i.setUniform3fArray("lightAttenuation".concat(o),C.getAttenuationValuesByReference()),i.setUniformi("lightPositional".concat(o),C.getPositional()),i.setUniformf("lightExponent".concat(o),C.getExponent()),i.setUniformf("lightConeAngle".concat(o),C.getConeAngle()),i.setUniform3fArray("lightPositionVC".concat(o),[h[0],h[1],h[2]]),o++}}}}},e.setCameraShaderParameters=function(e,r,a){var s=e.getProgram(),i=t.openGLCamera.getKeyMatrices(r),o=r.getActiveCamera(),l=t.openGLCamera.getKeyMatrixTime().getMTime(),B=s.getLastCameraMTime(),Q=e.getCABO().getCoordShiftAndScaleEnabled()?e.getCABO().getInverseShiftAndScaleMatrix():null,c=a.getIsIdentity(),F=c?{mcwc:null,normalMatrix:null}:t.openGLActor.getKeyMatrices();s.setUniformMatrix("MCPCMatrix",n([i.wcpc,F.mcwc,Q],b.p,t.tmpMat4)),s.isUniformUsed("MCVCMatrix")&&s.setUniformMatrix("MCVCMatrix",n([i.wcvc,F.mcwc,Q],b.p,t.tmpMat4)),s.isUniformUsed("normalMatrix")&&s.setUniformMatrix3x3("normalMatrix",n([i.normalMatrix,F.normalMatrix],St,t.tmpMat3)),B!==l&&(s.isUniformUsed("cameraParallel")&&s.setUniformi("cameraParallel",o.getParallelProjection()),s.setLastCameraMTime(l)),c||s.setLastCameraMTime(0)},e.setPropertyShaderParameters=function(e,n,r){var a=e.getProgram(),s=r.getProperty(),i=s.getOpacity(),o=t.drawingEdges?s.getEdgeColorByReference():s.getAmbientColorByReference(),l=t.drawingEdges?s.getEdgeColorByReference():s.getDiffuseColorByReference(),B=t.drawingEdges?1:s.getAmbient(),Q=t.drawingEdges?0:s.getDiffuse(),c=t.drawingEdges?0:s.getSpecular(),F=s.getSpecularPower();a.setUniformf("opacityUniform",i),a.setUniform3fArray("ambientColorUniform",o),a.setUniform3fArray("diffuseColorUniform",l),a.setUniformf("ambient",B),a.setUniformf("diffuse",Q);var U=t.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(U<1)){var g=s.getSpecularColorByReference();if(a.setUniform3fArray("specularColorUniform",g),a.setUniformf("specularPowerUniform",F),a.isUniformUsed("ambientIntensityBF")){if(i=(s=r.getBackfaceProperty()).getOpacity(),o=s.getAmbientColor(),B=s.getAmbient(),l=s.getDiffuseColor(),Q=s.getDiffuse(),g=s.getSpecularColor(),c=s.getSpecular(),a.setUniformf("ambientIntensityBF",B),a.setUniformf("diffuseIntensityBF",Q),a.setUniformf("opacityUniformBF",i),a.setUniform3fArray("ambientColorUniformBF",o),a.setUniform3fArray("diffuseColorUniformBF",l),U<1)return;a.setUniformf("specularIntensityBF",c),a.setUniform3fArray("specularColorUniformBF",g),a.setUniformf("specularPowerUniformBF",F)}}},e.renderPieceStart=function(n,r){t.primitiveIDOffset=0,t.openGLRenderer.getSelector()&&(t.openGLRenderer.getSelector().getCurrentPass(),t.openGLRenderer.getSelector().renderProp(r)),e.updateBufferObjects(n,r),t.renderable.getColorTextureMap()&&t.internalColorTexture.activate(),t.lastBoundBO=null},e.renderPieceDraw=function(n,r){var a=r.getProperty().getRepresentation(),s=t.context,i=r.getProperty().getEdgeVisibility()&&a===ja.SURFACE;s.lineWidth(r.getProperty().getLineWidth());for(var o=Ka.Start;o<Ka.End;o++){var l=t.primitives[o].getCABO();if(l.getElementCount()){t.drawingEdges=i&&(o===Ka.TrisEdges||o===Ka.TriStripsEdges);var B=e.getOpenGLMode(a,o);t.drawingEdges&&t.renderDepth||(e.updateShaders(t.primitives[o],n,r),s.drawArrays(B,0,l.getElementCount()));var Q=(B===s.POINTS?1:0)||(B===s.LINES?2:3);t.primitiveIDOffset+=l.getElementCount()/Q}}s.lineWidth(1)},e.getOpenGLMode=function(e,n){return e===ja.POINTS||n===Ka.Points?t.context.POINTS:e===ja.WIREFRAME||n===Ka.Lines||n===Ka.TrisEdges||n===Ka.TriStripsEdges?t.context.LINES:t.context.TRIANGLES},e.renderPieceFinish=function(e,n){t.LastBoundBO&&t.LastBoundBO.getVAO().release(),t.renderable.getColorTextureMap()&&t.internalColorTexture.deactivate()},e.renderPiece=function(n,r){if(e.invokeEvent(ns),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent(rs),t.currentInput){if(t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()){var a=t.context,s=r.getProperty().getBackfaceCulling(),i=r.getProperty().getFrontfaceCulling();s||i?i?(t.openGLRenderWindow.enableCullFace(),a.cullFace(a.FRONT)):(t.openGLRenderWindow.enableCullFace(),a.cullFace(a.BACK)):t.openGLRenderWindow.disableCullFace(),e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)}}else ts("No input!")},e.computeBounds=function(n,r){e.getInput()?t.bounds=e.getInput().getBounds():Object(u.D)(t.bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,r){var a=t.VBOBuildTime.getMTime();return a<e.getMTime()||a<t.renderable.getMTime()||a<r.getMTime()||a<t.currentInput.getMTime()},e.buildBufferObjects=function(e,n){var r=t.currentInput;if(null!==r){t.renderable.mapScalars(r,1);var a=t.renderable.getColorMapColors();t.haveCellScalars=!1;var s=t.renderable.getScalarMode();t.renderable.getScalarVisibility()&&(s!==qa.USE_CELL_DATA&&s!==qa.USE_CELL_FIELD_DATA&&s!==qa.USE_FIELD_DATA&&r.getPointData().getScalars()||s===qa.USE_POINT_FIELD_DATA||!a||(t.haveCellScalars=!0));var i=n.getProperty().getInterpolation()!==_a.FLAT?r.getPointData().getNormals():null;null===i&&r.getCellData().getNormals()&&(t.haveCellNormals=!0,i=r.getCellData().getNormals());var o=n.getProperty().getRepresentation(),l=r.getPointData().getTCoords();if(t.openGLActor.getActiveTextures()||(l=null),t.renderable.getColorCoordinates()){l=t.renderable.getColorCoordinates(),t.internalColorTexture||(t.internalColorTexture=An.newInstance());var B=t.internalColorTexture;B.setMinificationFilter($a.NEAREST),B.setMagnificationFilter($a.NEAREST),B.setWrapS(es.CLAMP_TO_EDGE),B.setWrapT(es.CLAMP_TO_EDGE),B.setOpenGLRenderWindow(t.openGLRenderWindow);var Q=t.renderable.getColorTextureMap(),c=Q.getExtent(),F=Q.getPointData().getScalars();B.create2DFromRaw(c[1]-c[0]+1,c[3]-c[2]+1,F.getNumberOfComponents(),F.getDataType(),F.getData()),B.activate(),B.sendParameters(),B.deactivate()}var U="".concat(r.getMTime(),"A").concat(o,"B").concat(r.getMTime())+"C".concat(i?i.getMTime():1,"D").concat(a?a.getMTime():1)+"E".concat(n.getProperty().getEdgeVisibility())+"F".concat(l?l.getMTime():1);if(t.VBOBuildString!==U){var g=r.getPoints(),d={points:g,normals:i,tcoords:l,colors:a,cellOffset:0,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals,customAttributes:t.renderable.getCustomShaderAttributes().map((function(e){return r.getPointData().getArrayByName(e)}))};d.cellOffset+=t.primitives[Ka.Points].getCABO().createVBO(r.getVerts(),"verts",o,d),d.cellOffset+=t.primitives[Ka.Lines].getCABO().createVBO(r.getLines(),"lines",o,d),d.cellOffset+=t.primitives[Ka.Tris].getCABO().createVBO(r.getPolys(),"polys",o,d),d.cellOffset+=t.primitives[Ka.TriStrips].getCABO().createVBO(r.getStrips(),"strips",o,d),n.getProperty().getEdgeVisibility()&&o===ja.SURFACE?(t.primitives[Ka.TrisEdges].getCABO().createVBO(r.getPolys(),"polys",ja.WIREFRAME,{points:g,normals:i,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1}),t.primitives[Ka.TriStripsEdges].getCABO().createVBO(r.getStrips(),"strips",ja.WIREFRAME,{points:g,normals:i,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1})):(t.primitives[Ka.TrisEdges].releaseGraphicsResources(t.openGLRenderWindow),t.primitives[Ka.TriStripsEdges].releaseGraphicsResources(t.openGLRenderWindow)),t.VBOBuildTime.modified(),t.VBOBuildString=U}}}}var ss={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightHalfAngle:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1};function is(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ss,n),an.extend(e,t,n),Pa.implementReplaceShaderCoincidentOffset(e,t,n),t.primitives=[],t.primTypes=Ka,t.tmpMat3=dt(new Float64Array(9)),t.tmpMat4=Object(b.h)(new Float64Array(16));for(var r=Ka.Start;r<Ka.End;r++)t.primitives[r]=Ya.newInstance(),t.primitives[r].setPrimitiveType(r),t.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);a.c.setGet(e,t,["context"]),t.VBOBuildTime={},a.c.obj(t.VBOBuildTime,{mtime:0}),as(e,t)}var os={newInstance:a.c.newInstance(is,"vtkOpenGLPolyDataMapper"),extend:is},ls={SelectionContent:{GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},SelectionField:{CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5}};function Bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qs(e,t){t.classHierarchy.push("vtkSelectionNode"),e.getBounds=function(){return t.points.getBounds()}}var cs={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function Fs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cs,n),a.c.obj(e,t),t.properties={},a.c.setGet(e,t,["contentType","fieldType","properties","selectionList"]),Qs(e,t)}var Us=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bs(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(Fs,"vtkSelectionNode"),extend:Fs},ls),gs={PassTypes:{MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,MAX_KNOWN_PASS:2}};function ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var us=gs.PassTypes,Is=Us.SelectionContent,ms=Us.SelectionField,Cs=it.a.FieldAssociations,bs=a.c.vtkErrorMacro;function ys(e,t){t.classHierarchy.push("vtkOpenGLHardwareSelector"),e.releasePixBuffers=function(){t.pixBuffer=[],t.zBuffer=null},e.beginSelection=function(){t.openGLRenderer=t.openGLRenderWindow.getViewNodeFor(t.renderer),t.maxAttributeId=0;var n=t.openGLRenderWindow.getSize();if(t.framebuffer){t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers();var r=t.framebuffer.getSize();r[0]!==n[0]||r[1]!==n[1]?(t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer()):t.framebuffer.bind()}else t.framebuffer=Dn.newInstance(),t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer();t.openGLRenderer.clear(),t.openGLRenderer.setSelector(e),t.hitProps={},t.props=[],e.releasePixBuffers()},e.endSelection=function(){t.hitProps={},t.openGLRenderer.setSelector(null),t.framebuffer.restorePreviousBindingsAndBuffers()},e.preCapturePass=function(){},e.postCapturePass=function(){},e.select=function(){var n=null;return e.captureBuffers()&&(n=e.generateSelection(t.area[0],t.area[1],t.area[2],t.area[3]),e.releasePixBuffers()),n},e.captureBuffers=function(){if(!t.renderer||!t.openGLRenderWindow)return bs("Renderer and view must be set before calling Select."),!1;t.openGLRenderer=t.openGLRenderWindow.getViewNodeFor(t.renderer),e.invokeEvent({type:"StartEvent"}),t.originalBackground=t.renderer.getBackgroundByReference(),t.renderer.setBackground(0,0,0);var n=t.openGLRenderWindow.getRenderPasses();for(e.beginSelection(),t.currentPass=us.MIN_KNOWN_PASS;t.currentPass<=us.COMPOSITE_INDEX_PASS;t.currentPass++)e.passRequired(t.currentPass)&&(e.preCapturePass(t.currentPass),t.captureZValues&&t.currentPass===us.ACTOR_PASS&&"function"==typeof n[0].requestDepth&&"function"==typeof n[0].getFramebuffer?(n[0].requestDepth(),t.openGLRenderWindow.traverseAllPasses()):t.openGLRenderWindow.traverseAllPasses(),e.postCapturePass(t.currentPass),e.savePixelBuffer(t.currentPass));return e.endSelection(),t.renderer.setBackground(t.originalBackground),e.invokeEvent({type:"EndEvent"}),!0},e.passRequired=function(e){return!0},e.savePixelBuffer=function(n){if(t.pixBuffer[n]=t.openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),n===us.ACTOR_PASS){if(t.captureZValues){var r=t.openGLRenderWindow.getRenderPasses();if("function"==typeof r[0].requestDepth&&"function"==typeof r[0].getFramebuffer){var a=r[0].getFramebuffer();a.saveCurrentBindingsAndBuffers(),a.bind(),t.zBuffer=t.openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),a.restorePreviousBindingsAndBuffers()}}e.buildPropHitList(t.pixBuffer[n])}},e.buildPropHitList=function(n){for(var r=0;r<=t.area[3]-t.area[1];r++)for(var a=0;a<=t.area[2]-t.area[0];a++){var s=e.convert(a,r,n);s>0&&(--s in t.hitProps||(t.hitProps[s]=!0))}},e.renderProp=function(n){t.currentPass===us.ACTOR_PASS&&(e.setPropColorValueFromInt(t.props.length+t.idOffset),t.props.push(n))},e.renderCompositeIndex=function(n){t.currentPass===us.COMPOSITE_INDEX_PASS&&e.setPropColorValueFromInt(n+t.idOffset)},e.renderAttributeId=function(e){e<0||(t.maxAttributeId=e>t.maxAttributeId?e:t.maxAttributeId)},e.getPropFromID=function(e){return e>=0&&e<t.props.length?t.props[e]:null},e.passTypeToString=function(e){return a.c.enumToString(us,e)},e.isPropHit=function(e){return Boolean(t.hitProps[e])},e.convert=function(e,n,r){if(!r)return 0;var a=4*(n*(t.area[2]-t.area[0]+1)+e),s=[];s[0]=r[a],s[1]=r[a+1],s[2]=r[a+2];var i=s[2];return i*=256,i+=s[1],(i*=256)+s[0]},e.setPropColorValueFromInt=function(e){t.propColorValue[0]=e%256/255,t.propColorValue[1]=Math.floor(e/256)%256/255,t.propColorValue[2]=Math.floor(e/65536)%256/255},e.getPixelInformation=function(n,r,a){var s=r<0?0:r;if(0===s){if(a[0]=n[0],a[1]=n[1],n[0]<t.area[0]||n[0]>t.area[2]||n[1]<t.area[1]||n[1]>t.area[3])return null;var i=[n[0]-t.area[0],n[1]-t.area[1]],o=e.convert(i[0],i[1],t.pixBuffer[us.ACTOR_PASS]);if(o<=0)return null;var l={valid:!0};l.propID=o-t.idOffset,l.prop=e.getPropFromID(l.propID);var B=e.convert(i[0],i[1],t.pixBuffer[us.COMPOSITE_INDEX_PASS]);if((B<0||B>16777215)&&(B=0),l.compositeID=B-t.idOffset,t.captureZValues){var Q=4*(i[1]*(t.area[2]-t.area[0]+1)+i[0]);l.zValue=(256*t.zBuffer[Q]+t.zBuffer[Q+1])/65535,l.displayPosition=n}return l}var c=[n[0],n[1]],F=[0,0],U=e.getPixelInformation(n,0,a);if(U&&U.valid)return U;for(var g=1;g<s;++g){for(var d=c[1]>g?c[1]-g:0;d<=c[1]+g;++d){if(F[1]=d,c[0]>=g&&(F[0]=c[0]-g,(U=e.getPixelInformation(F,0,a))&&U.valid))return U;if(F[0]=c[0]+g,(U=e.getPixelInformation(F,0,a))&&U.valid)return U}for(var u=c[0]>=g?c[0]-(g-1):0;u<=c[0]+(g-1);++u){if(F[0]=u,c[1]>=g&&(F[1]=c[1]-g,(U=e.getPixelInformation(F,0,a))&&U.valid))return U;if(F[1]=c[1]+g,(U=e.getPixelInformation(F,0,a))&&U.valid)return U}}return a[0]=n[0],a[1]=n[1],null},e.convertSelection=function(e,n){var r=[],a=0;return n.forEach((function(n,s){var i=Us.newInstance();switch(i.setContentType(Is.INDICES),e){case Cs.FIELD_ASSOCIATION_CELLS:i.setFieldType(ms.CELL);break;case Cs.FIELD_ASSOCIATION_POINTS:i.setFieldType(ms.POINT);break;default:bs("Unknown field association")}i.getProperties().propID=n.info.propID,i.getProperties().prop=n.info.prop,i.getProperties().compositeID=n.info.compositeID,i.getProperties().pixelCount=n.pixelCount,t.captureZValues&&(i.getProperties().displayPosition=[n.info.displayPosition[0],n.info.displayPosition[1],n.info.zValue],i.getProperties().worldPosition=t.openGLRenderWindow.displayToWorld(n.info.displayPosition[0],n.info.displayPosition[1],n.info.zValue,t.renderer)),i.setSelectionList(n.attributeIDs),r[a]=i,a++})),r},e.getInfoHash=function(e){return"".concat(e.propID," ").concat(e.compositeID)},e.generateSelection=function(n,r,a,s){for(var i=Math.floor(n),o=Math.floor(r),l=Math.floor(a),B=Math.floor(s),Q=new Map,c=[0,0],F=o;F<=B;F++)for(var U=i;U<=l;U++){var g=[U,F],d=e.getPixelInformation(g,0,c);if(d&&d.valid){var u=e.getInfoHash(d);if(Q.has(u)){var I=Q.get(u);I.pixelCount++,t.captureZValues&&d.zValue<I.info.zValue&&(I.info=d),-1===I.attributeIDs.indexOf(d.attributeID)&&I.attributeIDs.push(d.attributeID)}else Q.set(u,{info:d,pixelCount:1,attributeIDs:[d.attributeID]})}}return e.convertSelection(t.fieldAssociation,Q)},e.attach=function(e,n){t.openGLRenderWindow=e,t.renderer=n};var n=e.setArea;e.setArea=function(){return!!n.apply(void 0,arguments)&&(t.area[0]=Math.floor(t.area[0]),t.area[1]=Math.floor(t.area[1]),t.area[2]=Math.floor(t.area[2]),t.area[3]=Math.floor(t.area[3]),!0)}}var Ss={fieldAssociation:Cs.FIELD_ASSOCIATION_CELLS,renderer:null,area:null,openGLRenderWindow:null,openGLRenderer:null,currentPass:-1,propColorValue:null,props:null,idOffset:1,captureZValues:!1};function hs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ss,n),a.c.obj(e,t),t.area=[0,0,0,0],t.propColorValue=[0,0,0],t.props=[],a.c.setGet(e,t,["fieldAssociation","renderer","currentPass","captureZValues"]),a.c.setGetArray(e,t,["area"],4),a.c.setGetArray(e,t,["propColorValue"],3),a.c.event(e,t,"event"),ys(e,t)}var Zs=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(hs,"vtkOpenGLHardwareSelector"),extend:hs},gs);function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ps=a.c.vtkErrorMacro,Gs=Fr.Representation,Rs=fa.ObjectType,Ls=Zs.PassTypes,Vs={type:"StartEvent"},As={type:"EndEvent"};function fs(e,t){t.classHierarchy.push("vtkOpenGLGlyph3DMapper");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.renderPiece=function(n,r){if(e.invokeEvent(Vs),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(1),e.invokeEvent(As),t.currentInput){if(t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()){var a=t.context;t.openGLRenderWindow.getWebgl2()?(t.hardwareSupport=!0,t.extension=null):t.extension||(t.extension=t.context.getExtension("ANGLE_instanced_arrays"),t.hardwareSupport=!!t.extension);var s=r.getProperty().getBackfaceCulling(),i=r.getProperty().getFrontfaceCulling();s||i?i?(t.openGLRenderWindow.enableCullFace(),a.cullFace(a.FRONT)):(t.openGLRenderWindow.enableCullFace(),a.cullFace(a.BACK)):t.openGLRenderWindow.disableCullFace(),e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)}}else ps("No input!")},e.multiply4x4WithOffset=function(e,t,n,r){var a=t[0],s=t[1],i=t[2],o=t[3],l=t[4],B=t[5],Q=t[6],c=t[7],F=t[8],U=t[9],g=t[10],d=t[11],u=t[12],I=t[13],m=t[14],C=t[15],b=n[r],y=n[r+1],S=n[r+2],h=n[r+3];e[0]=b*a+y*l+S*F+h*u,e[1]=b*s+y*B+S*U+h*I,e[2]=b*i+y*Q+S*g+h*m,e[3]=b*o+y*c+S*d+h*C,b=n[r+4],y=n[r+5],S=n[r+6],h=n[r+7],e[4]=b*a+y*l+S*F+h*u,e[5]=b*s+y*B+S*U+h*I,e[6]=b*i+y*Q+S*g+h*m,e[7]=b*o+y*c+S*d+h*C,b=n[r+8],y=n[r+9],S=n[r+10],h=n[r+11],e[8]=b*a+y*l+S*F+h*u,e[9]=b*s+y*B+S*U+h*I,e[10]=b*i+y*Q+S*g+h*m,e[11]=b*o+y*c+S*d+h*C,b=n[r+12],y=n[r+13],S=n[r+14],h=n[r+15],e[12]=b*a+y*l+S*F+h*u,e[13]=b*s+y*B+S*U+h*I,e[14]=b*i+y*Q+S*g+h*m,e[15]=b*o+y*c+S*d+h*C},e.replaceShaderNormal=function(e,r,a){if(t.hardwareSupport&&t.lastBoundBO.getReferenceByName("lastLightComplexity")>0){var s=e.Vertex;t.lastBoundBO.getCABO().getNormalOffset()&&(s=ma.substitute(s,"//VTK::Normal::Dec",["attribute vec3 normalMC;","attribute mat3 gNormal;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,s=ma.substitute(s,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * gNormal * normalMC;"]).result),e.Vertex=s}n.replaceShaderNormal(e,r,a)},e.replaceShaderColor=function(e,r,a){if(t.hardwareSupport&&t.renderable.getColorArray()){var s=e.Vertex,i=e.Geometry,o=e.Fragment,l=t.lastBoundBO.getReferenceByName("lastLightComplexity"),B=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity"];l&&(B=B.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var Q=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];l&&(Q=Q.concat(["  vec3 specularColor;","  float specularPower;"])),Q=Q.concat(["  opacity = opacityUniform;"]),l&&(Q=Q.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),t.drawingEdges||(B=B.concat(["varying vec4 vertexColorVSOutput;"]),s=ma.substitute(s,"//VTK::Color::Dec",["attribute vec4 gColor;","varying vec4 vertexColorVSOutput;"]).result,s=ma.substitute(s,"//VTK::Color::Impl",["vertexColorVSOutput = gColor;"]).result,i=ma.substitute(i,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,i=ma.substitute(i,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,Q=Q.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])),o=ma.substitute(o,"//VTK::Color::Impl",Q).result,o=ma.substitute(o,"//VTK::Color::Dec",B).result,e.Vertex=s,e.Geometry=i,e.Fragment=o}n.replaceShaderColor(e,r,a)},e.replaceShaderPositionVC=function(e,r,a){if(t.hardwareSupport){var s=e.Vertex;t.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(s=ma.substitute(s,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","vertexVCVSOutput = MCVCMatrix * gVertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result,s=ma.substitute(s,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result):(s=ma.substitute(s,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;"]).result,s=ma.substitute(s,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result),e.Vertex=s}n.replaceShaderPositionVC(e,r,a)},e.replaceShaderPicking=function(e,r,a){if(t.hardwareSupport){var s=e.Fragment,i=e.Vertex;i=ma.substitute(i,"//VTK::Picking::Dec",["attribute vec3 mapperIndexVS;","varying vec3 mapperIndexVSOutput;"]).result,i=ma.substitute(i,"//VTK::Picking::Impl","  mapperIndexVSOutput = mapperIndexVS;").result,e.Vertex=i,s=ma.substitute(s,"//VTK::Picking::Dec",["varying vec3 mapperIndexVSOutput;","uniform vec3 mapperIndex;","uniform int picking;"]).result,s=ma.substitute(s,"//VTK::Picking::Impl",["  vec4 pickColor = picking == 2 ? vec4(mapperIndexVSOutput,1.0) : vec4(mapperIndex,1.0);","  gl_FragData[0] = picking != 0 ? pickColor : gl_FragData[0];"]).result,e.Fragment=s}else n.replaceShaderPicking(e,r,a)},e.updateGlyphShaderParameters=function(n,r,a,s,i,o,l,B){var Q=a.getProgram();if(n){var c=t.normalMatrix,F=o,U=9*l,g=t.tmpMat3,d=c[0],u=c[1],I=c[2],m=c[3],C=c[4],b=c[5],y=c[6],S=c[7],h=c[8],Z=F[U],x=F[U+1],p=F[U+2],G=F[U+3],R=F[U+4],L=F[U+5],V=F[U+6],A=F[U+7],f=F[U+8];g[0]=Z*d+x*m+p*y,g[1]=Z*u+x*C+p*S,g[2]=Z*I+x*b+p*h,g[3]=G*d+R*m+L*y,g[4]=G*u+R*C+L*S,g[5]=G*I+R*b+L*h,g[6]=V*d+A*m+f*y,g[7]=V*u+A*C+f*S,g[8]=V*I+A*b+f*h,Q.setUniformMatrix3x3("normalMatrix",t.tmpMat3)}if(e.multiply4x4WithOffset(t.tmpMat4,t.mcpcMatrix,i,16*l),Q.setUniformMatrix("MCPCMatrix",t.tmpMat4),r&&(e.multiply4x4WithOffset(t.tmpMat4,t.mcvcMatrix,i,16*l),Q.setUniformMatrix("MCVCMatrix",t.tmpMat4)),s){var N=s.getData();t.tmpColor[0]=N[4*l]/255,t.tmpColor[1]=N[4*l+1]/255,t.tmpColor[2]=N[4*l+2]/255,Q.setUniform3fArray("ambientColorUniform",t.tmpColor),Q.setUniform3fArray("diffuseColorUniform",t.tmpColor)}B&&Q.setUniform3fArray("mapperIndex",B.getPropColorValue())},e.renderPieceDraw=function(n,r){var a=r.getProperty().getRepresentation(),s=t.context,i=r.getProperty().getEdgeVisibility()&&a===Gs.SURFACE,o=t.openGLCamera.getKeyMatrices(n),l=t.openGLActor.getKeyMatrices();mt(t.normalMatrix,o.normalMatrix,l.normalMatrix),Object(b.l)(t.mcpcMatrix,o.wcpc,l.mcwc),Object(b.l)(t.mcvcMatrix,o.wcvc,l.mcwc);var B=t.renderable.getMatrixArray(),Q=t.renderable.getNormalArray(),c=t.renderable.getColorArray(),F=B.length/16,U=!1;t.openGLRenderer.getSelector()&&t.openGLRenderer.getSelector().getCurrentPass()===Ls.COMPOSITE_INDEX_PASS&&(U=!0);for(var g=t.primTypes.Start;g<t.primTypes.End;g++){var d=t.primitives[g].getCABO();if(d.getElementCount()){t.drawingEdges=i&&(g===t.primTypes.TrisEdges||g===t.primTypes.TriStripsEdges),e.updateShaders(t.primitives[g],n,r);var u=t.primitives[g].getProgram(),I=e.getOpenGLMode(a,g),m=u.isUniformUsed("normalMatrix"),C=u.isUniformUsed("MCVCMatrix");if(t.hardwareSupport)t.extension?t.extension.drawArraysInstancedANGLE(I,0,d.getElementCount(),F):s.drawArraysInstanced(I,0,d.getElementCount(),F);else for(var y=0;y<F;++y)U&&t.openGLRenderer.getSelector().renderCompositeIndex(y),e.updateGlyphShaderParameters(m,C,t.primitives[g],c,B,Q,y,U?t.openGLRenderer.getSelector():null),s.drawArrays(I,0,d.getElementCount())}}},e.setMapperShaderParameters=function(e,r,a){if(e.getCABO().getElementCount()&&(t.glyphBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime()))return e.getProgram().isAttributeUsed("gMatrix")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),t.matrixBuffer,"gMatrix",0,64,t.context.FLOAT,4,!1,1)||ps("Error setting gMatrix in shader VAO."):e.getVAO().removeAttributeArray("gMatrix"),e.getProgram().isAttributeUsed("gNormal")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),t.normalBuffer,"gNormal",0,36,t.context.FLOAT,3,!1,1)||ps("Error setting gNormal in shader VAO."):e.getVAO().removeAttributeArray("gNormal"),e.getProgram().isAttributeUsed("gColor")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),t.colorBuffer,"gColor",0,4,t.context.UNSIGNED_BYTE,4,!0,1,!1)||ps("Error setting gColor in shader VAO."):e.getVAO().removeAttributeArray("gColor"),e.getProgram().isAttributeUsed("mapperIndexVS")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),t.pickBuffer,"mapperIndexVS",0,4,t.context.UNSIGNED_BYTE,4,!0,1,!1)||ps("Error setting mapperIndexVS in shader VAO."):e.getVAO().removeAttributeArray("mapperIndexVS"),n.setMapperShaderParameters(e,r,a),void e.getAttributeUpdateTime().modified();n.setMapperShaderParameters(e,r,a)},e.getNeedToRebuildBufferObjects=function(e,r){return t.renderable.buildArrays(),t.VBOBuildTime.getMTime()<t.renderable.getBuildTime().getMTime()||n.getNeedToRebuildBufferObjects(e,r)},e.buildBufferObjects=function(e,r){if(t.hardwareSupport){var a=t.renderable.getMatrixArray(),s=t.renderable.getNormalArray(),i=t.renderable.getColorArray();if(t.matrixBuffer||(t.matrixBuffer=fa.newInstance(),t.matrixBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.normalBuffer=fa.newInstance(),t.normalBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorBuffer=fa.newInstance(),t.colorBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.pickBuffer=fa.newInstance(),t.pickBuffer.setOpenGLRenderWindow(t.openGLRenderWindow)),t.renderable.getBuildTime().getMTime()>t.glyphBOBuildTime.getMTime()){t.matrixBuffer.upload(a,Rs.ARRAY_BUFFER),t.normalBuffer.upload(s,Rs.ARRAY_BUFFER),i?t.colorBuffer.upload(i.getData(),Rs.ARRAY_BUFFER):t.colorBuffer.releaseGraphicsResources();for(var o=a.length/16,l=new Uint8Array(4*o),B=0;B<o;++B){var Q=B+1,c=4*B;l[c]=Q%256,Q-=l[c],Q/=256,l[c+1]=Q%256,Q-=l[c+1],Q/=256,l[c+2]=Q%256,l[c+3]=255}t.pickBuffer.upload(l,Rs.ARRAY_BUFFER),t.glyphBOBuildTime.modified()}}return n.buildBufferObjects(e,r)}}var Ns={normalMatrix:null,mcpcMatrix:null,mcwcMatrix:null};function Es(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ns,n),os.extend(e,t,n),t.tmpMat3=dt(new Float64Array(9)),t.normalMatrix=dt(new Float64Array(9)),t.mcpcMatrix=Object(b.h)(new Float64Array(16)),t.mcvcMatrix=Object(b.h)(new Float64Array(16)),t.tmpColor=[],t.glyphBOBuildTime={},a.c.obj(t.glyphBOBuildTime,{mtime:0}),fs(e,t)}var Ds={newInstance:a.c.newInstance(Es,"vtkOpenGLGlyph3DMapper"),extend:Es},vs={SlicingMode:{NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5}},Js={NEAREST:0,LINEAR:1},Ws={InterpolationType:Js},Xs=a.c.vtkErrorMacro,Hs=vs.SlicingMode;function Ts(e,t,n){if(t.apply(e)){var r=e.getIndependentComponents();return"".concat(e.getMTime(),"-").concat(r,"-").concat(n)}return"0"}function ks(e,t){t.classHierarchy.push("vtkOpenGLImageMapper"),e.buildPass=function(n){if(n){t.openGLImageSlice=e.getFirstAncestorOfType("vtkOpenGLImageSlice"),t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.pwfTexture.setOpenGLRenderWindow(t.openGLRenderWindow);var r=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(r.getActiveCamera()),t.renderable.getSliceAtFocalPoint()&&t.renderable.setSliceFromCamera(r.getActiveCamera())}},e.translucentPass=function(t){t&&e.render()},e.opaqueZBufferPass=function(n){n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaquePass=function(t){t&&e.render()},e.getCoincidentParameters=function(e,n){return t.renderable.getResolveCoincidentTopology()?t.renderable.getCoincidentTopologyPolygonOffsetParameters():null},e.render=function(){var n=t.openGLImageSlice.getRenderable(),r=t.openGLRenderer.getRenderable();e.renderPiece(r,n)},e.buildShaders=function(t,n,r){e.getShaderTemplate(t,n,r),e.replaceShaderValues(t,n,r)},e.getShaderTemplate=function(e,t,n){e.Vertex=Oa,e.Fragment=za,e.Geometry=""},e.replaceShaderValues=function(n,r,a){var s=n.Vertex,i=n.Fragment;s=ma.substitute(s,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,s=ma.substitute(s,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result,s=ma.substitute(s,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result,s=ma.substitute(s,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result;var o=t.openGLTexture.getComponents(),l=a.getProperty().getIndependentComponents(),B=["varying vec2 tcoordVCVSOutput;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;"];if(l){for(var Q=1;Q<o;Q++)B=B.concat(["uniform float cshift".concat(Q,";"),"uniform float cscale".concat(Q,";"),"uniform float pwfshift".concat(Q,";"),"uniform float pwfscale".concat(Q,";")]);switch(o){case 1:B=B.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:B=B.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:B=B.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:B=B.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Xs("Unsupported number of independent coordinates.")}}if(i=ma.substitute(i,"//VTK::TCoord::Dec",B).result,l){for(var c=["r","g","b","a"],F=["vec4 tvalue = texture2D(texture1, tcoordVCVSOutput);"],U=0;U<o;U++)F=F.concat(["vec3 tcolor".concat(U," = mix").concat(U," * texture2D(colorTexture1, vec2(tvalue.").concat(c[U]," * cscale").concat(U," + cshift").concat(U,", height").concat(U,")).rgb;"),"float compWeight".concat(U," = mix").concat(U," * texture2D(pwfTexture1, vec2(tvalue.").concat(c[U]," * pwfscale").concat(U," + pwfshift").concat(U,", height").concat(U,")).r;")]);switch(o){case 1:F=F.concat(["gl_FragData[0] = vec4(tcolor0.rgb, opacity);"]);break;case 2:F=F.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:F=F.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:F=F.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Xs("Unsupported number of independent coordinates.")}i=ma.substitute(i,"//VTK::TCoord::Impl",F).result}else switch(o){case 1:i=ma.substitute(i,"//VTK::TCoord::Impl",["float intensity = texture2D(texture1, tcoordVCVSOutput).r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]).result;break;case 2:i=ma.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tcolor.g + pwfshift0);"]).result;break;default:i=ma.substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}t.haveSeenDepthRequest&&(i=ma.substitute(i,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,i=ma.substitute(i,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=s,n.Fragment=i,e.replaceShaderCoincidentOffset(n,r,a)},e.getNeedToRebuildShaders=function(e,n,r){var a=t.openGLTexture.getComponents(),s=r.getProperty().getIndependentComponents();return(t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||0===e.getProgram()||t.lastTextureComponents!==a||t.lastIndependentComponents!==s)&&(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,t.lastTextureComponents=a,t.lastIndependentComponents=s,!0)},e.updateShaders=function(n,r,a){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,a)){var s={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(s,r,a);var i=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);i!==n.getProgram()&&(n.setProgram(i),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,a),e.setCameraShaderParameters(n,r,a),e.setPropertyShaderParameters(n,r,a)},e.setMapperShaderParameters=function(n,r,a){n.getCABO().getElementCount()&&(t.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Xs("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getTCoordComponents(),t.context.FALSE)||Xs("Error setting tcoordMC in shader VAO.")),n.getAttributeUpdateTime().modified());var s=t.openGLTexture.getTextureUnit();n.getProgram().setUniformi("texture1",s);var i=t.openGLTexture.getComponents(),o=a.getProperty().getIndependentComponents();if(o)for(var l=0;l<i;l++)n.getProgram().setUniformf("mix".concat(l),a.getProperty().getComponentWeight(l));for(var B=t.openGLTexture.getShiftAndScale(),Q=0;Q<i;Q++){var c=a.getProperty().getColorWindow(),F=a.getProperty().getColorLevel(),U=o?Q:0,g=a.getProperty().getRGBTransferFunction(U);if(g){var d=g.getRange();c=d[1]-d[0],F=.5*(d[1]+d[0])}var u=B.scale/c,I=(B.shift-F)/c+.5;n.getProgram().setUniformf("cshift".concat(Q),I),n.getProgram().setUniformf("cscale".concat(Q),u)}for(var m=0;m<i;m++){var C=1,b=0,y=o?m:0,S=a.getProperty().getPiecewiseFunction(y);if(S){var h=S.getRange(),Z=h[1]-h[0],x=.5*(h[0]+h[1]);C=B.scale/Z,b=(B.shift-x)/Z+.5}n.getProgram().setUniformf("pwfshift".concat(m),b),n.getProgram().setUniformf("pwfscale".concat(m),C)}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",t.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){var p=e.getCoincidentParameters(r,a);n.getProgram().setUniformf("coffset",p.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",p.factor)}var G=t.colorTexture.getTextureUnit();n.getProgram().setUniformi("colorTexture1",G);var R=t.pwfTexture.getTextureUnit();n.getProgram().setUniformi("pwfTexture1",R)},e.setCameraShaderParameters=function(e,n,r){var a=e.getProgram(),s=t.openGLImageSlice.getKeyMatrices(),i=t.currentInput.getIndexToWorld();Object(b.l)(t.imagemat,s.mcwc,i);var o=t.openGLCamera.getKeyMatrices(n);if(Object(b.l)(t.imagemat,o.wcpc,t.imagemat),e.getCABO().getCoordShiftAndScaleEnabled()){var l=e.getCABO().getInverseShiftAndScaleMatrix();Object(b.l)(t.imagemat,t.imagemat,l)}a.setUniformMatrix("MCPCMatrix",t.imagemat)},e.setPropertyShaderParameters=function(e,t,n){var r=e.getProgram(),a=n.getProperty().getOpacity();r.setUniformf("opacity",a)},e.renderPieceStart=function(n,r){e.updateBufferObjects(n,r),t.lastBoundBO=null},e.renderPieceDraw=function(n,r){var a=t.context;t.openGLTexture.activate(),t.colorTexture.activate(),t.pwfTexture.activate(),t.tris.getCABO().getElementCount()&&(e.updateShaders(t.tris,n,r),a.drawArrays(a.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release()),t.openGLTexture.deactivate(),t.colorTexture.deactivate(),t.pwfTexture.deactivate()},e.renderPieceFinish=function(e,t){},e.renderPiece=function(n,r){e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),t.currentInput?(e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)):Xs("No input!")},e.computeBounds=function(n,r){e.getInput()?t.bounds=e.getInput().getBounds():Object(u.D)(t.bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,r){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<r.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<r.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(n,r){var a=t.currentInput;if(a){var i=a.getPointData()&&a.getPointData().getScalars();if(i){var o=r.getProperty(),l=o.getInterpolationType();l===Js.NEAREST?(t.colorTexture.setMinificationFilter(Cn.NEAREST),t.colorTexture.setMagnificationFilter(Cn.NEAREST),t.pwfTexture.setMinificationFilter(Cn.NEAREST),t.pwfTexture.setMagnificationFilter(Cn.NEAREST)):(t.colorTexture.setMinificationFilter(Cn.LINEAR),t.colorTexture.setMagnificationFilter(Cn.LINEAR),t.pwfTexture.setMinificationFilter(Cn.LINEAR),t.pwfTexture.setMagnificationFilter(Cn.LINEAR));var B=i.getNumberOfComponents(),Q=o.getIndependentComponents(),c=Q?B:1,F=Q?2*c:1,U=Ts(o,o.getRGBTransferFunction,c);if(t.colorTextureString!==U){var g=1024,d=new Uint8Array(g*F*3),u=o.getRGBTransferFunction();if(u){for(var I=new Float32Array(3072),m=0;m<c;m++){var C=(u=o.getRGBTransferFunction(m)).getRange();if(u.getTable(C[0],C[1],g,I,1),Q)for(var b=0;b<3072;b++)d[m*g*6+b]=255*I[b],d[m*g*6+b+3072]=255*I[b];else for(var y=0;y<3072;y++)d[m*g*6+y]=255*I[y]}t.colorTexture.create2DFromRaw(g,F,3,D.b.UNSIGNED_CHAR,d)}else{for(var S=0;S<3072;++S)d[S]=255*S/3069,d[S+1]=255*S/3069,d[S+2]=255*S/3069;t.colorTexture.create2DFromRaw(g,1,3,D.b.UNSIGNED_CHAR,d)}t.colorTextureString=U}var h=Ts(o,o.getPiecewiseFunction,c);if(t.pwfTextureString!==h){var Z=1024,x=Z*F,p=new Uint8Array(x),G=o.getPiecewiseFunction();if(t.pwfTexture.resetFormatAndType(),G){for(var R=new Float32Array(x),L=new Float32Array(Z),V=0;V<c;++V)if(null===(G=o.getPiecewiseFunction(V)))R.fill(1);else{var A=G.getRange();if(G.getTable(A[0],A[1],Z,L,1),Q)for(var f=0;f<Z;f++)R[V*Z*2+f]=L[f],R[V*Z*2+f+Z]=L[f];else for(var N=0;N<Z;N++)R[V*Z*2+N]=L[N]}t.pwfTexture.create2DFromRaw(Z,F,1,D.b.FLOAT,R)}else p.fill(255),t.pwfTexture.create2DFromRaw(Z,1,1,D.b.UNSIGNED_CHAR,p);t.pwfTextureString=h}var E=t.renderable.getClosestIJKAxis().ijkMode,v=t.renderable.getSlice();E!==t.renderable.getSlicingMode()&&(v=t.renderable.getSliceAtPosition(v));var J,W=a.getExtent();E===Hs.I&&(J=v-W[0]),E===Hs.J&&(J=v-W[2]),E!==Hs.K&&E!==Hs.NONE||(J=v-W[4]);var X="".concat(v,"A").concat(a.getMTime(),"A").concat(i.getMTime(),"B").concat(e.getMTime(),"C").concat(t.renderable.getSlicingMode(),"D").concat(r.getProperty().getMTime());if(t.VBOBuildString!==X){var H=a.getDimensions();l===Js.NEAREST?(4===B?(t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(Cn.NEAREST)):t.openGLTexture.setMinificationFilter(Cn.NEAREST),t.openGLTexture.setMagnificationFilter(Cn.NEAREST)):(4===B?(t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(Cn.LINEAR_MIPMAP_LINEAR)):t.openGLTexture.setMinificationFilter(Cn.LINEAR),t.openGLTexture.setMagnificationFilter(Cn.LINEAR)),t.openGLTexture.setWrapS(mn.CLAMP_TO_EDGE),t.openGLTexture.setWrapT(mn.CLAMP_TO_EDGE);for(var T=H[0]*H[1]*B,k=new Float32Array(12),M=new Float32Array(8),w=0;w<4;w++)M[2*w]=w%2?1:0,M[2*w+1]=w>1?1:0;var Y=i.getData(),O=null;if(E===Hs.I){O=new Y.constructor(H[2]*H[1]*B);for(var z=0,P=0;P<H[2];P++)for(var K=0;K<H[1];K++){var j=(J+K*H[0]+P*H[0]*H[1])*B;z=(P*H[1]+K)*B,O.set(Y.subarray(j,j+B),z)}H[0]=H[1],H[1]=H[2],k[0]=v,k[1]=W[2],k[2]=W[4],k[3]=v,k[4]=W[3],k[5]=W[4],k[6]=v,k[7]=W[2],k[8]=W[5],k[9]=v,k[10]=W[3],k[11]=W[5]}else if(E===Hs.J){O=new Y.constructor(H[2]*H[0]*B);for(var _=0,q=0;q<H[2];q++)for(var $=0;$<H[0];$++){var ee=($+J*H[0]+q*H[0]*H[1])*B;_=(q*H[0]+$)*B,O.set(Y.subarray(ee,ee+B),_)}H[1]=H[2],k[0]=W[0],k[1]=v,k[2]=W[4],k[3]=W[1],k[4]=v,k[5]=W[4],k[6]=W[0],k[7]=v,k[8]=W[5],k[9]=W[1],k[10]=v,k[11]=W[5]}else E===Hs.K||E===Hs.NONE?(O=Y.subarray(J*T,(J+1)*T),k[0]=W[0],k[1]=W[2],k[2]=v,k[3]=W[1],k[4]=W[2],k[5]=v,k[6]=W[0],k[7]=W[3],k[8]=v,k[9]=W[1],k[10]=W[3],k[11]=v):Xs("Reformat slicing not yet supported.");t.openGLTexture.create2DFromRaw(H[0],H[1],B,i.getDataType(),O),t.openGLTexture.activate(),t.openGLTexture.sendParameters(),t.openGLTexture.deactivate();var te=s.a.newInstance({numberOfComponents:3,values:k});te.setName("points");var ne=s.a.newInstance({numberOfComponents:2,values:M});ne.setName("tcoords");var re=new Uint16Array(8);re[0]=3,re[1]=0,re[2]=1,re[3]=3,re[4]=3,re[5]=0,re[6]=3,re[7]=2;var ae=s.a.newInstance({numberOfComponents:1,values:re});t.tris.getCABO().createVBO(ae,"polys",rr.SURFACE,{points:te,tcoords:ne,cellOffset:0}),t.VBOBuildTime.modified(),t.VBOBuildString=X}}}}}var Ms={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,colorTexture:null,pwfTexture:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0};function ws(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ms,n),an.extend(e,t,n),Pa.implementReplaceShaderCoincidentOffset(e,t,n),t.tris=Ya.newInstance(),t.openGLTexture=An.newInstance(),t.colorTexture=An.newInstance(),t.pwfTexture=An.newInstance(),t.imagemat=Object(b.h)(new Float64Array(16)),a.c.setGet(e,t,[]),t.VBOBuildTime={},a.c.obj(t.VBOBuildTime),ks(e,t)}var Ys={newInstance:a.c.newInstance(ws,"vtkOpenGLImageMapper"),extend:ws};function Os(e,t){t.classHierarchy.push("vtkOpenGLImageSlice"),e.buildPass=function(n){if(t.renderable&&t.renderable.getVisibility()&&n){if(!t.renderable)return;t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseOpaqueZBufferPass=function(t){e.traverseOpaquePass(t)},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children.forEach((function(e){e.traverse(n)})),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.children.forEach((function(e){e.traverse(n)})),e.apply(n,!1))},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.opaqueZBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaquePass=function(n,r){n&&(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!0))},e.translucentPass=function(n,r){n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1)):t.context.depthMask(!0)},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(Object(b.d)(t.keyMatrices.mcwc,t.renderable.getMatrix()),Object(b.i)(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.keyMatrixTime.modified()),t.keyMatrices}}var zs={context:null,keyMatrixTime:null,keyMatrices:null};function Ps(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zs,n),an.extend(e,t,n),t.keyMatrixTime={},a.c.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={mcwc:Object(b.h)(new Float64Array(16))},a.c.setGet(e,t,["context"]),Os(e,t)}var Ks={newInstance:a.c.newInstance(Ps,"vtkOpenGLImageSlice"),extend:Ps},js=a.c.vtkDebugMacro;function _s(e,t){t.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),e.opaquePass=function(n,r){t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent();var a=t.openGLRenderer.getAspectRatio(),s=t.openGLRenderer?t.openGLRenderer.getRenderable().getActiveCamera():null,i=t.openGLRenderer.getTiledSizeAndOrigin(),o=null;if(t.renderable.getUseZValues()){var l=r.getZBufferTexture(),B=Math.floor(l.getWidth()),Q=Math.floor(l.getHeight()),c=t.openGLRenderWindow.getContext();l.bind();var F=r.getFramebuffer();F?F.saveCurrentBindingsAndBuffers():js("No framebuffer to save/restore");var U=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,U),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,l.getHandle(),0),c.checkFramebufferStatus(c.FRAMEBUFFER)===c.FRAMEBUFFER_COMPLETE&&(o=new Uint8Array(B*Q*4),c.viewport(0,0,B,Q),c.readPixels(0,0,B,Q,c.RGBA,c.UNSIGNED_BYTE,o)),F&&F.restorePreviousBindingsAndBuffers(),c.deleteFramebuffer(U)}t.renderable.invokeCallback(t.renderable.getInputData(),s,a,i,o)},e.queryPass=function(e,n){e&&t.renderable.getUseZValues()&&n.requestDepth()}}var qs={};function $s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,qs,n),an.extend(e,t,n),_s(e,t)}var ei={newInstance:a.c.newInstance($s,"vtkOpenGLPixelSpaceCallbackMapper"),extend:$s},ti=a.c.vtkDebugMacro;function ni(e,t){t.classHierarchy.push("vtkOpenGLRenderer"),e.buildPass=function(n){if(n){if(!t.renderable)return;t.renderable.isActiveCameraCreated()||t.renderable.resetCamera(),e.updateLights(),e.prepareNodes(),e.addMissingNode(t.renderable.getActiveCamera()),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps()),e.removeUnusedNodes()}},e.updateLights=function(){for(var e=0,n=t.renderable.getLightsByReference(),r=0;r<n.length;++r)n[r].getSwitch()>0&&e++;return e||(ti("No lights are on, creating one."),t.renderable.createLight()),e},e.opaqueZBufferPass=function(n){if(n){var r=0,a=t.context;t.renderable.getTransparent()||(t.context.clearColor(1,0,0,1),r|=a.COLOR_BUFFER_BIT),t.renderable.getPreserveDepthBuffer()||(a.clearDepth(1),r|=a.DEPTH_BUFFER_BIT,a.depthMask(!0));var s=e.getTiledSizeAndOrigin();a.enable(a.SCISSOR_TEST),a.scissor(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),a.viewport(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),a.colorMask(!0,!0,!0,!0),a.clear(r),a.enable(a.DEPTH_TEST)}},e.cameraPass=function(t){t&&e.clear()},e.getAspectRatio=function(){var e=t.parent.getSizeByReference(),n=t.renderable.getViewportByReference();return e[0]*(n[2]-n[0])/((n[3]-n[1])*e[1])},e.getTiledSizeAndOrigin=function(){var e=t.renderable.getViewportByReference(),n=[0,0,1,1],r=Object(u.a)(e[0]-n[0],0,1),a=Object(u.a)(e[1]-n[1],0,1),s=t.parent.normalizedDisplayToDisplay(r,a),i=Math.round(s[0]),o=Math.round(s[1]),l=Object(u.a)(e[2]-n[0],0,1),B=Object(u.a)(e[3]-n[1],0,1);l>n[2]-n[0]&&(l=n[2]-n[0]),B>n[3]-n[1]&&(B=n[3]-n[1]);var Q=t.parent.normalizedDisplayToDisplay(l,B),c=Math.round(Q[0])-i,F=Math.round(Q[1])-o;return c<0&&(c=0),F<0&&(F=0),{usize:c,vsize:F,lowerLeftU:i,lowerLeftV:o}},e.clear=function(){var n=0,r=t.context;if(!t.renderable.getTransparent()){var a=t.renderable.getBackgroundByReference();t.context.clearColor(a[0],a[1],a[2],a[3]),n|=r.COLOR_BUFFER_BIT}t.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);var s=e.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),r.viewport(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),r.clear(n),r.enable(r.DEPTH_TEST)},e.releaseGraphicsResources=function(){null!==t.selector&&t.selector.releaseGraphicsResources()},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))}}var ri={context:null,openGLRenderWindow:null,selector:null};function ai(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ri,n),an.extend(e,t,n),a.c.get(e,t,["shaderCache"]),a.c.setGet(e,t,["selector"]),ni(e,t)}var si={newInstance:a.c.newInstance(ai,"vtkOpenGLRenderer"),extend:ai},ii=a.c.vtkErrorMacro;function oi(e,t){t.classHierarchy.push("vtkOpenGLSkybox"),e.buildPass=function(n){if(n){t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t.openGLRenderWindow);var r=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(r.getActiveCamera())}},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;n.incrementOpaqueActorCount()}},e.opaquePass=function(n,r){if(n&&!t.openGLRenderer.getSelector()){e.updateBufferObjects(),t.openGLRenderWindow.enableDepthMask(),t.openGLRenderWindow.getShaderCache().readyShaderProgram(t.tris.getProgram()),t.openGLTexture.render(t.openGLRenderWindow);var a=t.openGLTexture.getTextureUnit();t.tris.getProgram().setUniformi("sbtexture",a);var s=t.openGLRenderer.getRenderable(),i=t.openGLCamera.getKeyMatrices(s),o=new Float64Array(16);if(Object(b.g)(o,i.wcpc),t.tris.getProgram().setUniformMatrix("IMCPCMatrix",o),"box"===t.lastFormat){var l=s.getActiveCamera().getPosition();t.tris.getProgram().setUniform3f("camPos",l[0],l[1],l[2])}t.tris.getVAO().bind(),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.openGLTexture.deactivate()}},e.updateBufferObjects=function(){if(!t.tris.getCABO().getElementCount()){for(var e=new Float32Array(12),n=0;n<4;n++)e[3*n]=n%2*2-1,e[3*n+1]=n>1?1:-1,e[3*n+2]=1;var r=s.a.newInstance({numberOfComponents:3,values:e});r.setName("points");var a=new Uint16Array(8);a[0]=3,a[1]=0,a[2]=1,a[3]=3,a[4]=3,a[5]=0,a[6]=3,a[7]=2;var i=s.a.newInstance({numberOfComponents:1,values:a});t.tris.getCABO().createVBO(i,"polys",rr.SURFACE,{points:r,cellOffset:0})}t.renderable.getFormat()!==t.lastFormat&&(t.lastFormat=t.renderable.getFormat(),"box"===t.lastFormat&&t.tris.setProgram(t.openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec3 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = wpos.xyz/wpos.w;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec3 TexCoords;\n             uniform samplerCube sbtexture;\n             uniform vec3 camPos;\n             void main () {\n               // skybox looks from inside out\n               // which means we have to adjust\n               // our tcoords. Otherwise text would\n               // be flipped\n               vec3 tc = normalize(TexCoords - camPos);\n               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))\n               {\n                 tc = vec3(1.0, 1.0, -1.0) * tc;\n               }\n               else\n               {\n                 tc = vec3(-1.0, 1.0, 1.0) * tc;\n               }\n               gl_FragData[0] = textureCube(sbtexture, tc);\n             }","")),"background"===t.lastFormat&&t.tris.setProgram(t.openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec2 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec2 TexCoords;\n             uniform sampler2D sbtexture;\n             void main () {\n               gl_FragData[0] = texture2D(sbtexture, TexCoords);\n             }","")),t.tris.getShaderSourceTime().modified(),t.tris.getVAO().bind(),t.tris.getVAO().addAttributeArray(t.tris.getProgram(),t.tris.getCABO(),"vertexMC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||ii("Error setting vertexMC in shader VAO."));var o=t.renderable.getTextures();o.length||ii("vtkSkybox requires a texture map"),t.openGLTexture.getRenderable()!==o[0]&&(t.openGLTexture.releaseGraphicsResources(t.openGLRenderWindow),t.openGLTexture.setRenderable(o[0]))}}var li={context:null};function Bi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,li,n),an.extend(e,t,n),t.openGLTexture=An.newInstance(),t.tris=Ya.newInstance(),t.keyMatrixTime={},a.c.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:dt(new Float64Array(9)),mcwc:Object(b.h)(new Float64Array(16))},a.c.setGet(e,t,["context"]),a.c.get(e,t,["activeTextures"]),oi(e,t)}var Qi={newInstance:a.c.newInstance(Bi),extend:Bi};function ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Fi=a.c.vtkErrorMacro;function Ui(e,t){t.classHierarchy.push("vtkOpenGLSphereMapper");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.getShaderTemplate=function(e,t,n){e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkSphereMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Spheres\n\nattribute vec4 vertexMC;\nattribute vec2 offsetMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying vec3 centerVCVSOutput;\n\nuniform int cameraParallel;\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  // compute the projected vertex position\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = length(offsetMC)*0.5;\n\n  // make the triangle face the camera\n  if (cameraParallel == 0)\n    {\n    vec3 dir = normalize(-vertexVCVSOutput.xyz);\n    vec3 base2 = normalize(cross(dir,vec3(1.0,0.0,0.0)));\n    vec3 base1 = cross(base2,dir);\n    vertexVCVSOutput.xyz = vertexVCVSOutput.xyz + offsetMC.x*base1 + offsetMC.y*base2;\n    }\n  else\n    {\n    // add in the offset\n    vertexVCVSOutput.xy = vertexVCVSOutput.xy + offsetMC;\n    }\n\n  gl_Position = VCPCMatrix * vertexVCVSOutput;\n}\n",e.Fragment=za,e.Geometry=""},e.replaceShaderValues=function(e,r,a){var s=e.Vertex,i=e.Fragment;s=ma.substitute(s,"//VTK::Camera::Dec",["uniform mat4 VCPCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,i=ma.substitute(i,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,i=ma.substitute(i,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;\n"]).result,i=ma.substitute(i,"//VTK::Normal::Dec",["uniform float invertedDepth;\n","uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCPCMatrix;\n"]).result;var o="";t.context.getExtension("EXT_frag_depth")&&(o="gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),t.openGLRenderWindow.getWebgl2()&&(o="gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;\n"),i=ma.substitute(i,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float b = 2.0*dot(EyePos,EyeDir);\n","  float c = dot(EyePos,EyePos) - 1.0;\n","  float d = b*b - 4.0*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t = (-b - invertedDepth*sqrt(d))*0.5;\n","    normalVCVSOutput = invertedDepth*normalize(EyePos + t*EyeDir);\n","    vertexVC.xyz = normalVCVSOutput*radiusVCVSOutput + centerVCVSOutput;\n","    }\n","  vec4 pos = VCPCMatrix * vertexVC;\n",o]).result,i=ma.substitute(i,"//VTK::Normal::Impl","").result,t.haveSeenDepthRequest&&(i=ma.substitute(i,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=s,e.Fragment=i,n.replaceShaderValues(e,r,a)},e.setMapperShaderParameters=function(e,r,a){e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"offsetMC",12,e.getCABO().getStride(),t.context.FLOAT,2,!1)||Fi("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isUniformUsed("invertedDepth")&&e.getProgram().setUniformf("invertedDepth",t.invert?-1:1),n.setMapperShaderParameters(e,r,a)},e.setCameraShaderParameters=function(e,n,r){var a=e.getProgram(),s=n.getActiveCamera(),i=t.openGLCamera.getKeyMatrices(n);if(a.isUniformUsed("VCPCMatrix")&&a.setUniformMatrix("VCPCMatrix",i.vcpc),a.isUniformUsed("MCVCMatrix"))if(r.getIsIdentity())a.setUniformMatrix("MCVCMatrix",i.wcvc);else{var o=t.openGLActor.getKeyMatrices(),l=new Float64Array(16);Object(b.l)(l,i.wcvc,o.mcwc),a.setUniformMatrix("MCVCMatrix",l)}a.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",s.getParallelProjection())},e.getOpenGLMode=function(e,n){return t.context.TRIANGLES},e.buildBufferObjects=function(e,n){var r=t.currentInput;if(null!==r){t.renderable.mapScalars(r,1);var a=t.renderable.getColorMapColors(),s=t.primitives[t.primTypes.Tris].getCABO(),i=r.getPointData(),o=r.getPoints(),l=o.getNumberOfPoints(),B=o.getData(),Q=null;null!=t.renderable.getScaleArray()&&i.hasArray(t.renderable.getScaleArray())&&(Q=i.getArray(t.renderable.getScaleArray()).getData());var c=null,F=0,U=null;a?(F=a.getNumberOfComponents(),s.setColorOffset(0),s.setColorBOStride(4),c=a.getData(),U=new Uint8Array(3*l*4),s.getColorBO()||s.setColorBO(fa.newInstance()),s.getColorBO().setOpenGLRenderWindow(t.openGLRenderWindow)):s.getColorBO()&&s.setColorBO(null),s.setColorComponents(F);var g=new Float32Array(5*l*3);s.setStride(20);for(var d=Math.cos(Object(u.B)(30)),I=0,m=0,C=0,b=0,y=0;y<l;++y){var S=t.renderable.getRadius();Q&&(S=Q[y]),I=3*y,g[C++]=B[I++],g[C++]=B[I++],g[C++]=B[I++],g[C++]=-2*S*d,g[C++]=-S,c&&(m=y*F,U[b++]=c[m],U[b++]=c[m+1],U[b++]=c[m+2],U[b++]=c[m+3]),I=3*y,g[C++]=B[I++],g[C++]=B[I++],g[C++]=B[I++],g[C++]=2*S*d,g[C++]=-S,c&&(U[b++]=c[m],U[b++]=c[m+1],U[b++]=c[m+2],U[b++]=c[m+3]),I=3*y,g[C++]=B[I++],g[C++]=B[I++],g[C++]=B[I++],g[C++]=0,g[C++]=2*S,c&&(U[b++]=c[m],U[b++]=c[m+1],U[b++]=c[m+2],U[b++]=c[m+3])}s.setElementCount(C/5),s.upload(g,Za.ARRAY_BUFFER),a&&s.getColorBO().upload(U,Za.ARRAY_BUFFER),t.VBOBuildTime.modified()}}}var gi={};function di(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gi,n),os.extend(e,t,n),Ui(e,t)}var ui={newInstance:a.c.newInstance(di,"vtkOpenGLSphereMapper"),extend:di};function Ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mi=a.l;function Ci(e,t){t.classHierarchy.push("vtkOpenGLStickMapper");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ii(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.getShaderTemplate=function(e,t,n){e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkStickMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Sticks\n\nattribute vec4 vertexMC;\nattribute vec3 orientMC;\nattribute vec4 offsetMC;\nattribute float radiusMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n//VTK::Picking::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying float lengthVCVSOutput;\nvarying vec3 centerVCVSOutput;\nvarying vec3 orientVCVSOutput;\n\nuniform int cameraParallel;\n\nvoid main()\n{\n  //VTK::Picking::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = radiusMC;\n  lengthVCVSOutput = length(orientMC);\n  orientVCVSOutput = normalMatrix * normalize(orientMC);\n\n  // make sure it is pointing out of the screen\n  if (orientVCVSOutput.z < 0.0)\n    {\n    orientVCVSOutput = -orientVCVSOutput;\n    }\n\n  // make the basis\n  vec3 xbase;\n  vec3 ybase;\n  vec3 dir = vec3(0.0,0.0,1.0);\n  if (cameraParallel == 0)\n    {\n    dir = normalize(-vertexVCVSOutput.xyz);\n    }\n  if (abs(dot(dir,orientVCVSOutput)) == 1.0)\n    {\n    xbase = normalize(cross(vec3(0.0,1.0,0.0),orientVCVSOutput));\n    ybase = cross(xbase,orientVCVSOutput);\n    }\n  else\n    {\n    xbase = normalize(cross(orientVCVSOutput,dir));\n    ybase = cross(orientVCVSOutput,xbase);\n    }\n\n  vec3 offsets = offsetMC.xyz*2.0-1.0;\n  vertexVCVSOutput.xyz = vertexVCVSOutput.xyz +\n    radiusVCVSOutput*offsets.x*xbase +\n    radiusVCVSOutput*offsets.y*ybase +\n    0.5*lengthVCVSOutput*offsets.z*orientVCVSOutput;\n\n  gl_Position = VCPCMatrix * vertexVCVSOutput;\n}\n",e.Fragment=za,e.Geometry=""},e.replaceShaderValues=function(e,r,a){var s=e.Vertex,i=e.Fragment;s=ma.substitute(s,"//VTK::Camera::Dec",["uniform mat4 VCPCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,i=ma.substitute(i,"//VTK::PositionVC::Dec","varying vec4 vertexVCVSOutput;").result,i=ma.substitute(i,"//VTK::PositionVC::Impl","  vec4 vertexVC = vertexVCVSOutput;\n").result,i=ma.substitute(i,"//VTK::Normal::Dec",["uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 orientVCVSOutput;\n","varying float lengthVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCPCMatrix;\n"]).result;var o="";t.context.getExtension("EXT_frag_depth")&&(o="  gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),t.openGLRenderWindow.getWebgl2()&&(o="gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;\n"),i=ma.substitute(i,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  vec3 base1;\n","  if (abs(orientVCVSOutput.z) < 0.99) {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,0.0,1.0))); }\n","  else {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,1.0,0.0))); }\n","  vec3 base2 = cross(orientVCVSOutput,base1);\n","  EyePos = vec3(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,orientVCVSOutput));\n","  EyeDir = vec3(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,orientVCVSOutput));\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float a = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;\n","  float b = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);\n","  float c = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;\n","  float d = b*b - 4.0*a*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t =  (-b - sqrt(d))/(2.0*a);\n","    float tz = EyePos.z + t*EyeDir.z;\n","    vec3 iPoint = EyePos + t*EyeDir;\n","    if (abs(iPoint.z)*radiusVCVSOutput > lengthVCVSOutput*0.5) {\n","      float t2 = (-b + sqrt(d))/(2.0*a);\n","      float tz2 = EyePos.z + t2*EyeDir.z;\n","      if (tz2*radiusVCVSOutput > lengthVCVSOutput*0.5 || tz*radiusVCVSOutput < -0.5*lengthVCVSOutput) { discard; }\n","      else {\n","        normalVCVSOutput = orientVCVSOutput;\n","        float t3 = (lengthVCVSOutput*0.5/radiusVCVSOutput - EyePos.z)/EyeDir.z;\n","        iPoint = EyePos + t3*EyeDir;\n","        vertexVC.xyz = radiusVCVSOutput*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","        }\n","      }\n","    else {\n","      normalVCVSOutput = iPoint.x*base1 + iPoint.y*base2;\n","      vertexVC.xyz = radiusVCVSOutput*(normalVCVSOutput + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","      }\n","    }\n","  vec4 pos = VCPCMatrix * vertexVC;\n",o]).result,i=ma.substitute(i,"//VTK::Normal::Impl","").result,t.haveSeenDepthRequest&&(i=ma.substitute(i,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=s,e.Fragment=i,n.replaceShaderValues(e,r,a)},e.setMapperShaderParameters=function(e,r,a){e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(e.getProgram().isAttributeUsed("orientMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"orientMC",12,e.getCABO().getStride(),t.context.FLOAT,3,!1)||mi("Error setting 'orientMC' in shader VAO.")),e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO().getColorBO(),"offsetMC",0,e.getCABO().getColorBOStride(),t.context.UNSIGNED_BYTE,3,!0)||mi("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isAttributeUsed("radiusMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"radiusMC",24,e.getCABO().getStride(),t.context.FLOAT,1,!1)||mi("Error setting 'radiusMC' in shader VAO."))),n.setMapperShaderParameters(e,r,a)},e.setCameraShaderParameters=function(e,n,r){var a=e.getProgram(),s=n.getActiveCamera(),i=t.openGLCamera.getKeyMatrices(n);if(a.isUniformUsed("VCPCMatrix")&&a.setUniformMatrix("VCPCMatrix",i.vcpc),r.getIsIdentity())a.isUniformUsed("MCVCMatrix")&&a.setUniformMatrix("MCVCMatrix",i.wcvc),a.isUniformUsed("normalMatrix")&&a.setUniformMatrix3x3("normalMatrix",i.normalMatrix);else{var o=t.openGLActor.getKeyMatrices();if(a.isUniformUsed("MCVCMatrix")){var l=new Float64Array(16);Object(b.l)(l,i.wcvc,o.mcwc),a.setUniformMatrix("MCVCMatrix",l)}if(a.isUniformUsed("normalMatrix")){var B=new Float64Array(9);mt(B,i.normalMatrix,o.normalMatrix),a.setUniformMatrix3x3("normalMatrix",B)}}a.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",s.getParallelProjection())},e.getOpenGLMode=function(e,n){return t.context.TRIANGLES},e.buildBufferObjects=function(e,n){var r=t.currentInput;if(null!==r){t.renderable.mapScalars(r,1);var a=t.renderable.getColorMapColors(),s=t.primitives[t.primTypes.Tris].getCABO(),i=r.getPointData(),o=r.getPoints(),l=o.getNumberOfPoints(),B=o.getData(),Q=null,c=0;s.setColorBOStride(4),s.getColorBO()||s.setColorBO(fa.newInstance()),s.getColorBO().setOpenGLRenderWindow(t.openGLRenderWindow),a&&(c=a.getNumberOfComponents(),s.setColorOffset(4),Q=a.getData(),s.setColorBOStride(8)),s.setColorComponents(c),s.setStride(28);var F=new Float32Array(7*l*12),U=new Uint8Array(12*l*(Q?8:4)),g=null,d=null;null!=t.renderable.getScaleArray()&&i.hasArray(t.renderable.getScaleArray())&&(g=i.getArray(t.renderable.getScaleArray()).getData()),null!=t.renderable.getOrientationArray()&&i.hasArray(t.renderable.getOrientationArray())?d=i.getArray(t.renderable.getOrientationArray()).getData():mi(["Error setting orientationArray.\n","You have to specify the stick orientation"]);for(var u=[0,1,3,0,3,2,2,3,5,2,5,4],I=0,m=0,C=0,b=0,y=0;y<l;++y){var S=t.renderable.getLength(),h=t.renderable.getRadius();g&&(S=g[2*y],h=g[2*y+1]);for(var Z=0;Z<u.length;++Z)I=3*y,F[C++]=B[I++],F[C++]=B[I++],F[C++]=B[I++],I=3*y,F[C++]=d[I++]*S,F[C++]=d[I++]*S,F[C++]=d[I++]*S,F[C++]=h,U[b++]=u[Z]%2*255,U[b++]=u[Z]>=4?255:0,U[b++]=u[Z]>=2?255:0,U[b++]=255,m=y*c,Q&&(U[b++]=Q[m],U[b++]=Q[m+1],U[b++]=Q[m+2],U[b++]=Q[m+3])}s.setElementCount(C/7),s.upload(F,Za.ARRAY_BUFFER),s.getColorBO().upload(U,Za.ARRAY_BUFFER),t.VBOBuildTime.modified()}}}var bi={};function yi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,bi,n),os.extend(e,t,n),Ci(e,t)}var Si={newInstance:Object(a.f)(yi,"vtkOpenGLStickMapper"),extend:yi},hi=1,Zi=2,xi=3,pi=0,Gi=1;function Ri(e,t){t.classHierarchy.push("vtkSurfaceLICInterface")}var Li={enableLIC:!1,nuberOfSteps:40,stepSize:.25,transformVectors:!0,normalizeVectors:!0,maskOnSurface:!1,maskThreshold:0,maskColor:[0,0,0],maskIntensity:0,enhancedLIC:!0,enhanceContrast:0,lowLICContrastEnhancementFactor:0,highLICContrastEnhancementFactor:0,lowColorContrastEnhancementFactor:0,highColorContrastEnhancementFactor:0,antiAlias:0,colorMode:0,LICIntensity:1,mapModeBias:0,noiseTextureSize:200,noiseTextureType:Gi,noiseGrainSize:8,noiseImpulseProbability:.1,noiseImpulseBackgroundValue:0,noiseGeneratorSeed:0,minNoiseValue:0,maxNoiseValue:1,numberOfNoiseLevels:2,shadersNeedBuilding:!0,reallocateTextures:!0,rebuildNoiseTexture:!1,viewPortScale:1};function Vi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Li,n),a.c.obj(e,t),a.c.setGet(e,t,["enableLIC","numberOfSteps","stepSize","normalizeVectors","transformVectors","maskOnSurface","maskThreshold","maskColor","maskIntensity","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor","antiAlias","colorMode","LICIntensity","mapModeBias","noiseTextureSize","noiseTextureType","noiseGrainSize","minNoiseValue","maxNoiseValue","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","noiseGeneratorSeed","viewPortScale","rebuildNoiseTexture"]),Ri(0,t)}var Ai={newInstance:a.c.newInstance(Vi,"vtkSurfaceLICInterface"),extend:Vi},fi=n(56),Ni="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtktextureObjectVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexDC;\nattribute vec2 tcoordDC;\nvarying vec2 tcoordVC;\n\nvoid main()\n{\n  tcoordVC = tcoordDC;\n  gl_Position = vertexDC;\n}\n",Ei=Fr.Representation;function Di(e,t,n,r){var a=Object(oe.a)(t,2),s=a[0],i=a[1],o=e.getContext(),l=An.newInstance({autoParameters:!1,wrapS:r,wrapT:r,minificationFilter:n,magnificationFilter:n,generateMipmap:!1,openGLDataType:o.FLOAT,baseLevel:0,maxLevel:0});return l.setOpenGLRenderWindow(e),l.setInternalFormat(o.RGBA32F),l.create2DFromRaw(s,i,4,"Float32Array",null),l.activate(),l.sendParameters(),l.deactivate(),l}function vi(e,t){return Di(e,t,An.Filter.NEAREST,An.Wrap.CLAMP_TO_EDGE)}function Ji(e,t){t.classHierarchy.push("vtkLICPingPongBufferManager"),t.openGLRenderWindow?(t.quad=function(e){var t=Ya.newInstance();t.setOpenGLRenderWindow(e);for(var n=new Float32Array(12),r=0;r<4;r++)n[3*r]=r%2*2-1,n[3*r+1]=r>1?1:-1,n[3*r+2]=0;var a=new Float32Array([0,0,1,0,0,1,1,1]),i=new Uint16Array(8);i[0]=3,i[1]=0,i[2]=1,i[3]=3,i[4]=3,i[5]=0,i[6]=3,i[7]=2;var o=s.a.newInstance({numberOfComponents:3,values:n});o.setName("points");var l=s.a.newInstance({numberOfComponents:1,values:i}),B=s.a.newInstance({numberOfComponents:2,values:a});return t.getCABO().createVBO(l,"polys",Ei.SURFACE,{points:o,cellOffset:0,tcoords:B}),t}(t.openGLRenderWindow),t.context=t.openGLRenderWindow.getContext(),t.licTexture0=vi(t.openGLRenderWindow,t.size),t.seedTexture0=vi(t.openGLRenderWindow,t.size),t.licTexture1=vi(t.openGLRenderWindow,t.size),t.seedTexture1=vi(t.openGLRenderWindow,t.size),t.eeTexture=t.doEEPass?Di(t.openGLRenderWindow,t.size,An.Filter.NEAREST,An.Wrap.CLAMP_TO_EDGE):null,t.imageVectorTexture=t.doVTPass?function(e,t){return Di(e,t,An.Filter.LINEAR,An.Wrap.CLAMP_TO_EDGE)}(t.openGLRenderWindow,t.size):null,t.pingTextures[0]=t.licTexture0,t.pingTextures[1]=t.seedTexture0,t.pongTextures[0]=t.licTexture1,t.pongTextures[1]=t.seedTexture1,t.textures[0]=t.pingTextures,t.textures[1]=t.pongTextures,e.swap=function(){t.readIndex=1-t.readIndex},e.renderQuad=function(e,n){var r=t.quad,a=t.context,s=t.quadVAO;s||((s=Ta.newInstance()).setOpenGLRenderWindow(t.openGLRenderWindow),t.quadVAO=s),t.previousProgramHash!==n.getMd5Hash()&&(s.shaderProgramChanged(),r.getCABO().bind(),s.addAttributeArray(n,r.getCABO(),"vertexDC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE),s.addAttributeArray(n,r.getCABO(),"tcoordDC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),t.context.FLOAT,2,t.context.FALSE),t.previousProgramHash=n.getMd5Hash()),a.drawArrays(a.TRIANGLES,0,r.getCABO().getElementCount()),s.release()},e.getLastLICBuffer=function(){return 0===t.readIndex?t.licTexture0:t.licTexture1},e.getLastSeedBuffer=function(){return 0===t.readIndex?t.seedTexture0:t.seedTexture1},e.getLICBuffer=function(){return 1-t.readIndex==0?t.licTexture0:t.licTexture1},e.getSeedBuffer=function(){return 1-t.readIndex==0?t.seedTexture0:t.seedTexture1},e.getLICTextureUnit=function(){var e=t.textures[t.readIndex][0];return e.activate(),e.getTextureUnit()},e.getSeedTextureUnit=function(){var e=t.textures[t.readIndex][1];return e.activate(),e.getTextureUnit()},e.getNoiseTextureUnit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e?(t.noiseTexture.activate(),t.noiseTexture.getTextureUnit()):(t.eeTexture.activate(),t.eeTexture.getTextureUnit())},e.getVectorTextureUnit=function(){return t.vectorTexture.activate(),t.vectorTexture.getTextureUnit()},e.getImageVectorTextureUnit=function(){return t.imageVectorTexture?(t.imageVectorTexture.activate(),t.imageVectorTexture.getTextureUnit()):e.getVectorTextureUnit()},e.getMaskVectorTextureUnit=function(){return t.maskVectorTexture?(t.maskVectorTexture.activate(),t.maskVectorTexture.getTextureUnit()):e.getImageVectorTextureUnit()},e.clearBuffers=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.framebuffer,r=t.context;n.removeColorBuffer(0),n.removeColorBuffer(1),n.removeColorBuffer(2),n.removeColorBuffer(3),n.setColorBuffer(t.licTexture0,0),n.setColorBuffer(t.seedTexture0,1),n.setColorBuffer(t.licTexture1,2),n.setColorBuffer(t.seedTexture1,3);var a=[r.COLOR_ATTACHMENT0,r.COLOR_ATTACHMENT1,r.COLOR_ATTACHMENT2,r.COLOR_ATTACHMENT3];e&&(n.removeColorBuffer(4),n.setColorBuffer(t.eeTexture,4),a.push(r.COLOR_ATTACHMENT4)),r.drawBuffers(a),r.clearColor(0,1,0,0),r.disable(r.SCISSOR_TEST),r.disable(r.BLEND),r.clear(r.COLOR_BUFFER_BIT),n.removeColorBuffer(0),n.removeColorBuffer(1),n.removeColorBuffer(2),n.removeColorBuffer(3),e&&n.removeColorBuffer(4),r.drawBuffers([r.NONE])},e.clearBuffer=function(e){var n=t.framebuffer,r=t.context;n.removeColorBuffer(0),n.setColorBuffer(e,0),r.drawBuffers([r.COLOR_ATTACHMENT0]),r.clearColor(0,1,0,0),r.disable(r.SCISSOR_TEST),r.disable(r.BLEND),r.clear(r.COLOR_BUFFER_BIT),n.removeColorBuffer(e,0),r.drawBuffers([r.NONE])},e.activateVectorTextures=function(){t.imageVectorTexture?t.imageVectorTexture.activate():t.vectorTexture.activate(),t.maskVectorTexture&&t.maskVectorTexture.activate()},e.deactivateVectorTextures=function(){t.imageVectorTexture?t.imageVectorTexture.deactivate():t.vectorTexture.deactivate(),t.maskVectorTexture&&t.maskVectorTexture.deactivate()},e.activateNoiseTexture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case 0:t.noiseTexture.activate();break;case 1:t.eeTexture.activate();break;default:console.error("Wrong LIC pass number")}},e.deactivateNoiseTexture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case 0:t.noiseTexture.deactivate();break;case 1:t.eeTexture.deactivate();break;default:console.error("Wrong LIC pass number")}},e.attachLICBuffers=function(){var e=t.textures[t.readIndex],n=t.textures[1-t.readIndex],r=t.framebuffer,a=t.context;e[0].activate(),e[1].activate(),r.removeColorBuffer(0),r.removeColorBuffer(1),r.setColorBuffer(n[0],0),r.setColorBuffer(n[1],1),a.drawBuffers([a.COLOR_ATTACHMENT0,a.COLOR_ATTACHMENT1])},e.detachLICBuffers=function(){var e=t.textures[t.readIndex],n=t.context,r=t.framebuffer;e[0].deactivate(),e[1].deactivate(),r.removeColorBuffer(0),r.removeColorBuffer(1),n.drawBuffers([n.NONE])},e.attachImageVectorBuffer=function(){var e=t.framebuffer,n=t.context;t.vectorTexture.activate(),e.removeColorBuffer(0),e.setColorBuffer(t.imageVectorTexture,0),n.drawBuffers([n.COLOR_ATTACHMENT0])},e.detachImageVectorBuffer=function(){var e=t.context,n=t.framebuffer;t.vectorTexture.deactivate(),n.removeColorBuffer(0),e.drawBuffers([e.NONE])},e.attachEEBuffer=function(){t.textures[t.readIndex][0].activate(),t.framebuffer.removeColorBuffer(0),t.framebuffer.setColorBuffer(t.eeTexture,0);var e=t.context;e.drawBuffers([e.COLOR_ATTACHMENT0])},e.detachEEBuffer=function(){var e=t.context;t.framebuffer.removeColorBuffer(0),e.drawBuffers([e.NONE]),t.textures[t.readIndex][0].deactivate()},e.detachBuffers=function(){var e=t.context,n=t.framebuffer;n.removeColorBuffer(0),n.removeColorBuffer(1),e.drawBuffers([e.NONE]);var r=t.textures[t.readIndex],a=t.textures[1-t.readIndex];r[0]&&r[0].deactivate(),r[1]&&r[1].deactivate(),a[0]&&a[0].deactivate(),a[1]&&a[1].deactivate(),t.eeTexture&&t.eeTexture.deactivate(),t.noiseTexture&&t.noiseTexture.deactivate()},e.getWriteIndex=function(){return 1-t.readIndex},e.detachBuffers()):console.error("Pass renderwindow to ping pong manager")}var Wi={openGLRenderWindow:null,vectorTexture:null,maskVectorTexture:null,noiseTexture:null,doEEPass:!1,doVTPass:!1,readIndex:0,quad:null,lastProgramHash:null,framebuffer:null,size:null,pingTextures:[],pongTextures:[],textures:[]};function Xi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wi,n),a.c.obj(e,t),a.c.get(e,t,["readIndex"]),a.c.setGet(e,t,["doEEPass","doVTPass","openGLRenderWindow","vectorTexture","maskVectorTexture","noiseTexture","framebuffer","size"]),Ji(e,t)}var Hi={newInstance:a.c.newInstance(Xi,"vtkLICPingPongBufferManager"),extend:Xi};function Ti(e,t){function n(e,t){e.setUniformi("texLIC",t.getLICTextureUnit()),e.setUniformi("texSeedPts",t.getSeedTextureUnit())}function a(e,t,n){e.attachLICBuffers(),e.renderQuad(t,n),e.detachLICBuffers(),e.swap()}t.classHierarchy.push("vtkLineIntegralConvolution2D"),e.buildAShader=function(e){return t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(Ni,e,"")},e.dumpTextureValues=function(e,n){var r=Object(oe.a)(n,2),a=r[0],s=r[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.context,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.openGLRenderWindow,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,B=Dn.newInstance(),Q=i,c=null;return B.setOpenGLRenderWindow(o),B.saveCurrentBindingsAndBuffers(),B.create(a,s),B.populateFramebuffer(),B.setColorBuffer(e),c=new Float32Array(a*s*l),Q.readPixels(0,0,a,s,4===l?Q.RGBA:Q.RGB,Q.FLOAT,c),B.restorePreviousBindingsAndBuffers(),c},e.getTextureMinMax=function(n,r){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.context,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.openGLRenderWindow,i=e.dumpTextureValues(n,r,a,s,4),o=Number.MAX_VALUE,l=Number.MIN_VALUE,B=0;B<i.length;B+=4)if(0===i[B+1]){var Q=i[B];Q<o&&(o=Q),Q>l&&(l=Q)}return{min:o,max:l}},e.getComponentSelectionProgram=function(e){var t="xyzw";return".".concat(t[e[0]]).concat(t[e[1]])},e.buildShaders=function(){t.LIC0ShaderProgram=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_LIC0.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n/**\nThis shader initializes the convolution for the LIC computation.\n*/\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\nuniform sampler2D texMaskVectors;\nuniform sampler2D texNoise;\nuniform sampler2D texLIC;\n\nuniform int   uStepNo;         // in step 0 initialize lic and seeds, else just seeds\nuniform int   uPassNo;         // in pass 1 hpf of pass 0 is convolved.\nuniform float uMaskThreshold;  // if |V| < uMaskThreshold render transparent\nuniform vec2  uNoiseBoundsPt1; // tc of upper right pt of noise texture\n\nin vec2 tcoordVC;\n\n// convert from vector coordinate space to noise coordinate space.\n// the noise texture is tiled across the *whole* domain\nvec2 VectorTCToNoiseTC(vec2 vectc)\n{\n  return vectc/uNoiseBoundsPt1;\n}\n\n// get the texture coordidnate to lookup noise value. this\n// depends on the pass number.\nvec2 getNoiseTC(vec2 vectc)\n{\n  // in pass 1 : convert from vector tc to noise tc\n  // in pass 2 : use vector tc\n  if (uPassNo == 0)\n    {\n    return VectorTCToNoiseTC(vectc);\n    }\n  else\n    {\n    return vectc;\n    }\n}\n\n// look up noise value at the given location. The location\n// is supplied in vector texture coordinates, hence the\n// need to convert to noise texture coordinates.\nfloat getNoise(vec2 vectc)\n{\n  return texture2D(texNoise, getNoiseTC(vectc)).r;\n}\n\nvoid main(void)\n{\n  vec2 vectc = tcoordVC.st;\n\n  // lic => (convolution, mask, 0, step count)\n  if (uStepNo == 0)\n    {\n    float maskCriteria = length(texture2D(texMaskVectors, vectc).xyz);\n    float maskFlag;\n    if (maskCriteria <= uMaskThreshold)\n      {\n      maskFlag = 1.0;\n      }\n    else\n      {\n      maskFlag = 0.0;\n      }\n    float noise = getNoise(vectc);\n    LICOutput = vec4(noise, maskFlag, 0.0, 1.0);\n    }\n  else\n    {\n    LICOutput = texture2D(texLIC, vectc);\n    }\n\n  // initial seed\n  SeedOutput = vec4(vectc, 0.0, 1.0);\n}\n");var n=ma.substitute("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_VT.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// move vector field to normalized image space\n// pre-processing for vtkLineIntegralConvolution2D\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Fragment shader used by the gaussian blur filter render pass.\n\nuniform sampler2D texVectors; // input texture\nuniform vec2      uTexSize;   // size of texture\n\nin vec2 tcoordVC;\n\nvoid main(void)\n{\n  //VTK::LICComponentSelection::Impl\n  V = V/uTexSize;\n  gl_FragData[0] = vec4(V, 0.0, 1.0);\n}\n","//VTK::LICComponentSelection::Impl","vec2 V = texture2D(texVectors, tcoordVC.st)".concat(e.getComponentSelectionProgram(t.componentIds),";")).result;t.VTProgram=e.buildAShader(n);var r=ma.substitute("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_fs1.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\nuniform sampler2D  texVectors;\nuniform sampler2D  texNoise;\nuniform sampler2D  texLIC;\nuniform sampler2D  texSeedPts;\n\nuniform int   uPassNo;          // in pass 1 hpf of pass 0 is convolved.\nuniform float uStepSize;        // step size in parametric space\n\nuniform vec2  uNoiseBoundsPt1;  // tc of upper right pt of noise texture\n\nin vec2 tcoordVC;\n\n//VTK::LICVectorLookup::Impl\n\n// We need to do this manually since CLAMP_TO_BORDER and and borderColor\n// are very poorly supported in webgl\nvec2 clampToBorder(vec2 uv){\n  if(uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0)\n  {\n    return vec2(0.0, 0.0);\n  }\n  return getVector(uv);\n}\n\n// convert from vector coordinate space to noise coordinate space.\n// the noise texture is tiled across the whole domain\nvec2 VectorTCToNoiseTC(vec2 vectc)\n{\n  return vectc/uNoiseBoundsPt1;\n}\n\n// get the texture coordidnate to lookup noise value.\n// in pass 1 repeatedly tile the noise texture across\n// the computational domain.\nvec2 getNoiseTC(vec2 tc)\n{\n  if (uPassNo == 0)\n    {\n    return VectorTCToNoiseTC(tc);\n    }\n  else\n    {\n    return tc;\n    }\n}\n\n// look up noise value at the given location. The location\n// is supplied in vector texture coordinates, hence the need\n// to convert to either noise or lic texture coordinates in\n// pass 1 and 2 respectively.\nfloat getNoise(vec2 vectc)\n{\n  return texture2D(texNoise, getNoiseTC(vectc)).r;\n}\n\n// fourth-order Runge-Kutta streamline integration\n// no bounds checks are made, therefore it's essential\n// to have the entire texture initialized to 0\n// and set clamp to border and have border color 0\n// an integer is set if the step was taken, keeping\n// an accurate step count is necessary to prevent\n// boundary artifacts. Don't count the step if\n// all vector lookups are identically 0. This is\n// a proxy for \"stepped outside valid domain\"\nvec2 rk4(vec2 pt0, float dt, out bool count)\n{\n  count=true;\n  float dtHalf = dt * 0.5;\n  vec2 pt1;\n\n  vec2 v0 = clampToBorder(pt0);\n  pt1 = pt0 + v0 * dtHalf;\n\n  vec2 v1 = clampToBorder(pt1);\n  pt1 = pt0 + v1 * dtHalf;\n\n  vec2 v2 = clampToBorder(pt1);\n  pt1 = pt0 + v2 * dt;\n\n  vec2 v3 = clampToBorder(pt1);\n  vec2 vSum = v0 + v1 + v1 + v2 + v2 + v3;\n\n  if (vSum == vec2(0.0, 0.0))\n    {\n      count = false;\n    }\n\n  pt1 = pt0 + (vSum) * (dt * (1.0/6.0));\n\n return pt1;\n}\n\nvoid main(void)\n{\n  vec2 lictc = tcoordVC.st;\n  vec4 lic = texture2D(texLIC, lictc);\n  vec2 pt0 = texture2D(texSeedPts, lictc).st;\n\n  bool count;\n  vec2 pt1 = rk4(pt0, uStepSize, count);\n\n  if (count)\n    {\n    // accumulate lic step\n    // (lic, mask, 0, step count)\n    float noise = getNoise(pt1);\n    LICOutput = vec4(lic.r + noise, lic.g, 0.0, lic.a + 1.0);\n    SeedOutput = vec4(pt1, 0.0, 1.0);\n    }\n  else\n    {\n    // keep existing values\n    LICOutput = lic;\n    SeedOutput = vec4(pt0, 0.0, 1.0);\n    }\n}\n","//VTK::LICVectorLookup::Impl",function(){var e="\n    vec2 getVector( vec2 vectc )\n\n      {\n\n      vec2 V = texture2D( texVectors, vectc ).xy;\n\n      // normalize if |V| not 0\n\n      float lenV = length( V );\n\n      if ( lenV > 1.0e-8 )\n\n        {\n\n        return V/lenV;\n\n        }\n\n      else\n\n        {\n\n        return vec2( 0.0, 0.0 );\n\n        }\n\n      }\n\n    ",t="\n    vec2 getVector( vec2 vectc )\n\n      {\n\n      return texture2D( texVectors, vectc ).xy;\n\n      }\n\n    ";return arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?t:e}(t.normalizeVectors),!0).result;t.LICIShaderProgram=e.buildAShader(r),t.LICNShaderProgram=e.buildAShader(" //VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_LICN.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\n/**\nThis shader finalizes the convolution for the LIC computation\napplying the normalization. eg. if box kernel is used the this\nis the number of steps taken.\n*/\n\nuniform sampler2D texLIC;\n\nin vec2 tcoordVC;\n\nvoid main(void)\n{\n  vec4 conv = texture2D(texLIC, tcoordVC.st);\n  conv.r = conv.r/conv.a;\n  // lic => (convolution, mask, 0, 1)\n  LICOutput = vec4(conv.rg , 0.0, 1.0);\n  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);\n}\n"),t.CEProgram=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_CE.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// gray scale contrast enhance stage implemented via histogram stretching\n// if the min and max are tweaked it can generate out-of-range values\n// these will be clamped in 0 to 1\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\n\nuniform sampler2D texLIC;  // most recent lic pass\nuniform float uMin;        // min gray scale color value\nuniform float uMaxMinDiff; // max-min\n\nin vec2 tcoordVC;\n\nvoid main( void )\n{\n  vec4 lic = texture2D(texLIC, tcoordVC.st);\n  if (lic.g!=0.0)\n    {\n    LICOutput = lic;\n    }\n  else\n    {\n    float CElic = clamp((lic.r - uMin)/uMaxMinDiff, 0.0, 1.0);\n    LICOutput = vec4(CElic, lic.gb, 1.0);\n    }\n    SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);\n}\n"),t.EEProgram=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_fs2.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// high-pass filter stage employed by vtkLineIntegralConvolution2D\n// between LIC pass 1 and LIC pass 2. filtered LIC pass 1, becomes\n// noise for pass2.\n\n// the output of this shader\nlayout(location = 0) out vec4 EEOutput;\n\nuniform sampler2D texLIC; // most recent lic pass\nuniform float     uDx;    // fragment size\nuniform float     uDy;    // fragment size\n\nin vec2 tcoordVC;\n\n// kernel for simple laplace edge enhancement.\n// p=Laplace(p)+p\nfloat K[9] = float[9](\n  -1.0, -1.0, -1.0,\n  -1.0,  9.0, -1.0,\n  -1.0, -1.0, -1.0\n  );\n\n// determine if the fragment was masked\nbool Masked(float val) { return val != 0.0; }\n\nvoid main(void)\n{\n  // tex coord neighbor offsets\n  vec2 fragDx[9] = vec2[9](\n    vec2(-uDx, uDy), vec2(0.0, uDy), vec2(uDx, uDy),\n    vec2(-uDx, 0.0), vec2(0.0, 0.0), vec2(uDx, 0.0),\n    vec2(-uDx,-uDy), vec2(0.0,-uDy), vec2(uDx,-uDy)\n    );\n\n  vec2 lictc = tcoordVC.st;\n\n  // compute the convolution but don't use convovled values if\n  // any masked fragments on the stencil. Fragments outside\n  // the valid domain are masked during initialization, and\n  // texture wrap parameters are clamp to border with border\n  // color that contains masked flag\n  float conv = 0.0;\n  bool dontUse = false;\n  for (int i=0; i<9; ++i)\n    {\n    vec2 tc = lictc + fragDx[i];\n    vec4 lic = texture2D(texLIC, tc);\n    dontUse = dontUse || Masked(lic.g);\n    conv = conv + K[i] * lic.r;\n    }\n\n  if (dontUse)\n    {\n    EEOutput = vec4(texture2D(texLIC, lictc).rg, 0.0, 1.0);\n    }\n  else\n    {\n    conv = clamp(conv, 0.0, 1.0);\n    EEOutput = vec4(conv,texture2D(texLIC, lictc).g, 0.0, 1.0);\n    }\n\n}\n"),t.AAHProgram=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_AAH.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// Anti-alias stage in vtkLineIntegralConvolution2D\n// horizontal pass of a Gaussian convolution\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\nuniform sampler2D texLIC; // input texture\nuniform float     uDx;    // fragment size\n\nin vec2 tcoordVC;\n\n// factored 3x3 Gaussian kernel\n// K^T*K = G\nfloat K[3] = float[3](0.141421356, 0.707106781, 0.141421356);\n\n// determine if the fragment was masked\nbool Masked(float val){ return val != 0.0; }\n\nvoid main(void)\n{\n// neighbor offsets\nvec2 fragDx[3] = vec2[3](vec2(-uDx,0.0), vec2(0.0,0.0), vec2(uDx,0.0));\n\n  vec2 lictc = tcoordVC.st;\n  vec4 lic[3];\n  bool dontUse = false;\n  float conv = 0.0;\n  for (int i=0; i<3; ++i)\n    {\n    vec2 tc = lictc + fragDx[i];\n    lic[i] = texture2D(texLIC, tc);\n    dontUse = dontUse || Masked(lic[i].g);\n    conv = conv + K[i] * lic[i].r;\n    }\n  // output is (conv, mask, skip, 1)\n  if (dontUse)\n    {\n    LICOutput = vec4(lic[1].rg, 1.0, 1.0);\n    }\n  else\n    {\n    LICOutput = vec4(conv, lic[1].gb, 1.0);\n    }\n  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);\n}\n"),t.AAVProgram=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkLineIntegralConvolution2D_AAV.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// Anti-alias stage in vtkLineIntegralConvolution2D\n// vertical pass of a Gaussian convolution\n\n// the output of this shader\nlayout(location = 0) out vec4 LICOutput;\nlayout(location = 1) out vec4 SeedOutput;\n\nuniform sampler2D texLIC; // input texture\nuniform float     uDy;    // fragment size\n\nin vec2 tcoordVC;\n\n\n// factored 3x3 Gaussian kernel\n// K^T*K = G\nfloat K[3] = float[3](0.141421356, 0.707106781, 0.141421356);\n\n// determine if the fragment was masked\nbool Masked(float val){ return val != 0.0; }\n\nvoid main(void)\n{\n// neighbor offsets\nvec2 fragDy[3] = vec2[3](vec2(0.0,-uDy), vec2(0.0,0.0), vec2(0.0,uDy));\n\n\n  vec2 lictc = tcoordVC.st;\n  vec4 lic[3];\n  bool dontUse = false;\n  float conv = 0.0;\n  for (int i=0; i<3; ++i)\n    {\n    vec2 tc = lictc + fragDy[i];\n    lic[i] = texture2D(texLIC, tc);\n    dontUse = dontUse || Masked(lic[i].g);\n    conv = conv + K[i] * lic[i].r;\n    }\n  // output is (conv, mask, skip, 1)\n  if (dontUse)\n    {\n    LICOutput = vec4(lic[1].rg, 1.0, 1.0);\n    }\n  else\n    {\n    LICOutput = vec4(conv, lic[1].gb, 1.0);\n    }\n  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);\n}\n")},e.executeLIC=function(s,i,o,l,B,Q){if(t.openGLRenderWindow=B,t.context=B.getContext(),Object.assign(t,Q),s[0]<=0||s[1]<=0)return null;var c=[1/s[0],1/s[1]],F=t.stepSize*Math.sqrt(c[0]*c[0]+c[1]*c[1]);F<=0&&(F=1e-10);var U,g=t.context,d=t.framebuffer;d&&s[0]===d.getSize()[0]&&s[1]===d.getSize()[1]||((d=Dn.newInstance()).setOpenGLRenderWindow(t.openGLRenderWindow),d.saveCurrentBindingsAndBuffers(),(U=d).create.apply(U,Object(r.a)(s)),d.populateFramebuffer(),d.restorePreviousBindingsAndBuffers(),t.framebuffer=d),d.saveCurrentBindingsAndBuffers(),d.bind(),g.viewport.apply(g,[0,0].concat(Object(r.a)(s))),g.scissor.apply(g,[0,0].concat(Object(r.a)(s))),t.shadersNeedBuild&&(e.buildShaders(),t.shadersNeedBuild=!1),t.bufs?(t.bufs.setVectorTexture(i),t.bufs.setMaskVectorTexture(o),t.bufs.setNoiseTexture(l)):t.bufs=Hi.newInstance({openGLRenderWindow:B,doEEPass:t.enhancedLIC,doVTPass:t.transformVectors,vectorTexture:i,maskVectorTexture:o,noiseTexture:l,framebuffer:d,size:s});var u=[(l.getWidth()+1)/s[0],(l.getHeight()+1)/s[1]],I=1/s[0],m=1/s[1],C=t.openGLRenderWindow.getShaderCache();if(t.transformVectors){var b=t.VTProgram;C.readyShaderProgram(b),t.bufs.attachImageVectorBuffer(),b.setUniform2f.apply(b,["uTexSize"].concat(Object(r.a)(s))),b.setUniformi("texVectors",t.bufs.getVectorTextureUnit()),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),t.bufs.renderQuad(s,b),t.bufs.detachImageVectorBuffer()}t.bufs.clearBuffers(t.enhancedLIC),t.bufs.activateVectorTextures(),t.bufs.activateNoiseTexture(0);var y=t.LIC0ShaderProgram;C.readyShaderProgram(y),y.setUniformi("uStepNo",0),y.setUniformi("uPassNo",0),y.setUniformf("uMaskThreshold",t.maskThreshold),y.setUniform2f.apply(y,["uNoiseBoundsPt1"].concat(u)),y.setUniformi("texMaskVectors",t.bufs.getMaskVectorTextureUnit()),y.setUniformi("texLIC",t.bufs.getLICTextureUnit()),y.setUniformi("texNoise",t.bufs.getNoiseTextureUnit(0)),a(t.bufs,s,y);var S=t.LICIShaderProgram;C.readyShaderProgram(S),S.setUniformi("uPassNo",0),S.setUniformf("uStepSize",-F),S.setUniform2f.apply(S,["uNoiseBoundsPt1"].concat(u)),S.setUniformi("texVectors",t.bufs.getImageVectorTextureUnit()),S.setUniformi("texNoise",t.bufs.getNoiseTextureUnit(0));for(var h=0;h<t.numberOfSteps;++h)n(S,t.bufs),a(t.bufs,s,S);C.readyShaderProgram(y),y.setUniformi("uStepNo",1),n(y,t.bufs),a(t.bufs,s,y),C.readyShaderProgram(S),S.setUniformf("uStepSize",F);for(var Z=0;Z<t.numberOfSteps;++Z)n(S,t.bufs),a(t.bufs,s,S);t.bufs.deactivateNoiseTexture(0),t.bufs.deactivateVectorTextures();var x=t.LICNShaderProgram;if(C.readyShaderProgram(x),x.setUniformi("texLIC",t.bufs.getLICTextureUnit()),a(t.bufs,s,x),t.enhancedLIC){t.enhanceContrast!==hi&&t.enhanceContrast!==xi||e.contrastEnhance(!1,s),t.bufs.attachEEBuffer();var p=t.EEProgram;C.readyShaderProgram(p),p.setUniformi("texLIC",t.bufs.getLICTextureUnit()),p.setUniformf("uDx",I),p.setUniformf("uDy",m),t.bufs.renderQuad(s,p),t.bufs.detachEEBuffer(),t.bufs.detachBuffers(),t.bufs.clearBuffers(!1),t.bufs.activateVectorTextures(),t.bufs.activateNoiseTexture(1),C.readyShaderProgram(y),y.setUniformi("uStepNo",0),y.setUniformi("uPassNo",1),n(y,t.bufs),y.setUniformi("texNoise",t.bufs.getNoiseTextureUnit(1)),a(t.bufs,s,y),C.readyShaderProgram(S),S.setUniformi("uPassNo",1),S.setUniformf("uStepSize",-F),S.setUniformi("texNoise",t.bufs.getNoiseTextureUnit(1));for(var G=t.numberOfSteps/2,R=0;R<G;++R)n(S,t.bufs),a(t.bufs,s,S);C.readyShaderProgram(y),y.setUniformi("uStepNo",1),n(y,t.bufs),a(t.bufs,s,y),C.readyShaderProgram(S),S.setUniformf("uStepSize",F);for(var L=0;L<G;++L)n(S,t.bufs),a(t.bufs,s,S);t.bufs.deactivateNoiseTexture(1),t.bufs.deactivateVectorTextures(),C.readyShaderProgram(x),x.setUniformi("texLIC",t.bufs.getLICTextureUnit()),x.setUniformi("texSeedPts",t.bufs.getSeedTextureUnit()),a(t.bufs,s,x)}if(t.antiAlias){var V=t.AAHProgram;C.readyShaderProgram(V),V.setUniformi("texLIC",t.bufs.getLICTextureUnit()),V.setUniformf("uDx",I);var A=t.AAVProgram;C.readyShaderProgram(A),A.setUniformi("texLIC",t.bufs.getLICTextureUnit()),A.setUniformf("uDy",m);for(var f=0;f<t.antiAlias;++f)C.readyShaderProgram(V),n(V,t.bufs),a(t.bufs,s,V),C.readyShaderProgram(A),n(A,t.bufs),a(t.bufs,s,A)}return t.enhanceContrast!==hi&&t.enhanceContrast!==xi||e.contrastEnhance(!0,s),t.bufs.detachBuffers(),d.restorePreviousBindingsAndBuffers(),t.bufs.getLastLICBuffer()},e.contrastEnhance=function(n,r){var s=t.openGLRenderWindow.getShaderCache(),i=e.getTextureMinMax(t.bufs.getLastLICBuffer(),r,t.context,t.openGLRenderWindow),o=i.min,l=i.max;(l<=o||l>1||o<0)&&(console.error("Invalid color range: ",o,l),o=0,l=1);var B=l-o;n&&(o+=B*t.lowLICContrastEnhancementFactor,B=(l-=B*t.highLICContrastEnhancementFactor)-o);var Q=t.CEProgram;s.readyShaderProgram(Q),Q.setUniformi("texLIC",t.bufs.getLICTextureUnit()),Q.setUniformf("uMin",o),Q.setUniformf("uMaxMinDiff",B),a(t.bufs,r,Q)}}var ki={shadersNeedBuild:!0,stepSize:1,numberOfSteps:10,enhancedLIC:!0,enhanceContrast:!1,lowContrastEnhancementFactor:0,highContrastEnhancementFactor:0,antiAlias:0,componentIds:[0,1],normalizeVectors:!0,maskThreshold:0,transformVectors:!0,bufs:null,isComposite:!0};function Mi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ki,n),a.c.obj(e,t),a.c.setGet(e,t,["context","openGLRenderWindow","nuberOfSteps","stepSize","normalizeVectors","maskThreshold","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","componentIds","isComposite"]),Ti(e,t)}var wi={newInstance:a.c.newInstance(Mi,"vtkLineIntegralConvolution2D"),extend:Mi},Yi=Fr.Representation;function Oi(e,t){t.classHierarchy.push("vtkOpenGLSurfaceLICInterface"),e.renderQuad=function(e,n){var r=t.licQuad,a=t.context,s=t.licQuadVAO;s||((s=Ta.newInstance()).setOpenGLRenderWindow(t.openGLRenderWindow),t.licQuadVAO=s),t.previousProgramHash!==n.getMd5Hash()&&(s.shaderProgramChanged(),r.getCABO().bind(),s.addAttributeArray(n,r.getCABO(),"vertexDC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE),s.addAttributeArray(n,r.getCABO(),"tcoordDC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),t.context.FLOAT,2,t.context.FALSE),t.previousProgramHash=n.getMd5Hash()),a.drawArrays(a.TRIANGLES,0,r.getCABO().getElementCount()),s.release()},e.generateNoiseTexture=function(e){if(!t.noiseTexture||t.licInterface.getRebuildNoiseTexture()){t.licInterface.setRebuildNoiseTexture(!1),t.noiseTexture&&t.noiseTexture.releaseGraphicsResources(),Object(fi.a)(t.noiseGeneratorSeed,{global:!0});var n=[],r=t.licInterface.get("noiseTextureType","noiseGrainSize","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","minNoiseValue","maxNoiseValue"),a=r.noiseTextureType,s=r.noiseGrainSize,i=r.numberOfNoiseLevels,o=r.noiseImpulseProbability,l=r.noiseImpulseBackgroundValue,B=r.minNoiseValue,Q=r.maxNoiseValue;switch(a){case Gi:n=function(e,t,n,r,a,s){var i=Math.max(0,Math.min(1,n)),o=Float32Array.from({length:e*e},(function(){var e=0;if(1===i||Math.random()>1-i)for(var t=0;t<2048;++t)e+=Math.random();return e})),l=0,B=2049;o.forEach((function(e){B=1===i?e<B?e:B:e<B&&e>0?e:B,l=e>l?e:l}));var Q=l-B;0===Q&&(B=0,Q=0===l?1:l);var c=t-1,F=0!==c?1/c:0,U=s-a;return o.map((function(e){var n=e<B?e:(e-B)/Q,i=Math.floor(n*t);return e>=B?1===t?s:a+(i>c?c:i)*F*U:r}))}(Math.floor(e/s),i,o,l,B,Q);break;case pi:default:n=function(e,t,n,r){var a=Object(oe.a)(e,2),s=a[0],i=a[1],o=r-n;return Float32Array.from({length:s*i},(function(){var e=Math.random();return(e=(e=Math.floor(e*t)/t)*o+n)>1?1:e<0?0:e}))}([Math.ceil(e/s),Math.ceil(e/s)],i,B,Q)}var c=1/s,F=Float32Array.from({length:e*e*4},(function(t,r){var a=r/4;if(r%4==0){var i=Math.floor(a%e*c),o=Math.floor(a/e*c);return n[o*(e/s)+i]}return r%4==1||r%4==3?1:0})),U=An.newInstance({wrapS:An.Wrap.REPEAT,wrapT:An.Wrap.REPEAT,minificationFilter:An.Filter.NEAREST,magnificationFilter:An.Filter.NEAREST,generateMipMap:!1,openGLDataType:t.context.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});U.setOpenGLRenderWindow(t.openGLRenderWindow),U.create2DFromRaw(e,e,4,"Float32Array",F),U.activate(),U.sendParameters(),U.deactivate(),t.noiseTexture=U}},e.buildAShader=function(e){return t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(Ni,e,"")},e.allocateTextures=function(){var n=An.Filter.NEAREST,r=An.Filter.LINEAR,a=t.openGLRenderWindow;t.geometryImage||(t.geometryImage=e.allocateTexture(a,n)),t.vectorImage||(t.vectorImage=e.allocateTexture(a,r)),t.maskVectorImage||(t.maskVectorImage=e.allocateTexture(a,r)),t.LICImage||(t.LICImage=e.allocateTexture(a,n)),t.RGBColorImage||(t.RGBColorImage=e.allocateTexture(a,n)),t.HSLColorImage||(t.HSLColorImage=e.allocateTexture(a,n)),t.depthTexture||(t.depthTexture=e.allocateDepthTexture(a))},e.allocateTexture=function(e,n){var a=t.context,s=An.newInstance({wrapS:An.Wrap.CLAMP_TO_EDGE,wrapT:An.Wrap.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:n,generateMipmap:!1,openGLDataType:a.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});return s.setOpenGLRenderWindow(e),s.setInternalFormat(a.RGBA32F),s.create2DFromRaw.apply(s,Object(r.a)(t.size).concat([4,"Float32Array",null])),s.activate(),s.sendParameters(),s.deactivate(),s},e.allocateDepthTexture=function(e){var n=t.context,a=An.newInstance({generateMipmap:!1,openGLDataType:n.FLOAT,autoParameters:!1});return a.setOpenGLRenderWindow(e),a.createDepthFromRaw.apply(a,Object(r.a)(t.size).concat(["Float32Array",null])),a.activate(),a.sendParameters(),a.deactivate(),a},e.createFBO=function(){if(!t.framebuffer){t.licHelper=null;var e=Dn.newInstance();e.setOpenGLRenderWindow(t.openGLRenderWindow),e.saveCurrentBindingsAndBuffers(),e.create.apply(e,Object(r.a)(t.size)),e.populateFramebuffer(),t.framebuffer=e,e.restorePreviousBindingsAndBuffers()}},e.completedGeometry=function(){var e=t.context,n=t.framebuffer;n.removeColorBuffer(0),n.removeColorBuffer(1),n.removeColorBuffer(2),n.removeDepthBuffer(),e.drawBuffers([e.NONE]),n.restorePreviousBindingsAndBuffers()},e.buildAllShaders=function(){t.shadersNeedBuilding&&(t.licColorPass=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkSurfaceLICMapper_fs2.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// This shader combines surface geometry, LIC, and  scalar colors.\n\n// the output of this shader\nlayout(location = 0) out vec4 RGBOutput;\nlayout(location = 1) out vec4 HSLOutput;\n\nuniform sampler2D texVectors;       // vectors, depth\nuniform sampler2D texGeomColors;    // scalar colors + lighting\nuniform sampler2D texLIC;           // image lic\nuniform int       uScalarColorMode; // select between blend, and map shader\nuniform float     uLICIntensity;    // blend shader: blending factor for lic'd colors\nuniform float     uMapBias;         // map shader: adjust the brightness of the result\nuniform float     uMaskIntensity;   // blending factor for mask color\nuniform vec3      uMaskColor;       // color for the masked out fragments\n\nin vec2 tcoordVC;\n\n/**\nConvert from RGB color space into HSL colorspace.\n*/\nvec3 RGBToHSL(vec3 RGB)\n{\n  vec3 HSL = vec3(0.0, 0.0, 0.0);\n\n  float RGBMin = min(min(RGB.r, RGB.g), RGB.b);\n  float RGBMax = max(max(RGB.r, RGB.g), RGB.b);\n  float RGBMaxMinDiff = RGBMax - RGBMin;\n\n  HSL.z = (RGBMax + RGBMin) / 2.0;\n\n  if (RGBMaxMinDiff == 0.0)\n    {\n    // Gray scale\n    HSL.x = 0.0;\n    HSL.y = 0.0;\n    }\n  else\n    {\n    // Color\n    if (HSL.z < 0.5)\n      HSL.y = RGBMaxMinDiff / (RGBMax + RGBMin);\n    else\n      HSL.y = RGBMaxMinDiff / (2.0 - RGBMax - RGBMin);\n\n    float dR\n      = (((RGBMax - RGB.r) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;\n    float dG\n      = (((RGBMax - RGB.g) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;\n    float dB\n      = (((RGBMax - RGB.b) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;\n\n    if (RGB.r == RGBMax)\n      HSL.x = dB - dG;\n    else\n    if (RGB.g == RGBMax)\n      HSL.x = (1.0 / 3.0) + dR - dB;\n    else\n    if (RGB.b == RGBMax)\n      HSL.x = (2.0 / 3.0) + dG - dR;\n\n    if (HSL.x < 0.0)\n      HSL.x += 1.0;\n\n    if (HSL.x > 1.0)\n      HSL.x -= 1.0;\n    }\n\n  return HSL;\n}\n\n/**\nHelper for HSL to RGB conversion.\n*/\nfloat Util(float v1, float v2, float vH)\n{\n  if (vH < 0.0)\n    vH += 1.0;\n\n  if (vH > 1.0)\n     vH -= 1.0;\n\n  if ((6.0 * vH) < 1.0)\n    return (v1 + (v2 - v1) * 6.0 * vH);\n\n  if ((2.0 * vH) < 1.0)\n    return (v2);\n\n  if ((3.0 * vH) < 2.0)\n    return (v1 + (v2 - v1) * ((2.0 / 3.0) - vH) * 6.0);\n\n  return v1;\n}\n\n/**\nConvert from HSL space into RGB space.\n*/\nvec3 HSLToRGB(vec3 HSL)\n{\n  vec3 RGB;\n  if (HSL.y == 0.0)\n    {\n    // Gray\n    RGB.r = HSL.z;\n    RGB.g = HSL.z;\n    RGB.b = HSL.z;\n    }\n  else\n    {\n    // Chromatic\n    float v2;\n    if (HSL.z < 0.5)\n      v2 = HSL.z * (1.0 + HSL.y);\n    else\n      v2 = (HSL.z + HSL.y) - (HSL.y * HSL.z);\n\n    float v1 = 2.0 * HSL.z - v2;\n\n    RGB.r = Util(v1, v2, HSL.x + (1.0 / 3.0));\n    RGB.g = Util(v1, v2, HSL.x);\n    RGB.b = Util(v1, v2, HSL.x - (1.0 / 3.0));\n    }\n\n  return RGB.rgb;\n}\n\nvoid main()\n{\n  vec4 lic = texture2D(texLIC, tcoordVC.st);\n  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);\n\n  // depth is used to determine which fragment belong to us\n  // and we can change\n  float depth = texture2D(texVectors, tcoordVC.st).a;\n\n  vec3 fragColorRGB;\n  float valid;\n  if (depth > 1.0e-3)\n    {\n    // we own it\n    // shade LIC'ed geometry, or apply mask\n    if (lic.g!=0.0)\n      {\n      // it's masked\n      // apply fragment mask\n      fragColorRGB = uMaskIntensity * uMaskColor + (1.0 - uMaskIntensity) * geomColor.rgb;\n      valid = 0.0;\n      }\n    else\n      {\n      if (uScalarColorMode==0)\n        {\n        // blend with scalars\n        fragColorRGB = lic.rrr * uLICIntensity + geomColor.rgb * (1.0 - uLICIntensity);\n        }\n      else\n        {\n        // multiply with scalars\n        fragColorRGB = geomColor.rgb * clamp((uMapBias + lic.r), 0.0, 1.0);\n        }\n      if (lic.b != 0.0)\n        {\n        // didn't have the required guard pixels\n        // don't consider it in min max estimation\n        // for histpgram stretching\n        valid = 0.0;\n        }\n      else\n        {\n        // ok to use in min/max estimates for histogram\n        // stretching\n        valid = 1.0;\n        }\n      }\n    }\n  else\n    {\n    // we don't own it\n    // pass through scalars\n    fragColorRGB = geomColor.rgb;\n    valid = 0.0;\n    }\n\n  // if no further stages this texture is\n  // copied to the screen\n  RGBOutput = vec4(fragColorRGB, geomColor.a);\n\n  // if further stages, move to hsl space for contrast\n  // enhancement. encoding validity saves moving a texture to the cpu\n  vec3 fragColorHSL = RGBToHSL(fragColorRGB);\n  HSLOutput = vec4(fragColorHSL, valid);\n}\n"),t.licCopyPass=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkSurfaceLICMapper_DCpy.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// This shader copies fragments and depths to the output buffer\n\n// the output of this shader\n//VTK::Output::Dec\n\nuniform sampler2D texDepth;     // z values from vertex shader\nuniform sampler2D texRGBColors; // final rgb LIC colors\n\nin vec2 tcoordVC;\n\nvoid main()\n{\n  gl_FragDepth = texture2D(texDepth, tcoordVC).x;\n  gl_FragData[0] = texture2D(texRGBColors, tcoordVC);\n\n  // since we render a screen aligned quad\n  // we're going to be writing fragments\n  // not touched by the original geometry\n  // it's critical not to modify those\n  // fragments.\n  if (gl_FragDepth == 1.0)\n    {\n    discard;\n    }\n}\n"),t.enhanceContrastPass=e.buildAShader("//VTK::System::Dec\n\n//=========================================================================\n//\n//  Program:   Visualization Toolkit\n//  Module:    vtkSurfaceLICMapper_CE.glsl\n//\n//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n//  All rights reserved.\n//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n//\n//     This software is distributed WITHOUT ANY WARRANTY; without even\n//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n//     PURPOSE.  See the above copyright notice for more information.\n//\n//=========================================================================\n\n// color contrast enhance stage implemented via histogram stretching\n// on lightness channel. if the min and max are tweaked it can generate\n// out-of-range values these will be clamped in 0 to 1\n\n// the output of this shader\n//VTK::Output::Dec\n\nuniform sampler2D texGeomColors; // scalars + lighting\nuniform sampler2D texLIC;        // image lic, mask\nuniform sampler2D texHSLColors;  // hsla colors\n\nuniform float     uLMin;         // min lightness over all fragments\nuniform float     uLMaxMinDiff;  // max - min lightness over all fragments\n\nin vec2 tcoordVC;\n\nvec3 HSLToRGB(vec3 HSL)\n{\n  vec3 RGB;\n  float v;\n  float h = HSL.x;\n  float sl = HSL.y;\n  float l = HSL.z;\n\n  v = (l <= 0.5) ? (l * (1.0 + sl)) : (l + sl - l * sl);\n  if (v <= 0.0) {\n    RGB = vec3(0.0,0.0,0.0);\n  } else {\n    float m;\n    int sextant;\n    float fract, vsf, mid1, mid2;\n\n    m = l + l - v;\n    h *= 6.0;\n    sextant = int(h);\n    fract = h - float(sextant);\n\n    vsf = (v - m) * fract;\n    mid1 = m + vsf;\n    mid2 = v - vsf;\n    switch (sextant) {\n      case 0: RGB.r = v; RGB.g = mid1; RGB.b = m; break;\n      case 1: RGB.r = mid2; RGB.g = v; RGB.b = m; break;\n      case 2: RGB.r = m; RGB.g = v; RGB.b = mid1; break;\n      case 3: RGB.r = m; RGB.g = mid2; RGB.b = v; break;\n      case 4: RGB.r = mid1; RGB.g = m; RGB.b = v; break;\n      case 5: RGB.r = v; RGB.g = m; RGB.b = mid2; break;\n    }\n  }\n  return RGB;\n}\n\nvoid main()\n{\n  // lookup hsl color , mask\n  vec4 fragColor = texture2D(texHSLColors, tcoordVC.st);\n\n  // don't modify masked fragments (masked => lic.g==1)\n  vec4 lic = texture2D(texLIC, tcoordVC.st);\n  if (lic.g==0.0)\n    {\n    // normalize lightness channel\n    fragColor.z = clamp((fragColor.z - uLMin)/uLMaxMinDiff, 0.0, 1.0);\n    }\n\n  // back into rgb space\n  fragColor.rgb = HSLToRGB(fragColor.xyz);\n\n  // add alpha\n  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);\n  fragColor.a = geomColor.a;\n\n  gl_FragData[0] = fragColor;\n}\n"),t.shadersNeedBuilding=!1)},e.initializeResources=function(){e.createFBO(),e.generateNoiseTexture(t.licInterface.getNoiseTextureSize()),e.allocateTextures(),e.buildAllShaders(),t.licQuad||(t.licQuad=function(e){var t=Ya.newInstance();t.setOpenGLRenderWindow(e);for(var n=new Float32Array(12),r=0;r<4;r++)n[3*r]=r%2*2-1,n[3*r+1]=r>1?1:-1,n[3*r+2]=0;var a=new Float32Array([0,0,1,0,0,1,1,1]),i=new Uint16Array(8);i[0]=3,i[1]=0,i[2]=1,i[3]=3,i[4]=3,i[5]=0,i[6]=3,i[7]=2;var o=s.a.newInstance({numberOfComponents:3,values:n});o.setName("points");var l=s.a.newInstance({numberOfComponents:1,values:i}),B=s.a.newInstance({numberOfComponents:2,values:a});return t.getCABO().createVBO(l,"polys",Yi.SURFACE,{points:o,cellOffset:0,tcoords:B}),t}(t.openGLRenderWindow)),t.licHelper||(t.licHelper=wi.newInstance())},e.prepareForGeometry=function(){var e=t.framebuffer;e.saveCurrentBindingsAndBuffers(),e.bind(),t.geometryImage.activate(),t.vectorImage.activate(),t.maskVectorImage.activate(),e.removeColorBuffer(0),e.removeColorBuffer(1),e.removeColorBuffer(2),e.setColorBuffer(t.geometryImage,0),e.setColorBuffer(t.vectorImage,1),e.setColorBuffer(t.maskVectorImage,2),e.setDepthBuffer(t.depthTexture);var n=t.context;n.drawBuffers([n.COLOR_ATTACHMENT0,n.COLOR_ATTACHMENT1,n.COLOR_ATTACHMENT2]),n.viewport.apply(n,[0,0].concat(Object(r.a)(t.size))),n.scissor.apply(n,[0,0].concat(Object(r.a)(t.size))),n.disable(n.BLEND),n.disable(n.DEPTH_TEST),n.disable(n.SCISSOR_TEST),n.clearColor(0,0,0,0),n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT)},e.copyToScreen=function(n){t.RGBColorImage.activate(),t.depthTexture.activate(),t.licCopyPass||e.initializeResources();var a=t.licCopyPass;t.openGLRenderWindow.getShaderCache().readyShaderProgram(a);var s=t.context;s.viewport.apply(s,[0,0].concat(Object(r.a)(n))),s.scissor.apply(s,[0,0].concat(Object(r.a)(n))),s.disable(s.BLEND),s.enable(s.DEPTH_TEST),s.disable(s.SCISSOR_TEST),a.setUniformi("texDepth",t.depthTexture.getTextureUnit()),a.setUniformi("texRGBColors",t.RGBColorImage.getTextureUnit()),e.renderQuad(n,a),t.RGBColorImage.deactivate(),t.depthTexture.deactivate()},e.combineColorsAndLIC=function(){var n=t.context,a=t.framebuffer;a.saveCurrentBindingsAndBuffers(),a.bind(),a.create.apply(a,Object(r.a)(t.size)),a.removeColorBuffer(0),a.removeColorBuffer(1),a.setColorBuffer(t.RGBColorImage,0),a.setColorBuffer(t.HSLColorImage,1),n.drawBuffers([n.COLOR_ATTACHMENT0,n.COLOR_ATTACHMENT1]),n.disable(n.DEPTH_TEST),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),t.vectorImage.activate(),t.geometryImage.activate(),t.LICImage.activate(),t.licColorPass||e.initializeResources();var s=t.licColorPass;t.openGLRenderWindow.getShaderCache().readyShaderProgram(s),s.setUniformi("texVectors",t.vectorImage.getTextureUnit()),s.setUniformi("texGeomColors",t.geometryImage.getTextureUnit());var i=t.licInterface.get("colorMode","LICIntensity","mapModeBias","maskIntensity","maskColor","enhanceContrast","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor"),o=i.colorMode,l=i.LICIntensity,B=i.mapModeBias,Q=i.maskIntensity,c=i.maskColor,F=i.enhanceContrast,U=i.lowColorContrastEnhancementFactor,g=i.highColorContrastEnhancementFactor;if(s.setUniformi("texLIC",t.LICImage.getTextureUnit()),s.setUniformi("uScalarColorMode",o),s.setUniformf("uLICIntensity",l),s.setUniformf("uMapBias",B),s.setUniformf("uMaskIntensity",Q),s.setUniform3f.apply(s,["uMaskColor"].concat(Object(r.a)(c))),e.renderQuad(t.size,s),t.vectorImage.deactivate(),t.geometryImage.deactivate(),t.LICImage.deactivate(),a.removeColorBuffer(0),a.removeColorBuffer(1),n.drawBuffers([n.NONE]),F===Zi||F===xi){var d=0,u=1,I=u-d;I=(u-=I*g)-(d+=I*U),a.setColorBuffer(t.RGBColorImage),n.drawBuffers([n.COLOR_ATTACHMENT0]),t.geometryImage.activate(),t.HSLColorImage.activate(),t.LICImage.activate(),t.enhanceContrastPass||e.initializeResources();var m=t.enhanceContrastPass;t.openGLRenderWindow.getShaderCache().readyShaderProgram(m),m.setUniformi("texGeomColors",t.geometryImage.getTextureUnit()),m.setUniformi("texHSLColors",t.HSLColorImage.getTextureUnit()),m.setUniformi("texLIC",t.LICImage.getTextureUnit()),m.setUniformf("uLMin",d),m.setUniformf("uLMaxMinDiff",I),e.renderQuad(t.size,m),t.geometryImage.deactivate(),t.HSLColorImage.deactivate(),t.LICImage.deactivate(),a.removeColorBuffer(0),n.drawBuffers([n.NONE])}a.restorePreviousBindingsAndBuffers()},e.applyLIC=function(){var e=t.licInterface.get("stepSize","numberOfSteps","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","normalizeVectors","maskThreshold","transformVectors"),n=t.licHelper.executeLIC(t.size,t.vectorImage,t.maskVectorImage,t.noiseTexture,t.openGLRenderWindow,e);if(!n)return console.error("Failed to compute image LIC"),void(t.LICImage=null);t.LICImage=n},e.setSize=function(n){Array.isArray(n)&&2===n.length&&(t.size&&t.size[0]===n[0]&&t.size[1]===n[1]||(t.size=n,e.releaseGraphicsResources()))},e.releaseGraphicsResources=function(){t.geometryImage&&(t.geometryImage.releaseGraphicsResources(),t.geometryImage=null),t.vectorImage&&(t.vectorImage.releaseGraphicsResources(),t.vectorImage=null),t.maskVectorImage&&(t.maskVectorImage.releaseGraphicsResources(),t.maskVectorImage=null),t.LICImage&&(t.LICImage.releaseGraphicsResources(),t.LICImage=null),t.RGBColorImage&&(t.RGBColorImage.releaseGraphicsResources(),t.RGBColorImage=null),t.HSLColorImage&&(t.HSLColorImage.releaseGraphicsResources(),t.HSLColorImage=null),t.depthTexture&&(t.depthTexture.releaseGraphicsResources(),t.depthTexture=null),t.framebuffer&&(t.framebuffer.releaseGraphicsResources(),t.framebuffer=null)}}var zi={context:null,openGLRenderWindow:null,shadersNeedBuilding:!0,reallocateTextures:!0,size:null,licInterface:null};function Pi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zi,n),Ai.extend(e,t,n),a.c.obj(e,t),a.c.setGet(e,t,["context","openGLRenderWindow","reallocateTextures","licInterface","size"]),Oi(e,t)}var Ki={newInstance:a.c.newInstance(Pi,"vtkSurfaceLICInterface"),extend:Pi};function ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _i=a.c.vtkErrorMacro;function qi(e,t){t.classHierarchy.push("vtkOpenGLSurfaceLICMapper");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ji(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.getNeedToRebuildShaders=function(e,r,a){return t.rebuildLICShaders||n.getNeedToRebuildShaders(e,r,a)},e.replaceShaderValues=function(e,r,a){var s=t.lastBoundBO.getReferenceByName("lastLightComplexity"),i=e.Vertex,o=e.Fragment,l=t.renderable.getInputArrayToProcess(0);if(l&&t.canDrawLIC){o=ma.substitute(o,"//VTK::Output::Dec",["//VTK::Output::Dec","layout(location = 1) out vec4 vectorTexture;","layout(location = 2) out vec4 maskVectorTexture;"]).result;var B=l.getName(),Q="".concat(B,"MC");0===s&&t.lastBoundBO.set({lastLightComplexity:1},!0),i=ma.substitute(i,"//VTK::TCoord::Dec",["attribute vec3 ".concat(Q,";"),"out vec3 licOutput;","//VTK::TCoord::Dec"]).result,i=ma.substitute(i,"//VTK::TCoord::Impl",["licOutput = ".concat(Q,";"),"//VTK::TCoord::Impl"]).result,o=ma.substitute(o,"//VTK::TCoord::Dec",["uniform int uMaskOnSurface;","uniform mat3 normalMatrix;","in vec3 licOutput;","//VTK::TCoord::Dec"]).result,o=ma.substitute(o,"//VTK::TCoord::Impl",["// projected vectors","  vec3 tcoordLIC = normalMatrix * licOutput;","  vec3 normN = normalize(normalVCVSOutput);","  float k = dot(tcoordLIC, normN);","  vec3 projected = (tcoordLIC - k*normN);","  vectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","// vectors for fragment masking","  if (uMaskOnSurface == 0)","    {","    maskVectorTexture = vec4(licOutput, 1.0);","    }","  else","    {","    maskVectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","    }","//VTK::TCoord::Impl"],!1).result,e.Vertex=i}t.rebuildLICShaders=!1,e.Fragment=o,n.replaceShaderValues(e,r,a),t.lastBoundBO.set({lastLightComplexity:s},!0)},e.setMapperShaderParameters=function(e,r,a){n.setMapperShaderParameters(e,r,a),t.canDrawLIC&&e.getProgram().setUniformi("uMaskOnSurface",t.maskOnSurface)},e.getNeedToRebuildBufferObjects=function(e,r){return t.rebuildLICBuffers||n.getNeedToRebuildBufferObjects(e,r)},e.buildBufferObjects=function(e,r){if(t.canDrawLIC){var a=t.renderable.getInputArrayToProcess(0);a&&a.getNumberOfComponents()>1&&t.renderable.setCustomShaderAttributes([a.getName()])}t.rebuildLICBuffers=!1,n.buildBufferObjects(e,r)},e.pushState=function(e){var n;t.stateCache=(Object(ye.a)(n={},e.BLEND,e.isEnabled(e.BLEND)),Object(ye.a)(n,e.DEPTH_TEST,e.isEnabled(e.DEPTH_TEST)),Object(ye.a)(n,e.SCISSOR_TEST,e.isEnabled(e.SCISSOR_TEST)),n)},e.popState=function(e){var n=function(n){return t.stateCache[n]?e.enable(n):e.disable(n)};n(e.BLEND),n(e.DEPTH_TEST),n(e.SCISSOR_TEST)},e.renderPiece=function(r,a){var s=!0;t.openGLRenderWindow.getWebgl2()||(_i("SurfaceLICMapper Requires WebGL 2"),s=!1),t.context.getExtension("EXT_color_buffer_float")&&t.context.getExtension("OES_texture_float_linear")||(_i("SurfaceLICMapper requires the EXT_color_buffer_float and OES_texture_float_linear WebGL2 extensions."),s=!1),t.currentInput=t.renderable.getInputData(),t.currentInput||(_i("No input"),s=!1);var i=t.renderable.getLicInterface();i||(i=Ai.newInstance(),t.renderable.setLicInterface(i)),t.openGLLicInterface||(t.openGLLicInterface=Ki.newInstance()),i!==t.openGLLicInterface.getLicInterface()&&t.openGLLicInterface.setLicInterface(i);var o=t.renderable.getInputArrayToProcess(0);if(i.getEnableLIC()&&(!o||o.getNumberOfComponents()<2)&&(_i("No vector input array"),s=!1),i.getEnableLIC()||(s=!1),t.canDrawLIC!==s&&(t.rebuildLICShaders=!0,t.rebuildLICBuffers=!0),t.canDrawLIC=s,s&&i.getEnableLIC()){var l=t.openGLRenderWindow.getSize(),B=l.map((function(e){return Math.round(e*i.getViewPortScale())}));t.openGLLicInterface.setSize(B),t.openGLLicInterface.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLLicInterface.setContext(t.context),e.pushState(t.context),t.openGLLicInterface.initializeResources(),t.openGLLicInterface.prepareForGeometry(),e.popState(t.context),n.renderPieceStart(r,a),n.renderPieceDraw(r,a),n.renderPieceFinish(r,a),e.pushState(t.context),t.VBOBuildTime.modified(),t.openGLLicInterface.completedGeometry(),t.openGLLicInterface.applyLIC(),t.openGLLicInterface.combineColorsAndLIC(),t.openGLLicInterface.copyToScreen(l),e.popState(t.context)}else n.renderPiece(r,a)}}var $i={canDrawLIC:!1,rebuildLICShaders:!1,rebuildLICBuffers:!1,openGLLicInterface:null};function eo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$i,n),os.extend(e,t,n),qi(e,t),a.c.setGet(e,t,["openGLLicInterface"])}var to={newInstance:a.c.newInstance(eo,"vtkOpenGLSurfaceLICMapper"),extend:eo};function no(e,t){t.classHierarchy.push("vtkOpenGLVolume"),e.buildPass=function(n){t.renderable&&t.renderable.getVisibility()&&n&&(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;n.incrementVolumeCount()}},e.traverseVolumePass=function(n){t.renderable&&t.renderable.getVisibility()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children[0].traverse(n),e.apply(n,!1))},e.volumePass=function(n){t.renderable&&t.renderable.getVisibility()&&(n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1)):t.context.depthMask(!0))},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),Object(b.d)(t.MCWCMatrix,t.renderable.getMatrix()),Object(b.i)(t.MCWCMatrix,t.MCWCMatrix),t.renderable.getIsIdentity()?dt(t.normalMatrix):(gt(t.normalMatrix,t.MCWCMatrix),It(t.normalMatrix,t.normalMatrix)),t.keyMatrixTime.modified()),{mcwc:t.MCWCMatrix,normalMatrix:t.normalMatrix}}}var ro={};function ao(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ro,n),an.extend(e,t,n),t.keyMatrixTime={},a.c.obj(t.keyMatrixTime,{mtime:0}),t.normalMatrix=new Float64Array(9),t.MCWCMatrix=new Float64Array(16),a.c.setGet(e,t,["context"]),no(e,t)}var so={newInstance:a.c.newInstance(ao,"vtkOpenGLVolume"),extend:ao},io={NEAREST:0,LINEAR:1,FAST_LINEAR:2},oo={FRACTIONAL:0,PROPORTIONAL:1},lo={InterpolationType:io,OpacityMode:oo},Bo={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3},Qo={BlendMode:Bo};function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Fo=a.c.vtkWarningMacro,Uo=a.c.vtkErrorMacro;function go(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function uo(e,t){t.classHierarchy.push("vtkOpenGLVolumeMapper"),e.buildPass=function(){t.zBufferTexture=null},e.opaqueZBufferPass=function(e,n){if(e){var r=n.getZBufferTexture();r!==t.zBufferTexture&&(t.zBufferTexture=r)}},e.volumePass=function(n,r){if(n){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.jitterTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.scalarTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.opacityTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLVolume=e.getFirstAncestorOfType("vtkOpenGLVolume");var a=t.openGLVolume.getRenderable();t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");var s=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(s.getActiveCamera()),e.renderPiece(s,a)}},e.buildShaders=function(t,n,r){e.getShaderTemplate(t,n,r),e.replaceShaderValues(t,n,r)},e.getShaderTemplate=function(e,t,n){e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexDC;\n\nvarying vec3 vertexVCVSOutput;\nuniform mat4 PCVCMatrix;\n\nuniform float dcxmin;\nuniform float dcxmax;\nuniform float dcymin;\nuniform float dcymax;\n\nvoid main()\n{\n  // dcsmall is the device coords reduced to the\n  // x y area covered by the volume\n  vec4 dcsmall = vec4(\n    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),\n    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),\n    vertexDC.z,\n    vertexDC.w);\n  vec4 vcpos = PCVCMatrix * dcsmall;\n  vertexVCVSOutput = vcpos.xyz/vcpos.w;\n  gl_Position = dcsmall;\n}\n",e.Fragment="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkVolumeFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the volume mappers fragment shader\n\n// the output of this shader\n//VTK::Output::Dec\n\nvarying vec3 vertexVCVSOutput;\n\n// first declare the settings from the mapper\n// that impact the code paths in here\n\n// always set vtkNumComponents 1,2,3,4\n//VTK::NumComponents\n\n// possibly define vtkUseTriliear\n//VTK::TrilinearOn\n\n// possibly define vtkIndependentComponents\n//VTK::IndependentComponentsOn\n\n// possibly define any \"proportional\" components\n//VTK::vtkProportionalComponents\n\n// Define the blend mode to use\n#define vtkBlendMode //VTK::BlendMode\n\n// Possibly define vtkImageLabelOutlineOn\n//VTK::ImageLabelOutlineOn\n\n#ifdef vtkImageLabelOutlineOn\nuniform int outlineThickness;\nuniform float vpWidth;\nuniform float vpHeight;\nuniform mat4 PCWCMatrix;\nuniform mat4 vWCtoIDX;\n#endif\n\n// define vtkLightComplexity\n//VTK::LightComplexity\n#if vtkLightComplexity > 0\nuniform float vSpecularPower;\nuniform float vAmbient;\nuniform float vDiffuse;\nuniform float vSpecular;\n//VTK::Light::Dec\n#endif\n\n// possibly define vtkGradientOpacityOn\n//VTK::GradientOpacityOn\n#ifdef vtkGradientOpacityOn\nuniform float goscale0;\nuniform float goshift0;\nuniform float gomin0;\nuniform float gomax0;\n#if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\nuniform float goscale1;\nuniform float goshift1;\nuniform float gomin1;\nuniform float gomax1;\n#if vtkNumComponents >= 3\nuniform float goscale2;\nuniform float goshift2;\nuniform float gomin2;\nuniform float gomax2;\n#endif\n#if vtkNumComponents >= 4\nuniform float goscale3;\nuniform float goshift3;\nuniform float gomin3;\nuniform float gomax3;\n#endif\n#endif\n#endif\n\n// if you want to see the raw tiled\n// data in webgl1 uncomment the following line\n// #define debugtile\n\n// camera values\nuniform float camThick;\nuniform float camNear;\nuniform float camFar;\nuniform int cameraParallel;\n\n// values describing the volume geometry\nuniform vec3 vOriginVC;\nuniform vec3 vSpacing;\nuniform ivec3 volumeDimensions; // 3d texture dimensions\nuniform vec3 vPlaneNormal0;\nuniform float vPlaneDistance0;\nuniform vec3 vPlaneNormal1;\nuniform float vPlaneDistance1;\nuniform vec3 vPlaneNormal2;\nuniform float vPlaneDistance2;\nuniform vec3 vPlaneNormal3;\nuniform float vPlaneDistance3;\nuniform vec3 vPlaneNormal4;\nuniform float vPlaneDistance4;\nuniform vec3 vPlaneNormal5;\nuniform float vPlaneDistance5;\n\n//VTK::ClipPlane::Dec\n\n// opacity and color textures\nuniform sampler2D otexture;\nuniform float oshift0;\nuniform float oscale0;\nuniform sampler2D ctexture;\nuniform float cshift0;\nuniform float cscale0;\n\n// jitter texture\nuniform sampler2D jtexture;\n\n// some 3D texture values\nuniform float sampleDistance;\nuniform vec3 vVCToIJK;\n\n// the heights defined below are the locations\n// for the up to four components of the tfuns\n// the tfuns have a height of 2XnumComps pixels so the\n// values are computed to hit the middle of the two rows\n// for that component\n#ifdef vtkIndependentComponentsOn\n#if vtkNumComponents == 2\nuniform float mix0;\nuniform float mix1;\n#define height0 0.25\n#define height1 0.75\n#endif\n#if vtkNumComponents == 3\nuniform float mix0;\nuniform float mix1;\nuniform float mix2;\n#define height0 0.17\n#define height1 0.5\n#define height2 0.83\n#endif\n#if vtkNumComponents == 4\nuniform float mix0;\nuniform float mix1;\nuniform float mix2;\nuniform float mix3;\n#define height0 0.125\n#define height1 0.375\n#define height2 0.625\n#define height3 0.875\n#endif\n#endif\n\n#if vtkNumComponents >= 2\nuniform float oshift1;\nuniform float oscale1;\nuniform float cshift1;\nuniform float cscale1;\n#endif\n#if vtkNumComponents >= 3\nuniform float oshift2;\nuniform float oscale2;\nuniform float cshift2;\nuniform float cscale2;\n#endif\n#if vtkNumComponents >= 4\nuniform float oshift3;\nuniform float oscale3;\nuniform float cshift3;\nuniform float cscale3;\n#endif\n\n// declaration for intermixed geometry\n//VTK::ZBuffer::Dec\n\n// Lighting values\n//VTK::Light::Dec\n\n//=======================================================================\n// Webgl2 specific version of functions\n#if __VERSION__ == 300\n\nuniform highp sampler3D texture1;\n\nvec4 getTextureValue(vec3 pos)\n{\n  vec4 tmp = texture(texture1, pos);\n#if vtkNumComponents == 1\n  tmp.a = tmp.r;\n#endif\n#if vtkNumComponents == 2\n  tmp.a = tmp.g;\n#endif\n#if vtkNumComponents == 3\n  tmp.a = length(tmp.rgb);\n#endif\n  return tmp;\n}\n\n//=======================================================================\n// WebGL1 specific version of functions\n#else\n\nuniform sampler2D texture1;\n\nuniform float texWidth;\nuniform float texHeight;\nuniform int xreps;\nuniform int xstride;\nuniform int ystride;\n\n// if computing triliear values from multiple z slices\n#ifdef vtkTriliearOn\nvec4 getTextureValue(vec3 ijk)\n{\n  float zoff = 1.0/float(volumeDimensions.z);\n  vec4 val1 = getOneTextureValue(ijk);\n  vec4 val2 = getOneTextureValue(vec3(ijk.xy, ijk.z + zoff));\n\n  float indexZ = float(volumeDimensions)*ijk.z;\n  float zmix =  indexZ - floor(indexZ);\n\n  return mix(val1, val2, zmix);\n}\n\nvec4 getOneTextureValue(vec3 ijk)\n#else // nearest or fast linear\nvec4 getTextureValue(vec3 ijk)\n#endif\n{\n  vec3 tdims = vec3(volumeDimensions);\n\n#ifdef debugtile\n  vec2 tpos = vec2(ijk.x, ijk.y);\n  vec4 tmp = texture2D(texture1, tpos);\n  tmp.a = 1.0;\n\n#else\n  int z = int(ijk.z * tdims.z);\n  int yz = z / xreps;\n  int xz = z - yz*xreps;\n\n  int tileWidth = volumeDimensions.x/xstride;\n  int tileHeight = volumeDimensions.y/ystride;\n\n  xz *= tileWidth;\n  yz *= tileHeight;\n\n  float ni = float(xz) + (ijk.x*float(tileWidth));\n  float nj = float(yz) + (ijk.y*float(tileHeight));\n\n  vec2 tpos = vec2(ni/texWidth, nj/texHeight);\n\n  vec4 tmp = texture2D(texture1, tpos);\n\n#if vtkNumComponents == 1\n  tmp.a = tmp.r;\n#endif\n#if vtkNumComponents == 2\n  tmp.g = tmp.a;\n#endif\n#if vtkNumComponents == 3\n  tmp.a = length(tmp.rgb);\n#endif\n#endif\n\n  return tmp;\n}\n\n// End of Webgl1 specific code\n//=======================================================================\n#endif\n\n//=======================================================================\n// compute the normal and gradient magnitude for a position\nvec4 computeNormal(vec3 pos, float scalar, vec3 tstep)\n{\n  vec4 result;\n\n  result.x = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)).a - scalar;\n  result.y = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)).a - scalar;\n  result.z = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)).a - scalar;\n\n  // divide by spacing\n  result.xyz /= vSpacing;\n\n  result.w = length(result.xyz);\n\n  // rotate to View Coords\n  result.xyz =\n    result.x * vPlaneNormal0 +\n    result.y * vPlaneNormal2 +\n    result.z * vPlaneNormal4;\n\n  if (result.w > 0.0)\n  {\n    result.xyz /= result.w;\n  }\n  return result;\n}\n\n#ifdef vtkImageLabelOutlineOn\nvec3 fragCoordToIndexSpace(vec4 fragCoord) {\n  vec4 pcPos = vec4(\n    (fragCoord.x / vpWidth - 0.5) * 2.0,\n    (fragCoord.y / vpHeight - 0.5) * 2.0,\n    (fragCoord.z - 0.5) * 2.0,\n    1.0);\n\n  vec4 worldCoord = PCWCMatrix * pcPos;\n  vec4 vertex = (worldCoord/worldCoord.w);\n\n  return (vWCtoIDX * vertex).xyz / vec3(volumeDimensions);\n}\n#endif\n\n//=======================================================================\n// compute the normals and gradient magnitudes for a position\n// for independent components\nmat4 computeMat4Normal(vec3 pos, vec4 tValue, vec3 tstep)\n{\n  mat4 result;\n  vec4 distX = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)) - tValue;\n  vec4 distY = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)) - tValue;\n  vec4 distZ = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)) - tValue;\n\n  // divide by spacing\n  distX /= vSpacing.x;\n  distY /= vSpacing.y;\n  distZ /= vSpacing.z;\n\n  mat3 rot;\n  rot[0] = vPlaneNormal0;\n  rot[1] = vPlaneNormal2;\n  rot[2] = vPlaneNormal4;\n\n#if !defined(vtkComponent0Proportional)\n  result[0].xyz = vec3(distX.r, distY.r, distZ.r);\n  result[0].a = length(result[0].xyz);\n  result[0].xyz *= rot;\n  if (result[0].w > 0.0)\n  {\n    result[0].xyz /= result[0].w;\n  }\n#endif\n\n// optionally compute the 2nd component\n#if vtkNumComponents >= 2 && !defined(vtkComponent1Proportional)\n  result[1].xyz = vec3(distX.g, distY.g, distZ.g);\n  result[1].a = length(result[1].xyz);\n  result[1].xyz *= rot;\n  if (result[1].w > 0.0)\n  {\n    result[1].xyz /= result[1].w;\n  }\n#endif\n\n// optionally compute the 3rd component\n#if vtkNumComponents >= 3 && !defined(vtkComponent2Proportional)\n  result[2].xyz = vec3(distX.b, distY.b, distZ.b);\n  result[2].a = length(result[2].xyz);\n  result[2].xyz *= rot;\n  if (result[2].w > 0.0)\n  {\n    result[2].xyz /= result[2].w;\n  }\n#endif\n\n// optionally compute the 4th component\n#if vtkNumComponents >= 4 && !defined(vtkComponent3Proportional)\n  result[3].xyz = vec3(distX.a, distY.a, distZ.a);\n  result[3].a = length(result[3].xyz);\n  result[3].xyz *= rot;\n  if (result[3].w > 0.0)\n  {\n    result[3].xyz /= result[3].w;\n  }\n#endif\n\n  return result;\n}\n\n//=======================================================================\n// Given a normal compute the gradient opacity factors\n//\nfloat computeGradientOpacityFactor(\n  vec4 normal, float goscale, float goshift, float gomin, float gomax)\n{\n#if defined(vtkGradientOpacityOn)\n  return clamp(normal.a*goscale + goshift, gomin, gomax);\n#else\n  return 1.0;\n#endif\n}\n\n#if vtkLightComplexity > 0\nvoid applyLighting(inout vec3 tColor, vec4 normal)\n{\n  vec3 diffuse = vec3(0.0, 0.0, 0.0);\n  vec3 specular = vec3(0.0, 0.0, 0.0);\n  //VTK::Light::Impl\n  tColor.rgb = tColor.rgb*(diffuse*vDiffuse + vAmbient) + specular*vSpecular;\n}\n#endif\n\n//=======================================================================\n// Given a texture value compute the color and opacity\n//\nvec4 getColorForValue(vec4 tValue, vec3 posIS, vec3 tstep)\n{\n#ifdef vtkImageLabelOutlineOn\n  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord); // pos in texture space\n  vec4 centerValue = getTextureValue(centerPosIS);\n  bool pixelOnBorder = false;\n  vec4 tColor = texture2D(ctexture, vec2(centerValue.r * cscale0 + cshift0, 0.5));\n\n  // Get alpha of segment from opacity function.\n  tColor.a = texture2D(otexture, vec2(centerValue.r * oscale0 + oshift0, 0.5)).r;\n\n  // Only perform outline check on fragments rendering voxels that aren't invisible.\n  // Saves a bunch of needless checks on the background.\n  // TODO define epsilon when building shader?\n  if (float(tColor.a) > 0.01) {\n    for (int i = -outlineThickness; i <= outlineThickness; i++) {\n      for (int j = -outlineThickness; j <= outlineThickness; j++) {\n        if (i == 0 || j == 0) {\n          continue;\n        }\n\n        vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),\n          gl_FragCoord.y + float(j),\n          gl_FragCoord.z, gl_FragCoord.w);\n\n        vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);\n        vec4 value = getTextureValue(neighborPosIS);\n\n        // If any of my neighbours are not the same value as I\n        // am, this means I am on the border of the segment.\n        // We can break the loops\n        if (any(notEqual(value, centerValue))) {\n          pixelOnBorder = true;\n          break;\n        }\n      }\n\n      if (pixelOnBorder == true) {\n        break;\n      }\n    }\n\n    // If I am on the border, I am displayed at full opacity\n    if (pixelOnBorder == true) {\n      tColor.a = 1.0;\n    }\n  }\n\n#else\n  // compute the normal and gradient magnitude if needed\n  // We compute it as a vec4 if possible otherwise a mat4\n  //\n  vec4 goFactor = vec4(1.0,1.0,1.0,1.0);\n\n  // compute the normal vectors as needed\n  #if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)\n    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\n      mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);\n      #if !defined(vtkComponent0Proportional)\n        vec4 normal0 = normalMat[0];\n      #endif\n      #if !defined(vtkComponent1Proportional)\n        vec4 normal1 = normalMat[1];\n      #endif\n      #if vtkNumComponents > 2\n        #if !defined(vtkComponent2Proportional)\n          vec4 normal2 = normalMat[2];\n        #endif\n        #if vtkNumComponents > 3\n          #if !defined(vtkComponent3Proportional)\n            vec4 normal3 = normalMat[3];\n          #endif\n        #endif\n      #endif\n    #else\n      vec4 normal0 = computeNormal(posIS, tValue.a, tstep);\n    #endif\n  #endif\n\n  // compute gradient opacity factors as needed\n  #if defined(vtkGradientOpacityOn)\n    #if !defined(vtkComponent0Proportional)\n      goFactor.x =\n        computeGradientOpacityFactor(normal0, goscale0, goshift0, gomin0, gomax0);\n    #endif\n    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\n      #if !defined(vtkComponent1Proportional)\n        goFactor.y =\n          computeGradientOpacityFactor(normal1, goscale1, goshift1, gomin1, gomax1);\n      #endif\n      #if vtkNumComponents > 2\n        #if !defined(vtkComponent2Proportional)\n          goFactor.z =\n            computeGradientOpacityFactor(normal2, goscale2, goshift2, gomin2, gomax2);\n        #endif\n        #if vtkNumComponents > 3\n          #if !defined(vtkComponent3Proportional)\n            goFactor.w =\n              computeGradientOpacityFactor(normal3, goscale3, goshift3, gomin3, gomax3);\n          #endif\n        #endif\n      #endif\n    #endif\n  #endif\n\n  // single component is always independent\n  #if vtkNumComponents == 1\n    vec4 tColor = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, 0.5));\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;\n  #endif\n\n  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n    vec4 tColor = mix0*texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, height0));\n    #if !defined(vtkComponent0Proportional)\n      tColor.a = goFactor.x*mix0*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;\n    #else\n      float pwfValue = texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;\n      tColor *= pwfValue;\n      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix0));\n    #endif\n\n    vec3 tColor1 = mix1*texture2D(ctexture, vec2(tValue.g * cscale1 + cshift1, height1)).rgb;\n    #if !defined(vtkComponent1Proportional)\n      tColor.a += goFactor.y*mix1*texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;\n    #else\n      float pwfValue = texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;\n      tColor1 *= pwfValue;\n      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix1));\n    #endif\n\n    #if vtkNumComponents >= 3\n      vec3 tColor2 = mix2*texture2D(ctexture, vec2(tValue.b * cscale2 + cshift2, height2)).rgb;\n      #if !defined(vtkComponent2Proportional)\n        tColor.a += goFactor.z*mix2*texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;\n      #else\n        float pwfValue = texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;\n        tColor2 *= pwfValue;\n        tColor.a *= mix(pwfValue, 1.0, (1.0 - mix2));\n      #endif\n\n      #if vtkNumComponents >= 4\n        vec3 tColor3 = mix3*texture2D(ctexture, vec2(tValue.a * cscale3 + cshift3, height3)).rgb;\n        #if !defined(vtkComponent3Proportional)\n          tColor.a += goFactor.w*mix3*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;\n        #else\n          float pwfValue = texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;\n          tColor3 *= pwfValue;\n          tColor.a *= mix(pwfValue, 1.0, (1.0 - mix3));\n        #endif\n      #endif\n    #endif\n  #else // then not independent\n\n  #if vtkNumComponents == 2\n    float lum = tValue.r * cscale0 + cshift0;\n    float alpha = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale1 + oshift1, 0.5)).r;\n    vec4 tColor = vec4(lum, lum, lum, alpha);\n  #endif\n  #if vtkNumComponents == 3\n    vec4 tColor;\n    tColor.r = tValue.r * cscale0 + cshift0;\n    tColor.g = tValue.g * cscale1 + cshift1;\n    tColor.b = tValue.b * cscale2 + cshift2;\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale0 + oshift0, 0.5)).r;\n  #endif\n  #if vtkNumComponents == 4\n    vec4 tColor;\n    tColor.r = tValue.r * cscale0 + cshift0;\n    tColor.g = tValue.g * cscale1 + cshift1;\n    tColor.b = tValue.b * cscale2 + cshift2;\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, 0.5)).r;\n  #endif\n  #endif // dependent\n\n  // apply lighting if requested as appropriate\n  #if vtkLightComplexity > 0\n    #if !defined(vtkComponent0Proportional)\n      applyLighting(tColor.rgb, normal0);\n    #endif\n  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n    #if !defined(vtkComponent1Proportional)\n      applyLighting(tColor1, normal1);\n    #endif\n  #if vtkNumComponents >= 3\n    #if !defined(vtkComponent2Proportional)\n      applyLighting(tColor2, normal2);\n    #endif\n  #if vtkNumComponents >= 4\n    #if !defined(vtkComponent3Proportional)\n      applyLighting(tColor3, normal3);\n    #endif\n  #endif\n  #endif\n  #endif\n#endif\n\n// perform final independent blend as needed\n#if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n  tColor.rgb += tColor1;\n#if vtkNumComponents >= 3\n  tColor.rgb += tColor2;\n#if vtkNumComponents >= 4\n  tColor.rgb += tColor3;\n#endif\n#endif\n#endif\n\n#endif\n\n\n\n\n\n\n\nreturn tColor;\n}\n\n\n\n//=======================================================================\n// Apply the specified blend mode operation along the ray's path.\n//\nvoid applyBlend(vec3 posIS, vec3 endIS, float sampleDistanceIS, vec3 tdims)\n{\n  vec3 tstep = 1.0/tdims;\n\n  // start slightly inside and apply some jitter\n  vec3 delta = endIS - posIS;\n  vec3 stepIS = normalize(delta)*sampleDistanceIS;\n  float raySteps = length(delta)/sampleDistanceIS;\n\n  // avoid 0.0 jitter\n  float jitter = 0.01 + 0.99*texture2D(jtexture, gl_FragCoord.xy/32.0).r;\n  float stepsTraveled = jitter;\n\n  // local vars for the loop\n  vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 tValue;\n  vec4 tColor;\n\n  // if we have less than one step then pick the middle point\n  // as our value\n  // if (raySteps <= 1.0)\n  // {\n  //   posIS = (posIS + endIS)*0.5;\n  // }\n\n  // Perform initial step at the volume boundary\n  // compute the scalar\n  tValue = getTextureValue(posIS);\n\n  #if vtkBlendMode == 0 // COMPOSITE_BLEND\n    // now map through opacity and color\n    tColor = getColorForValue(tValue, posIS, tstep);\n\n    // handle very thin volumes\n    if (raySteps <= 1.0)\n    {\n      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps);\n      gl_FragData[0] = tColor;\n      return;\n    }\n\n    tColor.a = 1.0 - pow(1.0 - tColor.a, jitter);\n    color = vec4(tColor.rgb*tColor.a, tColor.a);\n    posIS += (jitter*stepIS);\n\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // now map through opacity and color\n      tColor = getColorForValue(tValue, posIS, tstep);\n\n      float mix = (1.0 - color.a);\n\n      // this line should not be needed but nvidia seems to not handle\n      // the break correctly on windows/chrome 58 angle\n      //mix = mix * sign(max(raySteps - stepsTraveled - 1.0, 0.0));\n\n      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;\n      stepsTraveled++;\n      posIS += stepIS;\n      if (color.a > 0.99) { color.a = 1.0; break; }\n    }\n\n    if (color.a < 0.99 && (raySteps - stepsTraveled) > 0.0)\n    {\n      posIS = endIS;\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // now map through opacity and color\n      tColor = getColorForValue(tValue, posIS, tstep);\n      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps - stepsTraveled);\n\n      float mix = (1.0 - color.a);\n      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;\n    }\n\n    gl_FragData[0] = vec4(color.rgb/color.a, color.a);\n  #endif\n  #if vtkBlendMode == 1 || vtkBlendMode == 2\n    // MAXIMUM_INTENSITY_BLEND || MINIMUM_INTENSITY_BLEND\n    // Find maximum/minimum intensity along the ray.\n\n    // Define the operation we will use (min or max)\n    #if vtkBlendMode == 1\n    #define OP max\n    #else\n    #define OP min\n    #endif\n\n    // If the clipping range is shorter than the sample distance\n    // we can skip the sampling loop along the ray.\n    if (raySteps <= 1.0)\n    {\n      gl_FragData[0] = getColorForValue(tValue, posIS, tstep);\n      return;\n    }\n\n    vec4 value = tValue;\n    posIS += (jitter*stepIS);\n\n    // Sample along the ray until MaximumSamplesValue,\n    // ending slightly inside the total distance\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // Update the maximum value if necessary\n      value = OP(tValue, value);\n\n      // Otherwise, continue along the ray\n      stepsTraveled++;\n      posIS += stepIS;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posIS = endIS;\n    tValue = getTextureValue(posIS);\n    value = OP(tValue, value);\n\n    // Now map through opacity and color\n    gl_FragData[0] = getColorForValue(value, posIS, tstep);\n  #endif\n  #if vtkBlendMode == 3 //AVERAGE_INTENSITY_BLEND\n    vec4 averageIPScalarRangeMin = vec4 (\n      //VTK::AverageIPScalarRangeMin,\n      //VTK::AverageIPScalarRangeMin,\n      //VTK::AverageIPScalarRangeMin,\n      1.0);\n    vec4 averageIPScalarRangeMax = vec4(\n      //VTK::AverageIPScalarRangeMax,\n      //VTK::AverageIPScalarRangeMax,\n      //VTK::AverageIPScalarRangeMax,\n      1.0);\n\n    vec4 sum = vec4(0.);\n\n    averageIPScalarRangeMin.a = tValue.a;\n    averageIPScalarRangeMax.a = tValue.a;\n\n    if (all(greaterThanEqual(tValue, averageIPScalarRangeMin)) &&\n    all(lessThanEqual(tValue, averageIPScalarRangeMax))) {\n      sum += tValue;\n    }\n\n    if (raySteps <= 1.0) {\n      gl_FragData[0] = getColorForValue(sum, posIS, tstep);\n      return;\n    }\n\n    posIS += (jitter*stepIS);\n\n    // Sample along the ray until MaximumSamplesValue,\n    // ending slightly inside the total distance\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation.\n      // Notes:\n      // - We are comparing all values in the texture to see if any of them\n      //   are outside of the scalar range. In the future we might want to allow\n      //   scalar ranges for each component.\n      // - We are setting the alpha channel for averageIPScalarRangeMin and\n      //   averageIPScalarRangeMax so that we do not trigger this 'continue'\n      //   based on the alpha channel comparison.\n      // - There might be a better way to do this. I'm not sure if there is an\n      //   equivalent of 'any' which only operates on RGB, though I suppose\n      //   we could write an 'anyRGB' function and see if that is faster.\n      averageIPScalarRangeMin.a = tValue.a;\n      averageIPScalarRangeMax.a = tValue.a;\n      if (any(lessThan(tValue, averageIPScalarRangeMin)) ||\n          any(greaterThan(tValue, averageIPScalarRangeMax))) {\n        continue;\n      }\n\n      // Sum the values across each step in the path\n      sum += tValue;\n\n      // Otherwise, continue along the ray\n      stepsTraveled++;\n      posIS += stepIS;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posIS = endIS;\n\n    // compute the scalar\n    tValue = getTextureValue(posIS);\n\n    // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation\n    if (all(greaterThanEqual(tValue, averageIPScalarRangeMin)) &&\n        all(lessThanEqual(tValue, averageIPScalarRangeMax))) {\n      sum += tValue;\n\n      stepsTraveled++;\n    }\n\n    sum /= vec4(stepsTraveled, stepsTraveled, stepsTraveled, 1.0);\n\n    gl_FragData[0] = getColorForValue(sum, posIS, tstep);\n  #endif\n}\n\n//=======================================================================\n// Compute a new start and end point for a given ray based\n// on the provided bounded clipping plane (aka a rectangle)\nvoid getRayPointIntersectionBounds(\n  vec3 rayPos, vec3 rayDir,\n  vec3 planeDir, float planeDist,\n  inout vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,\n  float vSize1, float vSize2)\n{\n  float result = dot(rayDir, planeDir);\n  if (result == 0.0)\n  {\n    return;\n  }\n  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;\n  vec3 xposVC = rayPos + rayDir*result;\n  vec3 vxpos = xposVC - vOriginVC;\n  vec2 vpos = vec2(\n    dot(vxpos, vPlaneX),\n    dot(vxpos, vPlaneY));\n\n  // on some apple nvidia systems this does not work\n  // if (vpos.x < 0.0 || vpos.x > vSize1 ||\n  //     vpos.y < 0.0 || vpos.y > vSize2)\n  // even just\n  // if (vpos.x < 0.0 || vpos.y < 0.0)\n  // fails\n  // so instead we compute a value that represents in and out\n  //and then compute the return using this value\n  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds\n  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out\n\n  tbounds = mix(\n   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value\n   tbounds, // out value\n   check);  // 0 in 1 out\n}\n\n//=======================================================================\n// given a\n// - ray direction (rayDir)\n// - starting point (vertexVCVSOutput)\n// - bounding planes of the volume\n// - optionally depth buffer values\n// - far clipping plane\n// compute the start/end distances of the ray we need to cast\nvec2 computeRayDistances(vec3 rayDir, vec3 tdims)\n{\n  vec2 dists = vec2(100.0*camFar, -1.0);\n\n  vec3 vSize = vSpacing*(tdims - 1.0);\n\n  // all this is in View Coordinates\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal0, vPlaneDistance0, dists, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal1, vPlaneDistance1, dists, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal2, vPlaneDistance2, dists, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal3, vPlaneDistance3, dists, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal4, vPlaneDistance4, dists, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal5, vPlaneDistance5, dists, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n\n  //VTK::ClipPlane::Impl\n\n  // do not go behind front clipping plane\n  dists.x = max(0.0,dists.x);\n\n  // do not go PAST far clipping plane\n  float farDist = -camThick/rayDir.z;\n  dists.y = min(farDist,dists.y);\n\n  // Do not go past the zbuffer value if set\n  // This is used for intermixing opaque geometry\n  //VTK::ZBuffer::Impl\n\n  return dists;\n}\n\n//=======================================================================\n// Compute the index space starting position (pos) and end\n// position\n//\nvoid computeIndexSpaceValues(out vec3 pos, out vec3 endPos, out float sampleDistanceIS, vec3 rayDir, vec2 dists)\n{\n  // compute starting and ending values in volume space\n  pos = vertexVCVSOutput + dists.x*rayDir;\n  pos = pos - vOriginVC;\n  // convert to volume basis and origin\n  pos = vec3(\n    dot(pos, vPlaneNormal0),\n    dot(pos, vPlaneNormal2),\n    dot(pos, vPlaneNormal4));\n\n  endPos = vertexVCVSOutput + dists.y*rayDir;\n  endPos = endPos - vOriginVC;\n  endPos = vec3(\n    dot(endPos, vPlaneNormal0),\n    dot(endPos, vPlaneNormal2),\n    dot(endPos, vPlaneNormal4));\n\n  float delta = length(endPos - pos);\n\n  pos *= vVCToIJK;\n  endPos *= vVCToIJK;\n\n  float delta2 = length(endPos - pos);\n  sampleDistanceIS = sampleDistance*delta2/delta;\n}\n\nvoid main()\n{\n\n  vec3 rayDirVC;\n\n  if (cameraParallel == 1)\n  {\n    // Camera is parallel, so the rayDir is just the direction of the camera.\n    rayDirVC = vec3(0.0, 0.0, -1.0);\n  } else {\n    // camera is at 0,0,0 so rayDir for perspective is just the vc coord\n    rayDirVC = normalize(vertexVCVSOutput);\n  }\n\n  vec3 tdims = vec3(volumeDimensions);\n\n  // compute the start and end points for the ray\n  vec2 rayStartEndDistancesVC = computeRayDistances(rayDirVC, tdims);\n\n  // do we need to composite? aka does the ray have any length\n  // If not, bail out early\n  if (rayStartEndDistancesVC.y <= rayStartEndDistancesVC.x)\n  {\n    discard;\n  }\n\n  // IS = Index Space\n  vec3 posIS;\n  vec3 endIS;\n  float sampleDistanceIS;\n  computeIndexSpaceValues(posIS, endIS, sampleDistanceIS, rayDirVC, rayStartEndDistancesVC);\n\n  // Perform the blending operation along the ray\n  applyBlend(posIS, endIS, sampleDistanceIS, tdims);\n}\n",e.Geometry=""},e.replaceShaderValues=function(n,r,a){var s=n.Fragment;a.getProperty().getInterpolationType()===io.LINEAR&&(s=ma.substitute(s,"//VTK::TrilinearOn","#define vtkTrilinearOn").result),!0===a.getProperty().getUseLabelOutline()&&(s=ma.substitute(s,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result);var i=t.scalarTexture.getComponents();s=ma.substitute(s,"//VTK::NumComponents","#define vtkNumComponents ".concat(i)).result;var o=a.getProperty().getIndependentComponents();if(o){s=ma.substitute(s,"//VTK::IndependentComponentsOn","#define vtkIndependentComponentsOn").result;for(var l=[],B=0;B<i;B++)a.getProperty().getOpacityMode(B)===oo.PROPORTIONAL&&l.push("#define vtkComponent".concat(B,"Proportional"));l.length>0&&(s=ma.substitute(s,"//VTK::vtkProportionalComponents",l.join("\n")).result)}var Q=t.currentInput.getExtent(),c=t.currentInput.getSpacing(),F=new Float64Array(3);Object(y.p)(F,(Q[1]-Q[0])*c[0],(Q[3]-Q[2])*c[1],(Q[5]-Q[4])*c[2]);var U=Object(y.j)(F)/t.renderable.getSampleDistance();s=ma.substitute(s,"//VTK::MaximumSamplesValue","".concat(Math.ceil(U))).result,s=ma.substitute(s,"//VTK::LightComplexity","#define vtkLightComplexity ".concat(t.lastLightComplexity)).result,t.gopacity=a.getProperty().getUseGradientOpacity(0);for(var g=1;o&&!t.gopacity&&g<i;++g)a.getProperty().getUseGradientOpacity(g)&&(t.gopacity=!0);t.gopacity&&(s=ma.substitute(s,"//VTK::GradientOpacityOn","#define vtkGradientOpacityOn").result),null!==t.zBufferTexture&&(s=ma.substitute(s,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpWidth;","uniform float vpHeight;"]).result,s=ma.substitute(s,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpWidth, gl_FragCoord.y/vpHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;","zdepth = -zdepth/rayDir.z;","dists.y = min(zdepth,dists.y);"]).result),s=ma.substitute(s,"//VTK::BlendMode","".concat(t.renderable.getBlendMode())).result;var d=t.renderable.getAverageIPScalarRange();s=ma.substitute(s,"//VTK::AverageIPScalarRangeMin","".concat(d[0],".0")).result,s=ma.substitute(s,"//VTK::AverageIPScalarRangeMax","".concat(d[1],".0")).result,n.Fragment=s,e.replaceShaderLight(n,r,a),e.replaceShaderClippingPlane(n,r,a)},e.replaceShaderLight=function(e,n,r){var a=e.Fragment;switch(t.lastLightComplexity){default:case 0:break;case 1:case 2:case 3:var s=0;n.getLights().forEach((function(e){e.getSwitch()>0&&(a=ma.substitute(a,"//VTK::Light::Dec",["uniform vec3 lightColor".concat(s,";"),"uniform vec3 lightDirectionVC".concat(s,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(s,"; // normalized"),"//VTK::Light::Dec"],!1).result,a=ma.substitute(a,"//VTK::Light::Impl",["  float df = abs(dot(normal.rgb, -lightDirectionVC".concat(s,"));"),"  diffuse += ((df".concat("",") * lightColor").concat(s,");"),"    float sf = pow( abs(dot(lightHalfAngleVC".concat(s,",normal.rgb)), vSpecularPower);"),"    specular += ((sf".concat("",") * lightColor").concat(s,");"),"  //VTK::Light::Impl"],!1).result,s++)}))}e.Fragment=a},e.replaceShaderClippingPlane=function(e,n,r){var a=e.Fragment;if(t.renderable.getClippingPlanes().length>0){var s=t.renderable.getClippingPlanes().length;a=ma.substitute(a,"//VTK::ClipPlane::Dec",["uniform vec3 vClipPlaneNormals[6];","uniform float vClipPlaneDistances[6];","//VTK::ClipPlane::Dec"],!1).result,a=ma.substitute(a,"//VTK::ClipPlane::Impl",["for(int i = 0; i < ".concat(s,"; i++) {"),"  float rayDirRatio = dot(rayDir, vClipPlaneNormals[i]);","  float equationResult = dot(vertexVCVSOutput, vClipPlaneNormals[i]) + vClipPlaneDistances[i];","  if (rayDirRatio == 0.0)","  {","    if (equationResult < 0.0) dists.x = dists.y;","    continue;","  }","  float result = -1.0 * equationResult / rayDirRatio;","  if (rayDirRatio < 0.0) dists.y = min(dists.y, result);","  else dists.x = max(dists.x, result);","}","//VTK::ClipPlane::Impl"],!1).result}e.Fragment=a},e.getNeedToRebuildShaders=function(n,r,a){var s=0;a.getProperty().getShade()&&t.renderable.getBlendMode()===Bo.COMPOSITE_BLEND&&(s=0,t.numberOfLights=0,r.getLights().forEach((function(e){e.getSwitch()>0&&(t.numberOfLights++,0===s&&(s=1)),1===s&&(t.numberOfLights>1||1!==e.getIntensity()||!e.lightTypeIsHeadLight())&&(s=2),s<3&&e.getPositional()&&(s=3)})));var i=!1;t.lastLightComplexity!==s&&(t.lastLightComplexity=s,i=!0);var o=t.scalarTexture.getComponents(),l=a.getProperty().getIndependentComponents(),B=!1,Q=[];if(l){for(var c=0;c<o;c++)Q.push(a.getProperty().getOpacityMode(c));Q.length>0&&(B=!0)}var F=t.currentInput.getExtent(),U=t.currentInput.getSpacing(),g=new Float64Array(3);Object(y.p)(g,(F[1]-F[0])*U[0],(F[3]-F[2])*U[1],(F[5]-F[4])*U[2]);var d=Object(y.j)(g)/t.renderable.getSampleDistance(),u={interpolationType:a.getProperty().getInterpolationType(),useLabelOutline:a.getProperty().getUseLabelOutline(),numComp:o,usesProportionalComponents:B,iComps:l,maxSamples:d,useGradientOpacity:a.getProperty().getUseGradientOpacity(0),blendMode:t.renderable.getBlendMode(),averageIPScalarMode:t.renderable.getAverageIPScalarRange(),proportionalComponents:Q};return t.previousState&&t.previousState.interpolationType===u.interpolationType&&t.previousState.useLabelOutline===u.useLabelOutline&&t.previousState.numComp===u.numComp&&t.previousState.usesProportionalComponents===u.usesProportionalComponents&&t.previousState.iComps===u.iComps&&t.previousState.maxSamples===u.maxSamples&&t.previousState.useGradientOpacity===u.useGradientOpacity&&t.previousState.blendMode===u.blendMode&&go(t.previousState.averageIPScalarMode,u.averageIPScalarMode)&&go(t.previousState.proportionalComponents,u.proportionalComponents)?!!(0===n.getProgram()||i||t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||!!t.lastZBufferTexture!=!!t.zBufferTexture||n.getShaderSourceTime().getMTime()<e.getMTime()||n.getShaderSourceTime().getMTime()<t.renderable.getMTime())&&(t.lastZBufferTexture=t.zBufferTexture,!0):(t.previousState=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u),!0)},e.updateShaders=function(n,r,a){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,a)){var s={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(s,r,a);var i=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);i!==n.getProgram()&&(n.setProgram(i),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,a),e.setCameraShaderParameters(n,r,a),e.setPropertyShaderParameters(n,r,a),e.getClippingPlaneShaderParameters(n,r,a)},e.setMapperShaderParameters=function(n,r,a){var s=n.getProgram();if(n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(s.isAttributeUsed("vertexDC")&&(n.getVAO().addAttributeArray(s,n.getCABO(),"vertexDC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Uo("Error setting vertexDC in shader VAO.")),n.getAttributeUpdateTime().modified()),s.setUniformi("texture1",t.scalarTexture.getTextureUnit()),s.setUniformf("sampleDistance",t.renderable.getSampleDistance()),null!==t.zBufferTexture){s.setUniformi("zBufferTexture",t.zBufferTexture.getTextureUnit());var i=e.getRenderTargetSize();s.setUniformf("vpWidth",i[0]),s.setUniformf("vpHeight",i[1])}},e.setCameraShaderParameters=function(n,r,a){var s=t.openGLCamera.getKeyMatrices(r),i=t.openGLVolume.getKeyMatrices();Object(b.l)(t.modelToView,s.wcvc,i.mcwc);var o=n.getProgram(),l=t.openGLCamera.getRenderable(),B=l.getClippingRange();o.setUniformf("camThick",B[1]-B[0]),o.setUniformf("camNear",B[0]),o.setUniformf("camFar",B[1]);for(var Q=t.currentInput.getBounds(),c=t.currentInput.getDimensions(),F=new Float64Array(3),U=new Float64Array(3),g=1,d=-1,u=1,I=-1,m=0;m<8;++m){if(Object(y.p)(F,Q[m%2],Q[2+Math.floor(m/2)%2],Q[4+Math.floor(m/4)]),Object(y.q)(F,F,t.modelToView),!l.getParallelProjection()){Object(y.l)(U,F);var C=-B[0]/F[2];Object(y.b)(F,U,C)}Object(y.q)(F,F,s.vcpc),g=Math.min(F[0],g),d=Math.max(F[0],d),u=Math.min(F[1],u),I=Math.max(F[1],I)}o.setUniformf("dcxmin",g),o.setUniformf("dcxmax",d),o.setUniformf("dcymin",u),o.setUniformf("dcymax",I),o.isUniformUsed("cameraParallel")&&o.setUniformi("cameraParallel",l.getParallelProjection());var S=t.currentInput.getExtent(),h=t.currentInput.getSpacing(),Z=new Float64Array(3);Object(y.p)(Z,(S[1]-S[0]+1)*h[0],(S[3]-S[2]+1)*h[1],(S[5]-S[4]+1)*h[2]),o.setUniform3f("vSpacing",h[0],h[1],h[2]),Object(y.p)(F,S[0],S[2],S[4]),t.currentInput.indexToWorldVec3(F,F),Object(y.q)(F,F,t.modelToView),o.setUniform3f("vOriginVC",F[0],F[1],F[2]);var x=t.currentInput.getIndexToWorld();Object(b.l)(t.idxToView,t.modelToView,x),mt(t.idxNormalMatrix,s.normalMatrix,i.normalMatrix),mt(t.idxNormalMatrix,t.idxNormalMatrix,t.currentInput.getDirection());var p=Object(y.j)(Z)/t.renderable.getSampleDistance();p>t.renderable.getMaximumSamplesPerRay()&&Fo("The number of steps required ".concat(Math.ceil(p)," is larger than the\n        specified maximum number of steps ").concat(t.renderable.getMaximumSamplesPerRay(),".\n        Please either change the\n        volumeMapper sampleDistance or its maximum number of samples."));var G=new Float64Array(3);if(Object(y.p)(G,1,1,1),Object(y.k)(G,G,Z),o.setUniform3f("vVCToIJK",G[0],G[1],G[2]),o.setUniform3i("volumeDimensions",c[0],c[1],c[2]),!t.openGLRenderWindow.getWebgl2()){var R=t.scalarTexture.getVolumeInfo();o.setUniformf("texWidth",t.scalarTexture.getWidth()),o.setUniformf("texHeight",t.scalarTexture.getHeight()),o.setUniformi("xreps",R.xreps),o.setUniformi("xstride",R.xstride),o.setUniformi("ystride",R.ystride)}for(var L=new Float64Array(3),V=new Float64Array(3),A=0;A<6;++A){switch(A){default:case 0:Object(y.p)(L,1,0,0),Object(y.p)(V,S[1],S[3],S[5]);break;case 1:Object(y.p)(L,-1,0,0),Object(y.p)(V,S[0],S[2],S[4]);break;case 2:Object(y.p)(L,0,1,0),Object(y.p)(V,S[1],S[3],S[5]);break;case 3:Object(y.p)(L,0,-1,0),Object(y.p)(V,S[0],S[2],S[4]);break;case 4:Object(y.p)(L,0,0,1),Object(y.p)(V,S[1],S[3],S[5]);break;case 5:Object(y.p)(L,0,0,-1),Object(y.p)(V,S[0],S[2],S[4])}Object(y.m)(L,L,t.idxNormalMatrix),Object(y.q)(V,V,t.idxToView);var f=-1*Object(y.d)(V,L);if(o.setUniform3f("vPlaneNormal".concat(A),L[0],L[1],L[2]),o.setUniformf("vPlaneDistance".concat(A),f),a.getProperty().getUseLabelOutline()){var N=t.currentInput.getWorldToIndex();o.setUniformMatrix("vWCtoIDX",N),Object(b.g)(t.projectionToWorld,s.wcpc),o.setUniformMatrix("PCWCMatrix",t.projectionToWorld);var E=e.getRenderTargetSize();o.setUniformf("vpWidth",E[0]),o.setUniformf("vpHeight",E[1])}}switch(Object(b.g)(t.projectionToView,s.vcpc),o.setUniformMatrix("PCVCMatrix",t.projectionToView),t.lastLightComplexity){default:case 0:break;case 1:case 2:case 3:var D=0,v=[];r.getLights().forEach((function(e){if(e.getSwitch()>0){var t=e.getColor(),n=e.getIntensity();v[0]=t[0]*n,v[1]=t[1]*n,v[2]=t[2]*n,o.setUniform3fArray("lightColor".concat(D),v);var r=e.getDirection();Object(y.p)(L,r[0],r[1],r[2]),Object(y.m)(L,L,s.normalMatrix),o.setUniform3f("lightDirectionVC".concat(D),L[0],L[1],L[2]);var a=[-.5*L[0],-.5*L[1],-.5*(L[2]-1)];o.setUniform3fArray("lightHalfAngleVC".concat(D),a),D++}}))}},e.setPropertyShaderParameters=function(e,n,r){var a=e.getProgram();a.setUniformi("ctexture",t.colorTexture.getTextureUnit()),a.setUniformi("otexture",t.opacityTexture.getTextureUnit()),a.setUniformi("jtexture",t.jitterTexture.getTextureUnit());var s=t.scalarTexture.getVolumeInfo(),i=r.getProperty(),o=t.scalarTexture.getComponents(),l=r.getProperty().getIndependentComponents();if(l&&o>=2)for(var B=0;B<o;B++)a.setUniformf("mix".concat(B),r.getProperty().getComponentWeight(B));for(var Q=0;Q<o;Q++){var c=l?Q:0,F=s.scale[Q],U=i.getScalarOpacity(c).getRange(),g=F/(U[1]-U[0]),d=(s.offset[Q]-U[0])/(U[1]-U[0]);a.setUniformf("oshift".concat(Q),d),a.setUniformf("oscale".concat(Q),g);var u=i.getRGBTransferFunction(c).getRange();a.setUniformf("cshift".concat(Q),(s.offset[Q]-u[0])/(u[1]-u[0])),a.setUniformf("cscale".concat(Q),F/(u[1]-u[0]))}if(t.gopacity)if(l)for(var I=0;I<o;++I){var m=s.scale[I];if(i.getUseGradientOpacity(I)){var C=i.getGradientOpacityMinimumOpacity(I),b=i.getGradientOpacityMaximumOpacity(I);a.setUniformf("gomin".concat(I),C),a.setUniformf("gomax".concat(I),b);var y=[i.getGradientOpacityMinimumValue(I),i.getGradientOpacityMaximumValue(I)];a.setUniformf("goscale".concat(I),m*(b-C)/(y[1]-y[0])),a.setUniformf("goshift".concat(I),-y[0]*(b-C)/(y[1]-y[0])+C)}else a.setUniformf("gomin".concat(I),1),a.setUniformf("gomax".concat(I),1),a.setUniformf("goscale".concat(I),0),a.setUniformf("goshift".concat(I),1)}else{var S=s.scale[o-1],h=i.getGradientOpacityMinimumOpacity(0),Z=i.getGradientOpacityMaximumOpacity(0);a.setUniformf("gomin0",h),a.setUniformf("gomax0",Z);var x=[i.getGradientOpacityMinimumValue(0),i.getGradientOpacityMaximumValue(0)];a.setUniformf("goscale0",S*(Z-h)/(x[1]-x[0])),a.setUniformf("goshift0",-x[0]*(Z-h)/(x[1]-x[0])+h)}if(!0===r.getProperty().getUseLabelOutline()){var p=r.getProperty().getLabelOutlineThickness();a.setUniformi("outlineThickness",p)}t.lastLightComplexity>0&&(a.setUniformf("vAmbient",i.getAmbient()),a.setUniformf("vDiffuse",i.getDiffuse()),a.setUniformf("vSpecular",i.getSpecular()),a.setUniformf("vSpecularPower",i.getSpecularPower()))},e.getClippingPlaneShaderParameters=function(e,n,r){if(t.renderable.getClippingPlanes().length>0){for(var a=t.openGLCamera.getKeyMatrices(n),s=[],i=[],o=t.renderable.getClippingPlanes(),l=o.length,B=0;B<l;++B){var Q=o[B].getNormal(),c=o[B].getOrigin();Object(y.m)(Q,Q,a.normalMatrix),Object(y.q)(c,c,a.wcvc);var F=-1*Object(y.d)(c,Q);s.push(Q[0]),s.push(Q[1]),s.push(Q[2]),i.push(F)}var U=e.getProgram();U.setUniform3fv("vClipPlaneNormals",s),U.setUniformfv("vClipPlaneDistances",i)}},e.getRenderTargetSize=function(){if(t.lastXYF>1.43){var e=t.framebuffer.getSize();return[t.fvp[0]*e[0],t.fvp[1]*e[1]]}return t.openGLRenderWindow.getFramebufferSize()},e.renderPieceStart=function(n,r){if(t.renderable.getAutoAdjustSampleDistances()){var a=n.getVTKWindow().getInteractor(),s=a.getLastFrameTime();if(t.avgFrameTime=.97*t.avgFrameTime+.03*s,t.avgWindowArea=.97*t.avgWindowArea+.03/(t.lastXYF*t.lastXYF),n.getVTKWindow().getInteractor().isAnimating()){var i=Math.sqrt(t.avgFrameTime*a.getDesiredUpdateRate()/t.avgWindowArea);i>10&&(i=10),t.targetXYF=i}else t.targetXYF=Math.sqrt(t.avgFrameTime*a.getStillUpdateRate()/t.avgWindowArea);t.targetXYF<1.53&&t.targetXYF>1.33&&(t.targetXYF=t.lastXYF),Math.abs(1-t.targetXYF/t.lastXYF)<.1&&(t.targetXYF=t.lastXYF),t.lastXYF=t.targetXYF}else t.lastXYF=t.renderable.getImageSampleDistance();t.lastXYF<=1.43&&(t.lastXYF=1);var o=t.lastXYF,l=t.openGLRenderWindow.getFramebufferSize();if(o>1.43){if(t.framebuffer.saveCurrentBindingsAndBuffers(),null===t.framebuffer.getGLFramebuffer())t.framebuffer.create(Math.floor(.7*l[0]),Math.floor(.7*l[1])),t.framebuffer.populateFramebuffer();else{var B=t.framebuffer.getSize();B[0]===Math.floor(.7*l[0])&&B[1]===Math.floor(.7*l[1])||(t.framebuffer.create(Math.floor(.7*l[0]),Math.floor(.7*l[1])),t.framebuffer.populateFramebuffer())}t.framebuffer.bind();var Q=t.context;Q.clearColor(0,0,0,0),Q.colorMask(!0,!0,!0,!0),Q.clear(Q.COLOR_BUFFER_BIT),Q.viewport(0,0,l[0]/o,l[1]/o),t.fvp=[Math.floor(l[0]/o)/Math.floor(.7*l[0]),Math.floor(l[1]/o)/Math.floor(.7*l[1])]}t.context.disable(t.context.DEPTH_TEST),e.updateBufferObjects(n,r),r.getProperty().getInterpolationType()===io.NEAREST?(t.scalarTexture.setMinificationFilter(Cn.NEAREST),t.scalarTexture.setMagnificationFilter(Cn.NEAREST)):(t.scalarTexture.setMinificationFilter(Cn.LINEAR),t.scalarTexture.setMagnificationFilter(Cn.LINEAR)),t.lastBoundBO=null,null!==t.zBufferTexture&&t.zBufferTexture.activate()},e.renderPieceDraw=function(n,r){var a=t.context;t.scalarTexture.activate(),t.opacityTexture.activate(),t.colorTexture.activate(),t.jitterTexture.activate(),e.updateShaders(t.tris,n,r),a.drawArrays(a.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.scalarTexture.deactivate(),t.colorTexture.deactivate(),t.opacityTexture.deactivate(),t.jitterTexture.deactivate()},e.renderPieceFinish=function(e,n){if(null!==t.zBufferTexture&&t.zBufferTexture.deactivate(),t.lastXYF>1.43){if(t.framebuffer.restorePreviousBindingsAndBuffers(),null===t.copyShader){t.copyShader=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join("\n"),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join("\n"),"");var r=t.copyShader;t.copyVAO=Ta.newInstance(),t.copyVAO.setOpenGLRenderWindow(t.openGLRenderWindow),t.tris.getCABO().bind(),t.copyVAO.addAttributeArray(r,t.tris.getCABO(),"vertexDC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Uo("Error setting vertexDC in copy shader VAO.")}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(t.copyShader);var a=t.openGLRenderWindow.getFramebufferSize();t.context.viewport(0,0,a[0],a[1]);var s=t.framebuffer.getColorTexture();s.activate(),t.copyShader.setUniformi("texture",s.getTextureUnit()),t.copyShader.setUniform2f("tfactor",t.fvp[0],t.fvp[1]);var i=t.context;i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),s.deactivate(),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)}},e.renderPiece=function(n,r){e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),t.currentInput?(e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)):Uo("No input!")},e.computeBounds=function(n,r){e.getInput()?t.bounds=e.getInput().getBounds():Object(u.D)(t.Bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,r){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<r.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<r.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(e,n){var r=t.currentInput;if(r){var a=r.getPointData()&&r.getPointData().getScalars();if(a){var i=n.getProperty();if(!t.jitterTexture.getHandle()){for(var o=new Uint8Array(1024),l=0;l<1024;++l)o[l]=255*Math.random();t.jitterTexture.setMinificationFilter(Cn.LINEAR),t.jitterTexture.setMagnificationFilter(Cn.LINEAR),t.jitterTexture.create2DFromRaw(32,32,1,D.b.UNSIGNED_CHAR,o)}var B=a.getNumberOfComponents(),Q=i.getIndependentComponents()?B:1,c="".concat(i.getMTime());if(t.opacityTextureString!==c){for(var F=1024,U=2048*Q,g=new Float32Array(U),d=new Float32Array(F),u=0;u<Q;++u){var I=i.getScalarOpacity(u),m=t.renderable.getSampleDistance()/i.getScalarOpacityUnitDistance(u),C=I.getRange();I.getTable(C[0],C[1],F,d,1);for(var b=0;b<F;++b)g[u*F*2+b]=1-Math.pow(1-d[b],m),g[u*F*2+b+F]=g[u*F*2+b]}if(t.opacityTexture.releaseGraphicsResources(t.openGLRenderWindow),t.opacityTexture.setMinificationFilter(Cn.LINEAR),t.opacityTexture.setMagnificationFilter(Cn.LINEAR),t.openGLRenderWindow.getWebgl2()||t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear"))t.opacityTexture.create2DFromRaw(F,2*Q,1,D.b.FLOAT,g);else{for(var y=new Uint8Array(U),S=0;S<U;++S)y[S]=255*g[S];t.opacityTexture.create2DFromRaw(F,2*Q,1,D.b.UNSIGNED_CHAR,y)}t.opacityTextureString=c}if(c="".concat(i.getMTime()),t.colorTextureString!==c){for(var h=1024,Z=new Uint8Array(2048*Q*3),x=new Float32Array(3072),p=0;p<Q;++p){var G=i.getRGBTransferFunction(p),R=G.getRange();G.getTable(R[0],R[1],h,x,1);for(var L=0;L<3072;++L)Z[p*h*6+L]=255*x[L],Z[p*h*6+L+3072]=255*x[L]}t.colorTexture.releaseGraphicsResources(t.openGLRenderWindow),t.colorTexture.setMinificationFilter(Cn.LINEAR),t.colorTexture.setMagnificationFilter(Cn.LINEAR),t.colorTexture.create2DFromRaw(h,2*Q,3,D.b.UNSIGNED_CHAR,Z),t.colorTextureString=c}if(c="".concat(r.getMTime()),t.scalarTextureString!==c){var V=r.getDimensions();t.scalarTexture.releaseGraphicsResources(t.openGLRenderWindow),t.scalarTexture.resetFormatAndType(),t.scalarTexture.create3DFilterableFromRaw(V[0],V[1],V[2],B,a.getDataType(),a.getData()),t.scalarTextureString=c}if(!t.tris.getCABO().getElementCount()){for(var A=new Float32Array(12),f=0;f<4;f++)A[3*f]=f%2*2-1,A[3*f+1]=f>1?1:-1,A[3*f+2]=-1;var N=new Uint16Array(8);N[0]=3,N[1]=0,N[2]=1,N[3]=3,N[4]=3,N[5]=0,N[6]=3,N[7]=2;var E=s.a.newInstance({numberOfComponents:3,values:A});E.setName("points");var v=s.a.newInstance({numberOfComponents:1,values:N});t.tris.getCABO().createVBO(v,"polys",rr.SURFACE,{points:E,cellOffset:0})}t.VBOBuildTime.modified()}}}}var Io={context:null,VBOBuildTime:null,scalarTexture:null,scalarTextureString:null,opacityTexture:null,opacityTextureString:null,colorTexture:null,colorTextureString:null,jitterTexture:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,lastLightComplexity:0,fullViewportTime:1,idxToView:null,idxNormalMatrix:null,modelToView:null,projectionToView:null,avgWindowArea:0,avgFrameTime:0};function mo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Io,n),an.extend(e,t,n),t.VBOBuildTime={},a.c.obj(t.VBOBuildTime,{mtime:0}),t.tris=Ya.newInstance(),t.scalarTexture=An.newInstance(),t.opacityTexture=An.newInstance(),t.colorTexture=An.newInstance(),t.jitterTexture=An.newInstance(),t.jitterTexture.setWrapS(mn.REPEAT),t.jitterTexture.setWrapT(mn.REPEAT),t.framebuffer=Dn.newInstance(),t.idxToView=Object(b.h)(new Float64Array(16)),t.idxNormalMatrix=dt(new Float64Array(9)),t.modelToView=Object(b.h)(new Float64Array(16)),t.projectionToView=Object(b.h)(new Float64Array(16)),t.projectionToWorld=Object(b.h)(new Float64Array(16)),a.c.setGet(e,t,["context"]),uo(e,t)}var Co={newInstance:a.c.newInstance(mo,"vtkOpenGLVolumeMapper"),extend:mo};function bo(e,t){t.overrides={},t.classHierarchy.push("vtkViewNodeFactory"),e.createNode=function(n){if(n.isDeleted())return null;for(var r=0,a=n.getClassName(r++),s=!1,i=Object.keys(t.overrides);a&&!s;)-1!==i.indexOf(a)?s=!0:a=n.getClassName(r++);if(!s)return null;var o=t.overrides[a]();return o.setMyFactory(e),o},e.registerOverride=function(e,n){t.overrides[e]=n}}var yo={};function So(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yo,n),a.c.obj(e,t),bo(e,t)}var ho={newInstance:a.c.newInstance(So,"vtkViewNodeFactory"),extend:So};function Zo(e,t){t.classHierarchy.push("vtkOpenGLViewNodeFactory")}var xo={};function po(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xo,n),ho.extend(e,t,n),Zo(0,t),e.registerOverride("vtkActor",zn.newInstance),e.registerOverride("vtkActor2D",_n.newInstance),e.registerOverride("vtkCamera",tr.newInstance),e.registerOverride("vtkGlyph3DMapper",Ds.newInstance),e.registerOverride("vtkImageMapper",Ys.newInstance),e.registerOverride("vtkImageSlice",Ks.newInstance),e.registerOverride("vtkMapper",os.newInstance),e.registerOverride("vtkPixelSpaceCallbackMapper",ei.newInstance),e.registerOverride("vtkRenderer",si.newInstance),e.registerOverride("vtkSkybox",Qi.newInstance),e.registerOverride("vtkSphereMapper",ui.newInstance),e.registerOverride("vtkStickMapper",Si.newInstance),e.registerOverride("vtkTexture",An.newInstance),e.registerOverride("vtkSurfaceLICMapper",to.newInstance),e.registerOverride("vtkVolume",so.newInstance),e.registerOverride("vtkVolumeMapper",Co.newInstance),e.registerOverride("vtkWidgetRepresentation",Mn.newInstance)}var Go={newInstance:a.c.newInstance(po,"vtkOpenGLViewNodeFactory"),extend:po},Ro=n(11),Lo=Object(Ro.d)((function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,r,a,s,i){return n((o=n(n(t,e),n(a,i)))<<(l=s)|o>>>32-l,r);var o,l}function a(e,t,n,a,s,i,o){return r(t&n|~t&a,e,t,s,i,o)}function s(e,t,n,a,s,i,o){return r(t&a|n&~a,e,t,s,i,o)}function i(e,t,n,a,s,i,o){return r(t^n^a,e,t,s,i,o)}function o(e,t,n,a,s,i,o){return r(n^(t|~a),e,t,s,i,o)}function l(e,t){var r,l,B,Q,c;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var F=1732584193,U=-271733879,g=-1732584194,d=271733878;for(r=0;r<e.length;r+=16)l=F,B=U,Q=g,c=d,F=a(F,U,g,d,e[r],7,-680876936),d=a(d,F,U,g,e[r+1],12,-389564586),g=a(g,d,F,U,e[r+2],17,606105819),U=a(U,g,d,F,e[r+3],22,-1044525330),F=a(F,U,g,d,e[r+4],7,-176418897),d=a(d,F,U,g,e[r+5],12,1200080426),g=a(g,d,F,U,e[r+6],17,-1473231341),U=a(U,g,d,F,e[r+7],22,-45705983),F=a(F,U,g,d,e[r+8],7,1770035416),d=a(d,F,U,g,e[r+9],12,-1958414417),g=a(g,d,F,U,e[r+10],17,-42063),U=a(U,g,d,F,e[r+11],22,-1990404162),F=a(F,U,g,d,e[r+12],7,1804603682),d=a(d,F,U,g,e[r+13],12,-40341101),g=a(g,d,F,U,e[r+14],17,-1502002290),F=s(F,U=a(U,g,d,F,e[r+15],22,1236535329),g,d,e[r+1],5,-165796510),d=s(d,F,U,g,e[r+6],9,-1069501632),g=s(g,d,F,U,e[r+11],14,643717713),U=s(U,g,d,F,e[r],20,-373897302),F=s(F,U,g,d,e[r+5],5,-701558691),d=s(d,F,U,g,e[r+10],9,38016083),g=s(g,d,F,U,e[r+15],14,-660478335),U=s(U,g,d,F,e[r+4],20,-405537848),F=s(F,U,g,d,e[r+9],5,568446438),d=s(d,F,U,g,e[r+14],9,-1019803690),g=s(g,d,F,U,e[r+3],14,-187363961),U=s(U,g,d,F,e[r+8],20,1163531501),F=s(F,U,g,d,e[r+13],5,-1444681467),d=s(d,F,U,g,e[r+2],9,-51403784),g=s(g,d,F,U,e[r+7],14,1735328473),F=i(F,U=s(U,g,d,F,e[r+12],20,-1926607734),g,d,e[r+5],4,-378558),d=i(d,F,U,g,e[r+8],11,-2022574463),g=i(g,d,F,U,e[r+11],16,1839030562),U=i(U,g,d,F,e[r+14],23,-35309556),F=i(F,U,g,d,e[r+1],4,-1530992060),d=i(d,F,U,g,e[r+4],11,1272893353),g=i(g,d,F,U,e[r+7],16,-155497632),U=i(U,g,d,F,e[r+10],23,-1094730640),F=i(F,U,g,d,e[r+13],4,681279174),d=i(d,F,U,g,e[r],11,-358537222),g=i(g,d,F,U,e[r+3],16,-722521979),U=i(U,g,d,F,e[r+6],23,76029189),F=i(F,U,g,d,e[r+9],4,-640364487),d=i(d,F,U,g,e[r+12],11,-421815835),g=i(g,d,F,U,e[r+15],16,530742520),F=o(F,U=i(U,g,d,F,e[r+2],23,-995338651),g,d,e[r],6,-198630844),d=o(d,F,U,g,e[r+7],10,1126891415),g=o(g,d,F,U,e[r+14],15,-1416354905),U=o(U,g,d,F,e[r+5],21,-57434055),F=o(F,U,g,d,e[r+12],6,1700485571),d=o(d,F,U,g,e[r+3],10,-1894986606),g=o(g,d,F,U,e[r+10],15,-1051523),U=o(U,g,d,F,e[r+1],21,-2054922799),F=o(F,U,g,d,e[r+8],6,1873313359),d=o(d,F,U,g,e[r+15],10,-30611744),g=o(g,d,F,U,e[r+6],15,-1560198380),U=o(U,g,d,F,e[r+13],21,1309151649),F=o(F,U,g,d,e[r+4],6,-145523070),d=o(d,F,U,g,e[r+11],10,-1120210379),g=o(g,d,F,U,e[r+2],15,718787259),U=o(U,g,d,F,e[r+9],21,-343485551),F=n(F,l),U=n(U,B),g=n(g,Q),d=n(d,c);return[F,U,g,d]}function B(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function Q(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function c(e){var t,n,r="0123456789abcdef",a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+=r.charAt(t>>>4&15)+r.charAt(15&t);return a}function F(e){return unescape(encodeURIComponent(e))}function U(e){return function(e){return B(l(Q(e),8*e.length))}(F(e))}function g(e,t){return function(e,t){var n,r,a=Q(e),s=[],i=[];for(s[15]=i[15]=void 0,a.length>16&&(a=l(a,8*e.length)),n=0;n<16;n+=1)s[n]=909522486^a[n],i[n]=1549556828^a[n];return r=l(s.concat(Q(t)),512+8*t.length),B(l(i.concat(r),640))}(F(e),F(t))}function d(e,t,n){return t?n?g(t,e):c(g(t,e)):n?U(e):c(U(e))}e.exports?e.exports=d:t.md5=d}(Ro.b)}),"/$$rollup_base$$/node_modules/blueimp-md5/js"),Vo=["lastShaderBound","context","openGLRenderWindow"];function Ao(e,t){t.classHierarchy.push("vtkShaderCache"),e.replaceShaderValues=function(e,n,r){var a=n;r.length>0&&(a=ma.substitute(a,"VSOut","GSOut").result);var s=t.openGLRenderWindow.getWebgl2(),i="\n",o="#version 100\n";s?o="#version 300 es\n#define attribute in\n#define textureCube texture\n#define texture2D texture\n#define textureCubeLod textureLod\n#define texture2DLod textureLod\n":(t.context.getExtension("OES_standard_derivatives"),t.context.getExtension("EXT_frag_depth")&&(i="#extension GL_EXT_frag_depth : enable\n"),t.context.getExtension("EXT_shader_texture_lod")&&(i+="#extension GL_EXT_shader_texture_lod : enable\n#define textureCubeLod textureCubeLodEXT\n#define texture2DLod texture2DLodEXT")),a=ma.substitute(a,"//VTK::System::Dec",["".concat(o,"\n"),s?"":"#extension GL_OES_standard_derivatives : enable\n",i,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;var l=ma.substitute(e,"//VTK::System::Dec",["".concat(o,"\n"),"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;return s&&(l=ma.substitute(l,"varying","out").result,a=ma.substitute(a,"varying","in").result,a=ma.substitute(a,"gl_FragData\\[0\\]","fragOutput0").result,a=ma.substitute(a,"//VTK::Output::Dec","layout(location = 0) out vec4 fragOutput0;").result),{VSSource:l,FSSource:a,GSSource:ma.substitute(r,"//VTK::System::Dec",o).result}},e.readyShaderProgramArray=function(t,n,r){var a=e.replaceShaderValues(t,n,r),s=e.getShaderProgram(a.VSSource,a.FSSource,a.GSSource);return e.readyShaderProgram(s)},e.readyShaderProgram=function(t){return t&&(t.getCompiled()||t.compileShader())&&e.bindShader(t)?t:null},e.getShaderProgram=function(e,n,r){var a="".concat(e).concat(n).concat(r),s=Lo(a);if(-1===Object.keys(t.shaderPrograms).indexOf(s)){var i=ma.newInstance();return i.setContext(t.context),i.getVertexShader().setSource(e),i.getFragmentShader().setSource(n),r&&i.getGeometryShader().setSource(r),i.setMd5Hash(s),t.shaderPrograms[s]=i,i}return t.shaderPrograms[s]},e.releaseGraphicsResources=function(n){e.releaseCurrentShader(),Object.keys(t.shaderPrograms).map((function(e){return t.shaderPrograms[e]})).forEach((function(e){return e.releaseGraphicsResources(n)}))},e.releaseGraphicsResources=function(){t.astShaderBound&&(t.lastShaderBound.release(),t.lastShaderBound=null)},e.bindShader=function(e){return t.lastShaderBound===e||(t.lastShaderBound&&t.lastShaderBound.release(),e.bind(),t.lastShaderBound=e),1}}var fo={lastShaderBound:null,shaderPrograms:null,context:null,openGLRenderWindow:null};function No(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(t,fo,n),t.shaderPrograms={},a.c.obj(e,t),a.c.setGet(e,t,Vo),Ao(e,t),Object.freeze(e)}var Eo={newInstance:a.c.newInstance(No,"vtkShaderCache"),extend:No},Do=a.c.vtkErrorMacro;function vo(e,t){t.classHierarchy.push("vtkOpenGLTextureUnitManager"),e.deleteTable=function(){for(var e=0;e<t.numberOfTextureUnits;++e)!0===t.textureUnits[e]&&Do("some texture units  were not properly released");t.textureUnits=[],t.numberOfTextureUnits=0},e.setContext=function(n){if(t.context!==n){if(0!==t.context&&e.deleteTable(),t.context=n,t.context){t.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(var r=0;r<t.numberOfTextureUnits;++r)t.textureUnits[r]=!1}e.modified()}},e.allocate=function(){for(var n=0;n<t.numberOfTextureUnits;n++)if(!e.isAllocated(n))return t.textureUnits[n]=!0,n;return-1},e.allocateUnit=function(n){return e.isAllocated(n)?-1:(t.textureUnits[n]=!0,n)},e.isAllocated=function(e){return t.textureUnits[e]},e.free=function(e){t.textureUnits[e]=!1}}var Jo={context:null,numberOfTextureUnits:0,textureUnits:0};function Wo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jo,n),a.c.obj(e,t),t.textureUnits=[],a.c.get(e,t,["numberOfTextureUnits"]),a.c.setGet(e,t,["context"]),vo(e,t)}var Xo={newInstance:a.c.newInstance(Wo,"vtkOpenGLTextureUnitManager"),extend:Wo},Ho=Object(Ro.f)(Object(Ro.d)((function(e,t){e.exports=function(){var e="undefined"!=typeof window?window:void 0!==Ro.b?Ro.b:"undefined"!=typeof self?self:{};var t=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},n=function(e,t){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]},r=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},a=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(t,n){!function(e,n){t.exports=n()}(0,(function(){var t,n,r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(e,t,n){return e+(t-e)*n},o=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),l=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),B=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),Q=function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}(),c=(t=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),n=t?parseInt(t[1],10):null,function(){return n}),F=function(){var e;return e=o()&&B()&&-1!==navigator.userAgent.indexOf("13_4"),function(){return e}}(),U=function(){var e=!1;if(65===c()){var t=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(t){var n=t[1].split("."),r=s(n,4),a=(r[0],r[1],r[2]),i=r[3];e=3325===parseInt(a,10)&&parseInt(i,10)<148}}return function(){return e}}(),g=function(){var e=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return e}}(),d=function(){var e=90==window.orientation||-90==window.orientation;return g()?!e:e},u=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},I=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},m=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},C=function(e,t,n,r){var a=e.createShader(e.VERTEX_SHADER);e.shaderSource(a,t),e.compileShader(a);var s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(s,n),e.compileShader(s);var i=e.createProgram();for(var o in e.attachShader(i,a),e.attachShader(i,s),r)e.bindAttribLocation(i,r[o],o);return e.linkProgram(i),e.deleteShader(a),e.deleteShader(s),i},b=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a="",s=0;s<r;s++)n[a=e.getActiveUniform(t,s).name.replace("[0]","")]=e.getUniformLocation(t,a);return n},y=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},S=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},h=function(e){if(o()){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(n)+"px",setTimeout((function(){e.style.width=t,e.style.height=n}),100)}window.canvas=e},Z=function(){var e=Math.PI/180,t=.25*Math.PI;function n(n,r,a,s){var i=Math.tan(r?r.upDegrees*e:t),o=Math.tan(r?r.downDegrees*e:t),l=Math.tan(r?r.leftDegrees*e:t),B=Math.tan(r?r.rightDegrees*e:t),Q=2/(l+B),c=2/(i+o);return n[0]=Q,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=c,n[6]=0,n[7]=0,n[8]=-(l-B)*Q*.5,n[9]=(i-o)*c*.5,n[10]=s/(a-s),n[11]=-1,n[12]=0,n[13]=0,n[14]=s*a/(a-s),n[15]=0,n}var r=new Float32Array([0,0,0,1]),a=new Float32Array([0,0,0]);function s(e,t,s,i,o,l){n(e,i||null,l.depthNear,l.depthFar),function(e,t,n){var r=t[0],a=t[1],s=t[2],i=t[3],o=r+r,l=a+a,B=s+s,Q=r*o,c=r*l,F=r*B,U=a*l,g=a*B,d=s*B,u=i*o,I=i*l,m=i*B;e[0]=1-(U+d),e[1]=c+m,e[2]=F-I,e[3]=0,e[4]=c-m,e[5]=1-(Q+d),e[6]=g+u,e[7]=0,e[8]=F+I,e[9]=g-u,e[10]=1-(Q+U),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1}(t,s.orientation||r,s.position||a),o&&function(e,t,n){var r,a,s,i,o,l,B,Q,c,F,U,g,d=n[0],u=n[1],I=n[2];t===e?(e[12]=t[0]*d+t[4]*u+t[8]*I+t[12],e[13]=t[1]*d+t[5]*u+t[9]*I+t[13],e[14]=t[2]*d+t[6]*u+t[10]*I+t[14],e[15]=t[3]*d+t[7]*u+t[11]*I+t[15]):(r=t[0],a=t[1],s=t[2],i=t[3],o=t[4],l=t[5],B=t[6],Q=t[7],c=t[8],F=t[9],U=t[10],g=t[11],e[0]=r,e[1]=a,e[2]=s,e[3]=i,e[4]=o,e[5]=l,e[6]=B,e[7]=Q,e[8]=c,e[9]=F,e[10]=U,e[11]=g,e[12]=r*d+o*u+c*I+t[12],e[13]=a*d+l*u+F*I+t[13],e[14]=s*d+B*u+U*I+t[14],e[15]=i*d+Q*u+g*I+t[15])}(t,t,o),function(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],i=t[4],o=t[5],l=t[6],B=t[7],Q=t[8],c=t[9],F=t[10],U=t[11],g=t[12],d=t[13],u=t[14],I=t[15],m=n*o-r*i,C=n*l-a*i,b=n*B-s*i,y=r*l-a*o,S=r*B-s*o,h=a*B-s*l,Z=Q*d-c*g,x=Q*u-F*g,p=Q*I-U*g,G=c*u-F*d,R=c*I-U*d,L=F*I-U*u,V=m*L-C*R+b*G+y*p-S*x+h*Z;V&&(V=1/V,e[0]=(o*L-l*R+B*G)*V,e[1]=(a*R-r*L-s*G)*V,e[2]=(d*h-u*S+I*y)*V,e[3]=(F*S-c*h-U*y)*V,e[4]=(l*p-i*L-B*x)*V,e[5]=(n*L-a*p+s*x)*V,e[6]=(u*b-g*h-I*C)*V,e[7]=(Q*h-F*b+U*C)*V,e[8]=(i*R-o*p+B*Z)*V,e[9]=(r*p-n*R-s*Z)*V,e[10]=(g*S-d*b+I*m)*V,e[11]=(c*b-Q*S-U*m)*V,e[12]=(o*x-i*G-l*Z)*V,e[13]=(n*G-r*x+a*Z)*V,e[14]=(d*C-g*y-u*m)*V,e[15]=(Q*y-c*C+F*m)*V)}(t,t)}return function(e,t,n){return!(!e||!t||(e.pose=t,e.timestamp=t.timestamp,s(e.leftProjectionMatrix,e.leftViewMatrix,t,n._getFieldOfView("left"),n._getEyeOffset("left"),n),s(e.rightProjectionMatrix,e.rightViewMatrix,t,n._getFieldOfView("right"),n._getEyeOffset("right"),n),0))}}(),x=function(e){var t,n=e.indexOf("://");t=-1!==n?n+3:0;var r=e.indexOf("/",t);return-1===r&&(r=e.length),e.substring(0,r)},p=(r={},function(e,t){void 0===r[e]&&(console.warn("webvr-polyfill: "+t),r[e]=!0)}),G=function(e,t){p(e,e+" has been deprecated. This may not work on native WebVR displays. "+(t?"Please use "+t+" instead.":""))};var R=function(e,t,n){if(t){for(var r=[],a=null,s=0;s<t.length;++s)switch(i=t[s]){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:if((l=t[++s])<e.TEXTURE0||l>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),r.push(null,null);break}a||(a=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(l),r.push(e.getParameter(i),null);break;case e.ACTIVE_TEXTURE:a=e.getParameter(e.ACTIVE_TEXTURE),r.push(null);break;default:r.push(e.getParameter(i))}for(n(e),s=0;s<t.length;++s){var i=t[s],o=r[s];switch(i){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,o);break;case e.COLOR_CLEAR_VALUE:e.clearColor(o[0],o[1],o[2],o[3]);break;case e.COLOR_WRITEMASK:e.colorMask(o[0],o[1],o[2],o[3]);break;case e.CURRENT_PROGRAM:e.useProgram(o);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,o);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,o);break;case e.TEXTURE_BINDING_2D:if((l=t[++s])<e.TEXTURE0||l>e.TEXTURE31)break;e.activeTexture(l),e.bindTexture(e.TEXTURE_2D,o);break;case e.TEXTURE_BINDING_CUBE_MAP:var l;if((l=t[++s])<e.TEXTURE0||l>e.TEXTURE31)break;e.activeTexture(l),e.bindTexture(e.TEXTURE_CUBE_MAP,o);break;case e.VIEWPORT:e.viewport(o[0],o[1],o[2],o[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:o?e.enable(i):e.disable(i);break;default:console.log("No GL restore behavior for 0x"+i.toString(16))}a&&e.activeTexture(a)}}else n(e)},L=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),V=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function A(e,t,n,r){this.gl=e,this.cardboardUI=t,this.bufferScale=n,this.dirtySubmitFrameBindings=r,this.ctxAttribs=e.getContextAttributes(),this.instanceExt=e.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,o()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=C(e,L,V,this.attribs),this.uniforms=b(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize()}A.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},A.prototype.onResize=function(){var e=this.gl,t=this,n=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];R(e,n,(function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},A.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,n=this.gl;o()||(t.width=u()*this.bufferScale,t.height=I()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(n){e.bufferWidth=n,e.realCanvasWidth.set.call(t,n),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(n){e.bufferHeight=n,e.realCanvasHeight.set.call(t,n),e.onResize()}})),this.lastBoundFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,r){e.lastBoundFramebuffer=r||e.framebuffer,e.realBindFramebuffer.call(n,t,e.lastBoundFramebuffer)},this.cullFace=n.getParameter(n.CULL_FACE),this.depthTest=n.getParameter(n.DEPTH_TEST),this.blend=n.getParameter(n.BLEND),this.scissorTest=n.getParameter(n.SCISSOR_TEST),this.stencilTest=n.getParameter(n.STENCIL_TEST),n.enable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!0;break;case n.DEPTH_TEST:e.depthTest=!0;break;case n.BLEND:e.blend=!0;break;case n.SCISSOR_TEST:e.scissorTest=!0;break;case n.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(n,t)},n.disable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!1;break;case n.DEPTH_TEST:e.depthTest=!1;break;case n.BLEND:e.blend=!1;break;case n.SCISSOR_TEST:e.scissorTest=!1;break;case n.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(n,t)},this.colorMask=n.getParameter(n.COLOR_WRITEMASK),n.colorMask=function(t,r,a,s){e.colorMask[0]=t,e.colorMask[1]=r,e.colorMask[2]=a,e.colorMask[3]=s,e.realColorMask.call(n,t,r,a,s)},this.clearColor=n.getParameter(n.COLOR_CLEAR_VALUE),n.clearColor=function(t,r,a,s){e.clearColor[0]=t,e.clearColor[1]=r,e.clearColor[2]=a,e.clearColor[3]=s,e.realClearColor.call(n,t,r,a,s)},this.viewport=n.getParameter(n.VIEWPORT),n.viewport=function(t,r,a,s){e.viewport[0]=t,e.viewport[1]=r,e.viewport[2]=a,e.viewport[3]=s,e.realViewport.call(n,t,r,a,s)},this.isPatched=!0,h(t)}},A.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;o()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout((function(){h(t)}),1)}},A.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},A.prototype.submitFrame=function(){var e=this.gl,t=this,n=[];if(this.dirtySubmitFrameBindings||n.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),R(e,n,(function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null);var n=0,r=0;t.instanceExt&&(n=e.getVertexAttrib(t.attribs.position,t.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),r=e.getVertexAttrib(t.attribs.texCoord,t.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||o())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),t.instanceExt&&(0!=n&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.position,0),0!=r&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.texCoord,0)),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.dirtySubmitFrameBindings||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor),t.instanceExt&&(0!=n&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.position,n),0!=r&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.texCoord,r))})),o()){var r=e.canvas;r.width==t.bufferWidth&&r.height==t.bufferHeight||(t.bufferWidth=r.width,t.bufferHeight=r.height,t.onResize())}},A.prototype.updateDeviceInfo=function(e){var t=this.gl,n=this,r=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];R(t,r,(function(t){var r=n.computeMeshVertices_(n.meshWidth,n.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,n.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),!n.indexCount){var a=n.computeMeshIndices_(n.meshWidth,n.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,a,t.STATIC_DRAW),n.indexCount=a.length}}))},A.prototype.computeMeshVertices_=function(e,t,n){for(var r=new Float32Array(2*e*t*5),a=n.getLeftEyeVisibleTanAngles(),s=n.getLeftEyeNoLensTanAngles(),o=n.getLeftEyeVisibleScreenRect(s),l=0,B=0;B<2;B++){for(var Q=0;Q<t;Q++)for(var c=0;c<e;c++,l++){var F=c/(e-1),U=Q/(t-1),g=F,d=U,u=i(a[0],a[2],F),I=i(a[3],a[1],U),m=Math.sqrt(u*u+I*I),C=n.distortion.distortInverse(m),b=I*C/m;F=(u*C/m-s[0])/(s[2]-s[0]),U=(b-s[3])/(s[1]-s[3]),F=2*(o.x+F*o.width-.5),U=2*(o.y+U*o.height-.5),r[5*l+0]=F,r[5*l+1]=U,r[5*l+2]=g,r[5*l+3]=d,r[5*l+4]=B}var y=a[2]-a[0];a[0]=-(y+a[0]),a[2]=y-a[2],y=s[2]-s[0],s[0]=-(y+s[0]),s[2]=y-s[2],o.x=1-(o.x+o.width)}return r},A.prototype.computeMeshIndices_=function(e,t){for(var n=new Uint16Array(2*(e-1)*(t-1)*6),r=e/2,a=t/2,s=0,i=0,o=0;o<2;o++)for(var l=0;l<t;l++)for(var B=0;B<e;B++,s++)0!=B&&0!=l&&(B<=r==l<=a?(n[i++]=s,n[i++]=s-e-1,n[i++]=s-e,n[i++]=s-e-1,n[i++]=s,n[i++]=s-1):(n[i++]=s-1,n[i++]=s-e,n[i++]=s,n[i++]=s-e,n[i++]=s-1,n[i++]=s-e-1));return n},A.prototype.getOwnPropertyDescriptor_=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return void 0!==n.get&&void 0!==n.set||(n.configurable=!0,n.enumerable=!0,n.get=function(){return this.getAttribute(t)},n.set=function(e){this.setAttribute(t,e)}),n};var f=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),N=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),E=Math.PI/180,D=.3125,v=28;function J(e){this.gl=e,this.attribs={position:0},this.program=C(e,f,N,this.attribs),this.uniforms=b(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function W(e){this.coefficients=e}J.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},J.prototype.listen=function(e,t){var n=this.gl.canvas;this.listener=function(r){var a=n.clientWidth/2;r.clientX>a-42&&r.clientX<a+42&&r.clientY>n.clientHeight-42?e(r):r.clientX<42&&r.clientY<42&&t(r)},n.addEventListener("click",this.listener,!1)},J.prototype.onResize=function(){var e=this.gl,t=this,n=[e.ARRAY_BUFFER_BINDING];R(e,n,(function(e){var n=[],r=e.drawingBufferWidth/2,a=Math.max(screen.width,screen.height)*window.devicePixelRatio,s=e.drawingBufferWidth/a*window.devicePixelRatio,i=4*s/2,o=42*s,l=v*s/2,B=14*s;function Q(e,t){var a=(90-e)*E,s=Math.cos(a),i=Math.sin(a);n.push(D*s*l+r,D*i*l+l),n.push(t*s*l+r,t*i*l+l)}n.push(r-i,o),n.push(r-i,e.drawingBufferHeight),n.push(r+i,o),n.push(r+i,e.drawingBufferHeight),t.gearOffset=n.length/2;for(var c=0;c<=6;c++){var F=60*c;Q(F,1),Q(F+12,1),Q(F+20,.75),Q(F+40,.75),Q(F+48,1)}function U(t,r){n.push(B+t,e.drawingBufferHeight-B-r)}t.gearVertexCount=n.length/2-t.gearOffset,t.arrowOffset=n.length/2;var g=i/Math.sin(45*E);U(0,l),U(l,0),U(l+g,g),U(g,l+g),U(g,l-g),U(0,l),U(l,2*l),U(l+g,2*l-g),U(g,l-g),U(0,l),U(g,l-i),U(v*s,l-i),U(g,l+i),U(v*s,l+i),t.arrowVertexCount=n.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW)}))},J.prototype.render=function(){var e=this.gl,t=this,n=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];R(e,n,(function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()}))},J.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),function(e,t,n,r,a,s,i){var o=1/(t-n),l=1/(r-a),B=1/(s-i);e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*B,e[11]=0,e[12]=(t+n)*o,e[13]=(a+r)*l,e[14]=(i+s)*B,e[15]=1}(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},W.prototype.distortInverse=function(e){for(var t=0,n=1,r=e-this.distort(t);Math.abs(n-t)>1e-4;){var a=e-this.distort(n),s=n-a*((n-t)/(a-r));t=n,n=s,r=a}return n},W.prototype.distort=function(e){for(var t=e*e,n=0,r=0;r<this.coefficients.length;r++)n=t*(n+this.coefficients[r]);return(n+1)*e};var X=Math.PI/180,H=180/Math.PI,T=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0};T.prototype={constructor:T,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,a=e.x,s=e.y,i=e.z,o=e.w,l=o*t+s*r-i*n,B=o*n+i*t-a*r,Q=o*r+a*n-s*t,c=-a*t-s*n-i*r;return this.x=l*o+c*-a+B*-i-Q*-s,this.y=B*o+c*-s+Q*-a-l*-i,this.z=Q*o+c*-i+l*-s-B*-a,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var n=e.x,r=e.y,a=e.z,s=t.x,i=t.y,o=t.z;return this.x=r*o-a*i,this.y=a*s-n*o,this.z=n*i-r*s,this}};var k,M,w=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1};function Y(e){this.width=e.width||u(),this.height=e.height||I(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}w.prototype={constructor:w,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,n){var r=Math.cos(e/2),a=Math.cos(t/2),s=Math.cos(n/2),i=Math.sin(e/2),o=Math.sin(t/2),l=Math.sin(n/2);return this.x=i*a*s+r*o*l,this.y=r*o*s-i*a*l,this.z=r*a*l+i*o*s,this.w=r*a*s-i*o*l,this},setFromEulerYXZ:function(e,t,n){var r=Math.cos(e/2),a=Math.cos(t/2),s=Math.cos(n/2),i=Math.sin(e/2),o=Math.sin(t/2),l=Math.sin(n/2);return this.x=i*a*s+r*o*l,this.y=r*o*s-i*a*l,this.z=r*a*l-i*o*s,this.w=r*a*s+i*o*l,this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e.x,r=e.y,a=e.z,s=e.w,i=t.x,o=t.y,l=t.z,B=t.w;return this.x=n*B+s*i+r*l-a*o,this.y=r*B+s*o+a*i-n*l,this.z=a*B+s*l+n*o-r*i,this.w=s*B-n*i-r*o-a*l,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this.x,r=this.y,a=this.z,s=this.w,i=s*e.w+n*e.x+r*e.y+a*e.z;if(i<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,i=-i):this.copy(e),i>=1)return this.w=s,this.x=n,this.y=r,this.z=a,this;var o=Math.acos(i),l=Math.sqrt(1-i*i);if(Math.abs(l)<.001)return this.w=.5*(s+this.w),this.x=.5*(n+this.x),this.y=.5*(r+this.y),this.z=.5*(a+this.z),this;var B=Math.sin((1-t)*o)/l,Q=Math.sin(t*o)/l;return this.w=s*B+this.w*Q,this.x=n*B+this.x*Q,this.y=r*B+this.y*Q,this.z=a*B+this.z*Q,this},setFromUnitVectors:(1e-6,function(e,t){return void 0===k&&(k=new T),(M=e.dot(t)+1)<1e-6?(M=0,Math.abs(e.x)>Math.abs(e.z)?k.set(-e.y,e.x,0):k.set(0,-e.z,e.y)):k.crossVectors(e,t),this.x=k.x,this.y=k.y,this.z=k.z,this.w=M,this.normalize(),this})};var O=new Y({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),z=new Y({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),P={CardboardV1:new j({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new j({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function K(e,t){this.viewer=P.CardboardV2,this.updateDeviceParams(e),this.distortion=new W(this.viewer.distortionCoefficients);for(var n=0;n<t.length;n++){var r=t[n];P[r.id]=new j(r)}}function j(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}K.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},K.prototype.getDevice=function(){return this.device},K.prototype.setViewer=function(e){this.viewer=e,this.distortion=new W(this.viewer.distortionCoefficients)},K.prototype.determineDevice_=function(e){if(!e)return o()?(console.warn("Using fallback iOS device measurements."),z):(console.warn("Using fallback Android device measurements."),O);var t=.0254,n=t/e.xdpi,r=t/e.ydpi;return new Y({widthMeters:n*u(),heightMeters:r*I(),bevelMeters:.001*e.bevelMm})},K.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,a=(t.widthMeters-e.interLensDistance)/2,s=e.interLensDistance/2,i=e.baselineLensDistance-t.bevelMeters,o=t.heightMeters-i,l=H*Math.atan(n.distort(a/r)),B=H*Math.atan(n.distort(s/r)),Q=H*Math.atan(n.distort(i/r)),c=H*Math.atan(n.distort(o/r));return{leftDegrees:Math.min(l,e.fov),rightDegrees:Math.min(B,e.fov),downDegrees:Math.min(Q,e.fov),upDegrees:Math.min(c,e.fov)}},K.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=Math.tan(-X*e.fov),a=Math.tan(X*e.fov),s=Math.tan(X*e.fov),i=Math.tan(-X*e.fov),o=t.widthMeters/4,l=t.heightMeters/2,B=e.baselineLensDistance-t.bevelMeters-l,Q=e.interLensDistance/2-o,c=-B,F=e.screenLensDistance,U=n.distort((Q-o)/F),g=n.distort((c+l)/F),d=n.distort((Q+o)/F),u=n.distort((c-l)/F),I=new Float32Array(4);return I[0]=Math.max(r,U),I[1]=Math.min(a,g),I[2]=Math.min(s,d),I[3]=Math.max(i,u),I},K.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=new Float32Array(4),a=n.distortInverse(Math.tan(-X*e.fov)),s=n.distortInverse(Math.tan(X*e.fov)),i=n.distortInverse(Math.tan(X*e.fov)),o=n.distortInverse(Math.tan(-X*e.fov)),l=t.widthMeters/4,B=t.heightMeters/2,Q=e.baselineLensDistance-t.bevelMeters-B,c=e.interLensDistance/2-l,F=-Q,U=e.screenLensDistance,g=(c-l)/U,d=(F+B)/U,u=(c+l)/U,I=(F-B)/U;return r[0]=Math.max(a,g),r[1]=Math.min(s,d),r[2]=Math.min(i,u),r[3]=Math.max(o,I),r},K.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,n=this.device,r=t.screenLensDistance,a=(n.widthMeters-t.interLensDistance)/2,s=t.baselineLensDistance-n.bevelMeters,i=(e[0]*r+a)/n.widthMeters,o=(e[1]*r+s)/n.heightMeters,l=(e[2]*r+a)/n.widthMeters,B=(e[3]*r+s)/n.heightMeters;return{x:i,y:B,width:l-i,height:o-B}},K.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},K.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},K.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:H*Math.atan(e.outerDist),rightDegrees:H*Math.atan(e.innerDist),downDegrees:H*Math.atan(e.bottomDist),upDegrees:H*Math.atan(e.topDist)}},K.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,n=this.device,r=t.screenLensDistance,a=n.widthMeters/r,s=n.heightMeters/r,i=n.width/a,o=n.height/s,l=Math.round((e.eyePosX-e.outerDist)*i),B=Math.round((e.eyePosY-e.bottomDist)*o);return{x:l,y:B,width:Math.round((e.eyePosX+e.innerDist)*i)-l,height:Math.round((e.eyePosY+e.topDist)*o)-B}},K.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,a=e.interLensDistance/2/r,s=t.widthMeters/r,i=t.heightMeters/r,o=s/2-a,l=(e.baselineLensDistance-t.bevelMeters)/r,B=e.fov,Q=n.distortInverse(Math.tan(X*B)),c=Math.min(o,Q),F=Math.min(a,Q),U=Math.min(l,Q);return{outerDist:c,innerDist:F,topDist:Math.min(i-l,Q),bottomDist:U,eyePosX:o,eyePosY:l}},K.Viewers=P;var _={format:1,last_updated:"2019-11-09T17:36:14Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}]};function q(e,t){if(this.dpdb=_,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var n=new XMLHttpRequest,r=this;n.open("GET",e,!0),n.addEventListener("load",(function(){r.loading=!1,n.status>=200&&n.status<=299?(r.dpdb=JSON.parse(n.response),r.recalculateDeviceParams_()):console.error("Error loading online DPDB!")})),n.send()}}function $(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}function ee(e,t){this.set(e,t)}function te(e,t){this.kFilter=e,this.isDebug=t,this.currentAccelMeasurement=new ee,this.currentGyroMeasurement=new ee,this.previousGyroMeasurement=new ee,o()?this.filterQ=new w(-1,0,0,1):this.filterQ=new w(1,0,0,1),this.previousFilterQ=new w,this.previousFilterQ.copy(this.filterQ),this.accelQ=new w,this.isOrientationInitialized=!1,this.estimatedGravity=new T,this.measuredGravity=new T,this.gyroIntegralQ=new w}function ne(e,t){this.predictionTimeS=e,this.isDebug=t,this.previousQ=new w,this.previousTimestampS=null,this.deltaQ=new w,this.outQ=new w}function re(e,t,n,r){this.yawOnly=n,this.accelerometer=new T,this.gyroscope=new T,this.filter=new te(e,r),this.posePredictor=new ne(t,r),this.isFirefoxAndroid=Q(),this.isIOS=o();var a=c();this.isDeviceMotionInRadians=!this.isIOS&&a&&a<66,this.isWithoutDeviceMotion=U()||F(),this.filterToWorldQ=new w,o()?this.filterToWorldQ.setFromAxisAngle(new T(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new T(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new w,this.worldToScreenQ=new w,this.originalPoseAdjustQ=new w,this.originalPoseAdjustQ.setFromAxisAngle(new T(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),d()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new w,this.orientationOut_=new Float32Array(4),this.start()}q.prototype.getDeviceParams=function(){return this.deviceParams},q.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},q.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,n=u(),r=I();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var a=0;a<e.devices.length;a++){var s=e.devices[a];if(s.rules)if("ios"==s.type||"android"==s.type){if(o()==("ios"==s.type)){for(var i=!1,l=0;l<s.rules.length;l++){var B=s.rules[l];if(this.ruleMatches_(B,t,n,r)){i=!0;break}}if(i)return new $({xdpi:s.dpi[0]||s.dpi,ydpi:s.dpi[1]||s.dpi,bevelMm:s.bw})}}else console.warn("Device["+a+"] has invalid type.");else console.warn("Device["+a+"] has no rules section.")}return console.warn("No DPDB device match."),null},q.prototype.ruleMatches_=function(e,t,n,r){if(!e.ua&&!e.res)return!1;if(e.ua&&"SM"===e.ua.substring(0,2)&&(e.ua=e.ua.substring(0,7)),e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var a=e.res[0],s=e.res[1];if(Math.min(n,r)!=Math.min(a,s)||Math.max(n,r)!=Math.max(a,s))return!1}return!0},ee.prototype.set=function(e,t){this.sample=e,this.timestampS=t},ee.prototype.copy=function(e){this.set(e.sample,e.timestampS)},te.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},te.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t),function(e){return!(isNaN(e)||e<=.001||e>1)}(t-this.previousGyroMeasurement.timestampS)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},te.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var n=new w;n.copy(this.filterQ),n.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(n),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var r=new w;r.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),r.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",H*function(e){return e.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(e.w)}(r),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var a=new w;a.copy(this.filterQ),a.multiply(r),this.filterQ.slerp(a,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},te.prototype.getOrientation=function(){return this.filterQ},te.prototype.accelToQuaternion_=function(e){var t=new T;t.copy(e),t.normalize();var n=new w;return n.setFromUnitVectors(new T(0,0,-1),t),n.inverse(),n},te.prototype.gyroToQuaternionDelta_=function(e,t){var n=new w,r=new T;return r.copy(e),r.normalize(),n.setFromAxisAngle(r,e.length()*t),n},ne.prototype.getPrediction=function(e,t,n){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=n,e;var r=new T;r.copy(t),r.normalize();var a=t.length();if(a<20*X)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(H*a).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var s=a*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(r,s),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=n,this.outQ},re.prototype.getPosition=function(){return null},re.prototype.getOrientation=function(){var e=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(n=(new w).setFromAxisAngle(new T(0,0,-1),0),r=new w,-90===window.orientation?r.setFromAxisAngle(new T(0,1,0),Math.PI/-2):r.setFromAxisAngle(new T(0,1,0),Math.PI/2),n.multiply(r)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((t=new w).setFromAxisAngle(new T(1,0,0),-Math.PI/2),t),e=this._deviceOrientationQ,(a=new w).copy(e),a.multiply(this.deviceOrientationFilterToWorldQ),a.multiply(this.resetQ),a.multiply(this.worldToScreenQ),a.multiplyQuaternions(this.deviceOrientationFixQ,a),this.yawOnly&&(a.x=0,a.z=0,a.normalize()),this.orientationOut_[0]=a.x,this.orientationOut_[1]=a.y,this.orientationOut_[2]=a.z,this.orientationOut_[3]=a.w,this.orientationOut_;var t,n,r,a,s=this.filter.getOrientation();return e=this.posePredictor.getPrediction(s,this.gyroscope,this.previousTimestampS),(a=new w).copy(this.filterToWorldQ),a.multiply(this.resetQ),a.multiply(e),a.multiply(this.worldToScreenQ),this.yawOnly&&(a.x=0,a.z=0,a.normalize()),this.orientationOut_[0]=a.x,this.orientationOut_[1]=a.y,this.orientationOut_[2]=a.z,this.orientationOut_[3]=a.w,this.orientationOut_},re.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),d()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},re.prototype.onDeviceOrientation_=function(e){this._deviceOrientationQ=this._deviceOrientationQ||new w;var t=e.alpha,n=e.beta,r=e.gamma;t=(t||0)*Math.PI/180,n=(n||0)*Math.PI/180,r=(r||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(n,t,-r)},re.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},re.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,n=e.rotationRate,r=e.timeStamp/1e3,a=r-this.previousTimestampS;return a<0?(p("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=r)):a<=.001||a>1?(p("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=r)):(this.accelerometer.set(-t.x,-t.y,-t.z),n&&(g()?this.gyroscope.set(-n.beta,n.alpha,n.gamma):this.gyroscope.set(n.alpha,n.beta,n.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,r)),this.filter.addAccelMeasurement(this.accelerometer,r),void(this.previousTimestampS=r))},re.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},re.prototype.onMessage_=function(e){var t=e.data;t&&t.type&&"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)},re.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new T(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new T(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},re.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),o()&&function(){var e=window.self!==window.top,t=x(document.referrer),n=x(window.location.href);return e&&t!==n}()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},re.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var ae=new T(1,0,0),se=new T(0,0,1),ie=new w;ie.setFromAxisAngle(ae,-Math.PI/2),ie.multiply((new w).setFromAxisAngle(se,Math.PI/2));var oe=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.config=t,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new w,this._outQ=new w,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return a(e,[{key:"init",value:function(){var e=null;try{(e=new RelativeOrientationSensor({frequency:60,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(e){this.errors.push(e),"SecurityError"===e.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===e.name?this.useDeviceMotion():console.error(e)}e&&(this.api="sensor",this.sensor=e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new re(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var e=this.sensor.quaternion;this._sensorQ.set(e[0],e[1],e[2],e[3]);var t=this._outQ;return t.copy(ie),t.multiply(this._sensorQ),this.config.YAW_ONLY&&(t.x=t.z=0,t.normalize()),this._out[0]=t.x,this._out[1]=t.y,this._out[2]=t.z,this._out[3]=t.w,this._out}},{key:"_onSensorError",value:function(e){this.errors.push(e.error),"NotAllowedError"===e.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===e.error.name?console.error("Sensor could not be read"):console.error(e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),e}();function le(){this.loadIcon_();var e=document.createElement("div");(s=e.style).position="fixed",s.top=0,s.right=0,s.bottom=0,s.left=0,s.backgroundColor="gray",s.fontFamily="sans-serif",s.zIndex=1e6;var t=document.createElement("img");t.src=this.icon,(s=t.style).marginLeft="25%",s.marginTop="25%",s.width="50%",e.appendChild(t);var n=document.createElement("div");(s=n.style).textAlign="center",s.fontSize="16px",s.lineHeight="24px",s.margin="24px 25%",s.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(n);var r=document.createElement("div");(s=r.style).backgroundColor="#CFD8DC",s.position="fixed",s.bottom=0,s.width="100%",s.height="48px",s.padding="14px 24px",s.boxSizing="border-box",s.color="#656A6B",e.appendChild(r);var a=document.createElement("div");a.style.float="left",a.innerHTML="No Cardboard viewer?";var s,i=document.createElement("a");i.href="https://www.google.com/get/cardboard/get-cardboard/",i.innerHTML="get one",i.target="_blank",(s=i.style).float="right",s.fontWeight=600,s.textTransform="uppercase",s.borderLeft="1px solid gray",s.paddingLeft="24px",s.textDecoration="none",s.color="#656A6B",r.appendChild(a),r.appendChild(i),this.overlay=e,this.text=n,this.hide()}le.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img").style;d()?(t.width="20%",t.marginLeft="40%",t.marginTop="3%"):(t.width="50%",t.marginLeft="25%",t.marginTop="25%")},le.prototype.hide=function(){this.overlay.style.display="none"},le.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},le.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},le.prototype.update=function(){this.disableShowTemporarily(),!d()&&y()?this.show():this.hide()},le.prototype.loadIcon_=function(){this.icon=function(e,t){return"data:"+e+","+encodeURIComponent(t)}("image/svg+xml","<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>")};var Be="WEBVR_CARDBOARD_VIEWER";function Qe(e){try{this.selectedKey=localStorage.getItem(Be)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=e||"CardboardV1"),this.dialog=this.createDialog_(K.Viewers),this.root=null,this.onChangeCallbacks_=[]}Qe.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},Qe.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Qe.prototype.getCurrentViewer=function(){return K.Viewers[this.selectedKey]},Qe.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},Qe.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},Qe.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},Qe.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&K.Viewers[this.selectedKey]){this.fireOnChange_(K.Viewers[this.selectedKey]);try{localStorage.setItem(Be,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},Qe.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var n=document.createElement("div");(a=n.style).position="fixed",a.left=0,a.top=0,a.width="100%",a.height="100%",a.background="rgba(0, 0, 0, 0.3)",n.addEventListener("click",this.hide.bind(this));var r=document.createElement("div"),a=r.style;for(var s in a.boxSizing="border-box",a.position="fixed",a.top="24px",a.left="50%",a.marginLeft="-140px",a.width="280px",a.padding="24px",a.overflow="hidden",a.background="#fafafa",a.fontFamily="'Roboto', sans-serif",a.boxShadow="0px 5px 20px #666",r.appendChild(this.createH1_("Select your viewer")),e)r.appendChild(this.createChoice_(s,e[s].label));return r.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(n),t.appendChild(r),t},Qe.prototype.createH1_=function(e){var t=document.createElement("h1"),n=t.style;return n.color="black",n.fontSize="20px",n.fontWeight="bold",n.marginTop=0,n.marginBottom="24px",t.innerHTML=e,t},Qe.prototype.createChoice_=function(e,t){var n=document.createElement("div");n.style.marginTop="8px",n.style.color="black";var r=document.createElement("input");r.style.fontSize="30px",r.setAttribute("id",e),r.setAttribute("type","radio"),r.setAttribute("value",e),r.setAttribute("name","field");var a=document.createElement("label");return a.style.marginLeft="4px",a.setAttribute("for",e),a.innerHTML=t,n.appendChild(r),n.appendChild(a),n},Qe.prototype.createButton_=function(e,t){var n=document.createElement("button");n.innerHTML=e;var r=n.style;return r.float="right",r.textTransform="uppercase",r.color="#1094f7",r.fontSize="14px",r.letterSpacing=0,r.border=0,r.background="none",r.marginTop="16px",n.addEventListener("click",t),n},"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var ce=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),s?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",a),this.noSleepVideo.addEventListener("timeupdate",function(e){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return r(e,[{key:"enable",value:function(){s?(this.disable(),this.noSleepTimer=window.setInterval((function(){window.location.href="/",window.setTimeout(window.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){s?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),e}();e.exports=i},function(e,t,n){e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])}))),Fe=1e3,Ue=[0,0,.5,1],ge=[.5,0,.5,1],de=window.requestAnimationFrame,ue=window.cancelAnimationFrame;function Ie(e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return G("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),e.hasOrientation}}})}function me(e){var t=!("wakelock"in(e=e||{}))||e.wakelock;this.isPolyfilled=!0,this.displayId=Fe++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return G("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new Ie({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,t&&y()&&(this.wakelock_=new ce)}me.prototype.getFrameData=function(e){return Z(e,this._getPose(),this)},me.prototype.getPose=function(){return G("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},me.prototype.resetPose=function(){return G("VRDisplay.prototype.resetPose"),this._resetPose()},me.prototype.getImmediatePose=function(){return G("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},me.prototype.requestAnimationFrame=function(e){return de(e)},me.prototype.cancelAnimationFrame=function(e){return ue(e)},me.prototype.wrapForFullscreen=function(e){if(o())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=e,this.originalParent_=e.parentElement,this.originalParent_||document.body.appendChild(e),!this.fullscreenWrapper_.parentElement){var n=this.fullscreenElement_.parentElement;n.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),n.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var r=this;return function(){if(r.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];r.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},me.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),this.originalParent_===t?t.insertBefore(e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(e),t.removeChild(this.fullscreenWrapper_),e}},me.prototype.requestPresent=function(e){var t=this.isPresenting,n=this;return e instanceof Array||(G("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),e=[e]),new Promise((function(r,a){if(n.capabilities.canPresent)if(0==e.length||e.length>n.capabilities.maxLayers)a(new Error("Invalid number of layers."));else{var s=e[0];if(s.source){var i=s.leftBounds||Ue,B=s.rightBounds||ge;if(t){var Q=n.layer_;Q.source!==s.source&&(Q.source=s.source);for(var c=0;c<4;c++)Q.leftBounds[c]=i[c],Q.rightBounds[c]=B[c];return n.wrapForFullscreen(n.layer_.source),n.updatePresent_(),void r()}if(n.layer_={predistorted:s.predistorted,source:s.source,leftBounds:i.slice(0),rightBounds:B.slice(0)},n.waitingForPresent_=!1,n.layer_&&n.layer_.source){var F=n.wrapForFullscreen(n.layer_.source);n.addFullscreenListeners_(F,(function(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;n.isPresenting=F===e,n.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(e){console.error("screen.orientation.lock() failed due to",e.message)})),n.waitingForPresent_=!1,n.beginPresent_(),r()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),n.removeFullscreenWrapper(),n.disableWakeLock(),n.endPresent_(),n.removeFullscreenListeners_()),n.fireVRDisplayPresentChange_()}),(function(){n.waitingForPresent_&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.disableWakeLock(),n.waitingForPresent_=!1,n.isPresenting=!1,a(new Error("Unable to present.")))})),function(e){if(l())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0}(F)?(n.enableWakeLock(),n.waitingForPresent_=!0):(o()||l())&&(n.enableWakeLock(),n.isPresenting=!0,n.beginPresent_(),n.fireVRDisplayPresentChange_(),r())}n.waitingForPresent_||o()||(m(),a(new Error("Unable to present.")))}else r()}else a(new Error("VRDisplay is not capable of presenting."))}))},me.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise((function(n,r){e?(!m()&&o()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),l()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),n()):r(new Error("Was not presenting to VRDisplay."))}))},me.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},me.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},me.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},me.prototype.addFullscreenListeners_=function(e,t,n){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=n,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),n&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",n,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",n,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",n,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",n,!1))},me.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var n=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",n,!1),e.removeEventListener("webkitfullscreenerror",n,!1),document.removeEventListener("mozfullscreenerror",n,!1),e.removeEventListener("msfullscreenerror",n,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},me.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},me.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},me.prototype.beginPresent_=function(){},me.prototype.endPresent_=function(){},me.prototype.submitFrame=function(e){},me.prototype.getEyeParameters=function(e){return null};var Ce={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},be="left",ye="right";function Se(e){var t=S({},Ce);e=S(t,e||{}),me.call(this,{wakelock:e.MOBILE_WAKE_LOCK}),this.config=e,this.displayName="Cardboard VRDisplay",this.capabilities=new Ie({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new oe(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new q(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new K(this.dpdb_.getDeviceParams(),e.ADDITIONAL_VIEWERS),this.viewerSelector_=new Qe(e.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new le),o()&&window.addEventListener("resize",this.onResize_.bind(this))}return Se.prototype=Object.create(me.prototype),Se.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Se.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},Se.prototype._getFieldOfView=function(e){var t;if(e==be)t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=ye)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return t},Se.prototype._getEyeOffset=function(e){var t;if(e==be)t=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(e!=ye)return console.error("Invalid eye provided: %s",e),null;t=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return t},Se.prototype.getEyeParameters=function(e){var t=this._getEyeOffset(e),n=this._getFieldOfView(e),r={offset:t,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(r,"fieldOfView",{enumerable:!0,get:function(){return G("VRFieldOfView","VRFrameData's projection matrices"),n}}),r},Se.prototype.onDeviceParamsUpdated_=function(e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},Se.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},Se.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(e.canvas.width=u()*this.bufferScale_,e.canvas.height=I()*this.bufferScale_,this.cardboardUI_=new J(e)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new J(e)),this.distorter_=new A(e,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(d()&&y()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},Se.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Se.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},Se.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2"));var n=t.canvas;n.width==this.lastWidth&&n.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=n.width,this.lastHeight=n.height,this.cardboardUI_.render()}},Se.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},Se.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2"));t.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),h(t.canvas)}},Se.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},Se.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},Se.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},Se.VRDisplay=me,Se}))}))),s={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function i(e){this.config=r(r({},s),e),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&t())&&(this.enable(),this.getVRDisplays().then((function(e){e&&e[0]&&e[0].fireVRDisplayConnect_&&e[0].fireVRDisplayConnect_()})))}i.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(t()){var e=new a({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(e)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},i.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var e=this.native.VRFrameData,t=new this.native.VRFrameData,r=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(a){a instanceof e?r.call(this,a):(r.call(this,t),a.pose=t.pose,n(t.leftProjectionMatrix,a.leftProjectionMatrix),n(t.rightProjectionMatrix,a.rightProjectionMatrix),n(t.leftViewMatrix,a.leftViewMatrix),n(t.rightViewMatrix,a.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=a.VRDisplay,window.VRFrameData=a.VRFrameData},i.prototype.getVRDisplays=function(){var e=this;return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then((function(t){return t.length>0?t:e.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},i.version="0.10.12",i.VRFrameData=a.VRFrameData,i.VRDisplay=a.VRDisplay;var o=Object.freeze({default:i}),l=o&&i||o;return void 0!==e&&e.window&&(e.document||(e.document=e.window.document),e.navigator||(e.navigator=e.window.navigator)),l}()}),"/$$rollup_base$$/node_modules/webvr-polyfill/build")),To=a.c.vtkDebugMacro,ko=a.c.vtkErrorMacro,Mo=-1!==navigator.userAgent.indexOf("Chrome");function wo(e,t,n){var r=e.createFramebuffer(),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,t,2,2,0,t,n,null),e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),s===e.FRAMEBUFFER_COMPLETE}var Yo=0,Oo=[];function zo(){Yo++,Oo.forEach((function(e){return e(Yo)}))}function Po(){Yo--,Oo.forEach((function(e){return e(Yo)}))}function Ko(e,t){t.classHierarchy.push("vtkOpenGLRenderWindow");var n=[0,0];e.onModified((function(){t.renderable&&(t.size[0]===n[0]&&t.size[1]===n[1]||(n[0]=t.size[0],n[1]=t.size[1],t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1]))),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none"),t.containerSize=null})),e.buildPass=function(n){if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.removeUnusedNodes(),e.initialize(),t.children.forEach((function(t){t.setOpenGLRenderWindow(e)}))}},e.initialize=function(){if(!t.initialized){t.context=e.get3DContext(),t.textureUnitManager=Xo.newInstance(),t.textureUnitManager.setContext(t.context),t.shaderCache.setContext(t.context);var n=t.context;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.depthFunc(n.LEQUAL),n.enable(n.BLEND),t.initialized=!0}},e.makeCurrent=function(){t.context.makeCurrent()},e.setContainer=function(n){t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&ko("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&(t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage)),e.modified())},e.getContainer=function(){return t.el},e.getContainerSize=function(){if(!t.containerSize&&t.el){var e=t.el.getBoundingClientRect(),n=e.width,r=e.height;t.containerSize=[n,r]}return t.containerSize||t.size},e.getFramebufferSize=function(){return t.activeFramebuffer?t.activeFramebuffer.getSize():t.size},e.isInViewport=function(t,n,r){var a=r.getViewportByReference(),s=e.getFramebufferSize();return a[0]*s[0]<=t&&a[2]*s[0]>=t&&a[1]*s[1]<=n&&a[3]*s[1]>=n},e.getViewportSize=function(t){var n=t.getViewportByReference(),r=e.getFramebufferSize();return[(n[2]-n[0])*r[0],(n[3]-n[1])*r[1]]},e.getViewportCenter=function(t){var n=e.getViewportSize(t);return[.5*n[0],.5*n[1]]},e.displayToNormalizedDisplay=function(t,n,r){var a=e.getFramebufferSize();return[t/a[0],n/a[1],r]},e.normalizedDisplayToDisplay=function(t,n,r){var a=e.getFramebufferSize();return[t*a[0],n*a[1],r]},e.worldToView=function(e,t,n,r){return r.worldToView(e,t,n)},e.viewToWorld=function(e,t,n,r){return r.viewToWorld(e,t,n)},e.worldToDisplay=function(t,n,r,a){var s=a.worldToView(t,n,r),i=e.getViewportSize(a),o=a.viewToProjection(s[0],s[1],s[2],i[0]/i[1]),l=a.projectionToNormalizedDisplay(o[0],o[1],o[2]);return e.normalizedDisplayToDisplay(l[0],l[1],l[2])},e.displayToWorld=function(t,n,r,a){var s=e.displayToNormalizedDisplay(t,n,r),i=a.normalizedDisplayToProjection(s[0],s[1],s[2]),o=e.getViewportSize(a),l=a.projectionToView(i[0],i[1],i[2],o[0]/o[1]);return a.viewToWorld(l[0],l[1],l[2])},e.normalizedDisplayToViewport=function(t,n,r,a){var s=a.getViewportByReference();s=e.normalizedDisplayToDisplay(s[0],s[1],0);var i=e.normalizedDisplayToDisplay(t,n,r);return[i[0]-s[0]-.5,i[1]-s[1]-.5,r]},e.viewportToNormalizedViewport=function(t,n,r,a){var s=e.getViewportSize(a);return s&&0!==s[0]&&0!==s[1]?[t/(s[0]-1),n/(s[1]-1),r]:[t,n,r]},e.normalizedViewportToViewport=function(t,n,r){var a=e.getFramebufferSize();return[t*(a[0]-1),n*(a[1]-1),r]},e.displayToLocalDisplay=function(t,n,r){return[t,e.getFramebufferSize()[1]-n-1,r]},e.viewportToNormalizedDisplay=function(t,n,r,a){var s=a.getViewportByReference(),i=t+(s=e.normalizedDisplayToDisplay(s[0],s[1],0))[0]+.5,o=n+s[1]+.5;return e.displayToNormalizedDisplay(i,o,r)},e.getPixelData=function(e,n,r,a){var s=new Uint8Array((r-e+1)*(a-n+1)*4);return t.context.readPixels(e,n,r-e+1,a-n+1,t.context.RGBA,t.context.UNSIGNED_BYTE,s),s},e.get3DContext=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0},r=null,a="undefined"!=typeof WebGL2RenderingContext;return t.webgl2=!1,t.defaultToWebgl2&&a&&(r=t.canvas.getContext("webgl2",n))&&(t.webgl2=!0,To("using webgl2")),r||(To("using webgl1"),r=t.canvas.getContext("webgl",n)||t.canvas.getContext("experimental-webgl",n)),new Ho({PROVIDE_MOBILE_VRDISPLAY:!0,DIRTY_SUBMIT_FRAME_BINDINGS:!1,BUFFER_SCALE:.75}),navigator.getVRDisplays&&navigator.getVRDisplays().then((function(n){n.length>0&&(t.vrDisplay=n[0],t.vrDisplay.depthNear=.01,t.vrDisplay.depthFar=100,e.invokeHaveVRDisplay())})),t.canvas.addEventListener("webglcontextlost",(function(e){e.preventDefault()}),!1),t.canvas.addEventListener("webglcontextrestored",e.restoreContext,!1),r},e.startVR=function(){t.oldCanvasSize=t.size.slice(),t.vrDisplay.capabilities.canPresent?t.vrDisplay.requestPresent([{source:t.canvas}]).then((function(){if(t.el&&t.vrDisplay.capabilities.hasExternalDisplay&&t.hideCanvasInVR&&(t.el.style.display="none"),t.queryVRSize){var n=t.vrDisplay.getEyeParameters("left"),r=t.vrDisplay.getEyeParameters("right"),a=Math.floor(n.renderWidth+r.renderWidth),s=Math.floor(Math.max(n.renderHeight,r.renderHeight));e.setSize(a,s)}else e.setSize(t.vrResolution);t.renderable.getRenderers()[0].resetCamera(),t.vrFrameData=new VRFrameData,t.renderable.getInteractor().switchToVRAnimation(),t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender),Mo&&(t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender))})).catch((function(){console.error("failed to requestPresent")})):ko("vrDisplay is not connected")},e.stopVR=function(){t.renderable.getInteractor().returnFromVRAnimation(),t.vrDisplay.exitPresent(),t.vrDisplay.cancelAnimationFrame(t.vrSceneFrame),e.setSize.apply(e,Object(r.a)(t.oldCanvasSize)),t.el&&t.vrDisplay.capabilities.hasExternalDisplay&&(t.el.style.display="block");var n=t.renderable.getRenderers()[0];n.getActiveCamera().setProjectionMatrix(null),n.setViewport(0,0,1,1),e.traverseAllPasses()},e.vrRender=function(){if(t.vrDisplay.isPresenting){t.renderable.getInteractor().updateGamepads(t.vrDisplay.displayId),t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender),t.vrDisplay.getFrameData(t.vrFrameData);var n=t.renderable.getRenderers()[0];n.setViewport(0,0,.5,1),n.getActiveCamera().computeViewParametersFromPhysicalMatrix(t.vrFrameData.leftViewMatrix),n.getActiveCamera().setProjectionMatrix(t.vrFrameData.leftProjectionMatrix),e.traverseAllPasses(),n.setViewport(.5,0,1,1),n.getActiveCamera().computeViewParametersFromPhysicalMatrix(t.vrFrameData.rightViewMatrix),n.getActiveCamera().setProjectionMatrix(t.vrFrameData.rightProjectionMatrix),e.traverseAllPasses(),t.vrDisplay.submitFrame()}},e.restoreContext=function(){var t=In.newInstance();t.setCurrentOperation("Release"),t.traverse(e,null)},e.activateTexture=function(n){var r=t.textureResourceIds.get(n);if(void 0===r){var a=e.getTextureUnitManager().allocate();a<0?ko("Hardware does not support the number of textures defined."):(t.textureResourceIds.set(n,a),t.context.activeTexture(t.context.TEXTURE0+a))}else t.context.activeTexture(t.context.TEXTURE0+r)},e.deactivateTexture=function(n){var r=t.textureResourceIds.get(n);void 0!==r&&(e.getTextureUnitManager().free(r),t.textureResourceIds.delete(n))},e.getTextureUnitForTexture=function(e){var n=t.textureResourceIds.get(e);return void 0!==n?n:-1},e.getDefaultTextureInternalFormat=function(e,n,r){if(t.webgl2)switch(e){case D.b.UNSIGNED_CHAR:switch(n){case 1:return t.context.R8;case 2:return t.context.RG8;case 3:return t.context.RGB8;case 4:default:return t.context.RGBA8}default:case D.b.FLOAT:switch(n){case 1:return t.context.R16F;case 2:return t.context.RG16F;case 3:return t.context.RGB16F;case 4:default:return t.context.RGBA16F}}switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:default:return t.context.RGBA}},e.setBackgroundImage=function(e){t.bgImage.src=e.src},e.setUseBackgroundImage=function(e){t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";if(t.deleted)return null;t.imageFormat=n;var r=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,new Promise((function(n,a){var s=e.onImageReady((function(e){t.notifyStartCaptureImage=r,s.unsubscribe(),n(e)}))}))},e.getGLInformations=function(){for(var n=e.get3DContext(),r=n.getExtension("OES_texture_float"),a=n.getExtension("OES_texture_half_float"),s=n.getExtension("WEBGL_debug_renderer_info"),i=n.getExtension("WEBGL_draw_buffers"),o=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),l=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",n.getParameter(n.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",n.getParameter(n.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",n.getParameter(n.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",o&&n.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",n.getParameter(n.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",n.getParameter(n.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",n.getParameter(n.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",n.getParameter(n.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",n.getParameter(n.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",n.getParameter(n.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",n.getParameter(n.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",n.getParameter(n.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",n.getParameter(n.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",n.getParameter(n.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",n.getParameter(n.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",n.getParameter(n.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",n.getParameter(n.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[r&&wo(n,n.RGBA,n.UNSIGNED_BYTE)?"RGBA":"",r&&wo(n,n.RGB,n.UNSIGNED_BYTE)?"RGB":"",r&&wo(n,n.LUMINANCE,n.UNSIGNED_BYTE)?"LUMINANCE":"",r&&wo(n,n.ALPHA,n.UNSIGNED_BYTE)?"ALPHA":"",r&&wo(n,n.LUMINANCE_ALPHA,n.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[a&&wo(n,n.RGBA,a.HALF_FLOAT_OES)?"RGBA":"",a&&wo(n,n.RGB,a.HALF_FLOAT_OES)?"RGB":"",a&&wo(n,n.LUMINANCE,a.HALF_FLOAT_OES)?"LUMINANCE":"",a&&wo(n,n.ALPHA,a.HALF_FLOAT_OES)?"ALPHA":"",a&&wo(n,n.LUMINANCE_ALPHA,a.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[r&&wo(n,n.RGBA,n.FLOAT)?"RGBA":"",r&&wo(n,n.RGB,n.FLOAT)?"RGB":"",r&&wo(n,n.LUMINANCE,n.FLOAT)?"LUMINANCE":"",r&&wo(n,n.ALPHA,n.FLOAT)?"ALPHA":"",r&&wo(n,n.LUMINANCE_ALPHA,n.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",i?n.getParameter(i.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",n.getSupportedExtensions().join("<br/>\t\t\t\t\t    ")],["WebGL Renderer","RENDERER",n.getParameter(n.RENDERER)],["WebGL Vendor","VENDOR",n.getParameter(n.VENDOR)],["WebGL Version","VERSION",n.getParameter(n.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",n.getParameter(n.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",s&&n.getParameter(s.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",s&&n.getParameter(s.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",t.webgl2?2:1]],B={};l.length;){var Q=l.pop(),c=Object(oe.a)(Q,3),F=c[0],U=c[1],g=c[2];U&&(B[U]={label:F,value:g})}return B},e.traverseAllPasses=function(){if(t.renderPasses)for(var n=0;n<t.renderPasses.length;++n)t.renderPasses[n].traverse(e,null);t.notifyStartCaptureImage&&function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.imageFormat,r=document.createElement("canvas"),a=r.getContext("2d");r.width=t.canvas.width,r.height=t.canvas.height,a.drawImage(t.canvas,0,0);var s=t.canvas.getBoundingClientRect();t.renderable.getRenderers().forEach((function(e){e.getViewProps().forEach((function(e){if(e.getContainer)for(var t=e.getContainer().getElementsByTagName("canvas"),n=0;n<t.length;n++){var r=t[n],i=r.getBoundingClientRect(),o=i.x-s.x,l=i.y-s.y;a.drawImage(r,o,l)}}))}));var i=r.toDataURL(n);r.remove(),e.invokeImageReady(i)}()},e.disableDepthMask=function(){t.depthMaskEnabled&&(t.context.depthMask(!1),t.depthMaskEnabled=!1)},e.enableDepthMask=function(){t.depthMaskEnabled||(t.context.depthMask(!0),t.depthMaskEnabled=!0)},e.disableCullFace=function(){t.cullFaceEnabled&&(t.context.disable(t.context.CULL_FACE),t.cullFaceEnabled=!1)},e.enableCullFace=function(){t.cullFaceEnabled||(t.context.enable(t.context.CULL_FACE),t.cullFaceEnabled=!0)},e.setViewStream=function(n){return t.viewStream!==n&&(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream&&(t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady((function(t){return e.setBackgroundImage(t.image)})),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified()),!0)},e.delete=a.c.chain(e.delete,e.setViewStream,Po)}var jo={cullFaceEnabled:!1,depthMaskEnabled:!0,shaderCache:null,initialized:!1,context:null,canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,vrResolution:[2160,1200],queryVRSize:!1,hideCanvasInVR:!0,activeFramebuffer:null,vrDisplay:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function _o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jo,n),t.canvas=document.createElement("canvas"),t.canvas.style.width="100%",zo(),t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",t.textureResourceIds=new Map,an.extend(e,t,n),t.myFactory=Go.newInstance(),t.myFactory.registerOverride("vtkRenderWindow",qo),t.shaderCache=Eo.newInstance(),t.shaderCache.setOpenGLRenderWindow(e),t.renderPasses[0]=Xn.newInstance(),a.c.event(e,t,"imageReady"),a.c.event(e,t,"haveVRDisplay"),a.c.get(e,t,["shaderCache","textureUnitManager","webgl2","vrDisplay","useBackgroundImage"]),a.c.setGet(e,t,["initialized","context","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","queryVRSize","hideCanvasInVR","useOffScreen","activeFramebuffer"]),a.c.setGetArray(e,t,["size","vrResolution"],2),Ko(e,t)}var qo=a.c.newInstance(_o,"vtkOpenGLRenderWindow");ln("WebGL",qo);var $o={newInstance:qo,extend:_o,pushMonitorGLContextCount:function(e){Oo.push(e)},popMonitorGLContextCount:function(e){return Oo.pop()}},el={Device:{Unknown:0,LeftController:1,RightController:2},Input:{Unknown:0,Trigger:1,TrackPad:2,Grip:3,ApplicationMenu:4}};function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rl=el.Device,al=el.Input,sl=a.c.vtkWarningMacro,il=a.c.vtkErrorMacro,ol=a.c.normalizeWheel,ll=a.c.vtkOnceErrorMacro,Bl={"OpenVR Gamepad":[al.TrackPad,al.Trigger,al.Grip,al.ApplicationMenu]},Ql=["StartAnimation","Animation","EndAnimation","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteractionEvent","InteractionEvent","EndInteractionEvent"];function cl(e){return e.stopPropagation(),e.preventDefault(),!1}function Fl(e,t){t.classHierarchy.push("vtkRenderWindowInteractor");var n=new Set,r=0;function a(n,r){t.currentRenderer=e.findPokedRenderer(n,r)}function s(e){var n=t.container.getBoundingClientRect(),r=t.view.getCanvas(),s=r.width/n.width,i=r.height/n.height,o={x:s*(e.clientX-n.left),y:i*(n.height-e.clientY+n.top),z:0};return a(o.x,o.y),o}function i(e){for(var t={},n=0;n<e.length;n++){var r=e[n];t[r.identifier]=s(r)}return t}function o(e){return{controlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey}}function l(e){var t=o(e);return nl({key:e.key,keyCode:e.charCode},t)}function B(n){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=document,i=n?"addEventListener":"removeEventListener",o=n?"removeEventListener":"addEventListener";!a&&!n&&r>0&&--r,r&&!a||(r=0,t.container&&t.container[o]("mousemove",e.handleMouseMove),s[i]("mouseup",e.handleMouseUp),s[i]("mousemove",e.handleMouseMove),s[i]("touchend",e.handleTouchEnd,!1),s[i]("touchcancel",e.handleTouchEnd,!1),s[i]("touchmove",e.handleTouchMove,!1)),!a&&n&&++r}function Q(){t.view&&t.enabled&&t.enableRender&&(t.inRender=!0,t.view.traverseAllPasses(),t.inRender=!1),e.invokeRenderEvent()}e.start=function(){(t.initialized||(e.initialize(),t.initialized))&&e.startEventLoop()},e.setRenderWindow=function(e){il("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},e.setInteractorStyle=function(n){t.interactorStyle!==n&&(null!=t.interactorStyle&&t.interactorStyle.setInteractor(null),t.interactorStyle=n,null!=t.interactorStyle&&t.interactorStyle.getInteractor()!==e&&t.interactorStyle.setInteractor(e))},e.initialize=function(){t.initialized=!0,e.enable(),e.render()},e.enable=function(){return e.setEnabled(!0)},e.disable=function(){return e.setEnabled(!1)},e.startEventLoop=function(){return sl("empty event loop")},e.getCurrentRenderer=function(){return t.currentRenderer||a(0,0),t.currentRenderer},e.bindEvents=function(n){t.container=n,n.addEventListener("contextmenu",cl),n.addEventListener("wheel",e.handleWheel),n.addEventListener("DOMMouseScroll",e.handleWheel),n.addEventListener("mouseenter",e.handleMouseEnter),n.addEventListener("mouseleave",e.handleMouseLeave),n.addEventListener("mousemove",e.handleMouseMove),n.addEventListener("mousedown",e.handleMouseDown),document.querySelector("body").addEventListener("keypress",e.handleKeyPress),document.querySelector("body").addEventListener("keydown",e.handleKeyDown),document.querySelector("body").addEventListener("keyup",e.handleKeyUp),document.addEventListener("pointerlockchange",e.handlePointerLockChange),n.addEventListener("touchstart",e.handleTouchStart,!1)},e.unbindEvents=function(){B(!1,!0),t.container.removeEventListener("contextmenu",cl),t.container.removeEventListener("wheel",e.handleWheel),t.container.removeEventListener("DOMMouseScroll",e.handleWheel),t.container.removeEventListener("mouseenter",e.handleMouseEnter),t.container.removeEventListener("mouseleave",e.handleMouseLeave),t.container.removeEventListener("mousemove",e.handleMouseMove),t.container.removeEventListener("mousedown",e.handleMouseDown),document.querySelector("body").removeEventListener("keypress",e.handleKeyPress),document.querySelector("body").removeEventListener("keydown",e.handleKeyDown),document.querySelector("body").removeEventListener("keyup",e.handleKeyUp),document.removeEventListener("pointerlockchange",e.handlePointerLockChange),t.container.removeEventListener("touchstart",e.handleTouchStart),t.container=null},e.handleKeyPress=function(t){var n=l(t);e.keyPressEvent(n)},e.handleKeyDown=function(t){var n=l(t);e.keyDownEvent(n)},e.handleKeyUp=function(t){var n=l(t);e.keyUpEvent(n)},e.handleMouseDown=function(t){if(!(t.button>2)){B(!0),t.stopPropagation(),t.preventDefault();var n=nl(nl({},o(t)),{},{position:s(t)});switch(t.button){case 0:e.leftButtonPressEvent(n);break;case 1:e.middleButtonPressEvent(n);break;case 2:e.rightButtonPressEvent(n);break;default:il("Unknown mouse button pressed: ".concat(t.button))}}},e.requestPointerLock=function(){e.getView().getCanvas().requestPointerLock()},e.exitPointerLock=function(){return document.exitPointerLock()},e.isPointerLocked=function(){return!!document.pointerLockElement},e.handlePointerLockChange=function(){e.isPointerLocked()?e.startPointerLockEvent():e.endPointerLockEvent()},e.requestAnimation=function(r){void 0!==r?n.has(r)?sl("requester is already registered for animating"):(n.add(r),1===n.size&&(t.lastFrameTime=.1,t.lastFrameStart=Date.now(),t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())):il("undefined requester, can not start animating")},e.isAnimating=function(){return t.vrAnimation||null!==t.animationRequest},e.cancelAnimation=function(r){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.has(r))n.delete(r),t.animationRequest&&0===n.size&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render());else if(!a){var s=r&&r.getClassName?r.getClassName():r;sl("".concat(s," did not request an animation"))}},e.switchToVRAnimation=function(){t.animationRequest&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null),t.vrAnimation=!0},e.returnFromVRAnimation=function(){t.vrAnimation=!1,0!==n.size&&(t.FrameTime=-1,t.animationRequest=requestAnimationFrame(e.handleAnimation))},e.updateGamepads=function(n){for(var r=navigator.getGamepads(),a=0;a<r.length;++a){var s=r[a];if(s&&s.displayId===n){s.index in t.lastGamepadValues||(t.lastGamepadValues[s.index]={buttons:{}});for(var i=0;i<s.buttons.length;++i)i in t.lastGamepadValues[s.index].buttons||(t.lastGamepadValues[s.index].buttons[i]=!1),t.lastGamepadValues[s.index].buttons[i]!==s.buttons[i].pressed&&(e.button3DEvent({gamepad:s,position:s.pose.position,orientation:s.pose.orientation,pressed:s.buttons[i].pressed,device:"left"===s.hand?rl.LeftController:rl.RightController,input:Bl[s.id]&&Bl[s.id][i]?Bl[s.id][i]:al.Trigger}),t.lastGamepadValues[s.index].buttons[i]=s.buttons[i].pressed),t.lastGamepadValues[s.index].buttons[i]&&e.move3DEvent({gamepad:s,position:s.pose.position,orientation:s.pose.orientation,device:"left"===s.hand?rl.LeftController:rl.RightController})}}},e.handleMouseMove=function(n){var r=nl(nl({},o(n)),{},{position:s(n)});0===t.moveTimeoutID?e.startMouseMoveEvent(r):(e.mouseMoveEvent(r),clearTimeout(t.moveTimeoutID)),t.moveTimeoutID=setTimeout((function(){e.endMouseMoveEvent(),t.moveTimeoutID=0}),200)},e.handleAnimation=function(){var n=Date.now();-1===t.FrameTime?t.lastFrameTime=.1:t.lastFrameTime=(n-t.lastFrameStart)/1e3,t.lastFrameTime=Math.max(.01,t.lastFrameTime),t.lastFrameStart=n,e.animationEvent(),Q(),t.animationRequest=requestAnimationFrame(e.handleAnimation)},e.handleWheel=function(n){n.stopPropagation(),n.preventDefault();var r=nl(nl(nl({},ol(n)),o(n)),{},{position:s(n)});0===t.wheelTimeoutID?e.startMouseWheelEvent(r):(e.mouseWheelEvent(r),clearTimeout(t.wheelTimeoutID)),t.wheelTimeoutID=setTimeout((function(){e.endMouseWheelEvent(),t.wheelTimeoutID=0}),200)},e.handleMouseEnter=function(t){var n=nl(nl({},o(t)),{},{position:s(t)});e.mouseEnterEvent(n)},e.handleMouseLeave=function(t){var n=nl(nl({},o(t)),{},{position:s(t)});e.mouseLeaveEvent(n)},e.handleMouseUp=function(t){B(!1),t.stopPropagation(),t.preventDefault();var n=nl(nl({},o(t)),{},{position:s(t)});switch(t.button){case 0:e.leftButtonReleaseEvent(n);break;case 1:e.middleButtonReleaseEvent(n);break;case 2:e.rightButtonReleaseEvent(n);break;default:il("Unknown mouse button released: ".concat(t.button))}},e.handleTouchStart=function(n){if(B(!0),n.stopPropagation(),n.preventDefault(),t.recognizeGestures&&n.touches.length>1){var r=i(n.touches);if(2===n.touches.length){var a={position:s(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(a)}e.recognizeGesture("TouchStart",r)}else{var o={position:s(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonPressEvent(o)}},e.handleTouchMove=function(n){if(n.stopPropagation(),n.preventDefault(),t.recognizeGestures&&n.touches.length>1){var r=i(n.touches);e.recognizeGesture("TouchMove",r)}else{var a={position:s(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.mouseMoveEvent(a)}},e.handleTouchEnd=function(n){if(n.stopPropagation(),n.preventDefault(),t.recognizeGestures)if(0===n.touches.length)if(1===n.changedTouches.length){var r={position:s(n.changedTouches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(r),B(!1)}else{var a=i(n.changedTouches);e.recognizeGesture("TouchEnd",a),B(!1)}else if(1===n.touches.length){var o=i(n.changedTouches);e.recognizeGesture("TouchEnd",o);var l={position:s(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonPressEvent(l)}else{var Q=i(n.touches);e.recognizeGesture("TouchMove",Q)}else{var c={position:s(n.changedTouches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(c),B(!1)}},e.setView=function(n){t.view!==n&&(t.view=n,t.view.getRenderable().setInteractor(e),e.modified())},e.getFirstRenderer=function(){return t.view.getRenderable().getRenderersByReference()[0]},e.findPokedRenderer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t.view)return null;var r=t.view.getRenderable().getRenderers();r.sort((function(e,t){return e.getLayer()-t.getLayer()}));for(var a=null,s=null,i=null,o=r.length;o--;){var l=r[o];if(t.view.isInViewport(e,n,l)&&l.getInteractive()){i=l;break}null===a&&l.getInteractive()&&(a=l),null===s&&t.view.isInViewport(e,n,l)&&(s=l)}return null===i&&(i=a),null===i&&(i=s),null==i&&(i=r[0]),i},e.render=function(){null!==t.animationRequest||t.inRender||Q()},Ql.forEach((function(n){var r=n.charAt(0).toLowerCase()+n.slice(1);e["".concat(r,"Event")]=function(r){if(t.enabled)if(e.getCurrentRenderer()){var a=nl({type:n,pokedRenderer:t.currentRenderer,firstRenderer:e.getFirstRenderer()},r);e["invoke".concat(n)](a)}else ll("\n          Can not forward events without a current renderer on the interactor.\n        ")}})),e.recognizeGesture=function(n,r){if(!(Object.keys(r).length>2)){if(t.startingEventPositions||(t.startingEventPositions={}),"TouchStart"===n)return Object.keys(r).forEach((function(e){t.startingEventPositions[e]=r[e]})),void(t.currentGesture="Start");if("TouchEnd"===n)return"Pinch"===t.currentGesture&&(e.render(),e.endPinchEvent()),"Rotate"===t.currentGesture&&(e.render(),e.endRotateEvent()),"Pan"===t.currentGesture&&(e.render(),e.endPanEvent()),t.currentGesture="Start",void(t.startingEventPositions={});var a=0,s=[],i=[];Object.keys(r).forEach((function(e){s[a]=r[e],i[a]=t.startingEventPositions[e],a++}));var o=Math.sqrt((i[0].x-i[1].x)*(i[0].x-i[1].x)+(i[0].y-i[1].y)*(i[0].y-i[1].y)),l=Math.sqrt((s[0].x-s[1].x)*(s[0].x-s[1].x)+(s[0].y-s[1].y)*(s[0].y-s[1].y)),B=Object(u.F)(Math.atan2(i[1].y-i[0].y,i[1].x-i[0].x)),Q=Object(u.F)(Math.atan2(s[1].y-s[0].y,s[1].x-s[0].x)),c=Q-B;Q=Q+180>=360?Q-180:Q+180,B=B+180>=360?B-180:B+180,Math.abs(Q-B)<Math.abs(c)&&(c=Q-B);var F=[];if(F[0]=(s[0].x-i[0].x+s[1].x-i[1].x)/2,F[1]=(s[0].y-i[0].y+s[1].y-i[1].y)/2,"TouchMove"===n)if("Start"===t.currentGesture){var U=.01*Math.sqrt(t.container.clientWidth*t.container.clientWidth+t.container.clientHeight*t.container.clientHeight);U<15&&(U=15);var g=Math.abs(l-o),d=3.1415926*l*Math.abs(c)/360,I=Math.sqrt(F[0]*F[0]+F[1]*F[1]);if(g>U&&g>d&&g>I){t.currentGesture="Pinch";var m={scale:1,touches:r};e.startPinchEvent(m)}else if(d>U&&d>I){t.currentGesture="Rotate";var C={rotation:0,touches:r};e.startRotateEvent(C)}else if(I>U){t.currentGesture="Pan";var b={translation:[0,0],touches:r};e.startPanEvent(b)}}else{if("Rotate"===t.currentGesture){var y={rotation:c,touches:r};e.rotateEvent(y)}if("Pinch"===t.currentGesture){var S={scale:l/o,touches:r};e.pinchEvent(S)}if("Pan"===t.currentGesture){var h={translation:F,touches:r};e.panEvent(h)}}}},e.handleVisibilityChange=function(){t.lastFrameStart=Date.now()};var c=e.delete;e.delete=function(){for(;n.size;)e.cancelAnimation(n.values().next().value);void 0!==document.hidden&&document.removeEventListener("visibilitychange",e.handleVisibilityChange),c()},void 0!==document.hidden&&document.addEventListener("visibilitychange",e.handleVisibilityChange,!1)}var Ul={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,view:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{}};function gl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ul,n),a.c.obj(e,t),a.c.event(e,t,"RenderEvent"),Ql.forEach((function(n){return a.c.event(e,t,n)})),a.c.get(e,t,["initialized","container","interactorStyle","lastFrameTime","view"]),a.c.setGet(e,t,["lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker"]),Fl(e,t)}var dl=nl({newInstance:a.c.newInstance(gl,"vtkRenderWindowInteractor"),extend:gl,handledEvents:Ql},el),ul=a.c.vtkDebugMacro;function Il(e,t){t.classHierarchy.push("vtkCamera");var n=new Float64Array(3),a=new Float64Array([0,0,-1]),s=new Float64Array([0,1,0]),i=Object(b.h)(new Float64Array(16)),o=new Float64Array(3),l=new Float64Array(3),B=new Float64Array(3),Q=Object(b.h)(new Float64Array(16)),c=Object(b.h)(new Float64Array(16)),F=new Float64Array(3),U=new Float64Array(3);function g(){t.viewPlaneNormal[0]=-t.directionOfProjection[0],t.viewPlaneNormal[1]=-t.directionOfProjection[1],t.viewPlaneNormal[2]=-t.directionOfProjection[2]}e.orthogonalizeViewUp=function(){var n=e.getViewMatrix();t.viewUp[0]=n[4],t.viewUp[1]=n[5],t.viewUp[2]=n[6],e.modified()},e.setPosition=function(n,r,a){n===t.position[0]&&r===t.position[1]&&a===t.position[2]||(t.position[0]=n,t.position[1]=r,t.position[2]=a,e.computeDistance(),e.modified())},e.setFocalPoint=function(n,r,a){n===t.focalPoint[0]&&r===t.focalPoint[1]&&a===t.focalPoint[2]||(t.focalPoint[0]=n,t.focalPoint[1]=r,t.focalPoint[2]=a,e.computeDistance(),e.modified())},e.setDistance=function(n){if(t.distance!==n){t.distance=n,t.distance<1e-20&&(t.distance=1e-20,ul("Distance is set to minimum."));var r=t.directionOfProjection;t.focalPoint[0]=t.position[0]+r[0]*t.distance,t.focalPoint[1]=t.position[1]+r[1]*t.distance,t.focalPoint[2]=t.position[2]+r[2]*t.distance,e.modified()}},e.computeDistance=function(){var e=t.focalPoint[0]-t.position[0],n=t.focalPoint[1]-t.position[1],r=t.focalPoint[2]-t.position[2];if(t.distance=Math.sqrt(e*e+n*n+r*r),t.distance<1e-20){t.distance=1e-20,ul("Distance is set to minimum.");var a=t.directionOfProjection;t.focalPoint[0]=t.position[0]+a[0]*t.distance,t.focalPoint[1]=t.position[1]+a[1]*t.distance,t.focalPoint[2]=t.position[2]+a[2]*t.distance}t.directionOfProjection[0]=e/t.distance,t.directionOfProjection[1]=n/t.distance,t.directionOfProjection[2]=r/t.distance,g()},e.dolly=function(n){if(!(n<=0)){var r=t.distance/n;e.setPosition(t.focalPoint[0]-r*t.directionOfProjection[0],t.focalPoint[1]-r*t.directionOfProjection[1],t.focalPoint[2]-r*t.directionOfProjection[2])}},e.roll=function(n){var r=t.position,a=t.focalPoint,s=t.viewUp,i=new Float64Array([s[0],s[1],s[2],0]);Object(b.h)(Q);var o=new Float64Array([a[0]-r[0],a[1]-r[1],a[2]-r[2]]);Object(b.q)(Q,Q,Object(u.B)(n),o),Ca(i,i,Q),t.viewUp[0]=i[0],t.viewUp[1]=i[1],t.viewUp[2]=i[2],e.modified()},e.azimuth=function(n){var r=t.focalPoint;Object(b.h)(c),Object(b.s)(c,c,r),Object(b.q)(c,c,Object(u.B)(n),t.viewUp),Object(b.s)(c,c,[-r[0],-r[1],-r[2]]),Object(y.q)(F,t.position,c),e.setPosition(F[0],F[1],F[2])},e.yaw=function(n){var r=t.position;Object(b.h)(c),Object(b.s)(c,c,r),Object(b.q)(c,c,Object(u.B)(n),t.viewUp),Object(b.s)(c,c,[-r[0],-r[1],-r[2]]),Object(y.q)(U,t.focalPoint,c),e.setFocalPoint(U[0],U[1],U[2])},e.elevation=function(n){var r=t.focalPoint,a=e.getViewMatrix(),s=[-a[0],-a[1],-a[2]];Object(b.h)(c),Object(b.s)(c,c,r),Object(b.q)(c,c,Object(u.B)(n),s),Object(b.s)(c,c,[-r[0],-r[1],-r[2]]),Object(y.q)(F,t.position,c),e.setPosition(F[0],F[1],F[2])},e.pitch=function(n){var a=t.position,s=e.getViewMatrix(),i=[s[0],s[1],s[2]];Object(b.h)(c),Object(b.s)(c,c,a),Object(b.q)(c,c,Object(u.B)(n),i),Object(b.s)(c,c,[-a[0],-a[1],-a[2]]),Object(y.q)(U,t.focalPoint,c),e.setFocalPoint.apply(e,Object(r.a)(U))},e.zoom=function(n){n<=0||(t.parallelProjection?t.parallelScale/=n:t.viewAngle/=n,e.modified())},e.translate=function(n,r,a){var s=[n,r,a];Object(u.x)(t.position,s,t.position),Object(u.x)(t.focalPoint,s,t.focalPoint),e.computeDistance(),e.modified()},e.applyTransform=function(n){var a=[].concat(Object(r.a)(t.viewUp),[1]),s=[],i=[],o=[];a[0]+=t.position[0],a[1]+=t.position[1],a[2]+=t.position[2],Ca(s,[].concat(Object(r.a)(t.position),[1]),n),Ca(i,[].concat(Object(r.a)(t.focalPoint),[1]),n),Ca(o,a,n),o[0]-=s[0],o[1]-=s[1],o[2]-=s[2],e.setPosition.apply(e,Object(r.a)(s.slice(0,3))),e.setFocalPoint.apply(e,Object(r.a)(i.slice(0,3))),e.setViewUp.apply(e,Object(r.a)(o.slice(0,3)))},e.getThickness=function(){return t.clippingRange[1]-t.clippingRange[0]},e.setThickness=function(n){var r=n;r<1e-20&&(r=1e-20,ul("Thickness is set to minimum.")),e.setClippingRange(t.clippingRange[0],t.clippingRange[0]+r)},e.setThicknessFromFocalPoint=function(n){var r=n;r<1e-20&&(r=1e-20,ul("Thickness is set to minimum.")),e.setClippingRange(t.distance-r/2,t.distance+r/2)},e.setRoll=function(e){},e.getRoll=function(){},e.setObliqueAngles=function(e,t){},e.getOrientation=function(){},e.getOrientationWXYZ=function(){},e.getFrustumPlanes=function(e){},e.getCameraLightTransformMatrix=function(){},e.deepCopy=function(e){},e.physicalOrientationToWorldDirection=function(e){var t,n,r=ha(e[0],e[1],e[2],e[3]),a=ba(),s=ha(0,0,1,0);return n=r,(t=a)[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],Sa(s,r,s),Sa(s,s,a),[s[0],s[1],s[2]]},e.getPhysicalToWorldMatrix=function(t){e.getWorldToPhysicalMatrix(t),Object(b.g)(t,t)},e.getWorldToPhysicalMatrix=function(e){Object(b.h)(e);var n=[3];Object(u.w)(t.physicalViewNorth,t.physicalViewUp,n),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[4]=t.physicalViewUp[0],e[5]=t.physicalViewUp[1],e[6]=t.physicalViewUp[2],e[8]=-t.physicalViewNorth[0],e[9]=-t.physicalViewNorth[1],e[10]=-t.physicalViewNorth[2],Object(b.i)(e,e),Object(y.p)(o,1/t.physicalScale,1/t.physicalScale,1/t.physicalScale),Object(b.r)(e,e,o),Object(b.s)(e,e,t.physicalTranslation)},e.computeViewParametersFromViewMatrix=function(r){Object(b.g)(i,r),Object(y.q)(o,n,i),e.computeDistance();var Q=t.distance;e.setPosition(o[0],o[1],o[2]),Object(y.q)(l,a,i),Object(y.a)(l,l,o),Object(y.l)(l,l),e.setDirectionOfProjection(l[0],l[1],l[2]),Object(y.q)(B,s,i),Object(y.a)(B,B,o),Object(y.l)(B,B),e.setViewUp(B[0],B[1],B[2]),e.setDistance(Q)},e.computeViewParametersFromPhysicalMatrix=function(t){e.getWorldToPhysicalMatrix(i),Object(b.l)(i,t,i),e.computeViewParametersFromViewMatrix(i)},e.setViewMatrix=function(n){t.viewMatrix=n,t.viewMatrix&&(Object(b.d)(i,t.viewMatrix),e.computeViewParametersFromViewMatrix(i),Object(b.i)(t.viewMatrix,t.viewMatrix))},e.getViewMatrix=function(){if(t.viewMatrix)return t.viewMatrix;Object(b.k)(i,t.position,t.focalPoint,t.viewUp),Object(b.i)(i,i);var e=new Float64Array(16);return Object(b.d)(e,i),e},e.setProjectionMatrix=function(e){t.projectionMatrix=e},e.getProjectionMatrix=function(e,n,r){var a=new Float64Array(16);if(Object(b.h)(a),t.projectionMatrix){var s=1/t.physicalScale;return Object(y.p)(o,s,s,s),Object(b.d)(a,t.projectionMatrix),Object(b.r)(a,a,o),Object(b.i)(a,a),a}Object(b.h)(i);var l=t.clippingRange[1]-t.clippingRange[0],B=[t.clippingRange[0]+(n+1)*l/2,t.clippingRange[0]+(r+1)*l/2];if(t.parallelProjection){var Q=t.parallelScale*e,c=t.parallelScale,F=(t.windowCenter[0]-1)*Q,U=(t.windowCenter[0]+1)*Q,g=(t.windowCenter[1]-1)*c,d=(t.windowCenter[1]+1)*c;Object(b.n)(i,F,U,g,d,B[0],B[1]),Object(b.i)(i,i)}else{if(t.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");var I,m,C=Math.tan(Object(u.B)(t.viewAngle)/2);!0===t.useHorizontalViewAngle?(I=t.clippingRange[0]*C,m=t.clippingRange[0]*C/e):(I=t.clippingRange[0]*C*e,m=t.clippingRange[0]*C);var S=(t.windowCenter[0]-1)*I,h=(t.windowCenter[0]+1)*I,Z=(t.windowCenter[1]-1)*m,x=(t.windowCenter[1]+1)*m,p=B[0],G=B[1];i[0]=2*p/(h-S),i[5]=2*p/(x-Z),i[2]=(S+h)/(h-S),i[6]=(Z+x)/(x-Z),i[10]=-(p+G)/(G-p),i[14]=-1,i[11]=-2*p*G/(G-p),i[15]=0}return Object(b.d)(a,i),a},e.getCompositeProjectionMatrix=function(t,n,r){var a=e.getViewMatrix(),s=e.getProjectionMatrix(t,n,r);return Object(b.l)(s,a,s),s},e.setDirectionOfProjection=function(e,n,r){if(t.directionOfProjection[0]!==e||t.directionOfProjection[1]!==n||t.directionOfProjection[2]!==r){t.directionOfProjection[0]=e,t.directionOfProjection[1]=n,t.directionOfProjection[2]=r;var a=t.directionOfProjection;t.focalPoint[0]=t.position[0]+a[0]*t.distance,t.focalPoint[1]=t.position[1]+a[1]*t.distance,t.focalPoint[2]=t.position[2]+a[2]*t.distance,g()}},e.setDeviceAngles=function(n,r,a,s){var i=[3];Object(u.w)(t.physicalViewNorth,t.physicalViewUp,i);var o=Object(b.h)(new Float64Array(16));Object(b.q)(o,o,Object(u.B)(n),t.physicalViewUp),Object(b.q)(o,o,Object(u.B)(r),i),Object(b.q)(o,o,Object(u.B)(a),t.physicalViewNorth),Object(b.q)(o,o,Object(u.B)(-s),t.physicalViewUp);var l=new Float64Array([-t.physicalViewUp[0],-t.physicalViewUp[1],-t.physicalViewUp[2]]),B=new Float64Array(t.physicalViewNorth);Object(y.q)(l,l,o),Object(y.q)(B,B,o),e.setDirectionOfProjection(l[0],l[1],l[2]),e.setViewUp(B[0],B[1],B[2]),e.modified()},e.setOrientationWXYZ=function(t,n,a,s){var i=Object(b.h)(new Float64Array(16));if(0!==t&&(0!==n||0!==a||0!==s)){var o=Object(u.B)(t),l=ba();ya(l,[n,a,s],o),Object(b.j)(i,l)}var B=new Float64Array(3);Object(y.q)(B,[0,0,-1],i);var Q=new Float64Array(3);Object(y.q)(Q,[0,1,0],i),e.setDirectionOfProjection.apply(e,Object(r.a)(B)),e.setViewUp.apply(e,Object(r.a)(Q)),e.modified()},e.computeClippingRange=function(e){var n,r;n=t.viewPlaneNormal,r=t.position;for(var a=-n[0],s=-n[1],i=-n[2],o=-(a*r[0]+s*r[1]+i*r[2]),l=[a*e[0]+s*e[2]+i*e[4]+o,1e-18],B=0;B<2;B++)for(var Q=0;Q<2;Q++)for(var c=0;c<2;c++){var F=a*e[c]+s*e[2+Q]+i*e[4+B]+o;l[0]=F<l[0]?F:l[0],l[1]=F>l[1]?F:l[1]}return l}}var ml={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function Cl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ml,n),a.c.obj(e,t),a.c.get(e,t,["distance"]),a.c.setGet(e,t,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),a.c.getArray(e,t,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),a.c.setGetArray(e,t,["clippingRange","windowCenter"],2),a.c.setGetArray(e,t,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),Il(e,t)}var bl={newInstance:a.c.newInstance(Cl,"vtkCamera"),extend:Cl};function yl(e,t){t.classHierarchy.push("vtkLight"),e.getTransformedPosition=function(){return t.transformMatrix?[]:[].concat(t.position)},e.getTransformedFocalPoint=function(){return t.transformMatrix?[]:[].concat(t.focalPoint)},e.getDirection=function(){return t.directionMTime<t.mtime&&(t.direction[0]=t.focalPoint[0]-t.position[0],t.direction[1]=t.focalPoint[1]-t.position[1],t.direction[2]=t.focalPoint[2]-t.position[2],Object(u.y)(t.direction),t.directionMTime=t.mtime),t.direction},e.setDirectionAngle=function(t,n){var r=Object(u.B)(t),a=Object(u.B)(n);e.setPosition(Math.cos(r)*Math.sin(a),Math.sin(r),Math.cos(r)*Math.cos(a)),e.setFocalPoint(0,0,0),e.setPositional(0)},e.setLightTypeToHeadLight=function(){e.setLightType("HeadLight")},e.setLightTypeToCameraLight=function(){e.setLightType("CameraLight")},e.setLightTypeToSceneLight=function(){e.setTransformMatrix(null),e.setLightType("SceneLight")},e.lightTypeIsHeadLight=function(){return"HeadLight"===t.lightType},e.lightTypeIsSceneLight=function(){return"SceneLight"===t.lightType},e.lightTypeIsCameraLight=function(){return"CameraLight"===t.lightType}}var Sl={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function hl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Sl,n),a.c.obj(e,t),a.c.setGet(e,t,["intensity","switch","positional","exponent","coneAngle","transformMatrix","lightType","shadowAttenuation"]),a.c.setGetArray(e,t,["color","position","focalPoint","attenuationValues"],3),yl(e,t)}var Zl={newInstance:a.c.newInstance(hl,"vtkLight"),extend:hl,LIGHT_TYPES:["HeadLight","CameraLight","SceneLight"]},xl=a.c.vtkErrorMacro;function pl(e,t){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.push(e);var r=e.getNestedProps();if(r&&r.length)for(var a=0;a<r.length;a++)n(r[a],t);return t}t.classHierarchy.push("vtkViewport"),e.getViewProps=function(){return t.props},e.hasViewProp=function(e){return!!t.props.filter((function(t){return t===e})).length},e.addViewProp=function(n){n&&!e.hasViewProp(n)&&(t.props=t.props.concat(n))},e.removeViewProp=function(e){var n=t.props.filter((function(t){return t!==e}));t.props.length!==n.length&&(t.props=n)},e.removeAllViewProps=function(){t.props=[]},e.getViewPropsWithNestedProps=function(){for(var e=[],r=0;r<t.props.length;r++)n(t.props[r],e);return e},e.addActor2D=e.addViewProp,e.removeActor2D=function(t){e.removeViewProp(t)},e.getActors2D=function(){return t.actors2D=[],t.props.forEach((function(e){t.actors2D=t.actors2D.concat(e.getActors2D())})),t.actors2D},e.displayToView=function(){return xl("call displayToView on your view instead")},e.viewToDisplay=function(){return xl("callviewtodisplay on your view instead")},e.getSize=function(){return xl("call getSize on your View instead")},e.normalizedDisplayToProjection=function(t,n,r){var a=e.normalizedDisplayToNormalizedViewport(t,n,r);return e.normalizedViewportToProjection(a[0],a[1],a[2])},e.normalizedDisplayToNormalizedViewport=function(e,n,r){var a=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[(e-t.viewport[0])/a[0],(n-t.viewport[1])/a[1],r]},e.normalizedViewportToProjection=function(e,t,n){return[2*e-1,2*t-1,2*n-1]},e.projectionToNormalizedDisplay=function(t,n,r){var a=e.projectionToNormalizedViewport(t,n,r);return e.normalizedViewportToNormalizedDisplay(a[0],a[1],a[2])},e.normalizedViewportToNormalizedDisplay=function(e,n,r){var a=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[e*a[0]+t.viewport[0],n*a[1]+t.viewport[1],r]},e.projectionToNormalizedViewport=function(e,t,n){return[.5*(e+1),.5*(t+1),.5*(n+1)]},e.PickPropFrom=("PickPropFrom",function(){return xl("vtkViewport::".concat("PickPropFrom"," - NOT IMPLEMENTED"))})}var Gl={vtkWindow:null,background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function Rl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Gl,n),a.c.obj(e,t),a.c.event(e,t,"event"),a.c.setGetArray(e,t,["viewport"],4),a.c.setGetArray(e,t,["background","background2"],3),pl(e,t)}var Ll={newInstance:a.c.newInstance(Rl,"vtkViewport"),extend:Rl},Vl=a.k,Al=a.l,fl=a.m;function Nl(e){return function(){return Al("vtkRenderer::".concat(e," - NOT IMPLEMENTED"))}}function El(e,t){for(t.classHierarchy.push("vtkRenderer"),t.background||(t.background=[0,0,0,1]);t.background.length<3;)t.background.push(0);3===t.background.length&&t.background.push(1);var n={type:"ComputeVisiblePropBoundsEvent",renderer:e},r={type:"ResetCameraClippingRangeEvent",renderer:e},a={type:"ResetCameraEvent",renderer:e};e.updateCamera=function(){return t.activeCamera||(Vl("No cameras are on, creating one."),e.getActiveCameraAndResetIfCreated()),t.activeCamera.render(e),!0},e.updateLightsGeometryToFollowCamera=function(){var n=e.getActiveCameraAndResetIfCreated();t.lights.forEach((function(e){e.lightTypeIsSceneLight()||e.lightTypeIsCameraLight()||(e.lightTypeIsHeadLight()?(e.setPositionFrom(n.getPositionByReference()),e.setFocalPointFrom(n.getFocalPointByReference()),e.modified(n.getMTime())):Al("light has unknown light type",e.get()))}))},e.updateLightGeometry=function(){return!t.lightFollowCamera||e.updateLightsGeometryToFollowCamera()},e.allocateTime=Nl("allocateTime"),e.updateGeometry=Nl("updateGeometry"),e.getVTKWindow=function(){return t.renderWindow},e.setLayer=function(n){Vl(e.getClassName(),e,"setting Layer to ",n),t.layer!==n&&(t.layer=n,e.modified()),e.setPreserveColorBuffer(!!n)},e.setActiveCamera=function(n){return t.activeCamera!==n&&(t.activeCamera=n,e.modified(),e.invokeEvent({type:"ActiveCameraEvent",camera:n}),!0)},e.makeCamera=function(){var t=bl.newInstance();return e.invokeEvent({type:"CreateCameraEvent",camera:t}),t},e.getActiveCamera=function(){return t.activeCamera||(t.activeCamera=e.makeCamera()),t.activeCamera},e.getActiveCameraAndResetIfCreated=function(){return t.activeCamera||(e.getActiveCamera(),e.resetCamera()),t.activeCamera},e.getActors=function(){return t.actors=[],t.props.forEach((function(e){t.actors=t.actors.concat(e.getActors())})),t.actors},e.addActor=e.addViewProp,e.removeActor=function(n){t.actors=t.actors.filter((function(e){return e!==n})),e.removeViewProp(n),e.modified()},e.removeAllActors=function(){e.getActors().forEach((function(t){e.removeViewProp(t)})),t.actors=[],e.modified()},e.getVolumes=function(){return t.volumes=[],t.props.forEach((function(e){t.volumes=t.volumes.concat(e.getVolumes())})),t.volumes},e.addVolume=e.addViewProp,e.removeVolume=function(n){t.volumes=t.volumes.filter((function(e){return e!==n})),e.removeViewProp(n),e.modified()},e.removeAllVolumes=function(){e.getVolumes().forEach((function(t){e.removeViewProp(t)})),t.volumes=[],e.modified()},e.addLight=function(n){t.lights=[].concat(t.lights,n),e.modified()},e.removeLight=function(n){t.lights=t.lights.filter((function(e){return e!==n})),e.modified()},e.removeAllLights=function(){t.lights=[],e.modified()},e.setLightCollection=function(n){t.lights=n,e.modified()},e.makeLight=Zl.newInstance,e.createLight=function(){t.automaticLightCreation&&(t.createdLight&&(e.removeLight(t.createdLight),t.createdLight.delete(),t.createdLight=null),t.createdLight=e.makeLight(),e.addLight(t.createdLight),t.createdLight.setLightTypeToHeadLight(),t.createdLight.setPosition(e.getActiveCamera().getPosition()),t.createdLight.setFocalPoint(e.getActiveCamera().getFocalPoint()))},e.normalizedDisplayToWorld=function(t,n,r,a){var s=e.normalizedDisplayToProjection(t,n,r);return s=e.projectionToView(s[0],s[1],s[2],a),e.viewToWorld(s[0],s[1],s[2])},e.worldToNormalizedDisplay=function(t,n,r,a){var s=e.worldToView(t,n,r);return s=e.viewToProjection(s[0],s[1],s[2],a),e.projectionToNormalizedDisplay(s[0],s[1],s[2])},e.viewToWorld=function(e,n,r){if(null===t.activeCamera)return Al("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getViewMatrix();Object(b.g)(a,a),Object(b.i)(a,a);var s=new Float64Array([e,n,r]);return Object(y.q)(s,s,a),s},e.projectionToView=function(e,n,r,a){if(null===t.activeCamera)return Al("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];var s=t.activeCamera.getProjectionMatrix(a,-1,1);Object(b.g)(s,s),Object(b.i)(s,s);var i=new Float64Array([e,n,r]);return Object(y.q)(i,i,s),i},e.worldToView=function(e,n,r){if(null===t.activeCamera)return Al("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getViewMatrix();Object(b.i)(a,a);var s=new Float64Array([e,n,r]);return Object(y.q)(s,s,a),s},e.viewToProjection=function(e,n,r,a){if(null===t.activeCamera)return Al("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];var s=t.activeCamera.getProjectionMatrix(a,-1,1);Object(b.i)(s,s);var i=new Float64Array([e,n,r]);return Object(y.q)(i,i,s),i},e.computeVisiblePropBounds=function(){t.allBounds[0]=st.INIT_BOUNDS[0],t.allBounds[1]=st.INIT_BOUNDS[1],t.allBounds[2]=st.INIT_BOUNDS[2],t.allBounds[3]=st.INIT_BOUNDS[3],t.allBounds[4]=st.INIT_BOUNDS[4],t.allBounds[5]=st.INIT_BOUNDS[5];var r=!0;e.invokeEvent(n);for(var a=0;a<t.props.length;++a){var s=t.props[a];if(s.getVisibility()&&s.getUseBounds()){var i=s.getBounds();i&&Object(u.l)(i)&&(r=!1,i[0]<t.allBounds[0]&&(t.allBounds[0]=i[0]),i[1]>t.allBounds[1]&&(t.allBounds[1]=i[1]),i[2]<t.allBounds[2]&&(t.allBounds[2]=i[2]),i[3]>t.allBounds[3]&&(t.allBounds[3]=i[3]),i[4]<t.allBounds[4]&&(t.allBounds[4]=i[4]),i[5]>t.allBounds[5]&&(t.allBounds[5]=i[5]))}}return r&&(Object(u.D)(t.allBounds),Vl("Can't compute bounds, no 3D props are visible")),t.allBounds},e.resetCamera=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=n||e.computeVisiblePropBounds(),s=[0,0,0];if(!Object(u.l)(r))return Vl("Cannot reset camera!"),!1;var i=null;if(!e.getActiveCamera())return Al("Trying to reset non-existent camera"),!1;i=t.activeCamera.getViewPlaneNormal(),t.activeCamera.setViewAngle(30),s[0]=(r[0]+r[1])/2,s[1]=(r[2]+r[3])/2,s[2]=(r[4]+r[5])/2;var o=r[1]-r[0],l=r[3]-r[2],B=r[5]-r[4],Q=(o*=o)+(l*=l)+(B*=B);Q=0===Q?1:Q,Q=.5*Math.sqrt(Q);var c=Object(u.B)(t.activeCamera.getViewAngle()),F=Q,U=Q/Math.sin(.5*c),g=t.activeCamera.getViewUp();return Math.abs(Object(u.q)(g,i))>.999&&(fl("Resetting view-up since view plane normal is parallel"),t.activeCamera.setViewUp(-g[2],g[0],g[1])),t.activeCamera.setFocalPoint(s[0],s[1],s[2]),t.activeCamera.setPosition(s[0]+U*i[0],s[1]+U*i[1],s[2]+U*i[2]),e.resetCameraClippingRange(r),t.activeCamera.setParallelScale(F),t.activeCamera.setPhysicalScale(Q),t.activeCamera.setPhysicalTranslation(-s[0],-s[1],-s[2]),e.invokeEvent(a),!0},e.resetCameraClippingRange=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=n||e.computeVisiblePropBounds();if(!Object(u.l)(a))return Vl("Cannot reset camera clipping range!"),!1;if(e.getActiveCameraAndResetIfCreated(),!t.activeCamera)return Al("Trying to reset clipping range of non-existent camera"),!1;var s=t.activeCamera.computeClippingRange(a),i=0;if(t.activeCamera.getParallelProjection())i=.1*t.activeCamera.getParallelScale();else{var o=Object(u.B)(t.activeCamera.getViewAngle());i=.2*Math.tan(o/2)*s[1]}return s[1]-s[0]<i&&(i=i-s[1]+s[0],s[1]+=i/2,s[0]-=i/2),s[0]<0&&(s[0]=0),s[0]=.99*s[0]-(s[1]-s[0])*t.clippingRangeExpansion,s[1]=1.01*s[1]+(s[1]-s[0])*t.clippingRangeExpansion,s[0]=s[0]>=s[1]?.01*s[1]:s[0],t.nearClippingPlaneTolerance||(t.nearClippingPlaneTolerance=.01),s[0]<t.nearClippingPlaneTolerance*s[1]&&(s[0]=t.nearClippingPlaneTolerance*s[1]),t.activeCamera.setClippingRange(s[0],s[1]),e.invokeEvent(r),!1},e.setRenderWindow=function(e){e!==t.renderWindow&&(t.vtkWindow=e,t.renderWindow=e)},e.visibleActorCount=function(){return t.props.filter((function(e){return e.getVisibility()})).length},e.visibleVolumeCount=e.visibleActorCount,e.getMTime=function(){var e=t.mtime,n=t.activeCamera?t.activeCamera.getMTime():0;n>e&&(e=n);var r=t.createdLight?t.createdLight.getMTime():0;return r>e&&(e=r),e},e.getTransparent=function(){return!!t.preserveColorBuffer},e.isActiveCameraCreated=function(){return!!t.activeCamera}}var Dl={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,createdLight:null,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:Object(u.j)(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,pass:0};function vl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dl,n),Ll.extend(e,t,n),Object(a.d)(e,t,["renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),Object(a.i)(e,t,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","useShadows","pass"]),Object(a.e)(e,t,["actors","volumes","lights"]),Object(a.j)(e,t,["background"],4,1),El(e,t)}var Jl={newInstance:Object(a.f)(vl,"vtkRenderer"),extend:vl};function Wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hl=a.c.vtkErrorMacro,Tl=a.c.VOID;function kl(e,t){t.classHierarchy.push("vtkInteractorObserver");var n=Xl({},e);function r(){for(;t.subscribedEvents.length;)t.subscribedEvents.pop().unsubscribe()}function a(){dl.handledEvents.forEach((function(n){e["handle".concat(n)]&&t.subscribedEvents.push(t.interactor["on".concat(n)]((function(r){return t.processEvents?e["handle".concat(n)](r):Tl}),t.priority))}))}e.setInteractor=function(n){n!==t.interactor&&(r(),t.interactor=n,n&&t.enabled&&a(),e.modified())},e.setEnabled=function(n){n!==t.enabled&&(r(),n&&(t.interactor?a():Hl("\n          The interactor must be set before subscribing to events\n        ")),t.enabled=n,e.modified())},e.computeDisplayToWorld=function(e,n,r,a){return e?t.interactor.getView().displayToWorld(n,r,a,e):null},e.computeWorldToDisplay=function(e,n,r,a){return e?t.interactor.getView().worldToDisplay(n,r,a,e):null},e.setPriority=function(e){n.setPriority(e)&&t.interactor&&(r(),a())}}var Ml={enabled:!0,interactor:null,priority:0,processEvents:!0,subscribedEvents:[]};function wl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ml,n),a.c.obj(e,t),a.c.event(e,t,"InteractionEvent"),a.c.event(e,t,"StartInteractionEvent"),a.c.event(e,t,"EndInteractionEvent"),a.c.get(e,t,["interactor","enabled"]),a.c.setGet(e,t,["priority","processEvents"]),kl(e,t)}var Yl=Xl({newInstance:a.c.newInstance(wl,"vtkInteractorObserver"),extend:wl},{computeWorldToDisplay:function(e,t,n,r){return e.getRenderWindow().getViews()[0].worldToDisplay(t,n,r,e)},computeDisplayToWorld:function(e,t,n,r){return e.getRenderWindow().getViews()[0].displayToWorld(t,n,r,e)}}),Ol={States:{IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025}};function zl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pl=Ol.States,Kl={Rotate:Pl.IS_ROTATE,Pan:Pl.IS_PAN,Spin:Pl.IS_SPIN,Dolly:Pl.IS_DOLLY,CameraPose:Pl.IS_CAMERA_POSE,WindowLevel:Pl.IS_WINDOW_LEVEL,Slice:Pl.IS_SLICE};function jl(e,t){t.classHierarchy.push("vtkInteractorStyle"),Object.keys(Kl).forEach((function(n){a.c.event(e,t,"Start".concat(n,"Event")),e["start".concat(n)]=function(){t.state===Pl.IS_NONE&&(t.state=Kl[n],t.interactor.requestAnimation(e),e.invokeStartInteractionEvent({type:"StartInteractionEvent"}),e["invokeStart".concat(n,"Event")]({type:"Start".concat(n,"Event")}))},a.c.event(e,t,"End".concat(n,"Event")),e["end".concat(n)]=function(){t.state===Kl[n]&&(t.state=Pl.IS_NONE,t.interactor.cancelAnimation(e),e.invokeEndInteractionEvent({type:"EndInteractionEvent"}),e["invokeEnd".concat(n,"Event")]({type:"End".concat(n,"Event")}),t.interactor.render())}})),e.handleKeyPress=function(e){var n=t.interactor;switch(e.key){case"r":case"R":e.pokedRenderer.resetCamera(),n.render();break;case"w":case"W":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToWireframe&&t.setRepresentationToWireframe()})),n.render();break;case"s":case"S":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToSurface&&t.setRepresentationToSurface()})),n.render();break;case"v":case"V":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToPoints&&t.setRepresentationToPoints()})),n.render()}}}var _l={state:Pl.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function ql(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_l,n),Yl.extend(e,t,n),jl(e,t)}var $l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zl(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(ql,"vtkInteractorStyle"),extend:ql},Ol);function eB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tB=a.c.vtkDebugMacro,nB=$l.States,rB={type:"StartInteractionEvent"},aB={type:"InteractionEvent"},sB={type:"EndInteractionEvent"};function iB(e,t,n,r,a,s){var i=e.getActiveCamera(),o=i.getFocalPoint(),l=(o=t.getInteractorStyle().computeWorldToDisplay(e,o[0],o[1],o[2]))[2],B=t.getInteractorStyle().computeDisplayToWorld(e,n,r,l),Q=t.getInteractorStyle().computeDisplayToWorld(e,a,s,l),c=[Q[0]-B[0],Q[1]-B[1],Q[2]-B[2]];o=i.getFocalPoint();var F=i.getPosition();i.setFocalPoint(c[0]+o[0],c[1]+o[1],c[2]+o[2]),i.setPosition(c[0]+F[0],c[1]+F[1],c[2]+F[2])}var oB={dollyToPosition:function(e,t,n,r){var a=n.getActiveCamera();if(a.getParallelProjection()){var s=r.getView().getSize(),i=s[0]/2,o=s[1]/2,l=t.x,B=t.y;iB(n,r,i,o,l,B),a.setParallelScale(a.getParallelScale()/e),iB(n,r,l,B,i,o)}else{var Q=a.getFocalPoint(),c=a.getViewPlaneNormal();Q=r.getInteractorStyle().computeWorldToDisplay(n,Q[0],Q[1],Q[2]);var F=r.getInteractorStyle().computeDisplayToWorld(n,t.x,t.y,Q[2]);a.setFocalPoint(F[0],F[1],F[2]),a.dolly(e),n.resetCameraClippingRange();var U=a.getPosition();Q=a.getFocalPoint();var g=[0,0,0],d=c[0]*(Q[0]-U[0])+c[1]*(Q[1]-U[1])+c[2]*(Q[2]-U[2]);d/=Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2),g[0]=U[0]+c[0]*d,g[1]=U[1]+c[1]*d,g[2]=U[2]+c[2]*d,a.setFocalPoint(g[0],g[1],g[2]),n.resetCameraClippingRange()}},translateCamera:iB,dollyByFactor:function(e,t,n){if(!Number.isNaN(n)){var r=t.getActiveCamera();r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/n):(r.dolly(n),t.resetCameraClippingRange()),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}};function lB(e,t){t.classHierarchy.push("vtkInteractorStyleManipulator"),t.mouseManipulators=[],t.keyboardManipulators=[],t.vrManipulators=[],t.gestureManipulators=[],t.currentManipulator=null,t.currentWheelManipulator=null,t.centerOfRotation=[0,0,0],t.rotationFactor=1,e.removeAllManipulators=function(){e.removeAllMouseManipulators(),e.removeAllKeyboardManipulators(),e.removeAllVRManipulators(),e.removeAllGestureManipulators()},e.removeAllMouseManipulators=function(){t.mouseManipulators=[]},e.removeAllKeyboardManipulators=function(){t.keyboardManipulators=[]},e.removeAllVRManipulators=function(){t.vrManipulators=[]},e.removeAllGestureManipulators=function(){t.gestureManipulators=[]};var n=function(t,n){var r=n.indexOf(t);return-1!==r&&(n.splice(r,1),e.modified(),!0)};e.removeMouseManipulator=function(e){return n(e,t.mouseManipulators)},e.removeKeyboardManipulator=function(e){return n(e,t.keyboardManipulators)},e.removeVRManipulator=function(e){return n(e,t.vrManipulators)},e.removeGestureManipulator=function(e){return n(e,t.gestureManipulators)};var r=function(t,n){return-1===n.indexOf(t)&&(n.push(t),e.modified(),!0)};e.addMouseManipulator=function(e){return r(e,t.mouseManipulators)},e.addKeyboardManipulator=function(e){return r(e,t.keyboardManipulators)},e.addVRManipulator=function(e){return r(e,t.vrManipulators)},e.addGestureManipulator=function(e){return r(e,t.gestureManipulators)},e.getNumberOfMouseManipulators=function(){return t.mouseManipulators.length},e.getNumberOfKeyboardManipulators=function(){return t.keyboardManipulators.length},e.getNumberOfVRManipulators=function(){return t.vrManipulators.length},e.getNumberOfGestureManipulators=function(){return t.gestureManipulators.length},e.resetCurrentManipulator=function(){t.currentManipulator=null,t.currentWheelManipulator=null},e.handleLeftButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(1,n)},e.handleMiddleButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(2,n)},e.handleRightButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(3,n)},e.handleButton3D=function(n){n&&(t.currentManipulator=e.findVRManipulator(n.device,n.input,n.pressed),t.currentManipulator?(t.currentManipulator.onButton3D(e,n.pokedRenderer,t.state,n.device,n.input,n.pressed),n.pressed?e.startCameraPose():e.endCameraPose()):tB("No manipulator found"))},e.handleMove3D=function(n){t.currentManipulator&&t.state===nB.IS_CAMERA_POSE&&t.currentManipulator.onMove3D(e,n.pokedRenderer,t.state,n)},e.onButtonDown=function(n,r){t.currentManipulator||(t.currentManipulator=e.findMouseManipulator(n,r.shiftKey,r.controlKey,r.altKey),t.currentManipulator?(t.currentManipulator.setCenter&&t.currentManipulator.setCenter(t.centerOfRotation),t.currentManipulator.setRotationFactor&&t.currentManipulator.setRotationFactor(t.rotationFactor),t.currentManipulator.startInteraction(),t.currentManipulator.onButtonDown(t.interactor,r.pokedRenderer,r.position),t.interactor.requestAnimation(e.onButtonDown),e.invokeStartInteractionEvent(rB)):tB("No manipulator found"))},e.findMouseManipulator=function(e,n,r,a){for(var s=null,i=t.mouseManipulators.length;i--;){var o=t.mouseManipulators[i];o&&o.getButton()===e&&o.getShift()===n&&o.getControl()===r&&o.getAlt()===a&&o.isDragEnabled()&&(s=o)}return s},e.findVRManipulator=function(e,n){for(var r=null,a=t.vrManipulators.length;a--;){var s=t.vrManipulators[a];s&&s.getDevice()===e&&s.getInput()===n&&(r=s)}return r},e.handleLeftButtonRelease=function(){e.onButtonUp(1)},e.handleMiddleButtonRelease=function(){e.onButtonUp(2)},e.handleRightButtonRelease=function(){e.onButtonUp(3)},e.onButtonUp=function(n){t.currentManipulator&&t.currentManipulator.getButton&&t.currentManipulator.getButton()===n&&(t.currentManipulator.onButtonUp(t.interactor),t.currentManipulator.endInteraction(),t.currentManipulator=null,t.interactor.cancelAnimation(e.onButtonDown),e.invokeEndInteractionEvent(sB))},e.handleStartMouseWheel=function(n){if(!t.currentWheelManipulator){for(var r=null,a=t.mouseManipulators.length;a--;){var s=t.mouseManipulators[a];s&&s.isScrollEnabled()&&s.getShift()===n.shiftKey&&s.getControl()===n.controlKey&&s.getAlt()===n.altKey&&(r=s)}r?(t.currentWheelManipulator=r,t.currentWheelManipulator.onStartScroll(t.interactor,n.pokedRenderer,n.spinY),t.currentWheelManipulator.startInteraction(),t.interactor.requestAnimation(e.handleStartMouseWheel),e.invokeStartInteractionEvent(rB)):tB("No manipulator found")}},e.handleEndMouseWheel=function(){t.currentWheelManipulator&&t.currentWheelManipulator.onEndScroll&&(t.currentWheelManipulator.onEndScroll(t.interactor),t.currentWheelManipulator.endInteraction(),t.currentWheelManipulator=null,t.interactor.cancelAnimation(e.handleStartMouseWheel),e.invokeEndInteractionEvent(sB))},e.handleMouseWheel=function(n){t.currentWheelManipulator&&t.currentWheelManipulator.onScroll&&(t.currentWheelManipulator.onScroll(t.interactor,n.pokedRenderer,n.spinY,t.cachedMousePosition),e.invokeInteractionEvent(aB))},e.handleMouseMove=function(n){t.cachedMousePosition=n.position,t.currentManipulator&&t.currentManipulator.onMouseMove&&(t.currentManipulator.onMouseMove(t.interactor,n.pokedRenderer,n.position),e.invokeInteractionEvent(aB))},e.handleKeyPress=function(n){t.keyboardManipulators.filter((function(e){return e.onKeyPress})).forEach((function(r){r.onKeyPress(t.interactor,n.pokedRenderer,n.key),e.invokeInteractionEvent(aB)}))},e.handleKeyDown=function(n){t.keyboardManipulators.filter((function(e){return e.onKeyDown})).forEach((function(r){r.onKeyDown(t.interactor,n.pokedRenderer,n.key),e.invokeInteractionEvent(aB)}))},e.handleKeyUp=function(n){t.keyboardManipulators.filter((function(e){return e.onKeyUp})).forEach((function(r){r.onKeyUp(t.interactor,n.pokedRenderer,n.key),e.invokeInteractionEvent(aB)}))},e.handleStartPinch=function(n){e.startDolly();for(var r=t.gestureManipulators.length;r--;){var a=t.gestureManipulators[r];a&&a.isPinchEnabled()&&(a.onStartPinch(t.interactor,n.scale),a.startInteraction())}t.interactor.requestAnimation(e.handleStartPinch),e.invokeStartInteractionEvent(rB)},e.handleEndPinch=function(){e.endDolly();for(var n=t.gestureManipulators.length;n--;){var r=t.gestureManipulators[n];r&&r.isPinchEnabled()&&(r.onEndPinch(t.interactor),r.endInteraction())}t.interactor.cancelAnimation(e.handleStartPinch),e.invokeEndInteractionEvent(sB)},e.handleStartRotate=function(n){e.startRotate();for(var r=t.gestureManipulators.length;r--;){var a=t.gestureManipulators[r];a&&a.isRotateEnabled()&&(a.onStartRotate(t.interactor,n.rotation),a.startInteraction())}t.interactor.requestAnimation(e.handleStartRotate),e.invokeStartInteractionEvent(rB)},e.handleEndRotate=function(){e.endRotate();for(var n=t.gestureManipulators.length;n--;){var r=t.gestureManipulators[n];r&&r.isRotateEnabled()&&(r.onEndRotate(t.interactor),r.endInteraction())}t.interactor.cancelAnimation(e.handleStartRotate),e.invokeEndInteractionEvent(sB)},e.handleStartPan=function(n){e.startPan();for(var r=t.gestureManipulators.length;r--;){var a=t.gestureManipulators[r];a&&a.isPanEnabled()&&(a.onStartPan(t.interactor,n.translation),a.startInteraction())}t.interactor.requestAnimation(e.handleStartPan),e.invokeStartInteractionEvent(rB)},e.handleEndPan=function(){e.endPan();for(var n=t.gestureManipulators.length;n--;){var r=t.gestureManipulators[n];r&&r.isPanEnabled()&&(r.onEndPan(t.interactor),r.endInteraction())}t.interactor.cancelAnimation(e.handleStartPan),e.invokeEndInteractionEvent(sB)},e.handlePinch=function(n){for(var r=t.gestureManipulators.length,a=0;r--;){var s=t.gestureManipulators[r];s&&s.isPinchEnabled()&&(s.onPinch(t.interactor,n.pokedRenderer,n.scale),a++)}a&&e.invokeInteractionEvent(aB)},e.handlePan=function(n){for(var r=t.gestureManipulators.length,a=0;r--;){var s=t.gestureManipulators[r];s&&s.isPanEnabled()&&(s.onPan(t.interactor,n.pokedRenderer,n.translation),a++)}a&&e.invokeInteractionEvent(aB)},e.handleRotate=function(n){for(var r=t.gestureManipulators.length,a=0;r--;){var s=t.gestureManipulators[r];s&&s.isRotateEnabled()&&(s.onRotate(t.interactor,n.pokedRenderer,n.rotation),a++)}a&&e.invokeInteractionEvent(aB)}}var BB={cachedMousePosition:null,currentManipulator:null,currentWheelManipulator:null,centerOfRotation:[0,0,0],rotationFactor:1};function QB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,BB,n),$l.extend(e,t,n),a.c.setGet(e,t,["rotationFactor"]),a.c.get(e,t,["mouseManipulators","keyboardManipulators","vrManipulators","gestureManipulators"]),a.c.setGetArray(e,t,["centerOfRotation"],3),lB(e,t)}var cB=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eB(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(QB,"vtkInteractorStyleManipulator"),extend:QB},oB);function FB(e,t){t.classHierarchy.push("vtkCompositeCameraManipulator"),e.computeDisplayCenter=function(e,n){var r=e.computeWorldToDisplay(n,t.center[0],t.center[1],t.center[2]);t.displayCenter[0]=r[0],t.displayCenter[1]=r[1]}}var UB={center:[0,0,0],rotationFactor:1,displayCenter:[0,0]};var gB={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,UB,n),a.c.setGet(e,t,["rotationFactor"]),a.c.setGetArray(e,t,["displayCenter"],2),a.c.setGetArray(e,t,["center"],3),FB(e,t)}};function dB(e,t){t.classHierarchy.push("vtkCompositeMouseManipulator"),e.startInteraction=function(){},e.endInteraction=function(){},e.onButtonDown=function(e,t,n){},e.onButtonUp=function(e){},e.onMouseMove=function(e,t,n){},e.onStartScroll=function(e,t,n){},e.onScroll=function(e,t,n){},e.onEndScroll=function(e){},e.isDragEnabled=function(){return t.dragEnabled},e.isScrollEnabled=function(){return t.scrollEnabled}}var uB={button:1,shift:!1,control:!1,alt:!1,dragEnabled:!0,scrollEnabled:!1};var IB={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,uB,n),a.c.setGet(e,t,["button","shift","control","alt"]),a.c.set(e,t,["dragEnabled","scrollEnabled"]),dB(e,t)}};function mB(e,t){t.classHierarchy.push("vtkMouseCameraTrackballRotateManipulator");var n=new Float64Array(3),r=new Float64Array(3),a=new Float64Array(3),s=new Float64Array(16),i=new Float64Array(3),o=new Float64Array(3),l=new Float64Array(3);e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(e,B,Q){if(Q){var c=B.getActiveCamera(),F=c.getPosition(),U=c.getFocalPoint();Object(b.h)(s);var g=t.center,d=t.rotationFactor;Object(b.s)(s,s,g);var I=t.previousPosition.x-Q.x,m=t.previousPosition.y-Q.y,C=e.getView().getSize(),S=c.getViewUp();Object(b.q)(s,s,Object(u.B)(360*I/C[0]*d),S),Object(u.w)(c.getDirectionOfProjection(),S,i),Object(b.q)(s,s,Object(u.B)(-360*m/C[1]*d),i),o[0]=-g[0],o[1]=-g[1],o[2]=-g[2],Object(b.s)(s,s,o),Object(y.q)(n,F,s),Object(y.q)(r,U,s),l[0]=S[0]+F[0],l[1]=S[1]+F[1],l[2]=S[2]+F[2],Object(y.q)(a,l,s),c.setPosition(n[0],n[1],n[2]),c.setFocalPoint(r[0],r[1],r[2]),c.setViewUp(a[0]-n[0],a[1]-n[1],a[2]-n[2]),c.orthogonalizeViewUp(),B.resetCameraClippingRange(),e.getLightFollowCamera()&&B.updateLightsGeometryToFollowCamera(),t.previousPosition=Q}}}var CB={};function bB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,CB,n),a.c.obj(e,t),IB.extend(e,t,n),gB.extend(e,t,n),mB(e,t)}var yB={newInstance:a.c.newInstance(bB,"vtkMouseCameraTrackballRotateManipulator"),extend:bB};function SB(e,t){t.classHierarchy.push("vtkMouseCameraTrackballRollManipulator");var n=new Float64Array(3),r=new Float64Array(3),a=new Float64Array(3),s=new Float64Array(16),i=new Float64Array(3),o=new Float64Array(3),l=new Float64Array(3);e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(B,Q,c){if(c){var F=Q.getActiveCamera(),U=F.getPosition(),g=F.getFocalPoint(),d=F.getViewUp();n[0]=g[0]-U[0],n[1]=g[1]-U[1],n[2]=g[2]-U[2],e.computeDisplayCenter(B.getInteractorStyle(),Q);var I=t.previousPosition.x-t.displayCenter[0],m=c.x-t.displayCenter[0],C=t.previousPosition.y-t.displayCenter[1],S=c.y-t.displayCenter[1];if(!(0===m&&0===S||0===I&&0===C)){var h=Object(u.F)((I*S-C*m)/(Math.sqrt(I*I+C*C)*Math.sqrt(m*m+S*S))),Z=t.center;Object(b.h)(s),a[0]=-Z[0],a[1]=-Z[1],a[2]=-Z[2],Object(b.s)(s,s,Z),Object(b.q)(s,s,Object(u.B)(h),n),Object(b.s)(s,s,a),Object(y.q)(i,U,s),Object(y.q)(o,g,s),r[0]=d[0]+U[0],r[1]=d[1]+U[1],r[2]=d[2]+U[2],Object(y.q)(l,r,s),F.setPosition(i[0],i[1],i[2]),F.setFocalPoint(o[0],o[1],o[2]),F.setViewUp(l[0]-i[0],l[1]-i[1],l[2]-i[2]),F.orthogonalizeViewUp(),Q.resetCameraClippingRange(),B.getLightFollowCamera()&&Q.updateLightsGeometryToFollowCamera(),t.previousPosition=c}}}}var hB={};function ZB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hB,n),a.c.obj(e,t),gB.extend(e,t,n),IB.extend(e,t,n),SB(e,t)}var xB={newInstance:a.c.newInstance(ZB,"vtkMouseCameraTrackballRollManipulator"),extend:ZB};function pB(e){return e*e}function GB(e,t){t.classHierarchy.push("vtkMouseCameraTrackballMultiRotateManipulator");var n=yB.newInstance(),r=xB.newInstance(),a=null;e.onButtonDown=function(t,s,i){var o,l,B=t.getView().getSize(),Q=[.5*B[0],.5*B[1]],c=.9*((o=Q[0])<(l=Q[1])?l:o),F=pB(Q[0]-i.x)+pB(Q[1]-i.y);(a=c*c>F?n:r).setButton(e.getButton()),a.setShift(e.getShift()),a.setControl(e.getControl()),a.setCenter(e.getCenter()),a.onButtonDown(t,i)},e.onButtonUp=function(e){a&&a.onButtonUp(e)},e.onMouseMove=function(e,t,n){a&&a.onMouseMove(e,t,n)}}var RB={};function LB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,RB,n),a.c.obj(e,t),IB.extend(e,t,n),gB.extend(e,t,n),GB(e,t)}var VB={newInstance:a.c.newInstance(LB,"vtkMouseCameraTrackballMultiRotateManipulator"),extend:LB};function AB(e,t){t.classHierarchy.push("vtkMouseCameraTrackballPanManipulator"),e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(e,n,r){if(r){var a=r,s=t.previousPosition;t.previousPosition=r;var i=n.getActiveCamera(),o=i.getPosition(),l=i.getFocalPoint();if(i.getParallelProjection()){i.orthogonalizeViewUp();var B=i.getViewUp(),Q=i.getViewPlaneNormal(),c=[0,0,0];Object(u.w)(Q,B,c);var F=e.getView().getSize()[1],U=(a.x-s.x)/F,g=(s.y-a.y)/F,d=i.getParallelScale();g*=2*d;var I=c[0]*(U*=2*d)+B[0]*g;o[0]+=I,l[0]+=I,I=c[1]*U+B[1]*g,o[1]+=I,l[1]+=I,I=c[2]*U+B[2]*g,o[2]+=I,l[2]+=I,i.setPosition(o[0],o[1],o[2]),i.setFocalPoint(l[0],l[1],l[2])}else{var m=t.center,C=e.getInteractorStyle(),b=C.computeWorldToDisplay(n,m[0],m[1],m[2])[2],y=C.computeDisplayToWorld(n,a.x,a.y,b),S=C.computeDisplayToWorld(n,s.x,s.y,b),h=[o[0]+(S[0]-y[0]),o[1]+(S[1]-y[1]),o[2]+(S[2]-y[2])],Z=[l[0]+(S[0]-y[0]),l[1]+(S[1]-y[1]),l[2]+(S[2]-y[2])];i.setPosition(h[0],h[1],h[2]),i.setFocalPoint(Z[0],Z[1],Z[2])}n.resetCameraClippingRange(),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}}var fB={};function NB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fB,n),a.c.obj(e,t),gB.extend(e,t,n),IB.extend(e,t,n),AB(e,t)}var EB={newInstance:a.c.newInstance(NB,"vtkMouseCameraTrackballPanManipulator"),extend:NB};function DB(e,t){t.classHierarchy.push("vtkMouseCameraTrackballZoomManipulator"),e.onButtonDown=function(e,n,r){t.previousPosition=r;var a=e.getView().getSize(),s=n.getActiveCamera(),i=t.flipDirection?-1:1;if(s.getParallelProjection())t.zoomScale=1.5/a[1]*i;else{var o=s.getClippingRange();t.zoomScale=o[1]/a[1]*1.5*i}},e.onMouseMove=function(e,n,r){if(r){var a=t.previousPosition.y-r.y,s=n.getActiveCamera();if(s.getParallelProjection()){var i=a*t.zoomScale;s.setParallelScale((1-i)*s.getParallelScale())}else{var o=s.getPosition(),l=s.getFocalPoint(),B=s.getDirectionOfProjection(),Q=a*t.zoomScale,c=Q*B[0];o[0]+=c,l[0]+=c,c=Q*B[1],o[1]+=c,l[1]+=c,c=Q*B[2],o[2]+=c,l[2]+=c,s.getFreezeFocalPoint()||s.setFocalPoint(l[0],l[1],l[2]),s.setPosition(o[0],o[1],o[2]),n.resetCameraClippingRange()}e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),t.previousPosition=r}},e.onScroll=function(e,t,n){if(n){var r=t.getActiveCamera(),a=1-n/10;r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/a):(r.dolly(a),t.resetCameraClippingRange()),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}}var vB={zoomScale:0,flipDirection:!1};function JB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vB,n),a.c.obj(e,t),IB.extend(e,t,n),gB.extend(e,t,n),a.c.setGet(e,t,["flipDirection"]),DB(e,t)}var WB={newInstance:a.c.newInstance(JB,"vtkMouseCameraTrackballZoomManipulator"),extend:JB};function XB(e,t){t.classHierarchy.push("vtkMouseCameraTrackballZoomToMouseManipulator");var n=e.onButtonDown;e.onButtonDown=function(e,r,a){n(e,r,a),t.zoomPosition=a},e.onMouseMove=function(e,n,r){if(r){var a=(t.previousPosition.y-r.y)*t.zoomScale;cB.dollyToPosition(1-a,t.zoomPosition,n,e),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),t.previousPosition=r}},e.onScroll=function(e,t,n,r){if(n&&r){var a=1-.1*n;cB.dollyToPosition(a,r,t,e),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}}var HB={zoomPosition:null};function TB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,HB,n),WB.extend(e,t,n),XB(e,t)}var kB={newInstance:a.c.newInstance(TB,"vtkMouseCameraTrackballZoomToMouseManipulator"),extend:TB};function MB(e,t){t.classHierarchy.push("vtkCompositeGestureManipulator"),e.startInteraction=function(){},e.endInteraction=function(){},e.onStartPinch=function(e,t){},e.onStartRotate=function(e,t){},e.onStartPan=function(e,t){},e.onPinch=function(e,t,n){},e.onRotate=function(e,t,n){},e.onPan=function(e,t,n){},e.onEndPinch=function(e){},e.onEndRotate=function(e){},e.onEndPan=function(e){},e.isPinchEnabled=function(){return t.pinchEnabled},e.isPanEnabled=function(){return t.panEnabled},e.isRotateEnabled=function(){return t.rotateEnabled}}var wB={pinchEnabled:!0,panEnabled:!0,rotateEnabled:!0};var YB={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wB,n),a.c.set(e,t,["pinchEnabled","panEnabled","rotateEnabled"]),a.c.setGet(e,t,["interactorStyle"]),MB(e,t)}};function OB(e,t){t.classHierarchy.push("vtkGestureCameraManipulator"),e.onStartPinch=function(e,n){t.previousScale=n},e.onStartRotate=function(e,n){t.previousRotation=n},e.onStartPan=function(e,n){t.previousTranslation=n},e.onPinch=function(e,n,r){cB.dollyByFactor(e,n,r/t.previousScale),t.previousScale=r},e.onPan=function(e,n,r){var a=n.getActiveCamera(),s=e.getInteractorStyle(),i=a.getFocalPoint(),o=(i=s.computeWorldToDisplay(n,i[0],i[1],i[2]))[2],l=r,B=t.previousTranslation,Q=s.computeDisplayToWorld(n,i[0]+l[0]-B[0],i[1]+l[1]-B[1],o),c=s.computeDisplayToWorld(n,i[0],i[1],o),F=[];F[0]=c[0]-Q[0],F[1]=c[1]-Q[1],F[2]=c[2]-Q[2],i=a.getFocalPoint();var U=a.getPosition();a.setFocalPoint(F[0]+i[0],F[1]+i[1],F[2]+i[2]),a.setPosition(F[0]+U[0],F[1]+U[1],F[2]+U[2]),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),a.orthogonalizeViewUp(),t.previousTranslation=r},e.onRotate=function(e,n,r){var a=n.getActiveCamera();a.roll(r-t.previousRotation),a.orthogonalizeViewUp(),t.previousRotation=r}}var zB={};function PB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zB,n),a.c.obj(e,t),YB.extend(e,t,n),gB.extend(e,t,n),OB(e,t)}var KB={newInstance:a.c.newInstance(PB,"vtkGestureCameraManipulator"),extend:PB},jB=n(21);function _B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_B(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $B=_t.a.createContext(null),eQ=_t.a.createContext(null),tQ=_t.a.createContext(null),nQ=_t.a.createContext(null),rQ=_t.a.createContext(null),aQ={None:null,Pan:EB,Zoom:WB,Roll:xB,Rotate:yB,MultiRotate:VB,ZoomToMouse:kB},sQ={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},iQ=function(e){Yt(s,jt.Component);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Kt(t);if(n){var a=Kt(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return Pt(this,e)});function s(e){var t;Object(Se.a)(this,s),(t=r.call(this,e)).containerRef=_t.a.createRef(),t.renderWindow=Un.newInstance(),t.renderer=Jl.newInstance(),t.renderWindow.addRenderer(t.renderer),t.camera=t.renderer.getActiveCamera(),t.openglRenderWindow=$o.newInstance(),t.renderWindow.addView(t.openglRenderWindow),t.interactor=dl.newInstance(),t.interactor.setView(t.openglRenderWindow),t.interactor.initialize(),t.style=cB.newInstance(),t.interactor.setInteractorStyle(t.style),t.selector=Zs.newInstance({captureZValues:!0}),t.selector.setFieldAssociation(jB.a.FIELD_ASSOCIATION_POINTS),t.selector.attach(t.openglRenderWindow,t.renderer),t.resizeObserver=new ResizeObserver((function(){return t.onResize()})),t.renderView=t.renderWindow.render,t.resetCamera=t.resetCamera.bind(zt(t)),t.hasFocus=!1,t.handleKey=function(e){if(t.hasFocus)switch(e.code){case"KeyR":t.resetCamera()}},t.onEnter=function(){t.hasFocus=!0},t.onLeave=function(){t.hasFocus=!1};var n=Object(a.b)((function(e){var n=e.x,r=e.y;if(-1!==t.props.pickingModes.indexOf("hover")){var a=t.pick(n,r,n,r);0===t.lastSelection.length&&0===a.length||(t.lastSelection=a,t.props.onHover&&t.props.onHover(a[0]),"setProps"in t.props&&t.props.setProps({hoverInfo:a[0]}))}}),10);return t.onClick=function(e){return function(e){var n=e.x,r=e.y;if(-1!==t.props.pickingModes.indexOf("click")){var a=t.pick(n,r,n,r);t.props.onClick&&t.props.onClick(a[0]),"setProps"in t.props&&t.props.setProps({clickInfo:a[0]})}}(t.getScreenEventPositionFor(e))},t.onMouseMove=function(e){return n(t.getScreenEventPositionFor(e))},t.lastSelection=[],t}return Object(he.a)(s,[{key:"getScreenEventPositionFor",value:function(e){var t=this.containerRef.current.getBoundingClientRect(),n=this.openglRenderWindow.getSize(),r=Object(oe.a)(n,2),a=r[0],s=r[1],i=a/t.width,o=s/t.height;return{x:i*(e.clientX-t.left),y:o*(t.height-e.clientY+t.top),z:0}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.children,r=e.style,a=e.className;return _t.a.createElement("div",{key:t,id:t,className:a,style:qB({position:"relative"},r),onMouseEnter:this.onEnter,onMouseLeave:this.onLeave,onClick:this.onClick,onMouseMove:this.onMouseMove},_t.a.createElement("div",{style:sQ,ref:this.containerRef}),_t.a.createElement("div",null,_t.a.createElement($B.Provider,{value:this},n)))}},{key:"onResize",value:function(){var e=this.containerRef.current;if(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;this.openglRenderWindow.setSize(Math.max(n,10),Math.max(r,10)),this.renderWindow.render()}}},{key:"componentDidMount",value:function(){var e=this.containerRef.current;this.openglRenderWindow.setContainer(e),this.interactor.bindEvents(e),this.onResize(),this.resizeObserver.observe(e),this.update(this.props),document.addEventListener("keyup",this.handleKey),this.resetCamera()}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKey),this.resizeObserver.disconnect(),this.resizeObserver=null,this.interactor.unbindEvents(),this.openglRenderWindow.setContainer(null),this.renderWindow.removeRenderer(this.renderer),this.renderWindow.removeView(this.openglRenderWindow),this.interactor.delete(),this.interactor=null,this.renderer.delete(),this.renderer=null,this.renderWindow.delete(),this.renderWindow=null,this.openglRenderWindow.delete(),this.openglRenderWindow=null}},{key:"update",value:function(e,t){var n,r,a=e.background,s=e.interactorSettings,i=e.cameraPosition,o=e.cameraViewUp,l=e.cameraParallelProjection,B=e.triggerRender,Q=e.triggerResetCamera;!a||t&&a===t.background||this.renderer.setBackground(a),!s||t&&s===t.interactorSettings||(r=s,(n=this.style).removeAllMouseManipulators(),r.forEach((function(e){var t=aQ[e.action];if(t){var r=e.button,a=e.shift,s=e.control,i=e.alt,o=e.scrollEnabled,l=e.dragEnabled,B=t.newInstance();B.setButton(r),B.setShift(!!a),B.setControl(!!s),B.setAlt(!!i),void 0!==o&&B.setScrollEnabled(o),void 0!==l&&B.setDragEnabled(l),n.addMouseManipulator(B)}})),n.addGestureManipulator(KB.newInstance())),!l||t&&l===t.cameraParallelProjection||(this.renderer.getActiveCamera().setParallelProjection(l),t&&this.resetCamera()),!i||t&&JSON.stringify(i)===JSON.stringify(t.cameraPosition)||(this.renderer.getActiveCamera().set({position:i,viewUp:o,focalPoint:[0,0,0]}),t&&this.resetCamera()),t&&B!==t.triggerRender&&setTimeout(this.renderView,0),t&&Q!==t.triggerResetCamera&&setTimeout(this.resetCamera,0)}},{key:"resetCamera",value:function(){this.renderer.resetCamera(),this.style.setCenterOfRotation(this.renderer.getActiveCamera().getFocalPoint()),this.renderWindow.render()}},{key:"pick",value:function(e,t,n,r){var a=this;return this.selector.setArea(e,t,n,r),this.selector.releasePixBuffers(),this.previousSelectedData=null,this.selector.captureBuffers()?(this.selections=this.selector.generateSelection(e,t,n,r)||[],this.selections.map((function(s){var i=s.getProperties(),o=i.prop,l=i.compositeID,B=i.displayPosition,Q=[],c="";return e!==n||t!==r?(c="frustrum",Q.push(Array.from(a.openglRenderWindow.displayToWorld(e,t,0,a.renderer))),Q.push(Array.from(a.openglRenderWindow.displayToWorld(n,t,0,a.renderer))),Q.push(Array.from(a.openglRenderWindow.displayToWorld(n,r,0,a.renderer))),Q.push(Array.from(a.openglRenderWindow.displayToWorld(e,r,0,a.renderer))),Q.push(Array.from(a.openglRenderWindow.displayToWorld(e,t,1,a.renderer))),Q.push(Array.from(a.openglRenderWindow.displayToWorld(n,t,1,a.renderer))),Q.push(Array.from(a.openglRenderWindow.displayToWorld(n,r,1,a.renderer))),Q.push(Array.from(a.openglRenderWindow.displayToWorld(e,r,1,a.renderer)))):(c="ray",Q.push(Array.from(a.openglRenderWindow.displayToWorld(e,t,0,a.renderer))),Q.push(Array.from(a.openglRenderWindow.displayToWorld(e,t,1,a.renderer)))),qB(qB({worldPosition:Array.from(a.openglRenderWindow.displayToWorld(B[0],B[1],B[2],a.renderer)),displayPosition:B,compositeID:l},o.get("representationId")),{},Object(ye.a)({},c,Q))}))):[]}}]),s}();iQ.defaultProps={style:{width:"100%",height:"100%"},background:[.2,.3,.4],cameraPosition:[0,0,1],cameraViewUp:[0,1,0],cameraParallelProjection:!1,triggerRender:0,triggerResetCamera:0,interactorSettings:[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",shift:!0},{button:1,action:"Zoom",alt:!0},{button:1,action:"ZoomToMouse",control:!0},{button:1,action:"Roll",alt:!0,shift:!0}],pickingModes:[]},iQ.propTypes={id:$t.a.string,style:$t.a.object,className:$t.a.string,background:$t.a.array,interactorSettings:$t.a.array,cameraPosition:$t.a.array,cameraViewUp:$t.a.array,cameraParallelProjection:$t.a.bool,triggerRender:$t.a.number,triggerResetCamera:$t.a.number,children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node]),pickingModes:$t.a.arrayOf($t.a.string),onClick:$t.a.func,clickInfo:$t.a.object,onHover:$t.a.func,hoverInfo:$t.a.object};var oQ=iQ;function lQ(e){return function(){return a.c.vtkErrorMacro("vtkProp::".concat(e," - NOT IMPLEMENTED"))}}function BQ(e,t){t.classHierarchy.push("vtkProp"),e.getMTime=function(){for(var e=t.mtime,n=0;n<t.textures.length;++n){var r=t.textures[n].getMTime();r>e&&(e=r)}return e},e.getNestedProps=function(){return null},e.getActors=function(){return[]},e.getActors2D=function(){return[]},e.getVolumes=function(){return[]},e.pick=lQ("pick"),e.hasKey=lQ("hasKey"),e.getRedrawMTime=function(){return t.mtime},e.setEstimatedRenderTime=function(e){t.estimatedRenderTime=e,t.savedEstimatedRenderTime=e},e.restoreEstimatedRenderTime=function(){t.estimatedRenderTime=t.savedEstimatedRenderTime},e.addEstimatedRenderTime=function(e){t.estimatedRenderTime+=e},e.setAllocatedRenderTime=function(e){t.allocatedRenderTime=e,t.savedEstimatedRenderTime=t.estimatedRenderTime,t.estimatedRenderTime=0},e.getSupportsSelection=function(){return!1},e.getTextures=function(){return t.textures},e.hasTexture=function(e){return-1!==t.textures.indexOf(e)},e.addTexture=function(n){n&&!e.hasTexture(n)&&(t.textures=t.textures.concat(n),e.modified())},e.removeTexture=function(n){var r=t.textures.filter((function(e){return e!==n}));t.textures.length!==r.length&&(t.textures=r,e.modified())},e.removeAllTextures=function(){t.textures=[],e.modified()}}var QQ={visibility:!0,pickable:!0,dragable:!0,useBounds:!0,allocatedRenderTime:10,estimatedRenderTime:0,savedEstimatedRenderTime:0,renderTimeMultiplier:1,paths:null,textures:[]};function cQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,QQ,n),a.c.obj(e,t),a.c.get(e,t,["estimatedRenderTime","allocatedRenderTime"]),a.c.setGet(e,t,["visibility","pickable","dragable","useBounds","renderTimeMultiplier"]),BQ(e,t)}var FQ={newInstance:a.c.newInstance(cQ,"vtkProp"),extend:cQ};function UQ(e,t){t.classHierarchy.push("vtkProp3D"),e.addPosition=function(n){t.position=t.position.map((function(e,t){return e+n[t]})),e.modified()},e.getOrientationWXYZ=function(){var e=ba();Object(b.m)(e,t.rotation);var n=new Float64Array(3),r=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>Ft.b?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}(n,e);return[Object(u.F)(r),n[0],n[1],n[2]]},e.rotateX=function(n){0!==n&&(Object(b.a)(t.rotation,t.rotation,Object(u.B)(n)),e.modified())},e.rotateY=function(n){0!==n&&(Object(b.b)(t.rotation,t.rotation,Object(u.B)(n)),e.modified())},e.rotateZ=function(n){0!==n&&(Object(b.c)(t.rotation,t.rotation,Object(u.B)(n)),e.modified())},e.rotateWXYZ=function(n,r,a,s){if(0!==n&&(0!==r||0!==a||0!==s)){var i=Object(u.B)(n),o=ba();ya(o,[r,a,s],i);var l=new Float64Array(16);Object(b.j)(l,o),Object(b.l)(t.rotation,t.rotation,l),e.modified()}},e.setOrientation=function(n,r,a){return(n!==t.orientation[0]||r!==t.orientation[1]||a!==t.orientation[2])&&(t.orientation=[n,r,a],Object(b.h)(t.rotation),e.rotateZ(a),e.rotateX(n),e.rotateY(r),e.modified(),!0)},e.setUserMatrix=function(n){Object(b.d)(t.userMatrix,n),e.modified()},e.getMatrix=function(){return e.computeMatrix(),t.matrix},e.computeMatrix=function(){if(e.getMTime()>t.matrixMTime.getMTime()){Object(b.h)(t.matrix),t.userMatrix&&Object(b.l)(t.matrix,t.matrix,t.userMatrix),Object(b.s)(t.matrix,t.matrix,t.origin),Object(b.s)(t.matrix,t.matrix,t.position),Object(b.l)(t.matrix,t.matrix,t.rotation),Object(b.r)(t.matrix,t.matrix,t.scale),Object(b.s)(t.matrix,t.matrix,[-t.origin[0],-t.origin[1],-t.origin[2]]),Object(b.i)(t.matrix,t.matrix),t.isIdentity=!0;for(var n=0;n<4;++n)for(var r=0;r<4;++r)(n===r?1:0)!==t.matrix[n+4*r]&&(t.isIdentity=!1);t.matrixMTime.modified()}},e.getCenter=function(){return st.getCenter(t.bounds)},e.getLength=function(){return st.getLength(t.bounds)},e.getXRange=function(){return st.getXRange(t.bounds)},e.getYRange=function(){return st.getYRange(t.bounds)},e.getZRange=function(){return st.getZRange(t.bounds)},e.getUserMatrix=function(){return t.userMatrix},e.onModified((function(){e.computeMatrix()}))}var gQ={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function dQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gQ,n),FQ.extend(e,t,n),t.matrixMTime={},a.c.obj(t.matrixMTime),a.c.get(e,t,["bounds","isIdentity"]),a.c.getArray(e,t,["orientation"]),a.c.setGetArray(e,t,["origin","position","scale"],3),t.matrix=Object(b.h)(new Float64Array(16)),t.rotation=Object(b.h)(new Float64Array(16)),t.userMatrix=Object(b.h)(new Float64Array(16)),t.transform=null,UQ(e,t)}var uQ={newInstance:a.c.newInstance(dQ,"vtkProp3D"),extend:dQ},IQ=a.c.vtkErrorMacro;function mQ(e,t){t.classHierarchy.push("vtkPiecewiseFunction"),e.getSize=function(){return t.nodes.length},e.getType=function(){var e,n=0,r=0;t.nodes.length>0&&(n=t.nodes[0].y);for(var a=1;a<t.nodes.length;a++){if((e=t.nodes[a].y)!==n)if(e>n)switch(r){case 0:case 1:r=1;break;default:case 2:r=3}else switch(r){case 0:case 2:r=2;break;default:case 1:r=3}if(n=e,3===r)break}switch(r){case 0:return"Constant";case 1:return"NonDecreasing";case 2:return"NonIncreasing";default:case 3:return"Varied"}},e.getDataPointer=function(){var e=t.nodes.length;if(t.function=null,e>0){t.function=[];for(var n=0;n<e;n++)t.function[2*n]=t.nodes[n].x,t.function[2*n+1]=t.nodes[n].y}return t.function},e.getFirstNonZeroValue=function(){if(0===t.nodes.length)return 0;for(var e=1,n=0;n<t.nodes.length;n++)if(0!==t.nodes[n].y){e=0;break}return e?Number.MAX_VALUE:n>0?t.nodes[n-1].x:t.clamping?-Number.MAX_VALUE:t.nodes[0].x},e.getNodeValue=function(e,n){var r=t.nodes.length;return e<0||e>=r?(IQ("Index out of range!"),-1):(n[0]=t.nodes[e].x,n[1]=t.nodes[e].y,n[2]=t.nodes[e].midpoint,n[3]=t.nodes[e].sharpness,1)},e.setNodeValue=function(n,r){var a=t.nodes.length;if(n<0||n>=a)return IQ("Index out of range!"),-1;var s=t.nodes[n].x;return t.nodes[n].x=r[0],t.nodes[n].y=r[1],t.nodes[n].midpoint=r[2],t.nodes[n].sharpness=r[3],s!==r[0]?e.sortAndUpdateRange():e.modified(),1},e.addPoint=function(t,n){return e.addPointLong(t,n,.5,0)},e.addPointLong=function(n,r,a,s){if(a<0||a>1)return IQ("Midpoint outside range [0.0, 1.0]"),-1;if(s<0||s>1)return IQ("Sharpness outside range [0.0, 1.0]"),-1;t.allowDuplicateScalars||e.removePoint(n);var i,o={x:n,y:r,midpoint:a,sharpness:s};for(t.nodes.push(o),e.sortAndUpdateRange(),i=0;i<t.nodes.length&&t.nodes[i].x!==n;i++);return i<t.nodes.length?i:-1},e.setNodes=function(n){t.nodes!==n&&(t.nodes=n,e.sortAndUpdateRange())},e.sortAndUpdateRange=function(){t.nodes.sort((function(e,t){return e.x-t.x})),e.updateRange()||e.modified()},e.updateRange=function(){var n=t.range.slice(),r=t.nodes.length;return r?(t.range[0]=t.nodes[0].x,t.range[1]=t.nodes[r-1].x):(t.range[0]=0,t.range[1]=0),(n[0]!==t.range[0]||n[1]!==t.range[1])&&(e.modified(),!0)},e.removePoint=function(n){var r;for(r=0;r<t.nodes.length&&t.nodes[r].x!==n;r++);if(r>=t.nodes.length)return-1;var a=r,s=!1;return t.nodes.splice(r,1),0!==r&&r!==t.nodes.length||(s=e.updateRange()),s||e.modified(),a},e.removeAllPoints=function(){t.nodes=[],e.sortAndUpdateRange()},e.addSegment=function(n,r,a,s){e.sortAndUpdateRange();for(var i=0;i<t.nodes.length;)t.nodes[i].x>=n&&t.nodes[i].x<=a?t.nodes.splice(i,1):i++;e.addPoint(n,r,.5,0),e.addPoint(a,s,.5,0)},e.getValue=function(t){var n=[];return e.getTable(t,t,1,n),n[0]},e.adjustRange=function(n){if(n.length<2)return 0;var r=e.getRange();r[0]<n[0]?e.addPoint(n[0],e.getValue(n[0])):e.addPoint(n[0],e.getValue(r[0])),r[1]>n[1]?e.addPoint(n[1],e.getValue(n[1])):e.addPoint(n[1],e.getValue(r[1])),e.sortAndUpdateRange();for(var a=0;a<t.nodes.length;)t.nodes[a].x>=n[0]&&t.nodes[a].x<=n[1]?t.nodes.splice(a,1):++a;return e.sortAndUpdateRange(),1},e.estimateMinNumberOfSamples=function(t,n){var r=e.findMinimumXDistance();return Math.ceil((n-t)/r)},e.findMinimumXDistance=function(){var e=t.nodes.length;if(e<2)return-1;for(var n=t.nodes[1].x-t.nodes[0].x,r=0;r<e-1;r++){var a=t.nodes[r+1].x-t.nodes[r].x;a<n&&(n=a)}return n},e.getTable=function(e,n,r,a){var s,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=0,l=t.nodes.length,B=0;0!==l&&(B=t.nodes[l-1].y);var Q=0,c=0,F=0,U=0,g=0,d=0,u=0;for(s=0;s<r;s++){var I=i*s;for(Q=r>1?e+s/(r-1)*(n-e):.5*(e+n);o<l&&Q>t.nodes[o].x;)++o<l&&(c=t.nodes[o-1].x,F=t.nodes[o].x,U=t.nodes[o-1].y,g=t.nodes[o].y,d=t.nodes[o-1].midpoint,u=t.nodes[o-1].sharpness,d<1e-5&&(d=1e-5),d>.99999&&(d=.99999));if(o>=l)a[I]=t.clamping?B:0;else if(0===o)a[I]=t.clamping?t.nodes[0].y:0;else{var m=(Q-c)/(F-c);if(m=m<d?.5*m/d:.5+.5*(m-d)/(1-d),u>.99){if(m<.5){a[I]=U;continue}a[I]=g;continue}if(u<.01){a[I]=(1-m)*U+m*g;continue}m<.5?m=.5*Math.pow(2*m,1+10*u):m>.5&&(m=1-.5*Math.pow(2*(1-m),1+10*u));var C=m*m,b=C*m,y=2*b-3*C+1,S=-2*b+3*C,h=b-2*C+m,Z=b-C,x=g-U,p=(1-u)*x;a[I]=y*U+S*g+h*p+Z*p;var G=U<g?U:g,R=U>g?U:g;a[I]=a[I]<G?G:a[I],a[I]=a[I]>R?R:a[I]}}}}var CQ={range:[0,0],clamping:!0,allowDuplicateScalars:!1};function bQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,CQ,n),a.c.obj(e,t),t.nodes=[],a.c.setGet(e,t,["allowDuplicateScalars","clamping"]),a.c.setArray(e,t,["range"],2),a.c.getArray(e,t,["range"]),mQ(e,t)}var yQ={newInstance:a.c.newInstance(bQ,"vtkPiecewiseFunction"),extend:bQ},SQ=Object.create(null);[{Name:"KAAMS",IndexedColors:[1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,1,0,1,0,1,1,.63,.63,1,.67,.5,.33,1,.5,.75,.53,.35,.7,1,.75,.5],Annotations:[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11]},{ColorSpace:"Diverging",Name:"Cool to Warm",NanColor:[1,1,0],RGBPoints:[0,.23137254902,.298039215686,.752941176471,.5,.865,.865,.865,1,.705882352941,.0156862745098,.149019607843]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Cool to Warm (Extended)",NanColor:[.25,0,0],RGBPoints:[0,0,0,.34902,.03125,.039216,.062745,.380392,.0625,.062745,.117647,.411765,.09375,.090196,.184314,.45098,.125,.12549,.262745,.501961,.15625,.160784,.337255,.541176,.1875,.2,.396078,.568627,.21875,.239216,.454902,.6,.25,.286275,.521569,.65098,.28125,.337255,.592157,.701961,.3125,.388235,.654902,.74902,.34375,.466667,.737255,.819608,.375,.572549,.819608,.878431,.40625,.654902,.866667,.909804,.4375,.752941,.917647,.941176,.46875,.823529,.956863,.968627,.5,.988235,.960784,.901961,.5,.941176,.984314,.988235,.52,.988235,.945098,.85098,.54,.980392,.898039,.784314,.5625,.968627,.835294,.698039,.59375,.94902,.733333,.588235,.625,.929412,.65098,.509804,.65625,.909804,.564706,.435294,.6875,.878431,.458824,.352941,.71875,.839216,.388235,.286275,.75,.760784,.294118,.211765,.78125,.701961,.211765,.168627,.8125,.65098,.156863,.129412,.84375,.6,.094118,.094118,.875,.54902,.066667,.098039,.90625,.501961,.05098,.12549,.9375,.45098,.054902,.172549,.96875,.4,.054902,.192157,1,.34902,.070588,.211765]},{ColorSpace:"Diverging",Name:"Warm to Cool",NanColor:[1,1,0],RGBPoints:[0,.705882352941,.0156862745098,.149019607843,.5,.865,.865,.865,1,.23137254902,.298039215686,.752941176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Warm to Cool (Extended)",NanColor:[.250004,0,0],RGBPoints:[0,.34902,0,.129412,.025,.4,.00392157,.101961,.05,.470588,.0156863,.0901961,.075,.54902,.027451,.0705882,.1,.619608,.0627451,.0431373,.125,.690196,.12549,.0627451,.15,.741176,.184314,.0745098,.175,.788235,.266667,.0941176,.2,.811765,.345098,.113725,.225,.831373,.411765,.133333,.25,.85098,.47451,.145098,.275,.870588,.54902,.156863,.3,.878431,.619608,.168627,.325,.890196,.658824,.196078,.35,.909804,.717647,.235294,.375,.929412,.776471,.278431,.395522,.94902,.823529,.321569,.418905,.968627,.87451,.407843,.444278,.980392,.917647,.509804,.470149,.988235,.956863,.643137,.483582,.992157,.964706,.713725,.499,.988235,.980392,.870588,.5,1,1,1,.501,.913725,.988235,.937255,.516418,.827451,.980392,.886275,.531343,.764706,.980392,.866667,.546766,.658824,.980392,.843137,.564179,.572549,.964706,.835294,.587562,.423529,.941176,.87451,.60597,.262745,.901961,.862745,.629851,.0705882,.854902,.870588,.651741,.0509804,.8,.85098,.681592,.0235294,.709804,.831373,.712935,.0313725,.615686,.811765,.75,.0313725,.537255,.788235,.775,.0392157,.466667,.768627,.8,.0509804,.396078,.741176,.825,.054902,.317647,.709804,.85,.054902,.243137,.678431,.875,.0431373,.164706,.639216,.9,.0313725,.0980392,.6,.925,.0392157,.0392157,.560784,.95,.105882,.0509804,.509804,.975,.113725,.0235294,.45098,1,.12549,0,.380392]},{ColorSpace:"RGB",Name:"Rainbow Desaturated",NanColor:[1,1,0],RGBPoints:[0,.278431372549,.278431372549,.858823529412,.143,0,0,.360784313725,.285,0,1,1,.429,0,.501960784314,0,.571,1,1,0,.714,1,.380392156863,0,.857,.419607843137,0,0,1,.878431372549,.301960784314,.301960784314]},{ColorSpace:"RGB",Name:"Cold and Hot",NanColor:[1,1,0],RGBPoints:[0,0,1,1,.45,0,0,1,.5,0,0,.501960784314,.55,1,0,0,1,1,1,0]},{ColorSpace:"RGB",Name:"Black-Body Radiation",NanColor:[0,.498039215686,1],RGBPoints:[0,0,0,0,.4,.901960784314,0,0,.8,.901960784314,.901960784314,0,1,1,1,1]},{ColorSpace:"RGB",Name:"X Ray",NanColor:[1,0,0],RGBPoints:[0,1,1,1,1,0,0,0]},{ColorSpace:"RGB",Name:"Grayscale",NanColor:[1,0,0],RGBPoints:[0,0,0,0,1,1,1,1]},{ColorSpace:"RGB",Name:"BkRd",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,1,0,0]},{ColorSpace:"RGB",Name:"BkGn",NanColor:[1,0,1],RGBPoints:[0,0,0,0,1,0,1,0]},{ColorSpace:"RGB",Name:"BkBu",NanColor:[1,1,0],RGBPoints:[0,0,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"BkMa",NanColor:[0,1,0],RGBPoints:[0,0,0,0,1,1,0,1]},{ColorSpace:"RGB",Name:"BkCy",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,0,1,1]},{ColorSpace:"RGB",Name:"Black, Blue and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,0,0,.501960784314,.666,0,.501960784314,1,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Orange and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,.501960784314,0,0,.666,1,.501960784314,0,1,1,1,1]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear YGB 1211g",NanColor:[.25,0,0],RGBPoints:[0,1,.988235,.968627,.02,1,.952941,.878431,.05,.968627,.905882,.776471,.1,.94902,.898039,.647059,.15,.901961,.878431,.556863,.2,.847059,.858824,.482353,.25,.690196,.819608,.435294,.3,.513725,.768627,.384314,.35,.337255,.721569,.337255,.4,.278431,.658824,.392157,.45,.231373,.639216,.435294,.5,.203922,.6,.486275,.55,.172549,.568627,.537255,.6,.141176,.517647,.54902,.65,.133333,.458824,.541176,.7,.12549,.396078,.529412,.75,.117647,.321569,.521569,.8,.121569,.258824,.509804,.85,.133333,.227451,.501961,.9,.145098,.192157,.490196,.95,.188235,.164706,.470588,1,.258824,.196078,.439216]},{ColorSpace:"CIELAB",Creator:"Francesca Samsel",Name:"Linear Green (Gr4L)",NanColor:[.25,0,0],RGBPoints:[0,.054902,.109804,.121569,.05,.07451,.172549,.180392,.1,.086275,.231373,.219608,.15,.094118,.278431,.25098,.2,.109804,.34902,.278431,.25,.113725,.4,.278431,.3,.117647,.45098,.270588,.35,.117647,.490196,.243137,.4,.113725,.521569,.203922,.45,.109804,.54902,.152941,.5,.082353,.588235,.082353,.55,.109804,.631373,.05098,.6,.211765,.678431,.082353,.65,.317647,.721569,.113725,.7,.431373,.760784,.160784,.75,.556863,.8,.239216,.8,.666667,.839216,.294118,.85,.784314,.878431,.396078,.9,.886275,.921569,.533333,.95,.960784,.94902,.670588,1,1,.984314,.901961]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear Blue (8_31f)",NanColor:[.25,0,0],RGBPoints:[0,.960784,1,.980392,.05,.815686,.960784,.913725,.1,.670588,.929412,.870588,.15,.556863,.901961,.843137,.2,.478431,.870588,.823529,.25,.439216,.831373,.803922,.3,.4,.8,.788235,.35,.376471,.768627,.768627,.4,.34902,.709804,.729412,.45,.32549,.654902,.690196,.5,.301961,.607843,.658824,.55,.247059,.545098,.619608,.6,.239216,.494118,.580392,.65,.227451,.439216,.541176,.7,.227451,.403922,.521569,.75,.231373,.368627,.501961,.8,.227451,.321569,.470588,.85,.219608,.282353,.439216,.9,.192157,.235294,.4,.95,.160784,.184314,.34902,1,.133333,.12549,.301961]},{ColorSpace:"HSV",Name:"Blue to Red Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,0,0,1,1,1,0,0]},{ColorSpace:"HSV",Name:"Red to Blue Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,1,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended White",NanColor:[1,1,0],RGBPoints:[0,1,1,1,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Grey",NanColor:[1,1,0],RGBPoints:[0,.317647058824,.341176470588,.43137254902,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Black",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Blue to Yellow",NanColor:[1,0,0],RGBPoints:[0,.0392156862745,.0392156862745,.949019607843,1,.949019607843,.949019607843,.0392156862745]},{ColorSpace:"HSV",Name:"blot",RGBPoints:[0,0,0,1,.166,0,0,1,.167,1,0,1,.332,1,0,1,.333,0,1,1,.5,0,1,1,.501,0,1,0,.666,0,1,0,.667,1,1,0,.832,1,1,0,.833,1,0,0,1,1,0,0]},{ColorSpace:"Lab",Name:"CIELab Blue to Red",NanColor:[1,1,0],RGBPoints:[0,0,.6,.749019607843,1,.76862745098,.466666666667,.341176470588]},{ColorSpace:"RGB",Name:"jet",RGBPoints:[-1,0,0,.5625,-.777778,0,0,1,-.269841,0,1,1,-.015873,.5,1,.5,.238095,1,1,0,.746032,1,0,0,1,.5,0,0]},{ColorSpace:"RGB",Name:"rainbow",RGBPoints:[-1,0,0,1,-.5,0,1,1,0,0,1,0,.5,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"erdc_rainbow_bright",RGBPoints:[-1,.32549,.14902,.960784,-.866221,.297047,.375586,.963836,-.732441,.180302,.536818,.964627,-.598662,.1302,.649207,.929647,-.464883,.0445143,.749654,.855998,-.331104,.0271325,.830713,.721527,-.197324,.259504,.866145,.543555,-.0635452,.428364,.890725,.329819,.0702341,.568503,.898508,.187623,.204013,.738259,.890317,.0825461,.337793,.84546,.86136,.0147555,.471572,.912191,.808018,0,.605351,.962848,.710445,0,.73913,.999469,.600258,.0176284,.87291,.994156,.445975,.193912,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"erdc_rainbow_dark",RGBPoints:[-1,0,0,.423499,-.866221,0,.119346,.529237,-.732441,0,.238691,.634976,-.598662,0,.346852,.68788,-.464883,0,.45022,.718141,-.331104,0,.553554,.664839,-.197324,0,.651082,.519303,-.0635452,.115841,.72479,.352857,.0702341,.326771,.781195,.140187,.204013,.522765,.798524,.0284624,.337793,.703162,.788685,.00885756,.471572,.845118,.751133,0,.605351,.955734,.690825,0,.73913,.995402,.567916,.0618524,.87291,.987712,.403398,.164851,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"nic_CubicL",RGBPoints:[-1,.479965,.0118108,.5307,-.87451,.522213,.0551282,.706919,-.74902,.50839,.237278,.867764,-.623529,.451617,.373834,.987255,-.498039,.39365,.497255,.97506,-.372549,.328631,.599639,.891843,-.247059,.250043,.690286,.778553,-.121569,.249656,.764905,.645857,.00392157,.297954,.821466,.50449,.129412,.337509,.872595,.358447,.254902,.430011,.913789,.297079,.380392,.587191,.931381,.333353,.505882,.727937,.93591,.353742,.631373,.826403,.921081,.365066,.756863,.893201,.846317,.372662,.882353,.965347,.73884,.378506,1,.983235,.597451,.366856]},{ColorSpace:"Lab",Name:"nic_CubicYF",RGBPoints:[-1,.5151,.0482,.6697,-.87451,.520711,.168955,.800574,-.74902,.493694,.278596,.911824,-.623529,.440026,.369475,.984978,-.498039,.398932,.457593,.987053,-.372549,.350651,.540644,.929608,-.247059,.298827,.615625,.857729,-.121569,.239928,.685061,.769531,.00392157,.228832,.739349,.673287,.129412,.263297,.78608,.569988,.254902,.298107,.828337,.460214,.380392,.33092,.864071,.352674,.505882,.38306,.898169,.287309,.631373,.49023,.917481,.307961,.756863,.62372,.926026,.332309,.882353,.717458,.92527,.342476,1,.8,.9255,.3529]},{ColorSpace:"Lab",Name:"gist_earth",RGBPoints:[-1,0,0,0,-.87451,.239216,.027451,.415686,-.74902,.0901961,.254902,.556863,-.623529,.0941176,.352941,.54902,-.498039,.105882,.435294,.533333,-.372549,.12549,.52549,.501961,-.247059,.156863,.596078,.443137,-.121569,.196078,.65098,.380392,.00392157,.282353,.717647,.301961,.129412,.466667,.772549,.27451,.254902,.678431,.784314,.309804,.380392,.901961,.756863,.376471,.505882,.992157,.705882,.521569,.631373,1,.721569,.701961,.756863,1,.784314,.784314,.882353,1,.866667,.866667,1,1,1,1]},{ColorSpace:"Lab",Name:"2hot",RGBPoints:[-1,.0416667,0,0,-.873016,.208333,0,0,-.746032,.375,0,0,-.619048,.541667,0,0,-.492063,.708333,0,0,-.365079,.854137,0,0,-.238095,.937488,.039062,0,-.111111,1,.208333,0,.015873,1,.375,0,.142857,1,.541667,0,.269841,1,.708333,0,.396825,1,.858805,.03125,.52381,1,.947392,.15625,.650794,1,1,.3125,.777778,1,1,.5625,.904762,1,1,.8125,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_red2yellow_BW",RGBPoints:[-1,7.54296e-7,0,109827e-10,-.87451,.18285,.0264094,0,-.74902,.3066,0,0,-.623529,.422841,0,0,-.498039,.522945,0,0,-.372549,.605721,0,0,-.247059,.672502,.14168,0,-.121569,.728167,.244025,0,.00392157,.781215,.333454,0,.129412,.825,.423586,0,.254902,.855893,.516793,0,.380392,.880491,.608846,0,.505882,.910305,.695505,0,.631373,.94109,.779067,.223528,.756863,.967873,.858572,.473521,.882353,.986815,.933211,.751583,1,1,1,.999997]},{ColorSpace:"Lab",Name:"erdc_marine2gold_BW",RGBPoints:[-1,1.11641e-7,0,162551e-11,-.87451,.0413146,.0619808,.209857,-.74902,.0185557,.101341,.350684,-.623529,.00486405,.149847,.461054,-.498039,.0836345,.210845,.517906,-.372549,.173222,.276134,.541793,-.247059,.259857,.343877,.535869,-.121569,.362299,.408124,.504293,.00392157,.468266,.468276,.468257,.129412,.582781,.527545,.374914,.254902,.691591,.585251,.274266,.380392,.784454,.645091,.247332,.505882,.862299,.710383,.27518,.631373,.920863,.782923,.351563,.756863,.955792,.859699,.533541,.882353,.976162,.93433,.780671,1,1,1,.999983]},{ColorSpace:"Lab",Name:"erdc_blue2gold_BW",RGBPoints:[-1,0,0,0,-.87451,.0742735,.0440331,.230013,-.74902,.125276,.0258685,.415826,-.623529,.143879,.0163031,.591346,-.498039,.212261,.0627855,.705239,-.372549,.306048,.141178,.763636,-.247059,.391537,.232286,.773263,-.121569,.461734,.336633,.708321,.00392157,.54209,.427581,.590007,.129412,.61704,.508623,.460978,.254902,.702703,.579586,.309117,.380392,.790336,.644811,.170397,.505882,.870173,.710733,.117134,.631373,.93656,.781991,.157144,.756863,.965672,.862068,.409836,.882353,.985751,.936296,.714162,1,1,1,.999999]},{ColorSpace:"Lab",Name:"erdc_sapphire2gold_BW",RGBPoints:[-1,.107704,.107708,.107694,-.87451,.1851,.112354,.308554,-.74902,.236782,.114233,.48788,-.623529,.28296,.126187,.639464,-.498039,.344787,.171643,.739713,-.372549,.413325,.242371,.76913,-.247059,.481863,.3131,.719841,-.121569,.550402,.383829,.612222,.00392157,.61894,.454558,.51126,.129412,.687478,.525287,.39993,.254902,.756017,.596016,.289923,.380392,.824555,.666745,.255498,.505882,.892979,.736822,.27696,.631373,.938851,.804966,.351734,.756863,.966491,.874853,.53572,.882353,.982105,.94153,.782579,1,1,1,.999986]},{ColorSpace:"Lab",Name:"erdc_red2purple_BW",RGBPoints:[-1,0,0,0,-.87451,.167793,.0166271,.0431278,-.74902,.262608,.0107595,.0791181,-.623529,.351902,.0101858,.100926,-.498039,.441257,.0160835,.131919,-.372549,.5221,.0555972,.195625,-.247059,.593852,.104294,.310234,-.121569,.654628,.158115,.448486,.00392157,.707443,.220914,.570253,.129412,.749504,.293268,.67897,.254902,.781587,.370517,.779269,.380392,.809951,.451099,.855831,.505882,.84424,.531462,.900451,.631373,.865174,.620901,.91606,.756863,.875041,.714054,.910284,.882353,.880764,.80554,.896276,1,.887572,.887591,.887556]},{ColorSpace:"Lab",Name:"erdc_purple2pink_BW",RGBPoints:[-1,0,0,0,-.87451,.117562,.0291202,.175876,-.74902,.178368,.0458476,.285454,-.623529,.237731,.0680173,.387717,-.498039,.300877,.0956291,.484802,-.372549,.370929,.136858,.554985,-.247059,.449033,.189273,.58863,-.121569,.529971,.245796,.598587,.00392157,.609914,.300643,.610244,.129412,.697079,.351286,.616371,.254902,.785858,.401991,.617376,.380392,.862517,.45745,.64463,.505882,.91359,.525462,.705336,.631373,.932583,.61064,.767412,.756863,.922478,.706966,.817522,.882353,.901302,.803071,.856311,1,.887571,.887591,.887549]},{ColorSpace:"Lab",Name:"erdc_pbj_lin",RGBPoints:[-1,0,0,0,-.87451,.091821,.0611476,.10617,-.74902,.160311,.0900022,.192713,-.623529,.22484,.12126,.272128,-.498039,.291263,.157469,.340828,-.372549,.360015,.200388,.388903,-.247059,.437497,.250058,.387201,-.121569,.512636,.304969,.355955,.00392157,.582603,.360874,.33488,.129412,.655126,.416374,.306351,.254902,.725889,.473329,.279051,.380392,.778125,.537928,.302697,.505882,.815894,.606931,.382431,.631373,.839159,.679308,.497608,.756863,.854748,.751666,.631792,.882353,.869483,.822508,.768592,1,.887572,.887589,.887565]},{ColorSpace:"Lab",Name:"erdc_blue2green_muted",RGBPoints:[-1,.107704,.107708,.107695,-.87451,.141522,.13066,.270741,-.74902,.180123,.146119,.42308,-.623529,.210161,.169674,.551795,-.498039,.239701,.212939,.634969,-.372549,.253916,.282947,.653641,-.247059,.242791,.366933,.608521,-.121569,.226302,.446776,.52693,.00392157,.236237,.514689,.458798,.129412,.274641,.577589,.376069,.254902,.349625,.633993,.288131,.380392,.4437,.683677,.260497,.505882,.536247,.731214,.285424,.631373,.628472,.777128,.349151,.756863,.718259,.819287,.496825,.882353,.804768,.856164,.703299,1,.887571,.887591,.887548]},{ColorSpace:"Lab",Name:"erdc_blue2green_BW",RGBPoints:[-1,3.63578e-7,0,529374e-11,-.87451,.0539915,.0577948,.212806,-.74902,.0620393,.0758942,.388959,-.623529,.0697499,.102032,.54177,-.498039,.113295,.156156,.64334,-.372549,.152047,.243196,.670283,-.247059,.158096,.344084,.622864,-.121569,.151142,.43922,.532767,.00392157,.17155,.521588,.457719,.129412,.225861,.599141,.363997,.254902,.32328,.67007,.259083,.380392,.442344,.733697,.223754,.505882,.558409,.794941,.257411,.631373,.673875,.854344,.340822,.756863,.787244,.909326,.524717,.882353,.896483,.958063,.775914,1,1,1,.999982]},{ColorSpace:"Lab",Name:"GREEN-WHITE_LINEAR",RGBPoints:[-1,0,0,0,-.87451,0,.062745,0,-.74902,0,.12549,0,-.623529,0,.188235,0,-.498039,0,.25098,0,-.372549,0,.313725,0,-.247059,0,.376471,0,-.121569,.094118,.439216,0,.00392157,.196078,.501961,0,.129412,.294118,.564706,0,.254902,.396078,.627451,0,.380392,.498039,.690196,0,.505882,.6,.752941,.145098,.631373,.701961,.815686,.364706,.756863,.8,.878431,.580392,.882353,.901961,.941176,.796078,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_green2yellow_BW",RGBPoints:[-1,0,0,0,-.87451,0,.105542,.0603919,-.74902,0,.159454,.104148,-.623529,0,.219502,.15542,-.498039,0,.282276,.203811,-.372549,0,.346331,.235652,-.247059,0,.411765,.235428,-.121569,0,.477177,.217977,.00392157,.0593644,.541635,.21361,.129412,.233081,.604722,.210591,.254902,.369803,.664942,.226536,.380392,.498446,.722367,.288237,.505882,.601929,.782244,.380815,.631373,.703207,.840497,.512134,.756863,.803186,.896433,.674462,.882353,.903834,.950266,.846715,1,1,1,.999981]},{ColorSpace:"Lab",Name:"blue2cyan",RGBPoints:[-1,0,0,0,-.87451,0,.152941,.364706,-.74902,0,.254902,.470588,-.623529,0,.34902,.572549,-.498039,0,.443137,.670588,-.372549,0,.537255,.772549,-.247059,0,.627451,.870588,-.121569,0,.717647,.964706,.00392157,.0784314,.772549,1,.129412,.207843,.858824,1,.254902,.32549,.941176,1,.380392,.45098,1,1,.505882,.560784,1,1,.631373,.662745,1,1,.756863,.760784,1,1,.882353,.870588,1,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_blue2cyan_BW",RGBPoints:[-1,4.05298e-7,0,59012e-10,-.87451,.0207526,.0740933,.18093,-.74902,0,.121033,.30343,-.623529,0,.166892,.416095,-.498039,0,.216768,.524796,-.372549,.0164769,.275471,.608585,-.247059,.0544527,.344824,.659267,-.121569,.0880643,.419118,.688675,.00392157,.127938,.492556,.720256,.129412,.149476,.566946,.756918,.254902,.188961,.641333,.792122,.380392,.245482,.715336,.827609,.505882,.329216,.786235,.874761,.631373,.453558,.852803,.918466,.756863,.626281,.910493,.954,.882353,.82257,.958709,.980146,1,1,1,.999989]},{ColorSpace:"Lab",Name:"erdc_blue_BW",RGBPoints:[-1,0,0,0,-.87451,.0425591,.0763529,.150682,-.74902,.0569472,.119154,.275403,-.623529,.0635978,.164772,.395427,-.498039,.0774342,.213851,.510014,-.372549,.106815,.267034,.615102,-.247059,.122093,.324649,.720068,-.121569,.160851,.387068,.806956,.00392157,.213754,.453516,.878012,.129412,.26722,.524656,.932436,.254902,.326844,.599279,.968038,.380392,.403403,.674712,.984784,.505882,.499703,.745519,1,.631373,.615055,.813983,1,.756863,.74405,.879228,1,.882353,.877909,.941913,1,1,1,1,.999996]},{ColorSpace:"Lab",Name:"BLUE-WHITE",RGBPoints:[-1,0,0,0,-.87451,0,0,.082353,-.74902,0,0,.168627,-.623529,0,0,.254902,-.498039,0,0,.337255,-.372549,0,0,.423529,-.247059,0,0,.509804,-.121569,0,.101961,.592157,.00392157,0,.203922,.678431,.129412,0,.301961,.764706,.254902,0,.403922,.85098,.380392,0,.505882,.933333,.505882,0,.603922,1,.631373,.254902,.705882,1,.756863,.509804,.807843,1,.882353,.764706,.905882,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_purple_BW",RGBPoints:[-1,4.264e-8,0,6.20844e-7,-.87451,.100579,.0593111,.145666,-.74902,.167794,.0889224,.254953,-.623529,.231446,.123339,.360511,-.498039,.296699,.163027,.461278,-.372549,.363211,.209286,.55306,-.247059,.431136,.260776,.637195,-.121569,.498202,.320012,.705799,.00392157,.567456,.380459,.778091,.129412,.629381,.445284,.8448,.254902,.688373,.517374,.895694,.380392,.74891,.590906,.93976,.505882,.805017,.667956,.977626,.631373,.850914,.752618,.992396,.756863,.89724,.838454,.994093,.882353,.948461,.922603,.994449,1,1,1,.999967]},{ColorSpace:"Lab",Name:"erdc_magenta_BW",RGBPoints:[-1,0,0,254023e-10,-.87451,.128696,.0456782,.11635,-.74902,.228133,.0476299,.201452,-.623529,.327273,.0374065,.282107,-.498039,.420953,.0408166,.35709,-.372549,.511562,.0642203,.430511,-.247059,.599552,.102686,.504257,-.121569,.684646,.150536,.579429,.00392157,.765817,.205978,.656062,.129412,.839176,.27229,.731807,.254902,.89536,.357594,.797309,.380392,.930238,.457825,.846984,.505882,.945921,.564536,.880571,.631373,.948995,.670753,.902279,.756863,.947124,.772819,.918171,.882353,.947265,.869424,.934352,1,.954719,.95475,.954726]},{ColorSpace:"Lab",Name:"magenta",RGBPoints:[-1,0,0,0,-.87451,.364706,0,.152941,-.74902,.470588,0,.254902,-.623529,.572549,0,.34902,-.498039,.670588,0,.443137,-.372549,.772549,0,.537255,-.247059,.870588,0,.627451,-.121569,.964706,0,.717647,.00392157,1,.0784314,.772549,.129412,1,.207843,.858824,.254902,1,.32549,.941176,.380392,1,.45098,1,.505882,1,.560784,1,.631373,1,.662745,1,.756863,1,.760784,1,.882353,1,.870588,1,1,1,1,1]},{ColorSpace:"Lab",Name:"RED-PURPLE",RGBPoints:[-1,0,0,0,-.87451,.188235,0,.007843,-.74902,.345098,0,.035294,-.623529,.439216,0,.098039,-.498039,.533333,0,.152941,-.372549,.627451,.015686,.211765,-.247059,.721569,.031373,.266667,-.121569,.8,.047059,.329412,.00392157,.862745,.047059,.403922,.129412,.941176,.062745,.466667,.254902,.988235,.078431,.54902,.380392,.988235,.141176,.643137,.505882,.988235,.25098,.729412,.631373,.988235,.376471,.811765,.756863,.988235,.54902,.886275,.882353,.988235,.752941,.952941,1,.996078,.996078,.996078]},{ColorSpace:"Lab",Name:"erdc_red_BW",RGBPoints:[-1,0,0,0,-.87451,.147204,.0480135,.0401815,-.74902,.253411,.0617478,.0301333,-.623529,.356059,.0746331,.0446897,-.498039,.457731,.0934935,.0636931,-.372549,.557199,.122714,.0860013,-.247059,.665179,.144238,.105585,-.121569,.763833,.187056,.138326,.00392157,.847035,.254558,.189407,.129412,.905663,.345937,.258215,.254902,.941431,.447111,.346277,.380392,.962608,.546927,.457571,.505882,.987833,.637276,.569944,.631373,.994202,.732176,.687958,.756863,.993304,.826268,.800567,.882353,.994413,.917205,.906393,1,1,1,.999979]},{ColorSpace:"Lab",Name:"RED_TEMPERATURE",RGBPoints:[-1,0,0,0,-.87451,.090196,0,0,-.74902,.180392,0,0,-.623529,.270588,0,0,-.498039,.360784,0,0,-.372549,.45098,0,0,-.247059,.545098,0,0,-.121569,.635294,0,0,.00392157,.72549,.058824,0,.129412,.815686,.176471,0,.254902,.905882,.294118,0,.380392,1,.411765,0,.505882,1,.533333,.027451,.631373,1,.65098,.27451,.756863,1,.768627,.521569,.882353,1,.886275,.768627,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_orange_BW",RGBPoints:[-1,0,0,253806e-10,-.87451,.135871,.0593824,0,-.74902,.224328,.0907216,0,-.623529,.318083,.119647,0,-.498039,.414443,.150246,0,-.372549,.511077,.184884,0,-.247059,.605501,.226033,0,-.121569,.695274,.275491,0,.00392157,.777826,.334445,0,.129412,.851498,.402441,0,.254902,.915899,.47759,602975e-9,.380392,.971984,.557882,.0361443,.505882,1,.641287,.135967,.631373,1,.725198,.27997,.756863,1,.808205,.438135,.882353,1,.89306,.587036,1,1,.977928,.721599]},{ColorSpace:"Lab",Name:"heated_object",RGBPoints:[-1,0,0,0,-.87451,.34902,.0862745,0,-.74902,.45098,.172549,0,-.623529,.52549,.231373,0,-.498039,.580392,.278431,0,-.372549,.623529,.313725,0,-.247059,.670588,.352941,0,-.121569,.717647,.392157,0,.00392157,.772549,.439216,0,.129412,.839216,.494118,0,.254902,.901961,.541176,0,.380392,.968627,.6,0,.505882,1,.658824,0,.631373,1,.721569,0,.756863,1,.827451,.298039,.882353,1,.976471,.72549,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_gold_BW",RGBPoints:[-1,0,0,190933e-10,-.87451,.128363,.0636265,0,-.74902,.193795,.111057,0,-.623529,.25976,.15987,0,-.498039,.328546,.210589,0,-.372549,.399726,.26332,0,-.247059,.472969,.318261,0,-.121569,.546245,.375827,0,.00392157,.61745,.436719,0,.129412,.685545,.501113,0,.254902,.749578,.568799,0,.380392,.80962,.6394,0,.505882,.865572,.712699,.10257,.631373,.917709,.787569,.233665,.756863,.966914,.863138,.369608,.882353,1,.939405,.496104,1,.999225,1,.612275]},{ColorSpace:"Lab",Name:"erdc_brown_BW",RGBPoints:[-1,3.3216e-7,0,483629e-11,-.87451,.14693,.0518172,0,-.74902,.225806,.0814996,0,-.623529,.301681,.111452,0,-.498039,.370487,.150664,0,-.372549,.43108,.199477,0,-.247059,.4849,.255107,0,-.121569,.536798,.313486,0,.00392157,.59286,.371167,0,.129412,.653119,.428135,0,.254902,.714589,.485917,.0379541,.380392,.774667,.54565,.116634,.505882,.831222,.608047,.183895,.631373,.880305,.674199,.260298,.756863,.922314,.742472,.367086,.882353,.959408,.811222,.497258,1,.993548,.875183,.622093]},{ColorSpace:"Lab",Name:"copper_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0784314,.0501961,.0313725,-.74902,.156863,.100392,.0627451,-.623529,.235294,.150588,.0941176,-.498039,.313725,.200784,.12549,-.372549,.392157,.25098,.156863,-.247059,.470588,.301176,.188235,-.121569,.54902,.351373,.219608,.00392157,.627451,.401569,.25098,.129412,.705882,.451765,.282353,.254902,.784314,.501961,.313725,.380392,.862745,.552157,.345098,.505882,.941176,.602353,.376471,.631373,1,.652549,.407843,.756863,1,.702745,.439216,.882353,1,.752941,.470588,1,1,.8,.5]},{ColorSpace:"Lab",Name:"pink_Matlab",RGBPoints:[-1,0,0,0,-.87451,.312416,.204524,.204524,-.74902,.441822,.289241,.289241,-.623529,.54112,.354246,.354246,-.498039,.624831,.409048,.409048,-.372549,.698582,.45733,.45733,-.247059,.764404,.502282,.500979,-.121569,.791292,.591516,.54112,.00392157,.817297,.66895,.578481,.129412,.842499,.738308,.613572,.254902,.866968,.801687,.646762,.380392,.890766,.86041,.678329,.505882,.913944,.913944,.711254,.631373,.936549,.936549,.79459,.756863,.958621,.958621,.869979,.882353,.980196,.980196,.939336,1,1,1,1]},{ColorSpace:"Lab",Name:"bone_Matlab",RGBPoints:[-1,0,0,0,-.87451,.054902,.054902,.075817,-.74902,.109804,.109804,.151634,-.623529,.164706,.164706,.227451,-.498039,.219608,.219608,.303268,-.372549,.27451,.27451,.379085,-.247059,.329412,.329902,.454412,-.121569,.384314,.405719,.509314,.00392157,.439216,.481536,.564216,.129412,.494118,.557353,.619118,.254902,.54902,.63317,.67402,.380392,.603922,.708987,.728922,.505882,.660294,.783824,.783824,.631373,.746569,.838725,.838725,.756863,.832843,.893627,.893627,.882353,.919118,.948529,.948529,1,1,1,1]},{ColorSpace:"Lab",Name:"gray_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0627451,.0627451,.0627451,-.74902,.12549,.12549,.12549,-.623529,.188235,.188235,.188235,-.498039,.25098,.25098,.25098,-.372549,.313725,.313725,.313725,-.247059,.376471,.376471,.376471,-.121569,.439216,.439216,.439216,.00392157,.501961,.501961,.501961,.129412,.564706,.564706,.564706,.254902,.627451,.627451,.627451,.380392,.690196,.690196,.690196,.505882,.752941,.752941,.752941,.631373,.815686,.815686,.815686,.756863,.878431,.878431,.878431,.882353,.941176,.941176,.941176,1,1,1,1]},{ColorSpace:"Lab",Name:"Purples",RGBPoints:[-1,.247059,0,.490196,-.87451,.288397,.07677,.525629,-.74902,.32975,.153587,.561092,-.623529,.373057,.236263,.600461,-.498039,.416363,.319,.639923,-.372549,.459669,.405613,.685198,-.247059,.503345,.491534,.730058,-.121569,.562399,.54862,.757616,.00392157,.621453,.606075,.785544,.129412,.680508,.674971,.824914,.254902,.739562,.743406,.863899,.380392,.798616,.800492,.893426,.505882,.85684,.856655,.922491,.631373,.898178,.894056,.942176,.756863,.938654,.930919,.961646,.882353,.964245,.958478,.977393,1,.988235,.984314,.992157]},{ColorSpace:"Lab",Name:"Blues",RGBPoints:[-1,.031373,.188235,.419608,-.87451,.031373,.253195,.516063,-.74902,.031757,.318139,.612149,-.623529,.080969,.38113,.661361,-.498039,.130427,.444152,.710327,-.372549,.195386,.509112,.743791,-.247059,.260715,.573841,.777209,-.121569,.341423,.628958,.808704,.00392157,.422745,.684075,.839892,.129412,.523137,.739193,.861546,.254902,.622684,.793464,.883429,.380392,.701423,.826928,.910988,.505882,.778685,.8603,.937993,.631373,.825928,.891795,.953741,.756863,.87328,.923291,.969489,.882353,.922491,.954787,.985236,1,.968627,.984314,1]},{ColorSpace:"Lab",Name:"Greens",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546082,.271326,-.372549,.197232,.609073,.31857,-.247059,.257255,.671742,.365859,-.121569,.357647,.720953,.415071,.00392157,.45767,.769919,.465021,.129412,.546251,.811257,.537855,.254902,.634295,.852211,.610688,.380392,.709097,.883706,.683522,.505882,.78316,.914833,.755894,.631373,.842215,.938454,.818885,.756863,.899977,.961538,.880692,.882353,.935409,.975317,.92203,1,.968627,.988235,.960784]},{ColorSpace:"Lab",Name:"PuBu",RGBPoints:[-1,.301961,0,.294118,-.87451,.404321,.029527,.390573,-.74902,.50599,.059592,.486782,-.623529,.519769,.158016,.551742,-.498039,.533456,.256194,.616301,-.372549,.54133,.33887,.655671,-.247059,.54902,.421592,.695087,-.121569,.54902,.506236,.736424,.00392157,.550127,.590573,.777701,.129412,.585559,.665375,.81707,.254902,.622145,.739023,.855825,.380392,.687105,.784298,.879446,.505882,.752065,.829758,.903253,.631373,.817024,.87897,.930811,.756863,.880907,.927213,.957832,.882353,.926182,.958708,.975548,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"BuPu",RGBPoints:[-1,.007843,.219608,.345098,-.87451,.01178,.286536,.449427,-.74902,.015702,.35328,.553479,-.623529,.01767,.396586,.622376,-.498039,.021115,.4402,.690688,-.372549,.11757,.503191,.722184,-.247059,.214625,.565859,.753633,-.121569,.336671,.615071,.78316,.00392157,.457978,.663975,.812503,.129412,.556401,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821638,.903068,.631373,.873387,.864944,.92669,.756863,.927536,.907605,.949988,.882353,.964937,.9391,.967705,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGn",RGBPoints:[-1,.031373,.25098,.505882,-.87451,.031373,.329719,.590527,-.74902,.031911,.408397,.674787,-.623529,.100807,.479262,.710219,-.498039,.169704,.550219,.745744,-.372549,.238601,.62699,.787082,-.247059,.307958,.703114,.826759,-.121569,.39654,.752326,.797232,.00392157,.485121,.801046,.767705,.129412,.573702,.83451,.738178,.254902,.661592,.867743,.711034,.380392,.732457,.895302,.74253,.505882,.801845,.922307,.774579,.631373,.841215,.938055,.817885,.756863,.880907,.95391,.861084,.882353,.926182,.971626,.902422,1,.968627,.988235,.941176]},{ColorSpace:"Lab",Name:"GnBu",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546175,.272095,-.372549,.197232,.615071,.368551,-.247059,.256609,.683276,.464867,-.121569,.329443,.722645,.555417,.00392157,.403137,.762138,.645413,.129412,.503529,.805444,.718247,.254902,.603922,.848597,.790465,.380392,.704314,.887966,.847551,.505882,.802307,.926321,.903714,.631373,.851519,.944037,.941115,.756863,.899977,.961538,.976901,.882353,.935409,.975317,.984775,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"GnBuPu",RGBPoints:[-1,.003922,.27451,.211765,-.87451,.003922,.349312,.280661,-.74902,.003937,.423852,.349773,-.623529,.005905,.46519,.446228,-.498039,.009443,.506344,.542837,-.372549,.111803,.535871,.649135,-.247059,.214025,.565859,.753633,-.121569,.310481,.615071,.78316,.00392157,.407797,.663975,.812503,.129412,.531811,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821176,.902884,.631373,.873387,.854641,.922568,.756863,.927536,.888535,.942361,.882353,.964937,.929873,.964014,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGnYl",RGBPoints:[-1,.031373,.113725,.345098,-.87451,.088458,.159,.463206,-.74902,.145052,.204567,.5807,-.623529,.139146,.287243,.620069,-.498039,.13318,.370196,.659562,-.372549,.123337,.470588,.706805,-.247059,.115386,.570335,.753126,-.121569,.186251,.643168,.761,.00392157,.258716,.71514,.768074,.129412,.380761,.760415,.750358,.254902,.503576,.806075,.732795,.380392,.645306,.861192,.719016,.505882,.783899,.91511,.705606,.631373,.858701,.944637,.6997,.756863,.931349,.973303,.698424,.882353,.966782,.987082,.777163,1,1,1,.85098]},{ColorSpace:"Lab",Name:"PuRd",RGBPoints:[-1,.286275,0,.415686,-.87451,.38273,.001968,.441276,-.74902,.479231,.003922,.466774,-.623529,.581592,.003922,.480554,-.498039,.683799,.00549,.494887,-.372549,.776317,.105882,.544098,-.247059,.867866,.206321,.592618,-.121569,.919047,.308681,.612303,.00392157,.968812,.411226,.632603,.129412,.974717,.519493,.671972,.254902,.980546,.626451,.71065,.380392,.984483,.701253,.732303,.505882,.988328,.77504,.755617,.631373,.990296,.828189,.812703,.756863,.992372,.880907,.869035,.882353,.996309,.926182,.912341,1,1,.968627,.952941]},{ColorSpace:"Lab",Name:"RdPu",RGBPoints:[-1,.403922,0,.121569,-.87451,.500377,0,.192434,-.74902,.596909,277e-6,.263037,-.623529,.703206,.035709,.300438,-.498039,.808612,.071296,.338854,-.372549,.857824,.116571,.441215,-.247059,.905513,.163552,.54293,-.121569,.889765,.281661,.617732,.00392157,.873156,.39897,.691611,.129412,.82985,.491488,.736886,.254902,.789081,.583237,.781853,.380392,.810734,.656071,.819254,.505882,.833126,.729181,.85684,.631373,.870527,.80792,.898178,.756863,.907605,.884398,.938331,.882353,.9391,.921799,.958016,1,.968627,.956863,.976471]},{ColorSpace:"Lab",Name:"Oranges",RGBPoints:[-1,.498039,.152941,.015686,-.87451,.57481,.182468,.013718,-.74902,.651765,.212042,.011734,-.623529,.752157,.247474,.007797,-.498039,.851719,.283368,.004475,-.372549,.898962,.348328,.039908,-.247059,.945652,.413426,.076401,-.121569,.969273,.484291,.157109,.00392157,.992157,.554971,.238185,.129412,.992157,.619931,.330704,.254902,.992157,.684967,.423837,.380392,.992157,.751895,.532103,.505882,.992249,.817716,.639354,.631373,.994218,.861023,.725967,.756863,.996186,.903576,.810965,.882353,.998155,.933103,.868051,1,1,.960784,.921569]},{ColorSpace:"Lab",Name:"Reds",RGBPoints:[-1,.403922,0,.05098,-.87451,.525967,.029527,.066728,-.74902,.647643,.058962,.082476,-.623529,.722445,.076678,.098224,-.498039,.797186,.095194,.114187,-.372549,.868051,.164091,.143714,-.247059,.937809,.233541,.173933,-.121569,.96143,.326059,.232987,.00392157,.984375,.418147,.292657,.129412,.986344,.496886,.371396,.254902,.988235,.575702,.450673,.380392,.988235,.656409,.543191,.505882,.98842,.736747,.635894,.631373,.992357,.809581,.732349,.756863,.996186,.880692,.826759,.882353,.998155,.92203,.885813,1,1,.960784,.941176]},{ColorSpace:"Lab",Name:"RdOr",RGBPoints:[-1,.498039,0,0,-.87451,.6004,0,0,-.74902,.702514,738e-6,477e-6,-.623529,.773379,.095225,.061499,-.498039,.843875,.189865,.12283,-.372549,.891119,.294195,.203537,-.247059,.937855,.397924,.283137,-.121569,.963445,.476663,.316601,.00392157,.988297,.555771,.351665,.129412,.990265,.646321,.436309,.254902,.992157,.735256,.519646,.380392,.992157,.784468,.570827,.505882,.992249,.833218,.623483,.631373,.994218,.872587,.706159,.756863,.996186,.911419,.788189,.882353,.998155,.940946,.859054,1,1,.968627,.92549]},{ColorSpace:"Lab",Name:"BrOrYl",RGBPoints:[-1,.4,.145098,.023529,-.87451,.500392,.174625,.019592,-.74902,.600784,.204291,.015656,-.623529,.701176,.251534,.011719,-.498039,.800984,.299146,.008397,-.372549,.863975,.370012,.043829,-.247059,.926321,.441107,.0794,-.121569,.961753,.521815,.120738,.00392157,.996078,.602645,.163122,.129412,.996078,.68729,.237924,.254902,.996078,.771011,.314879,.380392,.996078,.832034,.444798,.505882,.996171,.892042,.572595,.631373,.998139,.931411,.65724,.756863,1,.969489,.741669,.882353,1,.985236,.822376,1,1,1,.898039]},{ColorSpace:"Lab",Name:"RdOrYl",RGBPoints:[-1,.501961,0,.14902,-.87451,.622038,0,.14902,-.74902,.741761,4e-4,.148866,-.623529,.816563,.05158,.129181,-.498039,.890965,.10356,.110235,-.372549,.940177,.205921,.137793,-.247059,.988281,.308789,.165536,-.121569,.99025,.432803,.200969,.00392157,.992218,.555217,.236278,.129412,.994187,.628051,.267774,.254902,.996078,.701038,.301269,.380392,.996078,.777809,.383945,.505882,.996171,.852826,.466621,.631373,.998139,.892195,.549296,.756863,1,.931349,.632188,.882353,1,.966782,.7188,1,1,1,.8]},{ColorSpace:"Lab",Name:"CIELab_blue2red",RGBPoints:[-1,0,.6,.74902,1,.76863,.46667,.34118]},{ColorSpace:"Lab",Name:"blue2yellow",RGBPoints:[-1,0,0,1,0,.5,.5,.5,1,1,1,0]},{ColorSpace:"Lab",Name:"erdc_blue2gold",RGBPoints:[-1,.175119,.0438468,1,-.874016,.22383,.159771,.94557,-.748031,.27254,.233611,.891216,-.622047,.321251,.296526,.836857,-.496063,.369962,.354296,.782359,-.370079,.418672,.409139,.72754,-.244094,.467383,.462152,.672148,-.11811,.51609,.51396,.615825,.00787402,.572863,.55452,.559172,.133858,.630269,.593822,.517729,.259843,.689588,.624668,.47446,.385827,.745394,.656113,.428638,.511811,.798624,.688104,.379105,.637795,.849926,.720593,.323834,.76378,.899765,.753543,.258657,.889764,.948487,.78692,.171778,1,.990413,.816451,.00729848]},{ColorSpace:"Lab",Name:"erdc_blue2yellow",RGBPoints:[-1,.0830122,0,.495617,-.87451,.141973,.0551288,.57363,-.74902,.193048,.110258,.604561,-.623529,.234231,.165386,.57643,-.498039,.275413,.220515,.548299,-.372549,.316596,.275644,.520169,-.247059,.357778,.330773,.492038,-.121569,.398961,.385901,.463908,.00392157,.449929,.438487,.426815,.129412,.511572,.488299,.379944,.254902,.581222,.53603,.325741,.380392,.650871,.583761,.271538,.505882,.720521,.631493,.217335,.631373,.79017,.679224,.163132,.756863,.85982,.726955,.108929,.882353,.910254,.774159,.14112,1,.927513,.81759,.306289]},{ColorSpace:"Lab",Name:"erdc_cyan2orange",RGBPoints:[-1,.0471513,.213874,.414329,-.87451,.0674702,.256648,.439027,-.74902,.0959957,.299331,.462089,-.623529,.132428,.341872,.483212,-.498039,.188743,.38277,.500597,-.372549,.268511,.420229,.512179,-.247059,.352945,.455602,.519101,-.121569,.43893,.489368,.521538,.00392157,.522445,.522495,.522436,.129412,.600089,.555682,.53205,.254902,.67988,.587981,.539163,.380392,.761011,.619586,.544439,.505882,.84278,.650741,.548567,.631373,.910713,.687347,.557822,.756863,.952232,.734972,.577775,.882353,.975642,.789858,.604868,1,.990752,.843643,.632857]},{ColorSpace:"Lab",Name:"erdc_purple2green",RGBPoints:[-1,.235006,.0483128,.530899,-.87451,.302968,.108419,.552391,-.74902,.360241,.166059,.569502,-.623529,.406746,.226782,.579373,-.498039,.444073,.28964,.582094,-.372549,.473648,.353774,.577947,-.247059,.497636,.418154,.567911,-.121569,.519086,.481741,.553968,.00392157,.542884,.542914,.542875,.129412,.566303,.603989,.527499,.254902,.595218,.662965,.516857,.380392,.628641,.720701,.510673,.505882,.665373,.777849,.508165,.631373,.704182,.834921,.508303,.756863,.743846,.892328,.50999,.882353,.783158,.950422,.512181,1,.818617,1,.513888]},{ColorSpace:"Lab",Name:"erdc_purple2green_dark",RGBPoints:[-1,.107656,0,.428682,-.87451,.1924,0,.449799,-.74902,.255118,.0648939,.466726,-.623529,.304256,.133066,.476703,-.498039,.343202,.19716,.479793,-.372549,.373876,.260353,.476241,-.247059,.398497,.322872,.466953,-.121569,.420016,.384252,.453785,.00392157,.44319,.443216,.443186,.129412,.465553,.502139,.428233,.254902,.492959,.559151,.417591,.380392,.524654,.615092,.411016,.505882,.55959,.670583,.40779,.631373,.596614,.726102,.406948,.756863,.634544,.782032,.407439,.882353,.672183,.838703,.408237,1,.706131,.892759,.408452]},{ColorSpace:"Lab",Name:"coolwarm",RGBPoints:[-1,.229806,.298718,.753683,-.875,.303869,.406535,.844959,-.75,.383013,.509419,.917388,-.625,.466667,.604563,.968155,-.5,.552953,.688929,.995376,-.375,.639176,.7596,.998151,-.25,.722193,.813953,.976575,-.125,.798692,.849786,.931689,0,.865395,.86541,.865396,.125,.924128,.827385,.774508,.25,.958853,.769768,.678008,.375,.969954,.694267,.579375,.5,.958003,.602842,.481776,.625,.923945,.497309,.38797,.75,.869187,.378313,.300267,.875,.795632,.241284,.220526,1,.705673,.0155562,.150233]},{ColorSpace:"Lab",Name:"BuRd",RGBPoints:[-1,.019608,.188235,.380392,-.87451,.088504,.321107,.564937,-.74902,.163399,.444983,.697501,-.623529,.247059,.555709,.754095,-.498039,.420684,.676432,.818685,-.372549,.606459,.789773,.880277,-.247059,.761476,.868512,.924567,-.121569,.878047,.925721,.951942,.00392157,.969089,.966474,.964937,.129412,.983852,.897578,.846828,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"Spectral_lowBlue",RGBPoints:[-1,.368627,.309804,.635294,-.87451,.260361,.450058,.70173,-.74902,.248058,.591311,.717186,-.623529,.376009,.734025,.658132,-.498039,.537947,.814764,.64506,-.372549,.702345,.879585,.636678,-.247059,.84752,.938639,.607151,-.121569,.940408,.976163,.656055,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.937793,.398539,.270127,.756863,.861515,.282891,.299654,.882353,.746482,.144637,.288812,1,.619608,.003922,.258824]},{ColorSpace:"Lab",Name:"GnRP",RGBPoints:[-1,0,.266667,.105882,-.87451,.066436,.394617,.174779,-.74902,.168858,.524567,.25767,-.623529,.323875,.657439,.361015,-.498039,.504883,.772318,.506344,-.372549,.678431,.870127,.654902,-.247059,.803922,.921799,.780392,-.121569,.897116,.951942,.882814,.00392157,.967397,.965936,.967474,.129412,.928028,.879815,.930565,.254902,.866052,.780777,.882891,.380392,.77501,.665129,.821376,.505882,.675663,.537024,.737024,.631373,.57847,.396155,.645982,.756863,.492349,.223914,.547559,.882353,.375548,.096886,.423299,1,.25098,0,.294118]},{ColorSpace:"Lab",Name:"GYPi",RGBPoints:[-1,.152941,.392157,.098039,-.87451,.246444,.505344,.117724,-.74902,.351942,.614533,.161399,-.623529,.474971,.717878,.240138,-.498039,.611995,.811226,.392849,-.372549,.746328,.893118,.565321,-.247059,.859516,.94233,.747405,-.121569,.928105,.96386,.875663,.00392157,.969089,.966859,.968012,.129412,.983852,.910265,.948328,.254902,.979239,.833218,.914648,.380392,.949712,.729873,.862976,.505882,.905652,.58293,.763552,.631373,.85521,.410073,.652211,.756863,.793695,.183699,.531642,.882353,.683737,.063899,.420761,1,.556863,.003922,.321569]},{ColorSpace:"Lab",Name:"GnYlRd",RGBPoints:[-1,0,.407843,.215686,-.87451,.063975,.525952,.277201,-.74902,.177932,.633064,.332718,-.623529,.364937,.724106,.379469,-.498039,.527951,.797155,.40223,-.372549,.678431,.862822,.433449,-.247059,.803922,.916955,.514648,-.121569,.909419,.961861,.625067,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.939023,.389927,.245521,.756863,.867666,.239831,.176624,.882353,.762399,.110727,.151326,1,.647059,0,.14902]},{ColorSpace:"Lab",Name:"GBBr",RGBPoints:[-1,0,.235294,.188235,-.87451,.002461,.338639,.301423,-.74902,.055902,.448981,.417609,-.623529,.183852,.56955,.538178,-.498039,.357785,.700115,.660746,-.372549,.540177,.819531,.77624,-.247059,.714879,.890888,.864821,-.121569,.851134,.934564,.922645,.00392157,.960861,.959785,.95694,.129412,.963322,.927797,.83391,.254902,.939946,.868897,.68935,.380392,.883353,.775394,.517109,.505882,.808074,.625836,.324106,.631373,.717647,.476355,.15494,.756863,.592157,.358247,.06882,.882353,.458593,.26436,.031142,1,.329412,.188235,.019608]},{ColorSpace:"Lab",Name:"PuOr",RGBPoints:[-1,.498039,.231373,.031373,-.87451,.62599,.30273,.026451,-.74902,.746943,.387082,.037524,-.623529,.85767,.490427,.071972,-.498039,.936409,.617762,.236371,-.372549,.992695,.743099,.43291,-.247059,.995156,.841523,.63714,-.121569,.985313,.913802,.813687,.00392157,.966244,.966398,.967705,.129412,.889965,.89504,.938178,.254902,.806151,.804306,.894656,.380392,.712649,.688658,.833141,.505882,.594233,.554325,.744637,.631373,.474894,.404229,.652364,.756863,.366628,.217224,.563783,.882353,.266436,.089965,.434833,1,.176471,0,.294118]},{ColorSpace:"Lab",Name:"PRGn",RGBPoints:[-1,.25098,0,.294118,-.87451,.383852,.103345,.431911,-.74902,.497732,.234679,.55371,-.623529,.583852,.40692,.652134,-.498039,.681968,.545175,.742561,-.372549,.7807,.672357,.825221,-.247059,.871742,.788005,.886736,-.121569,.930488,.885198,.932872,.00392157,.966321,.968089,.965859,.129412,.892503,.950865,.877278,.254902,.796078,.91857,.772549,.380392,.670588,.866897,.647059,.505882,.493195,.765398,.496655,.631373,.314187,.649135,.354556,.756863,.15917,.516263,.251211,.882353,.062284,.386621,.170473,1,0,.266667,.105882]},{ColorSpace:"Lab",Name:"PiYG",RGBPoints:[-1,.556863,.003922,.321569,-.87451,.692195,.067897,.427374,-.74902,.797539,.197847,.539177,-.623529,.859054,.424221,.659746,-.498039,.908574,.592618,.770319,-.372549,.951557,.736332,.866205,-.247059,.981084,.839677,.917878,-.121569,.98293,.913802,.949558,.00392157,.96732,.968474,.965629,.129412,.92549,.963552,.869666,.254902,.852441,.939254,.736025,.380392,.739254,.890042,.553941,.505882,.60323,.805536,.382238,.631373,.467282,.711419,.235217,.756863,.344252,.608074,.156478,.882353,.2406,.49827,.116494,1,.152941,.392157,.098039]},{ColorSpace:"Lab",Name:"OrPu",RGBPoints:[-1,.176471,0,.294118,-.87451,.272434,.095963,.444214,-.74902,.373395,.228912,.56932,-.623529,.481661,.415917,.657901,-.498039,.601922,.562937,.750481,-.372549,.718493,.695886,.836986,-.247059,.811995,.811534,.898501,-.121569,.894733,.8995,.940023,.00392157,.969166,.966859,.963629,.129412,.98639,.910265,.803691,.254902,.995002,.835371,.624375,.380392,.992541,.736947,.420146,.505882,.931949,.609458,.224221,.631373,.85075,.483968,.069819,.756863,.740023,.380623,.035371,.882353,.617993,.29827,.026759,1,.498039,.231373,.031373]},{ColorSpace:"Lab",Name:"BrBG",RGBPoints:[-1,.329412,.188235,.019608,-.87451,.467205,.269435,.031911,-.74902,.6,.365629,.074202,-.623529,.72549,.483737,.160323,-.498039,.812995,.635832,.336409,-.372549,.88689,.781238,.527874,-.247059,.943483,.87474,.700115,-.121569,.963168,.929796,.841599,.00392157,.957247,.959938,.959554,.129412,.84406,.932872,.920185,.254902,.70396,.886428,.859285,.380392,.529258,.815071,.770704,.505882,.346251,.691811,.653057,.631373,.175855,.562015,.530642,.756863,.047905,.441446,.410073,.882353,.002307,.33218,.294348,1,0,.235294,.188235]},{ColorSpace:"Lab",Name:"GyRd",RGBPoints:[-1,.101961,.101961,.101961,-.87451,.227451,.227451,.227451,-.74902,.359939,.359939,.359939,-.623529,.502653,.502653,.502653,-.498039,.631373,.631373,.631373,-.372549,.749865,.749865,.749865,-.247059,.843368,.843368,.843368,-.121569,.926105,.926105,.926105,.00392157,.999846,.997232,.995694,.129412,.994925,.908651,.857901,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen",RGBPoints:[-1,.297553,0,.489074,-.87451,.40259,.151146,.567754,-.74902,.516038,.284843,.658231,-.623529,.629783,.423646,.750938,-.498039,.735198,.563697,.835956,-.372549,.82408,.695541,.903582,-.247059,.889091,.807454,.944862,-.121569,.92334,.886917,.951839,.00392157,.921045,.921084,.921003,.129412,.877324,.907455,.845381,.254902,.797649,.849713,.734695,.380392,.691646,.75964,.600532,.505882,.568981,.649159,.453807,.631373,.438945,.529756,.304259,.756863,.30973,.412001,.158303,.882353,.187078,.305111,.00251458,1,.101655,.220836,0]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen_dim",RGBPoints:[-1,.404088,.131038,.592767,-.87451,.486469,.230957,.651243,-.74902,.575165,.339335,.717723,-.623529,.662741,.454332,.784263,-.498039,.742071,.570213,.842918,-.372549,.806935,.678992,.886227,-.247059,.852219,.771315,.90763,-.121569,.873345,.837327,.901572,.00392157,.866783,.86682,.866745,.129412,.82839,.858225,.796812,.254902,.762578,.814287,.700202,.380392,.676429,.744229,.585735,.505882,.577033,.65732,.461526,.631373,.47128,.562476,.33476,.756863,.365461,.467957,.21076,.882353,.264758,.381138,.0878313,1,.182591,.312249,0]},{ColorSpace:"Lab",Name:"erdc_divLow_icePeach",RGBPoints:[-1,.480048,.817441,.998056,-.87451,.425898,.726921,.883187,-.74902,.366682,.629445,.761936,-.623529,.308756,.531002,.640217,-.498039,.258021,.43705,.523433,-.372549,.219244,.352381,.416348,-.247059,.195127,.281032,.322979,-.121569,.186286,.22627,.246525,.00392157,.192352,.19236,.192364,.129412,.255927,.214469,.191756,.254902,.340459,.254426,.206666,.380392,.444655,.309315,.234029,.505882,.565353,.376004,.270969,.631373,.697917,.450748,.314293,.756863,.836657,.529064,.360227,.882353,.972695,.614884,.413123,1,1,.705904,.472699]},{ColorSpace:"Lab",Name:"erdc_divLow_purpleGreen",RGBPoints:[-1,.956034,.666487,.952663,-.87451,.874457,.572698,.936352,-.74902,.753465,.488253,.909063,-.623529,.63309,.413507,.763833,-.498039,.514491,.345878,.620015,-.372549,.405008,.288141,.484376,-.247059,.311388,.241986,.363556,-.121569,.238722,.209044,.263449,.00392157,.192352,.192366,.192362,.129412,.200379,.233201,.168618,.254902,.230151,.291737,.165227,.380392,.279481,.366076,.178607,.505882,.344927,.453267,.205703,.631373,.421554,.549449,.242643,.756863,.503334,.649999,.284377,.882353,.583497,.749672,.324969,1,.650705,.837228,.356264]},{ColorSpace:"Lab",Name:"Haze_green",RGBPoints:[-1,1,.835294,.886275,-.87451,.937255,.756863,.870443,-.74902,.875817,.666376,.857807,-.623529,.778359,.583007,.808134,-.498039,.676253,.494118,.745098,-.372549,.561365,.390123,.682353,-.247059,.438344,.262745,.621496,-.121569,.321133,.141031,.558751,.00392157,.203922,.0217865,.495861,.129412,.265505,.129412,.433261,.254902,.311692,.255338,.37008,.380392,.356282,.377342,.310821,.505882,.39971,.488889,.258243,.631373,.442556,.604357,.205519,.756863,.48671,.71968,.152941,.882353,.529847,.830356,.100944,1,.572549,.933333,.054902]},{ColorSpace:"Lab",Name:"Haze_lime",RGBPoints:[-1,.704034,.784196,1,-.87451,.633111,.691418,.956078,-.74902,.564021,.600606,.912157,-.623529,.496827,.51189,.868235,-.498039,.43157,.425416,.824314,-.372549,.368248,.341347,.780392,-.247059,.306767,.259855,.736471,-.121569,.246862,.181069,.692549,.00392157,.191619,.109542,.648627,.129412,.257404,.194031,.604706,.254902,.321794,.278775,.560784,.380392,.387909,.364617,.516863,.505882,.456569,.451881,.472941,.631373,.527424,.540773,.42902,.756863,.599759,.631427,.385098,.882353,.673065,.723898,.341176,1,.742751,.812252,.3]},{ColorSpace:"RGB",Name:"Haze",RGBPoints:[-1,1,.835294,.996078,-.00392157,.023529,.141176,.498039,.00392157,.015686,.137255,.494118,1,.984314,.764706,0]},{ColorSpace:"Lab",Name:"Haze_cyan",RGBPoints:[-1,.956863,1,.835294,-.87451,.933188,.921714,.760784,-.74902,.870588,.803486,.671605,-.623529,.807843,.684096,.583297,-.498039,.745098,.569208,.494118,-.372549,.682353,.437763,.390123,-.247059,.621496,.288163,.262745,-.121569,.558751,.144517,.141031,.00392157,.495861,.0217865,.0413943,.129412,.433261,.137255,.129412,.254902,.37008,.263181,.255338,.380392,.306318,.381845,.372694,.505882,.243137,.503994,.494263,.631373,.180392,.629484,.619753,.756863,.117647,.754975,.747131,.882353,.054902,.876398,.866812,1,0,.988235,.976471]},{ColorSpace:"Lab",Name:"nic_Edge",RGBPoints:[-1,.191208,.191208,.191208,-.87451,.239484,.00545035,.614821,-.74902,.220593,.0617459,.863547,-.623529,.17509,.278988,.97794,-.498039,.143526,.576069,.998553,-.372549,.166456,.871883,.96594,-.247059,.376202,.993555,.981833,-.121569,.681996,.991297,.999239,.00392157,.954172,.952734,.94374,.129412,.999735,.99301,.662896,.254902,.979399,.991466,.357973,.380392,.968771,.854967,.162659,.505882,.999245,.556697,.144323,.631373,.973959,.26223,.177946,.756863,.852358,.0526707,.222974,.882353,.593889,.00912724,.238855,1,.191208,.191208,.191208]},{ColorSpace:"Lab",Name:"erdc_iceFire_H",RGBPoints:[-1,4.05432e-7,0,590122e-11,-.87451,0,.120401,.302675,-.74902,0,.216583,.524574,-.623529,.0552475,.345025,.6595,-.498039,.128047,.492588,.720288,-.372549,.188955,.641309,.792092,-.247059,.327673,.784935,.873434,-.121569,.60824,.892164,.935547,.00392157,.881371,.912178,.818099,.129412,.951407,.835621,.449279,.254902,.904481,.690489,0,.380392,.85407,.510864,0,.505882,.777093,.33018,88199e-8,.631373,.672862,.139087,.00269398,.756863,.508815,0,0,.882353,.299417,366289e-9,547829e-9,1,.0157519,.00332021,4.55569e-8]},{ColorSpace:"Lab",Name:"erdc_iceFire_L",RGBPoints:[-1,.870485,.913768,.832905,-.87451,.586919,.887865,.934003,-.74902,.31583,.776442,.867858,-.623529,.18302,.632034,.787722,-.498039,.117909,.484134,.713825,-.372549,.0507239,.335979,.654741,-.247059,0,.209874,.511832,-.121569,0,.114689,.28935,.00392157,.0157519,.00332021,4.55569e-8,.129412,.312914,0,0,.254902,.520865,0,0,.380392,.680105,.15255,.0025996,.505882,.785109,.339479,797922e-9,.631373,.857354,.522494,0,.756863,.910974,.699774,0,.882353,.951921,.842817,.478545,1,.881371,.912178,.818099]},{ColorSpace:"RGB",Name:"hsv",RGBPoints:[-1,1,0,0,-.666666,1,0,1,-.333333,0,0,1,0,0,1,1,.33333,0,1,0,.66666,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"hue_L60",RGBPoints:[-1,.964784,.400592,.349549,-.87451,.964915,.372498,.53785,-.74902,.892353,.401039,.759569,-.623529,.79263,.446956,.903017,-.498039,.682208,.49954,.966673,-.372549,.56392,.553082,.968836,-.247059,.442031,.606396,.901601,-.121569,.305499,.65701,.765784,.00392157,.197251,.687914,.620914,.129412,.193882,.701887,.472654,.254902,.249866,.706123,.320005,.380392,.35132,.697417,.202919,.505882,.498097,.669467,.125232,.631373,.637477,.626239,.107431,.756863,.762115,.56872,.155812,.882353,.889434,.481116,.240445,1,.964784,.400592,.349549]},{IndexedColors:[0,0,0,.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,.6509803921568628,.3372549019607843,.1568627450980392],Name:"Spectrum",NanColor:[.6509803921568628,.3372549019607843,.1568627450980392]},{IndexedColors:[.4745098039215686,.09019607843137255,.09019607843137255,.7098039215686275,.00392156862745098,.00392156862745098,.9372549019607843,.2784313725490196,.09803921568627451,.9764705882352941,.5137254901960784,.1411764705882353,1,.7058823529411765,0,1,.8980392156862745,.02352941176470588],Name:"Warm",NanColor:[1,.8980392156862745,.02352941176470588]},{IndexedColors:[.4588235294117647,.6941176470588235,.00392156862745098,.3450980392156863,.5019607843137255,.1607843137254902,.3137254901960784,.8431372549019608,.7490196078431373,.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.6039215686274509,.407843137254902,1,.3725490196078431,.2,.5019607843137255],Name:"Cool",NanColor:[.3725490196078431,.2,.5019607843137255]},{IndexedColors:[.2313725490196079,.407843137254902,.6705882352941176,.1098039215686274,.5843137254901961,.803921568627451,.3058823529411765,.8509803921568627,.9176470588235294,.4509803921568628,.6039215686274509,.8352941176470589,.2588235294117647,.2392156862745098,.6627450980392157,.3137254901960784,.3294117647058823,.5294117647058824,.06274509803921569,.1647058823529412,.3215686274509804],Name:"Blues",NanColor:[.06274509803921569,.1647058823529412,.3215686274509804]},{IndexedColors:[.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.4,.2431372549019608,.7176470588235294,.6352941176470588,.3294117647058823,.8117647058823529,.8705882352941177,.3803921568627451,.807843137254902,.8627450980392157,.3803921568627451,.5843137254901961,.2392156862745098,.06274509803921569,.3215686274509804],Name:"Wild Flower",NanColor:[.2392156862745098,.06274509803921569,.3215686274509804]},{IndexedColors:[.396078431372549,.4862745098039216,.2156862745098039,.4588235294117647,.6941176470588235,.00392156862745098,.6980392156862745,.7294117647058823,.1882352941176471,1,.8980392156862745,.02352941176470588,1,.7058823529411765,0,.9764705882352941,.5137254901960784,.1411764705882353],Name:"Citrus",NanColor:[.9764705882352941,.5137254901960784,.1411764705882353]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (11)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (10)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (9)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (8)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (7)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (6)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.9686274509803922,.9686274509803922,.9686274509803922,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (5)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (4)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9450980392156862,.6392156862745098,.2509803921568627,.9686274509803922,.9686274509803922,.9686274509803922,.6,.5568627450980392,.7647058823529411],Name:"Brewer Diverging Purple-Orange (3)",NanColor:[.6,.5568627450980392,.7647058823529411]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (11)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (10)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (9)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (8)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (7)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (6)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,1,1,.7490196078431373,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (5)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (4)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.9882352941176471,.5529411764705883,.3490196078431372,1,1,.7490196078431373,.6,.8352941176470589,.5803921568627451],Name:"Brewer Diverging Spectral (3)",NanColor:[.6,.8352941176470589,.5803921568627451]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (11)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (10)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (9)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (8)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (7)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (6)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.9607843137254902,.9607843137254902,.9607843137254902,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (5)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (4)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.8470588235294118,.7019607843137254,.396078431372549,.9607843137254902,.9607843137254902,.9607843137254902,.3529411764705883,.7058823529411765,.6745098039215687],Name:"Brewer Diverging Brown-Blue-Green (3)",NanColor:[.3529411764705883,.7058823529411765,.6745098039215687]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.4274509803921568,.1725490196078431,0,.2666666666666667,.1058823529411765],Name:"Brewer Sequential Blue-Green (9)",NanColor:[0,.2666666666666667,.1058823529411765]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (8)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.8,.9254901960784314,.9019607843137255,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (7)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (6)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (5)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1372549019607843,.5450980392156862,.2705882352941176],Name:"Brewer Sequential Blue-Green (4)",NanColor:[.1372549019607843,.5450980392156862,.2705882352941176]},{IndexedColors:[.8980392156862745,.9607843137254902,.9764705882352941,.6,.8470588235294118,.788235294117647,.1725490196078431,.6352941176470588,.3725490196078431],Name:"Brewer Sequential Blue-Green (3)",NanColor:[.1725490196078431,.6352941176470588,.3725490196078431]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.6,.203921568627451,.01568627450980392,.4,.1450980392156863,.02352941176470588],Name:"Brewer Sequential Yellow-Orange-Brown (9)",NanColor:[.4,.1450980392156863,.02352941176470588]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (8)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (7)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (6)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (5)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8,.2980392156862745,.00784313725490196],Name:"Brewer Sequential Yellow-Orange-Brown (4)",NanColor:[.8,.2980392156862745,.00784313725490196]},{IndexedColors:[1,.9686274509803922,.7372549019607844,.996078431372549,.7686274509803922,.3098039215686275,.8509803921568627,.3725490196078431,.05490196078431372],Name:"Brewer Sequential Yellow-Orange-Brown (3)",NanColor:[.8509803921568627,.3725490196078431,.05490196078431372]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.5058823529411764,.05882352941176471,.4862745098039216,.3019607843137255,0,.2941176470588235],Name:"Brewer Sequential Blue-Purple (9)",NanColor:[.3019607843137255,0,.2941176470588235]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (8)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (7)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (6)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (5)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.2549019607843137,.615686274509804],Name:"Brewer Sequential Blue-Purple (4)",NanColor:[.5333333333333333,.2549019607843137,.615686274509804]},{IndexedColors:[.8784313725490196,.9254901960784314,.9568627450980393,.6196078431372549,.7372549019607844,.8549019607843137,.5333333333333333,.3372549019607843,.6549019607843137],Name:"Brewer Sequential Blue-Purple (3)",NanColor:[.5333333333333333,.3372549019607843,.6549019607843137]},{IndexedColors:[.4980392156862745,.788235294117647,.4980392156862745,.7450980392156863,.6823529411764706,.8313725490196079,.9921568627450981,.7529411764705882,.5254901960784314,1,1,.6,.2196078431372549,.4235294117647059,.6901960784313725,.9411764705882353,.00784313725490196,.4980392156862745,.7490196078431373,.3568627450980392,.09019607843137255,.4,.4,.4],Name:"Brewer Qualitative Accent",NanColor:[.4,.4,.4]},{IndexedColors:[.1058823529411765,.6196078431372549,.4666666666666667,.8509803921568627,.3725490196078431,.00784313725490196,.4588235294117647,.4392156862745098,.7019607843137254,.9058823529411765,.1607843137254902,.5411764705882353,.4,.6509803921568628,.1176470588235294,.9019607843137255,.6705882352941176,.00784313725490196,.6509803921568628,.4627450980392157,.1137254901960784,.4,.4,.4],Name:"Brewer Qualitative Dark2",NanColor:[.4,.4,.4]},{IndexedColors:[.4,.7607843137254902,.6470588235294118,.9882352941176471,.5529411764705883,.3843137254901961,.5529411764705883,.6274509803921569,.796078431372549,.9058823529411765,.5411764705882353,.7647058823529411,.6509803921568628,.8470588235294118,.3294117647058823,1,.8509803921568627,.1843137254901961,.8980392156862745,.7686274509803922,.5803921568627451,.7019607843137254,.7019607843137254,.7019607843137254],Name:"Brewer Qualitative Set2",NanColor:[.7019607843137254,.7019607843137254,.7019607843137254]},{IndexedColors:[.7019607843137254,.8862745098039215,.803921568627451,.9921568627450981,.803921568627451,.6745098039215687,.796078431372549,.8352941176470589,.9098039215686274,.9568627450980393,.792156862745098,.8941176470588236,.9019607843137255,.9607843137254902,.788235294117647,1,.9490196078431372,.6823529411764706,.9450980392156862,.8862745098039215,.8,.8,.8,.8],Name:"Brewer Qualitative Pastel2",NanColor:[.8,.8,.8]},{IndexedColors:[.984313725490196,.7058823529411765,.6823529411764706,.7019607843137254,.803921568627451,.8901960784313725,.8,.9215686274509803,.7725490196078432,.8705882352941177,.796078431372549,.8941176470588236,.996078431372549,.8509803921568627,.6509803921568628,1,1,.8,.8980392156862745,.8470588235294118,.7411764705882353,.9921568627450981,.8549019607843137,.9254901960784314,.9490196078431372,.9490196078431372,.9490196078431372],Name:"Brewer Qualitative Pastel1",NanColor:[.9490196078431372,.9490196078431372,.9490196078431372]},{IndexedColors:[.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,1,1,.2,.6509803921568628,.3372549019607843,.1568627450980392,.9686274509803922,.5058823529411764,.7490196078431373,.6,.6,.6],Name:"Brewer Qualitative Set1",NanColor:[.6,.6,.6]},{IndexedColors:[.6509803921568628,.807843137254902,.8901960784313725,.1215686274509804,.4705882352941176,.7058823529411765,.6980392156862745,.8745098039215686,.5411764705882353,.2,.6274509803921569,.1725490196078431,.984313725490196,.6039215686274509,.6,.8901960784313725,.1019607843137255,.1098039215686274,.9921568627450981,.7490196078431373,.4352941176470588,1,.4980392156862745,0,.792156862745098,.6980392156862745,.8392156862745098,.4156862745098039,.2392156862745098,.6039215686274509,1,1,.6],Name:"Brewer Qualitative Paired",NanColor:[1,1,.6]},{IndexedColors:[.5529411764705883,.8274509803921568,.7803921568627451,1,1,.7019607843137254,.7450980392156863,.7294117647058823,.8549019607843137,.984313725490196,.5019607843137255,.4470588235294118,.5019607843137255,.6941176470588235,.8274509803921568,.9921568627450981,.7058823529411765,.3843137254901961,.7019607843137254,.8705882352941177,.4117647058823529,.9882352941176471,.803921568627451,.8980392156862745,.8509803921568627,.8509803921568627,.8509803921568627,.7372549019607844,.5019607843137255,.7411764705882353,.8,.9215686274509803,.7725490196078432,1,.9294117647058824,.4352941176470588],Name:"Brewer Qualitative Set3",NanColor:[1,.9294117647058824,.4352941176470588]},{IndexedColors:[1,0,0,1,.862745,0,0,.695201,0],Name:"Traffic Lights",NanColor:[.803922,0,.803922]},{IndexedColors:[.908659,.604013,.581857,1,.862745,0,0,.695201,0],Name:"Traffic Lights For Deuteranopes",NanColor:[.803922,0,.803922]},{IndexedColors:[.4196078431372549,0,.07058823529411765,.9019607843137255,.9411764705882353,.0196078431372549,.01568627450980392,.6196078431372549,.00784313725490196],Name:"Traffic Lights For Deuteranopes 2",NanColor:[.803922,0,.803922]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Muted Blue-Green",NanColor:[.25,0,0],RGBPoints:[0,.109804,.27451,.301961,.02,.129412,.309804,.341176,.05,.14902,.341176,.380392,.1,.188235,.403922,.458824,.15,.227451,.447059,.521569,.2,.290196,.494118,.588235,.25,.368627,.552941,.670588,.3,.458824,.619608,.74902,.35,.588235,.713725,.85098,.4,.72549,.815686,.941176,.45,.831373,.882353,.980392,.475,.909804,.933333,1,.5,.980392,.984314,1,.5,.996078,1,.94902,.5,1,1,.980392,.5,.980392,.984314,1,.525,.972549,.988235,.890196,.55,.917647,.960784,.835294,.6,.835294,.921569,.772549,.65,.768627,.901961,.737255,.7,.670588,.831373,.654902,.75,.576471,.760784,.584314,.8,.498039,.678431,.521569,.85,.392157,.560784,.427451,.9,.294118,.45098,.333333,.95,.211765,.34902,.254902,1,.152941,.278431,.196078]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Green-Blue Asymmetric Divergent (62Blbc)",NanColor:[.25,0,0],RGBPoints:[0,.121569,.2,.145098,.05,.196078,.301961,.223529,.1,.258824,.4,.278431,.2,.341176,.54902,.341176,.25,.419608,.619608,.376471,.3,.545098,.701961,.392157,.35,.643137,.780392,.403922,.4,.729412,.819608,.45098,.45,.811765,.870588,.521569,.5,.898039,.909804,.564706,.55,.941176,.92549,.686275,.6,.960784,.94902,.776471,.64,1,1,1,.65,.890196,.988235,.972549,.7,.721569,.894118,.901961,.75,.631373,.823529,.839216,.8,.517647,.662745,.701961,.85,.384314,.494118,.54902,.9,.298039,.360784,.45098,.95,.223529,.25098,.34902,.99,.156863,.172549,.25098,1,.137255,.137255,.188235]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Asymmtrical Earth Tones (6_21b)",NanColor:[.25,0,0],RGBPoints:[0,.141176,.14902,.2,.05,.215686,.258824,.321569,.1,.243137,.368627,.380392,.15,.27451,.439216,.4,.2,.32549,.501961,.384314,.25,.403922,.6,.419608,.3,.486275,.701961,.454902,.35,.556863,.74902,.494118,.4,.670588,.8,.545098,.5,.854902,.901961,.631373,.55,.92549,.941176,.694118,.6,.960784,.94902,.776471,.65,.988235,.968627,.909804,.7,.839216,.815686,.772549,.75,.701961,.662745,.615686,.8,.6,.529412,.478431,.85,.501961,.403922,.360784,.9,.439216,.313725,.290196,1,.301961,.164706,.176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Yellow 15",NanColor:[.25,0,0],RGBPoints:[0,1,1,.988235,.002,1,1,.988235,.05,.984314,.988235,.843137,.1,.988235,.988235,.741176,.15,.980392,.968627,.654902,.2,.980392,.945098,.576471,.25,.968627,.905882,.486275,.3,.968627,.862745,.388235,.35,.960784,.803922,.286275,.4,.94902,.741176,.219608,.45,.941176,.678431,.14902,.5,.929412,.607843,.094118,.55,.921569,.545098,.054902,.6,.909804,.486275,.035294,.65,.890196,.411765,.019608,.7,.8,.305882,0,.75,.760784,.239216,0,.8,.678431,.180392,.011765,.85,.6,.121569,.023529,.9,.501961,.054902,.031373,.95,.4,.039216,.058824,1,.301961,.047059,.090196]},{ColorSpace:"Diverging",Name:"Magma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002258,.001295,.018331,.007843,.003279,.002305,.023708,.011765,.004512,.00349,.029965,.015686,.00595,.004843,.03713,.019608,.007588,.006356,.044973,.023529,.009426,.008022,.052844,.027451,.011465,.009828,.06075,.031373,.013708,.011771,.068667,.035294,.016156,.01384,.076603,.039216,.018815,.016026,.084584,.043137,.021692,.01832,.09261,.047059,.024792,.020715,.100676,.05098,.028123,.023201,.108787,.054902,.031696,.025765,.116965,.058824,.03552,.028397,.125209,.062745,.039608,.03109,.133515,.066667,.04383,.03383,.141886,.070588,.048062,.036607,.150327,.07451,.05232,.039407,.158841,.078431,.056615,.04216,.167446,.082353,.060949,.044794,.176129,.086275,.06533,.047318,.184892,.090196,.069764,.049726,.193735,.094118,.074257,.052017,.20266,.098039,.078815,.054184,.211667,.101961,.083446,.056225,.220755,.105882,.088155,.058133,.229922,.109804,.092949,.059904,.239164,.113725,.097833,.061531,.248477,.117647,.102815,.06301,.257854,.121569,.107899,.064335,.267289,.12549,.113094,.065492,.276784,.129412,.118405,.066479,.286321,.133333,.123833,.067295,.295879,.137255,.12938,.067935,.305443,.141176,.135053,.068391,.315,.145098,.140858,.068654,.324538,.14902,.146785,.068738,.334011,.152941,.152839,.068637,.343404,.156863,.159018,.068354,.352688,.160784,.165308,.067911,.361816,.164706,.171713,.067305,.370771,.168627,.178212,.066576,.379497,.172549,.184801,.065732,.387973,.176471,.19146,.064818,.396152,.180392,.198177,.063862,.404009,.184314,.204935,.062907,.411514,.188235,.211718,.061992,.418647,.192157,.218512,.061158,.425392,.196078,.225302,.060445,.431742,.2,.232077,.059889,.437695,.203922,.238826,.059517,.443256,.207843,.245543,.059352,.448436,.211765,.25222,.059415,.453248,.215686,.258857,.059706,.45771,.219608,.265447,.060237,.46184,.223529,.271994,.060994,.46566,.227451,.278493,.061978,.46919,.231373,.284951,.063168,.472451,.235294,.291366,.064553,.475462,.239216,.29774,.066117,.478243,.243137,.304081,.067835,.480812,.247059,.310382,.069702,.483186,.25098,.316654,.07169,.48538,.254902,.322899,.073782,.487408,.258824,.329114,.075972,.489287,.262745,.335308,.078236,.491024,.266667,.341482,.080564,.492631,.270588,.347636,.082946,.494121,.27451,.353773,.085373,.495501,.278431,.359898,.087831,.496778,.282353,.366012,.090314,.49796,.286275,.372116,.092816,.499053,.290196,.378211,.095332,.500067,.294118,.384299,.097855,.501002,.298039,.390384,.100379,.501864,.301961,.396467,.102902,.502658,.305882,.402548,.10542,.503386,.309804,.408629,.10793,.504052,.313725,.414709,.110431,.504662,.317647,.420791,.11292,.505215,.321569,.426877,.115395,.505714,.32549,.432967,.117855,.50616,.329412,.439062,.120298,.506555,.333333,.445163,.122724,.506901,.337255,.451271,.125132,.507198,.341176,.457386,.127522,.507448,.345098,.463508,.129893,.507652,.34902,.46964,.132245,.507809,.352941,.47578,.134577,.507921,.356863,.481929,.136891,.507989,.360784,.488088,.139186,.508011,.364706,.494258,.141462,.507988,.368627,.500438,.143719,.50792,.372549,.506629,.145958,.507806,.376471,.512831,.148179,.507648,.380392,.519045,.150383,.507443,.384314,.52527,.152569,.507192,.388235,.531507,.154739,.506895,.392157,.537755,.156894,.506551,.396078,.544015,.159033,.506159,.4,.550287,.161158,.505719,.403922,.556571,.163269,.50523,.407843,.562866,.165368,.504692,.411765,.569172,.167454,.504105,.415686,.57549,.16953,.503466,.419608,.581819,.171596,.502777,.423529,.588158,.173652,.502035,.427451,.594508,.175701,.501241,.431373,.600868,.177743,.500394,.435294,.607238,.179779,.499492,.439216,.613617,.181811,.498536,.443137,.620005,.18384,.497524,.447059,.626401,.185867,.496456,.45098,.632805,.187893,.495332,.454902,.639216,.189921,.49415,.458824,.645633,.191952,.49291,.462745,.652056,.193986,.491611,.466667,.658483,.196027,.490253,.470588,.664915,.198075,.488836,.47451,.671349,.200133,.487358,.478431,.677786,.202203,.485819,.482353,.684224,.204286,.484219,.486275,.690661,.206384,.482558,.490196,.697098,.208501,.480835,.494118,.703532,.210638,.479049,.498039,.709962,.212797,.477201,.501961,.716387,.214982,.47529,.505882,.722805,.217194,.473316,.509804,.729216,.219437,.471279,.513725,.735616,.221713,.46918,.517647,.742004,.224025,.467018,.521569,.748378,.226377,.464794,.52549,.754737,.228772,.462509,.529412,.761077,.231214,.460162,.533333,.767398,.233705,.457755,.537255,.773695,.236249,.455289,.541176,.779968,.238851,.452765,.545098,.786212,.241514,.450184,.54902,.792427,.244242,.447543,.552941,.798608,.24704,.444848,.556863,.804752,.249911,.442102,.560784,.810855,.252861,.439305,.564706,.816914,.255895,.436461,.568627,.822926,.259016,.433573,.572549,.828886,.262229,.430644,.576471,.834791,.26554,.427671,.580392,.840636,.268953,.424666,.584314,.846416,.272473,.421631,.588235,.852126,.276106,.418573,.592157,.857763,.279857,.415496,.596078,.86332,.283729,.412403,.6,.868793,.287728,.409303,.603922,.874176,.291859,.406205,.607843,.879464,.296125,.403118,.611765,.884651,.30053,.400047,.615686,.889731,.305079,.397002,.619608,.8947,.309773,.393995,.623529,.899552,.314616,.391037,.627451,.904281,.31961,.388137,.631373,.908884,.324755,.385308,.635294,.913354,.330052,.382563,.639216,.917689,.3355,.379915,.643137,.921884,.341098,.377376,.647059,.925937,.346844,.374959,.65098,.929845,.352734,.372677,.654902,.933606,.358764,.370541,.658824,.937221,.364929,.368567,.662745,.940687,.371224,.366762,.666667,.944006,.377643,.365136,.670588,.94718,.384178,.363701,.67451,.95021,.39082,.362468,.678431,.953099,.397563,.361438,.682353,.955849,.4044,.360619,.686275,.958464,.411324,.360014,.690196,.960949,.418323,.35963,.694118,.96331,.42539,.359469,.698039,.965549,.432519,.359529,.701961,.967671,.439703,.35981,.705882,.96968,.446936,.360311,.709804,.971582,.45421,.36103,.713725,.973381,.46152,.361965,.717647,.975082,.468861,.363111,.721569,.97669,.476226,.364466,.72549,.97821,.483612,.366025,.729412,.979645,.491014,.367783,.733333,.981,.498428,.369734,.737255,.982279,.505851,.371874,.741176,.983485,.51328,.374198,.745098,.984622,.520713,.376698,.74902,.985693,.528148,.379371,.752941,.9867,.535582,.38221,.756863,.987646,.543015,.38521,.760784,.988533,.550446,.388365,.764706,.989363,.557873,.391671,.768627,.990138,.565296,.395122,.772549,.990871,.572706,.398714,.776471,.991558,.580107,.402441,.780392,.992196,.587502,.406299,.784314,.992785,.594891,.410283,.788235,.993326,.602275,.41439,.792157,.993834,.609644,.418613,.796078,.994309,.616999,.42295,.8,.994738,.62435,.427397,.803922,.995122,.631696,.431951,.807843,.99548,.639027,.436607,.811765,.99581,.646344,.441361,.815686,.996096,.653659,.446213,.819608,.996341,.660969,.45116,.823529,.99658,.668256,.456192,.827451,.996775,.675541,.461314,.831373,.996925,.682828,.466526,.835294,.997077,.690088,.471811,.839216,.997186,.697349,.477182,.843137,.997254,.704611,.482635,.847059,.997325,.711848,.488154,.85098,.997351,.719089,.493755,.854902,.997351,.726324,.499428,.858824,.997341,.733545,.505167,.862745,.997285,.740772,.510983,.866667,.997228,.747981,.516859,.870588,.997138,.75519,.522806,.87451,.997019,.762398,.528821,.878431,.996898,.769591,.534892,.882353,.996727,.776795,.541039,.886275,.996571,.783977,.547233,.890196,.996369,.791167,.553499,.894118,.996162,.798348,.55982,.898039,.995932,.805527,.566202,.901961,.99568,.812706,.572645,.905882,.995424,.819875,.57914,.909804,.995131,.827052,.585701,.913725,.994851,.834213,.592307,.917647,.994524,.841387,.598983,.921569,.994222,.84854,.605696,.92549,.993866,.855711,.612482,.929412,.993545,.862859,.619299,.933333,.99317,.870024,.626189,.937255,.992831,.877168,.633109,.941176,.99244,.88433,.640099,.945098,.992089,.89147,.647116,.94902,.991688,.898627,.654202,.952941,.991332,.905763,.661309,.956863,.99093,.912915,.668481,.960784,.99057,.920049,.675675,.964706,.990175,.927196,.682926,.968627,.989815,.934329,.690198,.972549,.989434,.94147,.697519,.976471,.989077,.948604,.704863,.980392,.988717,.955742,.712242,.984314,.988367,.962878,.719649,.988235,.988033,.970012,.727077,.992157,.987691,.977154,.734536,.996078,.987387,.984288,.742002,1,.987053,.991438,.749504]},{ColorSpace:"Diverging",Name:"Inferno (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002267,.00127,.01857,.007843,.003299,.002249,.024239,.011765,.004547,.003392,.030909,.015686,.006006,.004692,.038558,.019608,.007676,.006136,.046836,.023529,.009561,.007713,.055143,.027451,.011663,.009417,.06346,.031373,.013995,.011225,.071862,.035294,.016561,.013136,.080282,.039216,.019373,.015133,.088767,.043137,.022447,.017199,.097327,.047059,.025793,.019331,.10593,.05098,.029432,.021503,.114621,.054902,.033385,.023702,.123397,.058824,.037668,.025921,.132232,.062745,.042253,.028139,.141141,.066667,.046915,.030324,.150164,.070588,.051644,.032474,.159254,.07451,.056449,.034569,.168414,.078431,.06134,.03659,.177642,.082353,.066331,.038504,.186962,.086275,.071429,.040294,.196354,.090196,.076637,.041905,.205799,.094118,.081962,.043328,.215289,.098039,.087411,.044556,.224813,.101961,.09299,.045583,.234358,.105882,.098702,.046402,.243904,.109804,.104551,.047008,.25343,.113725,.110536,.047399,.262912,.117647,.116656,.047574,.272321,.121569,.122908,.047536,.281624,.12549,.129285,.047293,.290788,.129412,.135778,.046856,.299776,.133333,.142378,.046242,.308553,.137255,.149073,.045468,.317085,.141176,.15585,.044559,.325338,.145098,.162689,.043554,.333277,.14902,.169575,.042489,.340874,.152941,.176493,.041402,.348111,.156863,.183429,.040329,.354971,.160784,.190367,.039309,.361447,.164706,.197297,.0384,.367535,.168627,.204209,.037632,.373238,.172549,.211095,.03703,.378563,.176471,.217949,.036615,.383522,.180392,.224763,.036405,.388129,.184314,.231538,.036405,.3924,.188235,.238273,.036621,.396353,.192157,.244967,.037055,.400007,.196078,.25162,.037705,.403378,.2,.258234,.038571,.406485,.203922,.26481,.039647,.409345,.207843,.271347,.040922,.411976,.211765,.27785,.042353,.414392,.215686,.284321,.043933,.416608,.219608,.290763,.045644,.418637,.223529,.297178,.04747,.420491,.227451,.303568,.049396,.422182,.231373,.309935,.051407,.423721,.235294,.316282,.05349,.425116,.239216,.32261,.055634,.426377,.243137,.328921,.057827,.427511,.247059,.335217,.06006,.428524,.25098,.3415,.062325,.429425,.254902,.347771,.064616,.430217,.258824,.354032,.066925,.430906,.262745,.360284,.069247,.431497,.266667,.366529,.071579,.431994,.270588,.372768,.073915,.4324,.27451,.379001,.076253,.432719,.278431,.385228,.078591,.432955,.282353,.391453,.080927,.433109,.286275,.397674,.083257,.433183,.290196,.403894,.08558,.433179,.294118,.410113,.087896,.433098,.298039,.416331,.090203,.432943,.301961,.422549,.092501,.432714,.305882,.428768,.09479,.432412,.309804,.434987,.097069,.432039,.313725,.441207,.099338,.431594,.317647,.447428,.101597,.43108,.321569,.453651,.103848,.430498,.32549,.459875,.106089,.429846,.329412,.4661,.108322,.429125,.333333,.472328,.110547,.428334,.337255,.478558,.112764,.427475,.341176,.484789,.114974,.426548,.345098,.491022,.117179,.425552,.34902,.497257,.119379,.424488,.352941,.503493,.121575,.423356,.356863,.50973,.123769,.422156,.360784,.515967,.12596,.420887,.364706,.522206,.12815,.419549,.368627,.528444,.130341,.418142,.372549,.534683,.132534,.416667,.376471,.54092,.134729,.415123,.380392,.547157,.136929,.413511,.384314,.553392,.139134,.411829,.388235,.559624,.141346,.410078,.392157,.565854,.143567,.408258,.396078,.572081,.145797,.406369,.4,.578304,.148039,.404411,.403922,.584521,.150294,.402385,.407843,.590734,.152563,.40029,.411765,.59694,.154848,.398125,.415686,.603139,.157151,.395891,.419608,.60933,.159474,.393589,.423529,.615513,.161817,.391219,.427451,.621685,.164184,.388781,.431373,.627847,.166575,.386276,.435294,.633998,.168992,.383704,.439216,.640135,.171438,.381065,.443137,.64626,.173914,.378359,.447059,.652369,.176421,.375586,.45098,.658463,.178962,.372748,.454902,.66454,.181539,.369846,.458824,.670599,.184153,.366879,.462745,.676638,.186807,.363849,.466667,.682656,.189501,.360757,.470588,.688653,.192239,.357603,.47451,.694627,.195021,.354388,.478431,.700576,.197851,.351113,.482353,.7065,.200728,.347777,.486275,.712396,.203656,.344383,.490196,.718264,.206636,.340931,.494118,.724103,.20967,.337424,.498039,.729909,.212759,.333861,.501961,.735683,.215906,.330245,.505882,.741423,.219112,.326576,.509804,.747127,.222378,.322856,.513725,.752794,.225706,.319085,.517647,.758422,.229097,.315266,.521569,.76401,.232554,.311399,.52549,.769556,.236077,.307485,.529412,.775059,.239667,.303526,.533333,.780517,.243327,.299523,.537255,.785929,.247056,.295477,.541176,.791293,.250856,.29139,.545098,.796607,.254728,.287264,.54902,.801871,.258674,.283099,.552941,.807082,.262692,.278898,.556863,.812239,.266786,.274661,.560784,.817341,.270954,.27039,.564706,.822386,.275197,.266085,.568627,.827372,.279517,.26175,.572549,.832299,.283913,.257383,.576471,.837165,.288385,.252988,.580392,.841969,.292933,.248564,.584314,.846709,.297559,.244113,.588235,.851384,.30226,.239636,.592157,.855992,.307038,.235133,.596078,.860533,.311892,.230606,.6,.865006,.316822,.226055,.603922,.869409,.321827,.221482,.607843,.873741,.326906,.216886,.611765,.878001,.33206,.212268,.615686,.882188,.337287,.207628,.619608,.886302,.342586,.202968,.623529,.890341,.347957,.198286,.627451,.894305,.353399,.193584,.631373,.898192,.358911,.18886,.635294,.902003,.364492,.184116,.639216,.905735,.37014,.17935,.643137,.90939,.375856,.174563,.647059,.912966,.381636,.169755,.65098,.916462,.387481,.164924,.654902,.919879,.393389,.16007,.658824,.923215,.399359,.155193,.662745,.92647,.405389,.150292,.666667,.929644,.411479,.145367,.670588,.932737,.417627,.140417,.67451,.935747,.423831,.13544,.678431,.938675,.430091,.130438,.682353,.941521,.436405,.125409,.686275,.944285,.442772,.120354,.690196,.946965,.449191,.115272,.694118,.949562,.45566,.110164,.698039,.952075,.462178,.105031,.701961,.954506,.468744,.099874,.705882,.956852,.475356,.094695,.709804,.959114,.482014,.089499,.713725,.961293,.488716,.084289,.717647,.963387,.495462,.079073,.721569,.965397,.502249,.073859,.72549,.967322,.509078,.068659,.729412,.969163,.515946,.063488,.733333,.970919,.522853,.058367,.737255,.97259,.529798,.053324,.741176,.974176,.53678,.048392,.745098,.975677,.543798,.043618,.74902,.977092,.55085,.03905,.752941,.978422,.557937,.034931,.756863,.979666,.565057,.031409,.760784,.980824,.572209,.028508,.764706,.981895,.579392,.02625,.768627,.982881,.586606,.024661,.772549,.983779,.593849,.02377,.776471,.984591,.601122,.023606,.780392,.985315,.608422,.024202,.784314,.985952,.61575,.025592,.788235,.986502,.623105,.027814,.792157,.986964,.630485,.030908,.796078,.987337,.63789,.034916,.8,.987622,.64532,.039886,.803922,.987819,.652773,.045581,.807843,.987926,.66025,.05175,.811765,.987945,.667748,.058329,.815686,.987874,.675267,.065257,.819608,.987714,.682807,.072489,.823529,.987464,.690366,.07999,.827451,.987124,.697944,.087731,.831373,.986694,.70554,.095694,.835294,.986175,.713153,.103863,.839216,.985566,.720782,.112229,.843137,.984865,.728427,.120785,.847059,.984075,.736087,.129527,.85098,.983196,.743758,.138453,.854902,.982228,.751442,.147565,.858824,.981173,.759135,.156863,.862745,.980032,.766837,.166353,.866667,.978806,.774545,.176037,.870588,.977497,.782258,.185923,.87451,.976108,.789974,.196018,.878431,.974638,.797692,.206332,.882353,.973088,.805409,.216877,.886275,.971468,.813122,.227658,.890196,.969783,.820825,.238686,.894118,.968041,.828515,.249972,.898039,.966243,.836191,.261534,.901961,.964394,.843848,.273391,.905882,.962517,.851476,.285546,.909804,.960626,.859069,.29801,.913725,.95872,.866624,.31082,.917647,.956834,.874129,.323974,.921569,.954997,.881569,.337475,.92549,.953215,.888942,.351369,.929412,.951546,.896226,.365627,.933333,.950018,.903409,.380271,.937255,.948683,.910473,.395289,.941176,.947594,.917399,.410665,.945098,.946809,.924168,.426373,.94902,.946392,.930761,.442367,.952941,.946403,.937159,.458592,.956863,.946903,.943348,.47497,.960784,.947937,.949318,.491426,.964706,.949545,.955063,.50786,.968627,.95174,.960587,.524203,.972549,.954529,.965896,.540361,.976471,.957896,.971003,.556275,.980392,.961812,.975924,.571925,.984314,.966249,.980678,.587206,.988235,.971162,.985282,.602154,.992157,.976511,.989753,.61676,.996078,.982257,.994109,.631017,1,.988362,.998364,.644924]},{ColorSpace:"Diverging",Name:"Plasma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.050383,.029803,.527975,.003922,.063536,.028426,.533124,.007843,.075353,.027206,.538007,.011765,.086222,.026125,.542658,.015686,.096379,.025165,.547103,.019608,.10598,.024309,.551368,.023529,.115124,.023556,.555468,.027451,.123903,.022878,.559423,.031373,.132381,.022258,.56325,.035294,.140603,.021687,.566959,.039216,.148607,.021154,.570562,.043137,.156421,.020651,.574065,.047059,.16407,.020171,.577478,.05098,.171574,.019706,.580806,.054902,.17895,.019252,.584054,.058824,.186213,.018803,.587228,.062745,.193374,.018354,.59033,.066667,.200445,.017902,.593364,.070588,.207435,.017442,.596333,.07451,.21435,.016973,.599239,.078431,.221197,.016497,.602083,.082353,.227983,.016007,.604867,.086275,.234715,.015502,.607592,.090196,.241396,.014979,.610259,.094118,.248032,.014439,.612868,.098039,.254627,.013882,.615419,.101961,.261183,.013308,.617911,.105882,.267703,.012716,.620346,.109804,.274191,.012109,.622722,.113725,.280648,.011488,.625038,.117647,.287076,.010855,.627295,.121569,.293478,.010213,.62949,.12549,.299855,.009561,.631624,.129412,.30621,.008902,.633694,.133333,.312543,.008239,.6357,.137255,.318856,.007576,.63764,.141176,.32515,.006915,.639512,.145098,.331426,.006261,.641316,.14902,.337683,.005618,.643049,.152941,.343925,.004991,.64471,.156863,.35015,.004382,.646298,.160784,.356359,.003798,.64781,.164706,.362553,.003243,.649245,.168627,.368733,.002724,.650601,.172549,.374897,.002245,.651876,.176471,.381047,.001814,.653068,.180392,.387183,.001434,.654177,.184314,.393304,.001114,.655199,.188235,.399411,859e-6,.656133,.192157,.405503,678e-6,.656977,.196078,.41158,577e-6,.65773,.2,.417642,564e-6,.65839,.203922,.423689,646e-6,.658956,.207843,.429719,831e-6,.659425,.211765,.435734,.001127,.659797,.215686,.441732,.00154,.660069,.219608,.447714,.00208,.66024,.223529,.453677,.002755,.66031,.227451,.459623,.003574,.660277,.231373,.46555,.004545,.660139,.235294,.471457,.005678,.659897,.239216,.477344,.00698,.659549,.243137,.48321,.00846,.659095,.247059,.489055,.010127,.658534,.25098,.494877,.01199,.657865,.254902,.500678,.014055,.657088,.258824,.506454,.016333,.656202,.262745,.512206,.018833,.655209,.266667,.517933,.021563,.654109,.270588,.523633,.024532,.652901,.27451,.529306,.027747,.651586,.278431,.534952,.031217,.650165,.282353,.54057,.03495,.64864,.286275,.546157,.038954,.64701,.290196,.551715,.043136,.645277,.294118,.557243,.047331,.643443,.298039,.562738,.051545,.641509,.301961,.568201,.055778,.639477,.305882,.573632,.060028,.637349,.309804,.579029,.064296,.635126,.313725,.584391,.068579,.632812,.317647,.589719,.072878,.630408,.321569,.595011,.07719,.627917,.32549,.600266,.081516,.625342,.329412,.605485,.085854,.622686,.333333,.610667,.090204,.619951,.337255,.615812,.094564,.61714,.341176,.620919,.098934,.614257,.345098,.625987,.103312,.611305,.34902,.631017,.107699,.608287,.352941,.636008,.112092,.605205,.356863,.640959,.116492,.602065,.360784,.645872,.120898,.598867,.364706,.650746,.125309,.595617,.368627,.65558,.129725,.592317,.372549,.660374,.134144,.588971,.376471,.665129,.138566,.585582,.380392,.669845,.142992,.582154,.384314,.674522,.147419,.578688,.388235,.67916,.151848,.575189,.392157,.683758,.156278,.57166,.396078,.688318,.160709,.568103,.4,.69284,.165141,.564522,.403922,.697324,.169573,.560919,.407843,.701769,.174005,.557296,.411765,.706178,.178437,.553657,.415686,.710549,.182868,.550004,.419608,.714883,.187299,.546338,.423529,.719181,.191729,.542663,.427451,.723444,.196158,.538981,.431373,.72767,.200586,.535293,.435294,.731862,.205013,.531601,.439216,.736019,.209439,.527908,.443137,.740143,.213864,.524216,.447059,.744232,.218288,.520524,.45098,.748289,.222711,.516834,.454902,.752312,.227133,.513149,.458824,.756304,.231555,.509468,.462745,.760264,.235976,.505794,.466667,.764193,.240396,.502126,.470588,.76809,.244817,.498465,.47451,.771958,.249237,.494813,.478431,.775796,.253658,.491171,.482353,.779604,.258078,.487539,.486275,.783383,.2625,.483918,.490196,.787133,.266922,.480307,.494118,.790855,.271345,.476706,.498039,.794549,.27577,.473117,.501961,.798216,.280197,.469538,.505882,.801855,.284626,.465971,.509804,.805467,.289057,.462415,.513725,.809052,.293491,.45887,.517647,.812612,.297928,.455338,.521569,.816144,.302368,.451816,.52549,.819651,.306812,.448306,.529412,.823132,.311261,.444806,.533333,.826588,.315714,.441316,.537255,.830018,.320172,.437836,.541176,.833422,.324635,.434366,.545098,.836801,.329105,.430905,.54902,.840155,.33358,.427455,.552941,.843484,.338062,.424013,.556863,.846788,.342551,.420579,.560784,.850066,.347048,.417153,.564706,.853319,.351553,.413734,.568627,.856547,.356066,.410322,.572549,.85975,.360588,.406917,.576471,.862927,.365119,.403519,.580392,.866078,.36966,.400126,.584314,.869203,.374212,.396738,.588235,.872303,.378774,.393355,.592157,.875376,.383347,.389976,.596078,.878423,.387932,.3866,.6,.881443,.392529,.383229,.603922,.884436,.397139,.37986,.607843,.887402,.401762,.376494,.611765,.89034,.406398,.37313,.615686,.89325,.411048,.369768,.619608,.896131,.415712,.366407,.623529,.898984,.420392,.363047,.627451,.901807,.425087,.359688,.631373,.904601,.429797,.356329,.635294,.907365,.434524,.35297,.639216,.910098,.439268,.34961,.643137,.9128,.444029,.346251,.647059,.915471,.448807,.34289,.65098,.918109,.453603,.339529,.654902,.920714,.458417,.336166,.658824,.923287,.463251,.332801,.662745,.925825,.468103,.329435,.666667,.928329,.472975,.326067,.670588,.930798,.477867,.322697,.67451,.933232,.48278,.319325,.678431,.93563,.487712,.315952,.682353,.93799,.492667,.312575,.686275,.940313,.497642,.309197,.690196,.942598,.502639,.305816,.694118,.944844,.507658,.302433,.698039,.947051,.512699,.299049,.701961,.949217,.517763,.295662,.705882,.951344,.52285,.292275,.709804,.953428,.52796,.288883,.713725,.95547,.533093,.28549,.717647,.957469,.53825,.282096,.721569,.959424,.543431,.278701,.72549,.961336,.548636,.275305,.729412,.963203,.553865,.271909,.733333,.965024,.559118,.268513,.737255,.966798,.564396,.265118,.741176,.968526,.5697,.261721,.745098,.970205,.575028,.258325,.74902,.971835,.580382,.254931,.752941,.973416,.585761,.25154,.756863,.974947,.591165,.248151,.760784,.976428,.596595,.244767,.764706,.977856,.602051,.241387,.768627,.979233,.607532,.238013,.772549,.980556,.613039,.234646,.776471,.981826,.618572,.231287,.780392,.983041,.624131,.227937,.784314,.984199,.629718,.224595,.788235,.985301,.63533,.221265,.792157,.986345,.640969,.217948,.796078,.987332,.646633,.214648,.8,.98826,.652325,.211364,.803922,.989128,.658043,.2081,.807843,.989935,.663787,.204859,.811765,.990681,.669558,.201642,.815686,.991365,.675355,.198453,.819608,.991985,.681179,.195295,.823529,.992541,.68703,.19217,.827451,.993032,.692907,.189084,.831373,.993456,.69881,.186041,.835294,.993814,.704741,.183043,.839216,.994103,.710698,.180097,.843137,.994324,.716681,.177208,.847059,.994474,.722691,.174381,.85098,.994553,.728728,.171622,.854902,.994561,.734791,.168938,.858824,.994495,.74088,.166335,.862745,.994355,.746995,.163821,.866667,.994141,.753137,.161404,.870588,.993851,.759304,.159092,.87451,.993482,.765499,.156891,.878431,.993033,.77172,.154808,.882353,.992505,.777967,.152855,.886275,.991897,.784239,.151042,.890196,.991209,.790537,.149377,.894118,.990439,.796859,.14787,.898039,.989587,.803205,.146529,.901961,.988648,.809579,.145357,.905882,.987621,.815978,.144363,.909804,.986509,.822401,.143557,.913725,.985314,.828846,.142945,.917647,.984031,.835315,.142528,.921569,.982653,.841812,.142303,.92549,.98119,.848329,.142279,.929412,.979644,.854866,.142453,.933333,.977995,.861432,.142808,.937255,.976265,.868016,.143351,.941176,.974443,.874622,.144061,.945098,.97253,.88125,.144923,.94902,.970533,.887896,.145919,.952941,.968443,.894564,.147014,.956863,.966271,.901249,.14818,.960784,.964021,.90795,.14937,.964706,.961681,.914672,.15052,.968627,.959276,.921407,.151566,.972549,.956808,.928152,.152409,.976471,.954287,.934908,.152921,.980392,.951726,.941671,.152925,.984314,.949151,.948435,.152178,.988235,.946602,.95519,.150328,.992157,.944152,.961916,.146861,.996078,.941896,.96859,.140956,1,.940015,.975158,.131326]},{ColorSpace:"Diverging",Name:"Viridis (matplotlib)",NanColor:[1,0,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Eric Firing",RGBPoints:[0,.267004,.004874,.329415,.003922,.26851,.009605,.335427,.007843,.269944,.014625,.341379,.011765,.271305,.019942,.347269,.015686,.272594,.025563,.353093,.019608,.273809,.031497,.358853,.023529,.274952,.037752,.364543,.027451,.276022,.044167,.370164,.031373,.277018,.050344,.375715,.035294,.277941,.056324,.381191,.039216,.278791,.062145,.386592,.043137,.279566,.067836,.391917,.047059,.280267,.073417,.397163,.05098,.280894,.078907,.402329,.054902,.281446,.08432,.407414,.058824,.281924,.089666,.412415,.062745,.282327,.094955,.417331,.066667,.282656,.100196,.42216,.070588,.28291,.105393,.426902,.07451,.283091,.110553,.431554,.078431,.283197,.11568,.436115,.082353,.283229,.120777,.440584,.086275,.283187,.125848,.44496,.090196,.283072,.130895,.449241,.094118,.282884,.13592,.453427,.098039,.282623,.140926,.457517,.101961,.28229,.145912,.46151,.105882,.281887,.150881,.465405,.109804,.281412,.155834,.469201,.113725,.280868,.160771,.472899,.117647,.280255,.165693,.476498,.121569,.279574,.170599,.479997,.12549,.278826,.17549,.483397,.129412,.278012,.180367,.486697,.133333,.277134,.185228,.489898,.137255,.276194,.190074,.493001,.141176,.275191,.194905,.496005,.145098,.274128,.199721,.498911,.14902,.273006,.20452,.501721,.152941,.271828,.209303,.504434,.156863,.270595,.214069,.507052,.160784,.269308,.218818,.509577,.164706,.267968,.223549,.512008,.168627,.26658,.228262,.514349,.172549,.265145,.232956,.516599,.176471,.263663,.237631,.518762,.180392,.262138,.242286,.520837,.184314,.260571,.246922,.522828,.188235,.258965,.251537,.524736,.192157,.257322,.25613,.526563,.196078,.255645,.260703,.528312,.2,.253935,.265254,.529983,.203922,.252194,.269783,.531579,.207843,.250425,.27429,.533103,.211765,.248629,.278775,.534556,.215686,.246811,.283237,.535941,.219608,.244972,.287675,.53726,.223529,.243113,.292092,.538516,.227451,.241237,.296485,.539709,.231373,.239346,.300855,.540844,.235294,.237441,.305202,.541921,.239216,.235526,.309527,.542944,.243137,.233603,.313828,.543914,.247059,.231674,.318106,.544834,.25098,.229739,.322361,.545706,.254902,.227802,.326594,.546532,.258824,.225863,.330805,.547314,.262745,.223925,.334994,.548053,.266667,.221989,.339161,.548752,.270588,.220057,.343307,.549413,.27451,.21813,.347432,.550038,.278431,.21621,.351535,.550627,.282353,.214298,.355619,.551184,.286275,.212395,.359683,.55171,.290196,.210503,.363727,.552206,.294118,.208623,.367752,.552675,.298039,.206756,.371758,.553117,.301961,.204903,.375746,.553533,.305882,.203063,.379716,.553925,.309804,.201239,.38367,.554294,.313725,.19943,.387607,.554642,.317647,.197636,.391528,.554969,.321569,.19586,.395433,.555276,.32549,.1941,.399323,.555565,.329412,.192357,.403199,.555836,.333333,.190631,.407061,.556089,.337255,.188923,.41091,.556326,.341176,.187231,.414746,.556547,.345098,.185556,.41857,.556753,.34902,.183898,.422383,.556944,.352941,.182256,.426184,.55712,.356863,.180629,.429975,.557282,.360784,.179019,.433756,.55743,.364706,.177423,.437527,.557565,.368627,.175841,.44129,.557685,.372549,.174274,.445044,.557792,.376471,.172719,.448791,.557885,.380392,.171176,.45253,.557965,.384314,.169646,.456262,.55803,.388235,.168126,.459988,.558082,.392157,.166617,.463708,.558119,.396078,.165117,.467423,.558141,.4,.163625,.471133,.558148,.403922,.162142,.474838,.55814,.407843,.160665,.47854,.558115,.411765,.159194,.482237,.558073,.415686,.157729,.485932,.558013,.419608,.15627,.489624,.557936,.423529,.154815,.493313,.55784,.427451,.153364,.497,.557724,.431373,.151918,.500685,.557587,.435294,.150476,.504369,.55743,.439216,.149039,.508051,.55725,.443137,.147607,.511733,.557049,.447059,.14618,.515413,.556823,.45098,.144759,.519093,.556572,.454902,.143343,.522773,.556295,.458824,.141935,.526453,.555991,.462745,.140536,.530132,.555659,.466667,.139147,.533812,.555298,.470588,.13777,.537492,.554906,.47451,.136408,.541173,.554483,.478431,.135066,.544853,.554029,.482353,.133743,.548535,.553541,.486275,.132444,.552216,.553018,.490196,.131172,.555899,.552459,.494118,.129933,.559582,.551864,.498039,.128729,.563265,.551229,.501961,.127568,.566949,.550556,.505882,.126453,.570633,.549841,.509804,.125394,.574318,.549086,.513725,.124395,.578002,.548287,.517647,.123463,.581687,.547445,.521569,.122606,.585371,.546557,.52549,.121831,.589055,.545623,.529412,.121148,.592739,.544641,.533333,.120565,.596422,.543611,.537255,.120092,.600104,.54253,.541176,.119738,.603785,.5414,.545098,.119512,.607464,.540218,.54902,.119423,.611141,.538982,.552941,.119483,.614817,.537692,.556863,.119699,.61849,.536347,.560784,.120081,.622161,.534946,.564706,.120638,.625828,.533488,.568627,.12138,.629492,.531973,.572549,.122312,.633153,.530398,.576471,.123444,.636809,.528763,.580392,.12478,.640461,.527068,.584314,.126326,.644107,.525311,.588235,.128087,.647749,.523491,.592157,.130067,.651384,.521608,.596078,.132268,.655014,.519661,.6,.134692,.658636,.517649,.603922,.137339,.662252,.515571,.607843,.14021,.665859,.513427,.611765,.143303,.669459,.511215,.615686,.146616,.67305,.508936,.619608,.150148,.676631,.506589,.623529,.153894,.680203,.504172,.627451,.157851,.683765,.501686,.631373,.162016,.687316,.499129,.635294,.166383,.690856,.496502,.639216,.170948,.694384,.493803,.643137,.175707,.6979,.491033,.647059,.180653,.701402,.488189,.65098,.185783,.704891,.485273,.654902,.19109,.708366,.482284,.658824,.196571,.711827,.479221,.662745,.202219,.715272,.476084,.666667,.20803,.718701,.472873,.670588,.214,.722114,.469588,.67451,.220124,.725509,.466226,.678431,.226397,.728888,.462789,.682353,.232815,.732247,.459277,.686275,.239374,.735588,.455688,.690196,.24607,.73891,.452024,.694118,.252899,.742211,.448284,.698039,.259857,.745492,.444467,.701961,.266941,.748751,.440573,.705882,.274149,.751988,.436601,.709804,.281477,.755203,.432552,.713725,.288921,.758394,.428426,.717647,.296479,.761561,.424223,.721569,.304148,.764704,.419943,.72549,.311925,.767822,.415586,.729412,.319809,.770914,.411152,.733333,.327796,.77398,.40664,.737255,.335885,.777018,.402049,.741176,.344074,.780029,.397381,.745098,.35236,.783011,.392636,.74902,.360741,.785964,.387814,.752941,.369214,.788888,.382914,.756863,.377779,.791781,.377939,.760784,.386433,.794644,.372886,.764706,.395174,.797475,.367757,.768627,.404001,.800275,.362552,.772549,.412913,.803041,.357269,.776471,.421908,.805774,.35191,.780392,.430983,.808473,.346476,.784314,.440137,.811138,.340967,.788235,.449368,.813768,.335384,.792157,.458674,.816363,.329727,.796078,.468053,.818921,.323998,.8,.477504,.821444,.318195,.803922,.487026,.823929,.312321,.807843,.496615,.826376,.306377,.811765,.506271,.828786,.300362,.815686,.515992,.831158,.294279,.819608,.525776,.833491,.288127,.823529,.535621,.835785,.281908,.827451,.545524,.838039,.275626,.831373,.555484,.840254,.269281,.835294,.565498,.84243,.262877,.839216,.575563,.844566,.256415,.843137,.585678,.846661,.249897,.847059,.595839,.848717,.243329,.85098,.606045,.850733,.236712,.854902,.616293,.852709,.230052,.858824,.626579,.854645,.223353,.862745,.636902,.856542,.21662,.866667,.647257,.8584,.209861,.870588,.657642,.860219,.203082,.87451,.668054,.861999,.196293,.878431,.678489,.863742,.189503,.882353,.688944,.865448,.182725,.886275,.699415,.867117,.175971,.890196,.709898,.868751,.169257,.894118,.720391,.87035,.162603,.898039,.730889,.871916,.156029,.901961,.741388,.873449,.149561,.905882,.751884,.874951,.143228,.909804,.762373,.876424,.137064,.913725,.772852,.877868,.131109,.917647,.783315,.879285,.125405,.921569,.79376,.880678,.120005,.92549,.804182,.882046,.114965,.929412,.814576,.883393,.110347,.933333,.82494,.88472,.106217,.937255,.83527,.886029,.102646,.941176,.845561,.887322,.099702,.945098,.85581,.888601,.097452,.94902,.866013,.889868,.095953,.952941,.876168,.891125,.09525,.956863,.886271,.892374,.095374,.960784,.89632,.893616,.096335,.964706,.906311,.894855,.098125,.968627,.916242,.896091,.100717,.972549,.926106,.89733,.104071,.976471,.935904,.89857,.108131,.980392,.945636,.899815,.112838,.984314,.9553,.901065,.118128,.988235,.964894,.902323,.123941,.992157,.974417,.90359,.130215,.996078,.983868,.904867,.136897,1,.993248,.906157,.143936]},{ShowIndexedColorActiveValues:1,IndexedColors:[.07,.5,.7,1,1,1,.85,1,1,.8,.5,1,.76,1,0,1,.71,.71,.5,.5,.5,.05,.05,1,1,.05,.05,.7,1,1,.7,.89,.96,.67,.36,.95,.54,1,0,.75,.65,.65,.5,.6,.6,1,.5,0,1,1,.19,.12,.94,.12,.5,.82,.89,.56,.25,.83,.24,1,0,.9,.9,.9,.75,.76,.78,.65,.65,.67,.54,.6,.78,.61,.48,.78,.5,.48,.78,.44,.48,.78,.36,.48,.76,1,.48,.38,.49,.5,.69,.76,.56,.56,.4,.56,.56,.74,.5,.89,1,.63,0,.65,.16,.16,.36,.72,.82,.44,.18,.69,0,1,0,.58,1,1,.58,.88,.88,.45,.76,.79,.33,.71,.71,.23,.62,.62,.14,.56,.56,.04,.49,.55,0,.41,.52,.88,.88,1,1,.85,.56,.65,.46,.45,.4,.5,.5,.62,.39,.71,.83,.48,0,.58,0,.58,.26,.62,.69,.34,.09,.56,0,.79,0,.44,.83,1,1,1,.78,.85,1,.78,.78,1,.78,.64,1,.78,.56,1,.78,.38,1,.78,.27,1,.78,.19,1,.78,.12,1,.78,0,1,.61,0,.9,.46,0,.83,.32,0,.75,.22,0,.67,.14,.3,.76,1,.3,.65,1,.13,.58,.84,.15,.49,.67,.15,.4,.59,.09,.33,.53,.96,.93,.82,.8,.82,.12,.71,.71,.76,.65,.33,.3,.34,.35,.38,.62,.31,.71,.67,.36,0,.46,.31,.27,.26,.51,.59,.26,0,.4,0,.49,0,.44,.67,.98,0,.73,1,0,.63,1,0,.56,1,0,.5,1,0,.42,1,.33,.36,.95,.47,.36,.89,.54,.31,.89,.63,.21,.83,.7,.12,.83,.7,.12,.73,.7,.05,.65,.74,.05,.53,.78,0,.4,.8,0,.35,.82,0,.31,.85,0,.27,.88,0,.22,.9,0,.18,.91,0,.15,.92,0,.14,.93,0,.13,.94,0,.12,.95,0,.11,.96,0,.1,.97,0,.09,.98,0,.08,.99,0,.07,1,0,.06],Annotations:[0,"Xx",1,"H",2,"He",3,"Li",4,"Be",5,"B",6,"C",7,"N",8,"O",9,"F",10,"Ne",11,"Na",12,"Mg",13,"Al",14,"Si",15,"P",16,"S",17,"Cl",18,"Ar",19,"K",20,"Ca",21,"Sc",22,"Ti",23,"V",24,"Cr",25,"Mn",26,"Fe",27,"Co",28,"Ni",29,"Cu",30,"Zn",31,"Ga",32,"Ge",33,"As",34,"Se",35,"Br",36,"Kr",37,"Rb",38,"Sr",39,"Y",40,"Zr",41,"Nb",42,"Mo",43,"Tc",44,"Ru",45,"Rh",46,"Pd",47,"Ag",48,"Cd",49,"In",50,"Sn",51,"Sb",52,"Te",53,"I",54,"Xe",55,"Cs",56,"Ba",57,"La",58,"Ce",59,"Pr",60,"Nd",61,"Pm",62,"Sm",63,"Eu",64,"Gd",65,"Tb",66,"Dy",67,"Ho",68,"Er",69,"Tm",70,"Yb",71,"Lu",72,"Hf",73,"Ta",74,"W",75,"Re",76,"Os",77,"Ir",78,"Pt",79,"Au",80,"Hg",81,"Tl",82,"Pb",83,"Bi",84,"Po",85,"At",86,"Rn",87,"Fr",88,"Ra",89,"Ac",90,"Th",91,"Pa",92,"U",93,"Np",94,"Pu",95,"Am",96,"Cm",97,"Bk",98,"Cf",99,"Es",100,"Fm",101,"Md",102,"No",103,"Lr",104,"Rf",105,"Db",106,"Sg",107,"Bh",108,"Hs",109,"Mt",110,"Ds",111,"Rg",112,"Cn",113,"Uut",114,"Uuq",115,"Uup",116,"Uuh",117,"Uus",118,"Uuo"],Name:"BlueObeliskElements"}].filter((function(e){return e.RGBPoints})).filter((function(e){return"CIELAB"!==e.ColorSpace})).forEach((function(e){SQ[e.Name]=e}));var hQ=Object.keys(SQ);hQ.sort();var ZQ={addPreset:function(e){e.RGBPoints&&"CIELAB"!==e.ColorSpace&&(SQ[e.Name]||(hQ.push(e.Name),hQ.sort()),SQ[e.Name]=e)},removePresetByName:function(e){var t=hQ.indexOf(e);t>-1&&hQ.splice(t,1),delete SQ[e]},getPresetByName:function(e){return SQ[e]},rgbPresetNames:hQ},xQ={ColorSpace:{RGB:0,HSV:1,LAB:2,DIVERGING:3},Scale:{LINEAR:0,LOG10:1}};function pQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var GQ=xQ.ColorSpace,RQ=xQ.Scale,LQ=Gr.ScalarMappingTarget,VQ=a.c.vtkDebugMacro,AQ=a.c.vtkErrorMacro,fQ=a.c.vtkWarningMacro;function NQ(e,t){var n=e[0],r=e[1],a=e[2],s=Math.sqrt(n*n+r*r+a*a),i=s>.001?Math.acos(n/s):0,o=i>.001?Math.atan2(a,r):0;t[0]=s,t[1]=i,t[2]=o}function EQ(e,t){if(e[0]>=t-.1)return e[2];var n=e[1]*Math.sqrt(t*t-e[0]*e[0])/(e[0]*Math.sin(e[1]));return e[2]>-.3*Math.PI?e[2]+n:e[2]-n}function DQ(e,t,n,r){var a=[],s=[];Object(u.e)(t,a),Object(u.e)(n,s);var i=[],o=[];NQ(a,i),NQ(s,o);var l=e;if(i[1]>.05&&o[1]>.05&&function(e,t){var n=e-t;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}(i[2],o[2])>.33*Math.PI){var B=Math.max(i[0],o[0]);B=Math.max(88,B),e<.5?(o[0]=B,o[1]=0,o[2]=0,l*=2):(i[0]=B,i[1]=0,i[2]=0,l=2*l-1)}i[1]<.05&&o[1]>.05?i[2]=EQ(o,i[0]):o[1]<.05&&i[1]>.05&&(o[2]=EQ(i,o[0]));var Q=[];Q[0]=(1-l)*i[0]+l*o[0],Q[1]=(1-l)*i[1]+l*o[1],Q[2]=(1-l)*i[2]+l*o[2];var c=[];!function(e,t){var n=e[0],r=e[1],a=e[2];t[0]=n*Math.cos(r),t[1]=n*Math.sin(r)*Math.cos(a),t[2]=n*Math.sin(r)*Math.sin(a)}(Q,c),Object(u.f)(c,r)}function vQ(e,t){t.classHierarchy.push("vtkColorTransferFunction"),e.getSize=function(){return t.nodes.length},e.addRGBPoint=function(t,n,r,a){return e.addRGBPointLong(t,n,r,a,.5,0)},e.addRGBPointLong=function(n,r,a,s){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(i<0||i>1)return AQ("Midpoint outside range [0.0, 1.0]"),-1;if(o<0||o>1)return AQ("Sharpness outside range [0.0, 1.0]"),-1;t.allowDuplicateScalars||e.removePoint(n);var l={x:n,r:r,g:a,b:s,midpoint:i,sharpness:o};t.nodes.push(l),e.sortAndUpdateRange();for(var B=0;B<t.nodes.length&&t.nodes[B].x!==n;B++);return B<t.nodes.length?B:-1},e.addHSVPoint=function(t,n,r,a){return e.addHSVPointLong(t,n,r,a,.5,0)},e.addHSVPointLong=function(t,n,r,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=[],l=[n,r,a];return Object(u.u)(l,o),e.addRGBPoint(t,o[0],o[1],o[2],s,i)},e.setNodes=function(n){t.nodes!==n&&(t.nodes=n,e.sortAndUpdateRange())},e.sortAndUpdateRange=function(){t.nodes.sort((function(e,t){return e.x-t.x})),e.updateRange()||e.modified()},e.updateRange=function(){var n=[2];n[0]=t.mappingRange[0],n[1]=t.mappingRange[1];var r=t.nodes.length;return r?(t.mappingRange[0]=t.nodes[0].x,t.mappingRange[1]=t.nodes[r-1].x):(t.mappingRange[0]=0,t.mappingRange[1]=0),(n[0]!==t.mappingRange[0]||n[1]!==t.mappingRange[1])&&(e.modified(),!0)},e.removePoint=function(n){for(var r=0;r<t.nodes.length&&t.nodes[r].x!==n;r++);var a=r;if(r>=t.nodes.length)return-1;var s=!1;return t.nodes.splice(r,1),0!==r&&r!==t.nodes.length||(s=e.updateRange()),s||e.modified(),a},e.movePoint=function(n,r){if(n!==r){e.removePoint(r);for(var a=0;a<t.nodes.length;a++)if(t.nodes[a].x===n){t.nodes[a].x=r,e.sortAndUpdateRange();break}}},e.removeAllPoints=function(){t.nodes=[],e.sortAndUpdateRange()},e.addRGBSegment=function(n,r,a,s,i,o,l,B){e.sortAndUpdateRange();for(var Q=0;Q<t.nodes.length;)t.nodes[Q].x>=n&&t.nodes[Q].x<=i?t.nodes.splice(Q,1):Q++;e.addRGBPointLong(n,r,a,s,.5,0),e.addRGBPointLong(i,o,l,B,.5,0),e.modified()},e.addHSVSegment=function(t,n,r,a,s,i,o,l){var B=[i,o,l],Q=[],c=[];Object(u.u)([n,r,a],Q),Object(u.u)(B,c),e.addRGBSegment(t,Q[0],Q[1],Q[2],s,c[0],c[1],c[2])},e.mapValue=function(t){var n=[];return e.getColor(t,n),[Math.floor(255*n[0]+.5),Math.floor(255*n[1]+.5),Math.floor(255*n[2]+.5),255]},e.getColor=function(n,r){if(t.indexedLookup){var a=e.getSize(),s=e.getAnnotatedValueIndexInternal(n);if(s<0||0===a)e.getNanColor(r);else{var i=[];e.getNodeValue(s%a,i),r[0]=i.r,r[1]=i.g,r[2]=i.b}}else e.getTable(n,n,1,r)},e.getRedValue=function(t){var n=[];return e.getColor(t,n),n[0]},e.getGreenValue=function(t){var n=[];return e.getColor(t,n),n[1]},e.getBlueValue=function(t){var n=[];return e.getColor(t,n),n[2]},e.getTable=function(n,r,a,s){if(Object(u.v)(n)||Object(u.v)(r))for(var i=0;i<a;i++)s[3*i+0]=t.nanColor[0],s[3*i+1]=t.nanColor[1],s[3*i+2]=t.nanColor[2];else{var o=0,l=t.nodes.length,B=0,Q=0,c=0;0!==l&&(B=t.nodes[l-1].r,Q=t.nodes[l-1].g,c=t.nodes[l-1].b);var F=0,U=0,g=0,d=[0,0,0],I=[0,0,0],m=0,C=0,b=[],y=t.scale===RQ.LOG10;y&&(y=t.mappingRange[0]>0);var S=0,h=0,Z=0;y&&(S=Math.log10(n),h=Math.log10(r));for(var x=0;x<a;x++){var p=3*x;if(a>1?y?(Z=S+x/(a-1)*(h-S),F=Math.pow(10,Z)):F=n+x/(a-1)*(r-n):y?(Z=.5*(S+h),F=Math.pow(10,Z)):F=.5*(n+r),t.discretize){var G=t.mappingRange;if(F>=G[0]&&F<=G[1]){var R=t.numberOfValues,L=G[1]-G[0];if(R<=1)F=G[0]+L/2;else{var V=(F-G[0])/L,A=Object(u.g)(R*V);F=G[0]+A/(R-1)*L}}}for(;o<l&&F>t.nodes[o].x;)++o<l&&(U=t.nodes[o-1].x,g=t.nodes[o].x,y&&(U=Math.log10(U),g=Math.log10(g)),d[0]=t.nodes[o-1].r,I[0]=t.nodes[o].r,d[1]=t.nodes[o-1].g,I[1]=t.nodes[o].g,d[2]=t.nodes[o-1].b,I[2]=t.nodes[o].b,m=t.nodes[o-1].midpoint,C=t.nodes[o-1].sharpness,m<1e-5&&(m=1e-5),m>.99999&&(m=.99999));if(F>t.mappingRange[1])s[p]=0,s[p+1]=0,s[p+2]=0,t.clamping&&(e.getUseAboveRangeColor()?(s[p]=t.aboveRangeColor[0],s[p+1]=t.aboveRangeColor[1],s[p+2]=t.aboveRangeColor[2]):(s[p]=B,s[p+1]=Q,s[p+2]=c));else if(F<t.mappingRange[0]||Object(u.c)(F)&&F<0)s[p]=0,s[p+1]=0,s[p+2]=0,t.clamping&&(e.getUseBelowRangeColor()?(s[p]=t.belowRangeColor[0],s[p+1]=t.belowRangeColor[1],s[p+2]=t.belowRangeColor[2]):l>0&&(s[p]=t.nodes[0].r,s[p+1]=t.nodes[0].g,s[p+2]=t.nodes[0].b));else if(0===o&&(Math.abs(F-n)<1e-6||t.discretize))l>0?(s[p]=t.nodes[0].r,s[p+1]=t.nodes[0].g,s[p+2]=t.nodes[0].b):(s[p]=0,s[p+1]=0,s[p+2]=0);else{var f=0;if(f=(f=y?(Z-U)/(g-U):(F-U)/(g-U))<m?.5*f/m:.5+.5*(f-m)/(1-m),C>.99){if(f<.5){s[p]=d[0],s[p+1]=d[1],s[p+2]=d[2];continue}s[p]=I[0],s[p+1]=I[1],s[p+2]=I[2];continue}if(C<.01){if(t.colorSpace===GQ.RGB)s[p]=(1-f)*d[0]+f*I[0],s[p+1]=(1-f)*d[1]+f*I[1],s[p+2]=(1-f)*d[2]+f*I[2];else if(t.colorSpace===GQ.HSV){var N=[],E=[];Object(u.d)(d,N),Object(u.d)(I,E),t.hSVWrap&&(N[0]-E[0]>.5||E[0]-N[0]>.5)&&(N[0]>E[0]?N[0]-=1:E[0]-=1);var D=[];D[0]=(1-f)*N[0]+f*E[0],D[0]<0&&(D[0]+=1),D[1]=(1-f)*N[1]+f*E[1],D[2]=(1-f)*N[2]+f*E[2],Object(u.u)(D,b),s[p]=b[0],s[p+1]=b[1],s[p+2]=b[2]}else if(t.colorSpace===GQ.LAB){var v=[],J=[];Object(u.e)(d,v),Object(u.e)(I,J);var W=[];W[0]=(1-f)*v[0]+f*J[0],W[1]=(1-f)*v[1]+f*J[1],W[2]=(1-f)*v[2]+f*J[2],Object(u.f)(W,b),s[p]=b[0],s[p+1]=b[1],s[p+2]=b[2]}else t.colorSpace===GQ.DIVERGING?(DQ(f,d,I,b),s[p]=b[0],s[p+1]=b[1],s[p+2]=b[2]):AQ("ColorSpace set to invalid value.",t.colorSpace);continue}f<.5?f=.5*Math.pow(2*f,1+10*C):f>.5&&(f=1-.5*Math.pow(2*(1-f),1+10*C));var X=f*f,H=X*f,T=2*H-3*X+1,k=-2*H+3*X,M=H-2*X+f,w=H-X,Y=void 0;if(t.colorSpace===GQ.RGB)for(var O=0;O<3;O++)Y=(1-C)*(I[O]-d[O]),s[p+O]=T*d[O]+k*I[O]+M*Y+w*Y;else if(t.colorSpace===GQ.HSV){var z=[],P=[];Object(u.d)(d,z),Object(u.d)(I,P),t.hSVWrap&&(z[0]-P[0]>.5||P[0]-z[0]>.5)&&(z[0]>P[0]?z[0]-=1:P[0]-=1);for(var K=[],j=0;j<3;j++)Y=(1-C)*(P[j]-z[j]),K[j]=T*z[j]+k*P[j]+M*Y+w*Y,0===j&&K[j]<0&&(K[j]+=1);Object(u.u)(K,b),s[p]=b[0],s[p+1]=b[1],s[p+2]=b[2]}else if(t.colorSpace===GQ.LAB){var _=[],q=[];Object(u.e)(d,_),Object(u.e)(I,q);for(var $=[],ee=0;ee<3;ee++)Y=(1-C)*(q[ee]-_[ee]),$[ee]=T*_[ee]+k*q[ee]+M*Y+w*Y;Object(u.f)($,b),s[p]=b[0],s[p+1]=b[1],s[p+2]=b[2]}else t.colorSpace===GQ.DIVERGING?(DQ(f,d,I,b),s[p]=b[0],s[p+1]=b[1],s[p+2]=b[2]):AQ("ColorSpace set to invalid value.");for(var te=0;te<3;te++)s[p+te]=s[p+te]<0?0:s[p+te],s[p+te]=s[p+te]>1?1:s[p+te]}}}},e.getUint8Table=function(n,r,a){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.getMTime()<=t.buildTime&&t.tableSize===a&&t.tableWithAlpha!==s)return t.table;if(0===t.nodes.length)return AQ("Attempting to lookup a value with no points in the function"),t.table;var i=s?4:3;t.tableSize===a&&t.tableWithAlpha===s||(t.table=new Uint8Array(a*i),t.tableSize=a,t.tableWithAlpha=s);var o=[];e.getTable(n,r,a,o);for(var l=0;l<a;l++)t.table[l*i+0]=Math.floor(255*o[3*l+0]+.5),t.table[l*i+1]=Math.floor(255*o[3*l+1]+.5),t.table[l*i+2]=Math.floor(255*o[3*l+2]+.5),s&&(t.table[l*i+3]=255);return t.buildTime.modified(),t.table},e.buildFunctionFromTable=function(n,r,a,s){var i=0;e.removeAllPoints(),a>1&&(i=(r-n)/(a-1));for(var o=0;o<a;o++){var l={x:n+i*o,r:s[3*o],g:s[3*o+1],b:s[3*o+2],sharpness:0,midpoint:.5};t.nodes.push(l)}e.sortAndUpdateRange()},e.getNodeValue=function(e,n){return e<0||e>=t.nodes.length?(AQ("Index out of range!"),-1):(n[0]=t.nodes[e].x,n[1]=t.nodes[e].r,n[2]=t.nodes[e].g,n[3]=t.nodes[e].b,n[4]=t.nodes[e].midpoint,n[5]=t.nodes[e].sharpness,1)},e.setNodeValue=function(n,r){if(n<0||n>=t.nodes.length)return AQ("Index out of range!"),-1;var a=t.nodes[n].x;return t.nodes[n].x=r[0],t.nodes[n].r=r[1],t.nodes[n].g=r[2],t.nodes[n].b=r[3],t.nodes[n].midpoint=r[4],t.nodes[n].sharpness=r[5],a!==r[0]?e.sortAndUpdateRange():e.modified(),1},e.getNumberOfAvailableColors=function(){return t.indexedLookup&&e.getSize()?e.getSize():t.tableSize?t.tableSize:16777216},e.getIndexedColor=function(t,n){var r=e.getSize();if(r>0&&t>=0){var a=[];e.getNodeValue(t%r,a);for(var s=0;s<3;++s)n[s]=a[s+1];n[3]=1}else e.getNanColor(n),n[3]=1},e.fillFromDataPointer=function(t,n){if(!(t<=0)&&n){e.removeAllPoints();for(var r=0;r<t;r++)e.addRGBPoint(n[4*r],n[4*r+1],n[4*r+2],n[4*r+3])}},e.setMappingRange=function(n,r){var a=[n,r],s=e.getRange();if(s[1]!==a[1]||s[0]!==a[0])if(a[1]!==a[0]){for(var i=(a[1]-a[0])/(s[1]-s[0]),o=a[0]-s[0]*i,l=0;l<t.nodes.length;++l)t.nodes[l].x=t.nodes[l].x*i+o;t.mappingRange[0]=a[0],t.mappingRange[1]=a[1],e.modified()}else AQ("attempt to set zero width color range")},e.adjustRange=function(n){var r=e.getRange(),a=[];r[0]<n[0]?(e.getColor(n[0],a),e.addRGBPoint(n[0],a[0],a[1],a[2])):(e.getColor(r[0],a),e.addRGBPoint(n[0],a[0],a[1],a[2])),r[1]>n[1]?(e.getColor(n[1],a),e.addRGBPoint(n[1],a[0],a[1],a[2])):(e.getColor(r[1],a),e.addRGBPoint(n[1],a[0],a[1],a[2])),e.sortAndUpdateRange();for(var s=0;s<t.nodes.length;)t.nodes[s].x>=n[0]&&t.nodes[s].x<=n[1]?t.nodes.splice(s,1):++s;return 1},e.estimateMinNumberOfSamples=function(t,n){var r=e.findMinimumXDistance();return Math.ceil((n-t)/r)},e.findMinimumXDistance=function(){if(t.nodes.length<2)return-1;for(var e=Number.MAX_VALUE,n=0;n<t.nodes.length-1;n++){var r=t.nodes[n+1].x-t.nodes[n].x;r<e&&(e=r)}return e},e.mapScalarsThroughTable=function(n,r,a,s){0!==e.getSize()?t.indexedLookup?e.mapDataIndexed(n,r,a,s):e.mapData(n,r,a,s):VQ("Transfer Function Has No Points!")},e.mapData=function(t,n,r,a){if(0!==e.getSize()){var s=Math.floor(255*e.getAlpha()+.5),i=t.getNumberOfTuples(),o=t.getNumberOfComponents(),l=n.getData(),B=t.getData(),Q=[];if(r===LQ.RGBA)for(var c=0;c<i;c++){var F=B[c*o+a];e.getColor(F,Q),l[4*c]=Math.floor(255*Q[0]+.5),l[4*c+1]=Math.floor(255*Q[1]+.5),l[4*c+2]=Math.floor(255*Q[2]+.5),l[4*c+3]=s}if(r===LQ.RGB)for(var U=0;U<i;U++){var g=B[U*o+a];e.getColor(g,Q),l[3*U]=Math.floor(255*Q[0]+.5),l[3*U+1]=Math.floor(255*Q[1]+.5),l[3*U+2]=Math.floor(255*Q[2]+.5)}if(r===LQ.LUMINANCE)for(var d=0;d<i;d++){var u=B[d*o+a];e.getColor(u,Q),l[d]=Math.floor(76.5*Q[0]+150.45*Q[1]+28.05*Q[2]+.5)}if(r===LQ.LUMINANCE_ALPHA)for(var I=0;I<i;I++){var m=B[I*o+a];e.getColor(m,Q),l[2*I]=Math.floor(76.5*Q[0]+150.45*Q[1]+28.05*Q[2]+.5),l[2*I+1]=s}}else fQ("Transfer Function Has No Points!")},e.applyColorMap=function(n){if(n.ColorSpace&&(t.colorSpace=GQ[n.ColorSpace.toUpperCase()],void 0===t.colorSpace&&(AQ("ColorSpace ".concat(n.ColorSpace," not supported, using RGB instead")),t.colorSpace=GQ.RGB)),n.NanColor)for(t.nanColor=[].concat(n.NanColor);t.nanColor.length<4;)t.nanColor.push(1);if(n.RGBPoints){var r=n.RGBPoints.length;t.nodes=[];for(var a=0;a<r;a+=4)t.nodes.push({x:n.RGBPoints[a],r:n.RGBPoints[a+1],g:n.RGBPoints[a+2],b:n.RGBPoints[a+3],midpoint:.5,sharpness:0})}e.sortAndUpdateRange()}}var JQ={clamping:!0,colorSpace:GQ.RGB,hSVWrap:!0,scale:RQ.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function WQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,JQ,n),Gr.extend(e,t,n),t.table=[],t.nodes=[],t.nanColor=[.5,0,0,1],t.belowRangeColor=[0,0,0,1],t.aboveRangeColor=[1,1,1,1],t.buildTime={},a.c.obj(t.buildTime),a.c.get(e,t,["buildTime","mappingRange"]),a.c.setGet(e,t,["useAboveRangeColor","useBelowRangeColor","colorSpace","discretize","numberOfValues"]),a.c.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),a.c.getArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"]),vQ(e,t)}var XQ=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pQ(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(WQ,"vtkColorTransferFunction"),extend:WQ,vtkColorMaps:ZQ},xQ);function HQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var TQ=lo.InterpolationType,kQ=lo.OpacityMode,MQ=a.c.vtkErrorMacro;function wQ(e,t){t.classHierarchy.push("vtkVolumeProperty"),e.getMTime=function(){for(var e,n=t.mtime,r=0;r<4;r++)1===t.componentData[r].colorChannels?t.componentData[r].grayTransferFunction&&(n=n>(e=t.componentData[r].grayTransferFunction.getMTime())?n:e):3===t.componentData[r].colorChannels&&t.componentData[r].rGBTransferFunction&&(n=n>(e=t.componentData[r].rGBTransferFunction.getMTime())?n:e),t.componentData[r].scalarOpacity&&(n=n>(e=t.componentData[r].scalarOpacity.getMTime())?n:e),t.componentData[r].gradientOpacity&&(t.componentData[r].disableGradientOpacity||(n=n>(e=t.componentData[r].gradientOpacity.getMTime())?n:e));return n},e.getColorChannels=function(e){return e<0||e>3?(MQ("Bad index - must be between 0 and 3"),0):t.componentData[e].colorChannels},e.setGrayTransferFunction=function(n,r){var a=!1;return t.componentData[n].grayTransferFunction!==r&&(t.componentData[n].grayTransferFunction=r,a=!0),1!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=1,a=!0),a&&e.modified(),a},e.getGrayTransferFunction=function(n){return null===t.componentData[n].grayTransferFunction&&(t.componentData[n].grayTransferFunction=yQ.newInstance(),t.componentData[n].grayTransferFunction.addPoint(0,0),t.componentData[n].grayTransferFunction.addPoint(1024,1),1!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=1),e.modified()),t.componentData[n].grayTransferFunction},e.setRGBTransferFunction=function(n,r){var a=!1;return t.componentData[n].rGBTransferFunction!==r&&(t.componentData[n].rGBTransferFunction=r,a=!0),3!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=3,a=!0),a&&e.modified(),a},e.getRGBTransferFunction=function(n){return null===t.componentData[n].rGBTransferFunction&&(t.componentData[n].rGBTransferFunction=XQ.newInstance(),t.componentData[n].rGBTransferFunction.addRGBPoint(0,0,0,0),t.componentData[n].rGBTransferFunction.addRGBPoint(1024,1,1,1),3!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=3),e.modified()),t.componentData[n].rGBTransferFunction},e.setScalarOpacity=function(n,r){return t.componentData[n].scalarOpacity!==r&&(t.componentData[n].scalarOpacity=r,e.modified(),!0)},e.getScalarOpacity=function(n){return null===t.componentData[n].scalarOpacity&&(t.componentData[n].scalarOpacity=yQ.newInstance(),t.componentData[n].scalarOpacity.addPoint(0,1),t.componentData[n].scalarOpacity.addPoint(1024,1),e.modified()),t.componentData[n].scalarOpacity},e.setComponentWeight=function(n,r){if(n<0||n>=4)return MQ("Invalid index"),!1;var a=Math.min(1,Math.max(0,r));return t.componentData[n].componentWeight!==a&&(t.componentData[n].componentWeight=a,e.modified(),!0)},e.getComponentWeight=function(e){return e<0||e>=4?(MQ("Invalid index"),0):t.componentData[e].componentWeight},e.setInterpolationTypeToNearest=function(){return e.setInterpolationType(TQ.NEAREST)},e.setInterpolationTypeToLinear=function(){return e.setInterpolationType(TQ.LINEAR)},e.setInterpolationTypeToFastLinear=function(){return e.setInterpolationType(TQ.FAST_LINEAR)},e.getInterpolationTypeAsString=function(){return a.c.enumToString(TQ,t.interpolationType)},["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode"].forEach((function(n){var r=a.c.capitalize(n);e["set".concat(r)]=function(r,a){return t.componentData[r]["".concat(n)]!==a&&(t.componentData[r]["".concat(n)]=a,e.modified(),!0)}})),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode"].forEach((function(n){var r=a.c.capitalize(n);e["get".concat(r)]=function(e){return t.componentData[e]["".concat(n)]}}))}var YQ={independentComponents:!0,interpolationType:TQ.FAST_LINEAR,shade:0,ambient:.1,diffuse:.7,specular:.2,specularPower:10,useLabelOutline:!1,labelOutlineThickness:1};function OQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,YQ,n),a.c.obj(e,t),!t.componentData){t.componentData=[];for(var r=0;r<4;++r)t.componentData.push({colorChannels:1,grayTransferFunction:null,rGBTransferFunction:null,scalarOpacity:null,scalarOpacityUnitDistance:1,opacityMode:kQ.FRACTIONAL,gradientOpacityMinimumValue:0,gradientOpacityMinimumOpacity:0,gradientOpacityMaximumValue:1,gradientOpacityMaximumOpacity:1,useGradientOpacity:!1,componentWeight:1})}a.c.setGet(e,t,["independentComponents","interpolationType","shade","ambient","diffuse","specular","specularPower","useLabelOutline","labelOutlineThickness"]),wQ(e,t)}var zQ=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HQ(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(OQ,"vtkVolumeProperty"),extend:OQ},lo),PQ=a.c.vtkDebugMacro;function KQ(e,t){t.classHierarchy.push("vtkVolume"),e.getVolumes=function(){return e},e.makeProperty=zQ.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n,r=t.mapper.getBounds();if(!r||6!==r.length)return r;if(r[0]>r[1])return t.mapperBounds=r.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),r;if(!t.mapperBounds||!(n=[r,t.mapperBounds],n[0].map((function(e,t){return n.map((function(e){return e[t]}))}))).reduce((function(e,t){return e&&t[0]===t[1]}),!0)||e.getMTime()>t.boundsMTime.getMTime()){PQ("Recomputing bounds..."),t.mapperBounds=r.map((function(e){return e}));var a=[];st.getCorners(r,a),e.computeMatrix();var s=new Float64Array(16);Object(b.i)(s,t.matrix),a.forEach((function(e){return Object(y.q)(e,e,s)})),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map((function(e,t){return t%2==0?a.reduce((function(e,n){return e>n[t/2]?n[t/2]:e}),e):a.reduce((function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e}),e)})),t.boundsMTime.modified()}return t.bounds},e.getMTime=function(){var e=t.mtime;if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e}}var jQ={mapper:null,property:null,bounds:[1,-1,1,-1,1,-1]};function _Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jQ,n),uQ.extend(e,t,n),t.boundsMTime={},a.c.obj(t.boundsMTime),a.c.set(e,t,["property"]),a.c.setGet(e,t,["mapper"]),a.c.getArray(e,t,["bounds"],6),KQ(e,t)}var qQ={newInstance:a.c.newInstance(_Q,"vtkVolume"),extend:_Q},$Q=Qo.BlendMode;function ec(e,t){t.classHierarchy.push("vtkVolumeMapper"),e.getBounds=function(){var n=e.getInputData();return n?(t.static||e.update(),t.bounds=n.getBounds()):t.bounds=Object(u.j)(),t.bounds},e.update=function(){e.getInputData()},e.setBlendModeToComposite=function(){e.setBlendMode($Q.COMPOSITE_BLEND)},e.setBlendModeToMaximumIntensity=function(){e.setBlendMode($Q.MAXIMUM_INTENSITY_BLEND)},e.setBlendModeToMinimumIntensity=function(){e.setBlendMode($Q.MINIMUM_INTENSITY_BLEND)},e.setBlendModeToAverageIntensity=function(){e.setBlendMode($Q.AVERAGE_INTENSITY_BLEND)},e.getBlendModeAsString=function(){return a.c.enumToString($Q,t.blendMode)}}var tc={bounds:[1,-1,1,-1,1,-1],sampleDistance:1,imageSampleDistance:1,maximumSamplesPerRay:1e3,autoAdjustSampleDistances:!0,blendMode:$Q.COMPOSITE_BLEND,averageIPScalarRange:[-1e6,1e6]};function nc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,tc,n),Dr.extend(e,t,n),a.c.obj(e,t),a.c.algo(e,t,1,0),a.c.setGet(e,t,["sampleDistance","imageSampleDistance","maximumSamplesPerRay","autoAdjustSampleDistances","blendMode"]),a.c.setGetArray(e,t,["averageIPScalarRange"],2),a.c.event(e,t,"lightingActivated"),ec(e,t)}var rc={newInstance:a.c.newInstance(nc,"vtkVolumeMapper"),extend:nc};var ac=function(e){Yt(s,jt.Component);var t,n,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Kt(t);if(n){var a=Kt(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return Pt(this,e)});function s(e){var t;return Object(Se.a)(this,s),(t=a.call(this,e)).lookupTable=XQ.newInstance(),t.piecewiseFunction=yQ.newInstance(),t.volume=qQ.newInstance(),t.mapper=rc.newInstance(),t.volume.setMapper(t.mapper),t.volume.getProperty().setRGBTransferFunction(0,t.lookupTable),t.volume.getProperty().setScalarOpacity(0,t.piecewiseFunction),t.volume.getProperty().setInterpolationTypeToLinear(),t}return Object(he.a)(s,[{key:"render",value:function(){var e=this;return _t.a.createElement($B.Consumer,null,(function(t){return e.view||(t.renderer.addVolume(e.volume),e.view=t),_t.a.createElement(eQ.Provider,{value:e},_t.a.createElement(rQ.Provider,{value:e.mapper},_t.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.view&&(this.view.renderer.removeVolume(this.volume),this.view=null),this.volume.delete(),this.volume=null,this.mapper.delete(),this.mapper=null}},{key:"update",value:function(e,t){var n,a=e.volume,s=e.property,i=e.mapper,o=e.colorMapPreset,l=e.colorDataRange;if(!a||t&&a===t.volume||this.volume.set(a),!s||t&&s===t.property||this.volume.getProperty().set(s),!i||t&&i===t.mapper||this.mapper.set(i),o&&(!t||o!==t.colorMapPreset)){var B,Q=ZQ.getPresetByName(o);this.lookupTable.applyColorMap(Q),(B=this.lookupTable).setMappingRange.apply(B,Object(r.a)(l)),this.lookupTable.updateRange()}!l||t&&l===t.colorDataRange||("string"==typeof l?t?(console.log("from update"),this.dataChanged()):(this.lookupTable.setMappingRange(0,1),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:0,y:0,midpoint:.5,sharpness:0},{x:1,y:1,midpoint:.5,sharpness:0}])):((n=this.lookupTable).setMappingRange.apply(n,Object(r.a)(l)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:l[0],y:0,midpoint:.5,sharpness:0},{x:l[1],y:1,midpoint:.5,sharpness:0}])))}},{key:"dataChanged",value:function(){if("auto"===this.props.colorDataRange){this.mapper.update();var e,t=this.mapper.getInputData(),n=t&&t.getPointData().getScalars(),a=n&&n.getRange();a&&((e=this.lookupTable).setMappingRange.apply(e,Object(r.a)(a)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:a[0],y:0,midpoint:.5,sharpness:0},{x:a[1],y:1,midpoint:.5,sharpness:0}])),this.view&&this.view.renderView()}}}]),s}();ac.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:"auto"},ac.propTypes={id:$t.a.string,mapper:$t.a.object,volume:$t.a.object,property:$t.a.object,colorMapPreset:$t.a.string,colorDataRange:$t.a.oneOfType([$t.a.arrayOf($t.a.number),$t.a.string]),children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var sc=ac,ic=Ws.InterpolationType,oc=a.c.vtkErrorMacro;function lc(e,t){t.classHierarchy.push("vtkImageProperty"),e.getMTime=function(){for(var e,n=t.mtime,r=0;r<4;r++)t.componentData[r].rGBTransferFunction&&(n=n>(e=t.componentData[r].rGBTransferFunction.getMTime())?n:e),t.componentData[r].piecewiseFunction&&(n=n>(e=t.componentData[r].piecewiseFunction.getMTime())?n:e);return n},e.setRGBTransferFunction=function(n,r){var a=n,s=r;return Number.isInteger(n)||(s=n,a=0),t.componentData[a].rGBTransferFunction!==s&&(t.componentData[a].rGBTransferFunction=s,e.modified(),!0)},e.getRGBTransferFunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.componentData[e].rGBTransferFunction},e.setPiecewiseFunction=function(n,r){var a=n,s=r;return Number.isInteger(n)||(s=n,a=0),t.componentData[a].piecewiseFunction!==s&&(t.componentData[a].piecewiseFunction=s,e.modified(),!0)},e.getPiecewiseFunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.componentData[e].piecewiseFunction},e.setScalarOpacity=function(t,n){var r=t,a=n;return Number.isInteger(t)||(a=t,r=0),e.setPiecewiseFunction(r,a)},e.getScalarOpacity=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.getPiecewiseFunction(t)},e.setComponentWeight=function(n,r){if(n<0||n>=4)return oc("Invalid index"),!1;var a=Math.min(1,Math.max(0,r));return t.componentData[n].componentWeight!==a&&(t.componentData[n].componentWeight=a,e.modified(),!0)},e.getComponentWeight=function(e){return e<0||e>=4?(oc("Invalid index"),0):t.componentData[e].componentWeight},e.setInterpolationTypeToNearest=function(){return e.setInterpolationType(ic.NEAREST)},e.setInterpolationTypeToLinear=function(){return e.setInterpolationType(ic.LINEAR)},e.getInterpolationTypeAsString=function(){return a.c.enumToString(ic,t.interpolationType)}}var Bc={independentComponents:!1,interpolationType:ic.LINEAR,colorWindow:255,colorLevel:127.5,ambient:1,diffuse:0,opacity:1};function Qc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,Bc,n),a.c.obj(e,t),!t.componentData){t.componentData=[];for(var r=0;r<4;r++)t.componentData.push({rGBTransferFunction:null,piecewiseFunction:null,componentWeight:1})}a.c.setGet(e,t,["independentComponents","interpolationType","colorWindow","colorLevel","ambient","diffuse","opacity"]),lc(e,t)}var cc={newInstance:a.c.newInstance(Qc,"vtkImageProperty"),extend:Qc},Fc=a.c.vtkDebugMacro;function Uc(e,t){t.classHierarchy.push("vtkImageSlice"),e.getActors=function(){return e},e.getImages=function(){return e},e.getIsOpaque=function(){if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.property||e.getProperty();var n=t.property.getOpacity()>=1;return n&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return!1},e.makeProperty=cc.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n,r=t.mapper.getBounds();if(!r||6!==r.length)return r;if(r[0]>r[1])return t.mapperBounds=r.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),r;if(!t.mapperBounds||!(n=[r,t.mapperBounds],n[0].map((function(e,t){return n.map((function(e){return e[t]}))}))).reduce((function(e,t){return e&&t[0]===t[1]}),!0)||e.getMTime()>t.boundsMTime.getMTime()){Fc("Recomputing bounds..."),t.mapperBounds=r.map((function(e){return e}));var a=[];st.getCorners(r,a),e.computeMatrix();var s=new Float64Array(16);Object(b.i)(s,t.matrix),a.forEach((function(e){return Object(y.q)(e,e,s)})),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map((function(e,t){return t%2==0?a.reduce((function(e,n){return e>n[t/2]?n[t/2]:e}),e):a.reduce((function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e}),e)})),t.boundsMTime.modified()}return t.bounds},e.getBoundsForSlice=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t.mapper.getBoundsForSlice(n,r);if(!a||6!==a.length)return a;if(a[0]>a[1])return a;var s=[];st.getCorners(a,s),e.computeMatrix();var i=new Float64Array(16);Object(b.i)(i,t.matrix),s.forEach((function(e){return Object(y.q)(e,e,i)}));var o=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];return o.map((function(e,t){return t%2==0?s.reduce((function(e,n){return e>n[t/2]?n[t/2]:e}),e):s.reduce((function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e}),e)}))},e.getMinXBound=function(){return e.getBounds(),t.bounds[0]},e.getMaxXBound=function(){return e.getBounds(),t.bounds[1]},e.getMinYBound=function(){return e.getBounds(),t.bounds[2]},e.getMaxYBound=function(){return e.getBounds(),t.bounds[3]},e.getMinZBound=function(){return e.getBounds(),t.bounds[4]},e.getMaxZBound=function(){return e.getBounds(),t.bounds[5]},e.getMTime=function(){var e=t.mtime;if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}if(null!==t.property){var r=t.property.getMTime();e=r>e?r:e,null!==t.property.getRGBTransferFunction()&&(e=(r=t.property.getRGBTransferFunction().getMTime())>e?r:e)}return e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()}}var gc={mapper:null,property:null,bounds:[1,-1,1,-1,1,-1]};function dc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gc,n),uQ.extend(e,t,n),t.boundsMTime={},a.c.obj(t.boundsMTime),a.c.set(e,t,["property"]),a.c.setGet(e,t,["mapper"]),a.c.getArray(e,t,["bounds"],6),Uc(e,t)}var uc={newInstance:a.c.newInstance(dc,"vtkImageSlice"),extend:dc};function Ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ic(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ic(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cc=zr.staticOffsetAPI,bc=zr.otherStaticMethods,yc=a.c.vtkWarningMacro,Sc=vs.SlicingMode;function hc(e,t){function n(){var n;switch(t.slicingMode){case Sc.X:n=[1,0,0];break;case Sc.Y:n=[0,1,0];break;case Sc.Z:n=[0,0,1];break;default:return void(t.closestIJKAxis={ijkMode:t.slicingMode,flip:!1})}var r=[0,0,0],a=e.getInputData().getDirection(),s=[[a[0],a[1],a[2]],[a[3],a[4],a[5]],[a[6],a[7],a[8]]];Object(u.k)(s,n,r);for(var i=0,o=-1,l=!1,B=0;B<r.length;++B){var Q=Math.abs(r[B]);Q>i&&(i=Q,l=r[B]<0,o=B)}if(1!==i){var c="IJKXYZ"[t.slicingMode],F="IJKXYZ"[o];yc("Unaccurate slicing along ".concat(c," axis which ")+"is not aligned with any IJK axis of the image data. "+"Using ".concat(F," axis  as a fallback (").concat(i,"% aligned). ")+"Necessitates slice reformat that is not yet implemented.  You can switch the slicing mode on your mapper to do IJK slicing instead.")}t.closestIJKAxis={ijkMode:o,flip:l}}function r(n,r){var a=e.getInputData(),s=a.getExtent(),i=[s[0],s[2],s[4]],o=e.getClosestIJKAxis().ijkMode,l=t.slice;o!==t.slicingMode&&(l=e.getSliceAtPosition(l)),i[o]+=l;var B=[0,0,0];a.indexToWorld(i,B),i[o]+=1;var Q=[0,0,0];a.indexToWorld(i,Q),Q[0]-=B[0],Q[1]-=B[1],Q[2]-=B[2],Object(y.l)(Q,Q);var c=Ze.a.intersectWithLine(n,r,B,Q);if(c.intersection){var F=c.x,U=[0,0,0];return a.worldToIndex(F,U),{t:c.t,absoluteIJK:U}}return null}t.classHierarchy.push("vtkImageMapper"),e.getSliceAtPosition=function(n){var r,a=e.getInputData();if(3===n.length)r=n;else if(Number.isFinite(n)){var s=a.getBounds();switch(t.slicingMode){case Sc.X:r=[n,(s[3]+s[2])/2,(s[5]+s[4])/2];break;case Sc.Y:r=[(s[1]+s[0])/2,n,(s[5]+s[4])/2];break;case Sc.Z:r=[(s[1]+s[0])/2,(s[3]+s[2])/2,n]}}var i=[0,0,0];a.worldToIndex(r,i);var o=a.getExtent(),l=0;switch(e.getClosestIJKAxis().ijkMode){case Sc.I:l=Object(u.a)(i[0],o[0],o[1]),l=Math.round(l);break;case Sc.J:l=Object(u.a)(i[1],o[2],o[3]),l=Math.round(l);break;case Sc.K:l=Object(u.a)(i[2],o[4],o[5]),l=Math.round(l);break;default:return 0}return l},e.setSliceFromCamera=function(n){var r=n.getFocalPoint();switch(t.slicingMode){case Sc.I:case Sc.J:case Sc.K:var a=e.getSliceAtPosition(r);e.setSlice(a);break;case Sc.X:e.setSlice(r[0]);break;case Sc.Y:e.setSlice(r[1]);break;case Sc.Z:e.setSlice(r[2])}},e.setXSlice=function(t){e.setSlicingMode(Sc.X),e.setSlice(t)},e.setYSlice=function(t){e.setSlicingMode(Sc.Y),e.setSlice(t)},e.setZSlice=function(t){e.setSlicingMode(Sc.Z),e.setSlice(t)},e.setISlice=function(t){e.setSlicingMode(Sc.I),e.setSlice(t)},e.setJSlice=function(t){e.setSlicingMode(Sc.J),e.setSlice(t)},e.setKSlice=function(t){e.setSlicingMode(Sc.K),e.setSlice(t)},e.getSlicingModeNormal=function(){var n=[0,0,0],r=e.getInputData().getDirection(),a=[[r[0],r[1],r[2]],[r[3],r[4],r[5]],[r[6],r[7],r[8]]];switch(t.slicingMode){case Sc.X:n[0]=1;break;case Sc.Y:n[1]=1;break;case Sc.Z:n[2]=1;break;case Sc.I:Object(u.k)(a,[1,0,0],n);break;case Sc.J:Object(u.k)(a,[0,1,0],n);break;case Sc.K:Object(u.k)(a,[0,0,1],n)}return n},e.setSlicingMode=function(r){t.slicingMode!==r&&(t.slicingMode=r,e.getInputData()&&n(),e.modified())},e.getClosestIJKAxis=function(){return void 0!==t.closestIJKAxis&&t.closestIJKAxis.ijkMode!==Sc.NONE||!e.getInputData()||n(),t.closestIJKAxis},e.getBounds=function(){var n=e.getInputData();if(!n)return Object(u.j)();if(!t.useCustomExtents)return n.getBounds();var r=t.customDisplayExtent.slice(),a=e.getClosestIJKAxis().ijkMode,s=t.slice;switch(a!==t.slicingMode&&(s=e.getSliceAtPosition(t.slice)),a){case Sc.I:r[0]=s,r[1]=s;break;case Sc.J:r[2]=s,r[3]=s;break;case Sc.K:r[4]=s,r[5]=s}return n.extentToBounds(r)},e.getBoundsForSlice=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.slice,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=e.getInputData();if(!a)return Object(u.j)();var s=a.getExtent(),i=e.getClosestIJKAxis(),o=i.ijkMode,l=n;switch(o!==t.slicingMode&&(l=e.getSliceAtPosition(n)),o){case Sc.I:s[0]=l-r,s[1]=l+r;break;case Sc.J:s[2]=l-r,s[3]=l+r;break;case Sc.K:s[4]=l-r,s[5]=l+r}return a.extentToBounds(s)},e.getIsOpaque=function(){return!0},e.intersectWithLineForPointPicking=function(t,n){var a=r(t,n);if(a){var s=e.getInputData().getExtent(),i=[Math.round(a.absoluteIJK[0]),Math.round(a.absoluteIJK[1]),Math.round(a.absoluteIJK[2])];return i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||i[2]<s[4]||i[2]>s[5]?null:{t:a.t,ijk:i}}return null},e.intersectWithLineForCellPicking=function(t,n){var a=r(t,n);if(a){var s=e.getInputData().getExtent(),i=a.absoluteIJK,o=[Math.floor(i[0]),Math.floor(i[1]),Math.floor(i[2])];if(o[0]<s[0]||o[0]>s[1]-1||o[1]<s[2]||o[1]>s[3]-1||o[2]<s[4]||o[2]>s[5]-1)return null;var l=[i[0]-o[0],i[1]-o[1],i[2]-o[2]];return{t:a.t,ijk:o,pCoords:l}}return null}}var Zc={displayExtent:[0,0,0,0,0,0],customDisplayExtent:[0,0,0,0],useCustomExtents:!1,slice:0,slicingMode:Sc.NONE,closestIJKAxis:{ijkMode:Sc.NONE,flip:!1},renderToRectangle:!1,sliceAtFocalPoint:!1};function xc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zc,n),Dr.extend(e,t,n),a.c.get(e,t,["slicingMode"]),a.c.setGet(e,t,["slice","closestIJKAxis","useCustomExtents","renderToRectangle","sliceAtFocalPoint"]),a.c.setGetArray(e,t,["customDisplayExtent"],4),zr.implementCoincidentTopologyMethods(e,t),hc(e,t)}var pc=mc(mc(mc({newInstance:a.c.newInstance(xc,"vtkImageMapper"),extend:xc},Cc),bc),vs);var Gc=function(e){Yt(s,jt.Component);var t,n,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Kt(t);if(n){var a=Kt(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return Pt(this,e)});function s(e){var t;return Object(Se.a)(this,s),(t=a.call(this,e)).lookupTable=XQ.newInstance(),t.piecewiseFunction=yQ.newInstance(),t.actor=uc.newInstance(),t.mapper=pc.newInstance(),t.actor.setMapper(t.mapper),t}return Object(he.a)(s,[{key:"render",value:function(){var e=this;return _t.a.createElement($B.Consumer,null,(function(t){return e.view||(t.renderer.addActor(e.actor),e.view=t),_t.a.createElement(eQ.Provider,{value:e},_t.a.createElement(rQ.Provider,{value:e.mapper},_t.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.view&&this.view.renderer.removeActor(this.actor),this.actor.delete(),this.actor=null,this.mapper.delete(),this.mapper=null}},{key:"update",value:function(e,t){var n,a=e.actor,s=e.property,i=e.mapper,o=e.colorMapPreset,l=e.colorDataRange,B=e.iSlice,Q=e.jSlice,c=e.kSlice,F=e.xSlice,U=e.ySlice,g=e.zSlice;if(!a||t&&a===t.actor||this.actor.set(a),!s||t&&s===t.property||this.actor.getProperty().set(s),!i||t&&i===t.mapper||this.mapper.set(i),o&&(!t||o!==t.colorMapPreset)){var d,u=ZQ.getPresetByName(o);this.lookupTable.applyColorMap(u),(d=this.lookupTable).setMappingRange.apply(d,Object(r.a)(l)),this.lookupTable.updateRange()}!l||t&&l===t.colorDataRange||("string"==typeof l?t?this.dataChanged():(this.lookupTable.setMappingRange(0,1),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:0,y:0,midpoint:.5,sharpness:0},{x:1,y:1,midpoint:.5,sharpness:0}])):((n=this.lookupTable).setMappingRange.apply(n,Object(r.a)(l)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:l[0],y:0,midpoint:.5,sharpness:0},{x:l[1],y:1,midpoint:.5,sharpness:0}]))),!B||t&&B===t.iSlice||this.mapper.setISlice(B),!Q||t&&Q===t.jSlice||this.mapper.setJSlice(Q),!c||t&&c===t.kSlice||this.mapper.setKSlice(c),!F||t&&F===t.xSlice||this.mapper.setXSlice(F),!U||t&&U===t.ySlice||this.mapper.setYSlice(U),!g||t&&g===t.zSlice||this.mapper.setZSlice(g)}},{key:"dataChanged",value:function(){if("auto"===this.props.colorDataRange){this.mapper.update();var e,t=this.mapper.getInputData(),n=t&&t.getPointData().getScalars(),a=n&&n.getRange();a&&((e=this.lookupTable).setMappingRange.apply(e,Object(r.a)(a)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:a[0],y:0,midpoint:.5,sharpness:0},{x:a[1],y:1,midpoint:.5,sharpness:0}])),this.view&&this.view.renderView()}}}]),s}();Gc.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:"auto"},Gc.propTypes={id:$t.a.string,mapper:$t.a.object,actor:$t.a.object,property:$t.a.object,colorMapPreset:$t.a.string,colorDataRange:$t.a.oneOfType([$t.a.arrayOf($t.a.number),$t.a.string]),iSlice:$t.a.number,jSlice:$t.a.number,kSlice:$t.a.number,xSlice:$t.a.number,ySlice:$t.a.number,zSlice:$t.a.number,children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var Rc=Gc,Lc='<svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient x1="100%" y1="50%" x2="0%" y2="50%" id="a"><stop stop-color="#FFF" offset="0%"/><stop stop-color="#FFF" offset="49.416%"/><stop offset="49.677%"/><stop offset="100%"/></linearGradient></defs><circle cx="90" cy="90" r="80" stroke-width="10" stroke="#000" fill="url(#a)" fill-rule="evenodd"/></svg>',Vc='<svg viewBox="0 0 196 196" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M67.77 157.024a86.095 86.095 0 01-2.3 9.306c-.977 3.206-2.44 6.116-4.392 8.73-1.952 2.614-4.531 4.758-7.738 6.43-3.206 1.674-7.284 2.51-12.233 2.51-6.343 0-11.501-1.55-15.474-4.653-3.974-3.102-6.518-7.301-7.633-12.599l16.102-5.228c.279 1.882 1.01 3.485 2.196 4.81 1.185 1.324 2.753 1.986 4.705 1.986 3.067 0 5.262-1.08 6.587-3.24 1.324-2.162 2.265-4.88 2.823-8.156l8.574-48.933h17.565l-8.783 49.037zm58.029-31.053c-1.394-1.883-3.137-3.311-5.228-4.287-2.091-.976-4.426-1.464-7.005-1.464-1.185 0-2.44.157-3.764.47a10.815 10.815 0 00-3.608 1.569 9.806 9.806 0 00-2.718 2.77c-.732 1.116-1.098 2.475-1.098 4.078 0 2.091.819 3.747 2.457 4.967 1.638 1.22 3.921 2.352 6.849 3.398 3.206 1.115 6.064 2.352 8.573 3.712 2.51 1.359 4.636 2.91 6.378 4.652 1.743 1.743 3.067 3.712 3.974 5.908.906 2.196 1.359 4.688 1.359 7.476 0 4.461-.924 8.26-2.77 11.397-1.848 3.136-4.236 5.698-7.163 7.685-2.928 1.986-6.204 3.433-9.829 4.339-3.624.906-7.214 1.359-10.769 1.359-2.649 0-5.298-.244-7.946-.732a42.608 42.608 0 01-7.633-2.143 31.681 31.681 0 01-6.796-3.608c-2.092-1.463-3.869-3.136-5.333-5.018l12.86-10.456c1.465 2.23 3.625 4.043 6.483 5.437 2.858 1.394 5.751 2.091 8.679 2.091 1.533 0 3.014-.157 4.443-.47 1.43-.314 2.701-.837 3.817-1.569a8.267 8.267 0 002.666-2.823c.662-1.15.993-2.527.993-4.13 0-2.579-1.045-4.618-3.136-6.117-2.092-1.498-4.88-2.84-8.365-4.025a58.492 58.492 0 01-6.849-2.823c-2.126-1.046-3.973-2.335-5.541-3.869-1.569-1.533-2.823-3.363-3.764-5.489-.941-2.126-1.412-4.688-1.412-7.685 0-3.764.784-7.162 2.353-10.194a23.324 23.324 0 016.43-7.738c2.719-2.126 5.89-3.764 9.515-4.914 3.624-1.15 7.493-1.725 11.606-1.725 2.16 0 4.356.21 6.587.627a35.853 35.853 0 016.43 1.83 28.502 28.502 0 015.699 2.98c1.742 1.185 3.206 2.544 4.39 4.078L125.8 125.97z" fill="#8A8B8A"/><rect fill="#1C4678" transform="rotate(45 169.749 159.749)" x="152.249" y="142.249" width="35" height="35" rx="17.5"/><path fill="#1C4678" d="M7.775 11l20.483 86.069h22.53l34.24-71.408H63.841L42.91 70.03 28.259 11zM88.663 25.344h50.476l-8.093 16.562-17.246-.049-9.652 54.62H85.609l9.572-54.535H80.99zM141.366 25.344l16.072.066-4.414 24.987h2.388l16.856-25.053h20.975l-22.442 33.403 13.203 54.063h-20.94l-10.652-44.43h-2.296l-5.125 28.135h-21.024l9.763-55.043z"/><path fill="#8A8B8A" d="M3 11h3.182l20.864 85.944h-3.187zM58.102 25.344h2.788L43.747 61.155l-.955-3.866zM88.608 44.469h2.883l-9.157 52.096H79.4zM126.785 44.469h2.924l-9.186 52.046H117.6zM166.38 25.344h3.594l-12.582 18.854 1.316-7.545zM150.902 74.75l8.917 37.613h-3.311l-7.075-29.073z"/></g></svg>',Ac='<svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg"><g stroke="#000" stroke-width="10" fill="none" fill-rule="evenodd" stroke-linecap="square"><path d="M10 90h160M10 133.488V47M170 133.488V47M90 133.488V47"/></g></svg>',fc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Nc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return fc(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=!0,s=!1,i=void 0;try{for(var o,l=this.__listeners[e][Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var B=o.value;B.apply(void 0,n)}}catch(e){s=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw i}}return this}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function r(){n.off(e,r),t.apply(void 0,arguments)}))}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}(),Ec=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Dc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function vc(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Jc=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._messageId=1,n._messages=new Map,n._worker=e,n._worker.onmessage=n._onMessage.bind(n),n._id=Math.ceil(1e7*Math.random()),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Nc),Dc(t,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return 0===this._messages.size}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments[3];return new Promise((function(s,i){var o=n._messageId++;n._messages.set(o,[s,i,a]),n._worker.postMessage([o,t,e],r||[])}))}},{key:"postMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2];return new Promise((function(a,s){var i=t._messageId++;t._messages.set(i,[a,s,r]),t._worker.postMessage([i,e],n||[])}))}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._worker.postMessage({eventName:e,args:n})}},{key:"_onMessage",value:function(e){var n;if(!Array.isArray(e.data)&&e.data.eventName)return(n=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(n,[this,e.data.eventName].concat(vc(e.data.args)));var r,a=(r=e.data,Array.isArray(r)?r:Array.from(r)),s=a[0],i=a.slice(1);if(1===s)this._onEvent.apply(this,vc(i));else{if(0!==s)throw new Error("Wrong message type '"+s+"'");this._onResult.apply(this,vc(i))}}},{key:"_onResult",value:function(e,t,n){var r=this._messages.get(e),a=Ec(r,2),s=a[0],i=a[1];return this._messages.delete(e),1===t?s(n):i(n)}},{key:"_onEvent",value:function(e,t,n){var r=this._messages.get(e),a=Ec(r,3)[2];a&&a(t,n)}}]),t}();var Wc,Xc,Hc,Tc,kc=(Wc="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCWZ1bmN0aW9uIGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZuLCBiYXNlZGlyLCBtb2R1bGUpIHsKCQlyZXR1cm4gbW9kdWxlID0gewoJCQlwYXRoOiBiYXNlZGlyLAoJCQlleHBvcnRzOiB7fSwKCQkJcmVxdWlyZTogZnVuY3Rpb24gKHBhdGgsIGJhc2UpIHsKCQkJCXJldHVybiBjb21tb25qc1JlcXVpcmUocGF0aCwgKGJhc2UgPT09IHVuZGVmaW5lZCB8fCBiYXNlID09PSBudWxsKSA/IG1vZHVsZS5wYXRoIDogYmFzZSk7CgkJCX0KCQl9LCBmbihtb2R1bGUsIG1vZHVsZS5leHBvcnRzKSwgbW9kdWxlLmV4cG9ydHM7Cgl9CgoJZnVuY3Rpb24gY29tbW9uanNSZWdpc3RlciAocGF0aCwgbG9hZGVyKSB7CgkJRFlOQU1JQ19SRVFVSVJFX0xPQURFUlNbcGF0aF0gPSBsb2FkZXI7Cgl9CgoJY29uc3QgRFlOQU1JQ19SRVFVSVJFX0xPQURFUlMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoJY29uc3QgRFlOQU1JQ19SRVFVSVJFX0NBQ0hFID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCWNvbnN0IERFRkFVTFRfUEFSRU5UX01PRFVMRSA9IHsKCQlpZDogJzwnICsgJ3JvbGx1cD4nLCBleHBvcnRzOiB7fSwgcGFyZW50OiB1bmRlZmluZWQsIGZpbGVuYW1lOiBudWxsLCBsb2FkZWQ6IGZhbHNlLCBjaGlsZHJlbjogW10sIHBhdGhzOiBbXQoJfTsKCWNvbnN0IENIRUNLRURfRVhURU5TSU9OUyA9IFsnJywgJy5qcycsICcuanNvbiddOwoKCWZ1bmN0aW9uIG5vcm1hbGl6ZSAocGF0aCkgewoJCXBhdGggPSBwYXRoLnJlcGxhY2UoL1xcL2csICcvJyk7CgkJY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcvJyk7CgkJY29uc3Qgc2xhc2hlZCA9IHBhcnRzWzBdID09PSAnJzsKCQlmb3IgKGxldCBpID0gMTsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChwYXJ0c1tpXSA9PT0gJy4nIHx8IHBhcnRzW2ldID09PSAnJykgewoJCQkJcGFydHMuc3BsaWNlKGktLSwgMSk7CgkJCX0KCQl9CgkJZm9yIChsZXQgaSA9IDE7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykgewoJCQlpZiAocGFydHNbaV0gIT09ICcuLicpIGNvbnRpbnVlOwoJCQlpZiAoaSA+IDAgJiYgcGFydHNbaSAtIDFdICE9PSAnLi4nICYmIHBhcnRzW2kgLSAxXSAhPT0gJy4nKSB7CgkJCQlwYXJ0cy5zcGxpY2UoLS1pLCAyKTsKCQkJCWktLTsKCQkJfQoJCX0KCQlwYXRoID0gcGFydHMuam9pbignLycpOwoJCWlmIChzbGFzaGVkICYmIHBhdGhbMF0gIT09ICcvJykKCQkgIHBhdGggPSAnLycgKyBwYXRoOwoJCWVsc2UgaWYgKHBhdGgubGVuZ3RoID09PSAwKQoJCSAgcGF0aCA9ICcuJzsKCQlyZXR1cm4gcGF0aDsKCX0KCglmdW5jdGlvbiBqb2luICgpIHsKCQlpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkKCQkgIHJldHVybiAnLic7CgkJbGV0IGpvaW5lZDsKCQlmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7ICsraSkgewoJCSAgbGV0IGFyZyA9IGFyZ3VtZW50c1tpXTsKCQkgIGlmIChhcmcubGVuZ3RoID4gMCkgewoJCQlpZiAoam9pbmVkID09PSB1bmRlZmluZWQpCgkJCSAgam9pbmVkID0gYXJnOwoJCQllbHNlCgkJCSAgam9pbmVkICs9ICcvJyArIGFyZzsKCQkgIH0KCQl9CgkJaWYgKGpvaW5lZCA9PT0gdW5kZWZpbmVkKQoJCSAgcmV0dXJuICcuJzsKCgkJcmV0dXJuIGpvaW5lZDsKCX0KCglmdW5jdGlvbiBpc1Bvc3NpYmxlTm9kZU1vZHVsZXNQYXRoIChtb2R1bGVQYXRoKSB7CgkJbGV0IGMwID0gbW9kdWxlUGF0aFswXTsKCQlpZiAoYzAgPT09ICcvJyB8fCBjMCA9PT0gJ1xcJykgcmV0dXJuIGZhbHNlOwoJCWxldCBjMSA9IG1vZHVsZVBhdGhbMV0sIGMyID0gbW9kdWxlUGF0aFsyXTsKCQlpZiAoKGMwID09PSAnLicgJiYgKCFjMSB8fCBjMSA9PT0gJy8nIHx8IGMxID09PSAnXFwnKSkgfHwKCQkJKGMwID09PSAnLicgJiYgYzEgPT09ICcuJyAmJiAoIWMyIHx8IGMyID09PSAnLycgfHwgYzIgPT09ICdcXCcpKSkgcmV0dXJuIGZhbHNlOwoJCWlmIChjMSA9PT0gJzonICYmIChjMiA9PT0gJy8nIHx8IGMyID09PSAnXFwnKSkKCQkJcmV0dXJuIGZhbHNlOwoJCXJldHVybiB0cnVlOwoJfQoKCWZ1bmN0aW9uIGRpcm5hbWUgKHBhdGgpIHsKCSAgaWYgKHBhdGgubGVuZ3RoID09PSAwKQoJICAgIHJldHVybiAnLic7CgoJICBsZXQgaSA9IHBhdGgubGVuZ3RoIC0gMTsKCSAgd2hpbGUgKGkgPiAwKSB7CgkgICAgY29uc3QgYyA9IHBhdGguY2hhckNvZGVBdChpKTsKCSAgICBpZiAoKGMgPT09IDQ3IHx8IGMgPT09IDkyKSAmJiBpICE9PSBwYXRoLmxlbmd0aCAtIDEpCgkgICAgICBicmVhazsKCSAgICBpLS07CgkgIH0KCgkgIGlmIChpID4gMCkKCSAgICByZXR1cm4gcGF0aC5zdWJzdHIoMCwgaSk7CgoJICBpZiAocGF0aC5jaGFydENvZGVBdCgwKSA9PT0gNDcgfHwgcGF0aC5jaGFydENvZGVBdCgwKSA9PT0gOTIpCgkgICAgcmV0dXJuIHBhdGguY2hhckF0KDApOwoKCSAgcmV0dXJuICcuJzsKCX0KCglmdW5jdGlvbiBjb21tb25qc1JlcXVpcmUgKHBhdGgsIG9yaWdpbmFsTW9kdWxlRGlyKSB7CgkJY29uc3Qgc2hvdWxkVHJ5Tm9kZU1vZHVsZXMgPSBpc1Bvc3NpYmxlTm9kZU1vZHVsZXNQYXRoKHBhdGgpOwoJCXBhdGggPSBub3JtYWxpemUocGF0aCk7CgkJbGV0IHJlbFBhdGg7CgkJd2hpbGUgKHRydWUpIHsKCQkJaWYgKCFzaG91bGRUcnlOb2RlTW9kdWxlcykgewoJCQkJcmVsUGF0aCA9IG9yaWdpbmFsTW9kdWxlRGlyID8gbm9ybWFsaXplKG9yaWdpbmFsTW9kdWxlRGlyICsgJy8nICsgcGF0aCkgOiBwYXRoOwoJCQl9IGVsc2UgaWYgKG9yaWdpbmFsTW9kdWxlRGlyKSB7CgkJCQlyZWxQYXRoID0gbm9ybWFsaXplKG9yaWdpbmFsTW9kdWxlRGlyICsgJy9ub2RlX21vZHVsZXMvJyArIHBhdGgpOwoJCQl9IGVsc2UgewoJCQkJcmVsUGF0aCA9IG5vcm1hbGl6ZShqb2luKCdub2RlX21vZHVsZXMnLCBwYXRoKSk7CgkJCX0KCQkJZm9yIChsZXQgZXh0ZW5zaW9uSW5kZXggPSAwOyBleHRlbnNpb25JbmRleCA8IENIRUNLRURfRVhURU5TSU9OUy5sZW5ndGg7IGV4dGVuc2lvbkluZGV4KyspIHsKCQkJCWNvbnN0IHJlc29sdmVkUGF0aCA9IHJlbFBhdGggKyBDSEVDS0VEX0VYVEVOU0lPTlNbZXh0ZW5zaW9uSW5kZXhdOwoJCQkJbGV0IGNhY2hlZE1vZHVsZSA9IERZTkFNSUNfUkVRVUlSRV9DQUNIRVtyZXNvbHZlZFBhdGhdOwoJCQkJaWYgKGNhY2hlZE1vZHVsZSkgcmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzOwoJCQkJY29uc3QgbG9hZGVyID0gRFlOQU1JQ19SRVFVSVJFX0xPQURFUlNbcmVzb2x2ZWRQYXRoXTsKCQkJCWlmIChsb2FkZXIpIHsKCQkJCQlEWU5BTUlDX1JFUVVJUkVfQ0FDSEVbcmVzb2x2ZWRQYXRoXSA9IGNhY2hlZE1vZHVsZSA9IHsKCQkJCQkJaWQ6IHJlc29sdmVkUGF0aCwKCQkJCQkJZmlsZW5hbWU6IHJlc29sdmVkUGF0aCwKCQkJCQkJcGF0aDogZGlybmFtZShyZXNvbHZlZFBhdGgpLAoJCQkJCQlleHBvcnRzOiB7fSwKCQkJCQkJcGFyZW50OiBERUZBVUxUX1BBUkVOVF9NT0RVTEUsCgkJCQkJCWxvYWRlZDogZmFsc2UsCgkJCQkJCWNoaWxkcmVuOiBbXSwKCQkJCQkJcGF0aHM6IFtdLAoJCQkJCQlyZXF1aXJlOiBmdW5jdGlvbiAocGF0aCwgYmFzZSkgewoJCQkJCQkgIHJldHVybiBjb21tb25qc1JlcXVpcmUocGF0aCwgKGJhc2UgPT09IHVuZGVmaW5lZCB8fCBiYXNlID09PSBudWxsKSA/IGNhY2hlZE1vZHVsZS5wYXRoIDogYmFzZSk7CgkJCQkJCX0KCQkJCQl9OwoJCQkJCXRyeSB7CgkJCQkJCWxvYWRlci5jYWxsKGNvbW1vbmpzR2xvYmFsLCBjYWNoZWRNb2R1bGUsIGNhY2hlZE1vZHVsZS5leHBvcnRzKTsKCQkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJCQlkZWxldGUgRFlOQU1JQ19SRVFVSVJFX0NBQ0hFW3Jlc29sdmVkUGF0aF07CgkJCQkJCXRocm93IGVycm9yOwoJCQkJCX0KCQkJCQljYWNoZWRNb2R1bGUubG9hZGVkID0gdHJ1ZTsKCQkJCQlyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7CgkJCQl9CQl9CgkJCWlmICghc2hvdWxkVHJ5Tm9kZU1vZHVsZXMpIGJyZWFrOwoJCQljb25zdCBuZXh0RGlyID0gbm9ybWFsaXplKG9yaWdpbmFsTW9kdWxlRGlyICsgJy8uLicpOwoJCQlpZiAobmV4dERpciA9PT0gb3JpZ2luYWxNb2R1bGVEaXIpIGJyZWFrOwoJCQlvcmlnaW5hbE1vZHVsZURpciA9IG5leHREaXI7CgkJfQoJCXJldHVybiByZXF1aXJlKHBhdGgpOwoJfQoKCWNvbW1vbmpzUmVxdWlyZS5jYWNoZSA9IERZTkFNSUNfUkVRVUlSRV9DQUNIRTsKCgkvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KCgl2YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsOwoJdmFyIFJlZmxlY3RBcHBseSA9IFIgJiYgdHlwZW9mIFIuYXBwbHkgPT09ICdmdW5jdGlvbicKCSAgPyBSLmFwcGx5CgkgIDogZnVuY3Rpb24gUmVmbGVjdEFwcGx5KHRhcmdldCwgcmVjZWl2ZXIsIGFyZ3MpIHsKCSAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7CgkgIH07CgoJdmFyIFJlZmxlY3RPd25LZXlzOwoJaWYgKFIgJiYgdHlwZW9mIFIub3duS2V5cyA9PT0gJ2Z1bmN0aW9uJykgewoJICBSZWZsZWN0T3duS2V5cyA9IFIub3duS2V5czsKCX0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewoJICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkgewoJICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpCgkgICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7CgkgIH07Cgl9IGVsc2UgewoJICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkgewoJICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpOwoJICB9OwoJfQoKCWZ1bmN0aW9uIFByb2Nlc3NFbWl0V2FybmluZyh3YXJuaW5nKSB7CgkgIGlmIChjb25zb2xlICYmIGNvbnNvbGUud2FybikgY29uc29sZS53YXJuKHdhcm5pbmcpOwoJfQoKCXZhciBOdW1iZXJJc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBOdW1iZXJJc05hTih2YWx1ZSkgewoJICByZXR1cm4gdmFsdWUgIT09IHZhbHVlOwoJfTsKCglmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7CgkgIEV2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyk7Cgl9Cgl2YXIgZXZlbnRzID0gRXZlbnRFbWl0dGVyOwoJdmFyIG9uY2VfMSA9IG9uY2U7CgoJLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54CglFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyOwoKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDsKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDsKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDsKCgkvLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmUKCS8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuCgl2YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwOwoKCWZ1bmN0aW9uIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpIHsKCSAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAibGlzdGVuZXIiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTsKCSAgfQoJfQoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudEVtaXR0ZXIsICdkZWZhdWx0TWF4TGlzdGVuZXJzJywgewoJICBlbnVtZXJhYmxlOiB0cnVlLAoJICBnZXQ6IGZ1bmN0aW9uKCkgewoJICAgIHJldHVybiBkZWZhdWx0TWF4TGlzdGVuZXJzOwoJICB9LAoJICBzZXQ6IGZ1bmN0aW9uKGFyZykgewoJICAgIGlmICh0eXBlb2YgYXJnICE9PSAnbnVtYmVyJyB8fCBhcmcgPCAwIHx8IE51bWJlcklzTmFOKGFyZykpIHsKCSAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgImRlZmF1bHRNYXhMaXN0ZW5lcnMiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpOwoJICAgIH0KCSAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnOwoJICB9Cgl9KTsKCglFdmVudEVtaXR0ZXIuaW5pdCA9IGZ1bmN0aW9uKCkgewoKCSAgaWYgKHRoaXMuX2V2ZW50cyA9PT0gdW5kZWZpbmVkIHx8CgkgICAgICB0aGlzLl9ldmVudHMgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKSB7CgkgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCSAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7CgkgIH0KCgkgIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7Cgl9OwoKCS8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93cwoJLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldE1heExpc3RlbmVycyhuKSB7CgkgIGlmICh0eXBlb2YgbiAhPT0gJ251bWJlcicgfHwgbiA8IDAgfHwgTnVtYmVySXNOYU4obikpIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mICJuIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7CgkgIH0KCSAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCWZ1bmN0aW9uIF9nZXRNYXhMaXN0ZW5lcnModGhhdCkgewoJICBpZiAodGhhdC5fbWF4TGlzdGVuZXJzID09PSB1bmRlZmluZWQpCgkgICAgcmV0dXJuIEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzOwoJICByZXR1cm4gdGhhdC5fbWF4TGlzdGVuZXJzOwoJfQoKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkgewoJICByZXR1cm4gX2dldE1heExpc3RlbmVycyh0aGlzKTsKCX07CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7CgkgIHZhciBhcmdzID0gW107CgkgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTsKCSAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7CgoJICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzOwoJICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpCgkgICAgZG9FcnJvciA9IChkb0Vycm9yICYmIGV2ZW50cy5lcnJvciA9PT0gdW5kZWZpbmVkKTsKCSAgZWxzZSBpZiAoIWRvRXJyb3IpCgkgICAgcmV0dXJuIGZhbHNlOwoKCSAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LgoJICBpZiAoZG9FcnJvcikgewoJICAgIHZhciBlcjsKCSAgICBpZiAoYXJncy5sZW5ndGggPiAwKQoJICAgICAgZXIgPSBhcmdzWzBdOwoJICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7CgkgICAgICAvLyBOb3RlOiBUaGUgY29tbWVudHMgb24gdGhlIGB0aHJvd2AgbGluZXMgYXJlIGludGVudGlvbmFsLCB0aGV5IHNob3cKCSAgICAgIC8vIHVwIGluIE5vZGUncyBvdXRwdXQgaWYgdGhpcyByZXN1bHRzIGluIGFuIHVuaGFuZGxlZCBleGNlcHRpb24uCgkgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnQKCSAgICB9CgkgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlcgoJICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpOwoJICAgIGVyci5jb250ZXh0ID0gZXI7CgkgICAgdGhyb3cgZXJyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudAoJICB9CgoJICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTsKCgkgIGlmIChoYW5kbGVyID09PSB1bmRlZmluZWQpCgkgICAgcmV0dXJuIGZhbHNlOwoKCSAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7CgkgICAgUmVmbGVjdEFwcGx5KGhhbmRsZXIsIHRoaXMsIGFyZ3MpOwoJICB9IGVsc2UgewoJICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDsKCSAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pOwoJICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpCgkgICAgICBSZWZsZWN0QXBwbHkobGlzdGVuZXJzW2ldLCB0aGlzLCBhcmdzKTsKCSAgfQoKCSAgcmV0dXJuIHRydWU7Cgl9OwoKCWZ1bmN0aW9uIF9hZGRMaXN0ZW5lcih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBwcmVwZW5kKSB7CgkgIHZhciBtOwoJICB2YXIgZXZlbnRzOwoJICB2YXIgZXhpc3Rpbmc7CgoJICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTsKCgkgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzOwoJICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHsKCSAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgkgICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7CgkgIH0gZWxzZSB7CgkgICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gIm5ld0xpc3RlbmVyIiEgQmVmb3JlCgkgICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgIm5ld0xpc3RlbmVyIi4KCSAgICBpZiAoZXZlbnRzLm5ld0xpc3RlbmVyICE9PSB1bmRlZmluZWQpIHsKCSAgICAgIHRhcmdldC5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsCgkgICAgICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA/IGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpOwoKCSAgICAgIC8vIFJlLWFzc2lnbiBgZXZlbnRzYCBiZWNhdXNlIGEgbmV3TGlzdGVuZXIgaGFuZGxlciBjb3VsZCBoYXZlIGNhdXNlZCB0aGUKCSAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3QKCSAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzOwoJICAgIH0KCSAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTsKCSAgfQoKCSAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHsKCSAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC4KCSAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyOwoJICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDsKCSAgfSBlbHNlIHsKCSAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7CgkgICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS4KCSAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID0KCSAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07CgkgICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuCgkgICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7CgkgICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTsKCSAgICB9IGVsc2UgewoJICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7CgkgICAgfQoKCSAgICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVhawoJICAgIG0gPSBfZ2V0TWF4TGlzdGVuZXJzKHRhcmdldCk7CgkgICAgaWYgKG0gPiAwICYmIGV4aXN0aW5nLmxlbmd0aCA+IG0gJiYgIWV4aXN0aW5nLndhcm5lZCkgewoJICAgICAgZXhpc3Rpbmcud2FybmVkID0gdHJ1ZTsKCSAgICAgIC8vIE5vIGVycm9yIGNvZGUgZm9yIHRoaXMgc2luY2UgaXQgaXMgYSBXYXJuaW5nCgkgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXgKCSAgICAgIHZhciB3ID0gbmV3IEVycm9yKCdQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuICcgKwoJICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5sZW5ndGggKyAnICcgKyBTdHJpbmcodHlwZSkgKyAnIGxpc3RlbmVycyAnICsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byAnICsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgJ2luY3JlYXNlIGxpbWl0Jyk7CgkgICAgICB3Lm5hbWUgPSAnTWF4TGlzdGVuZXJzRXhjZWVkZWRXYXJuaW5nJzsKCSAgICAgIHcuZW1pdHRlciA9IHRhcmdldDsKCSAgICAgIHcudHlwZSA9IHR5cGU7CgkgICAgICB3LmNvdW50ID0gZXhpc3RpbmcubGVuZ3RoOwoJICAgICAgUHJvY2Vzc0VtaXRXYXJuaW5nKHcpOwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIHRhcmdldDsKCX0KCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKCSAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpOwoJfTsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9CgkgICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CgkgICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTsKCSAgICB9OwoKCWZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkgewoJICBpZiAoIXRoaXMuZmlyZWQpIHsKCSAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTsKCSAgICB0aGlzLmZpcmVkID0gdHJ1ZTsKCSAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkKCSAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpOwoJICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpOwoJICB9Cgl9CgoJZnVuY3Rpb24gX29uY2VXcmFwKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIpIHsKCSAgdmFyIHN0YXRlID0geyBmaXJlZDogZmFsc2UsIHdyYXBGbjogdW5kZWZpbmVkLCB0YXJnZXQ6IHRhcmdldCwgdHlwZTogdHlwZSwgbGlzdGVuZXI6IGxpc3RlbmVyIH07CgkgIHZhciB3cmFwcGVkID0gb25jZVdyYXBwZXIuYmluZChzdGF0ZSk7CgkgIHdyYXBwZWQubGlzdGVuZXIgPSBsaXN0ZW5lcjsKCSAgc3RhdGUud3JhcEZuID0gd3JhcHBlZDsKCSAgcmV0dXJuIHdyYXBwZWQ7Cgl9CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSh0eXBlLCBsaXN0ZW5lcikgewoJICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTsKCSAgdGhpcy5vbih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9CgkgICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewoJICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7CgkgICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTsKCSAgICAgIHJldHVybiB0aGlzOwoJICAgIH07CgoJLy8gRW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmIGFuZCBvbmx5IGlmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZC4KCUV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPQoJICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CgkgICAgICB2YXIgbGlzdCwgZXZlbnRzLCBwb3NpdGlvbiwgaSwgb3JpZ2luYWxMaXN0ZW5lcjsKCgkgICAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTsKCgkgICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7CgkgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpCgkgICAgICAgIHJldHVybiB0aGlzOwoKCSAgICAgIGxpc3QgPSBldmVudHNbdHlwZV07CgkgICAgICBpZiAobGlzdCA9PT0gdW5kZWZpbmVkKQoJICAgICAgICByZXR1cm4gdGhpczsKCgkgICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHsKCSAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApCgkgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTsKCSAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKQoJICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7CgkgICAgICAgIHBvc2l0aW9uID0gLTE7CgoJICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CgkgICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7CgkgICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjsKCSAgICAgICAgICAgIHBvc2l0aW9uID0gaTsKCSAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgIH0KCSAgICAgICAgfQoKCSAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkKCSAgICAgICAgICByZXR1cm4gdGhpczsKCgkgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMCkKCSAgICAgICAgICBsaXN0LnNoaWZ0KCk7CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7CgkgICAgICAgIH0KCgkgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkKCSAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdOwoKCSAgICAgICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKQoJICAgICAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBvcmlnaW5hbExpc3RlbmVyIHx8IGxpc3RlbmVyKTsKCSAgICAgIH0KCgkgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9CgkgICAgZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKHR5cGUpIHsKCSAgICAgIHZhciBsaXN0ZW5lcnMsIGV2ZW50cywgaTsKCgkgICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7CgkgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpCgkgICAgICAgIHJldHVybiB0aGlzOwoKCSAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXQKCSAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkgewoJICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgewoJICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgkgICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwOwoJICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7CgkgICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApCgkgICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoJICAgICAgICAgIGVsc2UKCSAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICB9CgoJICAgICAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzCgkgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgewoJICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGV2ZW50cyk7CgkgICAgICAgIHZhciBrZXk7CgkgICAgICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7CgkgICAgICAgICAga2V5ID0ga2V5c1tpXTsKCSAgICAgICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTsKCSAgICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpOwoJICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoJICAgICAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7CgkgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgfQoKCSAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTsKCgkgICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykgewoJICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7CgkgICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7CgkgICAgICAgIC8vIExJRk8gb3JkZXIKCSAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CgkgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pOwoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCglmdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7CgkgIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50czsKCgkgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkKCSAgICByZXR1cm4gW107CgoJICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTsKCSAgaWYgKGV2bGlzdGVuZXIgPT09IHVuZGVmaW5lZCkKCSAgICByZXR1cm4gW107CgoJICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpCgkgICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdOwoKCSAgcmV0dXJuIHVud3JhcCA/CgkgICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7Cgl9CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnModHlwZSkgewoJICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCB0cnVlKTsKCX07CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnMgPSBmdW5jdGlvbiByYXdMaXN0ZW5lcnModHlwZSkgewoJICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7Cgl9OwoKCUV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkgewoJICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykgewoJICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7CgkgIH0gZWxzZSB7CgkgICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTsKCSAgfQoJfTsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBsaXN0ZW5lckNvdW50OwoJZnVuY3Rpb24gbGlzdGVuZXJDb3VudCh0eXBlKSB7CgkgIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7CgoJICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIHsKCSAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTsKCgkgICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7CgkgICAgICByZXR1cm4gMTsKCSAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkgewoJICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoOwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIDA7Cgl9CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHsKCSAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTsKCX07CgoJZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHsKCSAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7CgkgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKQoJICAgIGNvcHlbaV0gPSBhcnJbaV07CgkgIHJldHVybiBjb3B5OwoJfQoKCWZ1bmN0aW9uIHNwbGljZU9uZShsaXN0LCBpbmRleCkgewoJICBmb3IgKDsgaW5kZXggKyAxIDwgbGlzdC5sZW5ndGg7IGluZGV4KyspCgkgICAgbGlzdFtpbmRleF0gPSBsaXN0W2luZGV4ICsgMV07CgkgIGxpc3QucG9wKCk7Cgl9CgoJZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycikgewoJICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOwoJICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkgewoJICAgIHJldFtpXSA9IGFycltpXS5saXN0ZW5lciB8fCBhcnJbaV07CgkgIH0KCSAgcmV0dXJuIHJldDsKCX0KCglmdW5jdGlvbiBvbmNlKGVtaXR0ZXIsIG5hbWUpIHsKCSAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCSAgICBmdW5jdGlvbiBldmVudExpc3RlbmVyKCkgewoJICAgICAgaWYgKGVycm9yTGlzdGVuZXIgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpOwoJICAgICAgfQoJICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpOwoJICAgIH0gICAgdmFyIGVycm9yTGlzdGVuZXI7CgoJICAgIC8vIEFkZGluZyBhbiBlcnJvciBsaXN0ZW5lciBpcyBub3Qgb3B0aW9uYWwgYmVjYXVzZQoJICAgIC8vIGlmIGFuIGVycm9yIGlzIHRocm93biBvbiBhbiBldmVudCBlbWl0dGVyIHdlIGNhbm5vdAoJICAgIC8vIGd1YXJhbnRlZSB0aGF0IHRoZSBhY3R1YWwgZXZlbnQgd2UgYXJlIHdhaXRpbmcgd2lsbAoJICAgIC8vIGJlIGZpcmVkLiBUaGUgcmVzdWx0IGNvdWxkIGJlIGEgc2lsZW50IHdheSB0byBjcmVhdGUKCSAgICAvLyBtZW1vcnkgb3IgZmlsZSBkZXNjcmlwdG9yIGxlYWtzLCB3aGljaCBpcyBzb21ldGhpbmcKCSAgICAvLyB3ZSBzaG91bGQgYXZvaWQuCgkgICAgaWYgKG5hbWUgIT09ICdlcnJvcicpIHsKCSAgICAgIGVycm9yTGlzdGVuZXIgPSBmdW5jdGlvbiBlcnJvckxpc3RlbmVyKGVycikgewoJICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKG5hbWUsIGV2ZW50TGlzdGVuZXIpOwoJICAgICAgICByZWplY3QoZXJyKTsKCSAgICAgIH07CgoJICAgICAgZW1pdHRlci5vbmNlKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpOwoJICAgIH0KCgkgICAgZW1pdHRlci5vbmNlKG5hbWUsIGV2ZW50TGlzdGVuZXIpOwoJICB9KTsKCX0KCWV2ZW50cy5vbmNlID0gb25jZV8xOwoKCXZhciBzdHJlYW1Ccm93c2VyID0gZXZlbnRzLkV2ZW50RW1pdHRlcjsKCgl2YXIgYnl0ZUxlbmd0aF8xID0gYnl0ZUxlbmd0aDsKCXZhciB0b0J5dGVBcnJheV8xID0gdG9CeXRlQXJyYXk7Cgl2YXIgZnJvbUJ5dGVBcnJheV8xID0gZnJvbUJ5dGVBcnJheTsKCgl2YXIgbG9va3VwID0gW107Cgl2YXIgcmV2TG9va3VwID0gW107Cgl2YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5OwoKCXZhciBjb2RlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nOwoJZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsKCSAgbG9va3VwW2ldID0gY29kZVtpXTsKCSAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpOwoJfQoKCS8vIFN1cHBvcnQgZGVjb2RpbmcgVVJMLXNhZmUgYmFzZTY0IHN0cmluZ3MsIGFzIE5vZGUuanMgZG9lcy4KCS8vIFNlZTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmFzZTY0I1VSTF9hcHBsaWNhdGlvbnMKCXJldkxvb2t1cFsnLScuY2hhckNvZGVBdCgwKV0gPSA2MjsKCXJldkxvb2t1cFsnXycuY2hhckNvZGVBdCgwKV0gPSA2MzsKCglmdW5jdGlvbiBnZXRMZW5zIChiNjQpIHsKCSAgdmFyIGxlbiA9IGI2NC5sZW5ndGg7CgoJICBpZiAobGVuICUgNCA+IDApIHsKCSAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKQoJICB9CgoJICAvLyBUcmltIG9mZiBleHRyYSBieXRlcyBhZnRlciBwbGFjZWhvbGRlciBieXRlcyBhcmUgZm91bmQKCSAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vYmVhdGdhbW1pdC9iYXNlNjQtanMvaXNzdWVzLzQyCgkgIHZhciB2YWxpZExlbiA9IGI2NC5pbmRleE9mKCc9Jyk7CgkgIGlmICh2YWxpZExlbiA9PT0gLTEpIHZhbGlkTGVuID0gbGVuOwoKCSAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IHZhbGlkTGVuID09PSBsZW4KCSAgICA/IDAKCSAgICA6IDQgLSAodmFsaWRMZW4gJSA0KTsKCgkgIHJldHVybiBbdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbl0KCX0KCgkvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGEKCWZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkgewoJICB2YXIgbGVucyA9IGdldExlbnMoYjY0KTsKCSAgdmFyIHZhbGlkTGVuID0gbGVuc1swXTsKCSAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV07CgkgIHJldHVybiAoKHZhbGlkTGVuICsgcGxhY2VIb2xkZXJzTGVuKSAqIDMgLyA0KSAtIHBsYWNlSG9sZGVyc0xlbgoJfQoKCWZ1bmN0aW9uIF9ieXRlTGVuZ3RoIChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHsKCSAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuCgl9CgoJZnVuY3Rpb24gdG9CeXRlQXJyYXkgKGI2NCkgewoJICB2YXIgdG1wOwoJICB2YXIgbGVucyA9IGdldExlbnMoYjY0KTsKCSAgdmFyIHZhbGlkTGVuID0gbGVuc1swXTsKCSAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV07CgoJICB2YXIgYXJyID0gbmV3IEFycihfYnl0ZUxlbmd0aChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pKTsKCgkgIHZhciBjdXJCeXRlID0gMDsKCgkgIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnMKCSAgdmFyIGxlbiA9IHBsYWNlSG9sZGVyc0xlbiA+IDAKCSAgICA/IHZhbGlkTGVuIC0gNAoJICAgIDogdmFsaWRMZW47CgoJICB2YXIgaTsKCSAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7CgkgICAgdG1wID0KCSAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8CgkgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwKCSAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8CgkgICAgICByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXTsKCSAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRjsKCSAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gOCkgJiAweEZGOwoJICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRjsKCSAgfQoKCSAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMikgewoJICAgIHRtcCA9CgkgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8CgkgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNCk7CgkgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGOwoJICB9CgoJICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAxKSB7CgkgICAgdG1wID0KCSAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8CgkgICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfAoJICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpOwoJICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkY7CgkgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGOwoJICB9CgoJICByZXR1cm4gYXJyCgl9CgoJZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHsKCSAgcmV0dXJuIGxvb2t1cFtudW0gPj4gMTggJiAweDNGXSArCgkgICAgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsKCSAgICBsb29rdXBbbnVtID4+IDYgJiAweDNGXSArCgkgICAgbG9va3VwW251bSAmIDB4M0ZdCgl9CgoJZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7CgkgIHZhciB0bXA7CgkgIHZhciBvdXRwdXQgPSBbXTsKCSAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHsKCSAgICB0bXAgPQoJICAgICAgKCh1aW50OFtpXSA8PCAxNikgJiAweEZGMDAwMCkgKwoJICAgICAgKCh1aW50OFtpICsgMV0gPDwgOCkgJiAweEZGMDApICsKCSAgICAgICh1aW50OFtpICsgMl0gJiAweEZGKTsKCSAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSk7CgkgIH0KCSAgcmV0dXJuIG91dHB1dC5qb2luKCcnKQoJfQoKCWZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7CgkgIHZhciB0bXA7CgkgIHZhciBsZW4gPSB1aW50OC5sZW5ndGg7CgkgIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMzsgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXMKCSAgdmFyIHBhcnRzID0gW107CgkgIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzOyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDMKCgkgIC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXIKCSAgZm9yICh2YXIgaSA9IDAsIGxlbjIgPSBsZW4gLSBleHRyYUJ5dGVzOyBpIDwgbGVuMjsgaSArPSBtYXhDaHVua0xlbmd0aCkgewoJICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsoCgkgICAgICB1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW4yID8gbGVuMiA6IChpICsgbWF4Q2h1bmtMZW5ndGgpCgkgICAgKSk7CgkgIH0KCgkgIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXMKCSAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHsKCSAgICB0bXAgPSB1aW50OFtsZW4gLSAxXTsKCSAgICBwYXJ0cy5wdXNoKAoJICAgICAgbG9va3VwW3RtcCA+PiAyXSArCgkgICAgICBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M0ZdICsKCSAgICAgICc9PScKCSAgICApOwoJICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHsKCSAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyB1aW50OFtsZW4gLSAxXTsKCSAgICBwYXJ0cy5wdXNoKAoJICAgICAgbG9va3VwW3RtcCA+PiAxMF0gKwoJICAgICAgbG9va3VwWyh0bXAgPj4gNCkgJiAweDNGXSArCgkgICAgICBsb29rdXBbKHRtcCA8PCAyKSAmIDB4M0ZdICsKCSAgICAgICc9JwoJICAgICk7CgkgIH0KCgkgIHJldHVybiBwYXJ0cy5qb2luKCcnKQoJfQoKCXZhciBiYXNlNjRKcyA9IHsKCQlieXRlTGVuZ3RoOiBieXRlTGVuZ3RoXzEsCgkJdG9CeXRlQXJyYXk6IHRvQnl0ZUFycmF5XzEsCgkJZnJvbUJ5dGVBcnJheTogZnJvbUJ5dGVBcnJheV8xCgl9OwoKCS8qISBpZWVlNzU0LiBCU0QtMy1DbGF1c2UgTGljZW5zZS4gRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnL29wZW5zb3VyY2U+ICovCgl2YXIgcmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7CgkgIHZhciBlLCBtOwoJICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxOwoJICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMTsKCSAgdmFyIGVCaWFzID0gZU1heCA+PiAxOwoJICB2YXIgbkJpdHMgPSAtNzsKCSAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMDsKCSAgdmFyIGQgPSBpc0xFID8gLTEgOiAxOwoJICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXTsKCgkgIGkgKz0gZDsKCgkgIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpOwoJICBzID4+PSAoLW5CaXRzKTsKCSAgbkJpdHMgKz0gZUxlbjsKCSAgZm9yICg7IG5CaXRzID4gMDsgZSA9IChlICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fQoKCSAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSk7CgkgIGUgPj49ICgtbkJpdHMpOwoJICBuQml0cyArPSBtTGVuOwoJICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gKG0gKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9CgoJICBpZiAoZSA9PT0gMCkgewoJICAgIGUgPSAxIC0gZUJpYXM7CgkgIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkgewoJICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KQoJICB9IGVsc2UgewoJICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbik7CgkgICAgZSA9IGUgLSBlQmlhczsKCSAgfQoJICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKQoJfTsKCgl2YXIgd3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHsKCSAgdmFyIGUsIG0sIGM7CgkgIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDE7CgkgIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxOwoJICB2YXIgZUJpYXMgPSBlTWF4ID4+IDE7CgkgIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMCk7CgkgIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSk7CgkgIHZhciBkID0gaXNMRSA/IDEgOiAtMTsKCSAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDA7CgoJICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKTsKCgkgIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7CgkgICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwOwoJICAgIGUgPSBlTWF4OwoJICB9IGVsc2UgewoJICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKTsKCSAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7CgkgICAgICBlLS07CgkgICAgICBjICo9IDI7CgkgICAgfQoJICAgIGlmIChlICsgZUJpYXMgPj0gMSkgewoJICAgICAgdmFsdWUgKz0gcnQgLyBjOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcyk7CgkgICAgfQoJICAgIGlmICh2YWx1ZSAqIGMgPj0gMikgewoJICAgICAgZSsrOwoJICAgICAgYyAvPSAyOwoJICAgIH0KCgkgICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7CgkgICAgICBtID0gMDsKCSAgICAgIGUgPSBlTWF4OwoJICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHsKCSAgICAgIG0gPSAoKHZhbHVlICogYykgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pOwoJICAgICAgZSA9IGUgKyBlQmlhczsKCSAgICB9IGVsc2UgewoJICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pOwoJICAgICAgZSA9IDA7CgkgICAgfQoJICB9CgoJICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fQoKCSAgZSA9IChlIDw8IG1MZW4pIHwgbTsKCSAgZUxlbiArPSBtTGVuOwoJICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9CgoJICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjg7Cgl9OwoKCXZhciBpZWVlNzU0ID0gewoJCXJlYWQ6IHJlYWQsCgkJd3JpdGU6IHdyaXRlCgl9OwoKCS8qIQoJICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuCgkgKgoJICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZz4KCSAqIEBsaWNlbnNlICBNSVQKCSAqLwoKCXZhciBidWZmZXIgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CgoKCgljb25zdCBjdXN0b21JbnNwZWN0U3ltYm9sID0KCSAgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFN5bWJvbFsnZm9yJ10gPT09ICdmdW5jdGlvbicpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZG90LW5vdGF0aW9uCgkgICAgPyBTeW1ib2xbJ2ZvciddKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZG90LW5vdGF0aW9uCgkgICAgOiBudWxsOwoKCWV4cG9ydHMuQnVmZmVyID0gQnVmZmVyOwoJZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlcjsKCWV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MDsKCgljb25zdCBLX01BWF9MRU5HVEggPSAweDdmZmZmZmZmOwoJZXhwb3J0cy5rTWF4TGVuZ3RoID0gS19NQVhfTEVOR1RIOwoKCS8qKgoJICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDoKCSAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpCgkgKiAgID09PSBmYWxzZSAgIFByaW50IHdhcm5pbmcgYW5kIHJlY29tbWVuZCB1c2luZyBgYnVmZmVyYCB2NC54IHdoaWNoIGhhcyBhbiBPYmplY3QKCSAqICAgICAgICAgICAgICAgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpCgkgKgoJICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLAoJICogT3BlcmEgMTEuNissIGlPUyA0LjIrLgoJICoKCSAqIFdlIHJlcG9ydCB0aGF0IHRoZSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGlmIHRoZSBhcmUgbm90IHN1YmNsYXNzYWJsZQoJICogdXNpbmcgX19wcm90b19fLiBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YAoJICogKFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4KS4gSUUgMTAgbGFja3Mgc3VwcG9ydAoJICogZm9yIF9fcHJvdG9fXyBhbmQgaGFzIGEgYnVnZ3kgdHlwZWQgYXJyYXkgaW1wbGVtZW50YXRpb24uCgkgKi8KCUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gdHlwZWRBcnJheVN1cHBvcnQoKTsKCglpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJgoJICAgIHR5cGVvZiBjb25zb2xlLmVycm9yID09PSAnZnVuY3Rpb24nKSB7CgkgIGNvbnNvbGUuZXJyb3IoCgkgICAgJ1RoaXMgYnJvd3NlciBsYWNrcyB0eXBlZCBhcnJheSAoVWludDhBcnJheSkgc3VwcG9ydCB3aGljaCBpcyByZXF1aXJlZCBieSAnICsKCSAgICAnYGJ1ZmZlcmAgdjUueC4gVXNlIGBidWZmZXJgIHY0LnggaWYgeW91IHJlcXVpcmUgb2xkIGJyb3dzZXIgc3VwcG9ydC4nCgkgICk7Cgl9CgoJZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkgewoJICAvLyBDYW4gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWQ/CgkgIHRyeSB7CgkgICAgY29uc3QgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSk7CgkgICAgY29uc3QgcHJvdG8gPSB7IGZvbzogZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfSB9OwoJICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihwcm90bywgVWludDhBcnJheS5wcm90b3R5cGUpOwoJICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihhcnIsIHByb3RvKTsKCSAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MgoJICB9IGNhdGNoIChlKSB7CgkgICAgcmV0dXJuIGZhbHNlCgkgIH0KCX0KCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLnByb3RvdHlwZSwgJ3BhcmVudCcsIHsKCSAgZW51bWVyYWJsZTogdHJ1ZSwKCSAgZ2V0OiBmdW5jdGlvbiAoKSB7CgkgICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGhpcykpIHJldHVybiB1bmRlZmluZWQKCSAgICByZXR1cm4gdGhpcy5idWZmZXIKCSAgfQoJfSk7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlci5wcm90b3R5cGUsICdvZmZzZXQnLCB7CgkgIGVudW1lcmFibGU6IHRydWUsCgkgIGdldDogZnVuY3Rpb24gKCkgewoJICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKHRoaXMpKSByZXR1cm4gdW5kZWZpbmVkCgkgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldAoJICB9Cgl9KTsKCglmdW5jdGlvbiBjcmVhdGVCdWZmZXIgKGxlbmd0aCkgewoJICBpZiAobGVuZ3RoID4gS19NQVhfTEVOR1RIKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSAiJyArIGxlbmd0aCArICciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAic2l6ZSInKQoJICB9CgkgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlCgkgIGNvbnN0IGJ1ZiA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7CgkgIE9iamVjdC5zZXRQcm90b3R5cGVPZihidWYsIEJ1ZmZlci5wcm90b3R5cGUpOwoJICByZXR1cm4gYnVmCgl9CgoJLyoqCgkgKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXIKCSAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2YKCSAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHMKCSAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0CgkgKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LgoJICoKCSAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC4KCSAqLwoKCWZ1bmN0aW9uIEJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgLy8gQ29tbW9uIGNhc2UuCgkgIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewoJICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gJ3N0cmluZycpIHsKCSAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCgkgICAgICAgICdUaGUgInN0cmluZyIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIHN0cmluZy4gUmVjZWl2ZWQgdHlwZSBudW1iZXInCgkgICAgICApCgkgICAgfQoJICAgIHJldHVybiBhbGxvY1Vuc2FmZShhcmcpCgkgIH0KCSAgcmV0dXJuIGZyb20oYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCgl9CgoJQnVmZmVyLnBvb2xTaXplID0gODE5MjsgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvbgoKCWZ1bmN0aW9uIGZyb20gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKCSAgICByZXR1cm4gZnJvbVN0cmluZyh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCkKCSAgfQoKCSAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkpIHsKCSAgICByZXR1cm4gZnJvbUFycmF5Vmlldyh2YWx1ZSkKCSAgfQoKCSAgaWYgKHZhbHVlID09IG51bGwpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAoJICAgICAgJ1RoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksICcgKwoJICAgICAgJ29yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlICcgKyAodHlwZW9mIHZhbHVlKQoJICAgICkKCSAgfQoKCSAgaWYgKGlzSW5zdGFuY2UodmFsdWUsIEFycmF5QnVmZmVyKSB8fAoJICAgICAgKHZhbHVlICYmIGlzSW5zdGFuY2UodmFsdWUuYnVmZmVyLCBBcnJheUJ1ZmZlcikpKSB7CgkgICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKQoJICB9CgoJICBpZiAodHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJgoJICAgICAgKGlzSW5zdGFuY2UodmFsdWUsIFNoYXJlZEFycmF5QnVmZmVyKSB8fAoJICAgICAgKHZhbHVlICYmIGlzSW5zdGFuY2UodmFsdWUuYnVmZmVyLCBTaGFyZWRBcnJheUJ1ZmZlcikpKSkgewoJICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKCSAgfQoKCSAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAoJICAgICAgJ1RoZSAidmFsdWUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlIG51bWJlcicKCSAgICApCgkgIH0KCgkgIGNvbnN0IHZhbHVlT2YgPSB2YWx1ZS52YWx1ZU9mICYmIHZhbHVlLnZhbHVlT2YoKTsKCSAgaWYgKHZhbHVlT2YgIT0gbnVsbCAmJiB2YWx1ZU9mICE9PSB2YWx1ZSkgewoJICAgIHJldHVybiBCdWZmZXIuZnJvbSh2YWx1ZU9mLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCgkgIH0KCgkgIGNvbnN0IGIgPSBmcm9tT2JqZWN0KHZhbHVlKTsKCSAgaWYgKGIpIHJldHVybiBiCgoJICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvUHJpbWl0aXZlICE9IG51bGwgJiYKCSAgICAgIHR5cGVvZiB2YWx1ZVtTeW1ib2wudG9QcmltaXRpdmVdID09PSAnZnVuY3Rpb24nKSB7CgkgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHZhbHVlW1N5bWJvbC50b1ByaW1pdGl2ZV0oJ3N0cmluZycpLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCgkgIH0KCgkgIHRocm93IG5ldyBUeXBlRXJyb3IoCgkgICAgJ1RoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksICcgKwoJICAgICdvciBBcnJheS1saWtlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSAnICsgKHR5cGVvZiB2YWx1ZSkKCSAgKQoJfQoKCS8qKgoJICogRnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG8gQnVmZmVyKGFyZywgZW5jb2RpbmcpIGJ1dCB0aHJvd3MgYSBUeXBlRXJyb3IKCSAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLgoJICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKQoJICogQnVmZmVyLmZyb20oYXJyYXkpCgkgKiBCdWZmZXIuZnJvbShidWZmZXIpCgkgKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSkKCSAqKi8KCUJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgcmV0dXJuIGZyb20odmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKCX07CgoJLy8gTm90ZTogQ2hhbmdlIHByb3RvdHlwZSAqYWZ0ZXIqIEJ1ZmZlci5mcm9tIGlzIGRlZmluZWQgdG8gd29ya2Fyb3VuZCBDaHJvbWUgYnVnOgoJLy8gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC8xNDgKCU9iamVjdC5zZXRQcm90b3R5cGVPZihCdWZmZXIucHJvdG90eXBlLCBVaW50OEFycmF5LnByb3RvdHlwZSk7CglPYmplY3Quc2V0UHJvdG90eXBlT2YoQnVmZmVyLCBVaW50OEFycmF5KTsKCglmdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7CgkgIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlcicpCgkgIH0gZWxzZSBpZiAoc2l6ZSA8IDApIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlICInICsgc2l6ZSArICciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAic2l6ZSInKQoJICB9Cgl9CgoJZnVuY3Rpb24gYWxsb2MgKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7CgkgIGFzc2VydFNpemUoc2l6ZSk7CgkgIGlmIChzaXplIDw9IDApIHsKCSAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHNpemUpCgkgIH0KCSAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkgewoJICAgIC8vIE9ubHkgcGF5IGF0dGVudGlvbiB0byBlbmNvZGluZyBpZiBpdCdzIGEgc3RyaW5nLiBUaGlzCgkgICAgLy8gcHJldmVudHMgYWNjaWRlbnRhbGx5IHNlbmRpbmcgaW4gYSBudW1iZXIgdGhhdCB3b3VsZAoJICAgIC8vIGJlIGludGVycHJldGVkIGFzIGEgc3RhcnQgb2Zmc2V0LgoJICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnCgkgICAgICA/IGNyZWF0ZUJ1ZmZlcihzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKQoJICAgICAgOiBjcmVhdGVCdWZmZXIoc2l6ZSkuZmlsbChmaWxsKQoJICB9CgkgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSkKCX0KCgkvKioKCSAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS4KCSAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSkKCSAqKi8KCUJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykgewoJICByZXR1cm4gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpCgl9OwoKCWZ1bmN0aW9uIGFsbG9jVW5zYWZlIChzaXplKSB7CgkgIGFzc2VydFNpemUoc2l6ZSk7CgkgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApCgl9CgoJLyoqCgkgKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLgoJICogKi8KCUJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7CgkgIHJldHVybiBhbGxvY1Vuc2FmZShzaXplKQoJfTsKCS8qKgoJICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuCgkgKi8KCUJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkgewoJICByZXR1cm4gYWxsb2NVbnNhZmUoc2l6ZSkKCX07CgoJZnVuY3Rpb24gZnJvbVN0cmluZyAoc3RyaW5nLCBlbmNvZGluZykgewoJICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHsKCSAgICBlbmNvZGluZyA9ICd1dGY4JzsKCSAgfQoKCSAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpCgkgIH0KCgkgIGNvbnN0IGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwOwoJICBsZXQgYnVmID0gY3JlYXRlQnVmZmVyKGxlbmd0aCk7CgoJICBjb25zdCBhY3R1YWwgPSBidWYud3JpdGUoc3RyaW5nLCBlbmNvZGluZyk7CgoJICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHsKCSAgICAvLyBXcml0aW5nIGEgaGV4IHN0cmluZywgZm9yIGV4YW1wbGUsIHRoYXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIHdpbGwKCSAgICAvLyBjYXVzZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBmaXJzdCBpbnZhbGlkIGNoYXJhY3RlciB0byBiZSBpZ25vcmVkLiAoZS5nLgoJICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKQoJICAgIGJ1ZiA9IGJ1Zi5zbGljZSgwLCBhY3R1YWwpOwoJICB9CgoJICByZXR1cm4gYnVmCgl9CgoJZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAoYXJyYXkpIHsKCSAgY29uc3QgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwOwoJICBjb25zdCBidWYgPSBjcmVhdGVCdWZmZXIobGVuZ3RoKTsKCSAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgewoJICAgIGJ1ZltpXSA9IGFycmF5W2ldICYgMjU1OwoJICB9CgkgIHJldHVybiBidWYKCX0KCglmdW5jdGlvbiBmcm9tQXJyYXlWaWV3IChhcnJheVZpZXcpIHsKCSAgaWYgKGlzSW5zdGFuY2UoYXJyYXlWaWV3LCBVaW50OEFycmF5KSkgewoJICAgIGNvbnN0IGNvcHkgPSBuZXcgVWludDhBcnJheShhcnJheVZpZXcpOwoJICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIoY29weS5idWZmZXIsIGNvcHkuYnl0ZU9mZnNldCwgY29weS5ieXRlTGVuZ3RoKQoJICB9CgkgIHJldHVybiBmcm9tQXJyYXlMaWtlKGFycmF5VmlldykKCX0KCglmdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHsKCSAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJvZmZzZXQiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpCgkgIH0KCgkgIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignImxlbmd0aCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJykKCSAgfQoKCSAgbGV0IGJ1ZjsKCSAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkgewoJICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5KTsKCSAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkgewoJICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KTsKCSAgfSBlbHNlIHsKCSAgICBidWYgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTsKCSAgfQoKCSAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UKCSAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGJ1ZiwgQnVmZmVyLnByb3RvdHlwZSk7CgoJICByZXR1cm4gYnVmCgl9CgoJZnVuY3Rpb24gZnJvbU9iamVjdCAob2JqKSB7CgkgIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkgewoJICAgIGNvbnN0IGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwOwoJICAgIGNvbnN0IGJ1ZiA9IGNyZWF0ZUJ1ZmZlcihsZW4pOwoKCSAgICBpZiAoYnVmLmxlbmd0aCA9PT0gMCkgewoJICAgICAgcmV0dXJuIGJ1ZgoJICAgIH0KCgkgICAgb2JqLmNvcHkoYnVmLCAwLCAwLCBsZW4pOwoJICAgIHJldHVybiBidWYKCSAgfQoKCSAgaWYgKG9iai5sZW5ndGggIT09IHVuZGVmaW5lZCkgewoJICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgbnVtYmVySXNOYU4ob2JqLmxlbmd0aCkpIHsKCSAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIoMCkKCSAgICB9CgkgICAgcmV0dXJuIGZyb21BcnJheUxpa2Uob2JqKQoJICB9CgoJICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIEFycmF5LmlzQXJyYXkob2JqLmRhdGEpKSB7CgkgICAgcmV0dXJuIGZyb21BcnJheUxpa2Uob2JqLmRhdGEpCgkgIH0KCX0KCglmdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHsKCSAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwgS19NQVhfTEVOR1RIYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuCgkgIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKQoJICBpZiAobGVuZ3RoID49IEtfTUFYX0xFTkdUSCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgKwoJICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBLX01BWF9MRU5HVEgudG9TdHJpbmcoMTYpICsgJyBieXRlcycpCgkgIH0KCSAgcmV0dXJuIGxlbmd0aCB8IDAKCX0KCglmdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHsKCSAgaWYgKCtsZW5ndGggIT0gbGVuZ3RoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxCgkgICAgbGVuZ3RoID0gMDsKCSAgfQoJICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpCgl9CgoJQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHsKCSAgcmV0dXJuIGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlciA9PT0gdHJ1ZSAmJgoJICAgIGIgIT09IEJ1ZmZlci5wcm90b3R5cGUgLy8gc28gQnVmZmVyLmlzQnVmZmVyKEJ1ZmZlci5wcm90b3R5cGUpIHdpbGwgYmUgZmFsc2UKCX07CgoJQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7CgkgIGlmIChpc0luc3RhbmNlKGEsIFVpbnQ4QXJyYXkpKSBhID0gQnVmZmVyLmZyb20oYSwgYS5vZmZzZXQsIGEuYnl0ZUxlbmd0aCk7CgkgIGlmIChpc0luc3RhbmNlKGIsIFVpbnQ4QXJyYXkpKSBiID0gQnVmZmVyLmZyb20oYiwgYi5vZmZzZXQsIGIuYnl0ZUxlbmd0aCk7CgkgIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAoJICAgICAgJ1RoZSAiYnVmMSIsICJidWYyIiBhcmd1bWVudHMgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheScKCSAgICApCgkgIH0KCgkgIGlmIChhID09PSBiKSByZXR1cm4gMAoKCSAgbGV0IHggPSBhLmxlbmd0aDsKCSAgbGV0IHkgPSBiLmxlbmd0aDsKCgkgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7CgkgICAgaWYgKGFbaV0gIT09IGJbaV0pIHsKCSAgICAgIHggPSBhW2ldOwoJICAgICAgeSA9IGJbaV07CgkgICAgICBicmVhawoJICAgIH0KCSAgfQoKCSAgaWYgKHggPCB5KSByZXR1cm4gLTEKCSAgaWYgKHkgPCB4KSByZXR1cm4gMQoJICByZXR1cm4gMAoJfTsKCglCdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7CgkgIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7CgkgICAgY2FzZSAnaGV4JzoKCSAgICBjYXNlICd1dGY4JzoKCSAgICBjYXNlICd1dGYtOCc6CgkgICAgY2FzZSAnYXNjaWknOgoJICAgIGNhc2UgJ2xhdGluMSc6CgkgICAgY2FzZSAnYmluYXJ5JzoKCSAgICBjYXNlICdiYXNlNjQnOgoJICAgIGNhc2UgJ3VjczInOgoJICAgIGNhc2UgJ3Vjcy0yJzoKCSAgICBjYXNlICd1dGYxNmxlJzoKCSAgICBjYXNlICd1dGYtMTZsZSc6CgkgICAgICByZXR1cm4gdHJ1ZQoJICAgIGRlZmF1bHQ6CgkgICAgICByZXR1cm4gZmFsc2UKCSAgfQoJfTsKCglCdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHsKCSAgaWYgKCFBcnJheS5pc0FycmF5KGxpc3QpKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpCgkgIH0KCgkgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkgewoJICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMCkKCSAgfQoKCSAgbGV0IGk7CgkgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkgewoJICAgIGxlbmd0aCA9IDA7CgkgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHsKCSAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aDsKCSAgICB9CgkgIH0KCgkgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpOwoJICBsZXQgcG9zID0gMDsKCSAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHsKCSAgICBsZXQgYnVmID0gbGlzdFtpXTsKCSAgICBpZiAoaXNJbnN0YW5jZShidWYsIFVpbnQ4QXJyYXkpKSB7CgkgICAgICBpZiAocG9zICsgYnVmLmxlbmd0aCA+IGJ1ZmZlci5sZW5ndGgpIHsKCSAgICAgICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgYnVmID0gQnVmZmVyLmZyb20oYnVmKTsKCSAgICAgICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoCgkgICAgICAgICAgYnVmZmVyLAoJICAgICAgICAgIGJ1ZiwKCSAgICAgICAgICBwb3MKCSAgICAgICAgKTsKCSAgICAgIH0KCSAgICB9IGVsc2UgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgewoJICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpCgkgICAgfSBlbHNlIHsKCSAgICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKTsKCSAgICB9CgkgICAgcG9zICs9IGJ1Zi5sZW5ndGg7CgkgIH0KCSAgcmV0dXJuIGJ1ZmZlcgoJfTsKCglmdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7CgkgIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkgewoJICAgIHJldHVybiBzdHJpbmcubGVuZ3RoCgkgIH0KCSAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IGlzSW5zdGFuY2Uoc3RyaW5nLCBBcnJheUJ1ZmZlcikpIHsKCSAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGgKCSAgfQoJICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAoJICAgICAgJ1RoZSAic3RyaW5nIiBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBvciBBcnJheUJ1ZmZlci4gJyArCgkgICAgICAnUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIHN0cmluZwoJICAgICkKCSAgfQoKCSAgY29uc3QgbGVuID0gc3RyaW5nLmxlbmd0aDsKCSAgY29uc3QgbXVzdE1hdGNoID0gKGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSA9PT0gdHJ1ZSk7CgkgIGlmICghbXVzdE1hdGNoICYmIGxlbiA9PT0gMCkgcmV0dXJuIDAKCgkgIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvbgoJICBsZXQgbG93ZXJlZENhc2UgPSBmYWxzZTsKCSAgZm9yICg7OykgewoJICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKCSAgICAgIGNhc2UgJ2FzY2lpJzoKCSAgICAgIGNhc2UgJ2xhdGluMSc6CgkgICAgICBjYXNlICdiaW5hcnknOgoJICAgICAgICByZXR1cm4gbGVuCgkgICAgICBjYXNlICd1dGY4JzoKCSAgICAgIGNhc2UgJ3V0Zi04JzoKCSAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoCgkgICAgICBjYXNlICd1Y3MyJzoKCSAgICAgIGNhc2UgJ3Vjcy0yJzoKCSAgICAgIGNhc2UgJ3V0ZjE2bGUnOgoJICAgICAgY2FzZSAndXRmLTE2bGUnOgoJICAgICAgICByZXR1cm4gbGVuICogMgoJICAgICAgY2FzZSAnaGV4JzoKCSAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMQoJICAgICAgY2FzZSAnYmFzZTY0JzoKCSAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGgKCSAgICAgIGRlZmF1bHQ6CgkgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgewoJICAgICAgICAgIHJldHVybiBtdXN0TWF0Y2ggPyAtMSA6IHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4CgkgICAgICAgIH0KCSAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKTsKCSAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlOwoJICAgIH0KCSAgfQoJfQoJQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoOwoKCWZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHsKCSAgbGV0IGxvd2VyZWRDYXNlID0gZmFsc2U7CgoJICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0ICJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5CgkgIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuCgoJICAvLyBUaGlzIGJlaGF2ZXMgbmVpdGhlciBsaWtlIFN0cmluZyBub3IgVWludDhBcnJheSBpbiB0aGF0IHdlIHNldCBzdGFydC9lbmQKCSAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLgoJICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLAoJICAvLyBTZWN0aW9uIDEzLjMuMy43IFJ1bnRpbWUgU2VtYW50aWNzOiBLZXllZEJpbmRpbmdJbml0aWFsaXphdGlvbi4KCSAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7CgkgICAgc3RhcnQgPSAwOwoJICB9CgkgIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyCgkgIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuCgkgIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7CgkgICAgcmV0dXJuICcnCgkgIH0KCgkgIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgewoJICAgIGVuZCA9IHRoaXMubGVuZ3RoOwoJICB9CgoJICBpZiAoZW5kIDw9IDApIHsKCSAgICByZXR1cm4gJycKCSAgfQoKCSAgLy8gRm9yY2UgY29lcmNpb24gdG8gdWludDMyLiBUaGlzIHdpbGwgYWxzbyBjb2VyY2UgZmFsc2V5L05hTiB2YWx1ZXMgdG8gMC4KCSAgZW5kID4+Pj0gMDsKCSAgc3RhcnQgPj4+PSAwOwoKCSAgaWYgKGVuZCA8PSBzdGFydCkgewoJICAgIHJldHVybiAnJwoJICB9CgoJICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4JzsKCgkgIHdoaWxlICh0cnVlKSB7CgkgICAgc3dpdGNoIChlbmNvZGluZykgewoJICAgICAgY2FzZSAnaGV4JzoKCSAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgoJICAgICAgY2FzZSAndXRmOCc6CgkgICAgICBjYXNlICd1dGYtOCc6CgkgICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCgkgICAgICBjYXNlICdhc2NpaSc6CgkgICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgoJICAgICAgY2FzZSAnbGF0aW4xJzoKCSAgICAgIGNhc2UgJ2JpbmFyeSc6CgkgICAgICAgIHJldHVybiBsYXRpbjFTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKCSAgICAgIGNhc2UgJ2Jhc2U2NCc6CgkgICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKCSAgICAgIGNhc2UgJ3VjczInOgoJICAgICAgY2FzZSAndWNzLTInOgoJICAgICAgY2FzZSAndXRmMTZsZSc6CgkgICAgICBjYXNlICd1dGYtMTZsZSc6CgkgICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCgkgICAgICBkZWZhdWx0OgoJICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKCSAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKTsKCSAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlOwoJICAgIH0KCSAgfQoJfQoKCS8vIFRoaXMgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCAoYW5kIHRoZSBgaXMtYnVmZmVyYCBucG0gcGFja2FnZSkKCS8vIHRvIGRldGVjdCBhIEJ1ZmZlciBpbnN0YW5jZS4gSXQncyBub3QgcG9zc2libGUgdG8gdXNlIGBpbnN0YW5jZW9mIEJ1ZmZlcmAKCS8vIHJlbGlhYmx5IGluIGEgYnJvd3NlcmlmeSBjb250ZXh0IGJlY2F1c2UgdGhlcmUgY291bGQgYmUgbXVsdGlwbGUgZGlmZmVyZW50CgkvLyBjb3BpZXMgb2YgdGhlICdidWZmZXInIHBhY2thZ2UgaW4gdXNlLiBUaGlzIG1ldGhvZCB3b3JrcyBldmVuIGZvciBCdWZmZXIKCS8vIGluc3RhbmNlcyB0aGF0IHdlcmUgY3JlYXRlZCBmcm9tIGFub3RoZXIgY29weSBvZiB0aGUgYGJ1ZmZlcmAgcGFja2FnZS4KCS8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzE1NAoJQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlOwoKCWZ1bmN0aW9uIHN3YXAgKGIsIG4sIG0pIHsKCSAgY29uc3QgaSA9IGJbbl07CgkgIGJbbl0gPSBiW21dOwoJICBiW21dID0gaTsKCX0KCglCdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7CgkgIGNvbnN0IGxlbiA9IHRoaXMubGVuZ3RoOwoJICBpZiAobGVuICUgMiAhPT0gMCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpCgkgIH0KCSAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikgewoJICAgIHN3YXAodGhpcywgaSwgaSArIDEpOwoJICB9CgkgIHJldHVybiB0aGlzCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUuc3dhcDMyID0gZnVuY3Rpb24gc3dhcDMyICgpIHsKCSAgY29uc3QgbGVuID0gdGhpcy5sZW5ndGg7CgkgIGlmIChsZW4gJSA0ICE9PSAwKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJykKCSAgfQoJICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7CgkgICAgc3dhcCh0aGlzLCBpLCBpICsgMyk7CgkgICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpOwoJICB9CgkgIHJldHVybiB0aGlzCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHsKCSAgY29uc3QgbGVuID0gdGhpcy5sZW5ndGg7CgkgIGlmIChsZW4gJSA4ICE9PSAwKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJykKCSAgfQoJICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7CgkgICAgc3dhcCh0aGlzLCBpLCBpICsgNyk7CgkgICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDYpOwoJICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KTsKCSAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNCk7CgkgIH0KCSAgcmV0dXJuIHRoaXMKCX07CgoJQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHsKCSAgY29uc3QgbGVuZ3RoID0gdGhpcy5sZW5ndGg7CgkgIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJwoJICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpCgkgIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnRvTG9jYWxlU3RyaW5nID0gQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZzsKCglCdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikgewoJICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpCgkgIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZQoJICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDAKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7CgkgIGxldCBzdHIgPSAnJzsKCSAgY29uc3QgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUzsKCSAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5yZXBsYWNlKC8oLnsyfSkvZywgJyQxICcpLnRyaW0oKTsKCSAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJzsKCSAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPicKCX07CglpZiAoY3VzdG9tSW5zcGVjdFN5bWJvbCkgewoJICBCdWZmZXIucHJvdG90eXBlW2N1c3RvbUluc3BlY3RTeW1ib2xdID0gQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0OwoJfQoKCUJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7CgkgIGlmIChpc0luc3RhbmNlKHRhcmdldCwgVWludDhBcnJheSkpIHsKCSAgICB0YXJnZXQgPSBCdWZmZXIuZnJvbSh0YXJnZXQsIHRhcmdldC5vZmZzZXQsIHRhcmdldC5ieXRlTGVuZ3RoKTsKCSAgfQoJICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0YXJnZXQpKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKCSAgICAgICdUaGUgInRhcmdldCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheS4gJyArCgkgICAgICAnUmVjZWl2ZWQgdHlwZSAnICsgKHR5cGVvZiB0YXJnZXQpCgkgICAgKQoJICB9CgoJICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkgewoJICAgIHN0YXJ0ID0gMDsKCSAgfQoJICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHsKCSAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMDsKCSAgfQoJICBpZiAodGhpc1N0YXJ0ID09PSB1bmRlZmluZWQpIHsKCSAgICB0aGlzU3RhcnQgPSAwOwoJICB9CgkgIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHsKCSAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGg7CgkgIH0KCgkgIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKQoJICB9CgoJICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7CgkgICAgcmV0dXJuIDAKCSAgfQoJICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHsKCSAgICByZXR1cm4gLTEKCSAgfQoJICBpZiAoc3RhcnQgPj0gZW5kKSB7CgkgICAgcmV0dXJuIDEKCSAgfQoKCSAgc3RhcnQgPj4+PSAwOwoJICBlbmQgPj4+PSAwOwoJICB0aGlzU3RhcnQgPj4+PSAwOwoJICB0aGlzRW5kID4+Pj0gMDsKCgkgIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwCgoJICBsZXQgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnQ7CgkgIGxldCB5ID0gZW5kIC0gc3RhcnQ7CgkgIGNvbnN0IGxlbiA9IE1hdGgubWluKHgsIHkpOwoKCSAgY29uc3QgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZCk7CgkgIGNvbnN0IHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZCk7CgoJICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7CgkgICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7CgkgICAgICB4ID0gdGhpc0NvcHlbaV07CgkgICAgICB5ID0gdGFyZ2V0Q29weVtpXTsKCSAgICAgIGJyZWFrCgkgICAgfQoJICB9CgoJICBpZiAoeCA8IHkpIHJldHVybiAtMQoJICBpZiAoeSA8IHgpIHJldHVybiAxCgkgIHJldHVybiAwCgl9OwoKCS8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCwKCS8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuCgkvLwoJLy8gQXJndW1lbnRzOgoJLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2gKCS8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyCgkvLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzIKCS8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nCgkvLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZgoJZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7CgkgIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaAoJICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xCgoJICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldAoJICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7CgkgICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0OwoJICAgIGJ5dGVPZmZzZXQgPSAwOwoJICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSB7CgkgICAgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmY7CgkgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7CgkgICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwOwoJICB9CgkgIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldDsgLy8gQ29lcmNlIHRvIE51bWJlci4KCSAgaWYgKG51bWJlcklzTmFOKGJ5dGVPZmZzZXQpKSB7CgkgICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgImZvbyIsIGV0Yywgc2VhcmNoIHdob2xlIGJ1ZmZlcgoJICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKTsKCSAgfQoKCSAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXQ6IG5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXIKCSAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCArIGJ5dGVPZmZzZXQ7CgkgIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHsKCSAgICBpZiAoZGlyKSByZXR1cm4gLTEKCSAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMTsKCSAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkgewoJICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwOwoJICAgIGVsc2UgcmV0dXJuIC0xCgkgIH0KCgkgIC8vIE5vcm1hbGl6ZSB2YWwKCSAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7CgkgICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZyk7CgkgIH0KCgkgIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mCgkgIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkgewoJICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHMKCSAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgewoJICAgICAgcmV0dXJuIC0xCgkgICAgfQoJICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpCgkgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKCSAgICB2YWwgPSB2YWwgJiAweEZGOyAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdCgkgICAgaWYgKHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7CgkgICAgICBpZiAoZGlyKSB7CgkgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpCgkgICAgICB9IGVsc2UgewoJICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCkKCSAgICAgIH0KCSAgICB9CgkgICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIFt2YWxdLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKQoJICB9CgoJICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKQoJfQoKCWZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHsKCSAgbGV0IGluZGV4U2l6ZSA9IDE7CgkgIGxldCBhcnJMZW5ndGggPSBhcnIubGVuZ3RoOwoJICBsZXQgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aDsKCgkgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkKSB7CgkgICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCk7CgkgICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHwKCSAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykgewoJICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7CgkgICAgICAgIHJldHVybiAtMQoJICAgICAgfQoJICAgICAgaW5kZXhTaXplID0gMjsKCSAgICAgIGFyckxlbmd0aCAvPSAyOwoJICAgICAgdmFsTGVuZ3RoIC89IDI7CgkgICAgICBieXRlT2Zmc2V0IC89IDI7CgkgICAgfQoJICB9CgoJICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHsKCSAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7CgkgICAgICByZXR1cm4gYnVmW2ldCgkgICAgfSBlbHNlIHsKCSAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpCgkgICAgfQoJICB9CgoJICBsZXQgaTsKCSAgaWYgKGRpcikgewoJICAgIGxldCBmb3VuZEluZGV4ID0gLTE7CgkgICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7CgkgICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7CgkgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGk7CgkgICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemUKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIGlmIChmb3VuZEluZGV4ICE9PSAtMSkgaSAtPSBpIC0gZm91bmRJbmRleDsKCSAgICAgICAgZm91bmRJbmRleCA9IC0xOwoJICAgICAgfQoJICAgIH0KCSAgfSBlbHNlIHsKCSAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aDsKCSAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpID49IDA7IGktLSkgewoJICAgICAgbGV0IGZvdW5kID0gdHJ1ZTsKCSAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkgewoJICAgICAgICAgIGZvdW5kID0gZmFsc2U7CgkgICAgICAgICAgYnJlYWsKCSAgICAgICAgfQoJICAgICAgfQoJICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaQoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIC0xCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CgkgIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHsKCSAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIHRydWUpCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgewoJICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZmFsc2UpCgl9OwoKCWZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKCSAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMDsKCSAgY29uc3QgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldDsKCSAgaWYgKCFsZW5ndGgpIHsKCSAgICBsZW5ndGggPSByZW1haW5pbmc7CgkgIH0gZWxzZSB7CgkgICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aCk7CgkgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykgewoJICAgICAgbGVuZ3RoID0gcmVtYWluaW5nOwoJICAgIH0KCSAgfQoKCSAgY29uc3Qgc3RyTGVuID0gc3RyaW5nLmxlbmd0aDsKCgkgIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7CgkgICAgbGVuZ3RoID0gc3RyTGVuIC8gMjsKCSAgfQoJICBsZXQgaTsKCSAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CgkgICAgY29uc3QgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KTsKCSAgICBpZiAobnVtYmVySXNOYU4ocGFyc2VkKSkgcmV0dXJuIGkKCSAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWQ7CgkgIH0KCSAgcmV0dXJuIGkKCX0KCglmdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQoJfQoKCWZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKCX0KCglmdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CgkgIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKCX0KCglmdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHsKCSAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZykKCSAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgZW5jb2RpbmcgPSAndXRmOCc7CgkgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGg7CgkgICAgb2Zmc2V0ID0gMDsKCSAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpCgkgIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHsKCSAgICBlbmNvZGluZyA9IG9mZnNldDsKCSAgICBsZW5ndGggPSB0aGlzLmxlbmd0aDsKCSAgICBvZmZzZXQgPSAwOwoJICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKQoJICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHsKCSAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHsKCSAgICAgIGxlbmd0aCA9IGxlbmd0aCA+Pj4gMDsKCSAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4JzsKCSAgICB9IGVsc2UgewoJICAgICAgZW5jb2RpbmcgPSBsZW5ndGg7CgkgICAgICBsZW5ndGggPSB1bmRlZmluZWQ7CgkgICAgfQoJICB9IGVsc2UgewoJICAgIHRocm93IG5ldyBFcnJvcigKCSAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCcKCSAgICApCgkgIH0KCgkgIGNvbnN0IHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0OwoJICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmc7CgoJICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpCgkgIH0KCgkgIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnOwoKCSAgbGV0IGxvd2VyZWRDYXNlID0gZmFsc2U7CgkgIGZvciAoOzspIHsKCSAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CgkgICAgICBjYXNlICdoZXgnOgoJICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCgkgICAgICBjYXNlICd1dGY4JzoKCSAgICAgIGNhc2UgJ3V0Zi04JzoKCSAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKCSAgICAgIGNhc2UgJ2FzY2lpJzoKCSAgICAgIGNhc2UgJ2xhdGluMSc6CgkgICAgICBjYXNlICdiaW5hcnknOgoJICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKCSAgICAgIGNhc2UgJ2Jhc2U2NCc6CgkgICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlCgkgICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKCSAgICAgIGNhc2UgJ3VjczInOgoJICAgICAgY2FzZSAndWNzLTInOgoJICAgICAgY2FzZSAndXRmMTZsZSc6CgkgICAgICBjYXNlICd1dGYtMTZsZSc6CgkgICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCgkgICAgICBkZWZhdWx0OgoJICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKCSAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKTsKCSAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlOwoJICAgIH0KCSAgfQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7CgkgIHJldHVybiB7CgkgICAgdHlwZTogJ0J1ZmZlcicsCgkgICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApCgkgIH0KCX07CgoJZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7CgkgICAgcmV0dXJuIGJhc2U2NEpzLmZyb21CeXRlQXJyYXkoYnVmKQoJICB9IGVsc2UgewoJICAgIHJldHVybiBiYXNlNjRKcy5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSkKCSAgfQoJfQoKCWZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CgkgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CgkgIGNvbnN0IHJlcyA9IFtdOwoKCSAgbGV0IGkgPSBzdGFydDsKCSAgd2hpbGUgKGkgPCBlbmQpIHsKCSAgICBjb25zdCBmaXJzdEJ5dGUgPSBidWZbaV07CgkgICAgbGV0IGNvZGVQb2ludCA9IG51bGw7CgkgICAgbGV0IGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikKCSAgICAgID8gNAoJICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikKCSAgICAgICAgICA/IDMKCSAgICAgICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKQoJICAgICAgICAgICAgICA/IDIKCSAgICAgICAgICAgICAgOiAxOwoKCSAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7CgkgICAgICBsZXQgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50OwoKCSAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkgewoJICAgICAgICBjYXNlIDE6CgkgICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHsKCSAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZTsKCSAgICAgICAgICB9CgkgICAgICAgICAgYnJlYWsKCSAgICAgICAgY2FzZSAyOgoJICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdOwoJICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRik7CgkgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHsKCSAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9CgkgICAgICAgICAgYnJlYWsKCSAgICAgICAgY2FzZSAzOgoJICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdOwoJICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl07CgkgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRik7CgkgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7CgkgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfQoJICAgICAgICAgIGJyZWFrCgkgICAgICAgIGNhc2UgNDoKCSAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXTsKCSAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdOwoJICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdOwoJICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRik7CgkgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHsKCSAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9CgkgICAgICB9CgkgICAgfQoKCSAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7CgkgICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhCgkgICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlCgkgICAgICBjb2RlUG9pbnQgPSAweEZGRkQ7CgkgICAgICBieXRlc1BlclNlcXVlbmNlID0gMTsKCSAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikgewoJICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSkKCSAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwOwoJICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTsKCSAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGOwoJICAgIH0KCgkgICAgcmVzLnB1c2goY29kZVBvaW50KTsKCSAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2U7CgkgIH0KCgkgIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKQoJfQoKCS8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aAoJLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLgoJLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eQoJY29uc3QgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDA7CgoJZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7CgkgIGNvbnN0IGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoOwoJICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7CgkgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpCgkgIH0KCgkgIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZCIuCgkgIGxldCByZXMgPSAnJzsKCSAgbGV0IGkgPSAwOwoJICB3aGlsZSAoaSA8IGxlbikgewoJICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KAoJICAgICAgU3RyaW5nLAoJICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKQoJICAgICk7CgkgIH0KCSAgcmV0dXJuIHJlcwoJfQoKCWZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICBsZXQgcmV0ID0gJyc7CgkgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CgoJICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkgewoJICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpOwoJICB9CgkgIHJldHVybiByZXQKCX0KCglmdW5jdGlvbiBsYXRpbjFTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CgkgIGxldCByZXQgPSAnJzsKCSAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKTsKCgkgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7CgkgICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKTsKCSAgfQoJICByZXR1cm4gcmV0Cgl9CgoJZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICBjb25zdCBsZW4gPSBidWYubGVuZ3RoOwoKCSAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMDsKCSAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlbjsKCgkgIGxldCBvdXQgPSAnJzsKCSAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKCSAgICBvdXQgKz0gaGV4U2xpY2VMb29rdXBUYWJsZVtidWZbaV1dOwoJICB9CgkgIHJldHVybiBvdXQKCX0KCglmdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICBjb25zdCBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKTsKCSAgbGV0IHJlcyA9ICcnOwoJICAvLyBJZiBieXRlcy5sZW5ndGggaXMgb2RkLCB0aGUgbGFzdCA4IGJpdHMgbXVzdCBiZSBpZ25vcmVkIChzYW1lIGFzIG5vZGUuanMpCgkgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoIC0gMTsgaSArPSAyKSB7CgkgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyAoYnl0ZXNbaSArIDFdICogMjU2KSk7CgkgIH0KCSAgcmV0dXJuIHJlcwoJfQoKCUJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkgewoJICBjb25zdCBsZW4gPSB0aGlzLmxlbmd0aDsKCSAgc3RhcnQgPSB+fnN0YXJ0OwoJICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kOwoKCSAgaWYgKHN0YXJ0IDwgMCkgewoJICAgIHN0YXJ0ICs9IGxlbjsKCSAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDA7CgkgIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHsKCSAgICBzdGFydCA9IGxlbjsKCSAgfQoKCSAgaWYgKGVuZCA8IDApIHsKCSAgICBlbmQgKz0gbGVuOwoJICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwOwoJICB9IGVsc2UgaWYgKGVuZCA+IGxlbikgewoJICAgIGVuZCA9IGxlbjsKCSAgfQoKCSAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydDsKCgkgIGNvbnN0IG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCk7CgkgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlCgkgIE9iamVjdC5zZXRQcm90b3R5cGVPZihuZXdCdWYsIEJ1ZmZlci5wcm90b3R5cGUpOwoKCSAgcmV0dXJuIG5ld0J1ZgoJfTsKCgkvKgoJICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuCgkgKi8KCWZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7CgkgIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpCgkgIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJykKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRVaW50TEUgPQoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKTsKCgkgIGxldCB2YWwgPSB0aGlzW29mZnNldF07CgkgIGxldCBtdWwgPSAxOwoJICBsZXQgaSA9IDA7CgkgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CgkgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWw7CgkgIH0KCgkgIHJldHVybiB2YWwKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVWludEJFID0KCUJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMDsKCSAgaWYgKCFub0Fzc2VydCkgewoJICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpOwoJICB9CgoJICBsZXQgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdOwoJICBsZXQgbXVsID0gMTsKCSAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7CgkgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bDsKCSAgfQoKCSAgcmV0dXJuIHZhbAoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRVaW50OCA9CglCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpOwoJICByZXR1cm4gdGhpc1tvZmZzZXRdCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZFVpbnQxNkxFID0KCUJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCk7CgkgIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRVaW50MTZCRSA9CglCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpOwoJICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV0KCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVWludDMyTEUgPQoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCgkgIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfAoJICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfAoJICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArCgkgICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMCkKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVWludDMyQkUgPQoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCgkgIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArCgkgICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8CgkgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfAoJICAgIHRoaXNbb2Zmc2V0ICsgM10pCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEJpZ1VJbnQ2NExFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdVSW50NjRMRSAob2Zmc2V0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0Jyk7CgkgIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdOwoJICBjb25zdCBsYXN0ID0gdGhpc1tvZmZzZXQgKyA3XTsKCSAgaWYgKGZpcnN0ID09PSB1bmRlZmluZWQgfHwgbGFzdCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgYm91bmRzRXJyb3Iob2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDgpOwoJICB9CgoJICBjb25zdCBsbyA9IGZpcnN0ICsKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMjQ7CgoJICBjb25zdCBoaSA9IHRoaXNbKytvZmZzZXRdICsKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsKCSAgICBsYXN0ICogMiAqKiAyNDsKCgkgIHJldHVybiBCaWdJbnQobG8pICsgKEJpZ0ludChoaSkgPDwgQmlnSW50KDMyKSkKCX0pOwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEJpZ1VJbnQ2NEJFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdVSW50NjRCRSAob2Zmc2V0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0Jyk7CgkgIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdOwoJICBjb25zdCBsYXN0ID0gdGhpc1tvZmZzZXQgKyA3XTsKCSAgaWYgKGZpcnN0ID09PSB1bmRlZmluZWQgfHwgbGFzdCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgYm91bmRzRXJyb3Iob2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDgpOwoJICB9CgoJICBjb25zdCBoaSA9IGZpcnN0ICogMiAqKiAyNCArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArCgkgICAgdGhpc1srK29mZnNldF07CgoJICBjb25zdCBsbyA9IHRoaXNbKytvZmZzZXRdICogMiAqKiAyNCArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArCgkgICAgbGFzdDsKCgkgIHJldHVybiAoQmlnSW50KGhpKSA8PCBCaWdJbnQoMzIpKSArIEJpZ0ludChsbykKCX0pOwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpOwoKCSAgbGV0IHZhbCA9IHRoaXNbb2Zmc2V0XTsKCSAgbGV0IG11bCA9IDE7CgkgIGxldCBpID0gMDsKCSAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bDsKCSAgfQoJICBtdWwgKj0gMHg4MDsKCgkgIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpOwoKCSAgcmV0dXJuIHZhbAoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKTsKCgkgIGxldCBpID0gYnl0ZUxlbmd0aDsKCSAgbGV0IG11bCA9IDE7CgkgIGxldCB2YWwgPSB0aGlzW29mZnNldCArIC0taV07CgkgIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkgewoJICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWw7CgkgIH0KCSAgbXVsICo9IDB4ODA7CgoJICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKTsKCgkgIHJldHVybiB2YWwKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aCk7CgkgIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSkKCSAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpOwoJICBjb25zdCB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KTsKCSAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbAoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTsKCSAgY29uc3QgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOCk7CgkgIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWwKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7CgoJICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfAoJICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKCSAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfAoJICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCgkgIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8CgkgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHwKCSAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8CgkgICAgKHRoaXNbb2Zmc2V0ICsgM10pCgl9OwoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEJpZ0ludDY0TEUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gcmVhZEJpZ0ludDY0TEUgKG9mZnNldCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIHZhbGlkYXRlTnVtYmVyKG9mZnNldCwgJ29mZnNldCcpOwoJICBjb25zdCBmaXJzdCA9IHRoaXNbb2Zmc2V0XTsKCSAgY29uc3QgbGFzdCA9IHRoaXNbb2Zmc2V0ICsgN107CgkgIGlmIChmaXJzdCA9PT0gdW5kZWZpbmVkIHx8IGxhc3QgPT09IHVuZGVmaW5lZCkgewoJICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgdGhpcy5sZW5ndGggLSA4KTsKCSAgfQoKCSAgY29uc3QgdmFsID0gdGhpc1tvZmZzZXQgKyA0XSArCgkgICAgdGhpc1tvZmZzZXQgKyA1XSAqIDIgKiogOCArCgkgICAgdGhpc1tvZmZzZXQgKyA2XSAqIDIgKiogMTYgKwoJICAgIChsYXN0IDw8IDI0KTsgLy8gT3ZlcmZsb3cKCgkgIHJldHVybiAoQmlnSW50KHZhbCkgPDwgQmlnSW50KDMyKSkgKwoJICAgIEJpZ0ludChmaXJzdCArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDggKwoJICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDI0KQoJfSk7CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkQmlnSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnSW50NjRCRSAob2Zmc2V0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0Jyk7CgkgIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdOwoJICBjb25zdCBsYXN0ID0gdGhpc1tvZmZzZXQgKyA3XTsKCSAgaWYgKGZpcnN0ID09PSB1bmRlZmluZWQgfHwgbGFzdCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgYm91bmRzRXJyb3Iob2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDgpOwoJICB9CgoJICBjb25zdCB2YWwgPSAoZmlyc3QgPDwgMjQpICsgLy8gT3ZlcmZsb3cKCSAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKwoJICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICsKCSAgICB0aGlzWysrb2Zmc2V0XTsKCgkgIHJldHVybiAoQmlnSW50KHZhbCkgPDwgQmlnSW50KDMyKSkgKwoJICAgIEJpZ0ludCh0aGlzWysrb2Zmc2V0XSAqIDIgKiogMjQgKwoJICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArCgkgICAgdGhpc1srK29mZnNldF0gKiAyICoqIDggKwoJICAgIGxhc3QpCgl9KTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCSAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKCSAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNCkKCX07CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKTsKCSAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpOwoJICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KQoJfTsKCglmdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7CgkgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJyJidWZmZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKQoJICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCcidmFsdWUiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKQoJICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnRMRSA9CglCdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSB7CgkgICAgY29uc3QgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxOwoJICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKTsKCSAgfQoKCSAgbGV0IG11bCA9IDE7CgkgIGxldCBpID0gMDsKCSAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGOwoJICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewoJICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRjsKCSAgfQoKCSAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnRCRSA9CglCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSB7CgkgICAgY29uc3QgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxOwoJICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKTsKCSAgfQoKCSAgbGV0IGkgPSBieXRlTGVuZ3RoIC0gMTsKCSAgbGV0IG11bCA9IDE7CgkgIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkY7CgkgIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkgewoJICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRjsKCSAgfQoKCSAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQ4ID0KCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApOwoJICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTsKCSAgcmV0dXJuIG9mZnNldCArIDEKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQxNkxFID0KCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpOwoJICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KTsKCSAgcmV0dXJuIG9mZnNldCArIDIKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQxNkJFID0KCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOCk7CgkgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKTsKCSAgcmV0dXJuIG9mZnNldCArIDIKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQzMkxFID0KCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApOwoJICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNCk7CgkgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KTsKCSAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpOwoJICByZXR1cm4gb2Zmc2V0ICsgNAoJfTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlVWludDMyQkUgPQoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgdmFsdWUgPSArdmFsdWU7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpOwoJICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNik7CgkgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpOwoJICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZik7CgkgIHJldHVybiBvZmZzZXQgKyA0Cgl9OwoKCWZ1bmN0aW9uIHdydEJpZ1VJbnQ2NExFIChidWYsIHZhbHVlLCBvZmZzZXQsIG1pbiwgbWF4KSB7CgkgIGNoZWNrSW50QkkodmFsdWUsIG1pbiwgbWF4LCBidWYsIG9mZnNldCwgNyk7CgoJICBsZXQgbG8gPSBOdW1iZXIodmFsdWUgJiBCaWdJbnQoMHhmZmZmZmZmZikpOwoJICBidWZbb2Zmc2V0KytdID0gbG87CgkgIGxvID0gbG8gPj4gODsKCSAgYnVmW29mZnNldCsrXSA9IGxvOwoJICBsbyA9IGxvID4+IDg7CgkgIGJ1ZltvZmZzZXQrK10gPSBsbzsKCSAgbG8gPSBsbyA+PiA4OwoJICBidWZbb2Zmc2V0KytdID0gbG87CgkgIGxldCBoaSA9IE51bWJlcih2YWx1ZSA+PiBCaWdJbnQoMzIpICYgQmlnSW50KDB4ZmZmZmZmZmYpKTsKCSAgYnVmW29mZnNldCsrXSA9IGhpOwoJICBoaSA9IGhpID4+IDg7CgkgIGJ1ZltvZmZzZXQrK10gPSBoaTsKCSAgaGkgPSBoaSA+PiA4OwoJICBidWZbb2Zmc2V0KytdID0gaGk7CgkgIGhpID0gaGkgPj4gODsKCSAgYnVmW29mZnNldCsrXSA9IGhpOwoJICByZXR1cm4gb2Zmc2V0Cgl9CgoJZnVuY3Rpb24gd3J0QmlnVUludDY0QkUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbWluLCBtYXgpIHsKCSAgY2hlY2tJbnRCSSh2YWx1ZSwgbWluLCBtYXgsIGJ1Ziwgb2Zmc2V0LCA3KTsKCgkgIGxldCBsbyA9IE51bWJlcih2YWx1ZSAmIEJpZ0ludCgweGZmZmZmZmZmKSk7CgkgIGJ1ZltvZmZzZXQgKyA3XSA9IGxvOwoJICBsbyA9IGxvID4+IDg7CgkgIGJ1ZltvZmZzZXQgKyA2XSA9IGxvOwoJICBsbyA9IGxvID4+IDg7CgkgIGJ1ZltvZmZzZXQgKyA1XSA9IGxvOwoJICBsbyA9IGxvID4+IDg7CgkgIGJ1ZltvZmZzZXQgKyA0XSA9IGxvOwoJICBsZXQgaGkgPSBOdW1iZXIodmFsdWUgPj4gQmlnSW50KDMyKSAmIEJpZ0ludCgweGZmZmZmZmZmKSk7CgkgIGJ1ZltvZmZzZXQgKyAzXSA9IGhpOwoJICBoaSA9IGhpID4+IDg7CgkgIGJ1ZltvZmZzZXQgKyAyXSA9IGhpOwoJICBoaSA9IGhpID4+IDg7CgkgIGJ1ZltvZmZzZXQgKyAxXSA9IGhpOwoJICBoaSA9IGhpID4+IDg7CgkgIGJ1ZltvZmZzZXRdID0gaGk7CgkgIHJldHVybiBvZmZzZXQgKyA4Cgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUJpZ1VJbnQ2NExFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHdyaXRlQmlnVUludDY0TEUgKHZhbHVlLCBvZmZzZXQgPSAwKSB7CgkgIHJldHVybiB3cnRCaWdVSW50NjRMRSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBCaWdJbnQoMCksIEJpZ0ludCgnMHhmZmZmZmZmZmZmZmZmZmZmJykpCgl9KTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlQmlnVUludDY0QkUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gd3JpdGVCaWdVSW50NjRCRSAodmFsdWUsIG9mZnNldCA9IDApIHsKCSAgcmV0dXJuIHdydEJpZ1VJbnQ2NEJFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIEJpZ0ludCgwKSwgQmlnSW50KCcweGZmZmZmZmZmZmZmZmZmZmYnKSkKCX0pOwoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIHsKCSAgICBjb25zdCBsaW1pdCA9IE1hdGgucG93KDIsICg4ICogYnl0ZUxlbmd0aCkgLSAxKTsKCgkgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpOwoJICB9CgoJICBsZXQgaSA9IDA7CgkgIGxldCBtdWwgPSAxOwoJICBsZXQgc3ViID0gMDsKCSAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGOwoJICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewoJICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7CgkgICAgICBzdWIgPSAxOwoJICAgIH0KCSAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGOwoJICB9CgoJICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAoJfTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZTsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwoJICBpZiAoIW5vQXNzZXJ0KSB7CgkgICAgY29uc3QgbGltaXQgPSBNYXRoLnBvdygyLCAoOCAqIGJ5dGVMZW5ndGgpIC0gMSk7CgoJICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KTsKCSAgfQoKCSAgbGV0IGkgPSBieXRlTGVuZ3RoIC0gMTsKCSAgbGV0IG11bCA9IDE7CgkgIGxldCBzdWIgPSAwOwoJICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGOwoJICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkgewoJICAgICAgc3ViID0gMTsKCSAgICB9CgkgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRjsKCSAgfQoKCSAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKTsKCSAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxOwoJICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKTsKCSAgcmV0dXJuIG9mZnNldCArIDEKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpOwoJICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KTsKCSAgcmV0dXJuIG9mZnNldCArIDIKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMCk7CgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOCk7CgkgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKTsKCSAgcmV0dXJuIG9mZnNldCArIDIKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKTsKCSAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZik7CgkgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpOwoJICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNik7CgkgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KTsKCSAgcmV0dXJuIG9mZnNldCArIDQKCX07CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKTsKCSAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxOwoJICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KTsKCSAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpOwoJICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KTsKCSAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpOwoJICByZXR1cm4gb2Zmc2V0ICsgNAoJfTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlQmlnSW50NjRMRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiB3cml0ZUJpZ0ludDY0TEUgKHZhbHVlLCBvZmZzZXQgPSAwKSB7CgkgIHJldHVybiB3cnRCaWdVSW50NjRMRSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAtQmlnSW50KCcweDgwMDAwMDAwMDAwMDAwMDAnKSwgQmlnSW50KCcweDdmZmZmZmZmZmZmZmZmZmYnKSkKCX0pOwoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVCaWdJbnQ2NEJFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHdyaXRlQmlnSW50NjRCRSAodmFsdWUsIG9mZnNldCA9IDApIHsKCSAgcmV0dXJuIHdydEJpZ1VJbnQ2NEJFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIC1CaWdJbnQoJzB4ODAwMDAwMDAwMDAwMDAwMCcpLCBCaWdJbnQoJzB4N2ZmZmZmZmZmZmZmZmZmZicpKQoJfSk7CgoJZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHsKCSAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKQoJICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCgl9CgoJZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIHsKCSAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0KTsKCSAgfQoJICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNCk7CgkgIHJldHVybiBvZmZzZXQgKyA0Cgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KQoJfTsKCglmdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlOwoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CgkgIGlmICghbm9Bc3NlcnQpIHsKCSAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4KTsKCSAgfQoJICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOCk7CgkgIHJldHVybiBvZmZzZXQgKyA4Cgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KQoJfTsKCglCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewoJICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KQoJfTsKCgkvLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpCglCdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7CgkgIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2FyZ3VtZW50IHNob3VsZCBiZSBhIEJ1ZmZlcicpCgkgIGlmICghc3RhcnQpIHN0YXJ0ID0gMDsKCSAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aDsKCSAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aDsKCSAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwOwoJICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnQ7CgoJICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmUKCSAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwCgkgIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMAoKCSAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9ucwoJICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKQoJICB9CgkgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKQoJICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJykKCgkgIC8vIEFyZSB3ZSBvb2I/CgkgIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGg7CgkgIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkgewoJICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0OwoJICB9CgoJICBjb25zdCBsZW4gPSBlbmQgLSBzdGFydDsKCgkgIGlmICh0aGlzID09PSB0YXJnZXQgJiYgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW4gPT09ICdmdW5jdGlvbicpIHsKCSAgICAvLyBVc2UgYnVpbHQtaW4gd2hlbiBhdmFpbGFibGUsIG1pc3NpbmcgZnJvbSBJRTExCgkgICAgdGhpcy5jb3B5V2l0aGluKHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKTsKCSAgfSBlbHNlIHsKCSAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbCgKCSAgICAgIHRhcmdldCwKCSAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCksCgkgICAgICB0YXJnZXRTdGFydAoJICAgICk7CgkgIH0KCgkgIHJldHVybiBsZW4KCX07CgoJLy8gVXNhZ2U6CgkvLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSkKCS8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKQoJLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pCglCdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7CgkgIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6CgkgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewoJICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7CgkgICAgICBlbmNvZGluZyA9IHN0YXJ0OwoJICAgICAgc3RhcnQgPSAwOwoJICAgICAgZW5kID0gdGhpcy5sZW5ndGg7CgkgICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykgewoJICAgICAgZW5jb2RpbmcgPSBlbmQ7CgkgICAgICBlbmQgPSB0aGlzLmxlbmd0aDsKCSAgICB9CgkgICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykgewoJICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpCgkgICAgfQoJICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHsKCSAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKCSAgICB9CgkgICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHsKCSAgICAgIGNvbnN0IGNvZGUgPSB2YWwuY2hhckNvZGVBdCgwKTsKCSAgICAgIGlmICgoZW5jb2RpbmcgPT09ICd1dGY4JyAmJiBjb2RlIDwgMTI4KSB8fAoJICAgICAgICAgIGVuY29kaW5nID09PSAnbGF0aW4xJykgewoJICAgICAgICAvLyBGYXN0IHBhdGg6IElmIGB2YWxgIGZpdHMgaW50byBhIHNpbmdsZSBieXRlLCB1c2UgdGhhdCBudW1lcmljIHZhbHVlLgoJICAgICAgICB2YWwgPSBjb2RlOwoJICAgICAgfQoJICAgIH0KCSAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewoJICAgIHZhbCA9IHZhbCAmIDI1NTsKCSAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnYm9vbGVhbicpIHsKCSAgICB2YWwgPSBOdW1iZXIodmFsKTsKCSAgfQoKCSAgLy8gSW52YWxpZCByYW5nZXMgYXJlIG5vdCBzZXQgdG8gYSBkZWZhdWx0LCBzbyBjYW4gcmFuZ2UgY2hlY2sgZWFybHkuCgkgIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdPdXQgb2YgcmFuZ2UgaW5kZXgnKQoJICB9CgoJICBpZiAoZW5kIDw9IHN0YXJ0KSB7CgkgICAgcmV0dXJuIHRoaXMKCSAgfQoKCSAgc3RhcnQgPSBzdGFydCA+Pj4gMDsKCSAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMDsKCgkgIGlmICghdmFsKSB2YWwgPSAwOwoKCSAgbGV0IGk7CgkgIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewoJICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKCSAgICAgIHRoaXNbaV0gPSB2YWw7CgkgICAgfQoJICB9IGVsc2UgewoJICAgIGNvbnN0IGJ5dGVzID0gQnVmZmVyLmlzQnVmZmVyKHZhbCkKCSAgICAgID8gdmFsCgkgICAgICA6IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpOwoJICAgIGNvbnN0IGxlbiA9IGJ5dGVzLmxlbmd0aDsKCSAgICBpZiAobGVuID09PSAwKSB7CgkgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgdmFsdWUgIicgKyB2YWwgKwoJICAgICAgICAnIiBpcyBpbnZhbGlkIGZvciBhcmd1bWVudCAidmFsdWUiJykKCSAgICB9CgkgICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHsKCSAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dOwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIHRoaXMKCX07CgoJLy8gQ1VTVE9NIEVSUk9SUwoJLy8gPT09PT09PT09PT09PQoKCS8vIFNpbXBsaWZpZWQgdmVyc2lvbnMgZnJvbSBOb2RlLCBjaGFuZ2VkIGZvciBCdWZmZXItb25seSB1c2FnZQoJY29uc3QgZXJyb3JzID0ge307CglmdW5jdGlvbiBFIChzeW0sIGdldE1lc3NhZ2UsIEJhc2UpIHsKCSAgZXJyb3JzW3N5bV0gPSBjbGFzcyBOb2RlRXJyb3IgZXh0ZW5kcyBCYXNlIHsKCSAgICBjb25zdHJ1Y3RvciAoKSB7CgkgICAgICBzdXBlcigpOwoKCSAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbWVzc2FnZScsIHsKCSAgICAgICAgdmFsdWU6IGdldE1lc3NhZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKSwKCSAgICAgICAgd3JpdGFibGU6IHRydWUsCgkgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQoJICAgICAgfSk7CgoJICAgICAgLy8gQWRkIHRoZSBlcnJvciBjb2RlIHRvIHRoZSBuYW1lIHRvIGluY2x1ZGUgaXQgaW4gdGhlIHN0YWNrIHRyYWNlLgoJICAgICAgdGhpcy5uYW1lID0gYCR7dGhpcy5uYW1lfSBbJHtzeW19XWA7CgkgICAgICAvLyBBY2Nlc3MgdGhlIHN0YWNrIHRvIGdlbmVyYXRlIHRoZSBlcnJvciBtZXNzYWdlIGluY2x1ZGluZyB0aGUgZXJyb3IgY29kZQoJICAgICAgLy8gZnJvbSB0aGUgbmFtZS4KCSAgICAgIHRoaXMuc3RhY2s7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLWV4cHJlc3Npb25zCgkgICAgICAvLyBSZXNldCB0aGUgbmFtZSB0byB0aGUgYWN0dWFsIG5hbWUuCgkgICAgICBkZWxldGUgdGhpcy5uYW1lOwoJICAgIH0KCgkgICAgZ2V0IGNvZGUgKCkgewoJICAgICAgcmV0dXJuIHN5bQoJICAgIH0KCgkgICAgc2V0IGNvZGUgKHZhbHVlKSB7CgkgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2NvZGUnLCB7CgkgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKCSAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKCSAgICAgICAgdmFsdWUsCgkgICAgICAgIHdyaXRhYmxlOiB0cnVlCgkgICAgICB9KTsKCSAgICB9CgoJICAgIHRvU3RyaW5nICgpIHsKCSAgICAgIHJldHVybiBgJHt0aGlzLm5hbWV9IFske3N5bX1dOiAke3RoaXMubWVzc2FnZX1gCgkgICAgfQoJICB9OwoJfQoKCUUoJ0VSUl9CVUZGRVJfT1VUX09GX0JPVU5EUycsCgkgIGZ1bmN0aW9uIChuYW1lKSB7CgkgICAgaWYgKG5hbWUpIHsKCSAgICAgIHJldHVybiBgJHtuYW1lfSBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHNgCgkgICAgfQoKCSAgICByZXR1cm4gJ0F0dGVtcHQgdG8gYWNjZXNzIG1lbW9yeSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnCgkgIH0sIFJhbmdlRXJyb3IpOwoJRSgnRVJSX0lOVkFMSURfQVJHX1RZUEUnLAoJICBmdW5jdGlvbiAobmFtZSwgYWN0dWFsKSB7CgkgICAgcmV0dXJuIGBUaGUgIiR7bmFtZX0iIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBudW1iZXIuIFJlY2VpdmVkIHR5cGUgJHt0eXBlb2YgYWN0dWFsfWAKCSAgfSwgVHlwZUVycm9yKTsKCUUoJ0VSUl9PVVRfT0ZfUkFOR0UnLAoJICBmdW5jdGlvbiAoc3RyLCByYW5nZSwgaW5wdXQpIHsKCSAgICBsZXQgbXNnID0gYFRoZSB2YWx1ZSBvZiAiJHtzdHJ9IiBpcyBvdXQgb2YgcmFuZ2UuYDsKCSAgICBsZXQgcmVjZWl2ZWQgPSBpbnB1dDsKCSAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihpbnB1dCkgJiYgTWF0aC5hYnMoaW5wdXQpID4gMiAqKiAzMikgewoJICAgICAgcmVjZWl2ZWQgPSBhZGROdW1lcmljYWxTZXBhcmF0b3IoU3RyaW5nKGlucHV0KSk7CgkgICAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdiaWdpbnQnKSB7CgkgICAgICByZWNlaXZlZCA9IFN0cmluZyhpbnB1dCk7CgkgICAgICBpZiAoaW5wdXQgPiBCaWdJbnQoMikgKiogQmlnSW50KDMyKSB8fCBpbnB1dCA8IC0oQmlnSW50KDIpICoqIEJpZ0ludCgzMikpKSB7CgkgICAgICAgIHJlY2VpdmVkID0gYWRkTnVtZXJpY2FsU2VwYXJhdG9yKHJlY2VpdmVkKTsKCSAgICAgIH0KCSAgICAgIHJlY2VpdmVkICs9ICduJzsKCSAgICB9CgkgICAgbXNnICs9IGAgSXQgbXVzdCBiZSAke3JhbmdlfS4gUmVjZWl2ZWQgJHtyZWNlaXZlZH1gOwoJICAgIHJldHVybiBtc2cKCSAgfSwgUmFuZ2VFcnJvcik7CgoJZnVuY3Rpb24gYWRkTnVtZXJpY2FsU2VwYXJhdG9yICh2YWwpIHsKCSAgbGV0IHJlcyA9ICcnOwoJICBsZXQgaSA9IHZhbC5sZW5ndGg7CgkgIGNvbnN0IHN0YXJ0ID0gdmFsWzBdID09PSAnLScgPyAxIDogMDsKCSAgZm9yICg7IGkgPj0gc3RhcnQgKyA0OyBpIC09IDMpIHsKCSAgICByZXMgPSBgXyR7dmFsLnNsaWNlKGkgLSAzLCBpKX0ke3Jlc31gOwoJICB9CgkgIHJldHVybiBgJHt2YWwuc2xpY2UoMCwgaSl9JHtyZXN9YAoJfQoKCS8vIENIRUNLIEZVTkNUSU9OUwoJLy8gPT09PT09PT09PT09PT09CgoJZnVuY3Rpb24gY2hlY2tCb3VuZHMgKGJ1Ziwgb2Zmc2V0LCBieXRlTGVuZ3RoKSB7CgkgIHZhbGlkYXRlTnVtYmVyKG9mZnNldCwgJ29mZnNldCcpOwoJICBpZiAoYnVmW29mZnNldF0gPT09IHVuZGVmaW5lZCB8fCBidWZbb2Zmc2V0ICsgYnl0ZUxlbmd0aF0gPT09IHVuZGVmaW5lZCkgewoJICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgYnVmLmxlbmd0aCAtIChieXRlTGVuZ3RoICsgMSkpOwoJICB9Cgl9CgoJZnVuY3Rpb24gY2hlY2tJbnRCSSAodmFsdWUsIG1pbiwgbWF4LCBidWYsIG9mZnNldCwgYnl0ZUxlbmd0aCkgewoJICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHsKCSAgICBjb25zdCBuID0gdHlwZW9mIG1pbiA9PT0gJ2JpZ2ludCcgPyAnbicgOiAnJzsKCSAgICBsZXQgcmFuZ2U7CgkgICAgaWYgKGJ5dGVMZW5ndGggPiAzKSB7CgkgICAgICBpZiAobWluID09PSAwIHx8IG1pbiA9PT0gQmlnSW50KDApKSB7CgkgICAgICAgIHJhbmdlID0gYD49IDAke259IGFuZCA8IDIke259ICoqICR7KGJ5dGVMZW5ndGggKyAxKSAqIDh9JHtufWA7CgkgICAgICB9IGVsc2UgewoJICAgICAgICByYW5nZSA9IGA+PSAtKDIke259ICoqICR7KGJ5dGVMZW5ndGggKyAxKSAqIDggLSAxfSR7bn0pIGFuZCA8IDIgKiogYCArCgkgICAgICAgICAgICAgICAgYCR7KGJ5dGVMZW5ndGggKyAxKSAqIDggLSAxfSR7bn1gOwoJICAgICAgfQoJICAgIH0gZWxzZSB7CgkgICAgICByYW5nZSA9IGA+PSAke21pbn0ke259IGFuZCA8PSAke21heH0ke259YDsKCSAgICB9CgkgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfT1VUX09GX1JBTkdFKCd2YWx1ZScsIHJhbmdlLCB2YWx1ZSkKCSAgfQoJICBjaGVja0JvdW5kcyhidWYsIG9mZnNldCwgYnl0ZUxlbmd0aCk7Cgl9CgoJZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXIgKHZhbHVlLCBuYW1lKSB7CgkgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSB7CgkgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfSU5WQUxJRF9BUkdfVFlQRShuYW1lLCAnbnVtYmVyJywgdmFsdWUpCgkgIH0KCX0KCglmdW5jdGlvbiBib3VuZHNFcnJvciAodmFsdWUsIGxlbmd0aCwgdHlwZSkgewoJICBpZiAoTWF0aC5mbG9vcih2YWx1ZSkgIT09IHZhbHVlKSB7CgkgICAgdmFsaWRhdGVOdW1iZXIodmFsdWUsIHR5cGUpOwoJICAgIHRocm93IG5ldyBlcnJvcnMuRVJSX09VVF9PRl9SQU5HRSh0eXBlIHx8ICdvZmZzZXQnLCAnYW4gaW50ZWdlcicsIHZhbHVlKQoJICB9CgoJICBpZiAobGVuZ3RoIDwgMCkgewoJICAgIHRocm93IG5ldyBlcnJvcnMuRVJSX0JVRkZFUl9PVVRfT0ZfQk9VTkRTKCkKCSAgfQoKCSAgdGhyb3cgbmV3IGVycm9ycy5FUlJfT1VUX09GX1JBTkdFKHR5cGUgfHwgJ29mZnNldCcsCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgPj0gJHt0eXBlID8gMSA6IDB9IGFuZCA8PSAke2xlbmd0aH1gLAoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUpCgl9CgoJLy8gSEVMUEVSIEZVTkNUSU9OUwoJLy8gPT09PT09PT09PT09PT09PQoKCWNvbnN0IElOVkFMSURfQkFTRTY0X1JFID0gL1teKy8wLTlBLVphLXotX10vZzsKCglmdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7CgkgIC8vIE5vZGUgdGFrZXMgZXF1YWwgc2lnbnMgYXMgZW5kIG9mIHRoZSBCYXNlNjQgZW5jb2RpbmcKCSAgc3RyID0gc3RyLnNwbGl0KCc9JylbMF07CgkgIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcbiBhbmQgXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3QKCSAgc3RyID0gc3RyLnRyaW0oKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJyk7CgkgIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJycKCSAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJycKCSAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90CgkgIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkgewoJICAgIHN0ciA9IHN0ciArICc9JzsKCSAgfQoJICByZXR1cm4gc3RyCgl9CgoJZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHsKCSAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eTsKCSAgbGV0IGNvZGVQb2ludDsKCSAgY29uc3QgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aDsKCSAgbGV0IGxlYWRTdXJyb2dhdGUgPSBudWxsOwoJICBjb25zdCBieXRlcyA9IFtdOwoKCSAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewoJICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpOwoKCSAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50CgkgICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHsKCSAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkCgkgICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHsKCSAgICAgICAgLy8gbm8gbGVhZCB5ZXQKCSAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikgewoJICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWwKCSAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCk7CgkgICAgICAgICAgY29udGludWUKCSAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZAoJICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKTsKCSAgICAgICAgICBjb250aW51ZQoJICAgICAgICB9CgoJICAgICAgICAvLyB2YWxpZCBsZWFkCgkgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnQ7CgoJICAgICAgICBjb250aW51ZQoJICAgICAgfQoKCSAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3cKCSAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHsKCSAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpOwoJICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50OwoJICAgICAgICBjb250aW51ZQoJICAgICAgfQoKCSAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyCgkgICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwOwoJICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkgewoJICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZAoJICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpOwoJICAgIH0KCgkgICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGw7CgoJICAgIC8vIGVuY29kZSB1dGY4CgkgICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHsKCSAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVhawoJICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpOwoJICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHsKCSAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVhawoJICAgICAgYnl0ZXMucHVzaCgKCSAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsCgkgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCgkgICAgICApOwoJICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkgewoJICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrCgkgICAgICBieXRlcy5wdXNoKAoJICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCwKCSAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLAoJICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MAoJICAgICAgKTsKCSAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7CgkgICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWsKCSAgICAgIGJ5dGVzLnB1c2goCgkgICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCwKCSAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLAoJICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsCgkgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCgkgICAgICApOwoJICAgIH0gZWxzZSB7CgkgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpCgkgICAgfQoJICB9CgoJICByZXR1cm4gYnl0ZXMKCX0KCglmdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikgewoJICBjb25zdCBieXRlQXJyYXkgPSBbXTsKCSAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKCSAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi4KCSAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpOwoJICB9CgkgIHJldHVybiBieXRlQXJyYXkKCX0KCglmdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykgewoJICBsZXQgYywgaGksIGxvOwoJICBjb25zdCBieXRlQXJyYXkgPSBbXTsKCSAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKCSAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWsKCgkgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpOwoJICAgIGhpID0gYyA+PiA4OwoJICAgIGxvID0gYyAlIDI1NjsKCSAgICBieXRlQXJyYXkucHVzaChsbyk7CgkgICAgYnl0ZUFycmF5LnB1c2goaGkpOwoJICB9CgoJICByZXR1cm4gYnl0ZUFycmF5Cgl9CgoJZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7CgkgIHJldHVybiBiYXNlNjRKcy50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKQoJfQoKCWZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkgewoJICBsZXQgaTsKCSAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CgkgICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVhawoJICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXTsKCSAgfQoJICByZXR1cm4gaQoJfQoKCS8vIEFycmF5QnVmZmVyIG9yIFVpbnQ4QXJyYXkgb2JqZWN0cyBmcm9tIG90aGVyIGNvbnRleHRzIChpLmUuIGlmcmFtZXMpIGRvIG5vdCBwYXNzCgkvLyB0aGUgYGluc3RhbmNlb2ZgIGNoZWNrIGJ1dCB0aGV5IHNob3VsZCBiZSB0cmVhdGVkIGFzIG9mIHRoYXQgdHlwZS4KCS8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzE2NgoJZnVuY3Rpb24gaXNJbnN0YW5jZSAob2JqLCB0eXBlKSB7CgkgIHJldHVybiBvYmogaW5zdGFuY2VvZiB0eXBlIHx8CgkgICAgKG9iaiAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3RvciAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3Rvci5uYW1lICE9IG51bGwgJiYKCSAgICAgIG9iai5jb25zdHJ1Y3Rvci5uYW1lID09PSB0eXBlLm5hbWUpCgl9CglmdW5jdGlvbiBudW1iZXJJc05hTiAob2JqKSB7CgkgIC8vIEZvciBJRTExIHN1cHBvcnQKCSAgcmV0dXJuIG9iaiAhPT0gb2JqIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlCgl9CgoJLy8gQ3JlYXRlIGxvb2t1cCB0YWJsZSBmb3IgYHRvU3RyaW5nKCdoZXgnKWAKCS8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzIxOQoJY29uc3QgaGV4U2xpY2VMb29rdXBUYWJsZSA9IChmdW5jdGlvbiAoKSB7CgkgIGNvbnN0IGFscGhhYmV0ID0gJzAxMjM0NTY3ODlhYmNkZWYnOwoJICBjb25zdCB0YWJsZSA9IG5ldyBBcnJheSgyNTYpOwoJICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHsKCSAgICBjb25zdCBpMTYgPSBpICogMTY7CgkgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxNjsgKytqKSB7CgkgICAgICB0YWJsZVtpMTYgKyBqXSA9IGFscGhhYmV0W2ldICsgYWxwaGFiZXRbal07CgkgICAgfQoJICB9CgkgIHJldHVybiB0YWJsZQoJfSkoKTsKCgkvLyBSZXR1cm4gbm90IGZ1bmN0aW9uIHdpdGggRXJyb3IgaWYgQmlnSW50IG5vdCBzdXBwb3J0ZWQKCWZ1bmN0aW9uIGRlZmluZUJpZ0ludE1ldGhvZCAoZm4pIHsKCSAgcmV0dXJuIHR5cGVvZiBCaWdJbnQgPT09ICd1bmRlZmluZWQnID8gQnVmZmVyQmlnSW50Tm90RGVmaW5lZCA6IGZuCgl9CgoJZnVuY3Rpb24gQnVmZmVyQmlnSW50Tm90RGVmaW5lZCAoKSB7CgkgIHRocm93IG5ldyBFcnJvcignQmlnSW50IG5vdCBzdXBwb3J0ZWQnKQoJfQoJfSwgIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL2J1ZmZlciIpOwoKCXZhciBfbm9kZVJlc29sdmVfZW1wdHkgPSB7fTsKCgl2YXIgX25vZGVSZXNvbHZlX2VtcHR5JDEgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7CgkJX19wcm90b19fOiBudWxsLAoJCSdkZWZhdWx0JzogX25vZGVSZXNvbHZlX2VtcHR5Cgl9KTsKCgl2YXIgZGVidWdVdGlsID0gLypAX19QVVJFX18qL2dldEF1Z21lbnRlZE5hbWVzcGFjZShfbm9kZVJlc29sdmVfZW1wdHkkMSk7CgoJZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCglmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCglmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKCXZhciBCdWZmZXIgPSBidWZmZXIuQnVmZmVyOwoKCXZhciBpbnNwZWN0ID0gZGVidWdVdGlsLmluc3BlY3Q7CgoJdmFyIGN1c3RvbSA9IGluc3BlY3QgJiYgaW5zcGVjdC5jdXN0b20gfHwgJ2luc3BlY3QnOwoKCWZ1bmN0aW9uIGNvcHlCdWZmZXIoc3JjLCB0YXJnZXQsIG9mZnNldCkgewoJICBCdWZmZXIucHJvdG90eXBlLmNvcHkuY2FsbChzcmMsIHRhcmdldCwgb2Zmc2V0KTsKCX0KCgl2YXIgYnVmZmVyX2xpc3QgPQoJLyojX19QVVJFX18qLwoJZnVuY3Rpb24gKCkgewoJICBmdW5jdGlvbiBCdWZmZXJMaXN0KCkgewoJICAgIHRoaXMuaGVhZCA9IG51bGw7CgkgICAgdGhpcy50YWlsID0gbnVsbDsKCSAgICB0aGlzLmxlbmd0aCA9IDA7CgkgIH0KCgkgIHZhciBfcHJvdG8gPSBCdWZmZXJMaXN0LnByb3RvdHlwZTsKCgkgIF9wcm90by5wdXNoID0gZnVuY3Rpb24gcHVzaCh2KSB7CgkgICAgdmFyIGVudHJ5ID0gewoJICAgICAgZGF0YTogdiwKCSAgICAgIG5leHQ6IG51bGwKCSAgICB9OwoJICAgIGlmICh0aGlzLmxlbmd0aCA+IDApIHRoaXMudGFpbC5uZXh0ID0gZW50cnk7ZWxzZSB0aGlzLmhlYWQgPSBlbnRyeTsKCSAgICB0aGlzLnRhaWwgPSBlbnRyeTsKCSAgICArK3RoaXMubGVuZ3RoOwoJICB9OwoKCSAgX3Byb3RvLnVuc2hpZnQgPSBmdW5jdGlvbiB1bnNoaWZ0KHYpIHsKCSAgICB2YXIgZW50cnkgPSB7CgkgICAgICBkYXRhOiB2LAoJICAgICAgbmV4dDogdGhpcy5oZWFkCgkgICAgfTsKCSAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHRoaXMudGFpbCA9IGVudHJ5OwoJICAgIHRoaXMuaGVhZCA9IGVudHJ5OwoJICAgICsrdGhpcy5sZW5ndGg7CgkgIH07CgoJICBfcHJvdG8uc2hpZnQgPSBmdW5jdGlvbiBzaGlmdCgpIHsKCSAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybjsKCSAgICB2YXIgcmV0ID0gdGhpcy5oZWFkLmRhdGE7CgkgICAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO2Vsc2UgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5leHQ7CgkgICAgLS10aGlzLmxlbmd0aDsKCSAgICByZXR1cm4gcmV0OwoJICB9OwoKCSAgX3Byb3RvLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7CgkgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDsKCSAgICB0aGlzLmxlbmd0aCA9IDA7CgkgIH07CgoJICBfcHJvdG8uam9pbiA9IGZ1bmN0aW9uIGpvaW4ocykgewoJICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnOwoJICAgIHZhciBwID0gdGhpcy5oZWFkOwoJICAgIHZhciByZXQgPSAnJyArIHAuZGF0YTsKCgkgICAgd2hpbGUgKHAgPSBwLm5leHQpIHsKCSAgICAgIHJldCArPSBzICsgcC5kYXRhOwoJICAgIH0KCgkgICAgcmV0dXJuIHJldDsKCSAgfTsKCgkgIF9wcm90by5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQobikgewoJICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKTsKCSAgICB2YXIgcmV0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKG4gPj4+IDApOwoJICAgIHZhciBwID0gdGhpcy5oZWFkOwoJICAgIHZhciBpID0gMDsKCgkgICAgd2hpbGUgKHApIHsKCSAgICAgIGNvcHlCdWZmZXIocC5kYXRhLCByZXQsIGkpOwoJICAgICAgaSArPSBwLmRhdGEubGVuZ3RoOwoJICAgICAgcCA9IHAubmV4dDsKCSAgICB9CgoJICAgIHJldHVybiByZXQ7CgkgIH0gLy8gQ29uc3VtZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIG9yIGNoYXJhY3RlcnMgZnJvbSB0aGUgYnVmZmVyZWQgZGF0YS4KCSAgOwoKCSAgX3Byb3RvLmNvbnN1bWUgPSBmdW5jdGlvbiBjb25zdW1lKG4sIGhhc1N0cmluZ3MpIHsKCSAgICB2YXIgcmV0OwoKCSAgICBpZiAobiA8IHRoaXMuaGVhZC5kYXRhLmxlbmd0aCkgewoJICAgICAgLy8gYHNsaWNlYCBpcyB0aGUgc2FtZSBmb3IgYnVmZmVycyBhbmQgc3RyaW5ncy4KCSAgICAgIHJldCA9IHRoaXMuaGVhZC5kYXRhLnNsaWNlKDAsIG4pOwoJICAgICAgdGhpcy5oZWFkLmRhdGEgPSB0aGlzLmhlYWQuZGF0YS5zbGljZShuKTsKCSAgICB9IGVsc2UgaWYgKG4gPT09IHRoaXMuaGVhZC5kYXRhLmxlbmd0aCkgewoJICAgICAgLy8gRmlyc3QgY2h1bmsgaXMgYSBwZXJmZWN0IG1hdGNoLgoJICAgICAgcmV0ID0gdGhpcy5zaGlmdCgpOwoJICAgIH0gZWxzZSB7CgkgICAgICAvLyBSZXN1bHQgc3BhbnMgbW9yZSB0aGFuIG9uZSBidWZmZXIuCgkgICAgICByZXQgPSBoYXNTdHJpbmdzID8gdGhpcy5fZ2V0U3RyaW5nKG4pIDogdGhpcy5fZ2V0QnVmZmVyKG4pOwoJICAgIH0KCgkgICAgcmV0dXJuIHJldDsKCSAgfTsKCgkgIF9wcm90by5maXJzdCA9IGZ1bmN0aW9uIGZpcnN0KCkgewoJICAgIHJldHVybiB0aGlzLmhlYWQuZGF0YTsKCSAgfSAvLyBDb25zdW1lcyBhIHNwZWNpZmllZCBhbW91bnQgb2YgY2hhcmFjdGVycyBmcm9tIHRoZSBidWZmZXJlZCBkYXRhLgoJICA7CgoJICBfcHJvdG8uX2dldFN0cmluZyA9IGZ1bmN0aW9uIF9nZXRTdHJpbmcobikgewoJICAgIHZhciBwID0gdGhpcy5oZWFkOwoJICAgIHZhciBjID0gMTsKCSAgICB2YXIgcmV0ID0gcC5kYXRhOwoJICAgIG4gLT0gcmV0Lmxlbmd0aDsKCgkgICAgd2hpbGUgKHAgPSBwLm5leHQpIHsKCSAgICAgIHZhciBzdHIgPSBwLmRhdGE7CgkgICAgICB2YXIgbmIgPSBuID4gc3RyLmxlbmd0aCA/IHN0ci5sZW5ndGggOiBuOwoJICAgICAgaWYgKG5iID09PSBzdHIubGVuZ3RoKSByZXQgKz0gc3RyO2Vsc2UgcmV0ICs9IHN0ci5zbGljZSgwLCBuKTsKCSAgICAgIG4gLT0gbmI7CgoJICAgICAgaWYgKG4gPT09IDApIHsKCSAgICAgICAgaWYgKG5iID09PSBzdHIubGVuZ3RoKSB7CgkgICAgICAgICAgKytjOwoJICAgICAgICAgIGlmIChwLm5leHQpIHRoaXMuaGVhZCA9IHAubmV4dDtlbHNlIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgdGhpcy5oZWFkID0gcDsKCSAgICAgICAgICBwLmRhdGEgPSBzdHIuc2xpY2UobmIpOwoJICAgICAgICB9CgoJICAgICAgICBicmVhazsKCSAgICAgIH0KCgkgICAgICArK2M7CgkgICAgfQoKCSAgICB0aGlzLmxlbmd0aCAtPSBjOwoJICAgIHJldHVybiByZXQ7CgkgIH0gLy8gQ29uc3VtZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIGZyb20gdGhlIGJ1ZmZlcmVkIGRhdGEuCgkgIDsKCgkgIF9wcm90by5fZ2V0QnVmZmVyID0gZnVuY3Rpb24gX2dldEJ1ZmZlcihuKSB7CgkgICAgdmFyIHJldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuKTsKCSAgICB2YXIgcCA9IHRoaXMuaGVhZDsKCSAgICB2YXIgYyA9IDE7CgkgICAgcC5kYXRhLmNvcHkocmV0KTsKCSAgICBuIC09IHAuZGF0YS5sZW5ndGg7CgoJICAgIHdoaWxlIChwID0gcC5uZXh0KSB7CgkgICAgICB2YXIgYnVmID0gcC5kYXRhOwoJICAgICAgdmFyIG5iID0gbiA+IGJ1Zi5sZW5ndGggPyBidWYubGVuZ3RoIDogbjsKCSAgICAgIGJ1Zi5jb3B5KHJldCwgcmV0Lmxlbmd0aCAtIG4sIDAsIG5iKTsKCSAgICAgIG4gLT0gbmI7CgoJICAgICAgaWYgKG4gPT09IDApIHsKCSAgICAgICAgaWYgKG5iID09PSBidWYubGVuZ3RoKSB7CgkgICAgICAgICAgKytjOwoJICAgICAgICAgIGlmIChwLm5leHQpIHRoaXMuaGVhZCA9IHAubmV4dDtlbHNlIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgdGhpcy5oZWFkID0gcDsKCSAgICAgICAgICBwLmRhdGEgPSBidWYuc2xpY2UobmIpOwoJICAgICAgICB9CgoJICAgICAgICBicmVhazsKCSAgICAgIH0KCgkgICAgICArK2M7CgkgICAgfQoKCSAgICB0aGlzLmxlbmd0aCAtPSBjOwoJICAgIHJldHVybiByZXQ7CgkgIH0gLy8gTWFrZSBzdXJlIHRoZSBsaW5rZWQgbGlzdCBvbmx5IHNob3dzIHRoZSBtaW5pbWFsIG5lY2Vzc2FyeSBpbmZvcm1hdGlvbi4KCSAgOwoKCSAgX3Byb3RvW2N1c3RvbV0gPSBmdW5jdGlvbiAoXywgb3B0aW9ucykgewoJICAgIHJldHVybiBpbnNwZWN0KHRoaXMsIF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHsKCSAgICAgIC8vIE9ubHkgaW5zcGVjdCBvbmUgbGV2ZWwuCgkgICAgICBkZXB0aDogMCwKCSAgICAgIC8vIEl0IHNob3VsZCBub3QgcmVjdXJzZS4KCSAgICAgIGN1c3RvbUluc3BlY3Q6IGZhbHNlCgkgICAgfSkpOwoJICB9OwoKCSAgcmV0dXJuIEJ1ZmZlckxpc3Q7Cgl9KCk7CgoJZnVuY3Rpb24gZGVzdHJveShlcnIsIGNiKSB7CgkgIHZhciBfdGhpcyA9IHRoaXM7CgoJICB2YXIgcmVhZGFibGVEZXN0cm95ZWQgPSB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkOwoJICB2YXIgd3JpdGFibGVEZXN0cm95ZWQgPSB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkOwoKCSAgaWYgKHJlYWRhYmxlRGVzdHJveWVkIHx8IHdyaXRhYmxlRGVzdHJveWVkKSB7CgkgICAgaWYgKGNiKSB7CgkgICAgICBjYihlcnIpOwoJICAgIH0gZWxzZSBpZiAoZXJyKSB7CgkgICAgICBpZiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUpIHsKCSAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0RXJyb3JOVCwgdGhpcywgZXJyKTsKCSAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkKSB7CgkgICAgICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTsKCSAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0RXJyb3JOVCwgdGhpcywgZXJyKTsKCSAgICAgIH0KCSAgICB9CgoJICAgIHJldHVybiB0aGlzOwoJICB9IC8vIHdlIHNldCBkZXN0cm95ZWQgdG8gdHJ1ZSBiZWZvcmUgZmlyaW5nIGVycm9yIGNhbGxiYWNrcyBpbiBvcmRlcgoJICAvLyB0byBtYWtlIGl0IHJlLWVudHJhbmNlIHNhZmUgaW4gY2FzZSBkZXN0cm95KCkgaXMgY2FsbGVkIHdpdGhpbiBjYWxsYmFja3MKCgoJICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSkgewoJICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdHJ1ZTsKCSAgfSAvLyBpZiB0aGlzIGlzIGEgZHVwbGV4IHN0cmVhbSBtYXJrIHRoZSB3cml0YWJsZSBwYXJ0IGFzIGRlc3Ryb3llZCBhcyB3ZWxsCgoKCSAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHsKCSAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7CgkgIH0KCgkgIHRoaXMuX2Rlc3Ryb3koZXJyIHx8IG51bGwsIGZ1bmN0aW9uIChlcnIpIHsKCSAgICBpZiAoIWNiICYmIGVycikgewoJICAgICAgaWYgKCFfdGhpcy5fd3JpdGFibGVTdGF0ZSkgewoJICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRFcnJvckFuZENsb3NlTlQsIF90aGlzLCBlcnIpOwoJICAgICAgfSBlbHNlIGlmICghX3RoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkKSB7CgkgICAgICAgIF90aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7CgkgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdEVycm9yQW5kQ2xvc2VOVCwgX3RoaXMsIGVycik7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRDbG9zZU5ULCBfdGhpcyk7CgkgICAgICB9CgkgICAgfSBlbHNlIGlmIChjYikgewoJICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2VOVCwgX3RoaXMpOwoJICAgICAgY2IoZXJyKTsKCSAgICB9IGVsc2UgewoJICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2VOVCwgX3RoaXMpOwoJICAgIH0KCSAgfSk7CgoJICByZXR1cm4gdGhpczsKCX0KCglmdW5jdGlvbiBlbWl0RXJyb3JBbmRDbG9zZU5UKHNlbGYsIGVycikgewoJICBlbWl0RXJyb3JOVChzZWxmLCBlcnIpOwoJICBlbWl0Q2xvc2VOVChzZWxmKTsKCX0KCglmdW5jdGlvbiBlbWl0Q2xvc2VOVChzZWxmKSB7CgkgIGlmIChzZWxmLl93cml0YWJsZVN0YXRlICYmICFzZWxmLl93cml0YWJsZVN0YXRlLmVtaXRDbG9zZSkgcmV0dXJuOwoJICBpZiAoc2VsZi5fcmVhZGFibGVTdGF0ZSAmJiAhc2VsZi5fcmVhZGFibGVTdGF0ZS5lbWl0Q2xvc2UpIHJldHVybjsKCSAgc2VsZi5lbWl0KCdjbG9zZScpOwoJfQoKCWZ1bmN0aW9uIHVuZGVzdHJveSgpIHsKCSAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHsKCSAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IGZhbHNlOwoJICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUucmVhZGluZyA9IGZhbHNlOwoJICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kZWQgPSBmYWxzZTsKCSAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQgPSBmYWxzZTsKCSAgfQoKCSAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHsKCSAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IGZhbHNlOwoJICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQgPSBmYWxzZTsKCSAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGluZyA9IGZhbHNlOwoJICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZmluYWxDYWxsZWQgPSBmYWxzZTsKCSAgICB0aGlzLl93cml0YWJsZVN0YXRlLnByZWZpbmlzaGVkID0gZmFsc2U7CgkgICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZCA9IGZhbHNlOwoJICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gZmFsc2U7CgkgIH0KCX0KCglmdW5jdGlvbiBlbWl0RXJyb3JOVChzZWxmLCBlcnIpIHsKCSAgc2VsZi5lbWl0KCdlcnJvcicsIGVycik7Cgl9CgoJZnVuY3Rpb24gZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBlcnIpIHsKCSAgLy8gV2UgaGF2ZSB0ZXN0cyB0aGF0IHJlbHkgb24gZXJyb3JzIGJlaW5nIGVtaXR0ZWQKCSAgLy8gaW4gdGhlIHNhbWUgdGljaywgc28gY2hhbmdpbmcgdGhpcyBpcyBzZW12ZXIgbWFqb3IuCgkgIC8vIEZvciBub3cgd2hlbiB5b3Ugb3B0LWluIHRvIGF1dG9EZXN0cm95IHdlIGFsbG93CgkgIC8vIHRoZSBlcnJvciB0byBiZSBlbWl0dGVkIG5leHRUaWNrLiBJbiBhIGZ1dHVyZQoJICAvLyBzZW12ZXIgbWFqb3IgdXBkYXRlIHdlIHNob3VsZCBjaGFuZ2UgdGhlIGRlZmF1bHQgdG8gdGhpcy4KCSAgdmFyIHJTdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKCSAgdmFyIHdTdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTsKCSAgaWYgKHJTdGF0ZSAmJiByU3RhdGUuYXV0b0Rlc3Ryb3kgfHwgd1N0YXRlICYmIHdTdGF0ZS5hdXRvRGVzdHJveSkgc3RyZWFtLmRlc3Ryb3koZXJyKTtlbHNlIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVycik7Cgl9CgoJdmFyIGRlc3Ryb3lfMSA9IHsKCSAgZGVzdHJveTogZGVzdHJveSwKCSAgdW5kZXN0cm95OiB1bmRlc3Ryb3ksCgkgIGVycm9yT3JEZXN0cm95OiBlcnJvck9yRGVzdHJveQoJfTsKCglmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0KCgl2YXIgY29kZXMgPSB7fTsKCglmdW5jdGlvbiBjcmVhdGVFcnJvclR5cGUoY29kZSwgbWVzc2FnZSwgQmFzZSkgewoJICBpZiAoIUJhc2UpIHsKCSAgICBCYXNlID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIGdldE1lc3NhZ2UoYXJnMSwgYXJnMiwgYXJnMykgewoJICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHsKCSAgICAgIHJldHVybiBtZXNzYWdlOwoJICAgIH0gZWxzZSB7CgkgICAgICByZXR1cm4gbWVzc2FnZShhcmcxLCBhcmcyLCBhcmczKTsKCSAgICB9CgkgIH0KCgkgIHZhciBOb2RlRXJyb3IgPQoJICAvKiNfX1BVUkVfXyovCgkgIGZ1bmN0aW9uIChfQmFzZSkgewoJICAgIF9pbmhlcml0c0xvb3NlKE5vZGVFcnJvciwgX0Jhc2UpOwoKCSAgICBmdW5jdGlvbiBOb2RlRXJyb3IoYXJnMSwgYXJnMiwgYXJnMykgewoJICAgICAgcmV0dXJuIF9CYXNlLmNhbGwodGhpcywgZ2V0TWVzc2FnZShhcmcxLCBhcmcyLCBhcmczKSkgfHwgdGhpczsKCSAgICB9CgoJICAgIHJldHVybiBOb2RlRXJyb3I7CgkgIH0oQmFzZSk7CgoJICBOb2RlRXJyb3IucHJvdG90eXBlLm5hbWUgPSBCYXNlLm5hbWU7CgkgIE5vZGVFcnJvci5wcm90b3R5cGUuY29kZSA9IGNvZGU7CgkgIGNvZGVzW2NvZGVdID0gTm9kZUVycm9yOwoJfSAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvYmxvYi92MTAuOC4wL2xpYi9pbnRlcm5hbC9lcnJvcnMuanMKCgoJZnVuY3Rpb24gb25lT2YoZXhwZWN0ZWQsIHRoaW5nKSB7CgkgIGlmIChBcnJheS5pc0FycmF5KGV4cGVjdGVkKSkgewoJICAgIHZhciBsZW4gPSBleHBlY3RlZC5sZW5ndGg7CgkgICAgZXhwZWN0ZWQgPSBleHBlY3RlZC5tYXAoZnVuY3Rpb24gKGkpIHsKCSAgICAgIHJldHVybiBTdHJpbmcoaSk7CgkgICAgfSk7CgoJICAgIGlmIChsZW4gPiAyKSB7CgkgICAgICByZXR1cm4gIm9uZSBvZiAiLmNvbmNhdCh0aGluZywgIiAiKS5jb25jYXQoZXhwZWN0ZWQuc2xpY2UoMCwgbGVuIC0gMSkuam9pbignLCAnKSwgIiwgb3IgIikgKyBleHBlY3RlZFtsZW4gLSAxXTsKCSAgICB9IGVsc2UgaWYgKGxlbiA9PT0gMikgewoJICAgICAgcmV0dXJuICJvbmUgb2YgIi5jb25jYXQodGhpbmcsICIgIikuY29uY2F0KGV4cGVjdGVkWzBdLCAiIG9yICIpLmNvbmNhdChleHBlY3RlZFsxXSk7CgkgICAgfSBlbHNlIHsKCSAgICAgIHJldHVybiAib2YgIi5jb25jYXQodGhpbmcsICIgIikuY29uY2F0KGV4cGVjdGVkWzBdKTsKCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgcmV0dXJuICJvZiAiLmNvbmNhdCh0aGluZywgIiAiKS5jb25jYXQoU3RyaW5nKGV4cGVjdGVkKSk7CgkgIH0KCX0gLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL3N0YXJ0c1dpdGgKCgoJZnVuY3Rpb24gc3RhcnRzV2l0aChzdHIsIHNlYXJjaCwgcG9zKSB7CgkgIHJldHVybiBzdHIuc3Vic3RyKCFwb3MgfHwgcG9zIDwgMCA/IDAgOiArcG9zLCBzZWFyY2gubGVuZ3RoKSA9PT0gc2VhcmNoOwoJfSAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvZW5kc1dpdGgKCgoJZnVuY3Rpb24gZW5kc1dpdGgoc3RyLCBzZWFyY2gsIHRoaXNfbGVuKSB7CgkgIGlmICh0aGlzX2xlbiA9PT0gdW5kZWZpbmVkIHx8IHRoaXNfbGVuID4gc3RyLmxlbmd0aCkgewoJICAgIHRoaXNfbGVuID0gc3RyLmxlbmd0aDsKCSAgfQoKCSAgcmV0dXJuIHN0ci5zdWJzdHJpbmcodGhpc19sZW4gLSBzZWFyY2gubGVuZ3RoLCB0aGlzX2xlbikgPT09IHNlYXJjaDsKCX0gLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL2luY2x1ZGVzCgoKCWZ1bmN0aW9uIGluY2x1ZGVzKHN0ciwgc2VhcmNoLCBzdGFydCkgewoJICBpZiAodHlwZW9mIHN0YXJ0ICE9PSAnbnVtYmVyJykgewoJICAgIHN0YXJ0ID0gMDsKCSAgfQoKCSAgaWYgKHN0YXJ0ICsgc2VhcmNoLmxlbmd0aCA+IHN0ci5sZW5ndGgpIHsKCSAgICByZXR1cm4gZmFsc2U7CgkgIH0gZWxzZSB7CgkgICAgcmV0dXJuIHN0ci5pbmRleE9mKHNlYXJjaCwgc3RhcnQpICE9PSAtMTsKCSAgfQoJfQoKCWNyZWF0ZUVycm9yVHlwZSgnRVJSX0lOVkFMSURfT1BUX1ZBTFVFJywgZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CgkgIHJldHVybiAnVGhlIHZhbHVlICInICsgdmFsdWUgKyAnIiBpcyBpbnZhbGlkIGZvciBvcHRpb24gIicgKyBuYW1lICsgJyInOwoJfSwgVHlwZUVycm9yKTsKCWNyZWF0ZUVycm9yVHlwZSgnRVJSX0lOVkFMSURfQVJHX1RZUEUnLCBmdW5jdGlvbiAobmFtZSwgZXhwZWN0ZWQsIGFjdHVhbCkgewoJICAvLyBkZXRlcm1pbmVyOiAnbXVzdCBiZScgb3IgJ211c3Qgbm90IGJlJwoJICB2YXIgZGV0ZXJtaW5lcjsKCgkgIGlmICh0eXBlb2YgZXhwZWN0ZWQgPT09ICdzdHJpbmcnICYmIHN0YXJ0c1dpdGgoZXhwZWN0ZWQsICdub3QgJykpIHsKCSAgICBkZXRlcm1pbmVyID0gJ211c3Qgbm90IGJlJzsKCSAgICBleHBlY3RlZCA9IGV4cGVjdGVkLnJlcGxhY2UoL15ub3QgLywgJycpOwoJICB9IGVsc2UgewoJICAgIGRldGVybWluZXIgPSAnbXVzdCBiZSc7CgkgIH0KCgkgIHZhciBtc2c7CgoJICBpZiAoZW5kc1dpdGgobmFtZSwgJyBhcmd1bWVudCcpKSB7CgkgICAgLy8gRm9yIGNhc2VzIGxpa2UgJ2ZpcnN0IGFyZ3VtZW50JwoJICAgIG1zZyA9ICJUaGUgIi5jb25jYXQobmFtZSwgIiAiKS5jb25jYXQoZGV0ZXJtaW5lciwgIiAiKS5jb25jYXQob25lT2YoZXhwZWN0ZWQsICd0eXBlJykpOwoJICB9IGVsc2UgewoJICAgIHZhciB0eXBlID0gaW5jbHVkZXMobmFtZSwgJy4nKSA/ICdwcm9wZXJ0eScgOiAnYXJndW1lbnQnOwoJICAgIG1zZyA9ICJUaGUgXCIiLmNvbmNhdChuYW1lLCAiXCIgIikuY29uY2F0KHR5cGUsICIgIikuY29uY2F0KGRldGVybWluZXIsICIgIikuY29uY2F0KG9uZU9mKGV4cGVjdGVkLCAndHlwZScpKTsKCSAgfQoKCSAgbXNnICs9ICIuIFJlY2VpdmVkIHR5cGUgIi5jb25jYXQodHlwZW9mIGFjdHVhbCk7CgkgIHJldHVybiBtc2c7Cgl9LCBUeXBlRXJyb3IpOwoJY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX1BVU0hfQUZURVJfRU9GJywgJ3N0cmVhbS5wdXNoKCkgYWZ0ZXIgRU9GJyk7CgljcmVhdGVFcnJvclR5cGUoJ0VSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEJywgZnVuY3Rpb24gKG5hbWUpIHsKCSAgcmV0dXJuICdUaGUgJyArIG5hbWUgKyAnIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQnOwoJfSk7CgljcmVhdGVFcnJvclR5cGUoJ0VSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFJywgJ1ByZW1hdHVyZSBjbG9zZScpOwoJY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX0RFU1RST1lFRCcsIGZ1bmN0aW9uIChuYW1lKSB7CgkgIHJldHVybiAnQ2Fubm90IGNhbGwgJyArIG5hbWUgKyAnIGFmdGVyIGEgc3RyZWFtIHdhcyBkZXN0cm95ZWQnOwoJfSk7CgljcmVhdGVFcnJvclR5cGUoJ0VSUl9NVUxUSVBMRV9DQUxMQkFDSycsICdDYWxsYmFjayBjYWxsZWQgbXVsdGlwbGUgdGltZXMnKTsKCWNyZWF0ZUVycm9yVHlwZSgnRVJSX1NUUkVBTV9DQU5OT1RfUElQRScsICdDYW5ub3QgcGlwZSwgbm90IHJlYWRhYmxlJyk7CgljcmVhdGVFcnJvclR5cGUoJ0VSUl9TVFJFQU1fV1JJVEVfQUZURVJfRU5EJywgJ3dyaXRlIGFmdGVyIGVuZCcpOwoJY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX05VTExfVkFMVUVTJywgJ01heSBub3Qgd3JpdGUgbnVsbCB2YWx1ZXMgdG8gc3RyZWFtJywgVHlwZUVycm9yKTsKCWNyZWF0ZUVycm9yVHlwZSgnRVJSX1VOS05PV05fRU5DT0RJTkcnLCBmdW5jdGlvbiAoYXJnKSB7CgkgIHJldHVybiAnVW5rbm93biBlbmNvZGluZzogJyArIGFyZzsKCX0sIFR5cGVFcnJvcik7CgljcmVhdGVFcnJvclR5cGUoJ0VSUl9TVFJFQU1fVU5TSElGVF9BRlRFUl9FTkRfRVZFTlQnLCAnc3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnQnKTsKCXZhciBjb2Rlc18xID0gY29kZXM7CgoJdmFyIGVycm9yc0Jyb3dzZXIgPSB7CgkJY29kZXM6IGNvZGVzXzEKCX07CgoJdmFyIEVSUl9JTlZBTElEX09QVF9WQUxVRSA9IGVycm9yc0Jyb3dzZXIuY29kZXMuRVJSX0lOVkFMSURfT1BUX1ZBTFVFOwoKCWZ1bmN0aW9uIGhpZ2hXYXRlck1hcmtGcm9tKG9wdGlvbnMsIGlzRHVwbGV4LCBkdXBsZXhLZXkpIHsKCSAgcmV0dXJuIG9wdGlvbnMuaGlnaFdhdGVyTWFyayAhPSBudWxsID8gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrIDogaXNEdXBsZXggPyBvcHRpb25zW2R1cGxleEtleV0gOiBudWxsOwoJfQoKCWZ1bmN0aW9uIGdldEhpZ2hXYXRlck1hcmsoc3RhdGUsIG9wdGlvbnMsIGR1cGxleEtleSwgaXNEdXBsZXgpIHsKCSAgdmFyIGh3bSA9IGhpZ2hXYXRlck1hcmtGcm9tKG9wdGlvbnMsIGlzRHVwbGV4LCBkdXBsZXhLZXkpOwoKCSAgaWYgKGh3bSAhPSBudWxsKSB7CgkgICAgaWYgKCEoaXNGaW5pdGUoaHdtKSAmJiBNYXRoLmZsb29yKGh3bSkgPT09IGh3bSkgfHwgaHdtIDwgMCkgewoJICAgICAgdmFyIG5hbWUgPSBpc0R1cGxleCA/IGR1cGxleEtleSA6ICdoaWdoV2F0ZXJNYXJrJzsKCSAgICAgIHRocm93IG5ldyBFUlJfSU5WQUxJRF9PUFRfVkFMVUUobmFtZSwgaHdtKTsKCSAgICB9CgoJICAgIHJldHVybiBNYXRoLmZsb29yKGh3bSk7CgkgIH0gLy8gRGVmYXVsdCB2YWx1ZQoKCgkgIHJldHVybiBzdGF0ZS5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7Cgl9CgoJdmFyIHN0YXRlID0gewoJICBnZXRIaWdoV2F0ZXJNYXJrOiBnZXRIaWdoV2F0ZXJNYXJrCgl9OwoKCXZhciBpbmhlcml0c19icm93c2VyID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSkgewoJaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7CgkgIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlCgkgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7CgkgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3I7CgkgICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHsKCSAgICAgIGNvbnN0cnVjdG9yOiB7CgkgICAgICAgIHZhbHVlOiBjdG9yLAoJICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKCSAgICAgICAgd3JpdGFibGU6IHRydWUsCgkgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQoJICAgICAgfQoJICAgIH0pOwoJICB9OwoJfSBlbHNlIHsKCSAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnMKCSAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHsKCSAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvcjsKCSAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fTsKCSAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlOwoJICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKCk7CgkgICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yOwoJICB9OwoJfQoJfSwgIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL2luaGVyaXRzIik7CgoJLyogZXNsaW50LWRpc2FibGUgbm9kZS9uby1kZXByZWNhdGVkLWFwaSAqLwoKCXZhciBzYWZlQnVmZmVyID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewoJdmFyIEJ1ZmZlciA9IGJ1ZmZlci5CdWZmZXI7CgoJLy8gYWx0ZXJuYXRpdmUgdG8gdXNpbmcgT2JqZWN0LmtleXMgZm9yIG9sZCBicm93c2VycwoJZnVuY3Rpb24gY29weVByb3BzIChzcmMsIGRzdCkgewoJICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7CgkgICAgZHN0W2tleV0gPSBzcmNba2V5XTsKCSAgfQoJfQoJaWYgKEJ1ZmZlci5mcm9tICYmIEJ1ZmZlci5hbGxvYyAmJiBCdWZmZXIuYWxsb2NVbnNhZmUgJiYgQnVmZmVyLmFsbG9jVW5zYWZlU2xvdykgewoJICBtb2R1bGUuZXhwb3J0cyA9IGJ1ZmZlcjsKCX0gZWxzZSB7CgkgIC8vIENvcHkgcHJvcGVydGllcyBmcm9tIHJlcXVpcmUoJ2J1ZmZlcicpCgkgIGNvcHlQcm9wcyhidWZmZXIsIGV4cG9ydHMpOwoJICBleHBvcnRzLkJ1ZmZlciA9IFNhZmVCdWZmZXI7Cgl9CgoJZnVuY3Rpb24gU2FmZUJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgcmV0dXJuIEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKCX0KCgkvLyBDb3B5IHN0YXRpYyBtZXRob2RzIGZyb20gQnVmZmVyCgljb3B5UHJvcHMoQnVmZmVyLCBTYWZlQnVmZmVyKTsKCglTYWZlQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKQoJICB9CgkgIHJldHVybiBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCgl9OwoKCVNhZmVCdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKCSAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKQoJICB9CgkgIHZhciBidWYgPSBCdWZmZXIoc2l6ZSk7CgkgIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHsKCSAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJykgewoJICAgICAgYnVmLmZpbGwoZmlsbCwgZW5jb2RpbmcpOwoJICAgIH0gZWxzZSB7CgkgICAgICBidWYuZmlsbChmaWxsKTsKCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgYnVmLmZpbGwoMCk7CgkgIH0KCSAgcmV0dXJuIGJ1ZgoJfTsKCglTYWZlQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHsKCSAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKQoJICB9CgkgIHJldHVybiBCdWZmZXIoc2l6ZSkKCX07CgoJU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkgewoJICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpCgkgIH0KCSAgcmV0dXJuIGJ1ZmZlci5TbG93QnVmZmVyKHNpemUpCgl9OwoJfSwgIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL3NhZmUtYnVmZmVyIik7CgoJLyo8cmVwbGFjZW1lbnQ+Ki8KCgl2YXIgQnVmZmVyJDEgPSBzYWZlQnVmZmVyLkJ1ZmZlcjsKCS8qPC9yZXBsYWNlbWVudD4qLwoKCXZhciBpc0VuY29kaW5nID0gQnVmZmVyJDEuaXNFbmNvZGluZyB8fCBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgZW5jb2RpbmcgPSAnJyArIGVuY29kaW5nOwoJICBzd2l0Y2ggKGVuY29kaW5nICYmIGVuY29kaW5nLnRvTG93ZXJDYXNlKCkpIHsKCSAgICBjYXNlICdoZXgnOmNhc2UgJ3V0ZjgnOmNhc2UgJ3V0Zi04JzpjYXNlICdhc2NpaSc6Y2FzZSAnYmluYXJ5JzpjYXNlICdiYXNlNjQnOmNhc2UgJ3VjczInOmNhc2UgJ3Vjcy0yJzpjYXNlICd1dGYxNmxlJzpjYXNlICd1dGYtMTZsZSc6Y2FzZSAncmF3JzoKCSAgICAgIHJldHVybiB0cnVlOwoJICAgIGRlZmF1bHQ6CgkgICAgICByZXR1cm4gZmFsc2U7CgkgIH0KCX07CgoJZnVuY3Rpb24gX25vcm1hbGl6ZUVuY29kaW5nKGVuYykgewoJICBpZiAoIWVuYykgcmV0dXJuICd1dGY4JzsKCSAgdmFyIHJldHJpZWQ7CgkgIHdoaWxlICh0cnVlKSB7CgkgICAgc3dpdGNoIChlbmMpIHsKCSAgICAgIGNhc2UgJ3V0ZjgnOgoJICAgICAgY2FzZSAndXRmLTgnOgoJICAgICAgICByZXR1cm4gJ3V0ZjgnOwoJICAgICAgY2FzZSAndWNzMic6CgkgICAgICBjYXNlICd1Y3MtMic6CgkgICAgICBjYXNlICd1dGYxNmxlJzoKCSAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKCSAgICAgICAgcmV0dXJuICd1dGYxNmxlJzsKCSAgICAgIGNhc2UgJ2xhdGluMSc6CgkgICAgICBjYXNlICdiaW5hcnknOgoJICAgICAgICByZXR1cm4gJ2xhdGluMSc7CgkgICAgICBjYXNlICdiYXNlNjQnOgoJICAgICAgY2FzZSAnYXNjaWknOgoJICAgICAgY2FzZSAnaGV4JzoKCSAgICAgICAgcmV0dXJuIGVuYzsKCSAgICAgIGRlZmF1bHQ6CgkgICAgICAgIGlmIChyZXRyaWVkKSByZXR1cm47IC8vIHVuZGVmaW5lZAoJICAgICAgICBlbmMgPSAoJycgKyBlbmMpLnRvTG93ZXJDYXNlKCk7CgkgICAgICAgIHJldHJpZWQgPSB0cnVlOwoJICAgIH0KCSAgfQoJfQoJLy8gRG8gbm90IGNhY2hlIGBCdWZmZXIuaXNFbmNvZGluZ2Agd2hlbiBjaGVja2luZyBlbmNvZGluZyBuYW1lcyBhcyBzb21lCgkvLyBtb2R1bGVzIG1vbmtleS1wYXRjaCBpdCB0byBzdXBwb3J0IGFkZGl0aW9uYWwgZW5jb2RpbmdzCglmdW5jdGlvbiBub3JtYWxpemVFbmNvZGluZyhlbmMpIHsKCSAgdmFyIG5lbmMgPSBfbm9ybWFsaXplRW5jb2RpbmcoZW5jKTsKCSAgaWYgKHR5cGVvZiBuZW5jICE9PSAnc3RyaW5nJyAmJiAoQnVmZmVyJDEuaXNFbmNvZGluZyA9PT0gaXNFbmNvZGluZyB8fCAhaXNFbmNvZGluZyhlbmMpKSkgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jKTsKCSAgcmV0dXJuIG5lbmMgfHwgZW5jOwoJfQoKCS8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2YKCS8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZQoJLy8gY2hhcmFjdGVycy4KCXZhciBTdHJpbmdEZWNvZGVyXzEgPSBTdHJpbmdEZWNvZGVyOwoJZnVuY3Rpb24gU3RyaW5nRGVjb2RlcihlbmNvZGluZykgewoJICB0aGlzLmVuY29kaW5nID0gbm9ybWFsaXplRW5jb2RpbmcoZW5jb2RpbmcpOwoJICB2YXIgbmI7CgkgIHN3aXRjaCAodGhpcy5lbmNvZGluZykgewoJICAgIGNhc2UgJ3V0ZjE2bGUnOgoJICAgICAgdGhpcy50ZXh0ID0gdXRmMTZUZXh0OwoJICAgICAgdGhpcy5lbmQgPSB1dGYxNkVuZDsKCSAgICAgIG5iID0gNDsKCSAgICAgIGJyZWFrOwoJICAgIGNhc2UgJ3V0ZjgnOgoJICAgICAgdGhpcy5maWxsTGFzdCA9IHV0ZjhGaWxsTGFzdDsKCSAgICAgIG5iID0gNDsKCSAgICAgIGJyZWFrOwoJICAgIGNhc2UgJ2Jhc2U2NCc6CgkgICAgICB0aGlzLnRleHQgPSBiYXNlNjRUZXh0OwoJICAgICAgdGhpcy5lbmQgPSBiYXNlNjRFbmQ7CgkgICAgICBuYiA9IDM7CgkgICAgICBicmVhazsKCSAgICBkZWZhdWx0OgoJICAgICAgdGhpcy53cml0ZSA9IHNpbXBsZVdyaXRlOwoJICAgICAgdGhpcy5lbmQgPSBzaW1wbGVFbmQ7CgkgICAgICByZXR1cm47CgkgIH0KCSAgdGhpcy5sYXN0TmVlZCA9IDA7CgkgIHRoaXMubGFzdFRvdGFsID0gMDsKCSAgdGhpcy5sYXN0Q2hhciA9IEJ1ZmZlciQxLmFsbG9jVW5zYWZlKG5iKTsKCX0KCglTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChidWYpIHsKCSAgaWYgKGJ1Zi5sZW5ndGggPT09IDApIHJldHVybiAnJzsKCSAgdmFyIHI7CgkgIHZhciBpOwoJICBpZiAodGhpcy5sYXN0TmVlZCkgewoJICAgIHIgPSB0aGlzLmZpbGxMYXN0KGJ1Zik7CgkgICAgaWYgKHIgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnOwoJICAgIGkgPSB0aGlzLmxhc3ROZWVkOwoJICAgIHRoaXMubGFzdE5lZWQgPSAwOwoJICB9IGVsc2UgewoJICAgIGkgPSAwOwoJICB9CgkgIGlmIChpIDwgYnVmLmxlbmd0aCkgcmV0dXJuIHIgPyByICsgdGhpcy50ZXh0KGJ1ZiwgaSkgOiB0aGlzLnRleHQoYnVmLCBpKTsKCSAgcmV0dXJuIHIgfHwgJyc7Cgl9OwoKCVN0cmluZ0RlY29kZXIucHJvdG90eXBlLmVuZCA9IHV0ZjhFbmQ7CgoJLy8gUmV0dXJucyBvbmx5IGNvbXBsZXRlIGNoYXJhY3RlcnMgaW4gYSBCdWZmZXIKCVN0cmluZ0RlY29kZXIucHJvdG90eXBlLnRleHQgPSB1dGY4VGV4dDsKCgkvLyBBdHRlbXB0cyB0byBjb21wbGV0ZSBhIHBhcnRpYWwgbm9uLVVURi04IGNoYXJhY3RlciB1c2luZyBieXRlcyBmcm9tIGEgQnVmZmVyCglTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5maWxsTGFzdCA9IGZ1bmN0aW9uIChidWYpIHsKCSAgaWYgKHRoaXMubGFzdE5lZWQgPD0gYnVmLmxlbmd0aCkgewoJICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgdGhpcy5sYXN0TmVlZCk7CgkgICAgcmV0dXJuIHRoaXMubGFzdENoYXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywgMCwgdGhpcy5sYXN0VG90YWwpOwoJICB9CgkgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgYnVmLmxlbmd0aCk7CgkgIHRoaXMubGFzdE5lZWQgLT0gYnVmLmxlbmd0aDsKCX07CgoJLy8gQ2hlY2tzIHRoZSB0eXBlIG9mIGEgVVRGLTggYnl0ZSwgd2hldGhlciBpdCdzIEFTQ0lJLCBhIGxlYWRpbmcgYnl0ZSwgb3IgYQoJLy8gY29udGludWF0aW9uIGJ5dGUuIElmIGFuIGludmFsaWQgYnl0ZSBpcyBkZXRlY3RlZCwgLTIgaXMgcmV0dXJuZWQuCglmdW5jdGlvbiB1dGY4Q2hlY2tCeXRlKGJ5dGUpIHsKCSAgaWYgKGJ5dGUgPD0gMHg3RikgcmV0dXJuIDA7ZWxzZSBpZiAoYnl0ZSA+PiA1ID09PSAweDA2KSByZXR1cm4gMjtlbHNlIGlmIChieXRlID4+IDQgPT09IDB4MEUpIHJldHVybiAzO2Vsc2UgaWYgKGJ5dGUgPj4gMyA9PT0gMHgxRSkgcmV0dXJuIDQ7CgkgIHJldHVybiBieXRlID4+IDYgPT09IDB4MDIgPyAtMSA6IC0yOwoJfQoKCS8vIENoZWNrcyBhdCBtb3N0IDMgYnl0ZXMgYXQgdGhlIGVuZCBvZiBhIEJ1ZmZlciBpbiBvcmRlciB0byBkZXRlY3QgYW4KCS8vIGluY29tcGxldGUgbXVsdGktYnl0ZSBVVEYtOCBjaGFyYWN0ZXIuIFRoZSB0b3RhbCBudW1iZXIgb2YgYnl0ZXMgKDIsIDMsIG9yIDQpCgkvLyBuZWVkZWQgdG8gY29tcGxldGUgdGhlIFVURi04IGNoYXJhY3RlciAoaWYgYXBwbGljYWJsZSkgYXJlIHJldHVybmVkLgoJZnVuY3Rpb24gdXRmOENoZWNrSW5jb21wbGV0ZShzZWxmLCBidWYsIGkpIHsKCSAgdmFyIGogPSBidWYubGVuZ3RoIC0gMTsKCSAgaWYgKGogPCBpKSByZXR1cm4gMDsKCSAgdmFyIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pOwoJICBpZiAobmIgPj0gMCkgewoJICAgIGlmIChuYiA+IDApIHNlbGYubGFzdE5lZWQgPSBuYiAtIDE7CgkgICAgcmV0dXJuIG5iOwoJICB9CgkgIGlmICgtLWogPCBpIHx8IG5iID09PSAtMikgcmV0dXJuIDA7CgkgIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pOwoJICBpZiAobmIgPj0gMCkgewoJICAgIGlmIChuYiA+IDApIHNlbGYubGFzdE5lZWQgPSBuYiAtIDI7CgkgICAgcmV0dXJuIG5iOwoJICB9CgkgIGlmICgtLWogPCBpIHx8IG5iID09PSAtMikgcmV0dXJuIDA7CgkgIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pOwoJICBpZiAobmIgPj0gMCkgewoJICAgIGlmIChuYiA+IDApIHsKCSAgICAgIGlmIChuYiA9PT0gMikgbmIgPSAwO2Vsc2Ugc2VsZi5sYXN0TmVlZCA9IG5iIC0gMzsKCSAgICB9CgkgICAgcmV0dXJuIG5iOwoJICB9CgkgIHJldHVybiAwOwoJfQoKCS8vIFZhbGlkYXRlcyBhcyBtYW55IGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3RlciBhcwoJLy8gbmVlZGVkIG9yIGFyZSBhdmFpbGFibGUuIElmIHdlIHNlZSBhIG5vbi1jb250aW51YXRpb24gYnl0ZSB3aGVyZSB3ZSBleHBlY3QKCS8vIG9uZSwgd2UgInJlcGxhY2UiIHRoZSB2YWxpZGF0ZWQgY29udGludWF0aW9uIGJ5dGVzIHdlJ3ZlIHNlZW4gc28gZmFyIHdpdGgKCS8vIGEgc2luZ2xlIFVURi04IHJlcGxhY2VtZW50IGNoYXJhY3RlciAoJ1x1ZmZmZCcpLCB0byBtYXRjaCB2OCdzIFVURi04IGRlY29kaW5nCgkvLyBiZWhhdmlvci4gVGhlIGNvbnRpbnVhdGlvbiBieXRlIGNoZWNrIGlzIGluY2x1ZGVkIHRocmVlIHRpbWVzIGluIHRoZSBjYXNlCgkvLyB3aGVyZSBhbGwgb2YgdGhlIGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBjaGFyYWN0ZXIgZXhpc3QgaW4gdGhlIHNhbWUgYnVmZmVyLgoJLy8gSXQgaXMgYWxzbyBkb25lIHRoaXMgd2F5IGFzIGEgc2xpZ2h0IHBlcmZvcm1hbmNlIGluY3JlYXNlIGluc3RlYWQgb2YgdXNpbmcgYQoJLy8gbG9vcC4KCWZ1bmN0aW9uIHV0ZjhDaGVja0V4dHJhQnl0ZXMoc2VsZiwgYnVmLCBwKSB7CgkgIGlmICgoYnVmWzBdICYgMHhDMCkgIT09IDB4ODApIHsKCSAgICBzZWxmLmxhc3ROZWVkID0gMDsKCSAgICByZXR1cm4gJ1x1ZmZmZCc7CgkgIH0KCSAgaWYgKHNlbGYubGFzdE5lZWQgPiAxICYmIGJ1Zi5sZW5ndGggPiAxKSB7CgkgICAgaWYgKChidWZbMV0gJiAweEMwKSAhPT0gMHg4MCkgewoJICAgICAgc2VsZi5sYXN0TmVlZCA9IDE7CgkgICAgICByZXR1cm4gJ1x1ZmZmZCc7CgkgICAgfQoJICAgIGlmIChzZWxmLmxhc3ROZWVkID4gMiAmJiBidWYubGVuZ3RoID4gMikgewoJICAgICAgaWYgKChidWZbMl0gJiAweEMwKSAhPT0gMHg4MCkgewoJICAgICAgICBzZWxmLmxhc3ROZWVkID0gMjsKCSAgICAgICAgcmV0dXJuICdcdWZmZmQnOwoJICAgICAgfQoJICAgIH0KCSAgfQoJfQoKCS8vIEF0dGVtcHRzIHRvIGNvbXBsZXRlIGEgbXVsdGktYnl0ZSBVVEYtOCBjaGFyYWN0ZXIgdXNpbmcgYnl0ZXMgZnJvbSBhIEJ1ZmZlci4KCWZ1bmN0aW9uIHV0ZjhGaWxsTGFzdChidWYpIHsKCSAgdmFyIHAgPSB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQ7CgkgIHZhciByID0gdXRmOENoZWNrRXh0cmFCeXRlcyh0aGlzLCBidWYpOwoJICBpZiAociAhPT0gdW5kZWZpbmVkKSByZXR1cm4gcjsKCSAgaWYgKHRoaXMubGFzdE5lZWQgPD0gYnVmLmxlbmd0aCkgewoJICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHAsIDAsIHRoaXMubGFzdE5lZWQpOwoJICAgIHJldHVybiB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsIDAsIHRoaXMubGFzdFRvdGFsKTsKCSAgfQoJICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCBwLCAwLCBidWYubGVuZ3RoKTsKCSAgdGhpcy5sYXN0TmVlZCAtPSBidWYubGVuZ3RoOwoJfQoKCS8vIFJldHVybnMgYWxsIGNvbXBsZXRlIFVURi04IGNoYXJhY3RlcnMgaW4gYSBCdWZmZXIuIElmIHRoZSBCdWZmZXIgZW5kZWQgb24gYQoJLy8gcGFydGlhbCBjaGFyYWN0ZXIsIHRoZSBjaGFyYWN0ZXIncyBieXRlcyBhcmUgYnVmZmVyZWQgdW50aWwgdGhlIHJlcXVpcmVkCgkvLyBudW1iZXIgb2YgYnl0ZXMgYXJlIGF2YWlsYWJsZS4KCWZ1bmN0aW9uIHV0ZjhUZXh0KGJ1ZiwgaSkgewoJICB2YXIgdG90YWwgPSB1dGY4Q2hlY2tJbmNvbXBsZXRlKHRoaXMsIGJ1ZiwgaSk7CgkgIGlmICghdGhpcy5sYXN0TmVlZCkgcmV0dXJuIGJ1Zi50b1N0cmluZygndXRmOCcsIGkpOwoJICB0aGlzLmxhc3RUb3RhbCA9IHRvdGFsOwoJICB2YXIgZW5kID0gYnVmLmxlbmd0aCAtICh0b3RhbCAtIHRoaXMubGFzdE5lZWQpOwoJICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCAwLCBlbmQpOwoJICByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGY4JywgaSwgZW5kKTsKCX0KCgkvLyBGb3IgVVRGLTgsIGEgcmVwbGFjZW1lbnQgY2hhcmFjdGVyIGlzIGFkZGVkIHdoZW4gZW5kaW5nIG9uIGEgcGFydGlhbAoJLy8gY2hhcmFjdGVyLgoJZnVuY3Rpb24gdXRmOEVuZChidWYpIHsKCSAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnOwoJICBpZiAodGhpcy5sYXN0TmVlZCkgcmV0dXJuIHIgKyAnXHVmZmZkJzsKCSAgcmV0dXJuIHI7Cgl9CgoJLy8gVVRGLTE2TEUgdHlwaWNhbGx5IG5lZWRzIHR3byBieXRlcyBwZXIgY2hhcmFjdGVyLCBidXQgZXZlbiBpZiB3ZSBoYXZlIGFuIGV2ZW4KCS8vIG51bWJlciBvZiBieXRlcyBhdmFpbGFibGUsIHdlIG5lZWQgdG8gY2hlY2sgaWYgd2UgZW5kIG9uIGEgbGVhZGluZy9oaWdoCgkvLyBzdXJyb2dhdGUuIEluIHRoYXQgY2FzZSwgd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgbmV4dCB0d28gYnl0ZXMgaW4gb3JkZXIgdG8KCS8vIGRlY29kZSB0aGUgbGFzdCBjaGFyYWN0ZXIgcHJvcGVybHkuCglmdW5jdGlvbiB1dGYxNlRleHQoYnVmLCBpKSB7CgkgIGlmICgoYnVmLmxlbmd0aCAtIGkpICUgMiA9PT0gMCkgewoJICAgIHZhciByID0gYnVmLnRvU3RyaW5nKCd1dGYxNmxlJywgaSk7CgkgICAgaWYgKHIpIHsKCSAgICAgIHZhciBjID0gci5jaGFyQ29kZUF0KHIubGVuZ3RoIC0gMSk7CgkgICAgICBpZiAoYyA+PSAweEQ4MDAgJiYgYyA8PSAweERCRkYpIHsKCSAgICAgICAgdGhpcy5sYXN0TmVlZCA9IDI7CgkgICAgICAgIHRoaXMubGFzdFRvdGFsID0gNDsKCSAgICAgICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMl07CgkgICAgICAgIHRoaXMubGFzdENoYXJbMV0gPSBidWZbYnVmLmxlbmd0aCAtIDFdOwoJICAgICAgICByZXR1cm4gci5zbGljZSgwLCAtMSk7CgkgICAgICB9CgkgICAgfQoJICAgIHJldHVybiByOwoJICB9CgkgIHRoaXMubGFzdE5lZWQgPSAxOwoJICB0aGlzLmxhc3RUb3RhbCA9IDI7CgkgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDFdOwoJICByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGYxNmxlJywgaSwgYnVmLmxlbmd0aCAtIDEpOwoJfQoKCS8vIEZvciBVVEYtMTZMRSB3ZSBkbyBub3QgZXhwbGljaXRseSBhcHBlbmQgc3BlY2lhbCByZXBsYWNlbWVudCBjaGFyYWN0ZXJzIGlmIHdlCgkvLyBlbmQgb24gYSBwYXJ0aWFsIGNoYXJhY3Rlciwgd2Ugc2ltcGx5IGxldCB2OCBoYW5kbGUgdGhhdC4KCWZ1bmN0aW9uIHV0ZjE2RW5kKGJ1ZikgewoJICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7CgkgIGlmICh0aGlzLmxhc3ROZWVkKSB7CgkgICAgdmFyIGVuZCA9IHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZDsKCSAgICByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoJ3V0ZjE2bGUnLCAwLCBlbmQpOwoJICB9CgkgIHJldHVybiByOwoJfQoKCWZ1bmN0aW9uIGJhc2U2NFRleHQoYnVmLCBpKSB7CgkgIHZhciBuID0gKGJ1Zi5sZW5ndGggLSBpKSAlIDM7CgkgIGlmIChuID09PSAwKSByZXR1cm4gYnVmLnRvU3RyaW5nKCdiYXNlNjQnLCBpKTsKCSAgdGhpcy5sYXN0TmVlZCA9IDMgLSBuOwoJICB0aGlzLmxhc3RUb3RhbCA9IDM7CgkgIGlmIChuID09PSAxKSB7CgkgICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07CgkgIH0gZWxzZSB7CgkgICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMl07CgkgICAgdGhpcy5sYXN0Q2hhclsxXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07CgkgIH0KCSAgcmV0dXJuIGJ1Zi50b1N0cmluZygnYmFzZTY0JywgaSwgYnVmLmxlbmd0aCAtIG4pOwoJfQoKCWZ1bmN0aW9uIGJhc2U2NEVuZChidWYpIHsKCSAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnOwoJICBpZiAodGhpcy5sYXN0TmVlZCkgcmV0dXJuIHIgKyB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKCdiYXNlNjQnLCAwLCAzIC0gdGhpcy5sYXN0TmVlZCk7CgkgIHJldHVybiByOwoJfQoKCS8vIFBhc3MgYnl0ZXMgb24gdGhyb3VnaCBmb3Igc2luZ2xlLWJ5dGUgZW5jb2RpbmdzIChlLmcuIGFzY2lpLCBsYXRpbjEsIGhleCkKCWZ1bmN0aW9uIHNpbXBsZVdyaXRlKGJ1ZikgewoJICByZXR1cm4gYnVmLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpOwoJfQoKCWZ1bmN0aW9uIHNpbXBsZUVuZChidWYpIHsKCSAgcmV0dXJuIGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7Cgl9CgoJdmFyIHN0cmluZ19kZWNvZGVyID0gewoJCVN0cmluZ0RlY29kZXI6IFN0cmluZ0RlY29kZXJfMQoJfTsKCgl2YXIgRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0UgPSBlcnJvcnNCcm93c2VyLmNvZGVzLkVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFOwoKCWZ1bmN0aW9uIG9uY2UkMShjYWxsYmFjaykgewoJICB2YXIgY2FsbGVkID0gZmFsc2U7CgkgIHJldHVybiBmdW5jdGlvbiAoKSB7CgkgICAgaWYgKGNhbGxlZCkgcmV0dXJuOwoJICAgIGNhbGxlZCA9IHRydWU7CgoJICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewoJICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKCSAgICB9CgoJICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpOwoJICB9OwoJfQoKCWZ1bmN0aW9uIG5vb3AoKSB7fQoKCWZ1bmN0aW9uIGlzUmVxdWVzdChzdHJlYW0pIHsKCSAgcmV0dXJuIHN0cmVhbS5zZXRIZWFkZXIgJiYgdHlwZW9mIHN0cmVhbS5hYm9ydCA9PT0gJ2Z1bmN0aW9uJzsKCX0KCglmdW5jdGlvbiBlb3Moc3RyZWFtLCBvcHRzLCBjYWxsYmFjaykgewoJICBpZiAodHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbicpIHJldHVybiBlb3Moc3RyZWFtLCBudWxsLCBvcHRzKTsKCSAgaWYgKCFvcHRzKSBvcHRzID0ge307CgkgIGNhbGxiYWNrID0gb25jZSQxKGNhbGxiYWNrIHx8IG5vb3ApOwoJICB2YXIgcmVhZGFibGUgPSBvcHRzLnJlYWRhYmxlIHx8IG9wdHMucmVhZGFibGUgIT09IGZhbHNlICYmIHN0cmVhbS5yZWFkYWJsZTsKCSAgdmFyIHdyaXRhYmxlID0gb3B0cy53cml0YWJsZSB8fCBvcHRzLndyaXRhYmxlICE9PSBmYWxzZSAmJiBzdHJlYW0ud3JpdGFibGU7CgoJICB2YXIgb25sZWdhY3lmaW5pc2ggPSBmdW5jdGlvbiBvbmxlZ2FjeWZpbmlzaCgpIHsKCSAgICBpZiAoIXN0cmVhbS53cml0YWJsZSkgb25maW5pc2goKTsKCSAgfTsKCgkgIHZhciB3cml0YWJsZUVuZGVkID0gc3RyZWFtLl93cml0YWJsZVN0YXRlICYmIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZDsKCgkgIHZhciBvbmZpbmlzaCA9IGZ1bmN0aW9uIG9uZmluaXNoKCkgewoJICAgIHdyaXRhYmxlID0gZmFsc2U7CgkgICAgd3JpdGFibGVFbmRlZCA9IHRydWU7CgkgICAgaWYgKCFyZWFkYWJsZSkgY2FsbGJhY2suY2FsbChzdHJlYW0pOwoJICB9OwoKCSAgdmFyIHJlYWRhYmxlRW5kZWQgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGUgJiYgc3RyZWFtLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQ7CgoJICB2YXIgb25lbmQgPSBmdW5jdGlvbiBvbmVuZCgpIHsKCSAgICByZWFkYWJsZSA9IGZhbHNlOwoJICAgIHJlYWRhYmxlRW5kZWQgPSB0cnVlOwoJICAgIGlmICghd3JpdGFibGUpIGNhbGxiYWNrLmNhbGwoc3RyZWFtKTsKCSAgfTsKCgkgIHZhciBvbmVycm9yID0gZnVuY3Rpb24gb25lcnJvcihlcnIpIHsKCSAgICBjYWxsYmFjay5jYWxsKHN0cmVhbSwgZXJyKTsKCSAgfTsKCgkgIHZhciBvbmNsb3NlID0gZnVuY3Rpb24gb25jbG9zZSgpIHsKCSAgICB2YXIgZXJyOwoKCSAgICBpZiAocmVhZGFibGUgJiYgIXJlYWRhYmxlRW5kZWQpIHsKCSAgICAgIGlmICghc3RyZWFtLl9yZWFkYWJsZVN0YXRlIHx8ICFzdHJlYW0uX3JlYWRhYmxlU3RhdGUuZW5kZWQpIGVyciA9IG5ldyBFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRSgpOwoJICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwoc3RyZWFtLCBlcnIpOwoJICAgIH0KCgkgICAgaWYgKHdyaXRhYmxlICYmICF3cml0YWJsZUVuZGVkKSB7CgkgICAgICBpZiAoIXN0cmVhbS5fd3JpdGFibGVTdGF0ZSB8fCAhc3RyZWFtLl93cml0YWJsZVN0YXRlLmVuZGVkKSBlcnIgPSBuZXcgRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0UoKTsKCSAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHN0cmVhbSwgZXJyKTsKCSAgICB9CgkgIH07CgoJICB2YXIgb25yZXF1ZXN0ID0gZnVuY3Rpb24gb25yZXF1ZXN0KCkgewoJICAgIHN0cmVhbS5yZXEub24oJ2ZpbmlzaCcsIG9uZmluaXNoKTsKCSAgfTsKCgkgIGlmIChpc1JlcXVlc3Qoc3RyZWFtKSkgewoJICAgIHN0cmVhbS5vbignY29tcGxldGUnLCBvbmZpbmlzaCk7CgkgICAgc3RyZWFtLm9uKCdhYm9ydCcsIG9uY2xvc2UpOwoJICAgIGlmIChzdHJlYW0ucmVxKSBvbnJlcXVlc3QoKTtlbHNlIHN0cmVhbS5vbigncmVxdWVzdCcsIG9ucmVxdWVzdCk7CgkgIH0gZWxzZSBpZiAod3JpdGFibGUgJiYgIXN0cmVhbS5fd3JpdGFibGVTdGF0ZSkgewoJICAgIC8vIGxlZ2FjeSBzdHJlYW1zCgkgICAgc3RyZWFtLm9uKCdlbmQnLCBvbmxlZ2FjeWZpbmlzaCk7CgkgICAgc3RyZWFtLm9uKCdjbG9zZScsIG9ubGVnYWN5ZmluaXNoKTsKCSAgfQoKCSAgc3RyZWFtLm9uKCdlbmQnLCBvbmVuZCk7CgkgIHN0cmVhbS5vbignZmluaXNoJywgb25maW5pc2gpOwoJICBpZiAob3B0cy5lcnJvciAhPT0gZmFsc2UpIHN0cmVhbS5vbignZXJyb3InLCBvbmVycm9yKTsKCSAgc3RyZWFtLm9uKCdjbG9zZScsIG9uY2xvc2UpOwoJICByZXR1cm4gZnVuY3Rpb24gKCkgewoJICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignY29tcGxldGUnLCBvbmZpbmlzaCk7CgkgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdhYm9ydCcsIG9uY2xvc2UpOwoJICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcigncmVxdWVzdCcsIG9ucmVxdWVzdCk7CgkgICAgaWYgKHN0cmVhbS5yZXEpIHN0cmVhbS5yZXEucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTsKCSAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9ubGVnYWN5ZmluaXNoKTsKCSAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25sZWdhY3lmaW5pc2gpOwoJICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpOwoJICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpOwoJICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKCSAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7CgkgIH07Cgl9CgoJdmFyIGVuZE9mU3RyZWFtID0gZW9zOwoKCXZhciBfT2JqZWN0JHNldFByb3RvdHlwZU87CgoJZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5JDEob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKCgoJdmFyIGtMYXN0UmVzb2x2ZSA9IFN5bWJvbCgnbGFzdFJlc29sdmUnKTsKCXZhciBrTGFzdFJlamVjdCA9IFN5bWJvbCgnbGFzdFJlamVjdCcpOwoJdmFyIGtFcnJvciA9IFN5bWJvbCgnZXJyb3InKTsKCXZhciBrRW5kZWQgPSBTeW1ib2woJ2VuZGVkJyk7Cgl2YXIga0xhc3RQcm9taXNlID0gU3ltYm9sKCdsYXN0UHJvbWlzZScpOwoJdmFyIGtIYW5kbGVQcm9taXNlID0gU3ltYm9sKCdoYW5kbGVQcm9taXNlJyk7Cgl2YXIga1N0cmVhbSA9IFN5bWJvbCgnc3RyZWFtJyk7CgoJZnVuY3Rpb24gY3JlYXRlSXRlclJlc3VsdCh2YWx1ZSwgZG9uZSkgewoJICByZXR1cm4gewoJICAgIHZhbHVlOiB2YWx1ZSwKCSAgICBkb25lOiBkb25lCgkgIH07Cgl9CgoJZnVuY3Rpb24gcmVhZEFuZFJlc29sdmUoaXRlcikgewoJICB2YXIgcmVzb2x2ZSA9IGl0ZXJba0xhc3RSZXNvbHZlXTsKCgkgIGlmIChyZXNvbHZlICE9PSBudWxsKSB7CgkgICAgdmFyIGRhdGEgPSBpdGVyW2tTdHJlYW1dLnJlYWQoKTsgLy8gd2UgZGVmZXIgaWYgZGF0YSBpcyBudWxsCgkgICAgLy8gd2UgY2FuIGJlIGV4cGVjdGluZyBlaXRoZXIgJ2VuZCcgb3IKCSAgICAvLyAnZXJyb3InCgoJICAgIGlmIChkYXRhICE9PSBudWxsKSB7CgkgICAgICBpdGVyW2tMYXN0UHJvbWlzZV0gPSBudWxsOwoJICAgICAgaXRlcltrTGFzdFJlc29sdmVdID0gbnVsbDsKCSAgICAgIGl0ZXJba0xhc3RSZWplY3RdID0gbnVsbDsKCSAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdChkYXRhLCBmYWxzZSkpOwoJICAgIH0KCSAgfQoJfQoKCWZ1bmN0aW9uIG9uUmVhZGFibGUoaXRlcikgewoJICAvLyB3ZSB3YWl0IGZvciB0aGUgbmV4dCB0aWNrLCBiZWNhdXNlIGl0IG1pZ2h0CgkgIC8vIGVtaXQgYW4gZXJyb3Igd2l0aCBwcm9jZXNzLm5leHRUaWNrCgkgIHByb2Nlc3MubmV4dFRpY2socmVhZEFuZFJlc29sdmUsIGl0ZXIpOwoJfQoKCWZ1bmN0aW9uIHdyYXBGb3JOZXh0KGxhc3RQcm9taXNlLCBpdGVyKSB7CgkgIHJldHVybiBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgbGFzdFByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7CgkgICAgICBpZiAoaXRlcltrRW5kZWRdKSB7CgkgICAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdCh1bmRlZmluZWQsIHRydWUpKTsKCSAgICAgICAgcmV0dXJuOwoJICAgICAgfQoKCSAgICAgIGl0ZXJba0hhbmRsZVByb21pc2VdKHJlc29sdmUsIHJlamVjdCk7CgkgICAgfSwgcmVqZWN0KTsKCSAgfTsKCX0KCgl2YXIgQXN5bmNJdGVyYXRvclByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihmdW5jdGlvbiAoKSB7fSk7Cgl2YXIgUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yUHJvdG90eXBlID0gT2JqZWN0LnNldFByb3RvdHlwZU9mKChfT2JqZWN0JHNldFByb3RvdHlwZU8gPSB7CgkgIGdldCBzdHJlYW0oKSB7CgkgICAgcmV0dXJuIHRoaXNba1N0cmVhbV07CgkgIH0sCgoJICBuZXh0OiBmdW5jdGlvbiBuZXh0KCkgewoJICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgIC8vIGlmIHdlIGhhdmUgZGV0ZWN0ZWQgYW4gZXJyb3IgaW4gdGhlIG1lYW53aGlsZQoJICAgIC8vIHJlamVjdCBzdHJhaWdodCBhd2F5CgkgICAgdmFyIGVycm9yID0gdGhpc1trRXJyb3JdOwoKCSAgICBpZiAoZXJyb3IgIT09IG51bGwpIHsKCSAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CgkgICAgfQoKCSAgICBpZiAodGhpc1trRW5kZWRdKSB7CgkgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQodW5kZWZpbmVkLCB0cnVlKSk7CgkgICAgfQoKCSAgICBpZiAodGhpc1trU3RyZWFtXS5kZXN0cm95ZWQpIHsKCSAgICAgIC8vIFdlIG5lZWQgdG8gZGVmZXIgdmlhIG5leHRUaWNrIGJlY2F1c2UgaWYgLmRlc3Ryb3koZXJyKSBpcwoJICAgICAgLy8gY2FsbGVkLCB0aGUgZXJyb3Igd2lsbCBiZSBlbWl0dGVkIHZpYSBuZXh0VGljaywgYW5kCgkgICAgICAvLyB3ZSBjYW5ub3QgZ3VhcmFudGVlIHRoYXQgdGhlcmUgaXMgbm8gZXJyb3IgbGluZ2VyaW5nIGFyb3VuZAoJICAgICAgLy8gd2FpdGluZyB0byBiZSBlbWl0dGVkLgoJICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCSAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgaWYgKF90aGlzW2tFcnJvcl0pIHsKCSAgICAgICAgICAgIHJlamVjdChfdGhpc1trRXJyb3JdKTsKCSAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpOwoJICAgICAgICAgIH0KCSAgICAgICAgfSk7CgkgICAgICB9KTsKCSAgICB9IC8vIGlmIHdlIGhhdmUgbXVsdGlwbGUgbmV4dCgpIGNhbGxzCgkgICAgLy8gd2Ugd2lsbCB3YWl0IGZvciB0aGUgcHJldmlvdXMgUHJvbWlzZSB0byBmaW5pc2gKCSAgICAvLyB0aGlzIGxvZ2ljIGlzIG9wdGltaXplZCB0byBzdXBwb3J0IGZvciBhd2FpdCBsb29wcywKCSAgICAvLyB3aGVyZSBuZXh0KCkgaXMgb25seSBjYWxsZWQgb25jZSBhdCBhIHRpbWUKCgoJICAgIHZhciBsYXN0UHJvbWlzZSA9IHRoaXNba0xhc3RQcm9taXNlXTsKCSAgICB2YXIgcHJvbWlzZTsKCgkgICAgaWYgKGxhc3RQcm9taXNlKSB7CgkgICAgICBwcm9taXNlID0gbmV3IFByb21pc2Uod3JhcEZvck5leHQobGFzdFByb21pc2UsIHRoaXMpKTsKCSAgICB9IGVsc2UgewoJICAgICAgLy8gZmFzdCBwYXRoIG5lZWRlZCB0byBzdXBwb3J0IG11bHRpcGxlIHRoaXMucHVzaCgpCgkgICAgICAvLyB3aXRob3V0IHRyaWdnZXJpbmcgdGhlIG5leHQoKSBxdWV1ZQoJICAgICAgdmFyIGRhdGEgPSB0aGlzW2tTdHJlYW1dLnJlYWQoKTsKCgkgICAgICBpZiAoZGF0YSAhPT0gbnVsbCkgewoJICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQoZGF0YSwgZmFsc2UpKTsKCSAgICAgIH0KCgkgICAgICBwcm9taXNlID0gbmV3IFByb21pc2UodGhpc1trSGFuZGxlUHJvbWlzZV0pOwoJICAgIH0KCgkgICAgdGhpc1trTGFzdFByb21pc2VdID0gcHJvbWlzZTsKCSAgICByZXR1cm4gcHJvbWlzZTsKCSAgfQoJfSwgX2RlZmluZVByb3BlcnR5JDEoX09iamVjdCRzZXRQcm90b3R5cGVPLCBTeW1ib2wuYXN5bmNJdGVyYXRvciwgZnVuY3Rpb24gKCkgewoJICByZXR1cm4gdGhpczsKCX0pLCBfZGVmaW5lUHJvcGVydHkkMShfT2JqZWN0JHNldFByb3RvdHlwZU8sICJyZXR1cm4iLCBmdW5jdGlvbiBfcmV0dXJuKCkgewoJICB2YXIgX3RoaXMyID0gdGhpczsKCgkgIC8vIGRlc3Ryb3koZXJyLCBjYikgaXMgYSBwcml2YXRlIEFQSQoJICAvLyB3ZSBjYW4gZ3VhcmFudGVlIHdlIGhhdmUgdGhhdCBoZXJlLCBiZWNhdXNlIHdlIGNvbnRyb2wgdGhlCgkgIC8vIFJlYWRhYmxlIGNsYXNzIHRoaXMgaXMgYXR0YWNoZWQgdG8KCSAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCSAgICBfdGhpczJba1N0cmVhbV0uZGVzdHJveShudWxsLCBmdW5jdGlvbiAoZXJyKSB7CgkgICAgICBpZiAoZXJyKSB7CgkgICAgICAgIHJlamVjdChlcnIpOwoJICAgICAgICByZXR1cm47CgkgICAgICB9CgoJICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpOwoJICAgIH0pOwoJICB9KTsKCX0pLCBfT2JqZWN0JHNldFByb3RvdHlwZU8pLCBBc3luY0l0ZXJhdG9yUHJvdG90eXBlKTsKCgl2YXIgY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yID0gZnVuY3Rpb24gY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yKHN0cmVhbSkgewoJICB2YXIgX09iamVjdCRjcmVhdGU7CgoJICB2YXIgaXRlcmF0b3IgPSBPYmplY3QuY3JlYXRlKFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvclByb3RvdHlwZSwgKF9PYmplY3QkY3JlYXRlID0ge30sIF9kZWZpbmVQcm9wZXJ0eSQxKF9PYmplY3QkY3JlYXRlLCBrU3RyZWFtLCB7CgkgICAgdmFsdWU6IHN0cmVhbSwKCSAgICB3cml0YWJsZTogdHJ1ZQoJICB9KSwgX2RlZmluZVByb3BlcnR5JDEoX09iamVjdCRjcmVhdGUsIGtMYXN0UmVzb2x2ZSwgewoJICAgIHZhbHVlOiBudWxsLAoJICAgIHdyaXRhYmxlOiB0cnVlCgkgIH0pLCBfZGVmaW5lUHJvcGVydHkkMShfT2JqZWN0JGNyZWF0ZSwga0xhc3RSZWplY3QsIHsKCSAgICB2YWx1ZTogbnVsbCwKCSAgICB3cml0YWJsZTogdHJ1ZQoJICB9KSwgX2RlZmluZVByb3BlcnR5JDEoX09iamVjdCRjcmVhdGUsIGtFcnJvciwgewoJICAgIHZhbHVlOiBudWxsLAoJICAgIHdyaXRhYmxlOiB0cnVlCgkgIH0pLCBfZGVmaW5lUHJvcGVydHkkMShfT2JqZWN0JGNyZWF0ZSwga0VuZGVkLCB7CgkgICAgdmFsdWU6IHN0cmVhbS5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkLAoJICAgIHdyaXRhYmxlOiB0cnVlCgkgIH0pLCBfZGVmaW5lUHJvcGVydHkkMShfT2JqZWN0JGNyZWF0ZSwga0hhbmRsZVByb21pc2UsIHsKCSAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgICB2YXIgZGF0YSA9IGl0ZXJhdG9yW2tTdHJlYW1dLnJlYWQoKTsKCgkgICAgICBpZiAoZGF0YSkgewoJICAgICAgICBpdGVyYXRvcltrTGFzdFByb21pc2VdID0gbnVsbDsKCSAgICAgICAgaXRlcmF0b3Jba0xhc3RSZXNvbHZlXSA9IG51bGw7CgkgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IG51bGw7CgkgICAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdChkYXRhLCBmYWxzZSkpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgaXRlcmF0b3Jba0xhc3RSZXNvbHZlXSA9IHJlc29sdmU7CgkgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IHJlamVjdDsKCSAgICAgIH0KCSAgICB9LAoJICAgIHdyaXRhYmxlOiB0cnVlCgkgIH0pLCBfT2JqZWN0JGNyZWF0ZSkpOwoJICBpdGVyYXRvcltrTGFzdFByb21pc2VdID0gbnVsbDsKCSAgZW5kT2ZTdHJlYW0oc3RyZWFtLCBmdW5jdGlvbiAoZXJyKSB7CgkgICAgaWYgKGVyciAmJiBlcnIuY29kZSAhPT0gJ0VSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFJykgewoJICAgICAgdmFyIHJlamVjdCA9IGl0ZXJhdG9yW2tMYXN0UmVqZWN0XTsgLy8gcmVqZWN0IGlmIHdlIGFyZSB3YWl0aW5nIGZvciBkYXRhIGluIHRoZSBQcm9taXNlCgkgICAgICAvLyByZXR1cm5lZCBieSBuZXh0KCkgYW5kIHN0b3JlIHRoZSBlcnJvcgoKCSAgICAgIGlmIChyZWplY3QgIT09IG51bGwpIHsKCSAgICAgICAgaXRlcmF0b3Jba0xhc3RQcm9taXNlXSA9IG51bGw7CgkgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVzb2x2ZV0gPSBudWxsOwoJICAgICAgICBpdGVyYXRvcltrTGFzdFJlamVjdF0gPSBudWxsOwoJICAgICAgICByZWplY3QoZXJyKTsKCSAgICAgIH0KCgkgICAgICBpdGVyYXRvcltrRXJyb3JdID0gZXJyOwoJICAgICAgcmV0dXJuOwoJICAgIH0KCgkgICAgdmFyIHJlc29sdmUgPSBpdGVyYXRvcltrTGFzdFJlc29sdmVdOwoKCSAgICBpZiAocmVzb2x2ZSAhPT0gbnVsbCkgewoJICAgICAgaXRlcmF0b3Jba0xhc3RQcm9taXNlXSA9IG51bGw7CgkgICAgICBpdGVyYXRvcltrTGFzdFJlc29sdmVdID0gbnVsbDsKCSAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IG51bGw7CgkgICAgICByZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQodW5kZWZpbmVkLCB0cnVlKSk7CgkgICAgfQoKCSAgICBpdGVyYXRvcltrRW5kZWRdID0gdHJ1ZTsKCSAgfSk7CgkgIHN0cmVhbS5vbigncmVhZGFibGUnLCBvblJlYWRhYmxlLmJpbmQobnVsbCwgaXRlcmF0b3IpKTsKCSAgcmV0dXJuIGl0ZXJhdG9yOwoJfTsKCgl2YXIgYXN5bmNfaXRlcmF0b3IgPSBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I7CgoJdmFyIGZyb21Ccm93c2VyID0gZnVuY3Rpb24gKCkgewoJICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWRhYmxlLmZyb20gaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgYnJvd3NlcicpCgl9OwoKCXZhciBfc3RyZWFtX3JlYWRhYmxlID0gUmVhZGFibGU7CgkvKjxyZXBsYWNlbWVudD4qLwoKCXZhciBEdXBsZXg7CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCglSZWFkYWJsZS5SZWFkYWJsZVN0YXRlID0gUmVhZGFibGVTdGF0ZTsKCgl2YXIgRUVsaXN0ZW5lckNvdW50ID0gZnVuY3Rpb24gRUVsaXN0ZW5lckNvdW50KGVtaXR0ZXIsIHR5cGUpIHsKCSAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJzKHR5cGUpLmxlbmd0aDsKCX07CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCgkvKjxyZXBsYWNlbWVudD4qLwoKCgoJLyo8L3JlcGxhY2VtZW50PiovCgoKCXZhciBCdWZmZXIkMiA9IGJ1ZmZlci5CdWZmZXI7CgoJdmFyIE91clVpbnQ4QXJyYXkgPSBjb21tb25qc0dsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9OwoKCWZ1bmN0aW9uIF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspIHsKCSAgcmV0dXJuIEJ1ZmZlciQyLmZyb20oY2h1bmspOwoJfQoKCWZ1bmN0aW9uIF9pc1VpbnQ4QXJyYXkob2JqKSB7CgkgIHJldHVybiBCdWZmZXIkMi5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXk7Cgl9CgkvKjxyZXBsYWNlbWVudD4qLwoKCgoKCXZhciBkZWJ1ZzsKCglpZiAoZGVidWdVdGlsICYmIGRlYnVnVXRpbC5kZWJ1Z2xvZykgewoJICBkZWJ1ZyA9IGRlYnVnVXRpbC5kZWJ1Z2xvZygnc3RyZWFtJyk7Cgl9IGVsc2UgewoJICBkZWJ1ZyA9IGZ1bmN0aW9uIGRlYnVnKCkge307Cgl9CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCgoKCgoKCXZhciBnZXRIaWdoV2F0ZXJNYXJrJDEgPSBzdGF0ZS5nZXRIaWdoV2F0ZXJNYXJrOwoKCXZhciBfcmVxdWlyZSRjb2RlcyA9IGVycm9yc0Jyb3dzZXIuY29kZXMsCgkgICAgRVJSX0lOVkFMSURfQVJHX1RZUEUgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfSU5WQUxJRF9BUkdfVFlQRSwKCSAgICBFUlJfU1RSRUFNX1BVU0hfQUZURVJfRU9GID0gX3JlcXVpcmUkY29kZXMuRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRiwKCSAgICBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCA9IF9yZXF1aXJlJGNvZGVzLkVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVELAoJICAgIEVSUl9TVFJFQU1fVU5TSElGVF9BRlRFUl9FTkRfRVZFTlQgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfU1RSRUFNX1VOU0hJRlRfQUZURVJfRU5EX0VWRU5UOyAvLyBMYXp5IGxvYWRlZCB0byBpbXByb3ZlIHRoZSBzdGFydHVwIHBlcmZvcm1hbmNlLgoKCgl2YXIgU3RyaW5nRGVjb2RlciQxOwoJdmFyIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvciQxOwoJdmFyIGZyb207CgoJaW5oZXJpdHNfYnJvd3NlcihSZWFkYWJsZSwgc3RyZWFtQnJvd3Nlcik7CgoJdmFyIGVycm9yT3JEZXN0cm95JDEgPSBkZXN0cm95XzEuZXJyb3JPckRlc3Ryb3k7Cgl2YXIga1Byb3h5RXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddOwoKCWZ1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcihlbWl0dGVyLCBldmVudCwgZm4pIHsKCSAgLy8gU2FkbHkgdGhpcyBpcyBub3QgY2FjaGVhYmxlIGFzIHNvbWUgbGlicmFyaWVzIGJ1bmRsZSB0aGVpciBvd24KCSAgLy8gZXZlbnQgZW1pdHRlciBpbXBsZW1lbnRhdGlvbiB3aXRoIHRoZW0uCgkgIGlmICh0eXBlb2YgZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHJldHVybiBlbWl0dGVyLnByZXBlbmRMaXN0ZW5lcihldmVudCwgZm4pOyAvLyBUaGlzIGlzIGEgaGFjayB0byBtYWtlIHN1cmUgdGhhdCBvdXIgZXJyb3IgaGFuZGxlciBpcyBhdHRhY2hlZCBiZWZvcmUgYW55CgkgIC8vIHVzZXJsYW5kIG9uZXMuICBORVZFUiBETyBUSElTLiBUaGlzIGlzIGhlcmUgb25seSBiZWNhdXNlIHRoaXMgY29kZSBuZWVkcwoJICAvLyB0byBjb250aW51ZSB0byB3b3JrIHdpdGggb2xkZXIgdmVyc2lvbnMgb2YgTm9kZS5qcyB0aGF0IGRvIG5vdCBpbmNsdWRlCgkgIC8vIHRoZSBwcmVwZW5kTGlzdGVuZXIoKSBtZXRob2QuIFRoZSBnb2FsIGlzIHRvIGV2ZW50dWFsbHkgcmVtb3ZlIHRoaXMgaGFjay4KCgkgIGlmICghZW1pdHRlci5fZXZlbnRzIHx8ICFlbWl0dGVyLl9ldmVudHNbZXZlbnRdKSBlbWl0dGVyLm9uKGV2ZW50LCBmbik7ZWxzZSBpZiAoQXJyYXkuaXNBcnJheShlbWl0dGVyLl9ldmVudHNbZXZlbnRdKSkgZW1pdHRlci5fZXZlbnRzW2V2ZW50XS51bnNoaWZ0KGZuKTtlbHNlIGVtaXR0ZXIuX2V2ZW50c1tldmVudF0gPSBbZm4sIGVtaXR0ZXIuX2V2ZW50c1tldmVudF1dOwoJfQoKCWZ1bmN0aW9uIFJlYWRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtLCBpc0R1cGxleCkgewoJICBEdXBsZXggPSBEdXBsZXggfHwgY29tbW9uanNSZXF1aXJlKCIuL19zdHJlYW1fZHVwbGV4IiwgIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIiKTsKCSAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIER1cGxleCBzdHJlYW1zIGFyZSBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZSwgYnV0IHNoYXJlCgkgIC8vIHRoZSBzYW1lIG9wdGlvbnMgb2JqZWN0LgoJICAvLyBIb3dldmVyLCBzb21lIGNhc2VzIHJlcXVpcmUgc2V0dGluZyBvcHRpb25zIHRvIGRpZmZlcmVudAoJICAvLyB2YWx1ZXMgZm9yIHRoZSByZWFkYWJsZSBhbmQgdGhlIHdyaXRhYmxlIHNpZGVzIG9mIHRoZSBkdXBsZXggc3RyZWFtLgoJICAvLyBUaGVzZSBvcHRpb25zIGNhbiBiZSBwcm92aWRlZCBzZXBhcmF0ZWx5IGFzIHJlYWRhYmxlWFhYIGFuZCB3cml0YWJsZVhYWC4KCgkgIGlmICh0eXBlb2YgaXNEdXBsZXggIT09ICdib29sZWFuJykgaXNEdXBsZXggPSBzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXg7IC8vIG9iamVjdCBzdHJlYW0gZmxhZy4gVXNlZCB0byBtYWtlIHJlYWQobikgaWdub3JlIG4gYW5kIHRvCgkgIC8vIG1ha2UgYWxsIHRoZSBidWZmZXIgbWVyZ2luZyBhbmQgbGVuZ3RoIGNoZWNrcyBnbyBhd2F5CgoJICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTsKCSAgaWYgKGlzRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLnJlYWRhYmxlT2JqZWN0TW9kZTsgLy8gdGhlIHBvaW50IGF0IHdoaWNoIGl0IHN0b3BzIGNhbGxpbmcgX3JlYWQoKSB0byBmaWxsIHRoZSBidWZmZXIKCSAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyAiZG9uJ3QgY2FsbCBfcmVhZCBwcmVlbXB0aXZlbHkgZXZlciIKCgkgIHRoaXMuaGlnaFdhdGVyTWFyayA9IGdldEhpZ2hXYXRlck1hcmskMSh0aGlzLCBvcHRpb25zLCAncmVhZGFibGVIaWdoV2F0ZXJNYXJrJywgaXNEdXBsZXgpOyAvLyBBIGxpbmtlZCBsaXN0IGlzIHVzZWQgdG8gc3RvcmUgZGF0YSBjaHVua3MgaW5zdGVhZCBvZiBhbiBhcnJheSBiZWNhdXNlIHRoZQoJICAvLyBsaW5rZWQgbGlzdCBjYW4gcmVtb3ZlIGVsZW1lbnRzIGZyb20gdGhlIGJlZ2lubmluZyBmYXN0ZXIgdGhhbgoJICAvLyBhcnJheS5zaGlmdCgpCgoJICB0aGlzLmJ1ZmZlciA9IG5ldyBidWZmZXJfbGlzdCgpOwoJICB0aGlzLmxlbmd0aCA9IDA7CgkgIHRoaXMucGlwZXMgPSBudWxsOwoJICB0aGlzLnBpcGVzQ291bnQgPSAwOwoJICB0aGlzLmZsb3dpbmcgPSBudWxsOwoJICB0aGlzLmVuZGVkID0gZmFsc2U7CgkgIHRoaXMuZW5kRW1pdHRlZCA9IGZhbHNlOwoJICB0aGlzLnJlYWRpbmcgPSBmYWxzZTsgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgZXZlbnQgJ3JlYWRhYmxlJy8nZGF0YScgaXMgZW1pdHRlZAoJICAvLyBpbW1lZGlhdGVseSwgb3Igb24gYSBsYXRlciB0aWNrLiAgV2Ugc2V0IHRoaXMgdG8gdHJ1ZSBhdCBmaXJzdCwgYmVjYXVzZQoJICAvLyBhbnkgYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgImxhdGVyIiBzaG91bGQgZ2VuZXJhbGx5IGFsc28KCSAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHJlYWQgY2FsbC4KCgkgIHRoaXMuc3luYyA9IHRydWU7IC8vIHdoZW5ldmVyIHdlIHJldHVybiBudWxsLCB0aGVuIHdlIHNldCBhIGZsYWcgdG8gc2F5CgkgIC8vIHRoYXQgd2UncmUgYXdhaXRpbmcgYSAncmVhZGFibGUnIGV2ZW50IGVtaXNzaW9uLgoKCSAgdGhpcy5uZWVkUmVhZGFibGUgPSBmYWxzZTsKCSAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsKCSAgdGhpcy5yZWFkYWJsZUxpc3RlbmluZyA9IGZhbHNlOwoJICB0aGlzLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlOwoJICB0aGlzLnBhdXNlZCA9IHRydWU7IC8vIFNob3VsZCBjbG9zZSBiZSBlbWl0dGVkIG9uIGRlc3Ryb3kuIERlZmF1bHRzIHRvIHRydWUuCgoJICB0aGlzLmVtaXRDbG9zZSA9IG9wdGlvbnMuZW1pdENsb3NlICE9PSBmYWxzZTsgLy8gU2hvdWxkIC5kZXN0cm95KCkgYmUgY2FsbGVkIGFmdGVyICdlbmQnIChhbmQgcG90ZW50aWFsbHkgJ2ZpbmlzaCcpCgoJICB0aGlzLmF1dG9EZXN0cm95ID0gISFvcHRpb25zLmF1dG9EZXN0cm95OyAvLyBoYXMgaXQgYmVlbiBkZXN0cm95ZWQKCgkgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7IC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmcKCSAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLgoJICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guCgoJICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JzsgLy8gdGhlIG51bWJlciBvZiB3cml0ZXJzIHRoYXQgYXJlIGF3YWl0aW5nIGEgZHJhaW4gZXZlbnQgaW4gLnBpcGUoKXMKCgkgIHRoaXMuYXdhaXREcmFpbiA9IDA7IC8vIGlmIHRydWUsIGEgbWF5YmVSZWFkTW9yZSBoYXMgYmVlbiBzY2hlZHVsZWQKCgkgIHRoaXMucmVhZGluZ01vcmUgPSBmYWxzZTsKCSAgdGhpcy5kZWNvZGVyID0gbnVsbDsKCSAgdGhpcy5lbmNvZGluZyA9IG51bGw7CgoJICBpZiAob3B0aW9ucy5lbmNvZGluZykgewoJICAgIGlmICghU3RyaW5nRGVjb2RlciQxKSBTdHJpbmdEZWNvZGVyJDEgPSBzdHJpbmdfZGVjb2Rlci5TdHJpbmdEZWNvZGVyOwoJICAgIHRoaXMuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyJDEob3B0aW9ucy5lbmNvZGluZyk7CgkgICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7CgkgIH0KCX0KCglmdW5jdGlvbiBSZWFkYWJsZShvcHRpb25zKSB7CgkgIER1cGxleCA9IER1cGxleCB8fCBjb21tb25qc1JlcXVpcmUoIi4vX3N0cmVhbV9kdXBsZXgiLCAiLyQkcm9sbHVwX2Jhc2UkJC9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYiIpOwoJICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVhZGFibGUpKSByZXR1cm4gbmV3IFJlYWRhYmxlKG9wdGlvbnMpOyAvLyBDaGVja2luZyBmb3IgYSBTdHJlYW0uRHVwbGV4IGluc3RhbmNlIGlzIGZhc3RlciBoZXJlIGluc3RlYWQgb2YgaW5zaWRlCgkgIC8vIHRoZSBSZWFkYWJsZVN0YXRlIGNvbnN0cnVjdG9yLCBhdCBsZWFzdCB3aXRoIFY4IDYuNQoKCSAgdmFyIGlzRHVwbGV4ID0gdGhpcyBpbnN0YW5jZW9mIER1cGxleDsKCSAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMsIGlzRHVwbGV4KTsgLy8gbGVnYWN5CgoJICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTsKCgkgIGlmIChvcHRpb25zKSB7CgkgICAgaWYgKHR5cGVvZiBvcHRpb25zLnJlYWQgPT09ICdmdW5jdGlvbicpIHRoaXMuX3JlYWQgPSBvcHRpb25zLnJlYWQ7CgkgICAgaWYgKHR5cGVvZiBvcHRpb25zLmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIHRoaXMuX2Rlc3Ryb3kgPSBvcHRpb25zLmRlc3Ryb3k7CgkgIH0KCgkgIHN0cmVhbUJyb3dzZXIuY2FsbCh0aGlzKTsKCX0KCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAnZGVzdHJveWVkJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7CgkgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfQoKCSAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ7CgkgIH0sCgkgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CgkgICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtCgkgICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldAoJICAgIGlmICghdGhpcy5fcmVhZGFibGVTdGF0ZSkgewoJICAgICAgcmV0dXJuOwoJICAgIH0gLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseQoJICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZAoKCgkgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTsKCSAgfQoJfSk7CglSZWFkYWJsZS5wcm90b3R5cGUuZGVzdHJveSA9IGRlc3Ryb3lfMS5kZXN0cm95OwoJUmVhZGFibGUucHJvdG90eXBlLl91bmRlc3Ryb3kgPSBkZXN0cm95XzEudW5kZXN0cm95OwoKCVJlYWRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNiKSB7CgkgIGNiKGVycik7Cgl9OyAvLyBNYW51YWxseSBzaG92ZSBzb21ldGhpbmcgaW50byB0aGUgcmVhZCgpIGJ1ZmZlci4KCS8vIFRoaXMgcmV0dXJucyB0cnVlIGlmIHRoZSBoaWdoV2F0ZXJNYXJrIGhhcyBub3QgYmVlbiBoaXQgeWV0LAoJLy8gc2ltaWxhciB0byBob3cgV3JpdGFibGUud3JpdGUoKSByZXR1cm5zIHRydWUgaWYgeW91IHNob3VsZAoJLy8gd3JpdGUoKSBzb21lIG1vcmUuCgoKCVJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZykgewoJICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoJICB2YXIgc2tpcENodW5rQ2hlY2s7CgoJICBpZiAoIXN0YXRlLm9iamVjdE1vZGUpIHsKCSAgICBpZiAodHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykgewoJICAgICAgZW5jb2RpbmcgPSBlbmNvZGluZyB8fCBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7CgoJICAgICAgaWYgKGVuY29kaW5nICE9PSBzdGF0ZS5lbmNvZGluZykgewoJICAgICAgICBjaHVuayA9IEJ1ZmZlciQyLmZyb20oY2h1bmssIGVuY29kaW5nKTsKCSAgICAgICAgZW5jb2RpbmcgPSAnJzsKCSAgICAgIH0KCgkgICAgICBza2lwQ2h1bmtDaGVjayA9IHRydWU7CgkgICAgfQoJICB9IGVsc2UgewoJICAgIHNraXBDaHVua0NoZWNrID0gdHJ1ZTsKCSAgfQoKCSAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgY2h1bmssIGVuY29kaW5nLCBmYWxzZSwgc2tpcENodW5rQ2hlY2spOwoJfTsgLy8gVW5zaGlmdCBzaG91bGQgKmFsd2F5cyogYmUgc29tZXRoaW5nIGRpcmVjdGx5IG91dCBvZiByZWFkKCkKCgoJUmVhZGFibGUucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbiAoY2h1bmspIHsKCSAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgY2h1bmssIG51bGwsIHRydWUsIGZhbHNlKTsKCX07CgoJZnVuY3Rpb24gcmVhZGFibGVBZGRDaHVuayhzdHJlYW0sIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCwgc2tpcENodW5rQ2hlY2spIHsKCSAgZGVidWcoJ3JlYWRhYmxlQWRkQ2h1bmsnLCBjaHVuayk7CgkgIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKCgkgIGlmIChjaHVuayA9PT0gbnVsbCkgewoJICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKCSAgICBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpOwoJICB9IGVsc2UgewoJICAgIHZhciBlcjsKCSAgICBpZiAoIXNraXBDaHVua0NoZWNrKSBlciA9IGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspOwoKCSAgICBpZiAoZXIpIHsKCSAgICAgIGVycm9yT3JEZXN0cm95JDEoc3RyZWFtLCBlcik7CgkgICAgfSBlbHNlIGlmIChzdGF0ZS5vYmplY3RNb2RlIHx8IGNodW5rICYmIGNodW5rLmxlbmd0aCA+IDApIHsKCSAgICAgIGlmICh0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmICFzdGF0ZS5vYmplY3RNb2RlICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihjaHVuaykgIT09IEJ1ZmZlciQyLnByb3RvdHlwZSkgewoJICAgICAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspOwoJICAgICAgfQoKCSAgICAgIGlmIChhZGRUb0Zyb250KSB7CgkgICAgICAgIGlmIChzdGF0ZS5lbmRFbWl0dGVkKSBlcnJvck9yRGVzdHJveSQxKHN0cmVhbSwgbmV3IEVSUl9TVFJFQU1fVU5TSElGVF9BRlRFUl9FTkRfRVZFTlQoKSk7ZWxzZSBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgdHJ1ZSk7CgkgICAgICB9IGVsc2UgaWYgKHN0YXRlLmVuZGVkKSB7CgkgICAgICAgIGVycm9yT3JEZXN0cm95JDEoc3RyZWFtLCBuZXcgRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRigpKTsKCSAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZGVzdHJveWVkKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKCgkgICAgICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFlbmNvZGluZykgewoJICAgICAgICAgIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7CgkgICAgICAgICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsubGVuZ3RoICE9PSAwKSBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgZmFsc2UpO2Vsc2UgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTsKCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgZmFsc2UpOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfSBlbHNlIGlmICghYWRkVG9Gcm9udCkgewoJICAgICAgc3RhdGUucmVhZGluZyA9IGZhbHNlOwoJICAgICAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTsKCSAgICB9CgkgIH0gLy8gV2UgY2FuIHB1c2ggbW9yZSBkYXRhIGlmIHdlIGFyZSBiZWxvdyB0aGUgaGlnaFdhdGVyTWFyay4KCSAgLy8gQWxzbywgaWYgd2UgaGF2ZSBubyBkYXRhIHlldCwgd2UgY2FuIHN0YW5kIHNvbWUgbW9yZSBieXRlcy4KCSAgLy8gVGhpcyBpcyB0byB3b3JrIGFyb3VuZCBjYXNlcyB3aGVyZSBod209MCwgc3VjaCBhcyB0aGUgcmVwbC4KCgoJICByZXR1cm4gIXN0YXRlLmVuZGVkICYmIChzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCk7Cgl9CgoJZnVuY3Rpb24gYWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGFkZFRvRnJvbnQpIHsKCSAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5zeW5jKSB7CgkgICAgc3RhdGUuYXdhaXREcmFpbiA9IDA7CgkgICAgc3RyZWFtLmVtaXQoJ2RhdGEnLCBjaHVuayk7CgkgIH0gZWxzZSB7CgkgICAgLy8gdXBkYXRlIHRoZSBidWZmZXIgaW5mby4KCSAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CgkgICAgaWYgKGFkZFRvRnJvbnQpIHN0YXRlLmJ1ZmZlci51bnNoaWZ0KGNodW5rKTtlbHNlIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTsKCSAgICBpZiAoc3RhdGUubmVlZFJlYWRhYmxlKSBlbWl0UmVhZGFibGUoc3RyZWFtKTsKCSAgfQoKCSAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTsKCX0KCglmdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7CgkgIHZhciBlcjsKCgkgIGlmICghX2lzVWludDhBcnJheShjaHVuaykgJiYgdHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJiBjaHVuayAhPT0gdW5kZWZpbmVkICYmICFzdGF0ZS5vYmplY3RNb2RlKSB7CgkgICAgZXIgPSBuZXcgRVJSX0lOVkFMSURfQVJHX1RZUEUoJ2NodW5rJywgWydzdHJpbmcnLCAnQnVmZmVyJywgJ1VpbnQ4QXJyYXknXSwgY2h1bmspOwoJICB9CgoJICByZXR1cm4gZXI7Cgl9CgoJUmVhZGFibGUucHJvdG90eXBlLmlzUGF1c2VkID0gZnVuY3Rpb24gKCkgewoJICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID09PSBmYWxzZTsKCX07IC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgoKCglSZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbiAoZW5jKSB7CgkgIGlmICghU3RyaW5nRGVjb2RlciQxKSBTdHJpbmdEZWNvZGVyJDEgPSBzdHJpbmdfZGVjb2Rlci5TdHJpbmdEZWNvZGVyOwoJICB2YXIgZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyJDEoZW5jKTsKCSAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyID0gZGVjb2RlcjsgLy8gSWYgc2V0RW5jb2RpbmcobnVsbCksIGRlY29kZXIuZW5jb2RpbmcgZXF1YWxzIHV0ZjgKCgkgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIuZW5jb2Rpbmc7IC8vIEl0ZXJhdGUgb3ZlciBjdXJyZW50IGJ1ZmZlciB0byBjb252ZXJ0IGFscmVhZHkgc3RvcmVkIEJ1ZmZlcnM6CgoJICB2YXIgcCA9IHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLmhlYWQ7CgkgIHZhciBjb250ZW50ID0gJyc7CgoJICB3aGlsZSAocCAhPT0gbnVsbCkgewoJICAgIGNvbnRlbnQgKz0gZGVjb2Rlci53cml0ZShwLmRhdGEpOwoJICAgIHAgPSBwLm5leHQ7CgkgIH0KCgkgIHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLmNsZWFyKCk7CgoJICBpZiAoY29udGVudCAhPT0gJycpIHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLnB1c2goY29udGVudCk7CgkgIHRoaXMuX3JlYWRhYmxlU3RhdGUubGVuZ3RoID0gY29udGVudC5sZW5ndGg7CgkgIHJldHVybiB0aGlzOwoJfTsgLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDFHQgoKCgl2YXIgTUFYX0hXTSA9IDB4NDAwMDAwMDA7CgoJZnVuY3Rpb24gY29tcHV0ZU5ld0hpZ2hXYXRlck1hcmsobikgewoJICBpZiAobiA+PSBNQVhfSFdNKSB7CgkgICAgLy8gVE9ETyhyb25hZyk6IFRocm93IEVSUl9WQUxVRV9PVVRfT0ZfUkFOR0UuCgkgICAgbiA9IE1BWF9IV007CgkgIH0gZWxzZSB7CgkgICAgLy8gR2V0IHRoZSBuZXh0IGhpZ2hlc3QgcG93ZXIgb2YgMiB0byBwcmV2ZW50IGluY3JlYXNpbmcgaHdtIGV4Y2Vzc2l2ZWx5IGluCgkgICAgLy8gdGlueSBhbW91bnRzCgkgICAgbi0tOwoJICAgIG4gfD0gbiA+Pj4gMTsKCSAgICBuIHw9IG4gPj4+IDI7CgkgICAgbiB8PSBuID4+PiA0OwoJICAgIG4gfD0gbiA+Pj4gODsKCSAgICBuIHw9IG4gPj4+IDE2OwoJICAgIG4rKzsKCSAgfQoKCSAgcmV0dXJuIG47Cgl9IC8vIFRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gYmUgaW5saW5hYmxlLCBzbyBwbGVhc2UgdGFrZSBjYXJlIHdoZW4gbWFraW5nCgkvLyBjaGFuZ2VzIHRvIHRoZSBmdW5jdGlvbiBib2R5LgoKCglmdW5jdGlvbiBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKSB7CgkgIGlmIChuIDw9IDAgfHwgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSByZXR1cm4gMDsKCSAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldHVybiAxOwoKCSAgaWYgKG4gIT09IG4pIHsKCSAgICAvLyBPbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWUKCSAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGgpIHJldHVybiBzdGF0ZS5idWZmZXIuaGVhZC5kYXRhLmxlbmd0aDtlbHNlIHJldHVybiBzdGF0ZS5sZW5ndGg7CgkgIH0gLy8gSWYgd2UncmUgYXNraW5nIGZvciBtb3JlIHRoYW4gdGhlIGN1cnJlbnQgaHdtLCB0aGVuIHJhaXNlIHRoZSBod20uCgoKCSAgaWYgKG4gPiBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSBzdGF0ZS5oaWdoV2F0ZXJNYXJrID0gY29tcHV0ZU5ld0hpZ2hXYXRlck1hcmsobik7CgkgIGlmIChuIDw9IHN0YXRlLmxlbmd0aCkgcmV0dXJuIG47IC8vIERvbid0IGhhdmUgZW5vdWdoCgoJICBpZiAoIXN0YXRlLmVuZGVkKSB7CgkgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKCSAgICByZXR1cm4gMDsKCSAgfQoKCSAgcmV0dXJuIHN0YXRlLmxlbmd0aDsKCX0gLy8geW91IGNhbiBvdmVycmlkZSBlaXRoZXIgdGhpcyBtZXRob2QsIG9yIHRoZSBhc3luYyBfcmVhZChuKSBiZWxvdy4KCgoJUmVhZGFibGUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAobikgewoJICBkZWJ1ZygncmVhZCcsIG4pOwoJICBuID0gcGFyc2VJbnQobiwgMTApOwoJICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoJICB2YXIgbk9yaWcgPSBuOwoJICBpZiAobiAhPT0gMCkgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7IC8vIGlmIHdlJ3JlIGRvaW5nIHJlYWQoMCkgdG8gdHJpZ2dlciBhIHJlYWRhYmxlIGV2ZW50LCBidXQgd2UKCSAgLy8gYWxyZWFkeSBoYXZlIGEgYnVuY2ggb2YgZGF0YSBpbiB0aGUgYnVmZmVyLCB0aGVuIGp1c3QgdHJpZ2dlcgoJICAvLyB0aGUgJ3JlYWRhYmxlJyBldmVudCBhbmQgbW92ZSBvbi4KCgkgIGlmIChuID09PSAwICYmIHN0YXRlLm5lZWRSZWFkYWJsZSAmJiAoKHN0YXRlLmhpZ2hXYXRlck1hcmsgIT09IDAgPyBzdGF0ZS5sZW5ndGggPj0gc3RhdGUuaGlnaFdhdGVyTWFyayA6IHN0YXRlLmxlbmd0aCA+IDApIHx8IHN0YXRlLmVuZGVkKSkgewoJICAgIGRlYnVnKCdyZWFkOiBlbWl0UmVhZGFibGUnLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTsKCSAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtlbHNlIGVtaXRSZWFkYWJsZSh0aGlzKTsKCSAgICByZXR1cm4gbnVsbDsKCSAgfQoKCSAgbiA9IGhvd011Y2hUb1JlYWQobiwgc3RhdGUpOyAvLyBpZiB3ZSd2ZSBlbmRlZCwgYW5kIHdlJ3JlIG5vdyBjbGVhciwgdGhlbiBmaW5pc2ggaXQgdXAuCgoJICBpZiAobiA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgewoJICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIGVuZFJlYWRhYmxlKHRoaXMpOwoJICAgIHJldHVybiBudWxsOwoJICB9IC8vIEFsbCB0aGUgYWN0dWFsIGNodW5rIGdlbmVyYXRpb24gbG9naWMgbmVlZHMgdG8gYmUKCSAgLy8gKmJlbG93KiB0aGUgY2FsbCB0byBfcmVhZC4gIFRoZSByZWFzb24gaXMgdGhhdCBpbiBjZXJ0YWluCgkgIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWQKCSAgLy8gbWF5IGJlIGEgY29tcGxldGVseSBzeW5jaHJvbm91cyBvcGVyYXRpb24gd2hpY2ggbWF5IGNoYW5nZQoJICAvLyB0aGUgc3RhdGUgb2YgdGhlIHJlYWQgYnVmZmVyLCBwcm92aWRpbmcgZW5vdWdoIGRhdGEgd2hlbgoJICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC4KCSAgLy8KCSAgLy8gU28sIHRoZSBzdGVwcyBhcmU6CgkgIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG8KCSAgLy8gYSByZWFkIGZyb20gdGhlIGJ1ZmZlci4KCSAgLy8KCSAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC4KCSAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IGJlIGFzeW5jaHJvbm91cywgb3Igc3luY2hyb25vdXMuICBZZXMsIGl0IGlzCgkgIC8vIGRlZXBseSB1Z2x5IHRvIHdyaXRlIEFQSXMgdGhpcyB3YXksIGJ1dCB0aGF0IHN0aWxsIGRvZXNuJ3QgbWVhbgoJICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlCgkgIC8vIGRlc2lnbmVkIHRvIGJlIHN5bmMvYXN5bmMgYWdub3N0aWMuCgkgIC8vIFRha2Ugbm90ZSBpZiB0aGUgX3JlYWQgY2FsbCBpcyBzeW5jIG9yIGFzeW5jIChpZSwgaWYgdGhlIHJlYWQgY2FsbAoJICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0CgkgIC8vICdyZWFkYWJsZScgZXRjLgoJICAvLwoJICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uCgkgIC8vIGlmIHdlIG5lZWQgYSByZWFkYWJsZSBldmVudCwgdGhlbiB3ZSBuZWVkIHRvIGRvIHNvbWUgcmVhZGluZy4KCgoJICB2YXIgZG9SZWFkID0gc3RhdGUubmVlZFJlYWRhYmxlOwoJICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7IC8vIGlmIHdlIGN1cnJlbnRseSBoYXZlIGxlc3MgdGhhbiB0aGUgaGlnaFdhdGVyTWFyaywgdGhlbiBhbHNvIHJlYWQgc29tZQoKCSAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCB8fCBzdGF0ZS5sZW5ndGggLSBuIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykgewoJICAgIGRvUmVhZCA9IHRydWU7CgkgICAgZGVidWcoJ2xlbmd0aCBsZXNzIHRoYW4gd2F0ZXJtYXJrJywgZG9SZWFkKTsKCSAgfSAvLyBob3dldmVyLCBpZiB3ZSd2ZSBlbmRlZCwgdGhlbiB0aGVyZSdzIG5vIHBvaW50LCBhbmQgaWYgd2UncmUgYWxyZWFkeQoJICAvLyByZWFkaW5nLCB0aGVuIGl0J3MgdW5uZWNlc3NhcnkuCgoKCSAgaWYgKHN0YXRlLmVuZGVkIHx8IHN0YXRlLnJlYWRpbmcpIHsKCSAgICBkb1JlYWQgPSBmYWxzZTsKCSAgICBkZWJ1ZygncmVhZGluZyBvciBlbmRlZCcsIGRvUmVhZCk7CgkgIH0gZWxzZSBpZiAoZG9SZWFkKSB7CgkgICAgZGVidWcoJ2RvIHJlYWQnKTsKCSAgICBzdGF0ZS5yZWFkaW5nID0gdHJ1ZTsKCSAgICBzdGF0ZS5zeW5jID0gdHJ1ZTsgLy8gaWYgdGhlIGxlbmd0aCBpcyBjdXJyZW50bHkgemVybywgdGhlbiB3ZSAqbmVlZCogYSByZWFkYWJsZSBldmVudC4KCgkgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsgLy8gY2FsbCBpbnRlcm5hbCByZWFkIG1ldGhvZAoKCSAgICB0aGlzLl9yZWFkKHN0YXRlLmhpZ2hXYXRlck1hcmspOwoKCSAgICBzdGF0ZS5zeW5jID0gZmFsc2U7IC8vIElmIF9yZWFkIHB1c2hlZCBkYXRhIHN5bmNocm9ub3VzbHksIHRoZW4gYHJlYWRpbmdgIHdpbGwgYmUgZmFsc2UsCgkgICAgLy8gYW5kIHdlIG5lZWQgdG8gcmUtZXZhbHVhdGUgaG93IG11Y2ggZGF0YSB3ZSBjYW4gcmV0dXJuIHRvIHRoZSB1c2VyLgoKCSAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIG4gPSBob3dNdWNoVG9SZWFkKG5PcmlnLCBzdGF0ZSk7CgkgIH0KCgkgIHZhciByZXQ7CgkgIGlmIChuID4gMCkgcmV0ID0gZnJvbUxpc3Qobiwgc3RhdGUpO2Vsc2UgcmV0ID0gbnVsbDsKCgkgIGlmIChyZXQgPT09IG51bGwpIHsKCSAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSBzdGF0ZS5sZW5ndGggPD0gc3RhdGUuaGlnaFdhdGVyTWFyazsKCSAgICBuID0gMDsKCSAgfSBlbHNlIHsKCSAgICBzdGF0ZS5sZW5ndGggLT0gbjsKCSAgICBzdGF0ZS5hd2FpdERyYWluID0gMDsKCSAgfQoKCSAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgewoJICAgIC8vIElmIHdlIGhhdmUgbm90aGluZyBpbiB0aGUgYnVmZmVyLCB0aGVuIHdlIHdhbnQgdG8ga25vdwoJICAgIC8vIGFzIHNvb24gYXMgd2UgKmRvKiBnZXQgc29tZXRoaW5nIGludG8gdGhlIGJ1ZmZlci4KCSAgICBpZiAoIXN0YXRlLmVuZGVkKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOyAvLyBJZiB3ZSB0cmllZCB0byByZWFkKCkgcGFzdCB0aGUgRU9GLCB0aGVuIGVtaXQgZW5kIG9uIHRoZSBuZXh0IHRpY2suCgoJICAgIGlmIChuT3JpZyAhPT0gbiAmJiBzdGF0ZS5lbmRlZCkgZW5kUmVhZGFibGUodGhpcyk7CgkgIH0KCgkgIGlmIChyZXQgIT09IG51bGwpIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7CgkgIHJldHVybiByZXQ7Cgl9OwoKCWZ1bmN0aW9uIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSkgewoJICBkZWJ1Zygnb25Fb2ZDaHVuaycpOwoJICBpZiAoc3RhdGUuZW5kZWQpIHJldHVybjsKCgkgIGlmIChzdGF0ZS5kZWNvZGVyKSB7CgkgICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTsKCgkgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkgewoJICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspOwoJICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwoJICAgIH0KCSAgfQoKCSAgc3RhdGUuZW5kZWQgPSB0cnVlOwoKCSAgaWYgKHN0YXRlLnN5bmMpIHsKCSAgICAvLyBpZiB3ZSBhcmUgc3luYywgd2FpdCB1bnRpbCBuZXh0IHRpY2sgdG8gZW1pdCB0aGUgZGF0YS4KCSAgICAvLyBPdGhlcndpc2Ugd2UgcmlzayBlbWl0dGluZyBkYXRhIGluIHRoZSBmbG93KCkKCSAgICAvLyB0aGUgcmVhZGFibGUgY29kZSB0cmlnZ2VycyBkdXJpbmcgYSByZWFkKCkgY2FsbAoJICAgIGVtaXRSZWFkYWJsZShzdHJlYW0pOwoJICB9IGVsc2UgewoJICAgIC8vIGVtaXQgJ3JlYWRhYmxlJyBub3cgdG8gbWFrZSBzdXJlIGl0IGdldHMgcGlja2VkIHVwLgoJICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlOwoKCSAgICBpZiAoIXN0YXRlLmVtaXR0ZWRSZWFkYWJsZSkgewoJICAgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTsKCSAgICAgIGVtaXRSZWFkYWJsZV8oc3RyZWFtKTsKCSAgICB9CgkgIH0KCX0gLy8gRG9uJ3QgZW1pdCByZWFkYWJsZSByaWdodCBhd2F5IGluIHN5bmMgbW9kZSwgYmVjYXVzZSB0aGlzIGNhbiB0cmlnZ2VyCgkvLyBhbm90aGVyIHJlYWQoKSBjYWxsID0+IHN0YWNrIG92ZXJmbG93LiAgVGhpcyB3YXksIGl0IG1pZ2h0IHRyaWdnZXIKCS8vIGEgbmV4dFRpY2sgcmVjdXJzaW9uIHdhcm5pbmcsIGJ1dCB0aGF0J3Mgbm90IHNvIGJhZC4KCgoJZnVuY3Rpb24gZW1pdFJlYWRhYmxlKHN0cmVhbSkgewoJICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgkgIGRlYnVnKCdlbWl0UmVhZGFibGUnLCBzdGF0ZS5uZWVkUmVhZGFibGUsIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSk7CgkgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlOwoKCSAgaWYgKCFzdGF0ZS5lbWl0dGVkUmVhZGFibGUpIHsKCSAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlJywgc3RhdGUuZmxvd2luZyk7CgkgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTsKCSAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRSZWFkYWJsZV8sIHN0cmVhbSk7CgkgIH0KCX0KCglmdW5jdGlvbiBlbWl0UmVhZGFibGVfKHN0cmVhbSkgewoJICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgkgIGRlYnVnKCdlbWl0UmVhZGFibGVfJywgc3RhdGUuZGVzdHJveWVkLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTsKCgkgIGlmICghc3RhdGUuZGVzdHJveWVkICYmIChzdGF0ZS5sZW5ndGggfHwgc3RhdGUuZW5kZWQpKSB7CgkgICAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7CgkgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7CgkgIH0gLy8gVGhlIHN0cmVhbSBuZWVkcyBhbm90aGVyIHJlYWRhYmxlIGV2ZW50IGlmCgkgIC8vIDEuIEl0IGlzIG5vdCBmbG93aW5nLCBhcyB0aGUgZmxvdyBtZWNoYW5pc20gd2lsbCB0YWtlCgkgIC8vICAgIGNhcmUgb2YgaXQuCgkgIC8vIDIuIEl0IGlzIG5vdCBlbmRlZC4KCSAgLy8gMy4gSXQgaXMgYmVsb3cgdGhlIGhpZ2hXYXRlck1hcmssIHNvIHdlIGNhbiBzY2hlZHVsZQoJICAvLyAgICBhbm90aGVyIHJlYWRhYmxlIGxhdGVyLgoKCgkgIHN0YXRlLm5lZWRSZWFkYWJsZSA9ICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPD0gc3RhdGUuaGlnaFdhdGVyTWFyazsKCSAgZmxvdyhzdHJlYW0pOwoJfSAvLyBhdCB0aGlzIHBvaW50LCB0aGUgdXNlciBoYXMgcHJlc3VtYWJseSBzZWVuIHRoZSAncmVhZGFibGUnIGV2ZW50LAoJLy8gYW5kIGNhbGxlZCByZWFkKCkgdG8gY29uc3VtZSBzb21lIGRhdGEuICB0aGF0IG1heSBoYXZlIHRyaWdnZXJlZAoJLy8gaW4gdHVybiBhbm90aGVyIF9yZWFkKG4pIGNhbGwsIGluIHdoaWNoIGNhc2UgcmVhZGluZyA9IHRydWUgaWYKCS8vIGl0J3MgaW4gcHJvZ3Jlc3MuCgkvLyBIb3dldmVyLCBpZiB3ZSdyZSBub3QgZW5kZWQsIG9yIHJlYWRpbmcsIGFuZCB0aGUgbGVuZ3RoIDwgaHdtLAoJLy8gdGhlbiBnbyBhaGVhZCBhbmQgdHJ5IHRvIHJlYWQgc29tZSBtb3JlIHByZWVtcHRpdmVseS4KCgoJZnVuY3Rpb24gbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKSB7CgkgIGlmICghc3RhdGUucmVhZGluZ01vcmUpIHsKCSAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IHRydWU7CgkgICAgcHJvY2Vzcy5uZXh0VGljayhtYXliZVJlYWRNb3JlXywgc3RyZWFtLCBzdGF0ZSk7CgkgIH0KCX0KCglmdW5jdGlvbiBtYXliZVJlYWRNb3JlXyhzdHJlYW0sIHN0YXRlKSB7CgkgIC8vIEF0dGVtcHQgdG8gcmVhZCBtb3JlIGRhdGEgaWYgd2Ugc2hvdWxkLgoJICAvLwoJICAvLyBUaGUgY29uZGl0aW9ucyBmb3IgcmVhZGluZyBtb3JlIGRhdGEgYXJlIChvbmUgb2YpOgoJICAvLyAtIE5vdCBlbm91Z2ggZGF0YSBidWZmZXJlZCAoc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykuIFRoZSBsb29wCgkgIC8vICAgaXMgcmVzcG9uc2libGUgZm9yIGZpbGxpbmcgdGhlIGJ1ZmZlciB3aXRoIGVub3VnaCBkYXRhIGlmIHN1Y2ggZGF0YQoJICAvLyAgIGlzIGF2YWlsYWJsZS4gSWYgaGlnaFdhdGVyTWFyayBpcyAwIGFuZCB3ZSBhcmUgbm90IGluIHRoZSBmbG93aW5nIG1vZGUKCSAgLy8gICB3ZSBzaG91bGQgX25vdF8gYXR0ZW1wdCB0byBidWZmZXIgYW55IGV4dHJhIGRhdGEuIFdlJ2xsIGdldCBtb3JlIGRhdGEKCSAgLy8gICB3aGVuIHRoZSBzdHJlYW0gY29uc3VtZXIgY2FsbHMgcmVhZCgpIGluc3RlYWQuCgkgIC8vIC0gTm8gZGF0YSBpbiB0aGUgYnVmZmVyLCBhbmQgdGhlIHN0cmVhbSBpcyBpbiBmbG93aW5nIG1vZGUuIEluIHRoaXMgbW9kZQoJICAvLyAgIHRoZSBsb29wIGJlbG93IGlzIHJlc3BvbnNpYmxlIGZvciBlbnN1cmluZyByZWFkKCkgaXMgY2FsbGVkLiBGYWlsaW5nIHRvCgkgIC8vICAgY2FsbCByZWFkIGhlcmUgd291bGQgYWJvcnQgdGhlIGZsb3cgYW5kIHRoZXJlJ3Mgbm8gb3RoZXIgbWVjaGFuaXNtIGZvcgoJICAvLyAgIGNvbnRpbnVpbmcgdGhlIGZsb3cgaWYgdGhlIHN0cmVhbSBjb25zdW1lciBoYXMganVzdCBzdWJzY3JpYmVkIHRvIHRoZQoJICAvLyAgICdkYXRhJyBldmVudC4KCSAgLy8KCSAgLy8gSW4gYWRkaXRpb24gdG8gdGhlIGFib3ZlIGNvbmRpdGlvbnMgdG8ga2VlcCByZWFkaW5nIGRhdGEsIHRoZSBmb2xsb3dpbmcKCSAgLy8gY29uZGl0aW9ucyBwcmV2ZW50IHRoZSBkYXRhIGZyb20gYmVpbmcgcmVhZDoKCSAgLy8gLSBUaGUgc3RyZWFtIGhhcyBlbmRlZCAoc3RhdGUuZW5kZWQpLgoJICAvLyAtIFRoZXJlIGlzIGFscmVhZHkgYSBwZW5kaW5nICdyZWFkJyBvcGVyYXRpb24gKHN0YXRlLnJlYWRpbmcpLiBUaGlzIGlzIGEKCSAgLy8gICBjYXNlIHdoZXJlIHRoZSB0aGUgc3RyZWFtIGhhcyBjYWxsZWQgdGhlIGltcGxlbWVudGF0aW9uIGRlZmluZWQgX3JlYWQoKQoJICAvLyAgIG1ldGhvZCwgYnV0IHRoZXkgYXJlIHByb2Nlc3NpbmcgdGhlIGNhbGwgYXN5bmNocm9ub3VzbHkgYW5kIGhhdmUgX25vdF8KCSAgLy8gICBjYWxsZWQgcHVzaCgpIHdpdGggbmV3IGRhdGEuIEluIHRoaXMgY2FzZSB3ZSBza2lwIHBlcmZvcm1pbmcgbW9yZQoJICAvLyAgIHJlYWQoKXMuIFRoZSBleGVjdXRpb24gZW5kcyBpbiB0aGlzIG1ldGhvZCBhZ2FpbiBhZnRlciB0aGUgX3JlYWQoKSBlbmRzCgkgIC8vICAgdXAgY2FsbGluZyBwdXNoKCkgd2l0aCBtb3JlIGRhdGEuCgkgIHdoaWxlICghc3RhdGUucmVhZGluZyAmJiAhc3RhdGUuZW5kZWQgJiYgKHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGggPT09IDApKSB7CgkgICAgdmFyIGxlbiA9IHN0YXRlLmxlbmd0aDsKCSAgICBkZWJ1ZygnbWF5YmVSZWFkTW9yZSByZWFkIDAnKTsKCSAgICBzdHJlYW0ucmVhZCgwKTsKCSAgICBpZiAobGVuID09PSBzdGF0ZS5sZW5ndGgpIC8vIGRpZG4ndCBnZXQgYW55IGRhdGEsIHN0b3Agc3Bpbm5pbmcuCgkgICAgICBicmVhazsKCSAgfQoKCSAgc3RhdGUucmVhZGluZ01vcmUgPSBmYWxzZTsKCX0gLy8gYWJzdHJhY3QgbWV0aG9kLiAgdG8gYmUgb3ZlcnJpZGRlbiBpbiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgoJLy8gY2FsbCBjYihlciwgZGF0YSkgd2hlcmUgZGF0YSBpcyA8PSBuIGluIGxlbmd0aC4KCS8vIGZvciB2aXJ0dWFsIChub24tc3RyaW5nLCBub24tYnVmZmVyKSBzdHJlYW1zLCAibGVuZ3RoIiBpcyBzb21ld2hhdAoJLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLgoKCglSZWFkYWJsZS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAobikgewoJICBlcnJvck9yRGVzdHJveSQxKHRoaXMsIG5ldyBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCgnX3JlYWQoKScpKTsKCX07CgoJUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoZGVzdCwgcGlwZU9wdHMpIHsKCSAgdmFyIHNyYyA9IHRoaXM7CgkgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgoJICBzd2l0Y2ggKHN0YXRlLnBpcGVzQ291bnQpIHsKCSAgICBjYXNlIDA6CgkgICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7CgkgICAgICBicmVhazsKCgkgICAgY2FzZSAxOgoJICAgICAgc3RhdGUucGlwZXMgPSBbc3RhdGUucGlwZXMsIGRlc3RdOwoJICAgICAgYnJlYWs7CgoJICAgIGRlZmF1bHQ6CgkgICAgICBzdGF0ZS5waXBlcy5wdXNoKGRlc3QpOwoJICAgICAgYnJlYWs7CgkgIH0KCgkgIHN0YXRlLnBpcGVzQ291bnQgKz0gMTsKCSAgZGVidWcoJ3BpcGUgY291bnQ9JWQgb3B0cz0laicsIHN0YXRlLnBpcGVzQ291bnQsIHBpcGVPcHRzKTsKCSAgdmFyIGRvRW5kID0gKCFwaXBlT3B0cyB8fCBwaXBlT3B0cy5lbmQgIT09IGZhbHNlKSAmJiBkZXN0ICE9PSBwcm9jZXNzLnN0ZG91dCAmJiBkZXN0ICE9PSBwcm9jZXNzLnN0ZGVycjsKCSAgdmFyIGVuZEZuID0gZG9FbmQgPyBvbmVuZCA6IHVucGlwZTsKCSAgaWYgKHN0YXRlLmVuZEVtaXR0ZWQpIHByb2Nlc3MubmV4dFRpY2soZW5kRm4pO2Vsc2Ugc3JjLm9uY2UoJ2VuZCcsIGVuZEZuKTsKCSAgZGVzdC5vbigndW5waXBlJywgb251bnBpcGUpOwoKCSAgZnVuY3Rpb24gb251bnBpcGUocmVhZGFibGUsIHVucGlwZUluZm8pIHsKCSAgICBkZWJ1Zygnb251bnBpcGUnKTsKCgkgICAgaWYgKHJlYWRhYmxlID09PSBzcmMpIHsKCSAgICAgIGlmICh1bnBpcGVJbmZvICYmIHVucGlwZUluZm8uaGFzVW5waXBlZCA9PT0gZmFsc2UpIHsKCSAgICAgICAgdW5waXBlSW5mby5oYXNVbnBpcGVkID0gdHJ1ZTsKCSAgICAgICAgY2xlYW51cCgpOwoJICAgICAgfQoJICAgIH0KCSAgfQoKCSAgZnVuY3Rpb24gb25lbmQoKSB7CgkgICAgZGVidWcoJ29uZW5kJyk7CgkgICAgZGVzdC5lbmQoKTsKCSAgfSAvLyB3aGVuIHRoZSBkZXN0IGRyYWlucywgaXQgcmVkdWNlcyB0aGUgYXdhaXREcmFpbiBjb3VudGVyCgkgIC8vIG9uIHRoZSBzb3VyY2UuICBUaGlzIHdvdWxkIGJlIG1vcmUgZWxlZ2FudCB3aXRoIGEgLm9uY2UoKQoJICAvLyBoYW5kbGVyIGluIGZsb3coKSwgYnV0IGFkZGluZyBhbmQgcmVtb3ZpbmcgcmVwZWF0ZWRseSBpcwoJICAvLyB0b28gc2xvdy4KCgoJICB2YXIgb25kcmFpbiA9IHBpcGVPbkRyYWluKHNyYyk7CgkgIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7CgkgIHZhciBjbGVhbmVkVXAgPSBmYWxzZTsKCgkgIGZ1bmN0aW9uIGNsZWFudXAoKSB7CgkgICAgZGVidWcoJ2NsZWFudXAnKTsgLy8gY2xlYW51cCBldmVudCBoYW5kbGVycyBvbmNlIHRoZSBwaXBlIGlzIGJyb2tlbgoKCSAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpOwoJICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTsKCSAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pOwoJICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CgkgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigndW5waXBlJywgb251bnBpcGUpOwoJICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpOwoJICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgdW5waXBlKTsKCSAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpOwoJICAgIGNsZWFuZWRVcCA9IHRydWU7IC8vIGlmIHRoZSByZWFkZXIgaXMgd2FpdGluZyBmb3IgYSBkcmFpbiBldmVudCBmcm9tIHRoaXMKCSAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnQKCSAgICAvLyBmbG93aW5nIGFnYWluLgoJICAgIC8vIFNvLCBpZiB0aGlzIGlzIGF3YWl0aW5nIGEgZHJhaW4sIHRoZW4gd2UganVzdCBjYWxsIGl0IG5vdy4KCSAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuCgoJICAgIGlmIChzdGF0ZS5hd2FpdERyYWluICYmICghZGVzdC5fd3JpdGFibGVTdGF0ZSB8fCBkZXN0Ll93cml0YWJsZVN0YXRlLm5lZWREcmFpbikpIG9uZHJhaW4oKTsKCSAgfQoKCSAgc3JjLm9uKCdkYXRhJywgb25kYXRhKTsKCgkgIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykgewoJICAgIGRlYnVnKCdvbmRhdGEnKTsKCSAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7CgkgICAgZGVidWcoJ2Rlc3Qud3JpdGUnLCByZXQpOwoKCSAgICBpZiAocmV0ID09PSBmYWxzZSkgewoJICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlCgkgICAgICAvLyB0byBnZXQgc3R1Y2sgaW4gYSBwZXJtYW5lbnRseSBwYXVzZWQgc3RhdGUgaWYgdGhhdCB3cml0ZQoJICAgICAgLy8gYWxzbyByZXR1cm5lZCBmYWxzZS4KCSAgICAgIC8vID0+IENoZWNrIHdoZXRoZXIgYGRlc3RgIGlzIHN0aWxsIGEgcGlwaW5nIGRlc3RpbmF0aW9uLgoJICAgICAgaWYgKChzdGF0ZS5waXBlc0NvdW50ID09PSAxICYmIHN0YXRlLnBpcGVzID09PSBkZXN0IHx8IHN0YXRlLnBpcGVzQ291bnQgPiAxICYmIGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpICE9PSAtMSkgJiYgIWNsZWFuZWRVcCkgewoJICAgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJywgc3RhdGUuYXdhaXREcmFpbik7CgkgICAgICAgIHN0YXRlLmF3YWl0RHJhaW4rKzsKCSAgICAgIH0KCgkgICAgICBzcmMucGF1c2UoKTsKCSAgICB9CgkgIH0gLy8gaWYgdGhlIGRlc3QgaGFzIGFuIGVycm9yLCB0aGVuIHN0b3AgcGlwaW5nIGludG8gaXQuCgkgIC8vIGhvd2V2ZXIsIGRvbid0IHN1cHByZXNzIHRoZSB0aHJvd2luZyBiZWhhdmlvciBmb3IgdGhpcy4KCgoJICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7CgkgICAgZGVidWcoJ29uZXJyb3InLCBlcik7CgkgICAgdW5waXBlKCk7CgkgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKCSAgICBpZiAoRUVsaXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKSBlcnJvck9yRGVzdHJveSQxKGRlc3QsIGVyKTsKCSAgfSAvLyBNYWtlIHN1cmUgb3VyIGVycm9yIGhhbmRsZXIgaXMgYXR0YWNoZWQgYmVmb3JlIHVzZXJsYW5kIG9uZXMuCgoKCSAgcHJlcGVuZExpc3RlbmVyKGRlc3QsICdlcnJvcicsIG9uZXJyb3IpOyAvLyBCb3RoIGNsb3NlIGFuZCBmaW5pc2ggc2hvdWxkIHRyaWdnZXIgdW5waXBlLCBidXQgb25seSBvbmNlLgoKCSAgZnVuY3Rpb24gb25jbG9zZSgpIHsKCSAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7CgkgICAgdW5waXBlKCk7CgkgIH0KCgkgIGRlc3Qub25jZSgnY2xvc2UnLCBvbmNsb3NlKTsKCgkgIGZ1bmN0aW9uIG9uZmluaXNoKCkgewoJICAgIGRlYnVnKCdvbmZpbmlzaCcpOwoJICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7CgkgICAgdW5waXBlKCk7CgkgIH0KCgkgIGRlc3Qub25jZSgnZmluaXNoJywgb25maW5pc2gpOwoKCSAgZnVuY3Rpb24gdW5waXBlKCkgewoJICAgIGRlYnVnKCd1bnBpcGUnKTsKCSAgICBzcmMudW5waXBlKGRlc3QpOwoJICB9IC8vIHRlbGwgdGhlIGRlc3QgdGhhdCBpdCdzIGJlaW5nIHBpcGVkIHRvCgoKCSAgZGVzdC5lbWl0KCdwaXBlJywgc3JjKTsgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LgoKCSAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7CgkgICAgZGVidWcoJ3BpcGUgcmVzdW1lJyk7CgkgICAgc3JjLnJlc3VtZSgpOwoJICB9CgoJICByZXR1cm4gZGVzdDsKCX07CgoJZnVuY3Rpb24gcGlwZU9uRHJhaW4oc3JjKSB7CgkgIHJldHVybiBmdW5jdGlvbiBwaXBlT25EcmFpbkZ1bmN0aW9uUmVzdWx0KCkgewoJICAgIHZhciBzdGF0ZSA9IHNyYy5fcmVhZGFibGVTdGF0ZTsKCSAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTsKCSAgICBpZiAoc3RhdGUuYXdhaXREcmFpbikgc3RhdGUuYXdhaXREcmFpbi0tOwoKCSAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiA9PT0gMCAmJiBFRWxpc3RlbmVyQ291bnQoc3JjLCAnZGF0YScpKSB7CgkgICAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsKCSAgICAgIGZsb3coc3JjKTsKCSAgICB9CgkgIH07Cgl9CgoJUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7CgkgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgkgIHZhciB1bnBpcGVJbmZvID0gewoJICAgIGhhc1VucGlwZWQ6IGZhbHNlCgkgIH07IC8vIGlmIHdlJ3JlIG5vdCBwaXBpbmcgYW55d2hlcmUsIHRoZW4gZG8gbm90aGluZy4KCgkgIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAwKSByZXR1cm4gdGhpczsgLy8ganVzdCBvbmUgZGVzdGluYXRpb24uICBtb3N0IGNvbW1vbiBjYXNlLgoKCSAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHsKCSAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS4KCSAgICBpZiAoZGVzdCAmJiBkZXN0ICE9PSBzdGF0ZS5waXBlcykgcmV0dXJuIHRoaXM7CgkgICAgaWYgKCFkZXN0KSBkZXN0ID0gc3RhdGUucGlwZXM7IC8vIGdvdCBhIG1hdGNoLgoKCSAgICBzdGF0ZS5waXBlcyA9IG51bGw7CgkgICAgc3RhdGUucGlwZXNDb3VudCA9IDA7CgkgICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwoJICAgIGlmIChkZXN0KSBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMsIHVucGlwZUluZm8pOwoJICAgIHJldHVybiB0aGlzOwoJICB9IC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuCgoKCSAgaWYgKCFkZXN0KSB7CgkgICAgLy8gcmVtb3ZlIGFsbC4KCSAgICB2YXIgZGVzdHMgPSBzdGF0ZS5waXBlczsKCSAgICB2YXIgbGVuID0gc3RhdGUucGlwZXNDb3VudDsKCSAgICBzdGF0ZS5waXBlcyA9IG51bGw7CgkgICAgc3RhdGUucGlwZXNDb3VudCA9IDA7CgkgICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwoKCSAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CgkgICAgICBkZXN0c1tpXS5lbWl0KCd1bnBpcGUnLCB0aGlzLCB7CgkgICAgICAgIGhhc1VucGlwZWQ6IGZhbHNlCgkgICAgICB9KTsKCSAgICB9CgoJICAgIHJldHVybiB0aGlzOwoJICB9IC8vIHRyeSB0byBmaW5kIHRoZSByaWdodCBvbmUuCgoKCSAgdmFyIGluZGV4ID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7CgkgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiB0aGlzOwoJICBzdGF0ZS5waXBlcy5zcGxpY2UoaW5kZXgsIDEpOwoJICBzdGF0ZS5waXBlc0NvdW50IC09IDE7CgkgIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdOwoJICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMsIHVucGlwZUluZm8pOwoJICByZXR1cm4gdGhpczsKCX07IC8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3IKCS8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nCgoKCVJlYWRhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldiwgZm4pIHsKCSAgdmFyIHJlcyA9IHN0cmVhbUJyb3dzZXIucHJvdG90eXBlLm9uLmNhbGwodGhpcywgZXYsIGZuKTsKCSAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCgkgIGlmIChldiA9PT0gJ2RhdGEnKSB7CgkgICAgLy8gdXBkYXRlIHJlYWRhYmxlTGlzdGVuaW5nIHNvIHRoYXQgcmVzdW1lKCkgbWF5IGJlIGEgbm8tb3AKCSAgICAvLyBhIGZldyBsaW5lcyBkb3duLiBUaGlzIGlzIG5lZWRlZCB0byBzdXBwb3J0IG9uY2UoJ3JlYWRhYmxlJykuCgkgICAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSB0aGlzLmxpc3RlbmVyQ291bnQoJ3JlYWRhYmxlJykgPiAwOyAvLyBUcnkgc3RhcnQgZmxvd2luZyBvbiBuZXh0IHRpY2sgaWYgc3RyZWFtIGlzbid0IGV4cGxpY2l0bHkgcGF1c2VkCgoJICAgIGlmIChzdGF0ZS5mbG93aW5nICE9PSBmYWxzZSkgdGhpcy5yZXN1bWUoKTsKCSAgfSBlbHNlIGlmIChldiA9PT0gJ3JlYWRhYmxlJykgewoJICAgIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiAhc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcpIHsKCSAgICAgIHN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nID0gc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKCSAgICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTsKCSAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwoJICAgICAgZGVidWcoJ29uIHJlYWRhYmxlJywgc3RhdGUubGVuZ3RoLCBzdGF0ZS5yZWFkaW5nKTsKCgkgICAgICBpZiAoc3RhdGUubGVuZ3RoKSB7CgkgICAgICAgIGVtaXRSZWFkYWJsZSh0aGlzKTsKCSAgICAgIH0gZWxzZSBpZiAoIXN0YXRlLnJlYWRpbmcpIHsKCSAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhuUmVhZGluZ05leHRUaWNrLCB0aGlzKTsKCSAgICAgIH0KCSAgICB9CgkgIH0KCgkgIHJldHVybiByZXM7Cgl9OwoKCVJlYWRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IFJlYWRhYmxlLnByb3RvdHlwZS5vbjsKCglSZWFkYWJsZS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXYsIGZuKSB7CgkgIHZhciByZXMgPSBzdHJlYW1Ccm93c2VyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lci5jYWxsKHRoaXMsIGV2LCBmbik7CgoJICBpZiAoZXYgPT09ICdyZWFkYWJsZScpIHsKCSAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIGlmIHRoZXJlIGlzIHNvbWVvbmUgc3RpbGwgbGlzdGVuaW5nIHRvCgkgICAgLy8gcmVhZGFibGUgYW5kIHJlc2V0IHRoZSBzdGF0ZS4gSG93ZXZlciB0aGlzIG5lZWRzIHRvIGhhcHBlbgoJICAgIC8vIGFmdGVyIHJlYWRhYmxlIGhhcyBiZWVuIGVtaXR0ZWQgYnV0IGJlZm9yZSBJL08gKG5leHRUaWNrKSB0bwoJICAgIC8vIHN1cHBvcnQgb25jZSgncmVhZGFibGUnLCBmbikgY3ljbGVzLiBUaGlzIG1lYW5zIHRoYXQgY2FsbGluZwoJICAgIC8vIHJlc3VtZSB3aXRoaW4gdGhlIHNhbWUgdGljayB3aWxsIGhhdmUgbm8KCSAgICAvLyBlZmZlY3QuCgkgICAgcHJvY2Vzcy5uZXh0VGljayh1cGRhdGVSZWFkYWJsZUxpc3RlbmluZywgdGhpcyk7CgkgIH0KCgkgIHJldHVybiByZXM7Cgl9OwoKCVJlYWRhYmxlLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZXYpIHsKCSAgdmFyIHJlcyA9IHN0cmVhbUJyb3dzZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoKCSAgaWYgKGV2ID09PSAncmVhZGFibGUnIHx8IGV2ID09PSB1bmRlZmluZWQpIHsKCSAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIGlmIHRoZXJlIGlzIHNvbWVvbmUgc3RpbGwgbGlzdGVuaW5nIHRvCgkgICAgLy8gcmVhZGFibGUgYW5kIHJlc2V0IHRoZSBzdGF0ZS4gSG93ZXZlciB0aGlzIG5lZWRzIHRvIGhhcHBlbgoJICAgIC8vIGFmdGVyIHJlYWRhYmxlIGhhcyBiZWVuIGVtaXR0ZWQgYnV0IGJlZm9yZSBJL08gKG5leHRUaWNrKSB0bwoJICAgIC8vIHN1cHBvcnQgb25jZSgncmVhZGFibGUnLCBmbikgY3ljbGVzLiBUaGlzIG1lYW5zIHRoYXQgY2FsbGluZwoJICAgIC8vIHJlc3VtZSB3aXRoaW4gdGhlIHNhbWUgdGljayB3aWxsIGhhdmUgbm8KCSAgICAvLyBlZmZlY3QuCgkgICAgcHJvY2Vzcy5uZXh0VGljayh1cGRhdGVSZWFkYWJsZUxpc3RlbmluZywgdGhpcyk7CgkgIH0KCgkgIHJldHVybiByZXM7Cgl9OwoKCWZ1bmN0aW9uIHVwZGF0ZVJlYWRhYmxlTGlzdGVuaW5nKHNlbGYpIHsKCSAgdmFyIHN0YXRlID0gc2VsZi5fcmVhZGFibGVTdGF0ZTsKCSAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSBzZWxmLmxpc3RlbmVyQ291bnQoJ3JlYWRhYmxlJykgPiAwOwoKCSAgaWYgKHN0YXRlLnJlc3VtZVNjaGVkdWxlZCAmJiAhc3RhdGUucGF1c2VkKSB7CgkgICAgLy8gZmxvd2luZyBuZWVkcyB0byBiZSBzZXQgdG8gdHJ1ZSBub3csIG90aGVyd2lzZQoJICAgIC8vIHRoZSB1cGNvbWluZyByZXN1bWUgd2lsbCBub3QgZmxvdy4KCSAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsgLy8gY3J1ZGUgd2F5IHRvIGNoZWNrIGlmIHdlIHNob3VsZCByZXN1bWUKCSAgfSBlbHNlIGlmIChzZWxmLmxpc3RlbmVyQ291bnQoJ2RhdGEnKSA+IDApIHsKCSAgICBzZWxmLnJlc3VtZSgpOwoJICB9Cgl9CgoJZnVuY3Rpb24gblJlYWRpbmdOZXh0VGljayhzZWxmKSB7CgkgIGRlYnVnKCdyZWFkYWJsZSBuZXh0dGljayByZWFkIDAnKTsKCSAgc2VsZi5yZWFkKDApOwoJfSAvLyBwYXVzZSgpIGFuZCByZXN1bWUoKSBhcmUgcmVtbmFudHMgb2YgdGhlIGxlZ2FjeSByZWFkYWJsZSBzdHJlYW0gQVBJCgkvLyBJZiB0aGUgdXNlciB1c2VzIHRoZW0sIHRoZW4gc3dpdGNoIGludG8gb2xkIG1vZGUuCgoKCVJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7CgkgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgoJICBpZiAoIXN0YXRlLmZsb3dpbmcpIHsKCSAgICBkZWJ1ZygncmVzdW1lJyk7IC8vIHdlIGZsb3cgb25seSBpZiB0aGVyZSBpcyBubyBvbmUgbGlzdGVuaW5nCgkgICAgLy8gZm9yIHJlYWRhYmxlLCBidXQgd2Ugc3RpbGwgaGF2ZSB0byBjYWxsCgkgICAgLy8gcmVzdW1lKCkKCgkgICAgc3RhdGUuZmxvd2luZyA9ICFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZzsKCSAgICByZXN1bWUodGhpcywgc3RhdGUpOwoJICB9CgoJICBzdGF0ZS5wYXVzZWQgPSBmYWxzZTsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCWZ1bmN0aW9uIHJlc3VtZShzdHJlYW0sIHN0YXRlKSB7CgkgIGlmICghc3RhdGUucmVzdW1lU2NoZWR1bGVkKSB7CgkgICAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gdHJ1ZTsKCSAgICBwcm9jZXNzLm5leHRUaWNrKHJlc3VtZV8sIHN0cmVhbSwgc3RhdGUpOwoJICB9Cgl9CgoJZnVuY3Rpb24gcmVzdW1lXyhzdHJlYW0sIHN0YXRlKSB7CgkgIGRlYnVnKCdyZXN1bWUnLCBzdGF0ZS5yZWFkaW5nKTsKCgkgIGlmICghc3RhdGUucmVhZGluZykgewoJICAgIHN0cmVhbS5yZWFkKDApOwoJICB9CgoJICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSBmYWxzZTsKCSAgc3RyZWFtLmVtaXQoJ3Jlc3VtZScpOwoJICBmbG93KHN0cmVhbSk7CgkgIGlmIChzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5yZWFkaW5nKSBzdHJlYW0ucmVhZCgwKTsKCX0KCglSZWFkYWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7CgkgIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpOwoKCSAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyAhPT0gZmFsc2UpIHsKCSAgICBkZWJ1ZygncGF1c2UnKTsKCSAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPSBmYWxzZTsKCSAgICB0aGlzLmVtaXQoJ3BhdXNlJyk7CgkgIH0KCgkgIHRoaXMuX3JlYWRhYmxlU3RhdGUucGF1c2VkID0gdHJ1ZTsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCWZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7CgkgIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKCSAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTsKCgkgIHdoaWxlIChzdGF0ZS5mbG93aW5nICYmIHN0cmVhbS5yZWFkKCkgIT09IG51bGwpIHsKCSAgfQoJfSAvLyB3cmFwIGFuIG9sZC1zdHlsZSBzdHJlYW0gYXMgdGhlIGFzeW5jIGRhdGEgc291cmNlLgoJLy8gVGhpcyBpcyAqbm90KiBwYXJ0IG9mIHRoZSByZWFkYWJsZSBzdHJlYW0gaW50ZXJmYWNlLgoJLy8gSXQgaXMgYW4gdWdseSB1bmZvcnR1bmF0ZSBtZXNzIG9mIGhpc3RvcnkuCgoKCVJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKHN0cmVhbSkgewoJICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCSAgdmFyIHBhdXNlZCA9IGZhbHNlOwoJICBzdHJlYW0ub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHsKCSAgICBkZWJ1Zygnd3JhcHBlZCBlbmQnKTsKCgkgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7CgkgICAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpOwoJICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkgX3RoaXMucHVzaChjaHVuayk7CgkgICAgfQoKCSAgICBfdGhpcy5wdXNoKG51bGwpOwoJICB9KTsKCSAgc3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7CgkgICAgZGVidWcoJ3dyYXBwZWQgZGF0YScpOwoJICAgIGlmIChzdGF0ZS5kZWNvZGVyKSBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspOyAvLyBkb24ndCBza2lwIG92ZXIgZmFsc3kgdmFsdWVzIGluIG9iamVjdE1vZGUKCgkgICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgJiYgKGNodW5rID09PSBudWxsIHx8IGNodW5rID09PSB1bmRlZmluZWQpKSByZXR1cm47ZWxzZSBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgKCFjaHVuayB8fCAhY2h1bmsubGVuZ3RoKSkgcmV0dXJuOwoKCSAgICB2YXIgcmV0ID0gX3RoaXMucHVzaChjaHVuayk7CgoJICAgIGlmICghcmV0KSB7CgkgICAgICBwYXVzZWQgPSB0cnVlOwoJICAgICAgc3RyZWFtLnBhdXNlKCk7CgkgICAgfQoJICB9KTsgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLgoJICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy4KCgkgIGZvciAodmFyIGkgaW4gc3RyZWFtKSB7CgkgICAgaWYgKHRoaXNbaV0gPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc3RyZWFtW2ldID09PSAnZnVuY3Rpb24nKSB7CgkgICAgICB0aGlzW2ldID0gZnVuY3Rpb24gbWV0aG9kV3JhcChtZXRob2QpIHsKCSAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG1ldGhvZFdyYXBSZXR1cm5GdW5jdGlvbigpIHsKCSAgICAgICAgICByZXR1cm4gc3RyZWFtW21ldGhvZF0uYXBwbHkoc3RyZWFtLCBhcmd1bWVudHMpOwoJICAgICAgICB9OwoJICAgICAgfShpKTsKCSAgICB9CgkgIH0gLy8gcHJveHkgY2VydGFpbiBpbXBvcnRhbnQgZXZlbnRzLgoKCgkgIGZvciAodmFyIG4gPSAwOyBuIDwga1Byb3h5RXZlbnRzLmxlbmd0aDsgbisrKSB7CgkgICAgc3RyZWFtLm9uKGtQcm94eUV2ZW50c1tuXSwgdGhpcy5lbWl0LmJpbmQodGhpcywga1Byb3h5RXZlbnRzW25dKSk7CgkgIH0gLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZQoJICAvLyB1bmRlcmx5aW5nIHN0cmVhbS4KCgoJICB0aGlzLl9yZWFkID0gZnVuY3Rpb24gKG4pIHsKCSAgICBkZWJ1Zygnd3JhcHBlZCBfcmVhZCcsIG4pOwoKCSAgICBpZiAocGF1c2VkKSB7CgkgICAgICBwYXVzZWQgPSBmYWxzZTsKCSAgICAgIHN0cmVhbS5yZXN1bWUoKTsKCSAgICB9CgkgIH07CgoJICByZXR1cm4gdGhpczsKCX07CgoJaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicpIHsKCSAgUmVhZGFibGUucHJvdG90eXBlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsKCSAgICBpZiAoY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yJDEgPT09IHVuZGVmaW5lZCkgewoJICAgICAgY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yJDEgPSBhc3luY19pdGVyYXRvcjsKCSAgICB9CgoJICAgIHJldHVybiBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3IkMSh0aGlzKTsKCSAgfTsKCX0KCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAncmVhZGFibGVIaWdoV2F0ZXJNYXJrJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrOwoJICB9Cgl9KTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZS5wcm90b3R5cGUsICdyZWFkYWJsZUJ1ZmZlcicsIHsKCSAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKCSAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCgkgIC8vIHVzZXJsYW5kIHdpbGwgZmFpbAoJICBlbnVtZXJhYmxlOiBmYWxzZSwKCSAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUgJiYgdGhpcy5fcmVhZGFibGVTdGF0ZS5idWZmZXI7CgkgIH0KCX0pOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgJ3JlYWRhYmxlRmxvd2luZycsIHsKCSAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKCSAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCgkgIC8vIHVzZXJsYW5kIHdpbGwgZmFpbAoJICBlbnVtZXJhYmxlOiBmYWxzZSwKCSAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZzsKCSAgfSwKCSAgc2V0OiBmdW5jdGlvbiBzZXQoc3RhdGUpIHsKCSAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSkgewoJICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID0gc3RhdGU7CgkgICAgfQoJICB9Cgl9KTsgLy8gZXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LgoKCVJlYWRhYmxlLl9mcm9tTGlzdCA9IGZyb21MaXN0OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgJ3JlYWRhYmxlTGVuZ3RoJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5sZW5ndGg7CgkgIH0KCX0pOyAvLyBQbHVjayBvZmYgbiBieXRlcyBmcm9tIGFuIGFycmF5IG9mIGJ1ZmZlcnMuCgkvLyBMZW5ndGggaXMgdGhlIGNvbWJpbmVkIGxlbmd0aHMgb2YgYWxsIHRoZSBidWZmZXJzIGluIHRoZSBsaXN0LgoJLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmcKCS8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuCgoJZnVuY3Rpb24gZnJvbUxpc3Qobiwgc3RhdGUpIHsKCSAgLy8gbm90aGluZyBidWZmZXJlZAoJICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsKCSAgdmFyIHJldDsKCSAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldCA9IHN0YXRlLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYgKCFuIHx8IG4gPj0gc3RhdGUubGVuZ3RoKSB7CgkgICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBsaXN0CgkgICAgaWYgKHN0YXRlLmRlY29kZXIpIHJldCA9IHN0YXRlLmJ1ZmZlci5qb2luKCcnKTtlbHNlIGlmIChzdGF0ZS5idWZmZXIubGVuZ3RoID09PSAxKSByZXQgPSBzdGF0ZS5idWZmZXIuZmlyc3QoKTtlbHNlIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25jYXQoc3RhdGUubGVuZ3RoKTsKCSAgICBzdGF0ZS5idWZmZXIuY2xlYXIoKTsKCSAgfSBlbHNlIHsKCSAgICAvLyByZWFkIHBhcnQgb2YgbGlzdAoJICAgIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25zdW1lKG4sIHN0YXRlLmRlY29kZXIpOwoJICB9CgkgIHJldHVybiByZXQ7Cgl9CgoJZnVuY3Rpb24gZW5kUmVhZGFibGUoc3RyZWFtKSB7CgkgIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKCSAgZGVidWcoJ2VuZFJlYWRhYmxlJywgc3RhdGUuZW5kRW1pdHRlZCk7CgoJICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQpIHsKCSAgICBzdGF0ZS5lbmRlZCA9IHRydWU7CgkgICAgcHJvY2Vzcy5uZXh0VGljayhlbmRSZWFkYWJsZU5ULCBzdGF0ZSwgc3RyZWFtKTsKCSAgfQoJfQoKCWZ1bmN0aW9uIGVuZFJlYWRhYmxlTlQoc3RhdGUsIHN0cmVhbSkgewoJICBkZWJ1ZygnZW5kUmVhZGFibGVOVCcsIHN0YXRlLmVuZEVtaXR0ZWQsIHN0YXRlLmxlbmd0aCk7IC8vIENoZWNrIHRoYXQgd2UgZGlkbid0IGdldCBvbmUgbGFzdCB1bnNoaWZ0LgoKCSAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkgewoJICAgIHN0YXRlLmVuZEVtaXR0ZWQgPSB0cnVlOwoJICAgIHN0cmVhbS5yZWFkYWJsZSA9IGZhbHNlOwoJICAgIHN0cmVhbS5lbWl0KCdlbmQnKTsKCgkgICAgaWYgKHN0YXRlLmF1dG9EZXN0cm95KSB7CgkgICAgICAvLyBJbiBjYXNlIG9mIGR1cGxleCBzdHJlYW1zIHdlIG5lZWQgYSB3YXkgdG8gZGV0ZWN0CgkgICAgICAvLyBpZiB0aGUgd3JpdGFibGUgc2lkZSBpcyByZWFkeSBmb3IgYXV0b0Rlc3Ryb3kgYXMgd2VsbAoJICAgICAgdmFyIHdTdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTsKCgkgICAgICBpZiAoIXdTdGF0ZSB8fCB3U3RhdGUuYXV0b0Rlc3Ryb3kgJiYgd1N0YXRlLmZpbmlzaGVkKSB7CgkgICAgICAgIHN0cmVhbS5kZXN0cm95KCk7CgkgICAgICB9CgkgICAgfQoJICB9Cgl9CgoJaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicpIHsKCSAgUmVhZGFibGUuZnJvbSA9IGZ1bmN0aW9uIChpdGVyYWJsZSwgb3B0cykgewoJICAgIGlmIChmcm9tID09PSB1bmRlZmluZWQpIHsKCSAgICAgIGZyb20gPSBmcm9tQnJvd3NlcjsKCSAgICB9CgoJICAgIHJldHVybiBmcm9tKFJlYWRhYmxlLCBpdGVyYWJsZSwgb3B0cyk7CgkgIH07Cgl9CgoJZnVuY3Rpb24gaW5kZXhPZih4cywgeCkgewoJICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykgewoJICAgIGlmICh4c1tpXSA9PT0geCkgcmV0dXJuIGk7CgkgIH0KCgkgIHJldHVybiAtMTsKCX0KCgkvKioKCSAqIE1vZHVsZSBleHBvcnRzLgoJICovCgoJdmFyIGJyb3dzZXIgPSBkZXByZWNhdGU7CgoJLyoqCgkgKiBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLgoJICogUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC4KCSAqCgkgKiBJZiBgbG9jYWxTdG9yYWdlLm5vRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC4KCSAqCgkgKiBJZiBgbG9jYWxTdG9yYWdlLnRocm93RGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnMKCSAqIHdpbGwgdGhyb3cgYW4gRXJyb3Igd2hlbiBpbnZva2VkLgoJICoKCSAqIElmIGBsb2NhbFN0b3JhZ2UudHJhY2VEZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBkZXByZWNhdGVkIGZ1bmN0aW9ucwoJICogd2lsbCBpbnZva2UgYGNvbnNvbGUudHJhY2UoKWAgaW5zdGVhZCBvZiBgY29uc29sZS5lcnJvcigpYC4KCSAqCgkgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIHRoZSBmdW5jdGlvbiB0byBkZXByZWNhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBtc2cgLSB0aGUgc3RyaW5nIHRvIHByaW50IHRvIHRoZSBjb25zb2xlIHdoZW4gYGZuYCBpcyBpbnZva2VkCgkgKiBAcmV0dXJucyB7RnVuY3Rpb259IGEgbmV3ICJkZXByZWNhdGVkIiB2ZXJzaW9uIG9mIGBmbmAKCSAqIEBhcGkgcHVibGljCgkgKi8KCglmdW5jdGlvbiBkZXByZWNhdGUgKGZuLCBtc2cpIHsKCSAgaWYgKGNvbmZpZygnbm9EZXByZWNhdGlvbicpKSB7CgkgICAgcmV0dXJuIGZuOwoJICB9CgoJICB2YXIgd2FybmVkID0gZmFsc2U7CgkgIGZ1bmN0aW9uIGRlcHJlY2F0ZWQoKSB7CgkgICAgaWYgKCF3YXJuZWQpIHsKCSAgICAgIGlmIChjb25maWcoJ3Rocm93RGVwcmVjYXRpb24nKSkgewoJICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTsKCSAgICAgIH0gZWxzZSBpZiAoY29uZmlnKCd0cmFjZURlcHJlY2F0aW9uJykpIHsKCSAgICAgICAgY29uc29sZS50cmFjZShtc2cpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgY29uc29sZS53YXJuKG1zZyk7CgkgICAgICB9CgkgICAgICB3YXJuZWQgPSB0cnVlOwoJICAgIH0KCSAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCSAgfQoKCSAgcmV0dXJuIGRlcHJlY2F0ZWQ7Cgl9CgoJLyoqCgkgKiBDaGVja3MgYGxvY2FsU3RvcmFnZWAgZm9yIGJvb2xlYW4gdmFsdWVzIGZvciB0aGUgZ2l2ZW4gYG5hbWVgLgoJICoKCSAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lCgkgKiBAcmV0dXJucyB7Qm9vbGVhbn0KCSAqIEBhcGkgcHJpdmF0ZQoJICovCgoJZnVuY3Rpb24gY29uZmlnIChuYW1lKSB7CgkgIC8vIGFjY2Vzc2luZyBnbG9iYWwubG9jYWxTdG9yYWdlIGNhbiB0cmlnZ2VyIGEgRE9NRXhjZXB0aW9uIGluIHNhbmRib3hlZCBpZnJhbWVzCgkgIHRyeSB7CgkgICAgaWYgKCFjb21tb25qc0dsb2JhbC5sb2NhbFN0b3JhZ2UpIHJldHVybiBmYWxzZTsKCSAgfSBjYXRjaCAoXykgewoJICAgIHJldHVybiBmYWxzZTsKCSAgfQoJICB2YXIgdmFsID0gY29tbW9uanNHbG9iYWwubG9jYWxTdG9yYWdlW25hbWVdOwoJICBpZiAobnVsbCA9PSB2YWwpIHJldHVybiBmYWxzZTsKCSAgcmV0dXJuIFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJzsKCX0KCgl2YXIgX3N0cmVhbV93cml0YWJsZSA9IFdyaXRhYmxlOwoJLy8gdGhlcmUgd2lsbCBiZSBvbmx5IDIgb2YgdGhlc2UgZm9yIGVhY2ggc3RyZWFtCgoKCWZ1bmN0aW9uIENvcmtlZFJlcXVlc3Qoc3RhdGUpIHsKCSAgdmFyIF90aGlzID0gdGhpczsKCgkgIHRoaXMubmV4dCA9IG51bGw7CgkgIHRoaXMuZW50cnkgPSBudWxsOwoKCSAgdGhpcy5maW5pc2ggPSBmdW5jdGlvbiAoKSB7CgkgICAgb25Db3JrZWRGaW5pc2goX3RoaXMsIHN0YXRlKTsKCSAgfTsKCX0KCS8qIDwvcmVwbGFjZW1lbnQ+ICovCgoJLyo8cmVwbGFjZW1lbnQ+Ki8KCgoJdmFyIER1cGxleCQxOwoJLyo8L3JlcGxhY2VtZW50PiovCgoJV3JpdGFibGUuV3JpdGFibGVTdGF0ZSA9IFdyaXRhYmxlU3RhdGU7CgkvKjxyZXBsYWNlbWVudD4qLwoKCXZhciBpbnRlcm5hbFV0aWwgPSB7CgkgIGRlcHJlY2F0ZTogYnJvd3NlcgoJfTsKCS8qPC9yZXBsYWNlbWVudD4qLwoKCS8qPHJlcGxhY2VtZW50PiovCgoKCS8qPC9yZXBsYWNlbWVudD4qLwoKCgl2YXIgQnVmZmVyJDMgPSBidWZmZXIuQnVmZmVyOwoKCXZhciBPdXJVaW50OEFycmF5JDEgPSBjb21tb25qc0dsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9OwoKCWZ1bmN0aW9uIF91aW50OEFycmF5VG9CdWZmZXIkMShjaHVuaykgewoJICByZXR1cm4gQnVmZmVyJDMuZnJvbShjaHVuayk7Cgl9CgoJZnVuY3Rpb24gX2lzVWludDhBcnJheSQxKG9iaikgewoJICByZXR1cm4gQnVmZmVyJDMuaXNCdWZmZXIob2JqKSB8fCBvYmogaW5zdGFuY2VvZiBPdXJVaW50OEFycmF5JDE7Cgl9CgoKCgl2YXIgZ2V0SGlnaFdhdGVyTWFyayQyID0gc3RhdGUuZ2V0SGlnaFdhdGVyTWFyazsKCgl2YXIgX3JlcXVpcmUkY29kZXMkMSA9IGVycm9yc0Jyb3dzZXIuY29kZXMsCgkgICAgRVJSX0lOVkFMSURfQVJHX1RZUEUkMSA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX0lOVkFMSURfQVJHX1RZUEUsCgkgICAgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQkMSA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQsCgkgICAgRVJSX01VTFRJUExFX0NBTExCQUNLID0gX3JlcXVpcmUkY29kZXMkMS5FUlJfTVVMVElQTEVfQ0FMTEJBQ0ssCgkgICAgRVJSX1NUUkVBTV9DQU5OT1RfUElQRSA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX1NUUkVBTV9DQU5OT1RfUElQRSwKCSAgICBFUlJfU1RSRUFNX0RFU1RST1lFRCA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX1NUUkVBTV9ERVNUUk9ZRUQsCgkgICAgRVJSX1NUUkVBTV9OVUxMX1ZBTFVFUyA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX1NUUkVBTV9OVUxMX1ZBTFVFUywKCSAgICBFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORCA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQsCgkgICAgRVJSX1VOS05PV05fRU5DT0RJTkcgPSBfcmVxdWlyZSRjb2RlcyQxLkVSUl9VTktOT1dOX0VOQ09ESU5HOwoKCXZhciBlcnJvck9yRGVzdHJveSQyID0gZGVzdHJveV8xLmVycm9yT3JEZXN0cm95OwoKCWluaGVyaXRzX2Jyb3dzZXIoV3JpdGFibGUsIHN0cmVhbUJyb3dzZXIpOwoKCWZ1bmN0aW9uIG5vcCgpIHt9CgoJZnVuY3Rpb24gV3JpdGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0sIGlzRHVwbGV4KSB7CgkgIER1cGxleCQxID0gRHVwbGV4JDEgfHwgY29tbW9uanNSZXF1aXJlKCIuL19zdHJlYW1fZHVwbGV4IiwgIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIiKTsKCSAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIER1cGxleCBzdHJlYW1zIGFyZSBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZSwgYnV0IHNoYXJlCgkgIC8vIHRoZSBzYW1lIG9wdGlvbnMgb2JqZWN0LgoJICAvLyBIb3dldmVyLCBzb21lIGNhc2VzIHJlcXVpcmUgc2V0dGluZyBvcHRpb25zIHRvIGRpZmZlcmVudAoJICAvLyB2YWx1ZXMgZm9yIHRoZSByZWFkYWJsZSBhbmQgdGhlIHdyaXRhYmxlIHNpZGVzIG9mIHRoZSBkdXBsZXggc3RyZWFtLAoJICAvLyBlLmcuIG9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlIHZzLiBvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZSwgZXRjLgoKCSAgaWYgKHR5cGVvZiBpc0R1cGxleCAhPT0gJ2Jvb2xlYW4nKSBpc0R1cGxleCA9IHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleCQxOyAvLyBvYmplY3Qgc3RyZWFtIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciBvciBub3QgdGhpcyBzdHJlYW0KCSAgLy8gY29udGFpbnMgYnVmZmVycyBvciBvYmplY3RzLgoKCSAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7CgkgIGlmIChpc0R1cGxleCkgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy53cml0YWJsZU9iamVjdE1vZGU7IC8vIHRoZSBwb2ludCBhdCB3aGljaCB3cml0ZSgpIHN0YXJ0cyByZXR1cm5pbmcgZmFsc2UKCSAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyB0aGF0IHdlIGFsd2F5cyByZXR1cm4gZmFsc2UgaWYKCSAgLy8gdGhlIGVudGlyZSBidWZmZXIgaXMgbm90IGZsdXNoZWQgaW1tZWRpYXRlbHkgb24gd3JpdGUoKQoKCSAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gZ2V0SGlnaFdhdGVyTWFyayQyKHRoaXMsIG9wdGlvbnMsICd3cml0YWJsZUhpZ2hXYXRlck1hcmsnLCBpc0R1cGxleCk7IC8vIGlmIF9maW5hbCBoYXMgYmVlbiBjYWxsZWQKCgkgIHRoaXMuZmluYWxDYWxsZWQgPSBmYWxzZTsgLy8gZHJhaW4gZXZlbnQgZmxhZy4KCgkgIHRoaXMubmVlZERyYWluID0gZmFsc2U7IC8vIGF0IHRoZSBzdGFydCBvZiBjYWxsaW5nIGVuZCgpCgoJICB0aGlzLmVuZGluZyA9IGZhbHNlOyAvLyB3aGVuIGVuZCgpIGhhcyBiZWVuIGNhbGxlZCwgYW5kIHJldHVybmVkCgoJICB0aGlzLmVuZGVkID0gZmFsc2U7IC8vIHdoZW4gJ2ZpbmlzaCcgaXMgZW1pdHRlZAoKCSAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOyAvLyBoYXMgaXQgYmVlbiBkZXN0cm95ZWQKCgkgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7IC8vIHNob3VsZCB3ZSBkZWNvZGUgc3RyaW5ncyBpbnRvIGJ1ZmZlcnMgYmVmb3JlIHBhc3NpbmcgdG8gX3dyaXRlPwoJICAvLyB0aGlzIGlzIGhlcmUgc28gdGhhdCBzb21lIG5vZGUtY29yZSBzdHJlYW1zIGNhbiBvcHRpbWl6ZSBzdHJpbmcKCSAgLy8gaGFuZGxpbmcgYXQgYSBsb3dlciBsZXZlbC4KCgkgIHZhciBub0RlY29kZSA9IG9wdGlvbnMuZGVjb2RlU3RyaW5ncyA9PT0gZmFsc2U7CgkgIHRoaXMuZGVjb2RlU3RyaW5ncyA9ICFub0RlY29kZTsgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZwoJICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuCgkgIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC4KCgkgIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnOyAvLyBub3QgYW4gYWN0dWFsIGJ1ZmZlciB3ZSBrZWVwIHRyYWNrIG9mLCBidXQgYSBtZWFzdXJlbWVudAoJICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nCgkgIC8vIHNvY2tldCBvciBmaWxlLgoKCSAgdGhpcy5sZW5ndGggPSAwOyAvLyBhIGZsYWcgdG8gc2VlIHdoZW4gd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhIHdyaXRlLgoKCSAgdGhpcy53cml0aW5nID0gZmFsc2U7IC8vIHdoZW4gdHJ1ZSBhbGwgd3JpdGVzIHdpbGwgYmUgYnVmZmVyZWQgdW50aWwgLnVuY29yaygpIGNhbGwKCgkgIHRoaXMuY29ya2VkID0gMDsgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksCgkgIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55CgkgIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsICJsYXRlciIgc2hvdWxkIGdlbmVyYWxseSBhbHNvCgkgIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLgoKCSAgdGhpcy5zeW5jID0gdHJ1ZTsgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaAoJICAvLyBtYXkgY2FsbCB0aGUgX3dyaXRlKCkgY2FsbGJhY2sgaW4gdGhlIHNhbWUgdGljaywgc28gdGhhdCB3ZSBkb24ndAoJICAvLyBlbmQgdXAgaW4gYW4gb3ZlcmxhcHBlZCBvbndyaXRlIHNpdHVhdGlvbi4KCgkgIHRoaXMuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlOyAvLyB0aGUgY2FsbGJhY2sgdGhhdCdzIHBhc3NlZCB0byBfd3JpdGUoY2h1bmssY2IpCgoJICB0aGlzLm9ud3JpdGUgPSBmdW5jdGlvbiAoZXIpIHsKCSAgICBvbndyaXRlKHN0cmVhbSwgZXIpOwoJICB9OyAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYikKCgoJICB0aGlzLndyaXRlY2IgPSBudWxsOyAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuCgoJICB0aGlzLndyaXRlbGVuID0gMDsKCSAgdGhpcy5idWZmZXJlZFJlcXVlc3QgPSBudWxsOwoJICB0aGlzLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOyAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrcwoJICAvLyB0aGlzIG11c3QgYmUgMCBiZWZvcmUgJ2ZpbmlzaCcgY2FuIGJlIGVtaXR0ZWQKCgkgIHRoaXMucGVuZGluZ2NiID0gMDsgLy8gZW1pdCBwcmVmaW5pc2ggaWYgdGhlIG9ubHkgdGhpbmcgd2UncmUgd2FpdGluZyBmb3IgaXMgX3dyaXRlIGNicwoJICAvLyBUaGlzIGlzIHJlbGV2YW50IGZvciBzeW5jaHJvbm91cyBUcmFuc2Zvcm0gc3RyZWFtcwoKCSAgdGhpcy5wcmVmaW5pc2hlZCA9IGZhbHNlOyAvLyBUcnVlIGlmIHRoZSBlcnJvciB3YXMgYWxyZWFkeSBlbWl0dGVkIGFuZCBzaG91bGQgbm90IGJlIHRocm93biBhZ2FpbgoKCSAgdGhpcy5lcnJvckVtaXR0ZWQgPSBmYWxzZTsgLy8gU2hvdWxkIGNsb3NlIGJlIGVtaXR0ZWQgb24gZGVzdHJveS4gRGVmYXVsdHMgdG8gdHJ1ZS4KCgkgIHRoaXMuZW1pdENsb3NlID0gb3B0aW9ucy5lbWl0Q2xvc2UgIT09IGZhbHNlOyAvLyBTaG91bGQgLmRlc3Ryb3koKSBiZSBjYWxsZWQgYWZ0ZXIgJ2ZpbmlzaCcgKGFuZCBwb3RlbnRpYWxseSAnZW5kJykKCgkgIHRoaXMuYXV0b0Rlc3Ryb3kgPSAhIW9wdGlvbnMuYXV0b0Rlc3Ryb3k7IC8vIGNvdW50IGJ1ZmZlcmVkIHJlcXVlc3RzCgoJICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdENvdW50ID0gMDsgLy8gYWxsb2NhdGUgdGhlIGZpcnN0IENvcmtlZFJlcXVlc3QsIHRoZXJlIGlzIGFsd2F5cwoJICAvLyBvbmUgYWxsb2NhdGVkIGFuZCBmcmVlIHRvIHVzZSwgYW5kIHdlIG1haW50YWluIGF0IG1vc3QgdHdvCgoJICB0aGlzLmNvcmtlZFJlcXVlc3RzRnJlZSA9IG5ldyBDb3JrZWRSZXF1ZXN0KHRoaXMpOwoJfQoKCVdyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIGdldEJ1ZmZlcigpIHsKCSAgdmFyIGN1cnJlbnQgPSB0aGlzLmJ1ZmZlcmVkUmVxdWVzdDsKCSAgdmFyIG91dCA9IFtdOwoKCSAgd2hpbGUgKGN1cnJlbnQpIHsKCSAgICBvdXQucHVzaChjdXJyZW50KTsKCSAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0OwoJICB9CgoJICByZXR1cm4gb3V0OwoJfTsKCgkoZnVuY3Rpb24gKCkgewoJICB0cnkgewoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZVN0YXRlLnByb3RvdHlwZSwgJ2J1ZmZlcicsIHsKCSAgICAgIGdldDogaW50ZXJuYWxVdGlsLmRlcHJlY2F0ZShmdW5jdGlvbiB3cml0YWJsZVN0YXRlQnVmZmVyR2V0dGVyKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5nZXRCdWZmZXIoKTsKCSAgICAgIH0sICdfd3JpdGFibGVTdGF0ZS5idWZmZXIgaXMgZGVwcmVjYXRlZC4gVXNlIF93cml0YWJsZVN0YXRlLmdldEJ1ZmZlciAnICsgJ2luc3RlYWQuJywgJ0RFUDAwMDMnKQoJICAgIH0pOwoJICB9IGNhdGNoIChfKSB7fQoJfSkoKTsgLy8gVGVzdCBfd3JpdGFibGVTdGF0ZSBmb3IgaW5oZXJpdGFuY2UgdG8gYWNjb3VudCBmb3IgRHVwbGV4IHN0cmVhbXMsCgkvLyB3aG9zZSBwcm90b3R5cGUgY2hhaW4gb25seSBwb2ludHMgdG8gUmVhZGFibGUuCgoKCXZhciByZWFsSGFzSW5zdGFuY2U7CgoJaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLmhhc0luc3RhbmNlICYmIHR5cGVvZiBGdW5jdGlvbi5wcm90b3R5cGVbU3ltYm9sLmhhc0luc3RhbmNlXSA9PT0gJ2Z1bmN0aW9uJykgewoJICByZWFsSGFzSW5zdGFuY2UgPSBGdW5jdGlvbi5wcm90b3R5cGVbU3ltYm9sLmhhc0luc3RhbmNlXTsKCSAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlLCBTeW1ib2wuaGFzSW5zdGFuY2UsIHsKCSAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUob2JqZWN0KSB7CgkgICAgICBpZiAocmVhbEhhc0luc3RhbmNlLmNhbGwodGhpcywgb2JqZWN0KSkgcmV0dXJuIHRydWU7CgkgICAgICBpZiAodGhpcyAhPT0gV3JpdGFibGUpIHJldHVybiBmYWxzZTsKCSAgICAgIHJldHVybiBvYmplY3QgJiYgb2JqZWN0Ll93cml0YWJsZVN0YXRlIGluc3RhbmNlb2YgV3JpdGFibGVTdGF0ZTsKCSAgICB9CgkgIH0pOwoJfSBlbHNlIHsKCSAgcmVhbEhhc0luc3RhbmNlID0gZnVuY3Rpb24gcmVhbEhhc0luc3RhbmNlKG9iamVjdCkgewoJICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiB0aGlzOwoJICB9OwoJfQoKCWZ1bmN0aW9uIFdyaXRhYmxlKG9wdGlvbnMpIHsKCSAgRHVwbGV4JDEgPSBEdXBsZXgkMSB8fCBjb21tb25qc1JlcXVpcmUoIi4vX3N0cmVhbV9kdXBsZXgiLCAiLyQkcm9sbHVwX2Jhc2UkJC9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYiIpOyAvLyBXcml0YWJsZSBjdG9yIGlzIGFwcGxpZWQgdG8gRHVwbGV4ZXMsIHRvby4KCSAgLy8gYHJlYWxIYXNJbnN0YW5jZWAgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgdXNpbmcgcGxhaW4gYGluc3RhbmNlb2ZgCgkgIC8vIHdvdWxkIHJldHVybiBmYWxzZSwgYXMgbm8gYF93cml0YWJsZVN0YXRlYCBwcm9wZXJ0eSBpcyBhdHRhY2hlZC4KCSAgLy8gVHJ5aW5nIHRvIHVzZSB0aGUgY3VzdG9tIGBpbnN0YW5jZW9mYCBmb3IgV3JpdGFibGUgaGVyZSB3aWxsIGFsc28gYnJlYWsgdGhlCgkgIC8vIE5vZGUuanMgTGF6eVRyYW5zZm9ybSBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaGFzIGEgbm9uLXRyaXZpYWwgZ2V0dGVyIGZvcgoJICAvLyBgX3dyaXRhYmxlU3RhdGVgIHRoYXQgd291bGQgbGVhZCB0byBpbmZpbml0ZSByZWN1cnNpb24uCgkgIC8vIENoZWNraW5nIGZvciBhIFN0cmVhbS5EdXBsZXggaW5zdGFuY2UgaXMgZmFzdGVyIGhlcmUgaW5zdGVhZCBvZiBpbnNpZGUKCSAgLy8gdGhlIFdyaXRhYmxlU3RhdGUgY29uc3RydWN0b3IsIGF0IGxlYXN0IHdpdGggVjggNi41CgoJICB2YXIgaXNEdXBsZXggPSB0aGlzIGluc3RhbmNlb2YgRHVwbGV4JDE7CgkgIGlmICghaXNEdXBsZXggJiYgIXJlYWxIYXNJbnN0YW5jZS5jYWxsKFdyaXRhYmxlLCB0aGlzKSkgcmV0dXJuIG5ldyBXcml0YWJsZShvcHRpb25zKTsKCSAgdGhpcy5fd3JpdGFibGVTdGF0ZSA9IG5ldyBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMsIGlzRHVwbGV4KTsgLy8gbGVnYWN5LgoKCSAgdGhpcy53cml0YWJsZSA9IHRydWU7CgoJICBpZiAob3B0aW9ucykgewoJICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fd3JpdGUgPSBvcHRpb25zLndyaXRlOwoJICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZXYgPT09ICdmdW5jdGlvbicpIHRoaXMuX3dyaXRldiA9IG9wdGlvbnMud3JpdGV2OwoJICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB0aGlzLl9kZXN0cm95ID0gb3B0aW9ucy5kZXN0cm95OwoJICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5maW5hbCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZmluYWwgPSBvcHRpb25zLmZpbmFsOwoJICB9CgoJICBzdHJlYW1Ccm93c2VyLmNhbGwodGhpcyk7Cgl9IC8vIE90aGVyd2lzZSBwZW9wbGUgY2FuIHBpcGUgV3JpdGFibGUgc3RyZWFtcywgd2hpY2ggaXMganVzdCB3cm9uZy4KCgoJV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7CgkgIGVycm9yT3JEZXN0cm95JDIodGhpcywgbmV3IEVSUl9TVFJFQU1fQ0FOTk9UX1BJUEUoKSk7Cgl9OwoKCWZ1bmN0aW9uIHdyaXRlQWZ0ZXJFbmQoc3RyZWFtLCBjYikgewoJICB2YXIgZXIgPSBuZXcgRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQoKTsgLy8gVE9ETzogZGVmZXIgZXJyb3IgZXZlbnRzIGNvbnNpc3RlbnRseSBldmVyeXdoZXJlLCBub3QganVzdCB0aGUgY2IKCgkgIGVycm9yT3JEZXN0cm95JDIoc3RyZWFtLCBlcik7CgkgIHByb2Nlc3MubmV4dFRpY2soY2IsIGVyKTsKCX0gLy8gQ2hlY2tzIHRoYXQgYSB1c2VyLXN1cHBsaWVkIGNodW5rIGlzIHZhbGlkLCBlc3BlY2lhbGx5IGZvciB0aGUgcGFydGljdWxhcgoJLy8gbW9kZSB0aGUgc3RyZWFtIGlzIGluLiBDdXJyZW50bHkgdGhpcyBtZWFucyB0aGF0IGBudWxsYCBpcyBuZXZlciBhY2NlcHRlZAoJLy8gYW5kIHVuZGVmaW5lZC9ub24tc3RyaW5nIHZhbHVlcyBhcmUgb25seSBhbGxvd2VkIGluIG9iamVjdCBtb2RlLgoKCglmdW5jdGlvbiB2YWxpZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBjYikgewoJICB2YXIgZXI7CgoJICBpZiAoY2h1bmsgPT09IG51bGwpIHsKCSAgICBlciA9IG5ldyBFUlJfU1RSRUFNX05VTExfVkFMVUVTKCk7CgkgIH0gZWxzZSBpZiAodHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJiAhc3RhdGUub2JqZWN0TW9kZSkgewoJICAgIGVyID0gbmV3IEVSUl9JTlZBTElEX0FSR19UWVBFJDEoJ2NodW5rJywgWydzdHJpbmcnLCAnQnVmZmVyJ10sIGNodW5rKTsKCSAgfQoKCSAgaWYgKGVyKSB7CgkgICAgZXJyb3JPckRlc3Ryb3kkMihzdHJlYW0sIGVyKTsKCSAgICBwcm9jZXNzLm5leHRUaWNrKGNiLCBlcik7CgkgICAgcmV0dXJuIGZhbHNlOwoJICB9CgoJICByZXR1cm4gdHJ1ZTsKCX0KCglXcml0YWJsZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewoJICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoJICB2YXIgcmV0ID0gZmFsc2U7CgoJICB2YXIgaXNCdWYgPSAhc3RhdGUub2JqZWN0TW9kZSAmJiBfaXNVaW50OEFycmF5JDEoY2h1bmspOwoKCSAgaWYgKGlzQnVmICYmICFCdWZmZXIkMy5pc0J1ZmZlcihjaHVuaykpIHsKCSAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIkMShjaHVuayk7CgkgIH0KCgkgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHsKCSAgICBjYiA9IGVuY29kaW5nOwoJICAgIGVuY29kaW5nID0gbnVsbDsKCSAgfQoKCSAgaWYgKGlzQnVmKSBlbmNvZGluZyA9ICdidWZmZXInO2Vsc2UgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7CgkgIGlmICh0eXBlb2YgY2IgIT09ICdmdW5jdGlvbicpIGNiID0gbm9wOwoJICBpZiAoc3RhdGUuZW5kaW5nKSB3cml0ZUFmdGVyRW5kKHRoaXMsIGNiKTtlbHNlIGlmIChpc0J1ZiB8fCB2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7CgkgICAgc3RhdGUucGVuZGluZ2NiKys7CgkgICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgaXNCdWYsIGNodW5rLCBlbmNvZGluZywgY2IpOwoJICB9CgkgIHJldHVybiByZXQ7Cgl9OwoKCVdyaXRhYmxlLnByb3RvdHlwZS5jb3JrID0gZnVuY3Rpb24gKCkgewoJICB0aGlzLl93cml0YWJsZVN0YXRlLmNvcmtlZCsrOwoJfTsKCglXcml0YWJsZS5wcm90b3R5cGUudW5jb3JrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoKCSAgaWYgKHN0YXRlLmNvcmtlZCkgewoJICAgIHN0YXRlLmNvcmtlZC0tOwoJICAgIGlmICghc3RhdGUud3JpdGluZyAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkgY2xlYXJCdWZmZXIodGhpcywgc3RhdGUpOwoJICB9Cgl9OwoKCVdyaXRhYmxlLnByb3RvdHlwZS5zZXREZWZhdWx0RW5jb2RpbmcgPSBmdW5jdGlvbiBzZXREZWZhdWx0RW5jb2RpbmcoZW5jb2RpbmcpIHsKCSAgLy8gbm9kZTo6UGFyc2VFbmNvZGluZygpIHJlcXVpcmVzIGxvd2VyIGNhc2UuCgkgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7CgkgIGlmICghKFsnaGV4JywgJ3V0ZjgnLCAndXRmLTgnLCAnYXNjaWknLCAnYmluYXJ5JywgJ2Jhc2U2NCcsICd1Y3MyJywgJ3Vjcy0yJywgJ3V0ZjE2bGUnLCAndXRmLTE2bGUnLCAncmF3J10uaW5kZXhPZigoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKSkgPiAtMSkpIHRocm93IG5ldyBFUlJfVU5LTk9XTl9FTkNPRElORyhlbmNvZGluZyk7CgkgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVmYXVsdEVuY29kaW5nID0gZW5jb2Rpbmc7CgkgIHJldHVybiB0aGlzOwoJfTsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUucHJvdG90eXBlLCAnd3JpdGFibGVCdWZmZXInLCB7CgkgIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlCgkgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgoJICAvLyB1c2VybGFuZCB3aWxsIGZhaWwKCSAgZW51bWVyYWJsZTogZmFsc2UsCgkgIGdldDogZnVuY3Rpb24gZ2V0KCkgewoJICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyKCk7CgkgIH0KCX0pOwoKCWZ1bmN0aW9uIGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpIHsKCSAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmIHN0YXRlLmRlY29kZVN0cmluZ3MgIT09IGZhbHNlICYmIHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHsKCSAgICBjaHVuayA9IEJ1ZmZlciQzLmZyb20oY2h1bmssIGVuY29kaW5nKTsKCSAgfQoKCSAgcmV0dXJuIGNodW5rOwoJfQoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICd3cml0YWJsZUhpZ2hXYXRlck1hcmsnLCB7CgkgIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlCgkgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgoJICAvLyB1c2VybGFuZCB3aWxsIGZhaWwKCSAgZW51bWVyYWJsZTogZmFsc2UsCgkgIGdldDogZnVuY3Rpb24gZ2V0KCkgewoJICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmhpZ2hXYXRlck1hcms7CgkgIH0KCX0pOyAvLyBpZiB3ZSdyZSBhbHJlYWR5IHdyaXRpbmcgc29tZXRoaW5nLCB0aGVuIGp1c3QgcHV0IHRoaXMKCS8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlCgkvLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLgoKCWZ1bmN0aW9uIHdyaXRlT3JCdWZmZXIoc3RyZWFtLCBzdGF0ZSwgaXNCdWYsIGNodW5rLCBlbmNvZGluZywgY2IpIHsKCSAgaWYgKCFpc0J1ZikgewoJICAgIHZhciBuZXdDaHVuayA9IGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpOwoKCSAgICBpZiAoY2h1bmsgIT09IG5ld0NodW5rKSB7CgkgICAgICBpc0J1ZiA9IHRydWU7CgkgICAgICBlbmNvZGluZyA9ICdidWZmZXInOwoJICAgICAgY2h1bmsgPSBuZXdDaHVuazsKCSAgICB9CgkgIH0KCgkgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDsKCSAgc3RhdGUubGVuZ3RoICs9IGxlbjsKCSAgdmFyIHJldCA9IHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcms7IC8vIHdlIG11c3QgZW5zdXJlIHRoYXQgcHJldmlvdXMgbmVlZERyYWluIHdpbGwgbm90IGJlIHJlc2V0IHRvIGZhbHNlLgoKCSAgaWYgKCFyZXQpIHN0YXRlLm5lZWREcmFpbiA9IHRydWU7CgoJICBpZiAoc3RhdGUud3JpdGluZyB8fCBzdGF0ZS5jb3JrZWQpIHsKCSAgICB2YXIgbGFzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CgkgICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IHsKCSAgICAgIGNodW5rOiBjaHVuaywKCSAgICAgIGVuY29kaW5nOiBlbmNvZGluZywKCSAgICAgIGlzQnVmOiBpc0J1ZiwKCSAgICAgIGNhbGxiYWNrOiBjYiwKCSAgICAgIG5leHQ6IG51bGwKCSAgICB9OwoKCSAgICBpZiAobGFzdCkgewoJICAgICAgbGFzdC5uZXh0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKCSAgICB9IGVsc2UgewoJICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKCSAgICB9CgoJICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50ICs9IDE7CgkgIH0gZWxzZSB7CgkgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTsKCSAgfQoKCSAgcmV0dXJuIHJldDsKCX0KCglmdW5jdGlvbiBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHdyaXRldiwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7CgkgIHN0YXRlLndyaXRlbGVuID0gbGVuOwoJICBzdGF0ZS53cml0ZWNiID0gY2I7CgkgIHN0YXRlLndyaXRpbmcgPSB0cnVlOwoJICBzdGF0ZS5zeW5jID0gdHJ1ZTsKCSAgaWYgKHN0YXRlLmRlc3Ryb3llZCkgc3RhdGUub253cml0ZShuZXcgRVJSX1NUUkVBTV9ERVNUUk9ZRUQoJ3dyaXRlJykpO2Vsc2UgaWYgKHdyaXRldikgc3RyZWFtLl93cml0ZXYoY2h1bmssIHN0YXRlLm9ud3JpdGUpO2Vsc2Ugc3RyZWFtLl93cml0ZShjaHVuaywgZW5jb2RpbmcsIHN0YXRlLm9ud3JpdGUpOwoJICBzdGF0ZS5zeW5jID0gZmFsc2U7Cgl9CgoJZnVuY3Rpb24gb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYikgewoJICAtLXN0YXRlLnBlbmRpbmdjYjsKCgkgIGlmIChzeW5jKSB7CgkgICAgLy8gZGVmZXIgdGhlIGNhbGxiYWNrIGlmIHdlIGFyZSBiZWluZyBjYWxsZWQgc3luY2hyb25vdXNseQoJICAgIC8vIHRvIGF2b2lkIHBpbGluZyB1cCB0aGluZ3Mgb24gdGhlIHN0YWNrCgkgICAgcHJvY2Vzcy5uZXh0VGljayhjYiwgZXIpOyAvLyB0aGlzIGNhbiBlbWl0IGZpbmlzaCwgYW5kIGl0IHdpbGwgYWx3YXlzIGhhcHBlbgoJICAgIC8vIGFmdGVyIGVycm9yCgoJICAgIHByb2Nlc3MubmV4dFRpY2soZmluaXNoTWF5YmUsIHN0cmVhbSwgc3RhdGUpOwoJICAgIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlOwoJICAgIGVycm9yT3JEZXN0cm95JDIoc3RyZWFtLCBlcik7CgkgIH0gZWxzZSB7CgkgICAgLy8gdGhlIGNhbGxlciBleHBlY3QgdGhpcyB0byBoYXBwZW4gYmVmb3JlIGlmCgkgICAgLy8gaXQgaXMgYXN5bmMKCSAgICBjYihlcik7CgkgICAgc3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7CgkgICAgZXJyb3JPckRlc3Ryb3kkMihzdHJlYW0sIGVyKTsgLy8gdGhpcyBjYW4gZW1pdCBmaW5pc2gsIGJ1dCBmaW5pc2ggbXVzdAoJICAgIC8vIGFsd2F5cyBmb2xsb3cgZXJyb3IKCgkgICAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7CgkgIH0KCX0KCglmdW5jdGlvbiBvbndyaXRlU3RhdGVVcGRhdGUoc3RhdGUpIHsKCSAgc3RhdGUud3JpdGluZyA9IGZhbHNlOwoJICBzdGF0ZS53cml0ZWNiID0gbnVsbDsKCSAgc3RhdGUubGVuZ3RoIC09IHN0YXRlLndyaXRlbGVuOwoJICBzdGF0ZS53cml0ZWxlbiA9IDA7Cgl9CgoJZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7CgkgIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTsKCSAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jOwoJICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiOwoJICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgRVJSX01VTFRJUExFX0NBTExCQUNLKCk7CgkgIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7CgkgIGlmIChlcikgb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYik7ZWxzZSB7CgkgICAgLy8gQ2hlY2sgaWYgd2UncmUgYWN0dWFsbHkgcmVhZHkgdG8gZmluaXNoLCBidXQgZG9uJ3QgZW1pdCB5ZXQKCSAgICB2YXIgZmluaXNoZWQgPSBuZWVkRmluaXNoKHN0YXRlKSB8fCBzdHJlYW0uZGVzdHJveWVkOwoKCSAgICBpZiAoIWZpbmlzaGVkICYmICFzdGF0ZS5jb3JrZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSB7CgkgICAgICBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKTsKCSAgICB9CgoJICAgIGlmIChzeW5jKSB7CgkgICAgICBwcm9jZXNzLm5leHRUaWNrKGFmdGVyV3JpdGUsIHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7CgkgICAgfSBlbHNlIHsKCSAgICAgIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTsKCSAgICB9CgkgIH0KCX0KCglmdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikgewoJICBpZiAoIWZpbmlzaGVkKSBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7CgkgIHN0YXRlLnBlbmRpbmdjYi0tOwoJICBjYigpOwoJICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKCX0gLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3QKCS8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm4KCS8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuCgoKCWZ1bmN0aW9uIG9ud3JpdGVEcmFpbihzdHJlYW0sIHN0YXRlKSB7CgkgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUubmVlZERyYWluKSB7CgkgICAgc3RhdGUubmVlZERyYWluID0gZmFsc2U7CgkgICAgc3RyZWFtLmVtaXQoJ2RyYWluJyk7CgkgIH0KCX0gLy8gaWYgdGhlcmUncyBzb21ldGhpbmcgaW4gdGhlIGJ1ZmZlciB3YWl0aW5nLCB0aGVuIHByb2Nlc3MgaXQKCgoJZnVuY3Rpb24gY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSkgewoJICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gdHJ1ZTsKCSAgdmFyIGVudHJ5ID0gc3RhdGUuYnVmZmVyZWRSZXF1ZXN0OwoKCSAgaWYgKHN0cmVhbS5fd3JpdGV2ICYmIGVudHJ5ICYmIGVudHJ5Lm5leHQpIHsKCSAgICAvLyBGYXN0IGNhc2UsIHdyaXRlIGV2ZXJ5dGhpbmcgdXNpbmcgX3dyaXRldigpCgkgICAgdmFyIGwgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudDsKCSAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5KGwpOwoJICAgIHZhciBob2xkZXIgPSBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWU7CgkgICAgaG9sZGVyLmVudHJ5ID0gZW50cnk7CgkgICAgdmFyIGNvdW50ID0gMDsKCSAgICB2YXIgYWxsQnVmZmVycyA9IHRydWU7CgoJICAgIHdoaWxlIChlbnRyeSkgewoJICAgICAgYnVmZmVyW2NvdW50XSA9IGVudHJ5OwoJICAgICAgaWYgKCFlbnRyeS5pc0J1ZikgYWxsQnVmZmVycyA9IGZhbHNlOwoJICAgICAgZW50cnkgPSBlbnRyeS5uZXh0OwoJICAgICAgY291bnQgKz0gMTsKCSAgICB9CgoJICAgIGJ1ZmZlci5hbGxCdWZmZXJzID0gYWxsQnVmZmVyczsKCSAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHRydWUsIHN0YXRlLmxlbmd0aCwgYnVmZmVyLCAnJywgaG9sZGVyLmZpbmlzaCk7IC8vIGRvV3JpdGUgaXMgYWxtb3N0IGFsd2F5cyBhc3luYywgZGVmZXIgdGhlc2UgdG8gc2F2ZSBhIGJpdCBvZiB0aW1lCgkgICAgLy8gYXMgdGhlIGhvdCBwYXRoIGVuZHMgd2l0aCBkb1dyaXRlCgoJICAgIHN0YXRlLnBlbmRpbmdjYisrOwoJICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOwoKCSAgICBpZiAoaG9sZGVyLm5leHQpIHsKCSAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSA9IGhvbGRlci5uZXh0OwoJICAgICAgaG9sZGVyLm5leHQgPSBudWxsOwoJICAgIH0gZWxzZSB7CgkgICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdChzdGF0ZSk7CgkgICAgfQoKCSAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7CgkgIH0gZWxzZSB7CgkgICAgLy8gU2xvdyBjYXNlLCB3cml0ZSBjaHVua3Mgb25lLWJ5LW9uZQoJICAgIHdoaWxlIChlbnRyeSkgewoJICAgICAgdmFyIGNodW5rID0gZW50cnkuY2h1bms7CgkgICAgICB2YXIgZW5jb2RpbmcgPSBlbnRyeS5lbmNvZGluZzsKCSAgICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrOwoJICAgICAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwoJICAgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTsKCSAgICAgIGVudHJ5ID0gZW50cnkubmV4dDsKCSAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50LS07IC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuCgkgICAgICAvLyBpdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gd2FpdCB1bnRpbCBpdCBkb2VzLgoJICAgICAgLy8gYWxzbywgdGhhdCBtZWFucyB0aGF0IHRoZSBjaHVuayBhbmQgY2IgYXJlIGN1cnJlbnRseQoJICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uCgoJICAgICAgaWYgKHN0YXRlLndyaXRpbmcpIHsKCSAgICAgICAgYnJlYWs7CgkgICAgICB9CgkgICAgfQoKCSAgICBpZiAoZW50cnkgPT09IG51bGwpIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOwoJICB9CgoJICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPSBlbnRyeTsKCSAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlOwoJfQoKCVdyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewoJICBjYihuZXcgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQkMSgnX3dyaXRlKCknKSk7Cgl9OwoKCVdyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGV2ID0gbnVsbDsKCglXcml0YWJsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHsKCSAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTsKCgkgIGlmICh0eXBlb2YgY2h1bmsgPT09ICdmdW5jdGlvbicpIHsKCSAgICBjYiA9IGNodW5rOwoJICAgIGNodW5rID0gbnVsbDsKCSAgICBlbmNvZGluZyA9IG51bGw7CgkgIH0gZWxzZSBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnZnVuY3Rpb24nKSB7CgkgICAgY2IgPSBlbmNvZGluZzsKCSAgICBlbmNvZGluZyA9IG51bGw7CgkgIH0KCgkgIGlmIChjaHVuayAhPT0gbnVsbCAmJiBjaHVuayAhPT0gdW5kZWZpbmVkKSB0aGlzLndyaXRlKGNodW5rLCBlbmNvZGluZyk7IC8vIC5lbmQoKSBmdWxseSB1bmNvcmtzCgoJICBpZiAoc3RhdGUuY29ya2VkKSB7CgkgICAgc3RhdGUuY29ya2VkID0gMTsKCSAgICB0aGlzLnVuY29yaygpOwoJICB9IC8vIGlnbm9yZSB1bm5lY2Vzc2FyeSBlbmQoKSBjYWxscy4KCgoJICBpZiAoIXN0YXRlLmVuZGluZykgZW5kV3JpdGFibGUodGhpcywgc3RhdGUsIGNiKTsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICd3cml0YWJsZUxlbmd0aCcsIHsKCSAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKCSAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCgkgIC8vIHVzZXJsYW5kIHdpbGwgZmFpbAoJICBlbnVtZXJhYmxlOiBmYWxzZSwKCSAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUubGVuZ3RoOwoJICB9Cgl9KTsKCglmdW5jdGlvbiBuZWVkRmluaXNoKHN0YXRlKSB7CgkgIHJldHVybiBzdGF0ZS5lbmRpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLndyaXRpbmc7Cgl9CgoJZnVuY3Rpb24gY2FsbEZpbmFsKHN0cmVhbSwgc3RhdGUpIHsKCSAgc3RyZWFtLl9maW5hbChmdW5jdGlvbiAoZXJyKSB7CgkgICAgc3RhdGUucGVuZGluZ2NiLS07CgoJICAgIGlmIChlcnIpIHsKCSAgICAgIGVycm9yT3JEZXN0cm95JDIoc3RyZWFtLCBlcnIpOwoJICAgIH0KCgkgICAgc3RhdGUucHJlZmluaXNoZWQgPSB0cnVlOwoJICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTsKCSAgICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKCSAgfSk7Cgl9CgoJZnVuY3Rpb24gcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpIHsKCSAgaWYgKCFzdGF0ZS5wcmVmaW5pc2hlZCAmJiAhc3RhdGUuZmluYWxDYWxsZWQpIHsKCSAgICBpZiAodHlwZW9mIHN0cmVhbS5fZmluYWwgPT09ICdmdW5jdGlvbicgJiYgIXN0YXRlLmRlc3Ryb3llZCkgewoJICAgICAgc3RhdGUucGVuZGluZ2NiKys7CgkgICAgICBzdGF0ZS5maW5hbENhbGxlZCA9IHRydWU7CgkgICAgICBwcm9jZXNzLm5leHRUaWNrKGNhbGxGaW5hbCwgc3RyZWFtLCBzdGF0ZSk7CgkgICAgfSBlbHNlIHsKCSAgICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTsKCSAgICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTsKCSAgICB9CgkgIH0KCX0KCglmdW5jdGlvbiBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKSB7CgkgIHZhciBuZWVkID0gbmVlZEZpbmlzaChzdGF0ZSk7CgoJICBpZiAobmVlZCkgewoJICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTsKCgkgICAgaWYgKHN0YXRlLnBlbmRpbmdjYiA9PT0gMCkgewoJICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlOwoJICAgICAgc3RyZWFtLmVtaXQoJ2ZpbmlzaCcpOwoKCSAgICAgIGlmIChzdGF0ZS5hdXRvRGVzdHJveSkgewoJICAgICAgICAvLyBJbiBjYXNlIG9mIGR1cGxleCBzdHJlYW1zIHdlIG5lZWQgYSB3YXkgdG8gZGV0ZWN0CgkgICAgICAgIC8vIGlmIHRoZSByZWFkYWJsZSBzaWRlIGlzIHJlYWR5IGZvciBhdXRvRGVzdHJveSBhcyB3ZWxsCgkgICAgICAgIHZhciByU3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgoJICAgICAgICBpZiAoIXJTdGF0ZSB8fCByU3RhdGUuYXV0b0Rlc3Ryb3kgJiYgclN0YXRlLmVuZEVtaXR0ZWQpIHsKCSAgICAgICAgICBzdHJlYW0uZGVzdHJveSgpOwoJICAgICAgICB9CgkgICAgICB9CgkgICAgfQoJICB9CgoJICByZXR1cm4gbmVlZDsKCX0KCglmdW5jdGlvbiBlbmRXcml0YWJsZShzdHJlYW0sIHN0YXRlLCBjYikgewoJICBzdGF0ZS5lbmRpbmcgPSB0cnVlOwoJICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKCgkgIGlmIChjYikgewoJICAgIGlmIChzdGF0ZS5maW5pc2hlZCkgcHJvY2Vzcy5uZXh0VGljayhjYik7ZWxzZSBzdHJlYW0ub25jZSgnZmluaXNoJywgY2IpOwoJICB9CgoJICBzdGF0ZS5lbmRlZCA9IHRydWU7CgkgIHN0cmVhbS53cml0YWJsZSA9IGZhbHNlOwoJfQoKCWZ1bmN0aW9uIG9uQ29ya2VkRmluaXNoKGNvcmtSZXEsIHN0YXRlLCBlcnIpIHsKCSAgdmFyIGVudHJ5ID0gY29ya1JlcS5lbnRyeTsKCSAgY29ya1JlcS5lbnRyeSA9IG51bGw7CgoJICB3aGlsZSAoZW50cnkpIHsKCSAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjazsKCSAgICBzdGF0ZS5wZW5kaW5nY2ItLTsKCSAgICBjYihlcnIpOwoJICAgIGVudHJ5ID0gZW50cnkubmV4dDsKCSAgfSAvLyByZXVzZSB0aGUgZnJlZSBjb3JrUmVxLgoKCgkgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gY29ya1JlcTsKCX0KCglPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUucHJvdG90eXBlLCAnZGVzdHJveWVkJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICBpZiAodGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7CgkgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfQoKCSAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQ7CgkgIH0sCgkgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CgkgICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtCgkgICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldAoJICAgIGlmICghdGhpcy5fd3JpdGFibGVTdGF0ZSkgewoJICAgICAgcmV0dXJuOwoJICAgIH0gLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseQoJICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZAoKCgkgICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTsKCSAgfQoJfSk7CglXcml0YWJsZS5wcm90b3R5cGUuZGVzdHJveSA9IGRlc3Ryb3lfMS5kZXN0cm95OwoJV3JpdGFibGUucHJvdG90eXBlLl91bmRlc3Ryb3kgPSBkZXN0cm95XzEudW5kZXN0cm95OwoKCVdyaXRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNiKSB7CgkgIGNiKGVycik7Cgl9OwoKCWNvbW1vbmpzUmVnaXN0ZXIoIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9kdXBsZXguanMiLCBmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CgkvKjxyZXBsYWNlbWVudD4qLwoKCXZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikgewoJICB2YXIga2V5cyA9IFtdOwoKCSAgZm9yICh2YXIga2V5IGluIG9iaikgewoJICAgIGtleXMucHVzaChrZXkpOwoJICB9CgoJICByZXR1cm4ga2V5czsKCX07CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCgoJbW9kdWxlLmV4cG9ydHMgPSBEdXBsZXg7CgoJdmFyIFJlYWRhYmxlID0gX3N0cmVhbV9yZWFkYWJsZTsKCgl2YXIgV3JpdGFibGUgPSBfc3RyZWFtX3dyaXRhYmxlOwoKCWluaGVyaXRzX2Jyb3dzZXIoRHVwbGV4LCBSZWFkYWJsZSk7CgoJewoJICAvLyBBbGxvdyB0aGUga2V5cyBhcnJheSB0byBiZSBHQydlZC4KCSAgdmFyIGtleXMgPSBvYmplY3RLZXlzKFdyaXRhYmxlLnByb3RvdHlwZSk7CgoJICBmb3IgKHZhciB2ID0gMDsgdiA8IGtleXMubGVuZ3RoOyB2KyspIHsKCSAgICB2YXIgbWV0aG9kID0ga2V5c1t2XTsKCSAgICBpZiAoIUR1cGxleC5wcm90b3R5cGVbbWV0aG9kXSkgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07CgkgIH0KCX0KCglmdW5jdGlvbiBEdXBsZXgob3B0aW9ucykgewoJICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7CgkgIFJlYWRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7CgkgIFdyaXRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7CgkgIHRoaXMuYWxsb3dIYWxmT3BlbiA9IHRydWU7CgoJICBpZiAob3B0aW9ucykgewoJICAgIGlmIChvcHRpb25zLnJlYWRhYmxlID09PSBmYWxzZSkgdGhpcy5yZWFkYWJsZSA9IGZhbHNlOwoJICAgIGlmIChvcHRpb25zLndyaXRhYmxlID09PSBmYWxzZSkgdGhpcy53cml0YWJsZSA9IGZhbHNlOwoKCSAgICBpZiAob3B0aW9ucy5hbGxvd0hhbGZPcGVuID09PSBmYWxzZSkgewoJICAgICAgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7CgkgICAgICB0aGlzLm9uY2UoJ2VuZCcsIG9uZW5kKTsKCSAgICB9CgkgIH0KCX0KCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRHVwbGV4LnByb3RvdHlwZSwgJ3dyaXRhYmxlSGlnaFdhdGVyTWFyaycsIHsKCSAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGUKCSAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluCgkgIC8vIHVzZXJsYW5kIHdpbGwgZmFpbAoJICBlbnVtZXJhYmxlOiBmYWxzZSwKCSAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUuaGlnaFdhdGVyTWFyazsKCSAgfQoJfSk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRHVwbGV4LnByb3RvdHlwZSwgJ3dyaXRhYmxlQnVmZmVyJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZSAmJiB0aGlzLl93cml0YWJsZVN0YXRlLmdldEJ1ZmZlcigpOwoJICB9Cgl9KTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAnd3JpdGFibGVMZW5ndGgnLCB7CgkgIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlCgkgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpbgoJICAvLyB1c2VybGFuZCB3aWxsIGZhaWwKCSAgZW51bWVyYWJsZTogZmFsc2UsCgkgIGdldDogZnVuY3Rpb24gZ2V0KCkgewoJICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmxlbmd0aDsKCSAgfQoJfSk7IC8vIHRoZSBuby1oYWxmLW9wZW4gZW5mb3JjZXIKCglmdW5jdGlvbiBvbmVuZCgpIHsKCSAgLy8gSWYgdGhlIHdyaXRhYmxlIHNpZGUgZW5kZWQsIHRoZW4gd2UncmUgb2suCgkgIGlmICh0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkKSByZXR1cm47IC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi4KCSAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suCgoJICBwcm9jZXNzLm5leHRUaWNrKG9uRW5kTlQsIHRoaXMpOwoJfQoKCWZ1bmN0aW9uIG9uRW5kTlQoc2VsZikgewoJICBzZWxmLmVuZCgpOwoJfQoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAnZGVzdHJveWVkJywgewoJICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZQoJICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW4KCSAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsCgkgIGVudW1lcmFibGU6IGZhbHNlLAoJICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkgewoJICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH0KCgkgICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkOwoJICB9LAoJICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewoJICAgIC8vIHdlIGlnbm9yZSB0aGUgdmFsdWUgaWYgdGhlIHN0cmVhbQoJICAgIC8vIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCB5ZXQKCSAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkgewoJICAgICAgcmV0dXJuOwoJICAgIH0gLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseQoJICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZAoKCgkgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTsKCSAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IHZhbHVlOwoJICB9Cgl9KTsKCX0pOwoKCXZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKCWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKCXZhciBUaW55RW1pdHRlciA9IGZ1bmN0aW9uICgpIHsKCSAgZnVuY3Rpb24gVGlueUVtaXR0ZXIoKSB7CgkgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRpbnlFbWl0dGVyKTsKCgkgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdfX2xpc3RlbmVycycsIHsKCSAgICAgIHZhbHVlOiB7fSwKCSAgICAgIGVudW1lcmFibGU6IGZhbHNlLAoJICAgICAgd3JpdGFibGU6IGZhbHNlCgkgICAgfSk7CgkgIH0KCgkgIF9jcmVhdGVDbGFzcyhUaW55RW1pdHRlciwgW3sKCSAgICBrZXk6ICdlbWl0JywKCSAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdChldmVudE5hbWUpIHsKCSAgICAgIGlmICghdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdKSByZXR1cm4gdGhpczsKCgkgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKCSAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07CgkgICAgICB9CgoJICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwoJICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CgkgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7CgoJICAgICAgdHJ5IHsKCSAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkgewoJICAgICAgICAgIHZhciBoYW5kbGVyID0gX3N0ZXAudmFsdWU7CgoJICAgICAgICAgIGhhbmRsZXIuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTsKCSAgICAgICAgfQoJICAgICAgfSBjYXRjaCAoZXJyKSB7CgkgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKCSAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7CgkgICAgICB9IGZpbmFsbHkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7CgkgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CgkgICAgICAgICAgfQoJICAgICAgICB9IGZpbmFsbHkgewoJICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikgewoJICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnb25jZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UoZXZlbnROYW1lLCBoYW5kbGVyKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIHZhciBvbmNlID0gZnVuY3Rpb24gb25jZSgpIHsKCSAgICAgICAgX3RoaXMub2ZmKGV2ZW50TmFtZSwgb25jZSk7CgkgICAgICAgIGhhbmRsZXIuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpOwoJICAgICAgfTsKCgkgICAgICByZXR1cm4gdGhpcy5vbihldmVudE5hbWUsIG9uY2UpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ29uJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnROYW1lLCBoYW5kbGVyKSB7CgkgICAgICBpZiAoIXRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSkgdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdID0gW107CgoJICAgICAgdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdLnB1c2goaGFuZGxlcik7CgoJICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnb2ZmJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGV2ZW50TmFtZSwgaGFuZGxlcikgewoJICAgICAgaWYgKGhhbmRsZXIpIHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSA9IHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXS5maWx0ZXIoZnVuY3Rpb24gKGgpIHsKCSAgICAgICAgcmV0dXJuIGggIT09IGhhbmRsZXI7CgkgICAgICB9KTtlbHNlIHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdOwoKCSAgICAgIHJldHVybiB0aGlzOwoJICAgIH0KCSAgfV0pOwoKCSAgcmV0dXJuIFRpbnlFbWl0dGVyOwoJfSgpOwoKCXZhciB0aW55RW1pdHRlciA9IFRpbnlFbWl0dGVyOwoKCXZhciBfY3JlYXRlQ2xhc3MkMSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgoJdmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoInZhbHVlIiBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfTsKCgl2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OwoKCWZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfQoKCWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayQxKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgoJZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOyB9CgoJZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0KCglmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkkMihvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgoKCgl2YXIgTUVTU0FHRV9SRVNVTFQgPSAwOwoJdmFyIE1FU1NBR0VfRVZFTlQgPSAxOwoKCXZhciBSRVNVTFRfRVJST1IgPSAwOwoJdmFyIFJFU1VMVF9TVUNDRVNTID0gMTsKCgl2YXIgREVGQVVMVF9IQU5ETEVSID0gJ21haW4nOwoKCXZhciBpc1Byb21pc2UgPSBmdW5jdGlvbiBpc1Byb21pc2UobykgewoJICByZXR1cm4gKHR5cGVvZiBvID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvKSkgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvLnRoZW4gPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG8uY2F0Y2ggPT09ICdmdW5jdGlvbic7Cgl9OwoKCWZ1bmN0aW9uIFJlZ2lzdGVyUHJvbWlzZShmbikgewoJICB2YXIgaGFuZGxlcnMgPSBfZGVmaW5lUHJvcGVydHkkMih7fSwgREVGQVVMVF9IQU5ETEVSLCBmbik7CgkgIHZhciBzZW5kUG9zdE1lc3NhZ2UgPSBzZWxmLnBvc3RNZXNzYWdlLmJpbmQoc2VsZik7CgoJICB2YXIgc2VydmVyID0gbmV3IChmdW5jdGlvbiAoX1RpbnlFbWl0dGVyKSB7CgkgICAgX2luaGVyaXRzKFdvcmtlclJlZ2lzdGVyLCBfVGlueUVtaXR0ZXIpOwoKCSAgICBmdW5jdGlvbiBXb3JrZXJSZWdpc3RlcigpIHsKCSAgICAgIF9jbGFzc0NhbGxDaGVjayQxKHRoaXMsIFdvcmtlclJlZ2lzdGVyKTsKCgkgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFdvcmtlclJlZ2lzdGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoV29ya2VyUmVnaXN0ZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKCSAgICB9CgoJICAgIF9jcmVhdGVDbGFzcyQxKFdvcmtlclJlZ2lzdGVyLCBbewoJICAgICAga2V5OiAnZW1pdCcsCgkgICAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdChldmVudE5hbWUpIHsKCSAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CgkgICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07CgkgICAgICAgIH0KCgkgICAgICAgIHNlbmRQb3N0TWVzc2FnZSh7IGV2ZW50TmFtZTogZXZlbnROYW1lLCBhcmdzOiBhcmdzIH0pOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICAgIH0KCSAgICB9LCB7CgkgICAgICBrZXk6ICdlbWl0TG9jYWxseScsCgkgICAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdExvY2FsbHkoZXZlbnROYW1lKSB7CgkgICAgICAgIHZhciBfZ2V0MjsKCgkgICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHsKCSAgICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdOwoJICAgICAgICB9CgoJICAgICAgICAoX2dldDIgPSBfZ2V0KFdvcmtlclJlZ2lzdGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFdvcmtlclJlZ2lzdGVyLnByb3RvdHlwZSksICdlbWl0JywgdGhpcykpLmNhbGwuYXBwbHkoX2dldDIsIFt0aGlzLCBldmVudE5hbWVdLmNvbmNhdChhcmdzKSk7CgkgICAgICB9CgkgICAgfSwgewoJICAgICAga2V5OiAnb3BlcmF0aW9uJywKCSAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVyYXRpb24obmFtZSwgaGFuZGxlcikgewoJICAgICAgICBoYW5kbGVyc1tuYW1lXSA9IGhhbmRsZXI7CgkgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgfQoJICAgIH1dKTsKCgkgICAgcmV0dXJuIFdvcmtlclJlZ2lzdGVyOwoJICB9KHRpbnlFbWl0dGVyKSkoKTsKCgkgIHZhciBydW4gPSBmdW5jdGlvbiBydW4obWVzc2FnZUlkLCBwYXlsb2FkLCBoYW5kbGVyTmFtZSkgewoKCSAgICB2YXIgb25TdWNjZXNzID0gZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkgewoJICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQgaW5zdGFuY2VvZiBUcmFuc2ZlcmFibGVSZXNwb25zZSkgewoJICAgICAgICBzZW5kUmVzdWx0KG1lc3NhZ2VJZCwgUkVTVUxUX1NVQ0NFU1MsIHJlc3VsdC5wYXlsb2FkLCByZXN1bHQudHJhbnNmZXJhYmxlKTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHNlbmRSZXN1bHQobWVzc2FnZUlkLCBSRVNVTFRfU1VDQ0VTUywgcmVzdWx0KTsKCSAgICAgIH0KCSAgICB9OwoKCSAgICB2YXIgb25FcnJvciA9IGZ1bmN0aW9uIG9uRXJyb3IoZSkgewoJICAgICAgc2VuZFJlc3VsdChtZXNzYWdlSWQsIFJFU1VMVF9FUlJPUiwgewoJICAgICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsCgkgICAgICAgIHN0YWNrOiBlLnN0YWNrCgkgICAgICB9KTsKCSAgICB9OwoKCSAgICB0cnkgewoJICAgICAgdmFyIHJlc3VsdCA9IHJ1bkZuKG1lc3NhZ2VJZCwgcGF5bG9hZCwgaGFuZGxlck5hbWUpOwoJICAgICAgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7CgkgICAgICAgIHJlc3VsdC50aGVuKG9uU3VjY2VzcykuY2F0Y2gob25FcnJvcik7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBvblN1Y2Nlc3MocmVzdWx0KTsKCSAgICAgIH0KCSAgICB9IGNhdGNoIChlKSB7CgkgICAgICBvbkVycm9yKGUpOwoJICAgIH0KCSAgfTsKCgkgIHZhciBydW5GbiA9IGZ1bmN0aW9uIHJ1bkZuKG1lc3NhZ2VJZCwgcGF5bG9hZCwgaGFuZGxlck5hbWUpIHsKCSAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2hhbmRsZXJOYW1lIHx8IERFRkFVTFRfSEFORExFUl07CgkgICAgaWYgKCFoYW5kbGVyKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBmb3VuZCBoYW5kbGVyIGZvciB0aGlzIHJlcXVlc3QnKTsKCgkgICAgcmV0dXJuIGhhbmRsZXIocGF5bG9hZCwgc2VuZEV2ZW50LmJpbmQobnVsbCwgbWVzc2FnZUlkKSk7CgkgIH07CgoJICB2YXIgc2VuZFJlc3VsdCA9IGZ1bmN0aW9uIHNlbmRSZXN1bHQobWVzc2FnZUlkLCBzdWNjZXNzLCBwYXlsb2FkKSB7CgkgICAgdmFyIHRyYW5zZmVyYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogW107CgoJICAgIHNlbmRQb3N0TWVzc2FnZShbTUVTU0FHRV9SRVNVTFQsIG1lc3NhZ2VJZCwgc3VjY2VzcywgcGF5bG9hZF0sIHRyYW5zZmVyYWJsZSk7CgkgIH07CgoJICB2YXIgc2VuZEV2ZW50ID0gZnVuY3Rpb24gc2VuZEV2ZW50KG1lc3NhZ2VJZCwgZXZlbnROYW1lLCBwYXlsb2FkKSB7CgkgICAgaWYgKCFldmVudE5hbWUpIHRocm93IG5ldyBFcnJvcignZXZlbnROYW1lIGlzIHJlcXVpcmVkJyk7CgoJICAgIGlmICh0eXBlb2YgZXZlbnROYW1lICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKCdldmVudE5hbWUgc2hvdWxkIGJlIHN0cmluZycpOwoKCSAgICBzZW5kUG9zdE1lc3NhZ2UoW01FU1NBR0VfRVZFTlQsIG1lc3NhZ2VJZCwgZXZlbnROYW1lLCBwYXlsb2FkXSk7CgkgIH07CgoJICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoX3JlZikgewoJICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwoKCSAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewoJICAgICAgcnVuLmFwcGx5KHVuZGVmaW5lZCwgX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEpKTsKCSAgICB9IGVsc2UgaWYgKGRhdGEgJiYgZGF0YS5ldmVudE5hbWUpIHsKCSAgICAgIHNlcnZlci5lbWl0TG9jYWxseS5hcHBseShzZXJ2ZXIsIFtkYXRhLmV2ZW50TmFtZV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShkYXRhLmFyZ3MpKSk7CgkgICAgfQoJICB9KTsKCgkgIHJldHVybiBzZXJ2ZXI7Cgl9CgoJdmFyIFRyYW5zZmVyYWJsZVJlc3BvbnNlID0gZnVuY3Rpb24gVHJhbnNmZXJhYmxlUmVzcG9uc2UocGF5bG9hZCwgdHJhbnNmZXJhYmxlKSB7CgkgIF9jbGFzc0NhbGxDaGVjayQxKHRoaXMsIFRyYW5zZmVyYWJsZVJlc3BvbnNlKTsKCgkgIHRoaXMucGF5bG9hZCA9IHBheWxvYWQ7CgkgIHRoaXMudHJhbnNmZXJhYmxlID0gdHJhbnNmZXJhYmxlOwoJfTsKCgl2YXIgcmVnaXN0ZXIgPSBSZWdpc3RlclByb21pc2U7Cgl2YXIgVHJhbnNmZXJhYmxlUmVzcG9uc2VfMSA9IFRyYW5zZmVyYWJsZVJlc3BvbnNlOwoJcmVnaXN0ZXIuVHJhbnNmZXJhYmxlUmVzcG9uc2UgPSBUcmFuc2ZlcmFibGVSZXNwb25zZV8xOwoKCS8qIGVzbGludC1kaXNhYmxlICovCgkvLyBwcmV0dGllci1pZ25vcmUKCglyZWdpc3RlcihmdW5jdGlvbiAobWVzc2FnZSwgZW1pdCkgewoJICB2YXIgYXJyYXkgPSBtZXNzYWdlLmFycmF5OwoJICB2YXIgbWluID0gbWVzc2FnZS5taW47CgkgIHZhciBtYXggPSBtZXNzYWdlLm1heDsKCSAgdmFyIG9mZnNldCA9IG1lc3NhZ2UuY29tcG9uZW50IHx8IDA7CgkgIHZhciBzdGVwID0gbWVzc2FnZS5udW1iZXJPZkNvbXBvbmVudHMgfHwgMTsKCSAgdmFyIG51bWJlck9mQmlucyA9IG1lc3NhZ2UubnVtYmVyT2ZCaW5zOwoJICB2YXIgZGVsdGEgPSBtYXggLSBtaW47CgkgIHZhciBoaXN0b2dyYW0gPSBuZXcgRmxvYXQzMkFycmF5KG51bWJlck9mQmlucyk7CgkgIGhpc3RvZ3JhbS5maWxsKDApOwoJICB2YXIgbGVuID0gYXJyYXkubGVuZ3RoOwoKCSAgZm9yICh2YXIgaSA9IG9mZnNldDsgaSA8IGxlbjsgaSArPSBzdGVwKSB7CgkgICAgdmFyIGlkeCA9IE1hdGguZmxvb3IoKG51bWJlck9mQmlucyAtIDEpICogKE51bWJlcihhcnJheVtpXSkgLSBtaW4pIC8gZGVsdGEpOwoJICAgIGhpc3RvZ3JhbVtpZHhdICs9IDE7CgkgIH0KCgkgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IHJlZ2lzdGVyLlRyYW5zZmVyYWJsZVJlc3BvbnNlKGhpc3RvZ3JhbSwgW2hpc3RvZ3JhbS5idWZmZXJdKSk7Cgl9KTsKCn0oKSk7Cgo=",Xc="data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tcHV0ZUhpc3RvZ3JhbS53b3JrZXIuanMiLCJzb3VyY2VzIjpbIndvcmtlcjovL3dlYi13b3JrZXIvbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL2ludGVybmFsL3N0cmVhbXMvc3RyZWFtLWJyb3dzZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9iYXNlNjQtanMvaW5kZXguanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL2J1ZmZlcl9saXN0LmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3kuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vZXJyb3JzLWJyb3dzZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL2ludGVybmFsL3N0cmVhbXMvc3RhdGUuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvc2FmZS1idWZmZXIvaW5kZXguanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9zdHJpbmdfZGVjb2Rlci9saWIvc3RyaW5nX2RlY29kZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL2ludGVybmFsL3N0cmVhbXMvZW5kLW9mLXN0cmVhbS5qcyIsIndvcmtlcjovL3dlYi13b3JrZXIvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvaW50ZXJuYWwvc3RyZWFtcy9hc3luY19pdGVyYXRvci5qcyIsIndvcmtlcjovL3dlYi13b3JrZXIvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvaW50ZXJuYWwvc3RyZWFtcy9mcm9tLWJyb3dzZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcmVhZGFibGUuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy91dGlsLWRlcHJlY2F0ZS9icm93c2VyLmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX2R1cGxleC5qcyIsIndvcmtlcjovL3dlYi13b3JrZXIvbm9kZV9tb2R1bGVzL3dlYndvcmtlci1wcm9taXNlL2xpYi90aW55LWVtaXR0ZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL25vZGVfbW9kdWxlcy93ZWJ3b3JrZXItcHJvbWlzZS9saWIvcmVnaXN0ZXIuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL1NvdXJjZXMvSW50ZXJhY3Rpb24vV2lkZ2V0cy9QaWVjZXdpc2VHYXVzc2lhbldpZGdldC9Db21wdXRlSGlzdG9ncmFtLndvcmtlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsXG52YXIgUmVmbGVjdEFwcGx5ID0gUiAmJiB0eXBlb2YgUi5hcHBseSA9PT0gJ2Z1bmN0aW9uJ1xuICA/IFIuYXBwbHlcbiAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykge1xuICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcbiAgfVxuXG52YXIgUmVmbGVjdE93bktleXNcbmlmIChSICYmIHR5cGVvZiBSLm93bktleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXNcbn0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpXG4gICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7XG4gIH07XG59IGVsc2Uge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbn1cblxudmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRFbWl0dGVyLmluaXQuY2FsbCh0aGlzKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xubW9kdWxlLmV4cG9ydHMub25jZSA9IG9uY2U7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG5mdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgfHwgYXJnIDwgMCB8fCBOdW1iZXJJc05hTihhcmcpKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpO1xuICAgIH1cbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICB9XG59KTtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICBpZiAodGhpcy5fZXZlbnRzID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHtcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59O1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPCAwIHx8IE51bWJlcklzTmFOKG4pKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7XG4gIH1cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBfZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcbiAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgdmFyIGVyO1xuICAgIGlmIChhcmdzLmxlbmd0aCA+IDApXG4gICAgICBlciA9IGFyZ3NbMF07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIC8vIE5vdGU6IFRoZSBjb21tZW50cyBvbiB0aGUgYHRocm93YCBsaW5lcyBhcmUgaW50ZW50aW9uYWwsIHRoZXkgc2hvd1xuICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi5cbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH1cbiAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIGVycm9yLicgKyAoZXIgPyAnICgnICsgZXIubWVzc2FnZSArICcpJyA6ICcnKSk7XG4gICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gIH1cblxuICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTtcblxuICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gICAgaWYgKGV2ZW50cy5uZXdMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID1cbiAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7XG4gICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBtID0gX2dldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAvLyBObyBlcnJvciBjb2RlIGZvciB0aGlzIHNpbmNlIGl0IGlzIGEgV2FybmluZ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgU3RyaW5nKHR5cGUpICsgJyBsaXN0ZW5lcnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdCcpO1xuICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICB3LnR5cGUgPSB0eXBlO1xuICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG5cbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpO1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzdGF0ZSA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHVuZGVmaW5lZCwgdGFyZ2V0OiB0YXJnZXQsIHR5cGU6IHR5cGUsIGxpc3RlbmVyOiBsaXN0ZW5lciB9O1xuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHN0YXRlLndyYXBGbiA9IHdyYXBwZWQ7XG4gIHJldHVybiB3cmFwcGVkO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbi8vIEVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZiBhbmQgb25seSBpZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGxpc3QsIGV2ZW50cywgcG9zaXRpb24sIGksIG9yaWdpbmFsTGlzdGVuZXI7XG5cbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGxpc3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdO1xuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzLCBldmVudHMsIGk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gW107XG5cbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG4gIGlmIChldmxpc3RlbmVyID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIHVud3JhcCA/XG4gICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdO1xufTtcblxuZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHtcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKVxuICAgIGxpc3RbaW5kZXhdID0gbGlzdFtpbmRleCArIDFdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBvbmNlKGVtaXR0ZXIsIG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmdW5jdGlvbiBldmVudExpc3RlbmVyKCkge1xuICAgICAgaWYgKGVycm9yTGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgIH07XG4gICAgdmFyIGVycm9yTGlzdGVuZXI7XG5cbiAgICAvLyBBZGRpbmcgYW4gZXJyb3IgbGlzdGVuZXIgaXMgbm90IG9wdGlvbmFsIGJlY2F1c2VcbiAgICAvLyBpZiBhbiBlcnJvciBpcyB0aHJvd24gb24gYW4gZXZlbnQgZW1pdHRlciB3ZSBjYW5ub3RcbiAgICAvLyBndWFyYW50ZWUgdGhhdCB0aGUgYWN0dWFsIGV2ZW50IHdlIGFyZSB3YWl0aW5nIHdpbGxcbiAgICAvLyBiZSBmaXJlZC4gVGhlIHJlc3VsdCBjb3VsZCBiZSBhIHNpbGVudCB3YXkgdG8gY3JlYXRlXG4gICAgLy8gbWVtb3J5IG9yIGZpbGUgZGVzY3JpcHRvciBsZWFrcywgd2hpY2ggaXMgc29tZXRoaW5nXG4gICAgLy8gd2Ugc2hvdWxkIGF2b2lkLlxuICAgIGlmIChuYW1lICE9PSAnZXJyb3InKSB7XG4gICAgICBlcnJvckxpc3RlbmVyID0gZnVuY3Rpb24gZXJyb3JMaXN0ZW5lcihlcnIpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCBldmVudExpc3RlbmVyKTtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9O1xuXG4gICAgICBlbWl0dGVyLm9uY2UoJ2Vycm9yJywgZXJyb3JMaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgZW1pdHRlci5vbmNlKG5hbWUsIGV2ZW50TGlzdGVuZXIpO1xuICB9KTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xuIiwiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxuLy8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLlxuLy8gU2VlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQjVVJMX2FwcGxpY2F0aW9uc1xucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gZ2V0TGVucyAoYjY0KSB7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIFRyaW0gb2ZmIGV4dHJhIGJ5dGVzIGFmdGVyIHBsYWNlaG9sZGVyIGJ5dGVzIGFyZSBmb3VuZFxuICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9iZWF0Z2FtbWl0L2Jhc2U2NC1qcy9pc3N1ZXMvNDJcbiAgdmFyIHZhbGlkTGVuID0gYjY0LmluZGV4T2YoJz0nKVxuICBpZiAodmFsaWRMZW4gPT09IC0xKSB2YWxpZExlbiA9IGxlblxuXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSB2YWxpZExlbiA9PT0gbGVuXG4gICAgPyAwXG4gICAgOiA0IC0gKHZhbGlkTGVuICUgNClcblxuICByZXR1cm4gW3ZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW5dXG59XG5cbi8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpXG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIF9ieXRlTGVuZ3RoIChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHtcbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KVxuICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdXG5cbiAgdmFyIGFyciA9IG5ldyBBcnIoX2J5dGVMZW5ndGgoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSlcblxuICB2YXIgY3VyQnl0ZSA9IDBcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIHZhciBsZW4gPSBwbGFjZUhvbGRlcnNMZW4gPiAwXG4gICAgPyB2YWxpZExlbiAtIDRcbiAgICA6IHZhbGlkTGVuXG5cbiAgdmFyIGlcbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8XG4gICAgICByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXVxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiAxNikgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMikge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNClcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDEpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCA0KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMilcbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG4gIHJldHVybiBsb29rdXBbbnVtID4+IDE4ICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gPj4gMTIgJiAweDNGXSArXG4gICAgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gJiAweDNGXVxufVxuXG5mdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHRtcFxuICB2YXIgb3V0cHV0ID0gW11cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcbiAgICB0bXAgPVxuICAgICAgKCh1aW50OFtpXSA8PCAxNikgJiAweEZGMDAwMCkgK1xuICAgICAgKCh1aW50OFtpICsgMV0gPDwgOCkgJiAweEZGMDApICtcbiAgICAgICh1aW50OFtpICsgMl0gJiAweEZGKVxuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKVxuICB9XG4gIHJldHVybiBvdXRwdXQuam9pbignJylcbn1cblxuZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSAodWludDgpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG4gIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuICB2YXIgcGFydHMgPSBbXVxuICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblxuICAvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG4gIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcbiAgICBwYXJ0cy5wdXNoKGVuY29kZUNodW5rKFxuICAgICAgdWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKVxuICAgICkpXG4gIH1cblxuICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG4gIGlmIChleHRyYUJ5dGVzID09PSAxKSB7XG4gICAgdG1wID0gdWludDhbbGVuIC0gMV1cbiAgICBwYXJ0cy5wdXNoKFxuICAgICAgbG9va3VwW3RtcCA+PiAyXSArXG4gICAgICBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M0ZdICtcbiAgICAgICc9PSdcbiAgICApXG4gIH0gZWxzZSBpZiAoZXh0cmFCeXRlcyA9PT0gMikge1xuICAgIHRtcCA9ICh1aW50OFtsZW4gLSAyXSA8PCA4KSArIHVpbnQ4W2xlbiAtIDFdXG4gICAgcGFydHMucHVzaChcbiAgICAgIGxvb2t1cFt0bXAgPj4gMTBdICtcbiAgICAgIGxvb2t1cFsodG1wID4+IDQpICYgMHgzRl0gK1xuICAgICAgbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXSArXG4gICAgICAnPSdcbiAgICApXG4gIH1cblxuICByZXR1cm4gcGFydHMuam9pbignJylcbn1cbiIsIi8qISBpZWVlNzU0LiBCU0QtMy1DbGF1c2UgTGljZW5zZS4gRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnL29wZW5zb3VyY2U+ICovXG5leHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbVxuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IChlICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IChtICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIGlmIChlID09PSAwKSB7XG4gICAgZSA9IDEgLSBlQmlhc1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSlcbiAgfSBlbHNlIHtcbiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG4gICAgZSA9IGUgLSBlQmlhc1xuICB9XG4gIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG59XG5cbmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG0sIGNcbiAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKCh2YWx1ZSAqIGMpIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG4iLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cbid1c2Ugc3RyaWN0J1xuXG5jb25zdCBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxuY29uc3QgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxuY29uc3QgY3VzdG9tSW5zcGVjdFN5bWJvbCA9XG4gICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2xbJ2ZvciddID09PSAnZnVuY3Rpb24nKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGRvdC1ub3RhdGlvblxuICAgID8gU3ltYm9sWydmb3InXSgnbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGRvdC1ub3RhdGlvblxuICAgIDogbnVsbFxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5cbmNvbnN0IEtfTUFYX0xFTkdUSCA9IDB4N2ZmZmZmZmZcbmV4cG9ydHMua01heExlbmd0aCA9IEtfTUFYX0xFTkdUSFxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBQcmludCB3YXJuaW5nIGFuZCByZWNvbW1lbmQgdXNpbmcgYGJ1ZmZlcmAgdjQueCB3aGljaCBoYXMgYW4gT2JqZWN0XG4gKiAgICAgICAgICAgICAgIGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBXZSByZXBvcnQgdGhhdCB0aGUgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBpZiB0aGUgYXJlIG5vdCBzdWJjbGFzc2FibGVcbiAqIHVzaW5nIF9fcHJvdG9fXy4gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWBcbiAqIChTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOCkuIElFIDEwIGxhY2tzIHN1cHBvcnRcbiAqIGZvciBfX3Byb3RvX18gYW5kIGhhcyBhIGJ1Z2d5IHR5cGVkIGFycmF5IGltcGxlbWVudGF0aW9uLlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICBjb25zb2xlLmVycm9yKFxuICAgICdUaGlzIGJyb3dzZXIgbGFja3MgdHlwZWQgYXJyYXkgKFVpbnQ4QXJyYXkpIHN1cHBvcnQgd2hpY2ggaXMgcmVxdWlyZWQgYnkgJyArXG4gICAgJ2BidWZmZXJgIHY1LnguIFVzZSBgYnVmZmVyYCB2NC54IGlmIHlvdSByZXF1aXJlIG9sZCBicm93c2VyIHN1cHBvcnQuJ1xuICApXG59XG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgLy8gQ2FuIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkP1xuICB0cnkge1xuICAgIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgY29uc3QgcHJvdG8gPSB7IGZvbzogZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfSB9XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHByb3RvLCBVaW50OEFycmF5LnByb3RvdHlwZSlcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoYXJyLCBwcm90bylcbiAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MlxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlci5wcm90b3R5cGUsICdwYXJlbnQnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKHRoaXMpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyXG4gIH1cbn0pXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIucHJvdG90eXBlLCAnb2Zmc2V0Jywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0aGlzKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmJ5dGVPZmZzZXRcbiAgfVxufSlcblxuZnVuY3Rpb24gY3JlYXRlQnVmZmVyIChsZW5ndGgpIHtcbiAgaWYgKGxlbmd0aCA+IEtfTUFYX0xFTkdUSCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgXCInICsgbGVuZ3RoICsgJ1wiIGlzIGludmFsaWQgZm9yIG9wdGlvbiBcInNpemVcIicpXG4gIH1cbiAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2VcbiAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKVxuICBPYmplY3Quc2V0UHJvdG90eXBlT2YoYnVmLCBCdWZmZXIucHJvdG90eXBlKVxuICByZXR1cm4gYnVmXG59XG5cbi8qKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXG4gKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mXG4gKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxuICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXG4gKi9cblxuZnVuY3Rpb24gQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICAvLyBDb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ1RoZSBcInN0cmluZ1wiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBzdHJpbmcuIFJlY2VpdmVkIHR5cGUgbnVtYmVyJ1xuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gYWxsb2NVbnNhZmUoYXJnKVxuICB9XG4gIHJldHVybiBmcm9tKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxuZnVuY3Rpb24gZnJvbSAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0KVxuICB9XG5cbiAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZnJvbUFycmF5Vmlldyh2YWx1ZSlcbiAgfVxuXG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICdUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCAnICtcbiAgICAgICdvciBBcnJheS1saWtlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSAnICsgKHR5cGVvZiB2YWx1ZSlcbiAgICApXG4gIH1cblxuICBpZiAoaXNJbnN0YW5jZSh2YWx1ZSwgQXJyYXlCdWZmZXIpIHx8XG4gICAgICAodmFsdWUgJiYgaXNJbnN0YW5jZSh2YWx1ZS5idWZmZXIsIEFycmF5QnVmZmVyKSkpIHtcbiAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAodHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgKGlzSW5zdGFuY2UodmFsdWUsIFNoYXJlZEFycmF5QnVmZmVyKSB8fFxuICAgICAgKHZhbHVlICYmIGlzSW5zdGFuY2UodmFsdWUuYnVmZmVyLCBTaGFyZWRBcnJheUJ1ZmZlcikpKSkge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICdUaGUgXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlIG51bWJlcidcbiAgICApXG4gIH1cblxuICBjb25zdCB2YWx1ZU9mID0gdmFsdWUudmFsdWVPZiAmJiB2YWx1ZS52YWx1ZU9mKClcbiAgaWYgKHZhbHVlT2YgIT0gbnVsbCAmJiB2YWx1ZU9mICE9PSB2YWx1ZSkge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbSh2YWx1ZU9mLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBjb25zdCBiID0gZnJvbU9iamVjdCh2YWx1ZSlcbiAgaWYgKGIpIHJldHVybiBiXG5cbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1ByaW1pdGl2ZSAhPSBudWxsICYmXG4gICAgICB0eXBlb2YgdmFsdWVbU3ltYm9sLnRvUHJpbWl0aXZlXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbSh2YWx1ZVtTeW1ib2wudG9QcmltaXRpdmVdKCdzdHJpbmcnKSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAnVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgJyArXG4gICAgJ29yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlICcgKyAodHlwZW9mIHZhbHVlKVxuICApXG59XG5cbi8qKlxuICogRnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdG8gQnVmZmVyKGFyZywgZW5jb2RpbmcpIGJ1dCB0aHJvd3MgYSBUeXBlRXJyb3JcbiAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLlxuICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKVxuICogQnVmZmVyLmZyb20oYXJyYXkpXG4gKiBCdWZmZXIuZnJvbShidWZmZXIpXG4gKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSlcbiAqKi9cbkJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGZyb20odmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuLy8gTm90ZTogQ2hhbmdlIHByb3RvdHlwZSAqYWZ0ZXIqIEJ1ZmZlci5mcm9tIGlzIGRlZmluZWQgdG8gd29ya2Fyb3VuZCBDaHJvbWUgYnVnOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC8xNDhcbk9iamVjdC5zZXRQcm90b3R5cGVPZihCdWZmZXIucHJvdG90eXBlLCBVaW50OEFycmF5LnByb3RvdHlwZSlcbk9iamVjdC5zZXRQcm90b3R5cGVPZihCdWZmZXIsIFVpbnQ4QXJyYXkpXG5cbmZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBudW1iZXInKVxuICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBcIicgKyBzaXplICsgJ1wiIGlzIGludmFsaWQgZm9yIG9wdGlvbiBcInNpemVcIicpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgaWYgKHNpemUgPD0gMCkge1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSlcbiAgfVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG4gICAgLy8gYmUgaW50ZXJwcmV0ZWQgYXMgYSBzdGFydCBvZmZzZXQuXG4gICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZydcbiAgICAgID8gY3JlYXRlQnVmZmVyKHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG4gICAgICA6IGNyZWF0ZUJ1ZmZlcihzaXplKS5maWxsKGZpbGwpXG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplKVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSlcbiAqKi9cbkJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICByZXR1cm4gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpXG59XG5cbmZ1bmN0aW9uIGFsbG9jVW5zYWZlIChzaXplKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMClcbn1cblxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShzaXplKVxufVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShzaXplKVxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgfVxuXG4gIGNvbnN0IGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG4gIGxldCBidWYgPSBjcmVhdGVCdWZmZXIobGVuZ3RoKVxuXG4gIGNvbnN0IGFjdHVhbCA9IGJ1Zi53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgYnVmID0gYnVmLnNsaWNlKDAsIGFjdHVhbClcbiAgfVxuXG4gIHJldHVybiBidWZcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAoYXJyYXkpIHtcbiAgY29uc3QgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIGNvbnN0IGJ1ZiA9IGNyZWF0ZUJ1ZmZlcihsZW5ndGgpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICBidWZbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiBidWZcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5VmlldyAoYXJyYXlWaWV3KSB7XG4gIGlmIChpc0luc3RhbmNlKGFycmF5VmlldywgVWludDhBcnJheSkpIHtcbiAgICBjb25zdCBjb3B5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlWaWV3KVxuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIoY29weS5idWZmZXIsIGNvcHkuYnl0ZU9mZnNldCwgY29weS5ieXRlTGVuZ3RoKVxuICB9XG4gIHJldHVybiBmcm9tQXJyYXlMaWtlKGFycmF5Vmlldylcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyIChhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcIm9mZnNldFwiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wibGVuZ3RoXCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGxldCBidWZcbiAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5KVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpXG4gIH0gZWxzZSB7XG4gICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlXG4gIE9iamVjdC5zZXRQcm90b3R5cGVPZihidWYsIEJ1ZmZlci5wcm90b3R5cGUpXG5cbiAgcmV0dXJuIGJ1ZlxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0IChvYmopIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmopKSB7XG4gICAgY29uc3QgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcbiAgICBjb25zdCBidWYgPSBjcmVhdGVCdWZmZXIobGVuKVxuXG4gICAgaWYgKGJ1Zi5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBidWZcbiAgICB9XG5cbiAgICBvYmouY29weShidWYsIDAsIDAsIGxlbilcbiAgICByZXR1cm4gYnVmXG4gIH1cblxuICBpZiAob2JqLmxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBudW1iZXJJc05hTihvYmoubGVuZ3RoKSkge1xuICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcigwKVxuICAgIH1cbiAgICByZXR1cm4gZnJvbUFycmF5TGlrZShvYmopXG4gIH1cblxuICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIEFycmF5LmlzQXJyYXkob2JqLmRhdGEpKSB7XG4gICAgcmV0dXJuIGZyb21BcnJheUxpa2Uob2JqLmRhdGEpXG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XG4gIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IEtfTUFYX0xFTkdUSGAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcbiAgaWYgKGxlbmd0aCA+PSBLX01BWF9MRU5HVEgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsgS19NQVhfTEVOR1RILnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuICB9XG4gIHJldHVybiBsZW5ndGggfCAwXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIgKGxlbmd0aCkge1xuICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXFcbiAgICBsZW5ndGggPSAwXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKVxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuICByZXR1cm4gYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyID09PSB0cnVlICYmXG4gICAgYiAhPT0gQnVmZmVyLnByb3RvdHlwZSAvLyBzbyBCdWZmZXIuaXNCdWZmZXIoQnVmZmVyLnByb3RvdHlwZSkgd2lsbCBiZSBmYWxzZVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcbiAgaWYgKGlzSW5zdGFuY2UoYSwgVWludDhBcnJheSkpIGEgPSBCdWZmZXIuZnJvbShhLCBhLm9mZnNldCwgYS5ieXRlTGVuZ3RoKVxuICBpZiAoaXNJbnN0YW5jZShiLCBVaW50OEFycmF5KSkgYiA9IEJ1ZmZlci5mcm9tKGIsIGIub2Zmc2V0LCBiLmJ5dGVMZW5ndGgpXG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgJ1RoZSBcImJ1ZjFcIiwgXCJidWYyXCIgYXJndW1lbnRzIG11c3QgYmUgb25lIG9mIHR5cGUgQnVmZmVyIG9yIFVpbnQ4QXJyYXknXG4gICAgKVxuICB9XG5cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cbiAgbGV0IHggPSBhLmxlbmd0aFxuICBsZXQgeSA9IGIubGVuZ3RoXG5cbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xuICAgICAgeCA9IGFbaV1cbiAgICAgIHkgPSBiW2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuQnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgY2FzZSAndXRmOCc6XG4gICAgY2FzZSAndXRmLTgnOlxuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdsYXRpbjEnOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1Y3MtMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShsaXN0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gIH1cblxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApXG4gIH1cblxuICBsZXQgaVxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpXG4gIGxldCBwb3MgPSAwXG4gIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgbGV0IGJ1ZiA9IGxpc3RbaV1cbiAgICBpZiAoaXNJbnN0YW5jZShidWYsIFVpbnQ4QXJyYXkpKSB7XG4gICAgICBpZiAocG9zICsgYnVmLmxlbmd0aCA+IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgYnVmID0gQnVmZmVyLmZyb20oYnVmKVxuICAgICAgICBidWYuY29weShidWZmZXIsIHBvcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKFxuICAgICAgICAgIGJ1ZmZlcixcbiAgICAgICAgICBidWYsXG4gICAgICAgICAgcG9zXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpXG4gICAgfVxuICAgIHBvcyArPSBidWYubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZmZlclxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkge1xuICAgIHJldHVybiBzdHJpbmcubGVuZ3RoXG4gIH1cbiAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IGlzSW5zdGFuY2Uoc3RyaW5nLCBBcnJheUJ1ZmZlcikpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgJ1RoZSBcInN0cmluZ1wiIGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIG9yIEFycmF5QnVmZmVyLiAnICtcbiAgICAgICdSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2Ygc3RyaW5nXG4gICAgKVxuICB9XG5cbiAgY29uc3QgbGVuID0gc3RyaW5nLmxlbmd0aFxuICBjb25zdCBtdXN0TWF0Y2ggPSAoYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdID09PSB0cnVlKVxuICBpZiAoIW11c3RNYXRjaCAmJiBsZW4gPT09IDApIHJldHVybiAwXG5cbiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uXG4gIGxldCBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxlblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDJcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBsZW4gPj4+IDFcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHtcbiAgICAgICAgICByZXR1cm4gbXVzdE1hdGNoID8gLTEgOiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuICAgICAgICB9XG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5CdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuICBsZXQgbG93ZXJlZENhc2UgPSBmYWxzZVxuXG4gIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgXCJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyXCIgc2luY2UgaXQncyBhIHJlYWQtb25seVxuICAvLyBwcm9wZXJ0eSBvZiBhIHR5cGVkIGFycmF5LlxuXG4gIC8vIFRoaXMgYmVoYXZlcyBuZWl0aGVyIGxpa2UgU3RyaW5nIG5vciBVaW50OEFycmF5IGluIHRoYXQgd2Ugc2V0IHN0YXJ0L2VuZFxuICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuXG4gIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sXG4gIC8vIFNlY3Rpb24gMTMuMy4zLjcgUnVudGltZSBTZW1hbnRpY3M6IEtleWVkQmluZGluZ0luaXRpYWxpemF0aW9uLlxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICAvLyBSZXR1cm4gZWFybHkgaWYgc3RhcnQgPiB0aGlzLmxlbmd0aC4gRG9uZSBoZXJlIHRvIHByZXZlbnQgcG90ZW50aWFsIHVpbnQzMlxuICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LlxuICBpZiAoc3RhcnQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChlbmQgPD0gMCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLy8gRm9yY2UgY29lcmNpb24gdG8gdWludDMyLiBUaGlzIHdpbGwgYWxzbyBjb2VyY2UgZmFsc2V5L05hTiB2YWx1ZXMgdG8gMC5cbiAgZW5kID4+Pj0gMFxuICBzdGFydCA+Pj49IDBcblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuLy8gVGhpcyBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIChhbmQgdGhlIGBpcy1idWZmZXJgIG5wbSBwYWNrYWdlKVxuLy8gdG8gZGV0ZWN0IGEgQnVmZmVyIGluc3RhbmNlLiBJdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgYGluc3RhbmNlb2YgQnVmZmVyYFxuLy8gcmVsaWFibHkgaW4gYSBicm93c2VyaWZ5IGNvbnRleHQgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBtdWx0aXBsZSBkaWZmZXJlbnRcbi8vIGNvcGllcyBvZiB0aGUgJ2J1ZmZlcicgcGFja2FnZSBpbiB1c2UuIFRoaXMgbWV0aG9kIHdvcmtzIGV2ZW4gZm9yIEJ1ZmZlclxuLy8gaW5zdGFuY2VzIHRoYXQgd2VyZSBjcmVhdGVkIGZyb20gYW5vdGhlciBjb3B5IG9mIHRoZSBgYnVmZmVyYCBwYWNrYWdlLlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9pc3N1ZXMvMTU0XG5CdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWVcblxuZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkge1xuICBjb25zdCBpID0gYltuXVxuICBiW25dID0gYlttXVxuICBiW21dID0gaVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIGNvbnN0IGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSAyICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzJylcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMSlcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XG4gIGNvbnN0IGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA0ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJylcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMilcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXA2NCA9IGZ1bmN0aW9uIHN3YXA2NCAoKSB7XG4gIGNvbnN0IGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgNylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcbiAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICBjb25zdCBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0xvY2FsZVN0cmluZyA9IEJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmdcblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICBsZXQgc3RyID0gJydcbiAgY29uc3QgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLnJlcGxhY2UoLyguezJ9KS9nLCAnJDEgJykudHJpbSgpXG4gIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cbmlmIChjdXN0b21JbnNwZWN0U3ltYm9sKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGVbY3VzdG9tSW5zcGVjdFN5bWJvbF0gPSBCdWZmZXIucHJvdG90eXBlLmluc3BlY3Rcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHtcbiAgaWYgKGlzSW5zdGFuY2UodGFyZ2V0LCBVaW50OEFycmF5KSkge1xuICAgIHRhcmdldCA9IEJ1ZmZlci5mcm9tKHRhcmdldCwgdGFyZ2V0Lm9mZnNldCwgdGFyZ2V0LmJ5dGVMZW5ndGgpXG4gIH1cbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAnVGhlIFwidGFyZ2V0XCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheS4gJyArXG4gICAgICAnUmVjZWl2ZWQgdHlwZSAnICsgKHR5cGVvZiB0YXJnZXQpXG4gICAgKVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydCA9IDBcbiAgfVxuICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNTdGFydCA9IDBcbiAgfVxuICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoc3RhcnQgPCAwIHx8IGVuZCA+IHRhcmdldC5sZW5ndGggfHwgdGhpc1N0YXJ0IDwgMCB8fCB0aGlzRW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMFxuICB9XG4gIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkge1xuICAgIHJldHVybiAtMVxuICB9XG4gIGlmIChzdGFydCA+PSBlbmQpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgc3RhcnQgPj4+PSAwXG4gIGVuZCA+Pj49IDBcbiAgdGhpc1N0YXJ0ID4+Pj0gMFxuICB0aGlzRW5kID4+Pj0gMFxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwXG5cbiAgbGV0IHggPSB0aGlzRW5kIC0gdGhpc1N0YXJ0XG4gIGxldCB5ID0gZW5kIC0gc3RhcnRcbiAgY29uc3QgbGVuID0gTWF0aC5taW4oeCwgeSlcblxuICBjb25zdCB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKVxuICBjb25zdCB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkge1xuICAgICAgeCA9IHRoaXNDb3B5W2ldXG4gICAgICB5ID0gdGFyZ2V0Q29weVtpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbi8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCxcbi8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuXG4vL1xuLy8gQXJndW1lbnRzOlxuLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2hcbi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXG4vLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzJcbi8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nXG4vLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxuZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XG4gIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaFxuICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG5cbiAgLy8gTm9ybWFsaXplIGJ5dGVPZmZzZXRcbiAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldFxuICAgIGJ5dGVPZmZzZXQgPSAwXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcbiAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkge1xuICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMFxuICB9XG4gIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldCAvLyBDb2VyY2UgdG8gTnVtYmVyLlxuICBpZiAobnVtYmVySXNOYU4oYnl0ZU9mZnNldCkpIHtcbiAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCBcImZvb1wiLCBldGMsIHNlYXJjaCB3aG9sZSBidWZmZXJcbiAgICBieXRlT2Zmc2V0ID0gZGlyID8gMCA6IChidWZmZXIubGVuZ3RoIC0gMSlcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0XG4gIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBpZiAoZGlyKSByZXR1cm4gLTFcbiAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMVxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XG4gICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDBcbiAgICBlbHNlIHJldHVybiAtMVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIHZhbFxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuICB9XG5cbiAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2ZcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgLy8gU3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlsc1xuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDB4RkYgLy8gU2VhcmNoIGZvciBhIGJ5dGUgdmFsdWUgWzAtMjU1XVxuICAgIGlmICh0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKGRpcikge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbdmFsXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgbGV0IGluZGV4U2l6ZSA9IDFcbiAgbGV0IGFyckxlbmd0aCA9IGFyci5sZW5ndGhcbiAgbGV0IHZhbExlbmd0aCA9IHZhbC5sZW5ndGhcblxuICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHxcbiAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgICAgfVxuICAgICAgaW5kZXhTaXplID0gMlxuICAgICAgYXJyTGVuZ3RoIC89IDJcbiAgICAgIHZhbExlbmd0aCAvPSAyXG4gICAgICBieXRlT2Zmc2V0IC89IDJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcbiAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG4gICAgICByZXR1cm4gYnVmW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG4gICAgfVxuICB9XG5cbiAgbGV0IGlcbiAgaWYgKGRpcikge1xuICAgIGxldCBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKSBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGxldCBmb3VuZCA9IHRydWVcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgY29uc3QgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGxldCBpXG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcbiAgICBpZiAobnVtYmVySXNOYU4ocGFyc2VkKSkgcmV0dXJuIGlcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWRcbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCA+Pj4gMFxuICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgfSBlbHNlIHtcbiAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG4gICAgICBsZW5ndGggPSB1bmRlZmluZWRcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJ1xuICAgIClcbiAgfVxuXG4gIGNvbnN0IHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZ1xuXG4gIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgbGV0IGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICBjb25zdCByZXMgPSBbXVxuXG4gIGxldCBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICBjb25zdCBmaXJzdEJ5dGUgPSBidWZbaV1cbiAgICBsZXQgY29kZVBvaW50ID0gbnVsbFxuICAgIGxldCBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpXG4gICAgICA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpXG4gICAgICAgICAgPyAzXG4gICAgICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRilcbiAgICAgICAgICAgICAgPyAyXG4gICAgICAgICAgICAgIDogMVxuXG4gICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xuICAgICAgbGV0IHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXG4gICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7XG4gICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkge1xuICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYVxuICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuICAgICAgY29kZVBvaW50ID0gMHhGRkZEXG4gICAgICBieXRlc1BlclNlcXVlbmNlID0gMVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcbiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcbiAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGXG4gICAgfVxuXG4gICAgcmVzLnB1c2goY29kZVBvaW50KVxuICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZVxuICB9XG5cbiAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpXG59XG5cbi8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aFxuLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eVxuY29uc3QgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIGNvbnN0IGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgbGV0IHJlcyA9ICcnXG4gIGxldCBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBsZXQgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgbGV0IHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgY29uc3QgbGVuID0gYnVmLmxlbmd0aFxuXG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXG4gIGxldCBvdXQgPSAnJ1xuICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIG91dCArPSBoZXhTbGljZUxvb2t1cFRhYmxlW2J1ZltpXV1cbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGNvbnN0IGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIGxldCByZXMgPSAnJ1xuICAvLyBJZiBieXRlcy5sZW5ndGggaXMgb2RkLCB0aGUgbGFzdCA4IGJpdHMgbXVzdCBiZSBpZ25vcmVkIChzYW1lIGFzIG5vZGUuanMpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoIC0gMTsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyAoYnl0ZXNbaSArIDFdICogMjU2KSlcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xuICBjb25zdCBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIGNvbnN0IG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZClcbiAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2VcbiAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG5ld0J1ZiwgQnVmZmVyLnByb3RvdHlwZSlcblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVaW50TEUgPVxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICBsZXQgdmFsID0gdGhpc1tvZmZzZXRdXG4gIGxldCBtdWwgPSAxXG4gIGxldCBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVpbnRCRSA9XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcbiAgfVxuXG4gIGxldCB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cbiAgbGV0IG11bCA9IDFcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVaW50OCA9XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVaW50MTZMRSA9XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVpbnQxNkJFID1cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVWludDMyTEUgPVxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVaW50MzJCRSA9XG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRCaWdVSW50NjRMRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnVUludDY0TEUgKG9mZnNldCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0JylcbiAgY29uc3QgZmlyc3QgPSB0aGlzW29mZnNldF1cbiAgY29uc3QgbGFzdCA9IHRoaXNbb2Zmc2V0ICsgN11cbiAgaWYgKGZpcnN0ID09PSB1bmRlZmluZWQgfHwgbGFzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYm91bmRzRXJyb3Iob2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDgpXG4gIH1cblxuICBjb25zdCBsbyA9IGZpcnN0ICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMjRcblxuICBjb25zdCBoaSA9IHRoaXNbKytvZmZzZXRdICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICtcbiAgICBsYXN0ICogMiAqKiAyNFxuXG4gIHJldHVybiBCaWdJbnQobG8pICsgKEJpZ0ludChoaSkgPDwgQmlnSW50KDMyKSlcbn0pXG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEJpZ1VJbnQ2NEJFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdVSW50NjRCRSAob2Zmc2V0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICB2YWxpZGF0ZU51bWJlcihvZmZzZXQsICdvZmZzZXQnKVxuICBjb25zdCBmaXJzdCA9IHRoaXNbb2Zmc2V0XVxuICBjb25zdCBsYXN0ID0gdGhpc1tvZmZzZXQgKyA3XVxuICBpZiAoZmlyc3QgPT09IHVuZGVmaW5lZCB8fCBsYXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICBib3VuZHNFcnJvcihvZmZzZXQsIHRoaXMubGVuZ3RoIC0gOClcbiAgfVxuXG4gIGNvbnN0IGhpID0gZmlyc3QgKiAyICoqIDI0ICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgK1xuICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICtcbiAgICB0aGlzWysrb2Zmc2V0XVxuXG4gIGNvbnN0IGxvID0gdGhpc1srK29mZnNldF0gKiAyICoqIDI0ICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgK1xuICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICtcbiAgICBsYXN0XG5cbiAgcmV0dXJuIChCaWdJbnQoaGkpIDw8IEJpZ0ludCgzMikpICsgQmlnSW50KGxvKVxufSlcblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgbGV0IHZhbCA9IHRoaXNbb2Zmc2V0XVxuICBsZXQgbXVsID0gMVxuICBsZXQgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIGxldCBpID0gYnl0ZUxlbmd0aFxuICBsZXQgbXVsID0gMVxuICBsZXQgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgY29uc3QgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIGNvbnN0IHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRCaWdJbnQ2NExFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdJbnQ2NExFIChvZmZzZXQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIHZhbGlkYXRlTnVtYmVyKG9mZnNldCwgJ29mZnNldCcpXG4gIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdXG4gIGNvbnN0IGxhc3QgPSB0aGlzW29mZnNldCArIDddXG4gIGlmIChmaXJzdCA9PT0gdW5kZWZpbmVkIHx8IGxhc3QgPT09IHVuZGVmaW5lZCkge1xuICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgdGhpcy5sZW5ndGggLSA4KVxuICB9XG5cbiAgY29uc3QgdmFsID0gdGhpc1tvZmZzZXQgKyA0XSArXG4gICAgdGhpc1tvZmZzZXQgKyA1XSAqIDIgKiogOCArXG4gICAgdGhpc1tvZmZzZXQgKyA2XSAqIDIgKiogMTYgK1xuICAgIChsYXN0IDw8IDI0KSAvLyBPdmVyZmxvd1xuXG4gIHJldHVybiAoQmlnSW50KHZhbCkgPDwgQmlnSW50KDMyKSkgK1xuICAgIEJpZ0ludChmaXJzdCArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDggK1xuICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDI0KVxufSlcblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkQmlnSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnSW50NjRCRSAob2Zmc2V0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICB2YWxpZGF0ZU51bWJlcihvZmZzZXQsICdvZmZzZXQnKVxuICBjb25zdCBmaXJzdCA9IHRoaXNbb2Zmc2V0XVxuICBjb25zdCBsYXN0ID0gdGhpc1tvZmZzZXQgKyA3XVxuICBpZiAoZmlyc3QgPT09IHVuZGVmaW5lZCB8fCBsYXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICBib3VuZHNFcnJvcihvZmZzZXQsIHRoaXMubGVuZ3RoIC0gOClcbiAgfVxuXG4gIGNvbnN0IHZhbCA9IChmaXJzdCA8PCAyNCkgKyAvLyBPdmVyZmxvd1xuICAgIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDggK1xuICAgIHRoaXNbKytvZmZzZXRdXG5cbiAgcmV0dXJuIChCaWdJbnQodmFsKSA8PCBCaWdJbnQoMzIpKSArXG4gICAgQmlnSW50KHRoaXNbKytvZmZzZXRdICogMiAqKiAyNCArXG4gICAgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICtcbiAgICB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArXG4gICAgbGFzdClcbn0pXG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpXG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVWludExFID1cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjb25zdCBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIGxldCBtdWwgPSAxXG4gIGxldCBpID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVaW50QkUgPVxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNvbnN0IG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgbGV0IGkgPSBieXRlTGVuZ3RoIC0gMVxuICBsZXQgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQ4ID1cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVWludDE2TEUgPVxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVpbnQxNkJFID1cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVaW50MzJMRSA9XG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVWludDMyQkUgPVxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gd3J0QmlnVUludDY0TEUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbWluLCBtYXgpIHtcbiAgY2hlY2tJbnRCSSh2YWx1ZSwgbWluLCBtYXgsIGJ1Ziwgb2Zmc2V0LCA3KVxuXG4gIGxldCBsbyA9IE51bWJlcih2YWx1ZSAmIEJpZ0ludCgweGZmZmZmZmZmKSlcbiAgYnVmW29mZnNldCsrXSA9IGxvXG4gIGxvID0gbG8gPj4gOFxuICBidWZbb2Zmc2V0KytdID0gbG9cbiAgbG8gPSBsbyA+PiA4XG4gIGJ1ZltvZmZzZXQrK10gPSBsb1xuICBsbyA9IGxvID4+IDhcbiAgYnVmW29mZnNldCsrXSA9IGxvXG4gIGxldCBoaSA9IE51bWJlcih2YWx1ZSA+PiBCaWdJbnQoMzIpICYgQmlnSW50KDB4ZmZmZmZmZmYpKVxuICBidWZbb2Zmc2V0KytdID0gaGlcbiAgaGkgPSBoaSA+PiA4XG4gIGJ1ZltvZmZzZXQrK10gPSBoaVxuICBoaSA9IGhpID4+IDhcbiAgYnVmW29mZnNldCsrXSA9IGhpXG4gIGhpID0gaGkgPj4gOFxuICBidWZbb2Zmc2V0KytdID0gaGlcbiAgcmV0dXJuIG9mZnNldFxufVxuXG5mdW5jdGlvbiB3cnRCaWdVSW50NjRCRSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBtaW4sIG1heCkge1xuICBjaGVja0ludEJJKHZhbHVlLCBtaW4sIG1heCwgYnVmLCBvZmZzZXQsIDcpXG5cbiAgbGV0IGxvID0gTnVtYmVyKHZhbHVlICYgQmlnSW50KDB4ZmZmZmZmZmYpKVxuICBidWZbb2Zmc2V0ICsgN10gPSBsb1xuICBsbyA9IGxvID4+IDhcbiAgYnVmW29mZnNldCArIDZdID0gbG9cbiAgbG8gPSBsbyA+PiA4XG4gIGJ1ZltvZmZzZXQgKyA1XSA9IGxvXG4gIGxvID0gbG8gPj4gOFxuICBidWZbb2Zmc2V0ICsgNF0gPSBsb1xuICBsZXQgaGkgPSBOdW1iZXIodmFsdWUgPj4gQmlnSW50KDMyKSAmIEJpZ0ludCgweGZmZmZmZmZmKSlcbiAgYnVmW29mZnNldCArIDNdID0gaGlcbiAgaGkgPSBoaSA+PiA4XG4gIGJ1ZltvZmZzZXQgKyAyXSA9IGhpXG4gIGhpID0gaGkgPj4gOFxuICBidWZbb2Zmc2V0ICsgMV0gPSBoaVxuICBoaSA9IGhpID4+IDhcbiAgYnVmW29mZnNldF0gPSBoaVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlQmlnVUludDY0TEUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gd3JpdGVCaWdVSW50NjRMRSAodmFsdWUsIG9mZnNldCA9IDApIHtcbiAgcmV0dXJuIHdydEJpZ1VJbnQ2NExFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIEJpZ0ludCgwKSwgQmlnSW50KCcweGZmZmZmZmZmZmZmZmZmZmYnKSlcbn0pXG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVCaWdVSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiB3cml0ZUJpZ1VJbnQ2NEJFICh2YWx1ZSwgb2Zmc2V0ID0gMCkge1xuICByZXR1cm4gd3J0QmlnVUludDY0QkUodGhpcywgdmFsdWUsIG9mZnNldCwgQmlnSW50KDApLCBCaWdJbnQoJzB4ZmZmZmZmZmZmZmZmZmZmZicpKVxufSlcblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjb25zdCBsaW1pdCA9IE1hdGgucG93KDIsICg4ICogYnl0ZUxlbmd0aCkgLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICBsZXQgaSA9IDBcbiAgbGV0IG11bCA9IDFcbiAgbGV0IHN1YiA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpIC0gMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjb25zdCBsaW1pdCA9IE1hdGgucG93KDIsICg4ICogYnl0ZUxlbmd0aCkgLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICBsZXQgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIGxldCBtdWwgPSAxXG4gIGxldCBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlQmlnSW50NjRMRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiB3cml0ZUJpZ0ludDY0TEUgKHZhbHVlLCBvZmZzZXQgPSAwKSB7XG4gIHJldHVybiB3cnRCaWdVSW50NjRMRSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAtQmlnSW50KCcweDgwMDAwMDAwMDAwMDAwMDAnKSwgQmlnSW50KCcweDdmZmZmZmZmZmZmZmZmZmYnKSlcbn0pXG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVCaWdJbnQ2NEJFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHdyaXRlQmlnSW50NjRCRSAodmFsdWUsIG9mZnNldCA9IDApIHtcbiAgcmV0dXJuIHdydEJpZ1VJbnQ2NEJFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIC1CaWdJbnQoJzB4ODAwMDAwMDAwMDAwMDAwMCcpLCBCaWdJbnQoJzB4N2ZmZmZmZmZmZmZmZmZmZicpKVxufSlcblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgc2hvdWxkIGJlIGEgQnVmZmVyJylcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcbiAgfVxuXG4gIGNvbnN0IGxlbiA9IGVuZCAtIHN0YXJ0XG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIFVzZSBidWlsdC1pbiB3aGVuIGF2YWlsYWJsZSwgbWlzc2luZyBmcm9tIElFMTFcbiAgICB0aGlzLmNvcHlXaXRoaW4odGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpXG4gIH0gZWxzZSB7XG4gICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoXG4gICAgICB0YXJnZXQsXG4gICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpLFxuICAgICAgdGFyZ2V0U3RhcnRcbiAgICApXG4gIH1cblxuICByZXR1cm4gbGVuXG59XG5cbi8vIFVzYWdlOlxuLy8gICAgYnVmZmVyLmZpbGwobnVtYmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKHN0cmluZ1ssIG9mZnNldFssIGVuZF1dWywgZW5jb2RpbmddKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykge1xuICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBzdGFydFxuICAgICAgc3RhcnQgPSAwXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5kXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH1cbiAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nJylcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgIH1cbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3QgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoKGVuY29kaW5nID09PSAndXRmOCcgJiYgY29kZSA8IDEyOCkgfHxcbiAgICAgICAgICBlbmNvZGluZyA9PT0gJ2xhdGluMScpIHtcbiAgICAgICAgLy8gRmFzdCBwYXRoOiBJZiBgdmFsYCBmaXRzIGludG8gYSBzaW5nbGUgYnl0ZSwgdXNlIHRoYXQgbnVtZXJpYyB2YWx1ZS5cbiAgICAgICAgdmFsID0gY29kZVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDI1NVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdib29sZWFuJykge1xuICAgIHZhbCA9IE51bWJlcih2YWwpXG4gIH1cblxuICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cbiAgaWYgKHN0YXJ0IDwgMCB8fCB0aGlzLmxlbmd0aCA8IHN0YXJ0IHx8IHRoaXMubGVuZ3RoIDwgZW5kKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAoZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXJ0ID0gc3RhcnQgPj4+IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMFxuXG4gIGlmICghdmFsKSB2YWwgPSAwXG5cbiAgbGV0IGlcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgICAgdGhpc1tpXSA9IHZhbFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCBieXRlcyA9IEJ1ZmZlci5pc0J1ZmZlcih2YWwpXG4gICAgICA/IHZhbFxuICAgICAgOiBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuICAgIGNvbnN0IGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSB2YWx1ZSBcIicgKyB2YWwgK1xuICAgICAgICAnXCIgaXMgaW52YWxpZCBmb3IgYXJndW1lbnQgXCJ2YWx1ZVwiJylcbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHtcbiAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLy8gQ1VTVE9NIEVSUk9SU1xuLy8gPT09PT09PT09PT09PVxuXG4vLyBTaW1wbGlmaWVkIHZlcnNpb25zIGZyb20gTm9kZSwgY2hhbmdlZCBmb3IgQnVmZmVyLW9ubHkgdXNhZ2VcbmNvbnN0IGVycm9ycyA9IHt9XG5mdW5jdGlvbiBFIChzeW0sIGdldE1lc3NhZ2UsIEJhc2UpIHtcbiAgZXJyb3JzW3N5bV0gPSBjbGFzcyBOb2RlRXJyb3IgZXh0ZW5kcyBCYXNlIHtcbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICBzdXBlcigpXG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbWVzc2FnZScsIHtcbiAgICAgICAgdmFsdWU6IGdldE1lc3NhZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSlcblxuICAgICAgLy8gQWRkIHRoZSBlcnJvciBjb2RlIHRvIHRoZSBuYW1lIHRvIGluY2x1ZGUgaXQgaW4gdGhlIHN0YWNrIHRyYWNlLlxuICAgICAgdGhpcy5uYW1lID0gYCR7dGhpcy5uYW1lfSBbJHtzeW19XWBcbiAgICAgIC8vIEFjY2VzcyB0aGUgc3RhY2sgdG8gZ2VuZXJhdGUgdGhlIGVycm9yIG1lc3NhZ2UgaW5jbHVkaW5nIHRoZSBlcnJvciBjb2RlXG4gICAgICAvLyBmcm9tIHRoZSBuYW1lLlxuICAgICAgdGhpcy5zdGFjayAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC1leHByZXNzaW9uc1xuICAgICAgLy8gUmVzZXQgdGhlIG5hbWUgdG8gdGhlIGFjdHVhbCBuYW1lLlxuICAgICAgZGVsZXRlIHRoaXMubmFtZVxuICAgIH1cblxuICAgIGdldCBjb2RlICgpIHtcbiAgICAgIHJldHVybiBzeW1cbiAgICB9XG5cbiAgICBzZXQgY29kZSAodmFsdWUpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnY29kZScsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdG9TdHJpbmcgKCkge1xuICAgICAgcmV0dXJuIGAke3RoaXMubmFtZX0gWyR7c3ltfV06ICR7dGhpcy5tZXNzYWdlfWBcbiAgICB9XG4gIH1cbn1cblxuRSgnRVJSX0JVRkZFUl9PVVRfT0ZfQk9VTkRTJyxcbiAgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuIGAke25hbWV9IGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kc2BcbiAgICB9XG5cbiAgICByZXR1cm4gJ0F0dGVtcHQgdG8gYWNjZXNzIG1lbW9yeSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnXG4gIH0sIFJhbmdlRXJyb3IpXG5FKCdFUlJfSU5WQUxJRF9BUkdfVFlQRScsXG4gIGZ1bmN0aW9uIChuYW1lLCBhY3R1YWwpIHtcbiAgICByZXR1cm4gYFRoZSBcIiR7bmFtZX1cIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlICR7dHlwZW9mIGFjdHVhbH1gXG4gIH0sIFR5cGVFcnJvcilcbkUoJ0VSUl9PVVRfT0ZfUkFOR0UnLFxuICBmdW5jdGlvbiAoc3RyLCByYW5nZSwgaW5wdXQpIHtcbiAgICBsZXQgbXNnID0gYFRoZSB2YWx1ZSBvZiBcIiR7c3RyfVwiIGlzIG91dCBvZiByYW5nZS5gXG4gICAgbGV0IHJlY2VpdmVkID0gaW5wdXRcbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihpbnB1dCkgJiYgTWF0aC5hYnMoaW5wdXQpID4gMiAqKiAzMikge1xuICAgICAgcmVjZWl2ZWQgPSBhZGROdW1lcmljYWxTZXBhcmF0b3IoU3RyaW5nKGlucHV0KSlcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ2JpZ2ludCcpIHtcbiAgICAgIHJlY2VpdmVkID0gU3RyaW5nKGlucHV0KVxuICAgICAgaWYgKGlucHV0ID4gQmlnSW50KDIpICoqIEJpZ0ludCgzMikgfHwgaW5wdXQgPCAtKEJpZ0ludCgyKSAqKiBCaWdJbnQoMzIpKSkge1xuICAgICAgICByZWNlaXZlZCA9IGFkZE51bWVyaWNhbFNlcGFyYXRvcihyZWNlaXZlZClcbiAgICAgIH1cbiAgICAgIHJlY2VpdmVkICs9ICduJ1xuICAgIH1cbiAgICBtc2cgKz0gYCBJdCBtdXN0IGJlICR7cmFuZ2V9LiBSZWNlaXZlZCAke3JlY2VpdmVkfWBcbiAgICByZXR1cm4gbXNnXG4gIH0sIFJhbmdlRXJyb3IpXG5cbmZ1bmN0aW9uIGFkZE51bWVyaWNhbFNlcGFyYXRvciAodmFsKSB7XG4gIGxldCByZXMgPSAnJ1xuICBsZXQgaSA9IHZhbC5sZW5ndGhcbiAgY29uc3Qgc3RhcnQgPSB2YWxbMF0gPT09ICctJyA/IDEgOiAwXG4gIGZvciAoOyBpID49IHN0YXJ0ICsgNDsgaSAtPSAzKSB7XG4gICAgcmVzID0gYF8ke3ZhbC5zbGljZShpIC0gMywgaSl9JHtyZXN9YFxuICB9XG4gIHJldHVybiBgJHt2YWwuc2xpY2UoMCwgaSl9JHtyZXN9YFxufVxuXG4vLyBDSEVDSyBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiBjaGVja0JvdW5kcyAoYnVmLCBvZmZzZXQsIGJ5dGVMZW5ndGgpIHtcbiAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAnb2Zmc2V0JylcbiAgaWYgKGJ1ZltvZmZzZXRdID09PSB1bmRlZmluZWQgfHwgYnVmW29mZnNldCArIGJ5dGVMZW5ndGhdID09PSB1bmRlZmluZWQpIHtcbiAgICBib3VuZHNFcnJvcihvZmZzZXQsIGJ1Zi5sZW5ndGggLSAoYnl0ZUxlbmd0aCArIDEpKVxuICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50QkkgKHZhbHVlLCBtaW4sIG1heCwgYnVmLCBvZmZzZXQsIGJ5dGVMZW5ndGgpIHtcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB7XG4gICAgY29uc3QgbiA9IHR5cGVvZiBtaW4gPT09ICdiaWdpbnQnID8gJ24nIDogJydcbiAgICBsZXQgcmFuZ2VcbiAgICBpZiAoYnl0ZUxlbmd0aCA+IDMpIHtcbiAgICAgIGlmIChtaW4gPT09IDAgfHwgbWluID09PSBCaWdJbnQoMCkpIHtcbiAgICAgICAgcmFuZ2UgPSBgPj0gMCR7bn0gYW5kIDwgMiR7bn0gKiogJHsoYnl0ZUxlbmd0aCArIDEpICogOH0ke259YFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmFuZ2UgPSBgPj0gLSgyJHtufSAqKiAkeyhieXRlTGVuZ3RoICsgMSkgKiA4IC0gMX0ke259KSBhbmQgPCAyICoqIGAgK1xuICAgICAgICAgICAgICAgIGAkeyhieXRlTGVuZ3RoICsgMSkgKiA4IC0gMX0ke259YFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByYW5nZSA9IGA+PSAke21pbn0ke259IGFuZCA8PSAke21heH0ke259YFxuICAgIH1cbiAgICB0aHJvdyBuZXcgZXJyb3JzLkVSUl9PVVRfT0ZfUkFOR0UoJ3ZhbHVlJywgcmFuZ2UsIHZhbHVlKVxuICB9XG4gIGNoZWNrQm91bmRzKGJ1Ziwgb2Zmc2V0LCBieXRlTGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZU51bWJlciAodmFsdWUsIG5hbWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLkVSUl9JTlZBTElEX0FSR19UWVBFKG5hbWUsICdudW1iZXInLCB2YWx1ZSlcbiAgfVxufVxuXG5mdW5jdGlvbiBib3VuZHNFcnJvciAodmFsdWUsIGxlbmd0aCwgdHlwZSkge1xuICBpZiAoTWF0aC5mbG9vcih2YWx1ZSkgIT09IHZhbHVlKSB7XG4gICAgdmFsaWRhdGVOdW1iZXIodmFsdWUsIHR5cGUpXG4gICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfT1VUX09GX1JBTkdFKHR5cGUgfHwgJ29mZnNldCcsICdhbiBpbnRlZ2VyJywgdmFsdWUpXG4gIH1cblxuICBpZiAobGVuZ3RoIDwgMCkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuRVJSX0JVRkZFUl9PVVRfT0ZfQk9VTkRTKClcbiAgfVxuXG4gIHRocm93IG5ldyBlcnJvcnMuRVJSX09VVF9PRl9SQU5HRSh0eXBlIHx8ICdvZmZzZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYD49ICR7dHlwZSA/IDEgOiAwfSBhbmQgPD0gJHtsZW5ndGh9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlKVxufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbmNvbnN0IElOVkFMSURfQkFTRTY0X1JFID0gL1teKy8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgdGFrZXMgZXF1YWwgc2lnbnMgYXMgZW5kIG9mIHRoZSBCYXNlNjQgZW5jb2RpbmdcbiAgc3RyID0gc3RyLnNwbGl0KCc9JylbMF1cbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0ci50cmltKCkucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICBsZXQgY29kZVBvaW50XG4gIGNvbnN0IGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgbGV0IGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIGNvbnN0IGJ5dGVzID0gW11cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSlcblxuICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcbiAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkge1xuICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgICAvLyBubyBsZWFkIHlldFxuICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XG4gICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgbGVhZFxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpclxuICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMFxuICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgfVxuXG4gICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnl0ZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHtcbiAgY29uc3QgYnl0ZUFycmF5ID0gW11cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICBsZXQgYywgaGksIGxvXG4gIGNvbnN0IGJ5dGVBcnJheSA9IFtdXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgbGV0IGlcbiAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuICB9XG4gIHJldHVybiBpXG59XG5cbi8vIEFycmF5QnVmZmVyIG9yIFVpbnQ4QXJyYXkgb2JqZWN0cyBmcm9tIG90aGVyIGNvbnRleHRzIChpLmUuIGlmcmFtZXMpIGRvIG5vdCBwYXNzXG4vLyB0aGUgYGluc3RhbmNlb2ZgIGNoZWNrIGJ1dCB0aGV5IHNob3VsZCBiZSB0cmVhdGVkIGFzIG9mIHRoYXQgdHlwZS5cbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzE2NlxuZnVuY3Rpb24gaXNJbnN0YW5jZSAob2JqLCB0eXBlKSB7XG4gIHJldHVybiBvYmogaW5zdGFuY2VvZiB0eXBlIHx8XG4gICAgKG9iaiAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3RvciAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3Rvci5uYW1lICE9IG51bGwgJiZcbiAgICAgIG9iai5jb25zdHJ1Y3Rvci5uYW1lID09PSB0eXBlLm5hbWUpXG59XG5mdW5jdGlvbiBudW1iZXJJc05hTiAob2JqKSB7XG4gIC8vIEZvciBJRTExIHN1cHBvcnRcbiAgcmV0dXJuIG9iaiAhPT0gb2JqIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXG59XG5cbi8vIENyZWF0ZSBsb29rdXAgdGFibGUgZm9yIGB0b1N0cmluZygnaGV4JylgXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL2lzc3Vlcy8yMTlcbmNvbnN0IGhleFNsaWNlTG9va3VwVGFibGUgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBhbHBoYWJldCA9ICcwMTIzNDU2Nzg5YWJjZGVmJ1xuICBjb25zdCB0YWJsZSA9IG5ldyBBcnJheSgyNTYpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgIGNvbnN0IGkxNiA9IGkgKiAxNlxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTY7ICsraikge1xuICAgICAgdGFibGVbaTE2ICsgal0gPSBhbHBoYWJldFtpXSArIGFscGhhYmV0W2pdXG4gICAgfVxuICB9XG4gIHJldHVybiB0YWJsZVxufSkoKVxuXG4vLyBSZXR1cm4gbm90IGZ1bmN0aW9uIHdpdGggRXJyb3IgaWYgQmlnSW50IG5vdCBzdXBwb3J0ZWRcbmZ1bmN0aW9uIGRlZmluZUJpZ0ludE1ldGhvZCAoZm4pIHtcbiAgcmV0dXJuIHR5cGVvZiBCaWdJbnQgPT09ICd1bmRlZmluZWQnID8gQnVmZmVyQmlnSW50Tm90RGVmaW5lZCA6IGZuXG59XG5cbmZ1bmN0aW9uIEJ1ZmZlckJpZ0ludE5vdERlZmluZWQgKCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0JpZ0ludCBub3Qgc3VwcG9ydGVkJylcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBfcmVxdWlyZSA9IHJlcXVpcmUoJ2J1ZmZlcicpLFxuICAgIEJ1ZmZlciA9IF9yZXF1aXJlLkJ1ZmZlcjtcblxudmFyIF9yZXF1aXJlMiA9IHJlcXVpcmUoJ3V0aWwnKSxcbiAgICBpbnNwZWN0ID0gX3JlcXVpcmUyLmluc3BlY3Q7XG5cbnZhciBjdXN0b20gPSBpbnNwZWN0ICYmIGluc3BlY3QuY3VzdG9tIHx8ICdpbnNwZWN0JztcblxuZnVuY3Rpb24gY29weUJ1ZmZlcihzcmMsIHRhcmdldCwgb2Zmc2V0KSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuY29weS5jYWxsKHNyYywgdGFyZ2V0LCBvZmZzZXQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEJ1ZmZlckxpc3QoKSB7XG4gICAgdGhpcy5oZWFkID0gbnVsbDtcbiAgICB0aGlzLnRhaWwgPSBudWxsO1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBCdWZmZXJMaXN0LnByb3RvdHlwZTtcblxuICBfcHJvdG8ucHVzaCA9IGZ1bmN0aW9uIHB1c2godikge1xuICAgIHZhciBlbnRyeSA9IHtcbiAgICAgIGRhdGE6IHYsXG4gICAgICBuZXh0OiBudWxsXG4gICAgfTtcbiAgICBpZiAodGhpcy5sZW5ndGggPiAwKSB0aGlzLnRhaWwubmV4dCA9IGVudHJ5O2Vsc2UgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgKyt0aGlzLmxlbmd0aDtcbiAgfTtcblxuICBfcHJvdG8udW5zaGlmdCA9IGZ1bmN0aW9uIHVuc2hpZnQodikge1xuICAgIHZhciBlbnRyeSA9IHtcbiAgICAgIGRhdGE6IHYsXG4gICAgICBuZXh0OiB0aGlzLmhlYWRcbiAgICB9O1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgdGhpcy50YWlsID0gZW50cnk7XG4gICAgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgKyt0aGlzLmxlbmd0aDtcbiAgfTtcblxuICBfcHJvdG8uc2hpZnQgPSBmdW5jdGlvbiBzaGlmdCgpIHtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICB2YXIgcmV0ID0gdGhpcy5oZWFkLmRhdGE7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO2Vsc2UgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5leHQ7XG4gICAgLS10aGlzLmxlbmd0aDtcbiAgICByZXR1cm4gcmV0O1xuICB9O1xuXG4gIF9wcm90by5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICB9O1xuXG4gIF9wcm90by5qb2luID0gZnVuY3Rpb24gam9pbihzKSB7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gJyc7XG4gICAgdmFyIHAgPSB0aGlzLmhlYWQ7XG4gICAgdmFyIHJldCA9ICcnICsgcC5kYXRhO1xuXG4gICAgd2hpbGUgKHAgPSBwLm5leHQpIHtcbiAgICAgIHJldCArPSBzICsgcC5kYXRhO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH07XG5cbiAgX3Byb3RvLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdChuKSB7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gQnVmZmVyLmFsbG9jKDApO1xuICAgIHZhciByZXQgPSBCdWZmZXIuYWxsb2NVbnNhZmUobiA+Pj4gMCk7XG4gICAgdmFyIHAgPSB0aGlzLmhlYWQ7XG4gICAgdmFyIGkgPSAwO1xuXG4gICAgd2hpbGUgKHApIHtcbiAgICAgIGNvcHlCdWZmZXIocC5kYXRhLCByZXQsIGkpO1xuICAgICAgaSArPSBwLmRhdGEubGVuZ3RoO1xuICAgICAgcCA9IHAubmV4dDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xuICB9IC8vIENvbnN1bWVzIGEgc3BlY2lmaWVkIGFtb3VudCBvZiBieXRlcyBvciBjaGFyYWN0ZXJzIGZyb20gdGhlIGJ1ZmZlcmVkIGRhdGEuXG4gIDtcblxuICBfcHJvdG8uY29uc3VtZSA9IGZ1bmN0aW9uIGNvbnN1bWUobiwgaGFzU3RyaW5ncykge1xuICAgIHZhciByZXQ7XG5cbiAgICBpZiAobiA8IHRoaXMuaGVhZC5kYXRhLmxlbmd0aCkge1xuICAgICAgLy8gYHNsaWNlYCBpcyB0aGUgc2FtZSBmb3IgYnVmZmVycyBhbmQgc3RyaW5ncy5cbiAgICAgIHJldCA9IHRoaXMuaGVhZC5kYXRhLnNsaWNlKDAsIG4pO1xuICAgICAgdGhpcy5oZWFkLmRhdGEgPSB0aGlzLmhlYWQuZGF0YS5zbGljZShuKTtcbiAgICB9IGVsc2UgaWYgKG4gPT09IHRoaXMuaGVhZC5kYXRhLmxlbmd0aCkge1xuICAgICAgLy8gRmlyc3QgY2h1bmsgaXMgYSBwZXJmZWN0IG1hdGNoLlxuICAgICAgcmV0ID0gdGhpcy5zaGlmdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZXN1bHQgc3BhbnMgbW9yZSB0aGFuIG9uZSBidWZmZXIuXG4gICAgICByZXQgPSBoYXNTdHJpbmdzID8gdGhpcy5fZ2V0U3RyaW5nKG4pIDogdGhpcy5fZ2V0QnVmZmVyKG4pO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH07XG5cbiAgX3Byb3RvLmZpcnN0ID0gZnVuY3Rpb24gZmlyc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZC5kYXRhO1xuICB9IC8vIENvbnN1bWVzIGEgc3BlY2lmaWVkIGFtb3VudCBvZiBjaGFyYWN0ZXJzIGZyb20gdGhlIGJ1ZmZlcmVkIGRhdGEuXG4gIDtcblxuICBfcHJvdG8uX2dldFN0cmluZyA9IGZ1bmN0aW9uIF9nZXRTdHJpbmcobikge1xuICAgIHZhciBwID0gdGhpcy5oZWFkO1xuICAgIHZhciBjID0gMTtcbiAgICB2YXIgcmV0ID0gcC5kYXRhO1xuICAgIG4gLT0gcmV0Lmxlbmd0aDtcblxuICAgIHdoaWxlIChwID0gcC5uZXh0KSB7XG4gICAgICB2YXIgc3RyID0gcC5kYXRhO1xuICAgICAgdmFyIG5iID0gbiA+IHN0ci5sZW5ndGggPyBzdHIubGVuZ3RoIDogbjtcbiAgICAgIGlmIChuYiA9PT0gc3RyLmxlbmd0aCkgcmV0ICs9IHN0cjtlbHNlIHJldCArPSBzdHIuc2xpY2UoMCwgbik7XG4gICAgICBuIC09IG5iO1xuXG4gICAgICBpZiAobiA9PT0gMCkge1xuICAgICAgICBpZiAobmIgPT09IHN0ci5sZW5ndGgpIHtcbiAgICAgICAgICArK2M7XG4gICAgICAgICAgaWYgKHAubmV4dCkgdGhpcy5oZWFkID0gcC5uZXh0O2Vsc2UgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmhlYWQgPSBwO1xuICAgICAgICAgIHAuZGF0YSA9IHN0ci5zbGljZShuYik7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgKytjO1xuICAgIH1cblxuICAgIHRoaXMubGVuZ3RoIC09IGM7XG4gICAgcmV0dXJuIHJldDtcbiAgfSAvLyBDb25zdW1lcyBhIHNwZWNpZmllZCBhbW91bnQgb2YgYnl0ZXMgZnJvbSB0aGUgYnVmZmVyZWQgZGF0YS5cbiAgO1xuXG4gIF9wcm90by5fZ2V0QnVmZmVyID0gZnVuY3Rpb24gX2dldEJ1ZmZlcihuKSB7XG4gICAgdmFyIHJldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuKTtcbiAgICB2YXIgcCA9IHRoaXMuaGVhZDtcbiAgICB2YXIgYyA9IDE7XG4gICAgcC5kYXRhLmNvcHkocmV0KTtcbiAgICBuIC09IHAuZGF0YS5sZW5ndGg7XG5cbiAgICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgICAgdmFyIGJ1ZiA9IHAuZGF0YTtcbiAgICAgIHZhciBuYiA9IG4gPiBidWYubGVuZ3RoID8gYnVmLmxlbmd0aCA6IG47XG4gICAgICBidWYuY29weShyZXQsIHJldC5sZW5ndGggLSBuLCAwLCBuYik7XG4gICAgICBuIC09IG5iO1xuXG4gICAgICBpZiAobiA9PT0gMCkge1xuICAgICAgICBpZiAobmIgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICAgICAgICArK2M7XG4gICAgICAgICAgaWYgKHAubmV4dCkgdGhpcy5oZWFkID0gcC5uZXh0O2Vsc2UgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmhlYWQgPSBwO1xuICAgICAgICAgIHAuZGF0YSA9IGJ1Zi5zbGljZShuYik7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgKytjO1xuICAgIH1cblxuICAgIHRoaXMubGVuZ3RoIC09IGM7XG4gICAgcmV0dXJuIHJldDtcbiAgfSAvLyBNYWtlIHN1cmUgdGhlIGxpbmtlZCBsaXN0IG9ubHkgc2hvd3MgdGhlIG1pbmltYWwgbmVjZXNzYXJ5IGluZm9ybWF0aW9uLlxuICA7XG5cbiAgX3Byb3RvW2N1c3RvbV0gPSBmdW5jdGlvbiAoXywgb3B0aW9ucykge1xuICAgIHJldHVybiBpbnNwZWN0KHRoaXMsIF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHtcbiAgICAgIC8vIE9ubHkgaW5zcGVjdCBvbmUgbGV2ZWwuXG4gICAgICBkZXB0aDogMCxcbiAgICAgIC8vIEl0IHNob3VsZCBub3QgcmVjdXJzZS5cbiAgICAgIGN1c3RvbUluc3BlY3Q6IGZhbHNlXG4gICAgfSkpO1xuICB9O1xuXG4gIHJldHVybiBCdWZmZXJMaXN0O1xufSgpOyIsIid1c2Ugc3RyaWN0JzsgLy8gdW5kb2N1bWVudGVkIGNiKCkgQVBJLCBuZWVkZWQgZm9yIGNvcmUsIG5vdCBmb3IgcHVibGljIEFQSVxuXG5mdW5jdGlvbiBkZXN0cm95KGVyciwgY2IpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgcmVhZGFibGVEZXN0cm95ZWQgPSB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB2YXIgd3JpdGFibGVEZXN0cm95ZWQgPSB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuXG4gIGlmIChyZWFkYWJsZURlc3Ryb3llZCB8fCB3cml0YWJsZURlc3Ryb3llZCkge1xuICAgIGlmIChjYikge1xuICAgICAgY2IoZXJyKTtcbiAgICB9IGVsc2UgaWYgKGVycikge1xuICAgICAgaWYgKCF0aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdEVycm9yTlQsIHRoaXMsIGVycik7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCkge1xuICAgICAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdEVycm9yTlQsIHRoaXMsIGVycik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0gLy8gd2Ugc2V0IGRlc3Ryb3llZCB0byB0cnVlIGJlZm9yZSBmaXJpbmcgZXJyb3IgY2FsbGJhY2tzIGluIG9yZGVyXG4gIC8vIHRvIG1ha2UgaXQgcmUtZW50cmFuY2Ugc2FmZSBpbiBjYXNlIGRlc3Ryb3koKSBpcyBjYWxsZWQgd2l0aGluIGNhbGxiYWNrc1xuXG5cbiAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7XG4gIH0gLy8gaWYgdGhpcyBpcyBhIGR1cGxleCBzdHJlYW0gbWFyayB0aGUgd3JpdGFibGUgcGFydCBhcyBkZXN0cm95ZWQgYXMgd2VsbFxuXG5cbiAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7XG4gIH1cblxuICB0aGlzLl9kZXN0cm95KGVyciB8fCBudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKCFjYiAmJiBlcnIpIHtcbiAgICAgIGlmICghX3RoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0RXJyb3JBbmRDbG9zZU5ULCBfdGhpcywgZXJyKTtcbiAgICAgIH0gZWxzZSBpZiAoIV90aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCkge1xuICAgICAgICBfdGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRFcnJvckFuZENsb3NlTlQsIF90aGlzLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2VOVCwgX3RoaXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY2IpIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlTlQsIF90aGlzKTtcbiAgICAgIGNiKGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlTlQsIF90aGlzKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBlbWl0RXJyb3JBbmRDbG9zZU5UKHNlbGYsIGVycikge1xuICBlbWl0RXJyb3JOVChzZWxmLCBlcnIpO1xuICBlbWl0Q2xvc2VOVChzZWxmKTtcbn1cblxuZnVuY3Rpb24gZW1pdENsb3NlTlQoc2VsZikge1xuICBpZiAoc2VsZi5fd3JpdGFibGVTdGF0ZSAmJiAhc2VsZi5fd3JpdGFibGVTdGF0ZS5lbWl0Q2xvc2UpIHJldHVybjtcbiAgaWYgKHNlbGYuX3JlYWRhYmxlU3RhdGUgJiYgIXNlbGYuX3JlYWRhYmxlU3RhdGUuZW1pdENsb3NlKSByZXR1cm47XG4gIHNlbGYuZW1pdCgnY2xvc2UnKTtcbn1cblxuZnVuY3Rpb24gdW5kZXN0cm95KCkge1xuICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSkge1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kRW1pdHRlZCA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQgPSBmYWxzZTtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZmluYWxDYWxsZWQgPSBmYWxzZTtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLnByZWZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdEVycm9yTlQoc2VsZiwgZXJyKSB7XG4gIHNlbGYuZW1pdCgnZXJyb3InLCBlcnIpO1xufVxuXG5mdW5jdGlvbiBlcnJvck9yRGVzdHJveShzdHJlYW0sIGVycikge1xuICAvLyBXZSBoYXZlIHRlc3RzIHRoYXQgcmVseSBvbiBlcnJvcnMgYmVpbmcgZW1pdHRlZFxuICAvLyBpbiB0aGUgc2FtZSB0aWNrLCBzbyBjaGFuZ2luZyB0aGlzIGlzIHNlbXZlciBtYWpvci5cbiAgLy8gRm9yIG5vdyB3aGVuIHlvdSBvcHQtaW4gdG8gYXV0b0Rlc3Ryb3kgd2UgYWxsb3dcbiAgLy8gdGhlIGVycm9yIHRvIGJlIGVtaXR0ZWQgbmV4dFRpY2suIEluIGEgZnV0dXJlXG4gIC8vIHNlbXZlciBtYWpvciB1cGRhdGUgd2Ugc2hvdWxkIGNoYW5nZSB0aGUgZGVmYXVsdCB0byB0aGlzLlxuICB2YXIgclN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgd1N0YXRlID0gc3RyZWFtLl93cml0YWJsZVN0YXRlO1xuICBpZiAoclN0YXRlICYmIHJTdGF0ZS5hdXRvRGVzdHJveSB8fCB3U3RhdGUgJiYgd1N0YXRlLmF1dG9EZXN0cm95KSBzdHJlYW0uZGVzdHJveShlcnIpO2Vsc2Ugc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXJyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gIHVuZGVzdHJveTogdW5kZXN0cm95LFxuICBlcnJvck9yRGVzdHJveTogZXJyb3JPckRlc3Ryb3lcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIGNvZGVzID0ge307XG5cbmZ1bmN0aW9uIGNyZWF0ZUVycm9yVHlwZShjb2RlLCBtZXNzYWdlLCBCYXNlKSB7XG4gIGlmICghQmFzZSkge1xuICAgIEJhc2UgPSBFcnJvcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE1lc3NhZ2UoYXJnMSwgYXJnMiwgYXJnMykge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbWVzc2FnZShhcmcxLCBhcmcyLCBhcmczKTtcbiAgICB9XG4gIH1cblxuICB2YXIgTm9kZUVycm9yID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX0Jhc2UpIHtcbiAgICBfaW5oZXJpdHNMb29zZShOb2RlRXJyb3IsIF9CYXNlKTtcblxuICAgIGZ1bmN0aW9uIE5vZGVFcnJvcihhcmcxLCBhcmcyLCBhcmczKSB7XG4gICAgICByZXR1cm4gX0Jhc2UuY2FsbCh0aGlzLCBnZXRNZXNzYWdlKGFyZzEsIGFyZzIsIGFyZzMpKSB8fCB0aGlzO1xuICAgIH1cblxuICAgIHJldHVybiBOb2RlRXJyb3I7XG4gIH0oQmFzZSk7XG5cbiAgTm9kZUVycm9yLnByb3RvdHlwZS5uYW1lID0gQmFzZS5uYW1lO1xuICBOb2RlRXJyb3IucHJvdG90eXBlLmNvZGUgPSBjb2RlO1xuICBjb2Rlc1tjb2RlXSA9IE5vZGVFcnJvcjtcbn0gLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2Jsb2IvdjEwLjguMC9saWIvaW50ZXJuYWwvZXJyb3JzLmpzXG5cblxuZnVuY3Rpb24gb25lT2YoZXhwZWN0ZWQsIHRoaW5nKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGV4cGVjdGVkKSkge1xuICAgIHZhciBsZW4gPSBleHBlY3RlZC5sZW5ndGg7XG4gICAgZXhwZWN0ZWQgPSBleHBlY3RlZC5tYXAoZnVuY3Rpb24gKGkpIHtcbiAgICAgIHJldHVybiBTdHJpbmcoaSk7XG4gICAgfSk7XG5cbiAgICBpZiAobGVuID4gMikge1xuICAgICAgcmV0dXJuIFwib25lIG9mIFwiLmNvbmNhdCh0aGluZywgXCIgXCIpLmNvbmNhdChleHBlY3RlZC5zbGljZSgwLCBsZW4gLSAxKS5qb2luKCcsICcpLCBcIiwgb3IgXCIpICsgZXhwZWN0ZWRbbGVuIC0gMV07XG4gICAgfSBlbHNlIGlmIChsZW4gPT09IDIpIHtcbiAgICAgIHJldHVybiBcIm9uZSBvZiBcIi5jb25jYXQodGhpbmcsIFwiIFwiKS5jb25jYXQoZXhwZWN0ZWRbMF0sIFwiIG9yIFwiKS5jb25jYXQoZXhwZWN0ZWRbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJvZiBcIi5jb25jYXQodGhpbmcsIFwiIFwiKS5jb25jYXQoZXhwZWN0ZWRbMF0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gXCJvZiBcIi5jb25jYXQodGhpbmcsIFwiIFwiKS5jb25jYXQoU3RyaW5nKGV4cGVjdGVkKSk7XG4gIH1cbn0gLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL3N0YXJ0c1dpdGhcblxuXG5mdW5jdGlvbiBzdGFydHNXaXRoKHN0ciwgc2VhcmNoLCBwb3MpIHtcbiAgcmV0dXJuIHN0ci5zdWJzdHIoIXBvcyB8fCBwb3MgPCAwID8gMCA6ICtwb3MsIHNlYXJjaC5sZW5ndGgpID09PSBzZWFyY2g7XG59IC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1N0cmluZy9lbmRzV2l0aFxuXG5cbmZ1bmN0aW9uIGVuZHNXaXRoKHN0ciwgc2VhcmNoLCB0aGlzX2xlbikge1xuICBpZiAodGhpc19sZW4gPT09IHVuZGVmaW5lZCB8fCB0aGlzX2xlbiA+IHN0ci5sZW5ndGgpIHtcbiAgICB0aGlzX2xlbiA9IHN0ci5sZW5ndGg7XG4gIH1cblxuICByZXR1cm4gc3RyLnN1YnN0cmluZyh0aGlzX2xlbiAtIHNlYXJjaC5sZW5ndGgsIHRoaXNfbGVuKSA9PT0gc2VhcmNoO1xufSAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvaW5jbHVkZXNcblxuXG5mdW5jdGlvbiBpbmNsdWRlcyhzdHIsIHNlYXJjaCwgc3RhcnQpIHtcbiAgaWYgKHR5cGVvZiBzdGFydCAhPT0gJ251bWJlcicpIHtcbiAgICBzdGFydCA9IDA7XG4gIH1cblxuICBpZiAoc3RhcnQgKyBzZWFyY2gubGVuZ3RoID4gc3RyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyLmluZGV4T2Yoc2VhcmNoLCBzdGFydCkgIT09IC0xO1xuICB9XG59XG5cbmNyZWF0ZUVycm9yVHlwZSgnRVJSX0lOVkFMSURfT1BUX1ZBTFVFJywgZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiAnVGhlIHZhbHVlIFwiJyArIHZhbHVlICsgJ1wiIGlzIGludmFsaWQgZm9yIG9wdGlvbiBcIicgKyBuYW1lICsgJ1wiJztcbn0sIFR5cGVFcnJvcik7XG5jcmVhdGVFcnJvclR5cGUoJ0VSUl9JTlZBTElEX0FSR19UWVBFJywgZnVuY3Rpb24gKG5hbWUsIGV4cGVjdGVkLCBhY3R1YWwpIHtcbiAgLy8gZGV0ZXJtaW5lcjogJ211c3QgYmUnIG9yICdtdXN0IG5vdCBiZSdcbiAgdmFyIGRldGVybWluZXI7XG5cbiAgaWYgKHR5cGVvZiBleHBlY3RlZCA9PT0gJ3N0cmluZycgJiYgc3RhcnRzV2l0aChleHBlY3RlZCwgJ25vdCAnKSkge1xuICAgIGRldGVybWluZXIgPSAnbXVzdCBub3QgYmUnO1xuICAgIGV4cGVjdGVkID0gZXhwZWN0ZWQucmVwbGFjZSgvXm5vdCAvLCAnJyk7XG4gIH0gZWxzZSB7XG4gICAgZGV0ZXJtaW5lciA9ICdtdXN0IGJlJztcbiAgfVxuXG4gIHZhciBtc2c7XG5cbiAgaWYgKGVuZHNXaXRoKG5hbWUsICcgYXJndW1lbnQnKSkge1xuICAgIC8vIEZvciBjYXNlcyBsaWtlICdmaXJzdCBhcmd1bWVudCdcbiAgICBtc2cgPSBcIlRoZSBcIi5jb25jYXQobmFtZSwgXCIgXCIpLmNvbmNhdChkZXRlcm1pbmVyLCBcIiBcIikuY29uY2F0KG9uZU9mKGV4cGVjdGVkLCAndHlwZScpKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdHlwZSA9IGluY2x1ZGVzKG5hbWUsICcuJykgPyAncHJvcGVydHknIDogJ2FyZ3VtZW50JztcbiAgICBtc2cgPSBcIlRoZSBcXFwiXCIuY29uY2F0KG5hbWUsIFwiXFxcIiBcIikuY29uY2F0KHR5cGUsIFwiIFwiKS5jb25jYXQoZGV0ZXJtaW5lciwgXCIgXCIpLmNvbmNhdChvbmVPZihleHBlY3RlZCwgJ3R5cGUnKSk7XG4gIH1cblxuICBtc2cgKz0gXCIuIFJlY2VpdmVkIHR5cGUgXCIuY29uY2F0KHR5cGVvZiBhY3R1YWwpO1xuICByZXR1cm4gbXNnO1xufSwgVHlwZUVycm9yKTtcbmNyZWF0ZUVycm9yVHlwZSgnRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRicsICdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpO1xuY3JlYXRlRXJyb3JUeXBlKCdFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCcsIGZ1bmN0aW9uIChuYW1lKSB7XG4gIHJldHVybiAnVGhlICcgKyBuYW1lICsgJyBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkJztcbn0pO1xuY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRScsICdQcmVtYXR1cmUgY2xvc2UnKTtcbmNyZWF0ZUVycm9yVHlwZSgnRVJSX1NUUkVBTV9ERVNUUk9ZRUQnLCBmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gJ0Nhbm5vdCBjYWxsICcgKyBuYW1lICsgJyBhZnRlciBhIHN0cmVhbSB3YXMgZGVzdHJveWVkJztcbn0pO1xuY3JlYXRlRXJyb3JUeXBlKCdFUlJfTVVMVElQTEVfQ0FMTEJBQ0snLCAnQ2FsbGJhY2sgY2FsbGVkIG11bHRpcGxlIHRpbWVzJyk7XG5jcmVhdGVFcnJvclR5cGUoJ0VSUl9TVFJFQU1fQ0FOTk9UX1BJUEUnLCAnQ2Fubm90IHBpcGUsIG5vdCByZWFkYWJsZScpO1xuY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORCcsICd3cml0ZSBhZnRlciBlbmQnKTtcbmNyZWF0ZUVycm9yVHlwZSgnRVJSX1NUUkVBTV9OVUxMX1ZBTFVFUycsICdNYXkgbm90IHdyaXRlIG51bGwgdmFsdWVzIHRvIHN0cmVhbScsIFR5cGVFcnJvcik7XG5jcmVhdGVFcnJvclR5cGUoJ0VSUl9VTktOT1dOX0VOQ09ESU5HJywgZnVuY3Rpb24gKGFyZykge1xuICByZXR1cm4gJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBhcmc7XG59LCBUeXBlRXJyb3IpO1xuY3JlYXRlRXJyb3JUeXBlKCdFUlJfU1RSRUFNX1VOU0hJRlRfQUZURVJfRU5EX0VWRU5UJywgJ3N0cmVhbS51bnNoaWZ0KCkgYWZ0ZXIgZW5kIGV2ZW50Jyk7XG5tb2R1bGUuZXhwb3J0cy5jb2RlcyA9IGNvZGVzO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgRVJSX0lOVkFMSURfT1BUX1ZBTFVFID0gcmVxdWlyZSgnLi4vLi4vLi4vZXJyb3JzJykuY29kZXMuRVJSX0lOVkFMSURfT1BUX1ZBTFVFO1xuXG5mdW5jdGlvbiBoaWdoV2F0ZXJNYXJrRnJvbShvcHRpb25zLCBpc0R1cGxleCwgZHVwbGV4S2V5KSB7XG4gIHJldHVybiBvcHRpb25zLmhpZ2hXYXRlck1hcmsgIT0gbnVsbCA/IG9wdGlvbnMuaGlnaFdhdGVyTWFyayA6IGlzRHVwbGV4ID8gb3B0aW9uc1tkdXBsZXhLZXldIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0SGlnaFdhdGVyTWFyayhzdGF0ZSwgb3B0aW9ucywgZHVwbGV4S2V5LCBpc0R1cGxleCkge1xuICB2YXIgaHdtID0gaGlnaFdhdGVyTWFya0Zyb20ob3B0aW9ucywgaXNEdXBsZXgsIGR1cGxleEtleSk7XG5cbiAgaWYgKGh3bSAhPSBudWxsKSB7XG4gICAgaWYgKCEoaXNGaW5pdGUoaHdtKSAmJiBNYXRoLmZsb29yKGh3bSkgPT09IGh3bSkgfHwgaHdtIDwgMCkge1xuICAgICAgdmFyIG5hbWUgPSBpc0R1cGxleCA/IGR1cGxleEtleSA6ICdoaWdoV2F0ZXJNYXJrJztcbiAgICAgIHRocm93IG5ldyBFUlJfSU5WQUxJRF9PUFRfVkFMVUUobmFtZSwgaHdtKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTWF0aC5mbG9vcihod20pO1xuICB9IC8vIERlZmF1bHQgdmFsdWVcblxuXG4gIHJldHVybiBzdGF0ZS5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRIaWdoV2F0ZXJNYXJrOiBnZXRIaWdoV2F0ZXJNYXJrXG59OyIsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm9kZS9uby1kZXByZWNhdGVkLWFwaSAqL1xudmFyIGJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpXG52YXIgQnVmZmVyID0gYnVmZmVyLkJ1ZmZlclxuXG4vLyBhbHRlcm5hdGl2ZSB0byB1c2luZyBPYmplY3Qua2V5cyBmb3Igb2xkIGJyb3dzZXJzXG5mdW5jdGlvbiBjb3B5UHJvcHMgKHNyYywgZHN0KSB7XG4gIGZvciAodmFyIGtleSBpbiBzcmMpIHtcbiAgICBkc3Rba2V5XSA9IHNyY1trZXldXG4gIH1cbn1cbmlmIChCdWZmZXIuZnJvbSAmJiBCdWZmZXIuYWxsb2MgJiYgQnVmZmVyLmFsbG9jVW5zYWZlICYmIEJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBidWZmZXJcbn0gZWxzZSB7XG4gIC8vIENvcHkgcHJvcGVydGllcyBmcm9tIHJlcXVpcmUoJ2J1ZmZlcicpXG4gIGNvcHlQcm9wcyhidWZmZXIsIGV4cG9ydHMpXG4gIGV4cG9ydHMuQnVmZmVyID0gU2FmZUJ1ZmZlclxufVxuXG5mdW5jdGlvbiBTYWZlQnVmZmVyIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG4vLyBDb3B5IHN0YXRpYyBtZXRob2RzIGZyb20gQnVmZmVyXG5jb3B5UHJvcHMoQnVmZmVyLCBTYWZlQnVmZmVyKVxuXG5TYWZlQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHJldHVybiBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cblNhZmVCdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHZhciBidWYgPSBCdWZmZXIoc2l6ZSlcbiAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSB7XG4gICAgICBidWYuZmlsbChmaWxsLCBlbmNvZGluZylcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmLmZpbGwoZmlsbClcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYnVmLmZpbGwoMClcbiAgfVxuICByZXR1cm4gYnVmXG59XG5cblNhZmVCdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlcihzaXplKVxufVxuXG5TYWZlQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfVxuICByZXR1cm4gYnVmZmVyLlNsb3dCdWZmZXIoc2l6ZSlcbn1cbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbi8qPHJlcGxhY2VtZW50PiovXG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgaXNFbmNvZGluZyA9IEJ1ZmZlci5pc0VuY29kaW5nIHx8IGZ1bmN0aW9uIChlbmNvZGluZykge1xuICBlbmNvZGluZyA9ICcnICsgZW5jb2Rpbmc7XG4gIHN3aXRjaCAoZW5jb2RpbmcgJiYgZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6Y2FzZSAndXRmOCc6Y2FzZSAndXRmLTgnOmNhc2UgJ2FzY2lpJzpjYXNlICdiaW5hcnknOmNhc2UgJ2Jhc2U2NCc6Y2FzZSAndWNzMic6Y2FzZSAndWNzLTInOmNhc2UgJ3V0ZjE2bGUnOmNhc2UgJ3V0Zi0xNmxlJzpjYXNlICdyYXcnOlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuZnVuY3Rpb24gX25vcm1hbGl6ZUVuY29kaW5nKGVuYykge1xuICBpZiAoIWVuYykgcmV0dXJuICd1dGY4JztcbiAgdmFyIHJldHJpZWQ7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmMpIHtcbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gJ3V0ZjgnO1xuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuICd1dGYxNmxlJztcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gJ2xhdGluMSc7XG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGVuYztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChyZXRyaWVkKSByZXR1cm47IC8vIHVuZGVmaW5lZFxuICAgICAgICBlbmMgPSAoJycgKyBlbmMpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHJpZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufTtcblxuLy8gRG8gbm90IGNhY2hlIGBCdWZmZXIuaXNFbmNvZGluZ2Agd2hlbiBjaGVja2luZyBlbmNvZGluZyBuYW1lcyBhcyBzb21lXG4vLyBtb2R1bGVzIG1vbmtleS1wYXRjaCBpdCB0byBzdXBwb3J0IGFkZGl0aW9uYWwgZW5jb2RpbmdzXG5mdW5jdGlvbiBub3JtYWxpemVFbmNvZGluZyhlbmMpIHtcbiAgdmFyIG5lbmMgPSBfbm9ybWFsaXplRW5jb2RpbmcoZW5jKTtcbiAgaWYgKHR5cGVvZiBuZW5jICE9PSAnc3RyaW5nJyAmJiAoQnVmZmVyLmlzRW5jb2RpbmcgPT09IGlzRW5jb2RpbmcgfHwgIWlzRW5jb2RpbmcoZW5jKSkpIHRocm93IG5ldyBFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuYyk7XG4gIHJldHVybiBuZW5jIHx8IGVuYztcbn1cblxuLy8gU3RyaW5nRGVjb2RlciBwcm92aWRlcyBhbiBpbnRlcmZhY2UgZm9yIGVmZmljaWVudGx5IHNwbGl0dGluZyBhIHNlcmllcyBvZlxuLy8gYnVmZmVycyBpbnRvIGEgc2VyaWVzIG9mIEpTIHN0cmluZ3Mgd2l0aG91dCBicmVha2luZyBhcGFydCBtdWx0aS1ieXRlXG4vLyBjaGFyYWN0ZXJzLlxuZXhwb3J0cy5TdHJpbmdEZWNvZGVyID0gU3RyaW5nRGVjb2RlcjtcbmZ1bmN0aW9uIFN0cmluZ0RlY29kZXIoZW5jb2RpbmcpIHtcbiAgdGhpcy5lbmNvZGluZyA9IG5vcm1hbGl6ZUVuY29kaW5nKGVuY29kaW5nKTtcbiAgdmFyIG5iO1xuICBzd2l0Y2ggKHRoaXMuZW5jb2RpbmcpIHtcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIHRoaXMudGV4dCA9IHV0ZjE2VGV4dDtcbiAgICAgIHRoaXMuZW5kID0gdXRmMTZFbmQ7XG4gICAgICBuYiA9IDQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlICd1dGY4JzpcbiAgICAgIHRoaXMuZmlsbExhc3QgPSB1dGY4RmlsbExhc3Q7XG4gICAgICBuYiA9IDQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgdGhpcy50ZXh0ID0gYmFzZTY0VGV4dDtcbiAgICAgIHRoaXMuZW5kID0gYmFzZTY0RW5kO1xuICAgICAgbmIgPSAzO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRoaXMud3JpdGUgPSBzaW1wbGVXcml0ZTtcbiAgICAgIHRoaXMuZW5kID0gc2ltcGxlRW5kO1xuICAgICAgcmV0dXJuO1xuICB9XG4gIHRoaXMubGFzdE5lZWQgPSAwO1xuICB0aGlzLmxhc3RUb3RhbCA9IDA7XG4gIHRoaXMubGFzdENoYXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobmIpO1xufVxuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChidWYpIHtcbiAgaWYgKGJ1Zi5sZW5ndGggPT09IDApIHJldHVybiAnJztcbiAgdmFyIHI7XG4gIHZhciBpO1xuICBpZiAodGhpcy5sYXN0TmVlZCkge1xuICAgIHIgPSB0aGlzLmZpbGxMYXN0KGJ1Zik7XG4gICAgaWYgKHIgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnO1xuICAgIGkgPSB0aGlzLmxhc3ROZWVkO1xuICAgIHRoaXMubGFzdE5lZWQgPSAwO1xuICB9IGVsc2Uge1xuICAgIGkgPSAwO1xuICB9XG4gIGlmIChpIDwgYnVmLmxlbmd0aCkgcmV0dXJuIHIgPyByICsgdGhpcy50ZXh0KGJ1ZiwgaSkgOiB0aGlzLnRleHQoYnVmLCBpKTtcbiAgcmV0dXJuIHIgfHwgJyc7XG59O1xuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQgPSB1dGY4RW5kO1xuXG4vLyBSZXR1cm5zIG9ubHkgY29tcGxldGUgY2hhcmFjdGVycyBpbiBhIEJ1ZmZlclxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUudGV4dCA9IHV0ZjhUZXh0O1xuXG4vLyBBdHRlbXB0cyB0byBjb21wbGV0ZSBhIHBhcnRpYWwgbm9uLVVURi04IGNoYXJhY3RlciB1c2luZyBieXRlcyBmcm9tIGEgQnVmZmVyXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5maWxsTGFzdCA9IGZ1bmN0aW9uIChidWYpIHtcbiAgaWYgKHRoaXMubGFzdE5lZWQgPD0gYnVmLmxlbmd0aCkge1xuICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgdGhpcy5sYXN0TmVlZCk7XG4gICAgcmV0dXJuIHRoaXMubGFzdENoYXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywgMCwgdGhpcy5sYXN0VG90YWwpO1xuICB9XG4gIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgYnVmLmxlbmd0aCk7XG4gIHRoaXMubGFzdE5lZWQgLT0gYnVmLmxlbmd0aDtcbn07XG5cbi8vIENoZWNrcyB0aGUgdHlwZSBvZiBhIFVURi04IGJ5dGUsIHdoZXRoZXIgaXQncyBBU0NJSSwgYSBsZWFkaW5nIGJ5dGUsIG9yIGFcbi8vIGNvbnRpbnVhdGlvbiBieXRlLiBJZiBhbiBpbnZhbGlkIGJ5dGUgaXMgZGV0ZWN0ZWQsIC0yIGlzIHJldHVybmVkLlxuZnVuY3Rpb24gdXRmOENoZWNrQnl0ZShieXRlKSB7XG4gIGlmIChieXRlIDw9IDB4N0YpIHJldHVybiAwO2Vsc2UgaWYgKGJ5dGUgPj4gNSA9PT0gMHgwNikgcmV0dXJuIDI7ZWxzZSBpZiAoYnl0ZSA+PiA0ID09PSAweDBFKSByZXR1cm4gMztlbHNlIGlmIChieXRlID4+IDMgPT09IDB4MUUpIHJldHVybiA0O1xuICByZXR1cm4gYnl0ZSA+PiA2ID09PSAweDAyID8gLTEgOiAtMjtcbn1cblxuLy8gQ2hlY2tzIGF0IG1vc3QgMyBieXRlcyBhdCB0aGUgZW5kIG9mIGEgQnVmZmVyIGluIG9yZGVyIHRvIGRldGVjdCBhblxuLy8gaW5jb21wbGV0ZSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3Rlci4gVGhlIHRvdGFsIG51bWJlciBvZiBieXRlcyAoMiwgMywgb3IgNClcbi8vIG5lZWRlZCB0byBjb21wbGV0ZSB0aGUgVVRGLTggY2hhcmFjdGVyIChpZiBhcHBsaWNhYmxlKSBhcmUgcmV0dXJuZWQuXG5mdW5jdGlvbiB1dGY4Q2hlY2tJbmNvbXBsZXRlKHNlbGYsIGJ1ZiwgaSkge1xuICB2YXIgaiA9IGJ1Zi5sZW5ndGggLSAxO1xuICBpZiAoaiA8IGkpIHJldHVybiAwO1xuICB2YXIgbmIgPSB1dGY4Q2hlY2tCeXRlKGJ1ZltqXSk7XG4gIGlmIChuYiA+PSAwKSB7XG4gICAgaWYgKG5iID4gMCkgc2VsZi5sYXN0TmVlZCA9IG5iIC0gMTtcbiAgICByZXR1cm4gbmI7XG4gIH1cbiAgaWYgKC0taiA8IGkgfHwgbmIgPT09IC0yKSByZXR1cm4gMDtcbiAgbmIgPSB1dGY4Q2hlY2tCeXRlKGJ1ZltqXSk7XG4gIGlmIChuYiA+PSAwKSB7XG4gICAgaWYgKG5iID4gMCkgc2VsZi5sYXN0TmVlZCA9IG5iIC0gMjtcbiAgICByZXR1cm4gbmI7XG4gIH1cbiAgaWYgKC0taiA8IGkgfHwgbmIgPT09IC0yKSByZXR1cm4gMDtcbiAgbmIgPSB1dGY4Q2hlY2tCeXRlKGJ1ZltqXSk7XG4gIGlmIChuYiA+PSAwKSB7XG4gICAgaWYgKG5iID4gMCkge1xuICAgICAgaWYgKG5iID09PSAyKSBuYiA9IDA7ZWxzZSBzZWxmLmxhc3ROZWVkID0gbmIgLSAzO1xuICAgIH1cbiAgICByZXR1cm4gbmI7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5cbi8vIFZhbGlkYXRlcyBhcyBtYW55IGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3RlciBhc1xuLy8gbmVlZGVkIG9yIGFyZSBhdmFpbGFibGUuIElmIHdlIHNlZSBhIG5vbi1jb250aW51YXRpb24gYnl0ZSB3aGVyZSB3ZSBleHBlY3Rcbi8vIG9uZSwgd2UgXCJyZXBsYWNlXCIgdGhlIHZhbGlkYXRlZCBjb250aW51YXRpb24gYnl0ZXMgd2UndmUgc2VlbiBzbyBmYXIgd2l0aFxuLy8gYSBzaW5nbGUgVVRGLTggcmVwbGFjZW1lbnQgY2hhcmFjdGVyICgnXFx1ZmZmZCcpLCB0byBtYXRjaCB2OCdzIFVURi04IGRlY29kaW5nXG4vLyBiZWhhdmlvci4gVGhlIGNvbnRpbnVhdGlvbiBieXRlIGNoZWNrIGlzIGluY2x1ZGVkIHRocmVlIHRpbWVzIGluIHRoZSBjYXNlXG4vLyB3aGVyZSBhbGwgb2YgdGhlIGNvbnRpbnVhdGlvbiBieXRlcyBmb3IgYSBjaGFyYWN0ZXIgZXhpc3QgaW4gdGhlIHNhbWUgYnVmZmVyLlxuLy8gSXQgaXMgYWxzbyBkb25lIHRoaXMgd2F5IGFzIGEgc2xpZ2h0IHBlcmZvcm1hbmNlIGluY3JlYXNlIGluc3RlYWQgb2YgdXNpbmcgYVxuLy8gbG9vcC5cbmZ1bmN0aW9uIHV0ZjhDaGVja0V4dHJhQnl0ZXMoc2VsZiwgYnVmLCBwKSB7XG4gIGlmICgoYnVmWzBdICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICBzZWxmLmxhc3ROZWVkID0gMDtcbiAgICByZXR1cm4gJ1xcdWZmZmQnO1xuICB9XG4gIGlmIChzZWxmLmxhc3ROZWVkID4gMSAmJiBidWYubGVuZ3RoID4gMSkge1xuICAgIGlmICgoYnVmWzFdICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgIHNlbGYubGFzdE5lZWQgPSAxO1xuICAgICAgcmV0dXJuICdcXHVmZmZkJztcbiAgICB9XG4gICAgaWYgKHNlbGYubGFzdE5lZWQgPiAyICYmIGJ1Zi5sZW5ndGggPiAyKSB7XG4gICAgICBpZiAoKGJ1ZlsyXSAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgIHNlbGYubGFzdE5lZWQgPSAyO1xuICAgICAgICByZXR1cm4gJ1xcdWZmZmQnO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBBdHRlbXB0cyB0byBjb21wbGV0ZSBhIG11bHRpLWJ5dGUgVVRGLTggY2hhcmFjdGVyIHVzaW5nIGJ5dGVzIGZyb20gYSBCdWZmZXIuXG5mdW5jdGlvbiB1dGY4RmlsbExhc3QoYnVmKSB7XG4gIHZhciBwID0gdGhpcy5sYXN0VG90YWwgLSB0aGlzLmxhc3ROZWVkO1xuICB2YXIgciA9IHV0ZjhDaGVja0V4dHJhQnl0ZXModGhpcywgYnVmLCBwKTtcbiAgaWYgKHIgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHI7XG4gIGlmICh0aGlzLmxhc3ROZWVkIDw9IGJ1Zi5sZW5ndGgpIHtcbiAgICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCBwLCAwLCB0aGlzLmxhc3ROZWVkKTtcbiAgICByZXR1cm4gdGhpcy5sYXN0Q2hhci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCB0aGlzLmxhc3RUb3RhbCk7XG4gIH1cbiAgYnVmLmNvcHkodGhpcy5sYXN0Q2hhciwgcCwgMCwgYnVmLmxlbmd0aCk7XG4gIHRoaXMubGFzdE5lZWQgLT0gYnVmLmxlbmd0aDtcbn1cblxuLy8gUmV0dXJucyBhbGwgY29tcGxldGUgVVRGLTggY2hhcmFjdGVycyBpbiBhIEJ1ZmZlci4gSWYgdGhlIEJ1ZmZlciBlbmRlZCBvbiBhXG4vLyBwYXJ0aWFsIGNoYXJhY3RlciwgdGhlIGNoYXJhY3RlcidzIGJ5dGVzIGFyZSBidWZmZXJlZCB1bnRpbCB0aGUgcmVxdWlyZWRcbi8vIG51bWJlciBvZiBieXRlcyBhcmUgYXZhaWxhYmxlLlxuZnVuY3Rpb24gdXRmOFRleHQoYnVmLCBpKSB7XG4gIHZhciB0b3RhbCA9IHV0ZjhDaGVja0luY29tcGxldGUodGhpcywgYnVmLCBpKTtcbiAgaWYgKCF0aGlzLmxhc3ROZWVkKSByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGY4JywgaSk7XG4gIHRoaXMubGFzdFRvdGFsID0gdG90YWw7XG4gIHZhciBlbmQgPSBidWYubGVuZ3RoIC0gKHRvdGFsIC0gdGhpcy5sYXN0TmVlZCk7XG4gIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIDAsIGVuZCk7XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ3V0ZjgnLCBpLCBlbmQpO1xufVxuXG4vLyBGb3IgVVRGLTgsIGEgcmVwbGFjZW1lbnQgY2hhcmFjdGVyIGlzIGFkZGVkIHdoZW4gZW5kaW5nIG9uIGEgcGFydGlhbFxuLy8gY2hhcmFjdGVyLlxuZnVuY3Rpb24gdXRmOEVuZChidWYpIHtcbiAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xuICBpZiAodGhpcy5sYXN0TmVlZCkgcmV0dXJuIHIgKyAnXFx1ZmZmZCc7XG4gIHJldHVybiByO1xufVxuXG4vLyBVVEYtMTZMRSB0eXBpY2FsbHkgbmVlZHMgdHdvIGJ5dGVzIHBlciBjaGFyYWN0ZXIsIGJ1dCBldmVuIGlmIHdlIGhhdmUgYW4gZXZlblxuLy8gbnVtYmVyIG9mIGJ5dGVzIGF2YWlsYWJsZSwgd2UgbmVlZCB0byBjaGVjayBpZiB3ZSBlbmQgb24gYSBsZWFkaW5nL2hpZ2hcbi8vIHN1cnJvZ2F0ZS4gSW4gdGhhdCBjYXNlLCB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBuZXh0IHR3byBieXRlcyBpbiBvcmRlciB0b1xuLy8gZGVjb2RlIHRoZSBsYXN0IGNoYXJhY3RlciBwcm9wZXJseS5cbmZ1bmN0aW9uIHV0ZjE2VGV4dChidWYsIGkpIHtcbiAgaWYgKChidWYubGVuZ3RoIC0gaSkgJSAyID09PSAwKSB7XG4gICAgdmFyIHIgPSBidWYudG9TdHJpbmcoJ3V0ZjE2bGUnLCBpKTtcbiAgICBpZiAocikge1xuICAgICAgdmFyIGMgPSByLmNoYXJDb2RlQXQoci5sZW5ndGggLSAxKTtcbiAgICAgIGlmIChjID49IDB4RDgwMCAmJiBjIDw9IDB4REJGRikge1xuICAgICAgICB0aGlzLmxhc3ROZWVkID0gMjtcbiAgICAgICAgdGhpcy5sYXN0VG90YWwgPSA0O1xuICAgICAgICB0aGlzLmxhc3RDaGFyWzBdID0gYnVmW2J1Zi5sZW5ndGggLSAyXTtcbiAgICAgICAgdGhpcy5sYXN0Q2hhclsxXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiByLnNsaWNlKDAsIC0xKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH1cbiAgdGhpcy5sYXN0TmVlZCA9IDE7XG4gIHRoaXMubGFzdFRvdGFsID0gMjtcbiAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ3V0ZjE2bGUnLCBpLCBidWYubGVuZ3RoIC0gMSk7XG59XG5cbi8vIEZvciBVVEYtMTZMRSB3ZSBkbyBub3QgZXhwbGljaXRseSBhcHBlbmQgc3BlY2lhbCByZXBsYWNlbWVudCBjaGFyYWN0ZXJzIGlmIHdlXG4vLyBlbmQgb24gYSBwYXJ0aWFsIGNoYXJhY3Rlciwgd2Ugc2ltcGx5IGxldCB2OCBoYW5kbGUgdGhhdC5cbmZ1bmN0aW9uIHV0ZjE2RW5kKGJ1Zikge1xuICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7XG4gIGlmICh0aGlzLmxhc3ROZWVkKSB7XG4gICAgdmFyIGVuZCA9IHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZDtcbiAgICByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoJ3V0ZjE2bGUnLCAwLCBlbmQpO1xuICB9XG4gIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiBiYXNlNjRUZXh0KGJ1ZiwgaSkge1xuICB2YXIgbiA9IChidWYubGVuZ3RoIC0gaSkgJSAzO1xuICBpZiAobiA9PT0gMCkgcmV0dXJuIGJ1Zi50b1N0cmluZygnYmFzZTY0JywgaSk7XG4gIHRoaXMubGFzdE5lZWQgPSAzIC0gbjtcbiAgdGhpcy5sYXN0VG90YWwgPSAzO1xuICBpZiAobiA9PT0gMSkge1xuICAgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDJdO1xuICAgIHRoaXMubGFzdENoYXJbMV0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBidWYudG9TdHJpbmcoJ2Jhc2U2NCcsIGksIGJ1Zi5sZW5ndGggLSBuKTtcbn1cblxuZnVuY3Rpb24gYmFzZTY0RW5kKGJ1Zikge1xuICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7XG4gIGlmICh0aGlzLmxhc3ROZWVkKSByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoJ2Jhc2U2NCcsIDAsIDMgLSB0aGlzLmxhc3ROZWVkKTtcbiAgcmV0dXJuIHI7XG59XG5cbi8vIFBhc3MgYnl0ZXMgb24gdGhyb3VnaCBmb3Igc2luZ2xlLWJ5dGUgZW5jb2RpbmdzIChlLmcuIGFzY2lpLCBsYXRpbjEsIGhleClcbmZ1bmN0aW9uIHNpbXBsZVdyaXRlKGJ1Zikge1xuICByZXR1cm4gYnVmLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO1xufVxuXG5mdW5jdGlvbiBzaW1wbGVFbmQoYnVmKSB7XG4gIHJldHVybiBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xufSIsIi8vIFBvcnRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9tYWZpbnRvc2gvZW5kLW9mLXN0cmVhbSB3aXRoXG4vLyBwZXJtaXNzaW9uIGZyb20gdGhlIGF1dGhvciwgTWF0aGlhcyBCdXVzIChAbWFmaW50b3NoKS5cbid1c2Ugc3RyaWN0JztcblxudmFyIEVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFID0gcmVxdWlyZSgnLi4vLi4vLi4vZXJyb3JzJykuY29kZXMuRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0U7XG5cbmZ1bmN0aW9uIG9uY2UoY2FsbGJhY2spIHtcbiAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYWxsZWQpIHJldHVybjtcbiAgICBjYWxsZWQgPSB0cnVlO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gaXNSZXF1ZXN0KHN0cmVhbSkge1xuICByZXR1cm4gc3RyZWFtLnNldEhlYWRlciAmJiB0eXBlb2Ygc3RyZWFtLmFib3J0ID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBlb3Moc3RyZWFtLCBvcHRzLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbicpIHJldHVybiBlb3Moc3RyZWFtLCBudWxsLCBvcHRzKTtcbiAgaWYgKCFvcHRzKSBvcHRzID0ge307XG4gIGNhbGxiYWNrID0gb25jZShjYWxsYmFjayB8fCBub29wKTtcbiAgdmFyIHJlYWRhYmxlID0gb3B0cy5yZWFkYWJsZSB8fCBvcHRzLnJlYWRhYmxlICE9PSBmYWxzZSAmJiBzdHJlYW0ucmVhZGFibGU7XG4gIHZhciB3cml0YWJsZSA9IG9wdHMud3JpdGFibGUgfHwgb3B0cy53cml0YWJsZSAhPT0gZmFsc2UgJiYgc3RyZWFtLndyaXRhYmxlO1xuXG4gIHZhciBvbmxlZ2FjeWZpbmlzaCA9IGZ1bmN0aW9uIG9ubGVnYWN5ZmluaXNoKCkge1xuICAgIGlmICghc3RyZWFtLndyaXRhYmxlKSBvbmZpbmlzaCgpO1xuICB9O1xuXG4gIHZhciB3cml0YWJsZUVuZGVkID0gc3RyZWFtLl93cml0YWJsZVN0YXRlICYmIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZDtcblxuICB2YXIgb25maW5pc2ggPSBmdW5jdGlvbiBvbmZpbmlzaCgpIHtcbiAgICB3cml0YWJsZSA9IGZhbHNlO1xuICAgIHdyaXRhYmxlRW5kZWQgPSB0cnVlO1xuICAgIGlmICghcmVhZGFibGUpIGNhbGxiYWNrLmNhbGwoc3RyZWFtKTtcbiAgfTtcblxuICB2YXIgcmVhZGFibGVFbmRlZCA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZSAmJiBzdHJlYW0uX3JlYWRhYmxlU3RhdGUuZW5kRW1pdHRlZDtcblxuICB2YXIgb25lbmQgPSBmdW5jdGlvbiBvbmVuZCgpIHtcbiAgICByZWFkYWJsZSA9IGZhbHNlO1xuICAgIHJlYWRhYmxlRW5kZWQgPSB0cnVlO1xuICAgIGlmICghd3JpdGFibGUpIGNhbGxiYWNrLmNhbGwoc3RyZWFtKTtcbiAgfTtcblxuICB2YXIgb25lcnJvciA9IGZ1bmN0aW9uIG9uZXJyb3IoZXJyKSB7XG4gICAgY2FsbGJhY2suY2FsbChzdHJlYW0sIGVycik7XG4gIH07XG5cbiAgdmFyIG9uY2xvc2UgPSBmdW5jdGlvbiBvbmNsb3NlKCkge1xuICAgIHZhciBlcnI7XG5cbiAgICBpZiAocmVhZGFibGUgJiYgIXJlYWRhYmxlRW5kZWQpIHtcbiAgICAgIGlmICghc3RyZWFtLl9yZWFkYWJsZVN0YXRlIHx8ICFzdHJlYW0uX3JlYWRhYmxlU3RhdGUuZW5kZWQpIGVyciA9IG5ldyBFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRSgpO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwoc3RyZWFtLCBlcnIpO1xuICAgIH1cblxuICAgIGlmICh3cml0YWJsZSAmJiAhd3JpdGFibGVFbmRlZCkge1xuICAgICAgaWYgKCFzdHJlYW0uX3dyaXRhYmxlU3RhdGUgfHwgIXN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lbmRlZCkgZXJyID0gbmV3IEVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFKCk7XG4gICAgICByZXR1cm4gY2FsbGJhY2suY2FsbChzdHJlYW0sIGVycik7XG4gICAgfVxuICB9O1xuXG4gIHZhciBvbnJlcXVlc3QgPSBmdW5jdGlvbiBvbnJlcXVlc3QoKSB7XG4gICAgc3RyZWFtLnJlcS5vbignZmluaXNoJywgb25maW5pc2gpO1xuICB9O1xuXG4gIGlmIChpc1JlcXVlc3Qoc3RyZWFtKSkge1xuICAgIHN0cmVhbS5vbignY29tcGxldGUnLCBvbmZpbmlzaCk7XG4gICAgc3RyZWFtLm9uKCdhYm9ydCcsIG9uY2xvc2UpO1xuICAgIGlmIChzdHJlYW0ucmVxKSBvbnJlcXVlc3QoKTtlbHNlIHN0cmVhbS5vbigncmVxdWVzdCcsIG9ucmVxdWVzdCk7XG4gIH0gZWxzZSBpZiAod3JpdGFibGUgJiYgIXN0cmVhbS5fd3JpdGFibGVTdGF0ZSkge1xuICAgIC8vIGxlZ2FjeSBzdHJlYW1zXG4gICAgc3RyZWFtLm9uKCdlbmQnLCBvbmxlZ2FjeWZpbmlzaCk7XG4gICAgc3RyZWFtLm9uKCdjbG9zZScsIG9ubGVnYWN5ZmluaXNoKTtcbiAgfVxuXG4gIHN0cmVhbS5vbignZW5kJywgb25lbmQpO1xuICBzdHJlYW0ub24oJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgaWYgKG9wdHMuZXJyb3IgIT09IGZhbHNlKSBzdHJlYW0ub24oJ2Vycm9yJywgb25lcnJvcik7XG4gIHN0cmVhbS5vbignY2xvc2UnLCBvbmNsb3NlKTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2NvbXBsZXRlJywgb25maW5pc2gpO1xuICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignYWJvcnQnLCBvbmNsb3NlKTtcbiAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ3JlcXVlc3QnLCBvbnJlcXVlc3QpO1xuICAgIGlmIChzdHJlYW0ucmVxKSBzdHJlYW0ucmVxLnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG4gICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmxlZ2FjeWZpbmlzaCk7XG4gICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9ubGVnYWN5ZmluaXNoKTtcbiAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTtcbiAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVvczsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfT2JqZWN0JHNldFByb3RvdHlwZU87XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBmaW5pc2hlZCA9IHJlcXVpcmUoJy4vZW5kLW9mLXN0cmVhbScpO1xuXG52YXIga0xhc3RSZXNvbHZlID0gU3ltYm9sKCdsYXN0UmVzb2x2ZScpO1xudmFyIGtMYXN0UmVqZWN0ID0gU3ltYm9sKCdsYXN0UmVqZWN0Jyk7XG52YXIga0Vycm9yID0gU3ltYm9sKCdlcnJvcicpO1xudmFyIGtFbmRlZCA9IFN5bWJvbCgnZW5kZWQnKTtcbnZhciBrTGFzdFByb21pc2UgPSBTeW1ib2woJ2xhc3RQcm9taXNlJyk7XG52YXIga0hhbmRsZVByb21pc2UgPSBTeW1ib2woJ2hhbmRsZVByb21pc2UnKTtcbnZhciBrU3RyZWFtID0gU3ltYm9sKCdzdHJlYW0nKTtcblxuZnVuY3Rpb24gY3JlYXRlSXRlclJlc3VsdCh2YWx1ZSwgZG9uZSkge1xuICByZXR1cm4ge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBkb25lOiBkb25lXG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlYWRBbmRSZXNvbHZlKGl0ZXIpIHtcbiAgdmFyIHJlc29sdmUgPSBpdGVyW2tMYXN0UmVzb2x2ZV07XG5cbiAgaWYgKHJlc29sdmUgIT09IG51bGwpIHtcbiAgICB2YXIgZGF0YSA9IGl0ZXJba1N0cmVhbV0ucmVhZCgpOyAvLyB3ZSBkZWZlciBpZiBkYXRhIGlzIG51bGxcbiAgICAvLyB3ZSBjYW4gYmUgZXhwZWN0aW5nIGVpdGhlciAnZW5kJyBvclxuICAgIC8vICdlcnJvcidcblxuICAgIGlmIChkYXRhICE9PSBudWxsKSB7XG4gICAgICBpdGVyW2tMYXN0UHJvbWlzZV0gPSBudWxsO1xuICAgICAgaXRlcltrTGFzdFJlc29sdmVdID0gbnVsbDtcbiAgICAgIGl0ZXJba0xhc3RSZWplY3RdID0gbnVsbDtcbiAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdChkYXRhLCBmYWxzZSkpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBvblJlYWRhYmxlKGl0ZXIpIHtcbiAgLy8gd2Ugd2FpdCBmb3IgdGhlIG5leHQgdGljaywgYmVjYXVzZSBpdCBtaWdodFxuICAvLyBlbWl0IGFuIGVycm9yIHdpdGggcHJvY2Vzcy5uZXh0VGlja1xuICBwcm9jZXNzLm5leHRUaWNrKHJlYWRBbmRSZXNvbHZlLCBpdGVyKTtcbn1cblxuZnVuY3Rpb24gd3JhcEZvck5leHQobGFzdFByb21pc2UsIGl0ZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBsYXN0UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpdGVyW2tFbmRlZF0pIHtcbiAgICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGl0ZXJba0hhbmRsZVByb21pc2VdKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfSwgcmVqZWN0KTtcbiAgfTtcbn1cblxudmFyIEFzeW5jSXRlcmF0b3JQcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZnVuY3Rpb24gKCkge30pO1xudmFyIFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvclByb3RvdHlwZSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZigoX09iamVjdCRzZXRQcm90b3R5cGVPID0ge1xuICBnZXQgc3RyZWFtKCkge1xuICAgIHJldHVybiB0aGlzW2tTdHJlYW1dO1xuICB9LFxuXG4gIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIC8vIGlmIHdlIGhhdmUgZGV0ZWN0ZWQgYW4gZXJyb3IgaW4gdGhlIG1lYW53aGlsZVxuICAgIC8vIHJlamVjdCBzdHJhaWdodCBhd2F5XG4gICAgdmFyIGVycm9yID0gdGhpc1trRXJyb3JdO1xuXG4gICAgaWYgKGVycm9yICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cblxuICAgIGlmICh0aGlzW2tFbmRlZF0pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY3JlYXRlSXRlclJlc3VsdCh1bmRlZmluZWQsIHRydWUpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpc1trU3RyZWFtXS5kZXN0cm95ZWQpIHtcbiAgICAgIC8vIFdlIG5lZWQgdG8gZGVmZXIgdmlhIG5leHRUaWNrIGJlY2F1c2UgaWYgLmRlc3Ryb3koZXJyKSBpc1xuICAgICAgLy8gY2FsbGVkLCB0aGUgZXJyb3Igd2lsbCBiZSBlbWl0dGVkIHZpYSBuZXh0VGljaywgYW5kXG4gICAgICAvLyB3ZSBjYW5ub3QgZ3VhcmFudGVlIHRoYXQgdGhlcmUgaXMgbm8gZXJyb3IgbGluZ2VyaW5nIGFyb3VuZFxuICAgICAgLy8gd2FpdGluZyB0byBiZSBlbWl0dGVkLlxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKF90aGlzW2tFcnJvcl0pIHtcbiAgICAgICAgICAgIHJlamVjdChfdGhpc1trRXJyb3JdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IC8vIGlmIHdlIGhhdmUgbXVsdGlwbGUgbmV4dCgpIGNhbGxzXG4gICAgLy8gd2Ugd2lsbCB3YWl0IGZvciB0aGUgcHJldmlvdXMgUHJvbWlzZSB0byBmaW5pc2hcbiAgICAvLyB0aGlzIGxvZ2ljIGlzIG9wdGltaXplZCB0byBzdXBwb3J0IGZvciBhd2FpdCBsb29wcyxcbiAgICAvLyB3aGVyZSBuZXh0KCkgaXMgb25seSBjYWxsZWQgb25jZSBhdCBhIHRpbWVcblxuXG4gICAgdmFyIGxhc3RQcm9taXNlID0gdGhpc1trTGFzdFByb21pc2VdO1xuICAgIHZhciBwcm9taXNlO1xuXG4gICAgaWYgKGxhc3RQcm9taXNlKSB7XG4gICAgICBwcm9taXNlID0gbmV3IFByb21pc2Uod3JhcEZvck5leHQobGFzdFByb21pc2UsIHRoaXMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZmFzdCBwYXRoIG5lZWRlZCB0byBzdXBwb3J0IG11bHRpcGxlIHRoaXMucHVzaCgpXG4gICAgICAvLyB3aXRob3V0IHRyaWdnZXJpbmcgdGhlIG5leHQoKSBxdWV1ZVxuICAgICAgdmFyIGRhdGEgPSB0aGlzW2tTdHJlYW1dLnJlYWQoKTtcblxuICAgICAgaWYgKGRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KGRhdGEsIGZhbHNlKSk7XG4gICAgICB9XG5cbiAgICAgIHByb21pc2UgPSBuZXcgUHJvbWlzZSh0aGlzW2tIYW5kbGVQcm9taXNlXSk7XG4gICAgfVxuXG4gICAgdGhpc1trTGFzdFByb21pc2VdID0gcHJvbWlzZTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxufSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3Qkc2V0UHJvdG90eXBlTywgU3ltYm9sLmFzeW5jSXRlcmF0b3IsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXM7XG59KSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3Qkc2V0UHJvdG90eXBlTywgXCJyZXR1cm5cIiwgZnVuY3Rpb24gX3JldHVybigpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgLy8gZGVzdHJveShlcnIsIGNiKSBpcyBhIHByaXZhdGUgQVBJXG4gIC8vIHdlIGNhbiBndWFyYW50ZWUgd2UgaGF2ZSB0aGF0IGhlcmUsIGJlY2F1c2Ugd2UgY29udHJvbCB0aGVcbiAgLy8gUmVhZGFibGUgY2xhc3MgdGhpcyBpcyBhdHRhY2hlZCB0b1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIF90aGlzMltrU3RyZWFtXS5kZXN0cm95KG51bGwsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpO1xuICAgIH0pO1xuICB9KTtcbn0pLCBfT2JqZWN0JHNldFByb3RvdHlwZU8pLCBBc3luY0l0ZXJhdG9yUHJvdG90eXBlKTtcblxudmFyIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvciA9IGZ1bmN0aW9uIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcihzdHJlYW0pIHtcbiAgdmFyIF9PYmplY3QkY3JlYXRlO1xuXG4gIHZhciBpdGVyYXRvciA9IE9iamVjdC5jcmVhdGUoUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yUHJvdG90eXBlLCAoX09iamVjdCRjcmVhdGUgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBrU3RyZWFtLCB7XG4gICAgdmFsdWU6IHN0cmVhbSxcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9KSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBrTGFzdFJlc29sdmUsIHtcbiAgICB2YWx1ZTogbnVsbCxcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9KSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBrTGFzdFJlamVjdCwge1xuICAgIHZhbHVlOiBudWxsLFxuICAgIHdyaXRhYmxlOiB0cnVlXG4gIH0pLCBfZGVmaW5lUHJvcGVydHkoX09iamVjdCRjcmVhdGUsIGtFcnJvciwge1xuICAgIHZhbHVlOiBudWxsLFxuICAgIHdyaXRhYmxlOiB0cnVlXG4gIH0pLCBfZGVmaW5lUHJvcGVydHkoX09iamVjdCRjcmVhdGUsIGtFbmRlZCwge1xuICAgIHZhbHVlOiBzdHJlYW0uX3JlYWRhYmxlU3RhdGUuZW5kRW1pdHRlZCxcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9KSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBrSGFuZGxlUHJvbWlzZSwge1xuICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBkYXRhID0gaXRlcmF0b3Jba1N0cmVhbV0ucmVhZCgpO1xuXG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICBpdGVyYXRvcltrTGFzdFByb21pc2VdID0gbnVsbDtcbiAgICAgICAgaXRlcmF0b3Jba0xhc3RSZXNvbHZlXSA9IG51bGw7XG4gICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IG51bGw7XG4gICAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdChkYXRhLCBmYWxzZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlcmF0b3Jba0xhc3RSZXNvbHZlXSA9IHJlc29sdmU7XG4gICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IHJlamVjdDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHdyaXRhYmxlOiB0cnVlXG4gIH0pLCBfT2JqZWN0JGNyZWF0ZSkpO1xuICBpdGVyYXRvcltrTGFzdFByb21pc2VdID0gbnVsbDtcbiAgZmluaXNoZWQoc3RyZWFtLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKGVyciAmJiBlcnIuY29kZSAhPT0gJ0VSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFJykge1xuICAgICAgdmFyIHJlamVjdCA9IGl0ZXJhdG9yW2tMYXN0UmVqZWN0XTsgLy8gcmVqZWN0IGlmIHdlIGFyZSB3YWl0aW5nIGZvciBkYXRhIGluIHRoZSBQcm9taXNlXG4gICAgICAvLyByZXR1cm5lZCBieSBuZXh0KCkgYW5kIHN0b3JlIHRoZSBlcnJvclxuXG4gICAgICBpZiAocmVqZWN0ICE9PSBudWxsKSB7XG4gICAgICAgIGl0ZXJhdG9yW2tMYXN0UHJvbWlzZV0gPSBudWxsO1xuICAgICAgICBpdGVyYXRvcltrTGFzdFJlc29sdmVdID0gbnVsbDtcbiAgICAgICAgaXRlcmF0b3Jba0xhc3RSZWplY3RdID0gbnVsbDtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9XG5cbiAgICAgIGl0ZXJhdG9yW2tFcnJvcl0gPSBlcnI7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHJlc29sdmUgPSBpdGVyYXRvcltrTGFzdFJlc29sdmVdO1xuXG4gICAgaWYgKHJlc29sdmUgIT09IG51bGwpIHtcbiAgICAgIGl0ZXJhdG9yW2tMYXN0UHJvbWlzZV0gPSBudWxsO1xuICAgICAgaXRlcmF0b3Jba0xhc3RSZXNvbHZlXSA9IG51bGw7XG4gICAgICBpdGVyYXRvcltrTGFzdFJlamVjdF0gPSBudWxsO1xuICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHVuZGVmaW5lZCwgdHJ1ZSkpO1xuICAgIH1cblxuICAgIGl0ZXJhdG9yW2tFbmRlZF0gPSB0cnVlO1xuICB9KTtcbiAgc3RyZWFtLm9uKCdyZWFkYWJsZScsIG9uUmVhZGFibGUuYmluZChudWxsLCBpdGVyYXRvcikpO1xuICByZXR1cm4gaXRlcmF0b3I7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcjsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdSZWFkYWJsZS5mcm9tIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGJyb3dzZXInKVxufTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlO1xuLyo8cmVwbGFjZW1lbnQ+Ki9cblxudmFyIER1cGxleDtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5SZWFkYWJsZS5SZWFkYWJsZVN0YXRlID0gUmVhZGFibGVTdGF0ZTtcbi8qPHJlcGxhY2VtZW50PiovXG5cbnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcblxudmFyIEVFbGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uIEVFbGlzdGVuZXJDb3VudChlbWl0dGVyLCB0eXBlKSB7XG4gIHJldHVybiBlbWl0dGVyLmxpc3RlbmVycyh0eXBlKS5sZW5ndGg7XG59O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG5cblxudmFyIFN0cmVhbSA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0nKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7XG5cbnZhciBPdXJVaW50OEFycmF5ID0gZ2xvYmFsLlVpbnQ4QXJyYXkgfHwgZnVuY3Rpb24gKCkge307XG5cbmZ1bmN0aW9uIF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspIHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGNodW5rKTtcbn1cblxuZnVuY3Rpb24gX2lzVWludDhBcnJheShvYmopIHtcbiAgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXk7XG59XG4vKjxyZXBsYWNlbWVudD4qL1xuXG5cbnZhciBkZWJ1Z1V0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbnZhciBkZWJ1ZztcblxuaWYgKGRlYnVnVXRpbCAmJiBkZWJ1Z1V0aWwuZGVidWdsb2cpIHtcbiAgZGVidWcgPSBkZWJ1Z1V0aWwuZGVidWdsb2coJ3N0cmVhbScpO1xufSBlbHNlIHtcbiAgZGVidWcgPSBmdW5jdGlvbiBkZWJ1ZygpIHt9O1xufVxuLyo8L3JlcGxhY2VtZW50PiovXG5cblxudmFyIEJ1ZmZlckxpc3QgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvYnVmZmVyX2xpc3QnKTtcblxudmFyIGRlc3Ryb3lJbXBsID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3knKTtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL3N0YXRlJyksXG4gICAgZ2V0SGlnaFdhdGVyTWFyayA9IF9yZXF1aXJlLmdldEhpZ2hXYXRlck1hcms7XG5cbnZhciBfcmVxdWlyZSRjb2RlcyA9IHJlcXVpcmUoJy4uL2Vycm9ycycpLmNvZGVzLFxuICAgIEVSUl9JTlZBTElEX0FSR19UWVBFID0gX3JlcXVpcmUkY29kZXMuRVJSX0lOVkFMSURfQVJHX1RZUEUsXG4gICAgRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRiA9IF9yZXF1aXJlJGNvZGVzLkVSUl9TVFJFQU1fUFVTSF9BRlRFUl9FT0YsXG4gICAgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCxcbiAgICBFUlJfU1RSRUFNX1VOU0hJRlRfQUZURVJfRU5EX0VWRU5UID0gX3JlcXVpcmUkY29kZXMuRVJSX1NUUkVBTV9VTlNISUZUX0FGVEVSX0VORF9FVkVOVDsgLy8gTGF6eSBsb2FkZWQgdG8gaW1wcm92ZSB0aGUgc3RhcnR1cCBwZXJmb3JtYW5jZS5cblxuXG52YXIgU3RyaW5nRGVjb2RlcjtcbnZhciBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3I7XG52YXIgZnJvbTtcblxucmVxdWlyZSgnaW5oZXJpdHMnKShSZWFkYWJsZSwgU3RyZWFtKTtcblxudmFyIGVycm9yT3JEZXN0cm95ID0gZGVzdHJveUltcGwuZXJyb3JPckRlc3Ryb3k7XG52YXIga1Byb3h5RXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddO1xuXG5mdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIoZW1pdHRlciwgZXZlbnQsIGZuKSB7XG4gIC8vIFNhZGx5IHRoaXMgaXMgbm90IGNhY2hlYWJsZSBhcyBzb21lIGxpYnJhcmllcyBidW5kbGUgdGhlaXIgb3duXG4gIC8vIGV2ZW50IGVtaXR0ZXIgaW1wbGVtZW50YXRpb24gd2l0aCB0aGVtLlxuICBpZiAodHlwZW9mIGVtaXR0ZXIucHJlcGVuZExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSByZXR1cm4gZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIoZXZlbnQsIGZuKTsgLy8gVGhpcyBpcyBhIGhhY2sgdG8gbWFrZSBzdXJlIHRoYXQgb3VyIGVycm9yIGhhbmRsZXIgaXMgYXR0YWNoZWQgYmVmb3JlIGFueVxuICAvLyB1c2VybGFuZCBvbmVzLiAgTkVWRVIgRE8gVEhJUy4gVGhpcyBpcyBoZXJlIG9ubHkgYmVjYXVzZSB0aGlzIGNvZGUgbmVlZHNcbiAgLy8gdG8gY29udGludWUgdG8gd29yayB3aXRoIG9sZGVyIHZlcnNpb25zIG9mIE5vZGUuanMgdGhhdCBkbyBub3QgaW5jbHVkZVxuICAvLyB0aGUgcHJlcGVuZExpc3RlbmVyKCkgbWV0aG9kLiBUaGUgZ29hbCBpcyB0byBldmVudHVhbGx5IHJlbW92ZSB0aGlzIGhhY2suXG5cbiAgaWYgKCFlbWl0dGVyLl9ldmVudHMgfHwgIWVtaXR0ZXIuX2V2ZW50c1tldmVudF0pIGVtaXR0ZXIub24oZXZlbnQsIGZuKTtlbHNlIGlmIChBcnJheS5pc0FycmF5KGVtaXR0ZXIuX2V2ZW50c1tldmVudF0pKSBlbWl0dGVyLl9ldmVudHNbZXZlbnRdLnVuc2hpZnQoZm4pO2Vsc2UgZW1pdHRlci5fZXZlbnRzW2V2ZW50XSA9IFtmbiwgZW1pdHRlci5fZXZlbnRzW2V2ZW50XV07XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtLCBpc0R1cGxleCkge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRHVwbGV4IHN0cmVhbXMgYXJlIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLCBidXQgc2hhcmVcbiAgLy8gdGhlIHNhbWUgb3B0aW9ucyBvYmplY3QuXG4gIC8vIEhvd2V2ZXIsIHNvbWUgY2FzZXMgcmVxdWlyZSBzZXR0aW5nIG9wdGlvbnMgdG8gZGlmZmVyZW50XG4gIC8vIHZhbHVlcyBmb3IgdGhlIHJlYWRhYmxlIGFuZCB0aGUgd3JpdGFibGUgc2lkZXMgb2YgdGhlIGR1cGxleCBzdHJlYW0uXG4gIC8vIFRoZXNlIG9wdGlvbnMgY2FuIGJlIHByb3ZpZGVkIHNlcGFyYXRlbHkgYXMgcmVhZGFibGVYWFggYW5kIHdyaXRhYmxlWFhYLlxuXG4gIGlmICh0eXBlb2YgaXNEdXBsZXggIT09ICdib29sZWFuJykgaXNEdXBsZXggPSBzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXg7IC8vIG9iamVjdCBzdHJlYW0gZmxhZy4gVXNlZCB0byBtYWtlIHJlYWQobikgaWdub3JlIG4gYW5kIHRvXG4gIC8vIG1ha2UgYWxsIHRoZSBidWZmZXIgbWVyZ2luZyBhbmQgbGVuZ3RoIGNoZWNrcyBnbyBhd2F5XG5cbiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7XG4gIGlmIChpc0R1cGxleCkgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy5yZWFkYWJsZU9iamVjdE1vZGU7IC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgXCJkb24ndCBjYWxsIF9yZWFkIHByZWVtcHRpdmVseSBldmVyXCJcblxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBnZXRIaWdoV2F0ZXJNYXJrKHRoaXMsIG9wdGlvbnMsICdyZWFkYWJsZUhpZ2hXYXRlck1hcmsnLCBpc0R1cGxleCk7IC8vIEEgbGlua2VkIGxpc3QgaXMgdXNlZCB0byBzdG9yZSBkYXRhIGNodW5rcyBpbnN0ZWFkIG9mIGFuIGFycmF5IGJlY2F1c2UgdGhlXG4gIC8vIGxpbmtlZCBsaXN0IGNhbiByZW1vdmUgZWxlbWVudHMgZnJvbSB0aGUgYmVnaW5uaW5nIGZhc3RlciB0aGFuXG4gIC8vIGFycmF5LnNoaWZ0KClcblxuICB0aGlzLmJ1ZmZlciA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIHRoaXMubGVuZ3RoID0gMDtcbiAgdGhpcy5waXBlcyA9IG51bGw7XG4gIHRoaXMucGlwZXNDb3VudCA9IDA7XG4gIHRoaXMuZmxvd2luZyA9IG51bGw7XG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7XG4gIHRoaXMucmVhZGluZyA9IGZhbHNlOyAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBldmVudCAncmVhZGFibGUnLydkYXRhJyBpcyBlbWl0dGVkXG4gIC8vIGltbWVkaWF0ZWx5LCBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlXG4gIC8vIGFueSBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCByZWFkIGNhbGwuXG5cbiAgdGhpcy5zeW5jID0gdHJ1ZTsgLy8gd2hlbmV2ZXIgd2UgcmV0dXJuIG51bGwsIHRoZW4gd2Ugc2V0IGEgZmxhZyB0byBzYXlcbiAgLy8gdGhhdCB3ZSdyZSBhd2FpdGluZyBhICdyZWFkYWJsZScgZXZlbnQgZW1pc3Npb24uXG5cbiAgdGhpcy5uZWVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5yZWFkYWJsZUxpc3RlbmluZyA9IGZhbHNlO1xuICB0aGlzLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlO1xuICB0aGlzLnBhdXNlZCA9IHRydWU7IC8vIFNob3VsZCBjbG9zZSBiZSBlbWl0dGVkIG9uIGRlc3Ryb3kuIERlZmF1bHRzIHRvIHRydWUuXG5cbiAgdGhpcy5lbWl0Q2xvc2UgPSBvcHRpb25zLmVtaXRDbG9zZSAhPT0gZmFsc2U7IC8vIFNob3VsZCAuZGVzdHJveSgpIGJlIGNhbGxlZCBhZnRlciAnZW5kJyAoYW5kIHBvdGVudGlhbGx5ICdmaW5pc2gnKVxuXG4gIHRoaXMuYXV0b0Rlc3Ryb3kgPSAhIW9wdGlvbnMuYXV0b0Rlc3Ryb3k7IC8vIGhhcyBpdCBiZWVuIGRlc3Ryb3llZFxuXG4gIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7IC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcbiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG5cbiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7IC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzXG5cbiAgdGhpcy5hd2FpdERyYWluID0gMDsgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZFxuXG4gIHRoaXMucmVhZGluZ01vcmUgPSBmYWxzZTtcbiAgdGhpcy5kZWNvZGVyID0gbnVsbDtcbiAgdGhpcy5lbmNvZGluZyA9IG51bGw7XG5cbiAgaWYgKG9wdGlvbnMuZW5jb2RpbmcpIHtcbiAgICBpZiAoIVN0cmluZ0RlY29kZXIpIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyO1xuICAgIHRoaXMuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKG9wdGlvbnMuZW5jb2RpbmcpO1xuICAgIHRoaXMuZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlKG9wdGlvbnMpIHtcbiAgRHVwbGV4ID0gRHVwbGV4IHx8IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlYWRhYmxlKSkgcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTsgLy8gQ2hlY2tpbmcgZm9yIGEgU3RyZWFtLkR1cGxleCBpbnN0YW5jZSBpcyBmYXN0ZXIgaGVyZSBpbnN0ZWFkIG9mIGluc2lkZVxuICAvLyB0aGUgUmVhZGFibGVTdGF0ZSBjb25zdHJ1Y3RvciwgYXQgbGVhc3Qgd2l0aCBWOCA2LjVcblxuICB2YXIgaXNEdXBsZXggPSB0aGlzIGluc3RhbmNlb2YgRHVwbGV4O1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlID0gbmV3IFJlYWRhYmxlU3RhdGUob3B0aW9ucywgdGhpcywgaXNEdXBsZXgpOyAvLyBsZWdhY3lcblxuICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTtcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yZWFkID09PSAnZnVuY3Rpb24nKSB0aGlzLl9yZWFkID0gb3B0aW9ucy5yZWFkO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB0aGlzLl9kZXN0cm95ID0gb3B0aW9ucy5kZXN0cm95O1xuICB9XG5cbiAgU3RyZWFtLmNhbGwodGhpcyk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZS5wcm90b3R5cGUsICdkZXN0cm95ZWQnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtXG4gICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldFxuICAgIGlmICghdGhpcy5fcmVhZGFibGVTdGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuXG5cbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHZhbHVlO1xuICB9XG59KTtcblJlYWRhYmxlLnByb3RvdHlwZS5kZXN0cm95ID0gZGVzdHJveUltcGwuZGVzdHJveTtcblJlYWRhYmxlLnByb3RvdHlwZS5fdW5kZXN0cm95ID0gZGVzdHJveUltcGwudW5kZXN0cm95O1xuXG5SZWFkYWJsZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICBjYihlcnIpO1xufTsgLy8gTWFudWFsbHkgc2hvdmUgc29tZXRoaW5nIGludG8gdGhlIHJlYWQoKSBidWZmZXIuXG4vLyBUaGlzIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGlnaFdhdGVyTWFyayBoYXMgbm90IGJlZW4gaGl0IHlldCxcbi8vIHNpbWlsYXIgdG8gaG93IFdyaXRhYmxlLndyaXRlKCkgcmV0dXJucyB0cnVlIGlmIHlvdSBzaG91bGRcbi8vIHdyaXRlKCkgc29tZSBtb3JlLlxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZykge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgc2tpcENodW5rQ2hlY2s7XG5cbiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlKSB7XG4gICAgaWYgKHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuXG4gICAgICBpZiAoZW5jb2RpbmcgIT09IHN0YXRlLmVuY29kaW5nKSB7XG4gICAgICAgIGNodW5rID0gQnVmZmVyLmZyb20oY2h1bmssIGVuY29kaW5nKTtcbiAgICAgICAgZW5jb2RpbmcgPSAnJztcbiAgICAgIH1cblxuICAgICAgc2tpcENodW5rQ2hlY2sgPSB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBza2lwQ2h1bmtDaGVjayA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBjaHVuaywgZW5jb2RpbmcsIGZhbHNlLCBza2lwQ2h1bmtDaGVjayk7XG59OyAvLyBVbnNoaWZ0IHNob3VsZCAqYWx3YXlzKiBiZSBzb21ldGhpbmcgZGlyZWN0bHkgb3V0IG9mIHJlYWQoKVxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24gKGNodW5rKSB7XG4gIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIGNodW5rLCBudWxsLCB0cnVlLCBmYWxzZSk7XG59O1xuXG5mdW5jdGlvbiByZWFkYWJsZUFkZENodW5rKHN0cmVhbSwgY2h1bmssIGVuY29kaW5nLCBhZGRUb0Zyb250LCBza2lwQ2h1bmtDaGVjaykge1xuICBkZWJ1ZygncmVhZGFibGVBZGRDaHVuaycsIGNodW5rKTtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuXG4gIGlmIChjaHVuayA9PT0gbnVsbCkge1xuICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgICBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciBlcjtcbiAgICBpZiAoIXNraXBDaHVua0NoZWNrKSBlciA9IGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspO1xuXG4gICAgaWYgKGVyKSB7XG4gICAgICBlcnJvck9yRGVzdHJveShzdHJlYW0sIGVyKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgIXN0YXRlLm9iamVjdE1vZGUgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGNodW5rKSAhPT0gQnVmZmVyLnByb3RvdHlwZSkge1xuICAgICAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWRkVG9Gcm9udCkge1xuICAgICAgICBpZiAoc3RhdGUuZW5kRW1pdHRlZCkgZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBuZXcgRVJSX1NUUkVBTV9VTlNISUZUX0FGVEVSX0VORF9FVkVOVCgpKTtlbHNlIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kZWQpIHtcbiAgICAgICAgZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBuZXcgRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRigpKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZGVzdHJveWVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhZW5jb2RpbmcpIHtcbiAgICAgICAgICBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspO1xuICAgICAgICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlIHx8IGNodW5rLmxlbmd0aCAhPT0gMCkgYWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGZhbHNlKTtlbHNlIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWFkZFRvRnJvbnQpIHtcbiAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgICAgIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuICB9IC8vIFdlIGNhbiBwdXNoIG1vcmUgZGF0YSBpZiB3ZSBhcmUgYmVsb3cgdGhlIGhpZ2hXYXRlck1hcmsuXG4gIC8vIEFsc28sIGlmIHdlIGhhdmUgbm8gZGF0YSB5ZXQsIHdlIGNhbiBzdGFuZCBzb21lIG1vcmUgYnl0ZXMuXG4gIC8vIFRoaXMgaXMgdG8gd29yayBhcm91bmQgY2FzZXMgd2hlcmUgaHdtPTAsIHN1Y2ggYXMgdGhlIHJlcGwuXG5cblxuICByZXR1cm4gIXN0YXRlLmVuZGVkICYmIChzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCk7XG59XG5cbmZ1bmN0aW9uIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBhZGRUb0Zyb250KSB7XG4gIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykge1xuICAgIHN0YXRlLmF3YWl0RHJhaW4gPSAwO1xuICAgIHN0cmVhbS5lbWl0KCdkYXRhJywgY2h1bmspO1xuICB9IGVsc2Uge1xuICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uXG4gICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuICAgIGlmIChhZGRUb0Zyb250KSBzdGF0ZS5idWZmZXIudW5zaGlmdChjaHVuayk7ZWxzZSBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG4gICAgaWYgKHN0YXRlLm5lZWRSZWFkYWJsZSkgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG4gIH1cblxuICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xufVxuXG5mdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7XG4gIHZhciBlcjtcblxuICBpZiAoIV9pc1VpbnQ4QXJyYXkoY2h1bmspICYmIHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIGVyID0gbmV3IEVSUl9JTlZBTElEX0FSR19UWVBFKCdjaHVuaycsIFsnc3RyaW5nJywgJ0J1ZmZlcicsICdVaW50OEFycmF5J10sIGNodW5rKTtcbiAgfVxuXG4gIHJldHVybiBlcjtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLmlzUGF1c2VkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID09PSBmYWxzZTtcbn07IC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS5zZXRFbmNvZGluZyA9IGZ1bmN0aW9uIChlbmMpIHtcbiAgaWYgKCFTdHJpbmdEZWNvZGVyKSBTdHJpbmdEZWNvZGVyID0gcmVxdWlyZSgnc3RyaW5nX2RlY29kZXIvJykuU3RyaW5nRGVjb2RlcjtcbiAgdmFyIGRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBkZWNvZGVyOyAvLyBJZiBzZXRFbmNvZGluZyhudWxsKSwgZGVjb2Rlci5lbmNvZGluZyBlcXVhbHMgdXRmOFxuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIuZW5jb2Rpbmc7IC8vIEl0ZXJhdGUgb3ZlciBjdXJyZW50IGJ1ZmZlciB0byBjb252ZXJ0IGFscmVhZHkgc3RvcmVkIEJ1ZmZlcnM6XG5cbiAgdmFyIHAgPSB0aGlzLl9yZWFkYWJsZVN0YXRlLmJ1ZmZlci5oZWFkO1xuICB2YXIgY29udGVudCA9ICcnO1xuXG4gIHdoaWxlIChwICE9PSBudWxsKSB7XG4gICAgY29udGVudCArPSBkZWNvZGVyLndyaXRlKHAuZGF0YSk7XG4gICAgcCA9IHAubmV4dDtcbiAgfVxuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLmNsZWFyKCk7XG5cbiAgaWYgKGNvbnRlbnQgIT09ICcnKSB0aGlzLl9yZWFkYWJsZVN0YXRlLmJ1ZmZlci5wdXNoKGNvbnRlbnQpO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmxlbmd0aCA9IGNvbnRlbnQubGVuZ3RoO1xuICByZXR1cm4gdGhpcztcbn07IC8vIERvbid0IHJhaXNlIHRoZSBod20gPiAxR0JcblxuXG52YXIgTUFYX0hXTSA9IDB4NDAwMDAwMDA7XG5cbmZ1bmN0aW9uIGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pIHtcbiAgaWYgKG4gPj0gTUFYX0hXTSkge1xuICAgIC8vIFRPRE8ocm9uYWcpOiBUaHJvdyBFUlJfVkFMVUVfT1VUX09GX1JBTkdFLlxuICAgIG4gPSBNQVhfSFdNO1xuICB9IGVsc2Uge1xuICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDIgdG8gcHJldmVudCBpbmNyZWFzaW5nIGh3bSBleGNlc3NpdmVseSBpblxuICAgIC8vIHRpbnkgYW1vdW50c1xuICAgIG4tLTtcbiAgICBuIHw9IG4gPj4+IDE7XG4gICAgbiB8PSBuID4+PiAyO1xuICAgIG4gfD0gbiA+Pj4gNDtcbiAgICBuIHw9IG4gPj4+IDg7XG4gICAgbiB8PSBuID4+PiAxNjtcbiAgICBuKys7XG4gIH1cblxuICByZXR1cm4gbjtcbn0gLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmdcbi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuXG5cblxuZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkge1xuICBpZiAobiA8PSAwIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgcmV0dXJuIDA7XG4gIGlmIChzdGF0ZS5vYmplY3RNb2RlKSByZXR1cm4gMTtcblxuICBpZiAobiAhPT0gbikge1xuICAgIC8vIE9ubHkgZmxvdyBvbmUgYnVmZmVyIGF0IGEgdGltZVxuICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCkgcmV0dXJuIHN0YXRlLmJ1ZmZlci5oZWFkLmRhdGEubGVuZ3RoO2Vsc2UgcmV0dXJuIHN0YXRlLmxlbmd0aDtcbiAgfSAvLyBJZiB3ZSdyZSBhc2tpbmcgZm9yIG1vcmUgdGhhbiB0aGUgY3VycmVudCBod20sIHRoZW4gcmFpc2UgdGhlIGh3bS5cblxuXG4gIGlmIChuID4gc3RhdGUuaGlnaFdhdGVyTWFyaykgc3RhdGUuaGlnaFdhdGVyTWFyayA9IGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pO1xuICBpZiAobiA8PSBzdGF0ZS5sZW5ndGgpIHJldHVybiBuOyAvLyBEb24ndCBoYXZlIGVub3VnaFxuXG4gIGlmICghc3RhdGUuZW5kZWQpIHtcbiAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmV0dXJuIHN0YXRlLmxlbmd0aDtcbn0gLy8geW91IGNhbiBvdmVycmlkZSBlaXRoZXIgdGhpcyBtZXRob2QsIG9yIHRoZSBhc3luYyBfcmVhZChuKSBiZWxvdy5cblxuXG5SZWFkYWJsZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChuKSB7XG4gIGRlYnVnKCdyZWFkJywgbik7XG4gIG4gPSBwYXJzZUludChuLCAxMCk7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciBuT3JpZyA9IG47XG4gIGlmIChuICE9PSAwKSBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsgLy8gaWYgd2UncmUgZG9pbmcgcmVhZCgwKSB0byB0cmlnZ2VyIGEgcmVhZGFibGUgZXZlbnQsIGJ1dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYSBidW5jaCBvZiBkYXRhIGluIHRoZSBidWZmZXIsIHRoZW4ganVzdCB0cmlnZ2VyXG4gIC8vIHRoZSAncmVhZGFibGUnIGV2ZW50IGFuZCBtb3ZlIG9uLlxuXG4gIGlmIChuID09PSAwICYmIHN0YXRlLm5lZWRSZWFkYWJsZSAmJiAoKHN0YXRlLmhpZ2hXYXRlck1hcmsgIT09IDAgPyBzdGF0ZS5sZW5ndGggPj0gc3RhdGUuaGlnaFdhdGVyTWFyayA6IHN0YXRlLmxlbmd0aCA+IDApIHx8IHN0YXRlLmVuZGVkKSkge1xuICAgIGRlYnVnKCdyZWFkOiBlbWl0UmVhZGFibGUnLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTtcbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtlbHNlIGVtaXRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG4gPSBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKTsgLy8gaWYgd2UndmUgZW5kZWQsIGFuZCB3ZSdyZSBub3cgY2xlYXIsIHRoZW4gZmluaXNoIGl0IHVwLlxuXG4gIGlmIChuID09PSAwICYmIHN0YXRlLmVuZGVkKSB7XG4gICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgZW5kUmVhZGFibGUodGhpcyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gLy8gQWxsIHRoZSBhY3R1YWwgY2h1bmsgZ2VuZXJhdGlvbiBsb2dpYyBuZWVkcyB0byBiZVxuICAvLyAqYmVsb3cqIHRoZSBjYWxsIHRvIF9yZWFkLiAgVGhlIHJlYXNvbiBpcyB0aGF0IGluIGNlcnRhaW5cbiAgLy8gc3ludGhldGljIHN0cmVhbSBjYXNlcywgc3VjaCBhcyBwYXNzdGhyb3VnaCBzdHJlYW1zLCBfcmVhZFxuICAvLyBtYXkgYmUgYSBjb21wbGV0ZWx5IHN5bmNocm9ub3VzIG9wZXJhdGlvbiB3aGljaCBtYXkgY2hhbmdlXG4gIC8vIHRoZSBzdGF0ZSBvZiB0aGUgcmVhZCBidWZmZXIsIHByb3ZpZGluZyBlbm91Z2ggZGF0YSB3aGVuXG4gIC8vIGJlZm9yZSB0aGVyZSB3YXMgKm5vdCogZW5vdWdoLlxuICAvL1xuICAvLyBTbywgdGhlIHN0ZXBzIGFyZTpcbiAgLy8gMS4gRmlndXJlIG91dCB3aGF0IHRoZSBzdGF0ZSBvZiB0aGluZ3Mgd2lsbCBiZSBhZnRlciB3ZSBkb1xuICAvLyBhIHJlYWQgZnJvbSB0aGUgYnVmZmVyLlxuICAvL1xuICAvLyAyLiBJZiB0aGF0IHJlc3VsdGluZyBzdGF0ZSB3aWxsIHRyaWdnZXIgYSBfcmVhZCwgdGhlbiBjYWxsIF9yZWFkLlxuICAvLyBOb3RlIHRoYXQgdGhpcyBtYXkgYmUgYXN5bmNocm9ub3VzLCBvciBzeW5jaHJvbm91cy4gIFllcywgaXQgaXNcbiAgLy8gZGVlcGx5IHVnbHkgdG8gd3JpdGUgQVBJcyB0aGlzIHdheSwgYnV0IHRoYXQgc3RpbGwgZG9lc24ndCBtZWFuXG4gIC8vIHRoYXQgdGhlIFJlYWRhYmxlIGNsYXNzIHNob3VsZCBiZWhhdmUgaW1wcm9wZXJseSwgYXMgc3RyZWFtcyBhcmVcbiAgLy8gZGVzaWduZWQgdG8gYmUgc3luYy9hc3luYyBhZ25vc3RpYy5cbiAgLy8gVGFrZSBub3RlIGlmIHRoZSBfcmVhZCBjYWxsIGlzIHN5bmMgb3IgYXN5bmMgKGllLCBpZiB0aGUgcmVhZCBjYWxsXG4gIC8vIGhhcyByZXR1cm5lZCB5ZXQpLCBzbyB0aGF0IHdlIGtub3cgd2hldGhlciBvciBub3QgaXQncyBzYWZlIHRvIGVtaXRcbiAgLy8gJ3JlYWRhYmxlJyBldGMuXG4gIC8vXG4gIC8vIDMuIEFjdHVhbGx5IHB1bGwgdGhlIHJlcXVlc3RlZCBjaHVua3Mgb3V0IG9mIHRoZSBidWZmZXIgYW5kIHJldHVybi5cbiAgLy8gaWYgd2UgbmVlZCBhIHJlYWRhYmxlIGV2ZW50LCB0aGVuIHdlIG5lZWQgdG8gZG8gc29tZSByZWFkaW5nLlxuXG5cbiAgdmFyIGRvUmVhZCA9IHN0YXRlLm5lZWRSZWFkYWJsZTtcbiAgZGVidWcoJ25lZWQgcmVhZGFibGUnLCBkb1JlYWQpOyAvLyBpZiB3ZSBjdXJyZW50bHkgaGF2ZSBsZXNzIHRoYW4gdGhlIGhpZ2hXYXRlck1hcmssIHRoZW4gYWxzbyByZWFkIHNvbWVcblxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwIHx8IHN0YXRlLmxlbmd0aCAtIG4gPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZG9SZWFkID0gdHJ1ZTtcbiAgICBkZWJ1ZygnbGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsnLCBkb1JlYWQpO1xuICB9IC8vIGhvd2V2ZXIsIGlmIHdlJ3ZlIGVuZGVkLCB0aGVuIHRoZXJlJ3Mgbm8gcG9pbnQsIGFuZCBpZiB3ZSdyZSBhbHJlYWR5XG4gIC8vIHJlYWRpbmcsIHRoZW4gaXQncyB1bm5lY2Vzc2FyeS5cblxuXG4gIGlmIChzdGF0ZS5lbmRlZCB8fCBzdGF0ZS5yZWFkaW5nKSB7XG4gICAgZG9SZWFkID0gZmFsc2U7XG4gICAgZGVidWcoJ3JlYWRpbmcgb3IgZW5kZWQnLCBkb1JlYWQpO1xuICB9IGVsc2UgaWYgKGRvUmVhZCkge1xuICAgIGRlYnVnKCdkbyByZWFkJyk7XG4gICAgc3RhdGUucmVhZGluZyA9IHRydWU7XG4gICAgc3RhdGUuc3luYyA9IHRydWU7IC8vIGlmIHRoZSBsZW5ndGggaXMgY3VycmVudGx5IHplcm8sIHRoZW4gd2UgKm5lZWQqIGEgcmVhZGFibGUgZXZlbnQuXG5cbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOyAvLyBjYWxsIGludGVybmFsIHJlYWQgbWV0aG9kXG5cbiAgICB0aGlzLl9yZWFkKHN0YXRlLmhpZ2hXYXRlck1hcmspO1xuXG4gICAgc3RhdGUuc3luYyA9IGZhbHNlOyAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLFxuICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci5cblxuICAgIGlmICghc3RhdGUucmVhZGluZykgbiA9IGhvd011Y2hUb1JlYWQobk9yaWcsIHN0YXRlKTtcbiAgfVxuXG4gIHZhciByZXQ7XG4gIGlmIChuID4gMCkgcmV0ID0gZnJvbUxpc3Qobiwgc3RhdGUpO2Vsc2UgcmV0ID0gbnVsbDtcblxuICBpZiAocmV0ID09PSBudWxsKSB7XG4gICAgc3RhdGUubmVlZFJlYWRhYmxlID0gc3RhdGUubGVuZ3RoIDw9IHN0YXRlLmhpZ2hXYXRlck1hcms7XG4gICAgbiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgc3RhdGUubGVuZ3RoIC09IG47XG4gICAgc3RhdGUuYXdhaXREcmFpbiA9IDA7XG4gIH1cblxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBub3RoaW5nIGluIHRoZSBidWZmZXIsIHRoZW4gd2Ugd2FudCB0byBrbm93XG4gICAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLlxuICAgIGlmICghc3RhdGUuZW5kZWQpIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7IC8vIElmIHdlIHRyaWVkIHRvIHJlYWQoKSBwYXN0IHRoZSBFT0YsIHRoZW4gZW1pdCBlbmQgb24gdGhlIG5leHQgdGljay5cblxuICAgIGlmIChuT3JpZyAhPT0gbiAmJiBzdGF0ZS5lbmRlZCkgZW5kUmVhZGFibGUodGhpcyk7XG4gIH1cblxuICBpZiAocmV0ICE9PSBudWxsKSB0aGlzLmVtaXQoJ2RhdGEnLCByZXQpO1xuICByZXR1cm4gcmV0O1xufTtcblxuZnVuY3Rpb24gb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKSB7XG4gIGRlYnVnKCdvbkVvZkNodW5rJyk7XG4gIGlmIChzdGF0ZS5lbmRlZCkgcmV0dXJuO1xuXG4gIGlmIChzdGF0ZS5kZWNvZGVyKSB7XG4gICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcblxuICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHtcbiAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTtcbiAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICBzdGF0ZS5lbmRlZCA9IHRydWU7XG5cbiAgaWYgKHN0YXRlLnN5bmMpIHtcbiAgICAvLyBpZiB3ZSBhcmUgc3luYywgd2FpdCB1bnRpbCBuZXh0IHRpY2sgdG8gZW1pdCB0aGUgZGF0YS5cbiAgICAvLyBPdGhlcndpc2Ugd2UgcmlzayBlbWl0dGluZyBkYXRhIGluIHRoZSBmbG93KClcbiAgICAvLyB0aGUgcmVhZGFibGUgY29kZSB0cmlnZ2VycyBkdXJpbmcgYSByZWFkKCkgY2FsbFxuICAgIGVtaXRSZWFkYWJsZShzdHJlYW0pO1xuICB9IGVsc2Uge1xuICAgIC8vIGVtaXQgJ3JlYWRhYmxlJyBub3cgdG8gbWFrZSBzdXJlIGl0IGdldHMgcGlja2VkIHVwLlxuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuXG4gICAgaWYgKCFzdGF0ZS5lbWl0dGVkUmVhZGFibGUpIHtcbiAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgICBlbWl0UmVhZGFibGVfKHN0cmVhbSk7XG4gICAgfVxuICB9XG59IC8vIERvbid0IGVtaXQgcmVhZGFibGUgcmlnaHQgYXdheSBpbiBzeW5jIG1vZGUsIGJlY2F1c2UgdGhpcyBjYW4gdHJpZ2dlclxuLy8gYW5vdGhlciByZWFkKCkgY2FsbCA9PiBzdGFjayBvdmVyZmxvdy4gIFRoaXMgd2F5LCBpdCBtaWdodCB0cmlnZ2VyXG4vLyBhIG5leHRUaWNrIHJlY3Vyc2lvbiB3YXJuaW5nLCBidXQgdGhhdCdzIG5vdCBzbyBiYWQuXG5cblxuZnVuY3Rpb24gZW1pdFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIGRlYnVnKCdlbWl0UmVhZGFibGUnLCBzdGF0ZS5uZWVkUmVhZGFibGUsIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSk7XG4gIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuXG4gIGlmICghc3RhdGUuZW1pdHRlZFJlYWRhYmxlKSB7XG4gICAgZGVidWcoJ2VtaXRSZWFkYWJsZScsIHN0YXRlLmZsb3dpbmcpO1xuICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0UmVhZGFibGVfLCBzdHJlYW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgZGVidWcoJ2VtaXRSZWFkYWJsZV8nLCBzdGF0ZS5kZXN0cm95ZWQsIHN0YXRlLmxlbmd0aCwgc3RhdGUuZW5kZWQpO1xuXG4gIGlmICghc3RhdGUuZGVzdHJveWVkICYmIChzdGF0ZS5sZW5ndGggfHwgc3RhdGUuZW5kZWQpKSB7XG4gICAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7XG4gICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG4gIH0gLy8gVGhlIHN0cmVhbSBuZWVkcyBhbm90aGVyIHJlYWRhYmxlIGV2ZW50IGlmXG4gIC8vIDEuIEl0IGlzIG5vdCBmbG93aW5nLCBhcyB0aGUgZmxvdyBtZWNoYW5pc20gd2lsbCB0YWtlXG4gIC8vICAgIGNhcmUgb2YgaXQuXG4gIC8vIDIuIEl0IGlzIG5vdCBlbmRlZC5cbiAgLy8gMy4gSXQgaXMgYmVsb3cgdGhlIGhpZ2hXYXRlck1hcmssIHNvIHdlIGNhbiBzY2hlZHVsZVxuICAvLyAgICBhbm90aGVyIHJlYWRhYmxlIGxhdGVyLlxuXG5cbiAgc3RhdGUubmVlZFJlYWRhYmxlID0gIXN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLmVuZGVkICYmIHN0YXRlLmxlbmd0aCA8PSBzdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICBmbG93KHN0cmVhbSk7XG59IC8vIGF0IHRoaXMgcG9pbnQsIHRoZSB1c2VyIGhhcyBwcmVzdW1hYmx5IHNlZW4gdGhlICdyZWFkYWJsZScgZXZlbnQsXG4vLyBhbmQgY2FsbGVkIHJlYWQoKSB0byBjb25zdW1lIHNvbWUgZGF0YS4gIHRoYXQgbWF5IGhhdmUgdHJpZ2dlcmVkXG4vLyBpbiB0dXJuIGFub3RoZXIgX3JlYWQobikgY2FsbCwgaW4gd2hpY2ggY2FzZSByZWFkaW5nID0gdHJ1ZSBpZlxuLy8gaXQncyBpbiBwcm9ncmVzcy5cbi8vIEhvd2V2ZXIsIGlmIHdlJ3JlIG5vdCBlbmRlZCwgb3IgcmVhZGluZywgYW5kIHRoZSBsZW5ndGggPCBod20sXG4vLyB0aGVuIGdvIGFoZWFkIGFuZCB0cnkgdG8gcmVhZCBzb21lIG1vcmUgcHJlZW1wdGl2ZWx5LlxuXG5cbmZ1bmN0aW9uIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlYWRpbmdNb3JlKSB7XG4gICAgc3RhdGUucmVhZGluZ01vcmUgPSB0cnVlO1xuICAgIHByb2Nlc3MubmV4dFRpY2sobWF5YmVSZWFkTW9yZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgLy8gQXR0ZW1wdCB0byByZWFkIG1vcmUgZGF0YSBpZiB3ZSBzaG91bGQuXG4gIC8vXG4gIC8vIFRoZSBjb25kaXRpb25zIGZvciByZWFkaW5nIG1vcmUgZGF0YSBhcmUgKG9uZSBvZik6XG4gIC8vIC0gTm90IGVub3VnaCBkYXRhIGJ1ZmZlcmVkIChzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKS4gVGhlIGxvb3BcbiAgLy8gICBpcyByZXNwb25zaWJsZSBmb3IgZmlsbGluZyB0aGUgYnVmZmVyIHdpdGggZW5vdWdoIGRhdGEgaWYgc3VjaCBkYXRhXG4gIC8vICAgaXMgYXZhaWxhYmxlLiBJZiBoaWdoV2F0ZXJNYXJrIGlzIDAgYW5kIHdlIGFyZSBub3QgaW4gdGhlIGZsb3dpbmcgbW9kZVxuICAvLyAgIHdlIHNob3VsZCBfbm90XyBhdHRlbXB0IHRvIGJ1ZmZlciBhbnkgZXh0cmEgZGF0YS4gV2UnbGwgZ2V0IG1vcmUgZGF0YVxuICAvLyAgIHdoZW4gdGhlIHN0cmVhbSBjb25zdW1lciBjYWxscyByZWFkKCkgaW5zdGVhZC5cbiAgLy8gLSBObyBkYXRhIGluIHRoZSBidWZmZXIsIGFuZCB0aGUgc3RyZWFtIGlzIGluIGZsb3dpbmcgbW9kZS4gSW4gdGhpcyBtb2RlXG4gIC8vICAgdGhlIGxvb3AgYmVsb3cgaXMgcmVzcG9uc2libGUgZm9yIGVuc3VyaW5nIHJlYWQoKSBpcyBjYWxsZWQuIEZhaWxpbmcgdG9cbiAgLy8gICBjYWxsIHJlYWQgaGVyZSB3b3VsZCBhYm9ydCB0aGUgZmxvdyBhbmQgdGhlcmUncyBubyBvdGhlciBtZWNoYW5pc20gZm9yXG4gIC8vICAgY29udGludWluZyB0aGUgZmxvdyBpZiB0aGUgc3RyZWFtIGNvbnN1bWVyIGhhcyBqdXN0IHN1YnNjcmliZWQgdG8gdGhlXG4gIC8vICAgJ2RhdGEnIGV2ZW50LlxuICAvL1xuICAvLyBJbiBhZGRpdGlvbiB0byB0aGUgYWJvdmUgY29uZGl0aW9ucyB0byBrZWVwIHJlYWRpbmcgZGF0YSwgdGhlIGZvbGxvd2luZ1xuICAvLyBjb25kaXRpb25zIHByZXZlbnQgdGhlIGRhdGEgZnJvbSBiZWluZyByZWFkOlxuICAvLyAtIFRoZSBzdHJlYW0gaGFzIGVuZGVkIChzdGF0ZS5lbmRlZCkuXG4gIC8vIC0gVGhlcmUgaXMgYWxyZWFkeSBhIHBlbmRpbmcgJ3JlYWQnIG9wZXJhdGlvbiAoc3RhdGUucmVhZGluZykuIFRoaXMgaXMgYVxuICAvLyAgIGNhc2Ugd2hlcmUgdGhlIHRoZSBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgaW1wbGVtZW50YXRpb24gZGVmaW5lZCBfcmVhZCgpXG4gIC8vICAgbWV0aG9kLCBidXQgdGhleSBhcmUgcHJvY2Vzc2luZyB0aGUgY2FsbCBhc3luY2hyb25vdXNseSBhbmQgaGF2ZSBfbm90X1xuICAvLyAgIGNhbGxlZCBwdXNoKCkgd2l0aCBuZXcgZGF0YS4gSW4gdGhpcyBjYXNlIHdlIHNraXAgcGVyZm9ybWluZyBtb3JlXG4gIC8vICAgcmVhZCgpcy4gVGhlIGV4ZWN1dGlvbiBlbmRzIGluIHRoaXMgbWV0aG9kIGFnYWluIGFmdGVyIHRoZSBfcmVhZCgpIGVuZHNcbiAgLy8gICB1cCBjYWxsaW5nIHB1c2goKSB3aXRoIG1vcmUgZGF0YS5cbiAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5lbmRlZCAmJiAoc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkpIHtcbiAgICB2YXIgbGVuID0gc3RhdGUubGVuZ3RoO1xuICAgIGRlYnVnKCdtYXliZVJlYWRNb3JlIHJlYWQgMCcpO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICAgIGlmIChsZW4gPT09IHN0YXRlLmxlbmd0aCkgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy5cbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgc3RhdGUucmVhZGluZ01vcmUgPSBmYWxzZTtcbn0gLy8gYWJzdHJhY3QgbWV0aG9kLiAgdG8gYmUgb3ZlcnJpZGRlbiBpbiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLlxuLy8gY2FsbCBjYihlciwgZGF0YSkgd2hlcmUgZGF0YSBpcyA8PSBuIGluIGxlbmd0aC5cbi8vIGZvciB2aXJ0dWFsIChub24tc3RyaW5nLCBub24tYnVmZmVyKSBzdHJlYW1zLCBcImxlbmd0aFwiIGlzIHNvbWV3aGF0XG4vLyBhcmJpdHJhcnksIGFuZCBwZXJoYXBzIG5vdCB2ZXJ5IG1lYW5pbmdmdWwuXG5cblxuUmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgZXJyb3JPckRlc3Ryb3kodGhpcywgbmV3IEVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEKCdfcmVhZCgpJykpO1xufTtcblxuUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoZGVzdCwgcGlwZU9wdHMpIHtcbiAgdmFyIHNyYyA9IHRoaXM7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgc3dpdGNoIChzdGF0ZS5waXBlc0NvdW50KSB7XG4gICAgY2FzZSAwOlxuICAgICAgc3RhdGUucGlwZXMgPSBkZXN0O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIDE6XG4gICAgICBzdGF0ZS5waXBlcyA9IFtzdGF0ZS5waXBlcywgZGVzdF07XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBzdGF0ZS5waXBlcy5wdXNoKGRlc3QpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICBzdGF0ZS5waXBlc0NvdW50ICs9IDE7XG4gIGRlYnVnKCdwaXBlIGNvdW50PSVkIG9wdHM9JWonLCBzdGF0ZS5waXBlc0NvdW50LCBwaXBlT3B0cyk7XG4gIHZhciBkb0VuZCA9ICghcGlwZU9wdHMgfHwgcGlwZU9wdHMuZW5kICE9PSBmYWxzZSkgJiYgZGVzdCAhPT0gcHJvY2Vzcy5zdGRvdXQgJiYgZGVzdCAhPT0gcHJvY2Vzcy5zdGRlcnI7XG4gIHZhciBlbmRGbiA9IGRvRW5kID8gb25lbmQgOiB1bnBpcGU7XG4gIGlmIChzdGF0ZS5lbmRFbWl0dGVkKSBwcm9jZXNzLm5leHRUaWNrKGVuZEZuKTtlbHNlIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7XG4gIGRlc3Qub24oJ3VucGlwZScsIG9udW5waXBlKTtcblxuICBmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSwgdW5waXBlSW5mbykge1xuICAgIGRlYnVnKCdvbnVucGlwZScpO1xuXG4gICAgaWYgKHJlYWRhYmxlID09PSBzcmMpIHtcbiAgICAgIGlmICh1bnBpcGVJbmZvICYmIHVucGlwZUluZm8uaGFzVW5waXBlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdW5waXBlSW5mby5oYXNVbnBpcGVkID0gdHJ1ZTtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uZW5kKCkge1xuICAgIGRlYnVnKCdvbmVuZCcpO1xuICAgIGRlc3QuZW5kKCk7XG4gIH0gLy8gd2hlbiB0aGUgZGVzdCBkcmFpbnMsIGl0IHJlZHVjZXMgdGhlIGF3YWl0RHJhaW4gY291bnRlclxuICAvLyBvbiB0aGUgc291cmNlLiAgVGhpcyB3b3VsZCBiZSBtb3JlIGVsZWdhbnQgd2l0aCBhIC5vbmNlKClcbiAgLy8gaGFuZGxlciBpbiBmbG93KCksIGJ1dCBhZGRpbmcgYW5kIHJlbW92aW5nIHJlcGVhdGVkbHkgaXNcbiAgLy8gdG9vIHNsb3cuXG5cblxuICB2YXIgb25kcmFpbiA9IHBpcGVPbkRyYWluKHNyYyk7XG4gIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7XG4gIHZhciBjbGVhbmVkVXAgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgIGRlYnVnKCdjbGVhbnVwJyk7IC8vIGNsZWFudXAgZXZlbnQgaGFuZGxlcnMgb25jZSB0aGUgcGlwZSBpcyBicm9rZW5cblxuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCd1bnBpcGUnLCBvbnVucGlwZSk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCB1bnBpcGUpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uZGF0YSk7XG4gICAgY2xlYW5lZFVwID0gdHJ1ZTsgLy8gaWYgdGhlIHJlYWRlciBpcyB3YWl0aW5nIGZvciBhIGRyYWluIGV2ZW50IGZyb20gdGhpc1xuICAgIC8vIHNwZWNpZmljIHdyaXRlciwgdGhlbiBpdCB3b3VsZCBjYXVzZSBpdCB0byBuZXZlciBzdGFydFxuICAgIC8vIGZsb3dpbmcgYWdhaW4uXG4gICAgLy8gU28sIGlmIHRoaXMgaXMgYXdhaXRpbmcgYSBkcmFpbiwgdGhlbiB3ZSBqdXN0IGNhbGwgaXQgbm93LlxuICAgIC8vIElmIHdlIGRvbid0IGtub3csIHRoZW4gYXNzdW1lIHRoYXQgd2UgYXJlIHdhaXRpbmcgZm9yIG9uZS5cblxuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluICYmICghZGVzdC5fd3JpdGFibGVTdGF0ZSB8fCBkZXN0Ll93cml0YWJsZVN0YXRlLm5lZWREcmFpbikpIG9uZHJhaW4oKTtcbiAgfVxuXG4gIHNyYy5vbignZGF0YScsIG9uZGF0YSk7XG5cbiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG4gICAgZGVidWcoJ29uZGF0YScpO1xuICAgIHZhciByZXQgPSBkZXN0LndyaXRlKGNodW5rKTtcbiAgICBkZWJ1ZygnZGVzdC53cml0ZScsIHJldCk7XG5cbiAgICBpZiAocmV0ID09PSBmYWxzZSkge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlXG4gICAgICAvLyB0byBnZXQgc3R1Y2sgaW4gYSBwZXJtYW5lbnRseSBwYXVzZWQgc3RhdGUgaWYgdGhhdCB3cml0ZVxuICAgICAgLy8gYWxzbyByZXR1cm5lZCBmYWxzZS5cbiAgICAgIC8vID0+IENoZWNrIHdoZXRoZXIgYGRlc3RgIGlzIHN0aWxsIGEgcGlwaW5nIGRlc3RpbmF0aW9uLlxuICAgICAgaWYgKChzdGF0ZS5waXBlc0NvdW50ID09PSAxICYmIHN0YXRlLnBpcGVzID09PSBkZXN0IHx8IHN0YXRlLnBpcGVzQ291bnQgPiAxICYmIGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpICE9PSAtMSkgJiYgIWNsZWFuZWRVcCkge1xuICAgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJywgc3RhdGUuYXdhaXREcmFpbik7XG4gICAgICAgIHN0YXRlLmF3YWl0RHJhaW4rKztcbiAgICAgIH1cblxuICAgICAgc3JjLnBhdXNlKCk7XG4gICAgfVxuICB9IC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LlxuICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuXG5cblxuICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7XG4gICAgZGVidWcoJ29uZXJyb3InLCBlcik7XG4gICAgdW5waXBlKCk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBpZiAoRUVsaXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKSBlcnJvck9yRGVzdHJveShkZXN0LCBlcik7XG4gIH0gLy8gTWFrZSBzdXJlIG91ciBlcnJvciBoYW5kbGVyIGlzIGF0dGFjaGVkIGJlZm9yZSB1c2VybGFuZCBvbmVzLlxuXG5cbiAgcHJlcGVuZExpc3RlbmVyKGRlc3QsICdlcnJvcicsIG9uZXJyb3IpOyAvLyBCb3RoIGNsb3NlIGFuZCBmaW5pc2ggc2hvdWxkIHRyaWdnZXIgdW5waXBlLCBidXQgb25seSBvbmNlLlxuXG4gIGZ1bmN0aW9uIG9uY2xvc2UoKSB7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuICAgIHVucGlwZSgpO1xuICB9XG5cbiAgZGVzdC5vbmNlKCdjbG9zZScsIG9uY2xvc2UpO1xuXG4gIGZ1bmN0aW9uIG9uZmluaXNoKCkge1xuICAgIGRlYnVnKCdvbmZpbmlzaCcpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG4gICAgdW5waXBlKCk7XG4gIH1cblxuICBkZXN0Lm9uY2UoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcblxuICBmdW5jdGlvbiB1bnBpcGUoKSB7XG4gICAgZGVidWcoJ3VucGlwZScpO1xuICAgIHNyYy51bnBpcGUoZGVzdCk7XG4gIH0gLy8gdGVsbCB0aGUgZGVzdCB0aGF0IGl0J3MgYmVpbmcgcGlwZWQgdG9cblxuXG4gIGRlc3QuZW1pdCgncGlwZScsIHNyYyk7IC8vIHN0YXJ0IHRoZSBmbG93IGlmIGl0IGhhc24ndCBiZWVuIHN0YXJ0ZWQgYWxyZWFkeS5cblxuICBpZiAoIXN0YXRlLmZsb3dpbmcpIHtcbiAgICBkZWJ1ZygncGlwZSByZXN1bWUnKTtcbiAgICBzcmMucmVzdW1lKCk7XG4gIH1cblxuICByZXR1cm4gZGVzdDtcbn07XG5cbmZ1bmN0aW9uIHBpcGVPbkRyYWluKHNyYykge1xuICByZXR1cm4gZnVuY3Rpb24gcGlwZU9uRHJhaW5GdW5jdGlvblJlc3VsdCgpIHtcbiAgICB2YXIgc3RhdGUgPSBzcmMuX3JlYWRhYmxlU3RhdGU7XG4gICAgZGVidWcoJ3BpcGVPbkRyYWluJywgc3RhdGUuYXdhaXREcmFpbik7XG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4pIHN0YXRlLmF3YWl0RHJhaW4tLTtcblxuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluID09PSAwICYmIEVFbGlzdGVuZXJDb3VudChzcmMsICdkYXRhJykpIHtcbiAgICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgICAgZmxvdyhzcmMpO1xuICAgIH1cbiAgfTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciB1bnBpcGVJbmZvID0ge1xuICAgIGhhc1VucGlwZWQ6IGZhbHNlXG4gIH07IC8vIGlmIHdlJ3JlIG5vdCBwaXBpbmcgYW55d2hlcmUsIHRoZW4gZG8gbm90aGluZy5cblxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMCkgcmV0dXJuIHRoaXM7IC8vIGp1c3Qgb25lIGRlc3RpbmF0aW9uLiAgbW9zdCBjb21tb24gY2FzZS5cblxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSkge1xuICAgIC8vIHBhc3NlZCBpbiBvbmUsIGJ1dCBpdCdzIG5vdCB0aGUgcmlnaHQgb25lLlxuICAgIGlmIChkZXN0ICYmIGRlc3QgIT09IHN0YXRlLnBpcGVzKSByZXR1cm4gdGhpcztcbiAgICBpZiAoIWRlc3QpIGRlc3QgPSBzdGF0ZS5waXBlczsgLy8gZ290IGEgbWF0Y2guXG5cbiAgICBzdGF0ZS5waXBlcyA9IG51bGw7XG4gICAgc3RhdGUucGlwZXNDb3VudCA9IDA7XG4gICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuICAgIGlmIChkZXN0KSBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMsIHVucGlwZUluZm8pO1xuICAgIHJldHVybiB0aGlzO1xuICB9IC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuXG5cblxuICBpZiAoIWRlc3QpIHtcbiAgICAvLyByZW1vdmUgYWxsLlxuICAgIHZhciBkZXN0cyA9IHN0YXRlLnBpcGVzO1xuICAgIHZhciBsZW4gPSBzdGF0ZS5waXBlc0NvdW50O1xuICAgIHN0YXRlLnBpcGVzID0gbnVsbDtcbiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDtcbiAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBkZXN0c1tpXS5lbWl0KCd1bnBpcGUnLCB0aGlzLCB7XG4gICAgICAgIGhhc1VucGlwZWQ6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSAvLyB0cnkgdG8gZmluZCB0aGUgcmlnaHQgb25lLlxuXG5cbiAgdmFyIGluZGV4ID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7XG4gIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiB0aGlzO1xuICBzdGF0ZS5waXBlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICBzdGF0ZS5waXBlc0NvdW50IC09IDE7XG4gIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdO1xuICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMsIHVucGlwZUluZm8pO1xuICByZXR1cm4gdGhpcztcbn07IC8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3Jcbi8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nXG5cblxuUmVhZGFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2LCBmbikge1xuICB2YXIgcmVzID0gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsIGV2LCBmbik7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgaWYgKGV2ID09PSAnZGF0YScpIHtcbiAgICAvLyB1cGRhdGUgcmVhZGFibGVMaXN0ZW5pbmcgc28gdGhhdCByZXN1bWUoKSBtYXkgYmUgYSBuby1vcFxuICAgIC8vIGEgZmV3IGxpbmVzIGRvd24uIFRoaXMgaXMgbmVlZGVkIHRvIHN1cHBvcnQgb25jZSgncmVhZGFibGUnKS5cbiAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHRoaXMubGlzdGVuZXJDb3VudCgncmVhZGFibGUnKSA+IDA7IC8vIFRyeSBzdGFydCBmbG93aW5nIG9uIG5leHQgdGljayBpZiBzdHJlYW0gaXNuJ3QgZXhwbGljaXRseSBwYXVzZWRcblxuICAgIGlmIChzdGF0ZS5mbG93aW5nICE9PSBmYWxzZSkgdGhpcy5yZXN1bWUoKTtcbiAgfSBlbHNlIGlmIChldiA9PT0gJ3JlYWRhYmxlJykge1xuICAgIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiAhc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcpIHtcbiAgICAgIHN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nID0gc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlO1xuICAgICAgZGVidWcoJ29uIHJlYWRhYmxlJywgc3RhdGUubGVuZ3RoLCBzdGF0ZS5yZWFkaW5nKTtcblxuICAgICAgaWYgKHN0YXRlLmxlbmd0aCkge1xuICAgICAgICBlbWl0UmVhZGFibGUodGhpcyk7XG4gICAgICB9IGVsc2UgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soblJlYWRpbmdOZXh0VGljaywgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5cblJlYWRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IFJlYWRhYmxlLnByb3RvdHlwZS5vbjtcblxuUmVhZGFibGUucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKGV2LCBmbikge1xuICB2YXIgcmVzID0gU3RyZWFtLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lci5jYWxsKHRoaXMsIGV2LCBmbik7XG5cbiAgaWYgKGV2ID09PSAncmVhZGFibGUnKSB7XG4gICAgLy8gV2UgbmVlZCB0byBjaGVjayBpZiB0aGVyZSBpcyBzb21lb25lIHN0aWxsIGxpc3RlbmluZyB0b1xuICAgIC8vIHJlYWRhYmxlIGFuZCByZXNldCB0aGUgc3RhdGUuIEhvd2V2ZXIgdGhpcyBuZWVkcyB0byBoYXBwZW5cbiAgICAvLyBhZnRlciByZWFkYWJsZSBoYXMgYmVlbiBlbWl0dGVkIGJ1dCBiZWZvcmUgSS9PIChuZXh0VGljaykgdG9cbiAgICAvLyBzdXBwb3J0IG9uY2UoJ3JlYWRhYmxlJywgZm4pIGN5Y2xlcy4gVGhpcyBtZWFucyB0aGF0IGNhbGxpbmdcbiAgICAvLyByZXN1bWUgd2l0aGluIHRoZSBzYW1lIHRpY2sgd2lsbCBoYXZlIG5vXG4gICAgLy8gZWZmZWN0LlxuICAgIHByb2Nlc3MubmV4dFRpY2sodXBkYXRlUmVhZGFibGVMaXN0ZW5pbmcsIHRoaXMpO1xuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5cblJlYWRhYmxlLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZXYpIHtcbiAgdmFyIHJlcyA9IFN0cmVhbS5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgaWYgKGV2ID09PSAncmVhZGFibGUnIHx8IGV2ID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIGlmIHRoZXJlIGlzIHNvbWVvbmUgc3RpbGwgbGlzdGVuaW5nIHRvXG4gICAgLy8gcmVhZGFibGUgYW5kIHJlc2V0IHRoZSBzdGF0ZS4gSG93ZXZlciB0aGlzIG5lZWRzIHRvIGhhcHBlblxuICAgIC8vIGFmdGVyIHJlYWRhYmxlIGhhcyBiZWVuIGVtaXR0ZWQgYnV0IGJlZm9yZSBJL08gKG5leHRUaWNrKSB0b1xuICAgIC8vIHN1cHBvcnQgb25jZSgncmVhZGFibGUnLCBmbikgY3ljbGVzLiBUaGlzIG1lYW5zIHRoYXQgY2FsbGluZ1xuICAgIC8vIHJlc3VtZSB3aXRoaW4gdGhlIHNhbWUgdGljayB3aWxsIGhhdmUgbm9cbiAgICAvLyBlZmZlY3QuXG4gICAgcHJvY2Vzcy5uZXh0VGljayh1cGRhdGVSZWFkYWJsZUxpc3RlbmluZywgdGhpcyk7XG4gIH1cblxuICByZXR1cm4gcmVzO1xufTtcblxuZnVuY3Rpb24gdXBkYXRlUmVhZGFibGVMaXN0ZW5pbmcoc2VsZikge1xuICB2YXIgc3RhdGUgPSBzZWxmLl9yZWFkYWJsZVN0YXRlO1xuICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHNlbGYubGlzdGVuZXJDb3VudCgncmVhZGFibGUnKSA+IDA7XG5cbiAgaWYgKHN0YXRlLnJlc3VtZVNjaGVkdWxlZCAmJiAhc3RhdGUucGF1c2VkKSB7XG4gICAgLy8gZmxvd2luZyBuZWVkcyB0byBiZSBzZXQgdG8gdHJ1ZSBub3csIG90aGVyd2lzZVxuICAgIC8vIHRoZSB1cGNvbWluZyByZXN1bWUgd2lsbCBub3QgZmxvdy5cbiAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsgLy8gY3J1ZGUgd2F5IHRvIGNoZWNrIGlmIHdlIHNob3VsZCByZXN1bWVcbiAgfSBlbHNlIGlmIChzZWxmLmxpc3RlbmVyQ291bnQoJ2RhdGEnKSA+IDApIHtcbiAgICBzZWxmLnJlc3VtZSgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG5SZWFkaW5nTmV4dFRpY2soc2VsZikge1xuICBkZWJ1ZygncmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwJyk7XG4gIHNlbGYucmVhZCgwKTtcbn0gLy8gcGF1c2UoKSBhbmQgcmVzdW1lKCkgYXJlIHJlbW5hbnRzIG9mIHRoZSBsZWdhY3kgcmVhZGFibGUgc3RyZWFtIEFQSVxuLy8gSWYgdGhlIHVzZXIgdXNlcyB0aGVtLCB0aGVuIHN3aXRjaCBpbnRvIG9sZCBtb2RlLlxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3Jlc3VtZScpOyAvLyB3ZSBmbG93IG9ubHkgaWYgdGhlcmUgaXMgbm8gb25lIGxpc3RlbmluZ1xuICAgIC8vIGZvciByZWFkYWJsZSwgYnV0IHdlIHN0aWxsIGhhdmUgdG8gY2FsbFxuICAgIC8vIHJlc3VtZSgpXG5cbiAgICBzdGF0ZS5mbG93aW5nID0gIXN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nO1xuICAgIHJlc3VtZSh0aGlzLCBzdGF0ZSk7XG4gIH1cblxuICBzdGF0ZS5wYXVzZWQgPSBmYWxzZTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiByZXN1bWUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlc3VtZVNjaGVkdWxlZCkge1xuICAgIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IHRydWU7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhyZXN1bWVfLCBzdHJlYW0sIHN0YXRlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXN1bWVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgZGVidWcoJ3Jlc3VtZScsIHN0YXRlLnJlYWRpbmcpO1xuXG4gIGlmICghc3RhdGUucmVhZGluZykge1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICB9XG5cbiAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7XG4gIHN0cmVhbS5lbWl0KCdyZXN1bWUnKTtcbiAgZmxvdyhzdHJlYW0pO1xuICBpZiAoc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUucmVhZGluZykgc3RyZWFtLnJlYWQoMCk7XG59XG5cblJlYWRhYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHtcbiAgZGVidWcoJ2NhbGwgcGF1c2UgZmxvd2luZz0laicsIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyk7XG5cbiAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyAhPT0gZmFsc2UpIHtcbiAgICBkZWJ1ZygncGF1c2UnKTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXQoJ3BhdXNlJyk7XG4gIH1cblxuICB0aGlzLl9yZWFkYWJsZVN0YXRlLnBhdXNlZCA9IHRydWU7XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gZmxvdyhzdHJlYW0pIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICBkZWJ1ZygnZmxvdycsIHN0YXRlLmZsb3dpbmcpO1xuXG4gIHdoaWxlIChzdGF0ZS5mbG93aW5nICYmIHN0cmVhbS5yZWFkKCkgIT09IG51bGwpIHtcbiAgICA7XG4gIH1cbn0gLy8gd3JhcCBhbiBvbGQtc3R5bGUgc3RyZWFtIGFzIHRoZSBhc3luYyBkYXRhIHNvdXJjZS5cbi8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS5cbi8vIEl0IGlzIGFuIHVnbHkgdW5mb3J0dW5hdGUgbWVzcyBvZiBoaXN0b3J5LlxuXG5cblJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKHN0cmVhbSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciBwYXVzZWQgPSBmYWxzZTtcbiAgc3RyZWFtLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgZW5kJyk7XG5cbiAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhc3RhdGUuZW5kZWQpIHtcbiAgICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7XG4gICAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSBfdGhpcy5wdXNoKGNodW5rKTtcbiAgICB9XG5cbiAgICBfdGhpcy5wdXNoKG51bGwpO1xuICB9KTtcbiAgc3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgZGF0YScpO1xuICAgIGlmIChzdGF0ZS5kZWNvZGVyKSBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspOyAvLyBkb24ndCBza2lwIG92ZXIgZmFsc3kgdmFsdWVzIGluIG9iamVjdE1vZGVcblxuICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlICYmIChjaHVuayA9PT0gbnVsbCB8fCBjaHVuayA9PT0gdW5kZWZpbmVkKSkgcmV0dXJuO2Vsc2UgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmICghY2h1bmsgfHwgIWNodW5rLmxlbmd0aCkpIHJldHVybjtcblxuICAgIHZhciByZXQgPSBfdGhpcy5wdXNoKGNodW5rKTtcblxuICAgIGlmICghcmV0KSB7XG4gICAgICBwYXVzZWQgPSB0cnVlO1xuICAgICAgc3RyZWFtLnBhdXNlKCk7XG4gICAgfVxuICB9KTsgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLlxuICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy5cblxuICBmb3IgKHZhciBpIGluIHN0cmVhbSkge1xuICAgIGlmICh0aGlzW2ldID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHN0cmVhbVtpXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpc1tpXSA9IGZ1bmN0aW9uIG1ldGhvZFdyYXAobWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBtZXRob2RXcmFwUmV0dXJuRnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHN0cmVhbVttZXRob2RdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0oaSk7XG4gICAgfVxuICB9IC8vIHByb3h5IGNlcnRhaW4gaW1wb3J0YW50IGV2ZW50cy5cblxuXG4gIGZvciAodmFyIG4gPSAwOyBuIDwga1Byb3h5RXZlbnRzLmxlbmd0aDsgbisrKSB7XG4gICAgc3RyZWFtLm9uKGtQcm94eUV2ZW50c1tuXSwgdGhpcy5lbWl0LmJpbmQodGhpcywga1Byb3h5RXZlbnRzW25dKSk7XG4gIH0gLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZVxuICAvLyB1bmRlcmx5aW5nIHN0cmVhbS5cblxuXG4gIHRoaXMuX3JlYWQgPSBmdW5jdGlvbiAobikge1xuICAgIGRlYnVnKCd3cmFwcGVkIF9yZWFkJywgbik7XG5cbiAgICBpZiAocGF1c2VkKSB7XG4gICAgICBwYXVzZWQgPSBmYWxzZTtcbiAgICAgIHN0cmVhbS5yZXN1bWUoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5pZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuICBSZWFkYWJsZS5wcm90b3R5cGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL2FzeW5jX2l0ZXJhdG9yJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcih0aGlzKTtcbiAgfTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgJ3JlYWRhYmxlSGlnaFdhdGVyTWFyaycsIHtcbiAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGVcbiAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluXG4gIC8vIHVzZXJsYW5kIHdpbGwgZmFpbFxuICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuaGlnaFdhdGVyTWFyaztcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAncmVhZGFibGVCdWZmZXInLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyO1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZS5wcm90b3R5cGUsICdyZWFkYWJsZUZsb3dpbmcnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmc7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gc2V0KHN0YXRlKSB7XG4gICAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHtcbiAgICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IHN0YXRlO1xuICAgIH1cbiAgfVxufSk7IC8vIGV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS5cblxuUmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAncmVhZGFibGVMZW5ndGgnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmxlbmd0aDtcbiAgfVxufSk7IC8vIFBsdWNrIG9mZiBuIGJ5dGVzIGZyb20gYW4gYXJyYXkgb2YgYnVmZmVycy5cbi8vIExlbmd0aCBpcyB0aGUgY29tYmluZWQgbGVuZ3RocyBvZiBhbGwgdGhlIGJ1ZmZlcnMgaW4gdGhlIGxpc3QuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cblxuZnVuY3Rpb24gZnJvbUxpc3Qobiwgc3RhdGUpIHtcbiAgLy8gbm90aGluZyBidWZmZXJlZFxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgdmFyIHJldDtcbiAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldCA9IHN0YXRlLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYgKCFuIHx8IG4gPj0gc3RhdGUubGVuZ3RoKSB7XG4gICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBsaXN0XG4gICAgaWYgKHN0YXRlLmRlY29kZXIpIHJldCA9IHN0YXRlLmJ1ZmZlci5qb2luKCcnKTtlbHNlIGlmIChzdGF0ZS5idWZmZXIubGVuZ3RoID09PSAxKSByZXQgPSBzdGF0ZS5idWZmZXIuZmlyc3QoKTtlbHNlIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25jYXQoc3RhdGUubGVuZ3RoKTtcbiAgICBzdGF0ZS5idWZmZXIuY2xlYXIoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyByZWFkIHBhcnQgb2YgbGlzdFxuICAgIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25zdW1lKG4sIHN0YXRlLmRlY29kZXIpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIGRlYnVnKCdlbmRSZWFkYWJsZScsIHN0YXRlLmVuZEVtaXR0ZWQpO1xuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCkge1xuICAgIHN0YXRlLmVuZGVkID0gdHJ1ZTtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGVuZFJlYWRhYmxlTlQsIHN0YXRlLCBzdHJlYW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlTlQoc3RhdGUsIHN0cmVhbSkge1xuICBkZWJ1ZygnZW5kUmVhZGFibGVOVCcsIHN0YXRlLmVuZEVtaXR0ZWQsIHN0YXRlLmxlbmd0aCk7IC8vIENoZWNrIHRoYXQgd2UgZGlkbid0IGdldCBvbmUgbGFzdCB1bnNoaWZ0LlxuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZW5kJyk7XG5cbiAgICBpZiAoc3RhdGUuYXV0b0Rlc3Ryb3kpIHtcbiAgICAgIC8vIEluIGNhc2Ugb2YgZHVwbGV4IHN0cmVhbXMgd2UgbmVlZCBhIHdheSB0byBkZXRlY3RcbiAgICAgIC8vIGlmIHRoZSB3cml0YWJsZSBzaWRlIGlzIHJlYWR5IGZvciBhdXRvRGVzdHJveSBhcyB3ZWxsXG4gICAgICB2YXIgd1N0YXRlID0gc3RyZWFtLl93cml0YWJsZVN0YXRlO1xuXG4gICAgICBpZiAoIXdTdGF0ZSB8fCB3U3RhdGUuYXV0b0Rlc3Ryb3kgJiYgd1N0YXRlLmZpbmlzaGVkKSB7XG4gICAgICAgIHN0cmVhbS5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nKSB7XG4gIFJlYWRhYmxlLmZyb20gPSBmdW5jdGlvbiAoaXRlcmFibGUsIG9wdHMpIHtcbiAgICBpZiAoZnJvbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmcm9tID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL2Zyb20nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnJvbShSZWFkYWJsZSwgaXRlcmFibGUsIG9wdHMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBpbmRleE9mKHhzLCB4KSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKHhzW2ldID09PSB4KSByZXR1cm4gaTtcbiAgfVxuXG4gIHJldHVybiAtMTtcbn0iLCJcbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBkZXByZWNhdGU7XG5cbi8qKlxuICogTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbiAqIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4gKlxuICogSWYgYGxvY2FsU3RvcmFnZS5ub0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG4gKlxuICogSWYgYGxvY2FsU3RvcmFnZS50aHJvd0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGRlcHJlY2F0ZWQgZnVuY3Rpb25zXG4gKiB3aWxsIHRocm93IGFuIEVycm9yIHdoZW4gaW52b2tlZC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLnRyYWNlRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnNcbiAqIHdpbGwgaW52b2tlIGBjb25zb2xlLnRyYWNlKClgIGluc3RlYWQgb2YgYGNvbnNvbGUuZXJyb3IoKWAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSB0aGUgZnVuY3Rpb24gdG8gZGVwcmVjYXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gbXNnIC0gdGhlIHN0cmluZyB0byBwcmludCB0byB0aGUgY29uc29sZSB3aGVuIGBmbmAgaXMgaW52b2tlZFxuICogQHJldHVybnMge0Z1bmN0aW9ufSBhIG5ldyBcImRlcHJlY2F0ZWRcIiB2ZXJzaW9uIG9mIGBmbmBcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGVwcmVjYXRlIChmbiwgbXNnKSB7XG4gIGlmIChjb25maWcoJ25vRGVwcmVjYXRpb24nKSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKGNvbmZpZygndGhyb3dEZXByZWNhdGlvbicpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChjb25maWcoJ3RyYWNlRGVwcmVjYXRpb24nKSkge1xuICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4obXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGBsb2NhbFN0b3JhZ2VgIGZvciBib29sZWFuIHZhbHVlcyBmb3IgdGhlIGdpdmVuIGBuYW1lYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBjb25maWcgKG5hbWUpIHtcbiAgLy8gYWNjZXNzaW5nIGdsb2JhbC5sb2NhbFN0b3JhZ2UgY2FuIHRyaWdnZXIgYSBET01FeGNlcHRpb24gaW4gc2FuZGJveGVkIGlmcmFtZXNcbiAgdHJ5IHtcbiAgICBpZiAoIWdsb2JhbC5sb2NhbFN0b3JhZ2UpIHJldHVybiBmYWxzZTtcbiAgfSBjYXRjaCAoXykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdmFsID0gZ2xvYmFsLmxvY2FsU3RvcmFnZVtuYW1lXTtcbiAgaWYgKG51bGwgPT0gdmFsKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XG59XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbi8vIEEgYml0IHNpbXBsZXIgdGhhbiByZWFkYWJsZSBzdHJlYW1zLlxuLy8gSW1wbGVtZW50IGFuIGFzeW5jIC5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYiksIGFuZCBpdCdsbCBoYW5kbGUgYWxsXG4vLyB0aGUgZHJhaW4gZXZlbnQgZW1pc3Npb24gYW5kIGJ1ZmZlcmluZy5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBXcml0YWJsZTtcbi8qIDxyZXBsYWNlbWVudD4gKi9cblxuZnVuY3Rpb24gV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aGlzLmNodW5rID0gY2h1bms7XG4gIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZztcbiAgdGhpcy5jYWxsYmFjayA9IGNiO1xuICB0aGlzLm5leHQgPSBudWxsO1xufSAvLyBJdCBzZWVtcyBhIGxpbmtlZCBsaXN0IGJ1dCBpdCBpcyBub3Rcbi8vIHRoZXJlIHdpbGwgYmUgb25seSAyIG9mIHRoZXNlIGZvciBlYWNoIHN0cmVhbVxuXG5cbmZ1bmN0aW9uIENvcmtlZFJlcXVlc3Qoc3RhdGUpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLm5leHQgPSBudWxsO1xuICB0aGlzLmVudHJ5ID0gbnVsbDtcblxuICB0aGlzLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICBvbkNvcmtlZEZpbmlzaChfdGhpcywgc3RhdGUpO1xuICB9O1xufVxuLyogPC9yZXBsYWNlbWVudD4gKi9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cblxuXG52YXIgRHVwbGV4O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbldyaXRhYmxlLldyaXRhYmxlU3RhdGUgPSBXcml0YWJsZVN0YXRlO1xuLyo8cmVwbGFjZW1lbnQ+Ki9cblxudmFyIGludGVybmFsVXRpbCA9IHtcbiAgZGVwcmVjYXRlOiByZXF1aXJlKCd1dGlsLWRlcHJlY2F0ZScpXG59O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG5cbnZhciBTdHJlYW0gPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvc3RyZWFtJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyO1xuXG52YXIgT3VyVWludDhBcnJheSA9IGdsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9O1xuXG5mdW5jdGlvbiBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKSB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShjaHVuayk7XG59XG5cbmZ1bmN0aW9uIF9pc1VpbnQ4QXJyYXkob2JqKSB7XG4gIHJldHVybiBCdWZmZXIuaXNCdWZmZXIob2JqKSB8fCBvYmogaW5zdGFuY2VvZiBPdXJVaW50OEFycmF5O1xufVxuXG52YXIgZGVzdHJveUltcGwgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvZGVzdHJveScpO1xuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvc3RhdGUnKSxcbiAgICBnZXRIaWdoV2F0ZXJNYXJrID0gX3JlcXVpcmUuZ2V0SGlnaFdhdGVyTWFyaztcblxudmFyIF9yZXF1aXJlJGNvZGVzID0gcmVxdWlyZSgnLi4vZXJyb3JzJykuY29kZXMsXG4gICAgRVJSX0lOVkFMSURfQVJHX1RZUEUgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfSU5WQUxJRF9BUkdfVFlQRSxcbiAgICBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCA9IF9yZXF1aXJlJGNvZGVzLkVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVELFxuICAgIEVSUl9NVUxUSVBMRV9DQUxMQkFDSyA9IF9yZXF1aXJlJGNvZGVzLkVSUl9NVUxUSVBMRV9DQUxMQkFDSyxcbiAgICBFUlJfU1RSRUFNX0NBTk5PVF9QSVBFID0gX3JlcXVpcmUkY29kZXMuRVJSX1NUUkVBTV9DQU5OT1RfUElQRSxcbiAgICBFUlJfU1RSRUFNX0RFU1RST1lFRCA9IF9yZXF1aXJlJGNvZGVzLkVSUl9TVFJFQU1fREVTVFJPWUVELFxuICAgIEVSUl9TVFJFQU1fTlVMTF9WQUxVRVMgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfU1RSRUFNX05VTExfVkFMVUVTLFxuICAgIEVSUl9TVFJFQU1fV1JJVEVfQUZURVJfRU5EID0gX3JlcXVpcmUkY29kZXMuRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQsXG4gICAgRVJSX1VOS05PV05fRU5DT0RJTkcgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfVU5LTk9XTl9FTkNPRElORztcblxudmFyIGVycm9yT3JEZXN0cm95ID0gZGVzdHJveUltcGwuZXJyb3JPckRlc3Ryb3k7XG5cbnJlcXVpcmUoJ2luaGVyaXRzJykoV3JpdGFibGUsIFN0cmVhbSk7XG5cbmZ1bmN0aW9uIG5vcCgpIHt9XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtLCBpc0R1cGxleCkge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRHVwbGV4IHN0cmVhbXMgYXJlIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLCBidXQgc2hhcmVcbiAgLy8gdGhlIHNhbWUgb3B0aW9ucyBvYmplY3QuXG4gIC8vIEhvd2V2ZXIsIHNvbWUgY2FzZXMgcmVxdWlyZSBzZXR0aW5nIG9wdGlvbnMgdG8gZGlmZmVyZW50XG4gIC8vIHZhbHVlcyBmb3IgdGhlIHJlYWRhYmxlIGFuZCB0aGUgd3JpdGFibGUgc2lkZXMgb2YgdGhlIGR1cGxleCBzdHJlYW0sXG4gIC8vIGUuZy4gb3B0aW9ucy5yZWFkYWJsZU9iamVjdE1vZGUgdnMuIG9wdGlvbnMud3JpdGFibGVPYmplY3RNb2RlLCBldGMuXG5cbiAgaWYgKHR5cGVvZiBpc0R1cGxleCAhPT0gJ2Jvb2xlYW4nKSBpc0R1cGxleCA9IHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleDsgLy8gb2JqZWN0IHN0cmVhbSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoaXMgc3RyZWFtXG4gIC8vIGNvbnRhaW5zIGJ1ZmZlcnMgb3Igb2JqZWN0cy5cblxuICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcbiAgaWYgKGlzRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTsgLy8gdGhlIHBvaW50IGF0IHdoaWNoIHdyaXRlKCkgc3RhcnRzIHJldHVybmluZyBmYWxzZVxuICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zIHRoYXQgd2UgYWx3YXlzIHJldHVybiBmYWxzZSBpZlxuICAvLyB0aGUgZW50aXJlIGJ1ZmZlciBpcyBub3QgZmx1c2hlZCBpbW1lZGlhdGVseSBvbiB3cml0ZSgpXG5cbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gZ2V0SGlnaFdhdGVyTWFyayh0aGlzLCBvcHRpb25zLCAnd3JpdGFibGVIaWdoV2F0ZXJNYXJrJywgaXNEdXBsZXgpOyAvLyBpZiBfZmluYWwgaGFzIGJlZW4gY2FsbGVkXG5cbiAgdGhpcy5maW5hbENhbGxlZCA9IGZhbHNlOyAvLyBkcmFpbiBldmVudCBmbGFnLlxuXG4gIHRoaXMubmVlZERyYWluID0gZmFsc2U7IC8vIGF0IHRoZSBzdGFydCBvZiBjYWxsaW5nIGVuZCgpXG5cbiAgdGhpcy5lbmRpbmcgPSBmYWxzZTsgLy8gd2hlbiBlbmQoKSBoYXMgYmVlbiBjYWxsZWQsIGFuZCByZXR1cm5lZFxuXG4gIHRoaXMuZW5kZWQgPSBmYWxzZTsgLy8gd2hlbiAnZmluaXNoJyBpcyBlbWl0dGVkXG5cbiAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOyAvLyBoYXMgaXQgYmVlbiBkZXN0cm95ZWRcblxuICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlOyAvLyBzaG91bGQgd2UgZGVjb2RlIHN0cmluZ3MgaW50byBidWZmZXJzIGJlZm9yZSBwYXNzaW5nIHRvIF93cml0ZT9cbiAgLy8gdGhpcyBpcyBoZXJlIHNvIHRoYXQgc29tZSBub2RlLWNvcmUgc3RyZWFtcyBjYW4gb3B0aW1pemUgc3RyaW5nXG4gIC8vIGhhbmRsaW5nIGF0IGEgbG93ZXIgbGV2ZWwuXG5cbiAgdmFyIG5vRGVjb2RlID0gb3B0aW9ucy5kZWNvZGVTdHJpbmdzID09PSBmYWxzZTtcbiAgdGhpcy5kZWNvZGVTdHJpbmdzID0gIW5vRGVjb2RlOyAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nXG4gIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS5cbiAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLlxuXG4gIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnOyAvLyBub3QgYW4gYWN0dWFsIGJ1ZmZlciB3ZSBrZWVwIHRyYWNrIG9mLCBidXQgYSBtZWFzdXJlbWVudFxuICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nXG4gIC8vIHNvY2tldCBvciBmaWxlLlxuXG4gIHRoaXMubGVuZ3RoID0gMDsgLy8gYSBmbGFnIHRvIHNlZSB3aGVuIHdlJ3JlIGluIHRoZSBtaWRkbGUgb2YgYSB3cml0ZS5cblxuICB0aGlzLndyaXRpbmcgPSBmYWxzZTsgLy8gd2hlbiB0cnVlIGFsbCB3cml0ZXMgd2lsbCBiZSBidWZmZXJlZCB1bnRpbCAudW5jb3JrKCkgY2FsbFxuXG4gIHRoaXMuY29ya2VkID0gMDsgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksXG4gIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55XG4gIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cbiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuXG5cbiAgdGhpcy5zeW5jID0gdHJ1ZTsgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaFxuICAvLyBtYXkgY2FsbCB0aGUgX3dyaXRlKCkgY2FsbGJhY2sgaW4gdGhlIHNhbWUgdGljaywgc28gdGhhdCB3ZSBkb24ndFxuICAvLyBlbmQgdXAgaW4gYW4gb3ZlcmxhcHBlZCBvbndyaXRlIHNpdHVhdGlvbi5cblxuICB0aGlzLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTsgLy8gdGhlIGNhbGxiYWNrIHRoYXQncyBwYXNzZWQgdG8gX3dyaXRlKGNodW5rLGNiKVxuXG4gIHRoaXMub253cml0ZSA9IGZ1bmN0aW9uIChlcikge1xuICAgIG9ud3JpdGUoc3RyZWFtLCBlcik7XG4gIH07IC8vIHRoZSBjYWxsYmFjayB0aGF0IHRoZSB1c2VyIHN1cHBsaWVzIHRvIHdyaXRlKGNodW5rLGVuY29kaW5nLGNiKVxuXG5cbiAgdGhpcy53cml0ZWNiID0gbnVsbDsgLy8gdGhlIGFtb3VudCB0aGF0IGlzIGJlaW5nIHdyaXR0ZW4gd2hlbiBfd3JpdGUgaXMgY2FsbGVkLlxuXG4gIHRoaXMud3JpdGVsZW4gPSAwO1xuICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG4gIHRoaXMubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7IC8vIG51bWJlciBvZiBwZW5kaW5nIHVzZXItc3VwcGxpZWQgd3JpdGUgY2FsbGJhY2tzXG4gIC8vIHRoaXMgbXVzdCBiZSAwIGJlZm9yZSAnZmluaXNoJyBjYW4gYmUgZW1pdHRlZFxuXG4gIHRoaXMucGVuZGluZ2NiID0gMDsgLy8gZW1pdCBwcmVmaW5pc2ggaWYgdGhlIG9ubHkgdGhpbmcgd2UncmUgd2FpdGluZyBmb3IgaXMgX3dyaXRlIGNic1xuICAvLyBUaGlzIGlzIHJlbGV2YW50IGZvciBzeW5jaHJvbm91cyBUcmFuc2Zvcm0gc3RyZWFtc1xuXG4gIHRoaXMucHJlZmluaXNoZWQgPSBmYWxzZTsgLy8gVHJ1ZSBpZiB0aGUgZXJyb3Igd2FzIGFscmVhZHkgZW1pdHRlZCBhbmQgc2hvdWxkIG5vdCBiZSB0aHJvd24gYWdhaW5cblxuICB0aGlzLmVycm9yRW1pdHRlZCA9IGZhbHNlOyAvLyBTaG91bGQgY2xvc2UgYmUgZW1pdHRlZCBvbiBkZXN0cm95LiBEZWZhdWx0cyB0byB0cnVlLlxuXG4gIHRoaXMuZW1pdENsb3NlID0gb3B0aW9ucy5lbWl0Q2xvc2UgIT09IGZhbHNlOyAvLyBTaG91bGQgLmRlc3Ryb3koKSBiZSBjYWxsZWQgYWZ0ZXIgJ2ZpbmlzaCcgKGFuZCBwb3RlbnRpYWxseSAnZW5kJylcblxuICB0aGlzLmF1dG9EZXN0cm95ID0gISFvcHRpb25zLmF1dG9EZXN0cm95OyAvLyBjb3VudCBidWZmZXJlZCByZXF1ZXN0c1xuXG4gIHRoaXMuYnVmZmVyZWRSZXF1ZXN0Q291bnQgPSAwOyAvLyBhbGxvY2F0ZSB0aGUgZmlyc3QgQ29ya2VkUmVxdWVzdCwgdGhlcmUgaXMgYWx3YXlzXG4gIC8vIG9uZSBhbGxvY2F0ZWQgYW5kIGZyZWUgdG8gdXNlLCBhbmQgd2UgbWFpbnRhaW4gYXQgbW9zdCB0d29cblxuICB0aGlzLmNvcmtlZFJlcXVlc3RzRnJlZSA9IG5ldyBDb3JrZWRSZXF1ZXN0KHRoaXMpO1xufVxuXG5Xcml0YWJsZVN0YXRlLnByb3RvdHlwZS5nZXRCdWZmZXIgPSBmdW5jdGlvbiBnZXRCdWZmZXIoKSB7XG4gIHZhciBjdXJyZW50ID0gdGhpcy5idWZmZXJlZFJlcXVlc3Q7XG4gIHZhciBvdXQgPSBbXTtcblxuICB3aGlsZSAoY3VycmVudCkge1xuICAgIG91dC5wdXNoKGN1cnJlbnQpO1xuICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufTtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGVTdGF0ZS5wcm90b3R5cGUsICdidWZmZXInLCB7XG4gICAgICBnZXQ6IGludGVybmFsVXRpbC5kZXByZWNhdGUoZnVuY3Rpb24gd3JpdGFibGVTdGF0ZUJ1ZmZlckdldHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCk7XG4gICAgICB9LCAnX3dyaXRhYmxlU3RhdGUuYnVmZmVyIGlzIGRlcHJlY2F0ZWQuIFVzZSBfd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIgJyArICdpbnN0ZWFkLicsICdERVAwMDAzJylcbiAgICB9KTtcbiAgfSBjYXRjaCAoXykge31cbn0pKCk7IC8vIFRlc3QgX3dyaXRhYmxlU3RhdGUgZm9yIGluaGVyaXRhbmNlIHRvIGFjY291bnQgZm9yIER1cGxleCBzdHJlYW1zLFxuLy8gd2hvc2UgcHJvdG90eXBlIGNoYWluIG9ubHkgcG9pbnRzIHRvIFJlYWRhYmxlLlxuXG5cbnZhciByZWFsSGFzSW5zdGFuY2U7XG5cbmlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5oYXNJbnN0YW5jZSAmJiB0eXBlb2YgRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgcmVhbEhhc0luc3RhbmNlID0gRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV07XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZSwgU3ltYm9sLmhhc0luc3RhbmNlLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKG9iamVjdCkge1xuICAgICAgaWYgKHJlYWxIYXNJbnN0YW5jZS5jYWxsKHRoaXMsIG9iamVjdCkpIHJldHVybiB0cnVlO1xuICAgICAgaWYgKHRoaXMgIT09IFdyaXRhYmxlKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gb2JqZWN0ICYmIG9iamVjdC5fd3JpdGFibGVTdGF0ZSBpbnN0YW5jZW9mIFdyaXRhYmxlU3RhdGU7XG4gICAgfVxuICB9KTtcbn0gZWxzZSB7XG4gIHJlYWxIYXNJbnN0YW5jZSA9IGZ1bmN0aW9uIHJlYWxIYXNJbnN0YW5jZShvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgdGhpcztcbiAgfTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpOyAvLyBXcml0YWJsZSBjdG9yIGlzIGFwcGxpZWQgdG8gRHVwbGV4ZXMsIHRvby5cbiAgLy8gYHJlYWxIYXNJbnN0YW5jZWAgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgdXNpbmcgcGxhaW4gYGluc3RhbmNlb2ZgXG4gIC8vIHdvdWxkIHJldHVybiBmYWxzZSwgYXMgbm8gYF93cml0YWJsZVN0YXRlYCBwcm9wZXJ0eSBpcyBhdHRhY2hlZC5cbiAgLy8gVHJ5aW5nIHRvIHVzZSB0aGUgY3VzdG9tIGBpbnN0YW5jZW9mYCBmb3IgV3JpdGFibGUgaGVyZSB3aWxsIGFsc28gYnJlYWsgdGhlXG4gIC8vIE5vZGUuanMgTGF6eVRyYW5zZm9ybSBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaGFzIGEgbm9uLXRyaXZpYWwgZ2V0dGVyIGZvclxuICAvLyBgX3dyaXRhYmxlU3RhdGVgIHRoYXQgd291bGQgbGVhZCB0byBpbmZpbml0ZSByZWN1cnNpb24uXG4gIC8vIENoZWNraW5nIGZvciBhIFN0cmVhbS5EdXBsZXggaW5zdGFuY2UgaXMgZmFzdGVyIGhlcmUgaW5zdGVhZCBvZiBpbnNpZGVcbiAgLy8gdGhlIFdyaXRhYmxlU3RhdGUgY29uc3RydWN0b3IsIGF0IGxlYXN0IHdpdGggVjggNi41XG5cbiAgdmFyIGlzRHVwbGV4ID0gdGhpcyBpbnN0YW5jZW9mIER1cGxleDtcbiAgaWYgKCFpc0R1cGxleCAmJiAhcmVhbEhhc0luc3RhbmNlLmNhbGwoV3JpdGFibGUsIHRoaXMpKSByZXR1cm4gbmV3IFdyaXRhYmxlKG9wdGlvbnMpO1xuICB0aGlzLl93cml0YWJsZVN0YXRlID0gbmV3IFdyaXRhYmxlU3RhdGUob3B0aW9ucywgdGhpcywgaXNEdXBsZXgpOyAvLyBsZWdhY3kuXG5cbiAgdGhpcy53cml0YWJsZSA9IHRydWU7XG5cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGUgPT09ICdmdW5jdGlvbicpIHRoaXMuX3dyaXRlID0gb3B0aW9ucy53cml0ZTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGV2ID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZXYgPSBvcHRpb25zLndyaXRldjtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZGVzdHJveSA9IG9wdGlvbnMuZGVzdHJveTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmluYWwgPT09ICdmdW5jdGlvbicpIHRoaXMuX2ZpbmFsID0gb3B0aW9ucy5maW5hbDtcbiAgfVxuXG4gIFN0cmVhbS5jYWxsKHRoaXMpO1xufSAvLyBPdGhlcndpc2UgcGVvcGxlIGNhbiBwaXBlIFdyaXRhYmxlIHN0cmVhbXMsIHdoaWNoIGlzIGp1c3Qgd3JvbmcuXG5cblxuV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7XG4gIGVycm9yT3JEZXN0cm95KHRoaXMsIG5ldyBFUlJfU1RSRUFNX0NBTk5PVF9QSVBFKCkpO1xufTtcblxuZnVuY3Rpb24gd3JpdGVBZnRlckVuZChzdHJlYW0sIGNiKSB7XG4gIHZhciBlciA9IG5ldyBFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORCgpOyAvLyBUT0RPOiBkZWZlciBlcnJvciBldmVudHMgY29uc2lzdGVudGx5IGV2ZXJ5d2hlcmUsIG5vdCBqdXN0IHRoZSBjYlxuXG4gIGVycm9yT3JEZXN0cm95KHN0cmVhbSwgZXIpO1xuICBwcm9jZXNzLm5leHRUaWNrKGNiLCBlcik7XG59IC8vIENoZWNrcyB0aGF0IGEgdXNlci1zdXBwbGllZCBjaHVuayBpcyB2YWxpZCwgZXNwZWNpYWxseSBmb3IgdGhlIHBhcnRpY3VsYXJcbi8vIG1vZGUgdGhlIHN0cmVhbSBpcyBpbi4gQ3VycmVudGx5IHRoaXMgbWVhbnMgdGhhdCBgbnVsbGAgaXMgbmV2ZXIgYWNjZXB0ZWRcbi8vIGFuZCB1bmRlZmluZWQvbm9uLXN0cmluZyB2YWx1ZXMgYXJlIG9ubHkgYWxsb3dlZCBpbiBvYmplY3QgbW9kZS5cblxuXG5mdW5jdGlvbiB2YWxpZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBjYikge1xuICB2YXIgZXI7XG5cbiAgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgZXIgPSBuZXcgRVJSX1NUUkVBTV9OVUxMX1ZBTFVFUygpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlciA9IG5ldyBFUlJfSU5WQUxJRF9BUkdfVFlQRSgnY2h1bmsnLCBbJ3N0cmluZycsICdCdWZmZXInXSwgY2h1bmspO1xuICB9XG5cbiAgaWYgKGVyKSB7XG4gICAgZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBlcik7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhjYiwgZXIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5Xcml0YWJsZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuICB2YXIgcmV0ID0gZmFsc2U7XG5cbiAgdmFyIGlzQnVmID0gIXN0YXRlLm9iamVjdE1vZGUgJiYgX2lzVWludDhBcnJheShjaHVuayk7XG5cbiAgaWYgKGlzQnVmICYmICFCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSB7XG4gICAgY2h1bmsgPSBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGVuY29kaW5nO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfVxuXG4gIGlmIChpc0J1ZikgZW5jb2RpbmcgPSAnYnVmZmVyJztlbHNlIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSBjYiA9IG5vcDtcbiAgaWYgKHN0YXRlLmVuZGluZykgd3JpdGVBZnRlckVuZCh0aGlzLCBjYik7ZWxzZSBpZiAoaXNCdWYgfHwgdmFsaWRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssIGNiKSkge1xuICAgIHN0YXRlLnBlbmRpbmdjYisrO1xuICAgIHJldCA9IHdyaXRlT3JCdWZmZXIodGhpcywgc3RhdGUsIGlzQnVmLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLmNvcmsgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3dyaXRhYmxlU3RhdGUuY29ya2VkKys7XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUudW5jb3JrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIGlmIChzdGF0ZS5jb3JrZWQpIHtcbiAgICBzdGF0ZS5jb3JrZWQtLTtcbiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiYgIXN0YXRlLmNvcmtlZCAmJiAhc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyAmJiBzdGF0ZS5idWZmZXJlZFJlcXVlc3QpIGNsZWFyQnVmZmVyKHRoaXMsIHN0YXRlKTtcbiAgfVxufTtcblxuV3JpdGFibGUucHJvdG90eXBlLnNldERlZmF1bHRFbmNvZGluZyA9IGZ1bmN0aW9uIHNldERlZmF1bHRFbmNvZGluZyhlbmNvZGluZykge1xuICAvLyBub2RlOjpQYXJzZUVuY29kaW5nKCkgcmVxdWlyZXMgbG93ZXIgY2FzZS5cbiAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycpIGVuY29kaW5nID0gZW5jb2RpbmcudG9Mb3dlckNhc2UoKTtcbiAgaWYgKCEoWydoZXgnLCAndXRmOCcsICd1dGYtOCcsICdhc2NpaScsICdiaW5hcnknLCAnYmFzZTY0JywgJ3VjczInLCAndWNzLTInLCAndXRmMTZsZScsICd1dGYtMTZsZScsICdyYXcnXS5pbmRleE9mKChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpKSA+IC0xKSkgdGhyb3cgbmV3IEVSUl9VTktOT1dOX0VOQ09ESU5HKGVuY29kaW5nKTtcbiAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZWZhdWx0RW5jb2RpbmcgPSBlbmNvZGluZztcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUucHJvdG90eXBlLCAnd3JpdGFibGVCdWZmZXInLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyKCk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBkZWNvZGVDaHVuayhzdGF0ZSwgY2h1bmssIGVuY29kaW5nKSB7XG4gIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJiBzdGF0ZS5kZWNvZGVTdHJpbmdzICE9PSBmYWxzZSAmJiB0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7XG4gICAgY2h1bmsgPSBCdWZmZXIuZnJvbShjaHVuaywgZW5jb2RpbmcpO1xuICB9XG5cbiAgcmV0dXJuIGNodW5rO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUucHJvdG90eXBlLCAnd3JpdGFibGVIaWdoV2F0ZXJNYXJrJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICB9XG59KTsgLy8gaWYgd2UncmUgYWxyZWFkeSB3cml0aW5nIHNvbWV0aGluZywgdGhlbiBqdXN0IHB1dCB0aGlzXG4vLyBpbiB0aGUgcXVldWUsIGFuZCB3YWl0IG91ciB0dXJuLiAgT3RoZXJ3aXNlLCBjYWxsIF93cml0ZVxuLy8gSWYgd2UgcmV0dXJuIGZhbHNlLCB0aGVuIHdlIG5lZWQgYSBkcmFpbiBldmVudCwgc28gc2V0IHRoYXQgZmxhZy5cblxuZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBpc0J1ZiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBpZiAoIWlzQnVmKSB7XG4gICAgdmFyIG5ld0NodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7XG5cbiAgICBpZiAoY2h1bmsgIT09IG5ld0NodW5rKSB7XG4gICAgICBpc0J1ZiA9IHRydWU7XG4gICAgICBlbmNvZGluZyA9ICdidWZmZXInO1xuICAgICAgY2h1bmsgPSBuZXdDaHVuaztcbiAgICB9XG4gIH1cblxuICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG4gIHN0YXRlLmxlbmd0aCArPSBsZW47XG4gIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrOyAvLyB3ZSBtdXN0IGVuc3VyZSB0aGF0IHByZXZpb3VzIG5lZWREcmFpbiB3aWxsIG5vdCBiZSByZXNldCB0byBmYWxzZS5cblxuICBpZiAoIXJldCkgc3RhdGUubmVlZERyYWluID0gdHJ1ZTtcblxuICBpZiAoc3RhdGUud3JpdGluZyB8fCBzdGF0ZS5jb3JrZWQpIHtcbiAgICB2YXIgbGFzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7XG4gICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IHtcbiAgICAgIGNodW5rOiBjaHVuayxcbiAgICAgIGVuY29kaW5nOiBlbmNvZGluZyxcbiAgICAgIGlzQnVmOiBpc0J1ZixcbiAgICAgIGNhbGxiYWNrOiBjYixcbiAgICAgIG5leHQ6IG51bGxcbiAgICB9O1xuXG4gICAgaWYgKGxhc3QpIHtcbiAgICAgIGxhc3QubmV4dCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7XG4gICAgfVxuXG4gICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgKz0gMTtcbiAgfSBlbHNlIHtcbiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB3cml0ZXYsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBzdGF0ZS53cml0ZWxlbiA9IGxlbjtcbiAgc3RhdGUud3JpdGVjYiA9IGNiO1xuICBzdGF0ZS53cml0aW5nID0gdHJ1ZTtcbiAgc3RhdGUuc3luYyA9IHRydWU7XG4gIGlmIChzdGF0ZS5kZXN0cm95ZWQpIHN0YXRlLm9ud3JpdGUobmV3IEVSUl9TVFJFQU1fREVTVFJPWUVEKCd3cml0ZScpKTtlbHNlIGlmICh3cml0ZXYpIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZS5vbndyaXRlKTtlbHNlIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZS5vbndyaXRlKTtcbiAgc3RhdGUuc3luYyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKSB7XG4gIC0tc3RhdGUucGVuZGluZ2NiO1xuXG4gIGlmIChzeW5jKSB7XG4gICAgLy8gZGVmZXIgdGhlIGNhbGxiYWNrIGlmIHdlIGFyZSBiZWluZyBjYWxsZWQgc3luY2hyb25vdXNseVxuICAgIC8vIHRvIGF2b2lkIHBpbGluZyB1cCB0aGluZ3Mgb24gdGhlIHN0YWNrXG4gICAgcHJvY2Vzcy5uZXh0VGljayhjYiwgZXIpOyAvLyB0aGlzIGNhbiBlbWl0IGZpbmlzaCwgYW5kIGl0IHdpbGwgYWx3YXlzIGhhcHBlblxuICAgIC8vIGFmdGVyIGVycm9yXG5cbiAgICBwcm9jZXNzLm5leHRUaWNrKGZpbmlzaE1heWJlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTtcbiAgICBlcnJvck9yRGVzdHJveShzdHJlYW0sIGVyKTtcbiAgfSBlbHNlIHtcbiAgICAvLyB0aGUgY2FsbGVyIGV4cGVjdCB0aGlzIHRvIGhhcHBlbiBiZWZvcmUgaWZcbiAgICAvLyBpdCBpcyBhc3luY1xuICAgIGNiKGVyKTtcbiAgICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTtcbiAgICBlcnJvck9yRGVzdHJveShzdHJlYW0sIGVyKTsgLy8gdGhpcyBjYW4gZW1pdCBmaW5pc2gsIGJ1dCBmaW5pc2ggbXVzdFxuICAgIC8vIGFsd2F5cyBmb2xsb3cgZXJyb3JcblxuICAgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkge1xuICBzdGF0ZS53cml0aW5nID0gZmFsc2U7XG4gIHN0YXRlLndyaXRlY2IgPSBudWxsO1xuICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47XG4gIHN0YXRlLndyaXRlbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jO1xuICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiO1xuICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgRVJSX01VTFRJUExFX0NBTExCQUNLKCk7XG4gIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7XG4gIGlmIChlcikgb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYik7ZWxzZSB7XG4gICAgLy8gQ2hlY2sgaWYgd2UncmUgYWN0dWFsbHkgcmVhZHkgdG8gZmluaXNoLCBidXQgZG9uJ3QgZW1pdCB5ZXRcbiAgICB2YXIgZmluaXNoZWQgPSBuZWVkRmluaXNoKHN0YXRlKSB8fCBzdHJlYW0uZGVzdHJveWVkO1xuXG4gICAgaWYgKCFmaW5pc2hlZCAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkge1xuICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soYWZ0ZXJXcml0ZSwgc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikge1xuICBpZiAoIWZpbmlzaGVkKSBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7XG4gIHN0YXRlLnBlbmRpbmdjYi0tO1xuICBjYigpO1xuICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcbn0gLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3Rcbi8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm5cbi8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuXG5cblxuZnVuY3Rpb24gb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5uZWVkRHJhaW4pIHtcbiAgICBzdGF0ZS5uZWVkRHJhaW4gPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZHJhaW4nKTtcbiAgfVxufSAvLyBpZiB0aGVyZSdzIHNvbWV0aGluZyBpbiB0aGUgYnVmZmVyIHdhaXRpbmcsIHRoZW4gcHJvY2VzcyBpdFxuXG5cbmZ1bmN0aW9uIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpIHtcbiAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IHRydWU7XG4gIHZhciBlbnRyeSA9IHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdDtcblxuICBpZiAoc3RyZWFtLl93cml0ZXYgJiYgZW50cnkgJiYgZW50cnkubmV4dCkge1xuICAgIC8vIEZhc3QgY2FzZSwgd3JpdGUgZXZlcnl0aGluZyB1c2luZyBfd3JpdGV2KClcbiAgICB2YXIgbCA9IHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50O1xuICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXkobCk7XG4gICAgdmFyIGhvbGRlciA9IHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZTtcbiAgICBob2xkZXIuZW50cnkgPSBlbnRyeTtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHZhciBhbGxCdWZmZXJzID0gdHJ1ZTtcblxuICAgIHdoaWxlIChlbnRyeSkge1xuICAgICAgYnVmZmVyW2NvdW50XSA9IGVudHJ5O1xuICAgICAgaWYgKCFlbnRyeS5pc0J1ZikgYWxsQnVmZmVycyA9IGZhbHNlO1xuICAgICAgZW50cnkgPSBlbnRyeS5uZXh0O1xuICAgICAgY291bnQgKz0gMTtcbiAgICB9XG5cbiAgICBidWZmZXIuYWxsQnVmZmVycyA9IGFsbEJ1ZmZlcnM7XG4gICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB0cnVlLCBzdGF0ZS5sZW5ndGgsIGJ1ZmZlciwgJycsIGhvbGRlci5maW5pc2gpOyAvLyBkb1dyaXRlIGlzIGFsbW9zdCBhbHdheXMgYXN5bmMsIGRlZmVyIHRoZXNlIHRvIHNhdmUgYSBiaXQgb2YgdGltZVxuICAgIC8vIGFzIHRoZSBob3QgcGF0aCBlbmRzIHdpdGggZG9Xcml0ZVxuXG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG5cbiAgICBpZiAoaG9sZGVyLm5leHQpIHtcbiAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSA9IGhvbGRlci5uZXh0O1xuICAgICAgaG9sZGVyLm5leHQgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdChzdGF0ZSk7XG4gICAgfVxuXG4gICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFNsb3cgY2FzZSwgd3JpdGUgY2h1bmtzIG9uZS1ieS1vbmVcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIHZhciBjaHVuayA9IGVudHJ5LmNodW5rO1xuICAgICAgdmFyIGVuY29kaW5nID0gZW50cnkuZW5jb2Rpbmc7XG4gICAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjaztcbiAgICAgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcbiAgICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7XG4gICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudC0tOyAvLyBpZiB3ZSBkaWRuJ3QgY2FsbCB0aGUgb253cml0ZSBpbW1lZGlhdGVseSwgdGhlblxuICAgICAgLy8gaXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHdhaXQgdW50aWwgaXQgZG9lcy5cbiAgICAgIC8vIGFsc28sIHRoYXQgbWVhbnMgdGhhdCB0aGUgY2h1bmsgYW5kIGNiIGFyZSBjdXJyZW50bHlcbiAgICAgIC8vIGJlaW5nIHByb2Nlc3NlZCwgc28gbW92ZSB0aGUgYnVmZmVyIGNvdW50ZXIgcGFzdCB0aGVtLlxuXG4gICAgICBpZiAoc3RhdGUud3JpdGluZykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZW50cnkgPT09IG51bGwpIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsO1xuICB9XG5cbiAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gZW50cnk7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNiKG5ldyBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCgnX3dyaXRlKCknKSk7XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuX3dyaXRldiA9IG51bGw7XG5cbldyaXRhYmxlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIGlmICh0eXBlb2YgY2h1bmsgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGNodW5rO1xuICAgIGNodW5rID0gbnVsbDtcbiAgICBlbmNvZGluZyA9IG51bGw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBlbmNvZGluZztcbiAgICBlbmNvZGluZyA9IG51bGw7XG4gIH1cblxuICBpZiAoY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCkgdGhpcy53cml0ZShjaHVuaywgZW5jb2RpbmcpOyAvLyAuZW5kKCkgZnVsbHkgdW5jb3Jrc1xuXG4gIGlmIChzdGF0ZS5jb3JrZWQpIHtcbiAgICBzdGF0ZS5jb3JrZWQgPSAxO1xuICAgIHRoaXMudW5jb3JrKCk7XG4gIH0gLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLlxuXG5cbiAgaWYgKCFzdGF0ZS5lbmRpbmcpIGVuZFdyaXRhYmxlKHRoaXMsIHN0YXRlLCBjYik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlLnByb3RvdHlwZSwgJ3dyaXRhYmxlTGVuZ3RoJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5sZW5ndGg7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBuZWVkRmluaXNoKHN0YXRlKSB7XG4gIHJldHVybiBzdGF0ZS5lbmRpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLndyaXRpbmc7XG59XG5cbmZ1bmN0aW9uIGNhbGxGaW5hbChzdHJlYW0sIHN0YXRlKSB7XG4gIHN0cmVhbS5fZmluYWwoZnVuY3Rpb24gKGVycikge1xuICAgIHN0YXRlLnBlbmRpbmdjYi0tO1xuXG4gICAgaWYgKGVycikge1xuICAgICAgZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBlcnIpO1xuICAgIH1cblxuICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0uZW1pdCgncHJlZmluaXNoJyk7XG4gICAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnByZWZpbmlzaGVkICYmICFzdGF0ZS5maW5hbENhbGxlZCkge1xuICAgIGlmICh0eXBlb2Ygc3RyZWFtLl9maW5hbCA9PT0gJ2Z1bmN0aW9uJyAmJiAhc3RhdGUuZGVzdHJveWVkKSB7XG4gICAgICBzdGF0ZS5wZW5kaW5nY2IrKztcbiAgICAgIHN0YXRlLmZpbmFsQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soY2FsbEZpbmFsLCBzdHJlYW0sIHN0YXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUucHJlZmluaXNoZWQgPSB0cnVlO1xuICAgICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKSB7XG4gIHZhciBuZWVkID0gbmVlZEZpbmlzaChzdGF0ZSk7XG5cbiAgaWYgKG5lZWQpIHtcbiAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG5cbiAgICBpZiAoc3RhdGUucGVuZGluZ2NiID09PSAwKSB7XG4gICAgICBzdGF0ZS5maW5pc2hlZCA9IHRydWU7XG4gICAgICBzdHJlYW0uZW1pdCgnZmluaXNoJyk7XG5cbiAgICAgIGlmIChzdGF0ZS5hdXRvRGVzdHJveSkge1xuICAgICAgICAvLyBJbiBjYXNlIG9mIGR1cGxleCBzdHJlYW1zIHdlIG5lZWQgYSB3YXkgdG8gZGV0ZWN0XG4gICAgICAgIC8vIGlmIHRoZSByZWFkYWJsZSBzaWRlIGlzIHJlYWR5IGZvciBhdXRvRGVzdHJveSBhcyB3ZWxsXG4gICAgICAgIHZhciByU3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cbiAgICAgICAgaWYgKCFyU3RhdGUgfHwgclN0YXRlLmF1dG9EZXN0cm95ICYmIHJTdGF0ZS5lbmRFbWl0dGVkKSB7XG4gICAgICAgICAgc3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZWVkO1xufVxuXG5mdW5jdGlvbiBlbmRXcml0YWJsZShzdHJlYW0sIHN0YXRlLCBjYikge1xuICBzdGF0ZS5lbmRpbmcgPSB0cnVlO1xuICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcblxuICBpZiAoY2IpIHtcbiAgICBpZiAoc3RhdGUuZmluaXNoZWQpIHByb2Nlc3MubmV4dFRpY2soY2IpO2Vsc2Ugc3RyZWFtLm9uY2UoJ2ZpbmlzaCcsIGNiKTtcbiAgfVxuXG4gIHN0YXRlLmVuZGVkID0gdHJ1ZTtcbiAgc3RyZWFtLndyaXRhYmxlID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIG9uQ29ya2VkRmluaXNoKGNvcmtSZXEsIHN0YXRlLCBlcnIpIHtcbiAgdmFyIGVudHJ5ID0gY29ya1JlcS5lbnRyeTtcbiAgY29ya1JlcS5lbnRyeSA9IG51bGw7XG5cbiAgd2hpbGUgKGVudHJ5KSB7XG4gICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7XG4gICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgY2IoZXJyKTtcbiAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gIH0gLy8gcmV1c2UgdGhlIGZyZWUgY29ya1JlcS5cblxuXG4gIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gY29ya1JlcTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlLnByb3RvdHlwZSwgJ2Rlc3Ryb3llZCcsIHtcbiAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGVcbiAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluXG4gIC8vIHVzZXJsYW5kIHdpbGwgZmFpbFxuICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZDtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAvLyB3ZSBpZ25vcmUgdGhlIHZhbHVlIGlmIHRoZSBzdHJlYW1cbiAgICAvLyBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgeWV0XG4gICAgaWYgKCF0aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LCB0aGUgdXNlciBpcyBleHBsaWNpdGx5XG4gICAgLy8gbWFuYWdpbmcgZGVzdHJveWVkXG5cblxuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gIH1cbn0pO1xuV3JpdGFibGUucHJvdG90eXBlLmRlc3Ryb3kgPSBkZXN0cm95SW1wbC5kZXN0cm95O1xuV3JpdGFibGUucHJvdG90eXBlLl91bmRlc3Ryb3kgPSBkZXN0cm95SW1wbC51bmRlc3Ryb3k7XG5cbldyaXRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNiKSB7XG4gIGNiKGVycik7XG59OyIsImNvbnN0IGNvbW1vbmpzUmVnaXN0ZXIgPSByZXF1aXJlKCdcdTAwMDBjb21tb25qc0hlbHBlcnMuanM/Y29tbW9uanNSZWdpc3RlcicpO1xuY29tbW9uanNSZWdpc3RlcihcIi8kJHJvbGx1cF9iYXNlJCQvbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9kdXBsZXguanNcIiwgZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykge1xuICAvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbi8vIGEgZHVwbGV4IHN0cmVhbSBpcyBqdXN0IGEgc3RyZWFtIHRoYXQgaXMgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUuXG4vLyBTaW5jZSBKUyBkb2Vzbid0IGhhdmUgbXVsdGlwbGUgcHJvdG90eXBhbCBpbmhlcml0YW5jZSwgdGhpcyBjbGFzc1xuLy8gcHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gUmVhZGFibGUsIGFuZCB0aGVuIHBhcmFzaXRpY2FsbHkgZnJvbVxuLy8gV3JpdGFibGUuXG4ndXNlIHN0cmljdCc7XG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIGtleXMgPSBbXTtcblxuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAga2V5cy5wdXNoKGtleSk7XG4gIH1cblxuICByZXR1cm4ga2V5cztcbn07XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG5tb2R1bGUuZXhwb3J0cyA9IER1cGxleDtcblxudmFyIFJlYWRhYmxlID0gcmVxdWlyZSgnLi9fc3RyZWFtX3JlYWRhYmxlJyk7XG5cbnZhciBXcml0YWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV93cml0YWJsZScpO1xuXG5yZXF1aXJlKCdpbmhlcml0cycpKER1cGxleCwgUmVhZGFibGUpO1xuXG57XG4gIC8vIEFsbG93IHRoZSBrZXlzIGFycmF5IHRvIGJlIEdDJ2VkLlxuICB2YXIga2V5cyA9IG9iamVjdEtleXMoV3JpdGFibGUucHJvdG90eXBlKTtcblxuICBmb3IgKHZhciB2ID0gMDsgdiA8IGtleXMubGVuZ3RoOyB2KyspIHtcbiAgICB2YXIgbWV0aG9kID0ga2V5c1t2XTtcbiAgICBpZiAoIUR1cGxleC5wcm90b3R5cGVbbWV0aG9kXSkgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07XG4gIH1cbn1cblxuZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpIHJldHVybiBuZXcgRHVwbGV4KG9wdGlvbnMpO1xuICBSZWFkYWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICBXcml0YWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICB0aGlzLmFsbG93SGFsZk9wZW4gPSB0cnVlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMucmVhZGFibGUgPT09IGZhbHNlKSB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG4gICAgaWYgKG9wdGlvbnMud3JpdGFibGUgPT09IGZhbHNlKSB0aGlzLndyaXRhYmxlID0gZmFsc2U7XG5cbiAgICBpZiAob3B0aW9ucy5hbGxvd0hhbGZPcGVuID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7XG4gICAgICB0aGlzLm9uY2UoJ2VuZCcsIG9uZW5kKTtcbiAgICB9XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KER1cGxleC5wcm90b3R5cGUsICd3cml0YWJsZUhpZ2hXYXRlck1hcmsnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmhpZ2hXYXRlck1hcms7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KER1cGxleC5wcm90b3R5cGUsICd3cml0YWJsZUJ1ZmZlcicsIHtcbiAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGVcbiAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluXG4gIC8vIHVzZXJsYW5kIHdpbGwgZmFpbFxuICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUgJiYgdGhpcy5fd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIoKTtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRHVwbGV4LnByb3RvdHlwZSwgJ3dyaXRhYmxlTGVuZ3RoJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5sZW5ndGg7XG4gIH1cbn0pOyAvLyB0aGUgbm8taGFsZi1vcGVuIGVuZm9yY2VyXG5cbmZ1bmN0aW9uIG9uZW5kKCkge1xuICAvLyBJZiB0aGUgd3JpdGFibGUgc2lkZSBlbmRlZCwgdGhlbiB3ZSdyZSBvay5cbiAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQpIHJldHVybjsgLy8gbm8gbW9yZSBkYXRhIGNhbiBiZSB3cml0dGVuLlxuICAvLyBCdXQgYWxsb3cgbW9yZSB3cml0ZXMgdG8gaGFwcGVuIGluIHRoaXMgdGljay5cblxuICBwcm9jZXNzLm5leHRUaWNrKG9uRW5kTlQsIHRoaXMpO1xufVxuXG5mdW5jdGlvbiBvbkVuZE5UKHNlbGYpIHtcbiAgc2VsZi5lbmQoKTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KER1cGxleC5wcm90b3R5cGUsICdkZXN0cm95ZWQnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlID09PSB1bmRlZmluZWQgfHwgdGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgIC8vIHdlIGlnbm9yZSB0aGUgdmFsdWUgaWYgdGhlIHN0cmVhbVxuICAgIC8vIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCB5ZXRcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuXG5cbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHZhbHVlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gIH1cbn0pO1xufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgVGlueUVtaXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFRpbnlFbWl0dGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUaW55RW1pdHRlcik7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ19fbGlzdGVuZXJzJywge1xuICAgICAgdmFsdWU6IHt9LFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogZmFsc2VcbiAgICB9KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhUaW55RW1pdHRlciwgW3tcbiAgICBrZXk6ICdlbWl0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdChldmVudE5hbWUpIHtcbiAgICAgIGlmICghdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdKSByZXR1cm4gdGhpcztcblxuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdGhpcy5fX2xpc3RlbmVyc1tldmVudE5hbWVdW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgIHZhciBoYW5kbGVyID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICBoYW5kbGVyLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbmNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25jZShldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHZhciBvbmNlID0gZnVuY3Rpb24gb25jZSgpIHtcbiAgICAgICAgX3RoaXMub2ZmKGV2ZW50TmFtZSwgb25jZSk7XG4gICAgICAgIGhhbmRsZXIuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHRoaXMub24oZXZlbnROYW1lLCBvbmNlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uKGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgICAgaWYgKCF0aGlzLl9fbGlzdGVuZXJzW2V2ZW50TmFtZV0pIHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdO1xuXG4gICAgICB0aGlzLl9fbGlzdGVuZXJzW2V2ZW50TmFtZV0ucHVzaChoYW5kbGVyKTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb2ZmJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmKGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgICAgaWYgKGhhbmRsZXIpIHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSA9IHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXS5maWx0ZXIoZnVuY3Rpb24gKGgpIHtcbiAgICAgICAgcmV0dXJuIGggIT09IGhhbmRsZXI7XG4gICAgICB9KTtlbHNlIHRoaXMuX19saXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVGlueUVtaXR0ZXI7XG59KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gVGlueUVtaXR0ZXI7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2dldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgeyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgcmV0dXJuIGdldChwYXJlbnQsIHByb3BlcnR5LCByZWNlaXZlcik7IH0gfSBlbHNlIGlmIChcInZhbHVlXCIgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH07XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIFRpbnlFbWl0dGVyID0gcmVxdWlyZSgnLi90aW55LWVtaXR0ZXInKTtcblxudmFyIE1FU1NBR0VfUkVTVUxUID0gMDtcbnZhciBNRVNTQUdFX0VWRU5UID0gMTtcblxudmFyIFJFU1VMVF9FUlJPUiA9IDA7XG52YXIgUkVTVUxUX1NVQ0NFU1MgPSAxO1xuXG52YXIgREVGQVVMVF9IQU5ETEVSID0gJ21haW4nO1xuXG52YXIgaXNQcm9taXNlID0gZnVuY3Rpb24gaXNQcm9taXNlKG8pIHtcbiAgcmV0dXJuICh0eXBlb2YgbyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YobykpID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygby50aGVuID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvLmNhdGNoID09PSAnZnVuY3Rpb24nO1xufTtcblxuZnVuY3Rpb24gUmVnaXN0ZXJQcm9taXNlKGZuKSB7XG4gIHZhciBoYW5kbGVycyA9IF9kZWZpbmVQcm9wZXJ0eSh7fSwgREVGQVVMVF9IQU5ETEVSLCBmbik7XG4gIHZhciBzZW5kUG9zdE1lc3NhZ2UgPSBzZWxmLnBvc3RNZXNzYWdlLmJpbmQoc2VsZik7XG5cbiAgdmFyIHNlcnZlciA9IG5ldyAoZnVuY3Rpb24gKF9UaW55RW1pdHRlcikge1xuICAgIF9pbmhlcml0cyhXb3JrZXJSZWdpc3RlciwgX1RpbnlFbWl0dGVyKTtcblxuICAgIGZ1bmN0aW9uIFdvcmtlclJlZ2lzdGVyKCkge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdvcmtlclJlZ2lzdGVyKTtcblxuICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChXb3JrZXJSZWdpc3Rlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFdvcmtlclJlZ2lzdGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFdvcmtlclJlZ2lzdGVyLCBbe1xuICAgICAga2V5OiAnZW1pdCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZW1pdChldmVudE5hbWUpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICBzZW5kUG9zdE1lc3NhZ2UoeyBldmVudE5hbWU6IGV2ZW50TmFtZSwgYXJnczogYXJncyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnZW1pdExvY2FsbHknLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVtaXRMb2NhbGx5KGV2ZW50TmFtZSkge1xuICAgICAgICB2YXIgX2dldDI7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIgPiAxID8gX2xlbjIgLSAxIDogMCksIF9rZXkyID0gMTsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICAgIGFyZ3NbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICAgIH1cblxuICAgICAgICAoX2dldDIgPSBfZ2V0KFdvcmtlclJlZ2lzdGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFdvcmtlclJlZ2lzdGVyLnByb3RvdHlwZSksICdlbWl0JywgdGhpcykpLmNhbGwuYXBwbHkoX2dldDIsIFt0aGlzLCBldmVudE5hbWVdLmNvbmNhdChhcmdzKSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnb3BlcmF0aW9uJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVyYXRpb24obmFtZSwgaGFuZGxlcikge1xuICAgICAgICBoYW5kbGVyc1tuYW1lXSA9IGhhbmRsZXI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBXb3JrZXJSZWdpc3RlcjtcbiAgfShUaW55RW1pdHRlcikpKCk7XG5cbiAgdmFyIHJ1biA9IGZ1bmN0aW9uIHJ1bihtZXNzYWdlSWQsIHBheWxvYWQsIGhhbmRsZXJOYW1lKSB7XG5cbiAgICB2YXIgb25TdWNjZXNzID0gZnVuY3Rpb24gb25TdWNjZXNzKHJlc3VsdCkge1xuICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQgaW5zdGFuY2VvZiBUcmFuc2ZlcmFibGVSZXNwb25zZSkge1xuICAgICAgICBzZW5kUmVzdWx0KG1lc3NhZ2VJZCwgUkVTVUxUX1NVQ0NFU1MsIHJlc3VsdC5wYXlsb2FkLCByZXN1bHQudHJhbnNmZXJhYmxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbmRSZXN1bHQobWVzc2FnZUlkLCBSRVNVTFRfU1VDQ0VTUywgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKGUpIHtcbiAgICAgIHNlbmRSZXN1bHQobWVzc2FnZUlkLCBSRVNVTFRfRVJST1IsIHtcbiAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgICBzdGFjazogZS5zdGFja1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICB2YXIgcmVzdWx0ID0gcnVuRm4obWVzc2FnZUlkLCBwYXlsb2FkLCBoYW5kbGVyTmFtZSk7XG4gICAgICBpZiAoaXNQcm9taXNlKHJlc3VsdCkpIHtcbiAgICAgICAgcmVzdWx0LnRoZW4ob25TdWNjZXNzKS5jYXRjaChvbkVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9uU3VjY2VzcyhyZXN1bHQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG9uRXJyb3IoZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBydW5GbiA9IGZ1bmN0aW9uIHJ1bkZuKG1lc3NhZ2VJZCwgcGF5bG9hZCwgaGFuZGxlck5hbWUpIHtcbiAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2hhbmRsZXJOYW1lIHx8IERFRkFVTFRfSEFORExFUl07XG4gICAgaWYgKCFoYW5kbGVyKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBmb3VuZCBoYW5kbGVyIGZvciB0aGlzIHJlcXVlc3QnKTtcblxuICAgIHJldHVybiBoYW5kbGVyKHBheWxvYWQsIHNlbmRFdmVudC5iaW5kKG51bGwsIG1lc3NhZ2VJZCkpO1xuICB9O1xuXG4gIHZhciBzZW5kUmVzdWx0ID0gZnVuY3Rpb24gc2VuZFJlc3VsdChtZXNzYWdlSWQsIHN1Y2Nlc3MsIHBheWxvYWQpIHtcbiAgICB2YXIgdHJhbnNmZXJhYmxlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBbXTtcblxuICAgIHNlbmRQb3N0TWVzc2FnZShbTUVTU0FHRV9SRVNVTFQsIG1lc3NhZ2VJZCwgc3VjY2VzcywgcGF5bG9hZF0sIHRyYW5zZmVyYWJsZSk7XG4gIH07XG5cbiAgdmFyIHNlbmRFdmVudCA9IGZ1bmN0aW9uIHNlbmRFdmVudChtZXNzYWdlSWQsIGV2ZW50TmFtZSwgcGF5bG9hZCkge1xuICAgIGlmICghZXZlbnROYW1lKSB0aHJvdyBuZXcgRXJyb3IoJ2V2ZW50TmFtZSBpcyByZXF1aXJlZCcpO1xuXG4gICAgaWYgKHR5cGVvZiBldmVudE5hbWUgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgRXJyb3IoJ2V2ZW50TmFtZSBzaG91bGQgYmUgc3RyaW5nJyk7XG5cbiAgICBzZW5kUG9zdE1lc3NhZ2UoW01FU1NBR0VfRVZFTlQsIG1lc3NhZ2VJZCwgZXZlbnROYW1lLCBwYXlsb2FkXSk7XG4gIH07XG5cbiAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICBydW4uYXBwbHkodW5kZWZpbmVkLCBfdG9Db25zdW1hYmxlQXJyYXkoZGF0YSkpO1xuICAgIH0gZWxzZSBpZiAoZGF0YSAmJiBkYXRhLmV2ZW50TmFtZSkge1xuICAgICAgc2VydmVyLmVtaXRMb2NhbGx5LmFwcGx5KHNlcnZlciwgW2RhdGEuZXZlbnROYW1lXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEuYXJncykpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBzZXJ2ZXI7XG59XG5cbnZhciBUcmFuc2ZlcmFibGVSZXNwb25zZSA9IGZ1bmN0aW9uIFRyYW5zZmVyYWJsZVJlc3BvbnNlKHBheWxvYWQsIHRyYW5zZmVyYWJsZSkge1xuICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHJhbnNmZXJhYmxlUmVzcG9uc2UpO1xuXG4gIHRoaXMucGF5bG9hZCA9IHBheWxvYWQ7XG4gIHRoaXMudHJhbnNmZXJhYmxlID0gdHJhbnNmZXJhYmxlO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWdpc3RlclByb21pc2U7XG5tb2R1bGUuZXhwb3J0cy5UcmFuc2ZlcmFibGVSZXNwb25zZSA9IFRyYW5zZmVyYWJsZVJlc3BvbnNlOyIsImltcG9ydCByZWdpc3RlcldlYndvcmtlciBmcm9tICd3ZWJ3b3JrZXItcHJvbWlzZS9saWIvcmVnaXN0ZXInO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLy8gcHJldHRpZXItaWdub3JlXG5yZWdpc3RlcldlYndvcmtlcihmdW5jdGlvbiAobWVzc2FnZSwgZW1pdCkge1xuICB2YXIgYXJyYXkgPSBtZXNzYWdlLmFycmF5O1xuICB2YXIgbWluID0gbWVzc2FnZS5taW47XG4gIHZhciBtYXggPSBtZXNzYWdlLm1heDtcblxuICB2YXIgb2Zmc2V0ID0gbWVzc2FnZS5jb21wb25lbnQgfHwgMDtcbiAgdmFyIHN0ZXAgPSBtZXNzYWdlLm51bWJlck9mQ29tcG9uZW50cyB8fCAxO1xuXG4gIHZhciBudW1iZXJPZkJpbnMgPSBtZXNzYWdlLm51bWJlck9mQmlucztcbiAgdmFyIGRlbHRhID0gbWF4IC0gbWluO1xuICB2YXIgaGlzdG9ncmFtID0gbmV3IEZsb2F0MzJBcnJheShudW1iZXJPZkJpbnMpO1xuICBoaXN0b2dyYW0uZmlsbCgwKTtcbiAgdmFyIGxlbiA9IGFycmF5Lmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IG9mZnNldDsgaSA8IGxlbjsgaSArPSBzdGVwKSB7XG4gICAgdmFyIGlkeCA9IE1hdGguZmxvb3IoXG4gICAgICAobnVtYmVyT2ZCaW5zIC0gMSkgKiAoTnVtYmVyKGFycmF5W2ldKSAtIG1pbikgLyBkZWx0YVxuICAgICk7XG4gICAgaGlzdG9ncmFtW2lkeF0gKz0gMTtcbiAgfVxuXG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoXG4gICAgbmV3IHJlZ2lzdGVyV2Vid29ya2VyLlRyYW5zZmVyYWJsZVJlc3BvbnNlKGhpc3RvZ3JhbSwgW2hpc3RvZ3JhbS5idWZmZXJdKVxuICApO1xufSk7XG4iXSwibmFtZXMiOlsicmVxdWlyZSQkMCIsImJhc2U2NCIsIl9yZXF1aXJlIiwiX3JlcXVpcmUyIiwiQnVmZmVyIiwib25jZSIsIl9kZWZpbmVQcm9wZXJ0eSIsImZpbmlzaGVkIiwicmVxdWlyZSQkMSIsImdsb2JhbCIsImdldEhpZ2hXYXRlck1hcmsiLCJyZXF1aXJlJCQyIiwiU3RyaW5nRGVjb2RlciIsImNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvciIsInJlcXVpcmUkJDMiLCJTdHJlYW0iLCJlcnJvck9yRGVzdHJveSIsImRlc3Ryb3lJbXBsIiwiY29tbW9uanNIZWxwZXJzLmNvbW1vbmpzUmVxdWlyZSIsIkJ1ZmZlckxpc3QiLCJyZXF1aXJlJCQ0IiwicmVxdWlyZSQkNSIsInJlcXVpcmUkJDYiLCJEdXBsZXgiLCJPdXJVaW50OEFycmF5IiwiX3VpbnQ4QXJyYXlUb0J1ZmZlciIsIl9pc1VpbnQ4QXJyYXkiLCJfcmVxdWlyZSRjb2RlcyIsIkVSUl9JTlZBTElEX0FSR19UWVBFIiwiRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQiLCJfY3JlYXRlQ2xhc3MiLCJfY2xhc3NDYWxsQ2hlY2siLCJUaW55RW1pdHRlciIsInJlZ2lzdGVyV2Vid29ya2VyIiwibWVzc2FnZSIsImVtaXQiLCJhcnJheSIsIm1pbiIsIm1heCIsIm9mZnNldCIsImNvbXBvbmVudCIsInN0ZXAiLCJudW1iZXJPZkNvbXBvbmVudHMiLCJudW1iZXJPZkJpbnMiLCJkZWx0YSIsImhpc3RvZ3JhbSIsIkZsb2F0MzJBcnJheSIsImZpbGwiLCJsZW4iLCJsZW5ndGgiLCJpIiwiaWR4IiwiTWF0aCIsImZsb29yIiwiTnVtYmVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJUcmFuc2ZlcmFibGVSZXNwb25zZSIsImJ1ZmZlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQUFBO0FBc0JBO0NB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QyxDQUFDLElBQUksQ0FBQztDQUN4QyxPQUFPLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBQztDQUM3QyxJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxLQUFJO0NBQy9CLEdBQUc7QUFDSDtDQUNBLEVBQUUsSUFBSSxlQUFlLEtBQUssQ0FBQyxFQUFFO0NBQzdCLElBQUksR0FBRztDQUNQLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUU7Q0FDekMsT0FBTyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDN0MsT0FBTyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUM7Q0FDN0MsSUFBSSxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksS0FBSTtDQUN0QyxJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxLQUFJO0NBQy9CLEdBQUc7QUFDSDtDQUNBLEVBQUUsT0FBTyxHQUFHO0NBQ1osQ0FBQztBQUNEO0NBQ0EsU0FBUyxlQUFlLEVBQUUsR0FBRyxFQUFFO0NBQy9CLEVBQUUsT0FBTyxNQUFNLENBQUMsR0FBRyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7Q0FDakMsSUFBSSxNQUFNLENBQUMsR0FBRyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7Q0FDNUIsSUFBSSxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7Q0FDM0IsSUFBSSxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztDQUN0QixDQUFDO0FBQ0Q7Q0FDQSxTQUFTLFdBQVcsRUFBRSxLQUFL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QUUsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUM7Q0FDNUIsRUFBRSxJQUFJLEtBQUssR0FBRyxJQUFJLElBQUksRUFBQztDQUN2QixFQUFFLElBQUksS0FBSyxHQUFHLENBQUMsRUFBQztDQUNoQixFQUFFLElBQUksQ0FBQyxHQUFHLElBQUksSUFBSSxNQUFNLEdBQUcsQ0FBQyxJQUFJLEVBQUM7Q0FDakMsRUFBRSxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBQztDQUN2QixFQUFFLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFDO0FBQzVCO0NBQ0EsRUFBRSxDQUFDLElBQUksRUFBQztBQUNSO0NBQ0EsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFDO0NBQy9CLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFDO0NBQ2hCLEVBQUUsS0FBSyxJQUFJLEtBQUk7Q0FDZixFQUFFLE9BQU8sS0FBSyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxFQUFFLEVBQUU7QUFDOUU7Q0FDQSxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUM7Q0FDL0IsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUM7Q0FDaEIsRUFBRSxLQUFLLElBQUksS0FBSTtDQUNmLEVBQUUsT0FBTyxLQUFLLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUUsRUFBRTtBQUM5RTtDQUNBLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO0NBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQUs7Q0FDakIsR0FBRyxNQUFNLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRTtDQUN6QixJQUFJLE9BQU8sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksUUFBUSxDQUFDO0NBQzlDLEdBQUcsTUFBTTtDQUNULElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUM7Q0FDN0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQUs7Q0FDakIsR0FBRztDQUNILEVBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM7Q0FDakQsRUFBQztBQUNEO0NBQ0EsU0FBYSxHQUFHLFVBQVUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUU7Q0FDckUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBQztDQUNiLEVBQUUsSUFBSSxJQUFJLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLElBQUksR0FBRyxFQUFDO0NBQ3BDLEVBQUUsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUM7Q0FDNUIsRUFBRSxJQUFJLEtBQUssR0FBRyxJQUFJLElBQUksRUFBQztDQUN2QixFQUFFLElBQUksRUFBRSxJQUFJLElBQUksS0FBSyxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUs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UyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFDO0NBQ2hDLFVBQVUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLE1BQU0sSUFBSSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksTUFBTSxJQUFJLEVBQUU7Q0FDM0UsWUFBWSxhQUFhLEdBQUcsQ0FBQyxTQUFTLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLFVBQVUsR0FBRyxJQUFJLEtBQUssR0FBRyxJQUFJLFNBQVMsR0FBRyxJQUFJLEVBQUM7Q0FDdEcsWUFBWSxJQUFJLGFBQWEsR0FBRyxLQUFLLEtBQUssYUFBYSxHQUFHLE1BQU0sSUFBSSxhQUFhLEdBQUcsTUFBTSxDQUFDLEVBQUU7Q0FDN0YsY0FBYyxTQUFTLEdBQUcsY0FBYTtDQUN2QyxhQUFhO0NBQ2IsV0FBVztDQUNYLFVBQVUsS0FBSztDQUNmLFFBQVEsS0FBSyxDQUFDO0NBQ2QsVUFBVSxVQUFVLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUM7Q0FDakMsVUFBVSxTQUFTLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUM7Q0FDaEMsVUFBVSxVQUFVLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUM7Q0FDakMsVUFBVSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksTUFBTSxJQUFJLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxNQUFNLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLE1BQU0sSUFBSSxFQUFFO0NBQzNHLFlBQVksYUFBYSxHQUFHLENBQUMsU0FBUyxHQUFHLEdBQUcsS0FBSyxJQUFJLEdBQUcsQ0FBQyxVQUFVLEdBQUcsSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLFNBQVMsR0FBRyxJQUFJLEtBQUssR0FBRyxJQUFJLFVBQVUsR0FBRyxJQUFJLEVBQUM7Q0FDcEksWUFBWSxJQUFJLGFBQWEsR0FBRyxNQUFNLElBQUksYUFBYSxHQUFHLFFBQVEsRUFBRTtDQUNwRSxjQUFjLFNBQVMsR0FBRyxjQUFhO0NB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TUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUU7Q0FDckMsSUFBSSxJQUFJLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRTtDQUM1QixJQUFJLElBQUksQ0FBQyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDO0NBQzNCLElBQUksS0FBSTtBQUNSO0NBQ0EsRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxNQUFNLENBQUMsRUFBRSxDQUFDO0NBQ2hELENBQUMsRUFBQztBQUNGO0NBQ0EsTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsU0FBUyxTQUFTLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUU7Q0FDL0UsRUFBRSxNQUFNLEdBQUcsTUFBTSxLQUFLLEVBQUM7Q0FDdkIsRUFBRSxVQUFVLEdBQUcsVUFBVSxLQUFLLEVBQUM7Q0FDL0IsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUM7QUFDN0Q7Q0FDQSxFQUFFLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUM7Q0FDeEIsRUFBRSxJQUFJLEdBQUcsR0FBRyxFQUFDO0NBQ2IsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFDO0NBQ1gsRUFBRSxPQUFPLEVBQUUsQ0FBQyxHQUFHLFVBQVUsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEVBQUU7Q0FDN0MsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFHO0NBQ2pDLEdBQUc7Q0FDSCxFQUFFLEdBQUcsSUFBSSxLQUFJO0FBQ2I7Q0FDQSxFQUFFLElBQUksR0FBRyxJQUFJLEdBQUcsRUFBRSxHQUFHLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsRUFBQztBQUNwRDtDQUNBLEVBQUUsT0FBTyxHQUFHO0NBQ1osRUFBQztBQUNEO0NBQ0EsTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsU0FBUyxTQUFTLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUU7Q0FDL0UsRUFBRSxNQUFNLEdBQUcsTUFBTSxLQUFLLEVBQUM7Q0FDdkIsRUFBRSxVQUFVLEdBQUcsVUFBVSxLQUFLLEVBQUM7Q0FDL0IsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUM7QUFDN0Q7Q0FDQSxFQUFFLElBQUksQ0FBQyxHQUFHLFdBQVU7Q0FDcEIsRUFBRSxJQUFJLEdBQUcsR0FBRyxFQUFDO0NBQ2IsRUFBRSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxFQUFDO0NBQzlCLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsRUFBRTtDQUNsQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBRztDQUNuQyxHQUFHO0NBQ0gsRUFBRSxHQUFHLElBQUksS0FBSTtBQUNiO0NBQ0EsRUFBRSxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQUUsR0FBRyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLEVBQUM7QUFDcEQ7Q0FDQSxFQUFFLE9BQU8sR0FBRztDQUNaLEVBQUM7QUFDRDtDQUNBLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLFNBQVMsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUU7Q0FDakUsRUFBRSxNQUFNLEdBQUcsTUFBTSxLQUFLLEVBQUM7Q0FDdkIsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLEVB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QUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7Q0FDdkQsRUFBRSxVQUFVLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUM7QUFDN0M7Q0FDQSxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFDO0NBQzdDLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRTtDQUNwQixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBQztDQUNkLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRTtDQUNwQixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBQztDQUNkLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRTtDQUNwQixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBQztDQUNkLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRTtDQUNwQixFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBQztDQUMzRCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUU7Q0FDcEIsRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUM7Q0FDZCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUU7Q0FDcEIsRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUM7Q0FDZCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUU7Q0FDcEIsRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUM7Q0FDZCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUU7Q0FDcEIsRUFBRSxPQUFPLE1BQU07Q0FDZixDQUFDO0FBQ0Q7Q0FDQSxTQUFTLGNBQWMsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFO0NBQ3ZELEVBQUUsVUFBVSxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFDO0FBQzdDO0NBQ0EsRUFBRSxJQUFJLEVBQUUsR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBQztDQUM3QyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRTtDQUN0QixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBQztDQUNkLEVBQUUsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFFO0NBQ3RCLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFDO0NBQ2QsRUFBRSxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUU7Q0FDdEIsRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUM7Q0FDZCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRTtDQUN0QixFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBQztDQUMzRCxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRTtDQUN0QixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBQztDQUNkLEVBQUUsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFFO0NBQ3RCLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFDO0NBQ2QsRUFBRSxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUU7Q0FDdEIsRUFBRSxFQUFFLEdBQUcsRUFB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S0FBSyxHQUFHLFNBQVMsS0FBSyxHQUFHO0NBQ2xDLElBQUksT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztDQUMxQixHQUFHO0NBQ0gsR0FBRztBQUNIO0NBQ0EsRUFBRSxNQUFNLENBQUMsVUFBVSxHQUFHLFNBQVMsVUFBVSxDQUFDLENBQUMsRUFBRTtDQUM3QyxJQUFJLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7Q0FDdEIsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDZCxJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7Q0FDckIsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQztBQUNwQjtDQUNBLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRTtDQUN2QixNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7Q0FDdkIsTUFBTSxJQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztDQUMvQyxNQUFNLElBQUksRUFBRSxLQUFLLEdBQUcsQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztDQUNwRSxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDZDtDQUNBLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO0NBQ25CLFFBQVEsSUFBSSxFQUFFLEtBQUssR0FBRyxDQUFDLE1BQU0sRUFBRTtDQUMvQixVQUFVLEVBQUUsQ0FBQyxDQUFDO0NBQ2QsVUFBVSxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FB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LEdBQUcsQ0FBQyxDQUFDO0NBQ3pCLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0NBQ3RCLEVBQUUsSUFBSSxFQUFFLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2pDLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO0NBQ2YsSUFBSSxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQ3ZDLElBQUksT0FBTyxFQUFFLENBQUM7Q0FDZCxHQUFHO0NBQ0gsRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Q0FDckMsRUFBRSxFQUFFLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQzdCLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO0NBQ2YsSUFBSSxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQ3ZDLElBQUksT0FBTyxFQUFFLENBQUM7Q0FDZCxHQUFHO0NBQ0gsRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Q0FDckMsRUFBRSxFQUFFLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQzdCLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO0NBQ2YsSUFBSSxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUU7Q0FDaEIsTUFBTSxJQUFJLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztDQUN2RCxLQUFLO0NBQ0wsSUFB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QUFRLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQ2xDLEVBQUUsT0FBTyxHQUFHLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7Q0FDdEMsQ0FBQztBQUNEO0NBQ0E7Q0FDQTtDQUNBLFNBQVMsT0FBTyxDQUFDLEdBQUcsRUFBRTtDQUN0QixFQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0NBQ25ELEVBQUUsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxHQUFHLFFBQVEsQ0FBQztDQUN6QyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0NBQ1gsQ0FBQztBQUNEO0NBQ0E7Q0FDQTtDQUNBO0NBQ0E7Q0FDQSxTQUFTLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFO0NBQzNCLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7Q0FDbEMsSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztDQUN2QyxJQUFJLElBQUksQ0FBQyxFQUFFO0NBQ1gsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7Q0FDekMsTUFBTSxJQUFJLENBQUMsSUFBSSxNQUFNLElBQUksQ0FBQyxJQUFJLE1BQU0sRUFBRTtDQUN0QyxRQUFRLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO0NBQzFCLFFBQVEsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7Q0FDM0IsUUFBUSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFD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QUFDLFdBQVcsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDLE9BQU8sV0FBVyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUNwakI7Q0FDQSxJQUFJLElBQUksR0FBRyxTQUFTLEdBQUcsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxFQUFFLElBQUksTUFBTSxLQUFLLElBQUksRUFBRSxNQUFNLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUUsRUFBRSxJQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxNQUFNLEtBQUssSUFBSSxFQUFFLEVBQUUsT0FBTyxTQUFTLENBQUMsRUFBRSxNQUFNLEVBQUUsT0FBTyxHQUFHLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQyxFQUFFLEVBQUUsTUFBTSxJQUFJLE9BQU8sSUFBSSxJQUFJLEVBQUUsRUFBRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksTUFBTSxLQUFLLFNBQVMsRUFBRSxFQUFFLE9BQU8sU0FBUyxDQUFDLEVBQUUsQ0FBQyxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDM2U7Q0FDQSxJQUFJLE9BQU8sR0FBRyxPQUFPLE1BQU0sS0FBSyxVQUFVLElBQUksT0FBTyxNQUFNLENBQUMsUUFBUSxLQUFLLFFBQVEsR0FBRyxVQUFVLEdBQUcsRUFBRSxFQUFFLE9BQU8sT0FBTyxHQUFHLENBQUMsRUFBRSxHQUFHLFVBQVUsR0FBRyxFQUFFLEVBQUUsT0FBTyxHQUFHLElBQUksT0FBTyxNQUFNLEtBQUssVUFBVSxJ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",Hc=!1,function(e){return Tc=Tc||function(e,t,n){var r=void 0===t?null:t,a=function(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),a=0,s=n.length;a<s;++a)r[a]=n.charCodeAt(a);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(e,void 0!==n&&n),s=a.indexOf("\n",10)+1,i=a.substring(s)+(r?"//# sourceMappingURL="+r:""),o=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(o)}(Wc,Xc,Hc),new Worker(Tc,e)});function Mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mc(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yc={adjustPosition:"-webkit-grab",adjustHeight:"row-resize",adjustBias:"crosshair",adjustWidth:"col-resize",adjustZoom:"col-resize"},Oc=[],zc={adjustPosition:function(e,t,n){var r=n.originalXY,a=n.gaussian,s=n.originalGaussian.position-r[0];return a.position=e+s,!0},adjustHeight:function(e,t,n){var r=n.model,a=n.gaussian;return a.height=1-t,a.height=Math.min(1,Math.max(r.gaussianMinimumHeight,a.height)),!0},adjustBias:function(e,t,n){var r=n.originalXY,a=n.gaussian,s=n.originalGaussian;return a.xBias=s.xBias-(r[0]-e)/a.height,a.yBias=s.yBias+4*(r[1]-t)/a.height,a.xBias=Math.max(-1,Math.min(1,a.xBias)),a.yBias=Math.max(0,Math.min(2,a.yBias)),!0},adjustWidth:function(e,t,n){var r=n.originalXY,a=n.gaussian,s=n.originalGaussian,i=n.gaussianSide;return a.width=i<0?s.width-(r[0]-e):s.width+(r[0]-e),a.width<.001&&(a.width=.001),!0},adjustZoom:function(e,t,n){var r=n.rangeZoom,a=n.publicAPI,s=r[1]-r[0],i=(e-r[0])/s,o=Math.abs(i-r[0]),l=Math.abs(i-r[1]);if(Math.abs(i-.5*(r[0]+r[1]))<Math.min(o,l)){var B=.5*s;r[0]=Math.min(Math.max(i-B,0),r[1]-.1),r[1]=Math.max(Math.min(i+B,1),r[0]+.1)}else o<l?r[0]=Math.min(Math.max(i,0),r[1]-.1):r[1]=Math.max(Math.min(i,1),r[0]+.1);return a.invokeZoomChange(r),!1}};function Pc(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n=[];n.length<t;)n.push(0);for(var r=e.length;r--;)for(var a=e[r],s=a.position,i=a.height,o=a.width,l=a.xBias,B=a.yBias,Q=0;Q<t;Q++){var c=Q/(t-1);if(c>s+o||c<s-o)n[Q]<0&&(n[Q]=0);else{var F=o<.001?.001:o,U=((0===l||c===s+l?c:c>s+l?F===l?s:s+F/(F-l)*(c-s-l):-F===l?s:s-F/(F+l)*(c-s-l))-s)/F,g=Math.exp(-4*U*U),d=1-U*U,u=1,I=i*(B<1?B*d+(1-B)*g:(2-B)*d+(B-1)*u);I>n[Q]&&(n[Q]=I)}}return n}function Kc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{lineWidth:1,strokeStyle:"#000"},a=t[3],s=t[2]/(n.length-1),i=!!r.fillStyle,o=a+t[1];e.lineWidth=r.lineWidth,e.strokeStyle=r.strokeStyle,e.beginPath(),e.moveTo(t[0],t[1]+t[3]);for(var l=0;l<n.length;l++)e.lineTo(t[0]+l*s,Math.max(t[1],o-n[l]*a));if(i){if(e.fillStyle=r.fillStyle,e.lineTo(t[0]+t[2],t[1]+t[3]),r.clip)return void e.clip();e.fill()}e.stroke()}function jc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,1];return[r[0]+(e-n[0])/n[2]*(r[1]-r[0]),(t-n[1])/n[3]]}function _c(e,t){var n=t.map((function(t){return Math.abs(t.position-e)})),a=Math.min.apply(Math,Object(r.a)(n));return n.indexOf(a)}function qc(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){var r=n.offsetX,a=n.offsetY;t&&n.preventDefault(),e(r,a)}}function $c(){Oc.filter((function(e){return e.ready})).forEach((function(e){e.callbacks.forEach((function(t){t.touches===e.touches&&t.clicks===e.count&&t.action.apply(t,Object(r.a)(e.singleTouche))})),e.ts=0,e.count=0,e.touches=0,e.ready=!1}))}function eF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(s){var i=s.target.getBoundingClientRect(),o=Array.prototype.map.call(s.touches,(function(e){return[e.pageX-i.left,e.pageY-i.top]})).reduce((function(e,t){return[e[0]+t[0],e[1]+t[1]]}),[0,0]).map((function(e){return e/s.touches.length}));"touchstart"===s.type?(clearTimeout(Oc[e].timeout),Oc[e].ts=s.timeStamp,Oc[e].singleTouche=o,Oc[e].touches=s.touches.length):"touchmove"===s.type?(Oc[e].ts=0,Oc[e].count=0,Oc[e].ready=!1):"touchend"===s.type&&(s.timeStamp-Oc[e].ts<Oc[e].deltaT?(Oc[e].count+=1,Oc[e].ready=!0,a&&s.preventDefault(),Oc[e].timeout=setTimeout($c,Oc[e].deltaT)):Oc[e].ready=!1),s.touches.length===n&&(t.apply(void 0,Object(r.a)(o)),a&&s.preventDefault())}}function tF(e,t,n){return function(r){return e()?t(r):n(r)}}function nF(e,t){if(!t)return e;var n=e.length-1,r=t.map((function(e){return Math.round(e*n)}));return e.slice(r[0],r[1]+1)}var rF={applyGaussianToPiecewiseFunction:function(e,t,n,r){for(var a=Pc(e,t),s=[],i=(n[1]-n[0])/(a.length-1),o=0;o<a.length;o++){var l=n[0]+i*o,B=a[o];s.push({x:l,y:B,midpoint:.5,sharpness:0})}r.setNodes(s)},computeOpacities:Pc,createListener:qc,drawChart:Kc,findGaussian:_c,listenerSelector:tF,normalizeCoordinates:jc};function aF(e,t){t.classHierarchy.push("vtkPiecewiseGaussianWidget"),t.canvas||(t.canvas=document.createElement("canvas")),e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.canvas),t.container!==n&&(t.container=n,t.container&&t.container.appendChild(t.canvas),e.modified())},e.setGaussians=function(n){t.gaussians!==n&&(t.gaussians=n,t.opacities=Pc(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified())},e.addGaussian=function(n,r,a,s,i){var o=t.gaussians.length;return t.gaussians.push({position:n,height:r,width:a,xBias:s,yBias:i}),t.opacities=Pc(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified(),o},e.removeGaussian=function(n){t.gaussians.splice(n,1),t.opacities=Pc(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified()},e.setSize=function(n,r){t.canvas.setAttribute("width",n),t.canvas.setAttribute("height",r),t.size[0]===n&&t.size[1]===r||(t.size=[n,r],t.colorCanvasMTime=0,e.modified())},e.updateStyle=function(n){t.style=wc(wc({},t.style),n),e.modified()},e.setDataArray=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.numberOfBinToConsiders,s=void 0===a?1:a,i=r.numberOfBinsToSkip,o=void 0===i?1:i,l=r.numberOfComponents,B=void 0===l?1:l,Q=r.component,c=void 0===Q?0:Q;t.histogram=null,t.histogramArray=n,t.dataRange=Object(u.b)(n,c,B);var F=Object(oe.a)(t.dataRange,2),U=F[0],g=F[1],d=4,I=Math.floor(n.length/d)||1;I+=I%B;for(var m=0,C=[],b=[];m<n.length;){var y=new kc;b.push(y);var S=new Jc(y),h=m,Z=Math.min(m+I,n.length-1),x=new n.constructor(n.slice(h,Z+1));C.push(S.postMessage({array:x,component:c,numberOfComponents:B,min:U,max:g,numberOfBins:t.numberOfBins},[x.buffer])),m+=I}Promise.all(C).then((function(n){b.forEach((function(e){return e.terminate()})),t.histogram=new Float32Array(t.numberOfBins),t.histogram.fill(0),n.forEach((function(e){for(var n=0,r=e.length;n<r;++n)t.histogram[n]+=e[n]}));var r=Math.min(s,t.histogram.length-o),a=Array.from(t.histogram);a.sort((function(e,t){return Number(e)-Number(t)}));for(var i=0;i<o;i++)a.pop();for(;a.length>r;)a.shift();for(var l=a.reduce((function(e,t){return e+t}),0)/r,B=0,Q=t.histogram.length;B<Q;++B)t.histogram[B]/=l;e.modified(),setTimeout(e.render,0)})),e.modified()},e.onClick=function(n,r){var s=jc(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),i=Object(oe.a)(s,2),o=i[0],l=i[1];if(o<0&&t.style.iconSize>1){for(var B=t.style.iconSize+t.style.padding,Q=B,c=0;r>Q;)c+=1,Q+=B;switch(c){case 0:var F=e.addGaussian(0,1,.1,0,0),U=t.gaussians[F],g=wc({},U),d=zc.adjustPosition;t.activeGaussian=F,t.selectedGaussian=F,a.c.setImmediate((function(){e.onDown(n,r),t.dragAction={originalXY:[0,0],action:d,gaussian:U,originalGaussian:g}}));break;case 1:-1!==t.selectedGaussian&&e.removeGaussian(t.selectedGaussian);break;default:t.selectedGaussian=-1,t.dragAction=null}}else if(o<0||o>1||l<0||l>1)t.selectedGaussian=-1,t.dragAction=null;else{var u=_c(o,t.gaussians);u!==t.selectedGaussian&&(t.selectedGaussian=u,e.modified())}return!0},e.onHover=function(n,r){var a=20/t.canvas.height,s=jc(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),i=Object(oe.a)(s,2),o=i[0],l=i[1],B=jc(n,r,t.graphArea),Q=Object(oe.a)(B,1)[0],c=o<0?t.selectedGaussian:_c(o,t.gaussians);t.canvas.style.cursor="default";var F=t.gaussians[c];if(t.enableRangeZoom&&Q>=0&&r<t.graphArea[1]-6){var U=(t.rangeZoom[1]-t.rangeZoom[0])/3;Q<t.rangeZoom[0]+U||Q>t.rangeZoom[1]-U?t.canvas.style.cursor=Yc.adjustZoom:t.canvas.style.cursor=Yc.adjustPosition,t.dragAction={rangeZoom:t.rangeZoom,action:zc.adjustZoom}}else if(F&&Q>=0){var g,d=1-l;g=d>F.height+a?"adjustPosition":d>F.height-a?Math.abs(o-F.position)<a?"adjustHeight":"adjustPosition":d>.5*F.height+a?"adjustPosition":d>.5*F.height-a?Math.abs(o-F.position)<a?"adjustBias":"adjustPosition":d>a?"adjustPosition":"adjustWidth",t.canvas.style.cursor=Yc[g];var u=zc[g],I=wc({},F);t.dragAction={originalXY:[o,l],action:u,gaussian:F,originalGaussian:I}}return c!==t.activeGaussian&&(t.activeGaussian=c,e.modified()),!0},e.onDown=function(n,r){t.mouseIsDown||e.invokeAnimation(!0),t.mouseIsDown=!0;var a=jc(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null)[0],s=_c(a,t.gaussians);t.gaussianSide=0;var i=t.gaussians[s];return i&&(t.gaussianSide=i.position-a),s!==t.selectedGaussian&&a>0&&(t.selectedGaussian=s,e.modified()),!0},e.onDrag=function(n,r){if(t.dragAction){var a=jc(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),s=Object(oe.a)(a,2),i=s[0],o=s[1];(0,t.dragAction.action)(i,o,wc({gaussianSide:t.gaussianSide,model:t,publicAPI:e},t.dragAction))&&(t.opacities=Pc(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e,!0)),e.modified()}return!0},e.onUp=function(n,r){return t.mouseIsDown&&e.invokeAnimation(!1),t.mouseIsDown=!1,!0},e.onLeave=function(n,r){return e.onUp(n,r),t.canvas.style.cursor="default",t.activeGaussian=-1,e.modified(),!0},e.onAddGaussian=function(n,r){var a=jc(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null),s=Object(oe.a)(a,2),i=s[0],o=s[1];return i>=0&&e.addGaussian(i,1-o,.1,0,0),!0},e.onRemoveGaussian=function(n,r){var a=jc(n,r,t.graphArea,t.enableRangeZoom?t.rangeZoom:null)[0],s=_c(a,t.gaussians);return a>=0&&-1!==s&&e.removeGaussian(s),!0},e.bindMouseListeners=function(){if(!t.listeners){var n=function(){return!!t.mouseIsDown},r=function(){for(var e=Oc.length,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oc.push({callbacks:n,timeout:0,deltaT:200,count:0,ready:!1}),e}({clicks:1,touches:1,action:e.onClick},{clicks:2,touches:1,action:e.onAddGaussian},{clicks:2,touches:2,action:e.onRemoveGaussian});t.listeners={mousemove:tF(n,qc(e.onDrag),qc(e.onHover)),dblclick:qc(e.onAddGaussian),contextmenu:qc(e.onRemoveGaussian),click:qc(e.onClick),mouseup:qc(e.onUp),mousedown:qc(e.onDown),mouseout:qc(e.onLeave),touchstart:eF(r,a.c.chain(e.onHover,e.onDown)),touchmove:tF(n,eF(r,e.onDrag),eF(r,e.onHover)),touchend:eF(r,e.onUp,0)},Object.keys(t.listeners).forEach((function(e){t.canvas.addEventListener(e,t.listeners[e],!1)}))}},e.unbindMouseListeners=function(){t.listeners&&(Object.keys(t.listeners).forEach((function(e){t.canvas.removeEventListener(e,t.listeners[e])})),delete t.listeners)},e.render=function(){var e=t.canvas.getContext("2d");e.imageSmoothingEnabled=!0;var n=Object(oe.a)(t.size,2),r=n[0],a=n[1],s=t.style.padding,i=[Math.floor(t.style.iconSize+s),Math.floor(s),Math.ceil(r-2*s-t.style.iconSize),Math.ceil(a-2*s)],o=t.style.zoomControlHeight;if(t.enableRangeZoom&&(i[1]+=Math.floor(o),i[3]-=Math.floor(o)),t.graphArea=i,e.clearRect(0,0,r,a),e.lineJoin="round",e.fillStyle=t.style.backgroundColor,e.fillRect.apply(e,i),t.style.iconSize>1){var l=Math.round(t.style.iconSize/2-t.style.strokeWidth),B=Math.round(l+s+t.style.strokeWidth);e.beginPath(),e.lineWidth=t.style.buttonStrokeWidth,e.strokeStyle=t.style.buttonStrokeColor,e.arc(B-s/2,B,l,0,2*Math.PI,!1),e.fillStyle=t.style.buttonFillColor,e.fill(),e.stroke(),e.moveTo(B-l+t.style.strokeWidth+2-s/2,B),e.lineTo(B+l-t.style.strokeWidth-2-s/2,B),e.stroke(),e.moveTo(B-s/2,B-l+t.style.strokeWidth+2),e.lineTo(B-s/2,B+l-t.style.strokeWidth-2),e.stroke(),-1===t.selectedGaussian?(e.fillStyle=t.style.buttonDisableFillColor,e.lineWidth=t.style.buttonDisableStrokeWidth,e.strokeStyle=t.style.buttonDisableStrokeColor):(e.fillStyle=t.style.buttonFillColor,e.lineWidth=t.style.buttonStrokeWidth,e.strokeStyle=t.style.buttonStrokeColor),e.beginPath(),e.arc(B-s/2,B+s/2+t.style.iconSize,l,0,2*Math.PI,!1),e.fill(),e.stroke(),e.moveTo(B-l+t.style.strokeWidth+2-s/2,B+s/2+t.style.iconSize),e.lineTo(B+l-t.style.strokeWidth-2-s/2,B+s/2+t.style.iconSize),e.stroke()}if(t.histogram&&Kc(e,i,nF(t.histogram,t.rangeZoom),{lineWidth:1,strokeStyle:t.style.histogramColor,fillStyle:t.style.histogramColor}),Kc(e,i,nF(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:t.style.strokeWidth,strokeStyle:t.style.strokeColor}),t.colorTransferFunction&&t.colorTransferFunction.getSize()){var Q=t.dataRange||t.colorTransferFunction.getMappingRange();t.colorCanvas&&t.colorCanvasMTime===t.colorTransferFunction.getMTime()||(t.colorCanvasMTime=t.colorTransferFunction.getMTime(),t.colorCanvas=function(e,t,n,r){var a=r||document.createElement("canvas");a.setAttribute("width",t),a.setAttribute("height",256);for(var s=a.getContext("2d"),i=e.getUint8Table(n[0],n[1],t,4),o=s.getImageData(0,0,t,256),l=0;l<256;l++)o.data.set(i,4*l*t);for(var B=256*t*4,Q=4*t,c=3;c<B;c+=4)o.data[c]=255-Math.floor(c/Q);return s.putImageData(o,0,0),a}(t.colorTransferFunction,i[2],Q,t.colorCanvas)),e.save(),Kc(e,i,nF(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:1,strokeStyle:"rgba(0,0,0,0)",fillStyle:"rgba(0,0,0,1)",clip:!0}),t.enableRangeZoom?e.drawImage(t.colorCanvas,t.rangeZoom[0]*i[2],0,i[2],i[3],i[0],i[1],i[2]/(t.rangeZoom[1]-t.rangeZoom[0]),i[3]):e.drawImage(t.colorCanvas,i[0],i[1]),e.restore()}else t.backgroundImage&&(t.colorCanvas=function(e,t,n){var r=n||document.createElement("canvas");return r.setAttribute("width",t),r.setAttribute("height",256),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,256),r}(t.backgroundImage,i[2],t.colorCanvas),e.save(),Kc(e,i,nF(t.opacities,t.enableRangeZoom&&t.rangeZoom),{lineWidth:1,strokeStyle:"rgba(0,0,0,0)",fillStyle:"rgba(0,0,0,1)",clip:!0}),e.drawImage(t.colorCanvas,i[0],i[1]),e.restore());t.enableRangeZoom&&(e.fillStyle=t.style.zoomControlColor,e.beginPath(),e.rect(i[0]+t.rangeZoom[0]*i[2],0,(t.rangeZoom[1]-t.rangeZoom[0])*i[2],o),e.fill());var c,F,U=t.gaussians[t.activeGaussian]||t.gaussians[t.selectedGaussian];if(U){Kc(e,i,nF(Pc([U],i[2]),t.enableRangeZoom&&t.rangeZoom),{lineWidth:t.style.activeStrokeWidth,strokeStyle:t.style.activeColor});var g=i[0]+(c=U.position,((F=t.enableRangeZoom&&t.rangeZoom)?(c-F[0])/(F[1]-F[0]):c)*i[2]),d=i[1]+(1-U.height)*i[3],u=i[1]+(1-.5*U.height)*i[3],I=i[1]+i[3],m=U.width*i[2];t.enableRangeZoom&&(m/=t.rangeZoom[1]-t.rangeZoom[0]),e.lineWidth=t.style.handleWidth,e.strokeStyle=t.style.handleColor,e.fillStyle=t.style.backgroundColor,e.beginPath(),e.moveTo(g,i[1]+(1-U.height)*i[3]),e.lineTo(g,i[1]+i[3]),e.stroke(),e.beginPath(),e.arc(g,d,6,0,2*Math.PI),e.fill(),e.stroke();var C=Math.min(.1*m,U.height*i[3]*.2);e.beginPath(),e.rect(g-C,u-C,2*C,2*C),e.fill(),e.stroke(),e.beginPath();var b=.8*m;e.rect(g-b,I-5,2*b,10),e.fill(),e.stroke()}},e.getOpacityNodes=function(e){for(var n=e||t.dataRange,r=(n[1]-n[0])/(t.opacities.length-1),a=[],s=0;s<t.opacities.length;s++){var i=n[0]+r*s,o=t.opacities[s];a.push({x:i,y:o,midpoint:.5,sharpness:0})}return a},e.applyOpacity=function(t,n){var r=e.getOpacityNodes(n);t.setNodes(r)},e.getOpacityRange=function(e){for(var n=e||t.dataRange,r=(n[1]-n[0])/(t.opacities.length-1),a=t.opacities.length-1,s=0,i=0;i<t.opacities.length;i++)t.opacities[i]>0&&(a=Math.min(a,i)),t.opacities[i]>0&&(s=Math.max(s,i));return[n[0]+a*r,n[0]+s*r]};var n=e.setEnableRangeZoom;e.setEnableRangeZoom=function(e){var r=n(e);return r&&(t.colorCanvasMTime=0,t.rangeZoom=[0,1]),r};var s=e.setRangeZoom;e.setRangeZoom=function(){var e=s.apply(void 0,arguments);return e&&(t.colorCanvasMTime=0),e},e.onModified((function(){return e.render()})),e.setSize.apply(e,Object(r.a)(t.size))}var sF={histogram:[],numberOfBins:256,histogramArray:null,dataRange:[0,1],gaussians:[],opacities:[],size:[600,300],piecewiseSize:256,colorCanvasMTime:0,gaussianMinimumHeight:.05,style:{backgroundColor:"rgba(255, 255, 255, 1)",histogramColor:"rgba(200, 200, 200, 0.5)",strokeColor:"rgb(0, 0, 0)",activeColor:"rgb(0, 0, 150)",buttonDisableFillColor:"rgba(255, 255, 255, 0.5)",buttonDisableStrokeColor:"rgba(0, 0, 0, 0.5)",buttonStrokeColor:"rgba(0, 0, 0, 1)",buttonFillColor:"rgba(255, 255, 255, 1)",handleColor:"rgb(0, 150, 0)",strokeWidth:2,activeStrokeWidth:3,buttonStrokeWidth:1.5,handleWidth:3,iconSize:20,padding:10,zoomControlHeight:10,zoomControlColor:"#999"},activeGaussian:-1,selectedGaussian:-1,enableRangeZoom:!0,rangeZoom:[0,1]};function iF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sF,n),a.c.obj(e,t),a.c.setGet(e,t,["piecewiseSize","numberOfBins","colorTransferFunction","backgroundImage","enableRangeZoom","gaussianMinimumHeight"]),a.c.setGetArray(e,t,["rangeZoom"],2),a.c.get(e,t,["size","canvas","gaussians"]),a.c.event(e,t,"opacityChange"),a.c.event(e,t,"animation"),a.c.event(e,t,"zoomChange"),aF(e,t)}var oF=wc({newInstance:a.c.newInstance(iF,"vtkPiecewiseGaussianWidget"),extend:iF},rF);var lF={container:"VolumeController-module_container__2HNSO",line:"VolumeController-module_line__3rtqL",button:"VolumeController-module_button__2T-xL",sliderEntry:"VolumeController-module_sliderEntry__27XSC",sliderIcon:"VolumeController-module_sliderIcon__U8YAZ VolumeController-module_button__2T-xL",slider:"VolumeController-module_slider__3PS68",piecewiseEditor:"VolumeController-module_piecewiseEditor__2_jav",select:"VolumeController-module_select__7mbfS",presets:"VolumeController-module_presets__1h4j5 VolumeController-module_select__7mbfS",shadow:"VolumeController-module_shadow__29K9t VolumeController-module_select__7mbfS",buttonDarkBG:"VolumeController-module_buttonDarkBG__3W1zO VolumeController-module_button__2T-xL",presetsDarkBG:"VolumeController-module_presetsDarkBG__2ZI2W VolumeController-module_presets__1h4j5 VolumeController-module_select__7mbfS",shadowDarkBG:"VolumeController-module_shadowDarkBG__WHYZ- VolumeController-module_shadow__29K9t VolumeController-module_select__7mbfS",buttonBrightBG:"VolumeController-module_buttonBrightBG__2dstz VolumeController-module_button__2T-xL",presetsBrightBG:"VolumeController-module_presetsBrightBG__3_VRC VolumeController-module_presets__1h4j5 VolumeController-module_select__7mbfS",shadowBrightBG:"VolumeController-module_shadowBrightBG__YCHpe VolumeController-module_shadow__29K9t VolumeController-module_select__7mbfS"};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".VolumeController-module_container__2HNSO {\n  display: flex;\n  align-items: stretch;\n  flex-direction: column;\n  justify-content: space-between;\n  position: absolute;\n  top: 5px;\n  left: 5px;\n  background: rgba(128, 128, 128, 0.5);\n  border-radius: 5px;\n  padding: 2px;\n  border: 0.5px solid black;\n  box-sizing: border-box;\n}\n\n.VolumeController-module_line__3rtqL {\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.VolumeController-module_button__2T-xL {\n  cursor: pointer;\n  width: 1rem;\n  margin-left: 5px;\n  margin-right: 5px;\n}\n\n.VolumeController-module_button__2T-xL svg {\n  width: 1rem;\n  height: 1rem;\n}\n\n.VolumeController-module_sliderEntry__27XSC {\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.VolumeController-module_sliderIcon__U8YAZ {\n  height: 1rem;\n}\n\n.VolumeController-module_slider__3PS68 {\n  flex: 1;\n  min-height: 1rem;\n  width: 5px;\n}\n\n.VolumeController-module_piecewiseEditor__2_jav {\n  flex: 1;\n}\n\n.VolumeController-module_select__7mbfS {\n  flex: 1;\n  border: none;\n  background: transparent;\n  color: white;\n  border: none;\n  -moz-appearance: none;\n  width: 5px;\n}\n\n.VolumeController-module_select__7mbfS select:focus {\n  outline: none;\n  border: none;\n}\n\n.VolumeController-module_presets__1h4j5 {\n}\n\n.VolumeController-module_shadow__29K9t {\n}\n\n.VolumeController-module_buttonDarkBG__3W1zO {\n}\n\n.VolumeController-module_presetsDarkBG__2ZI2W {\n  color: white;\n}\n\n.VolumeController-module_presetsDarkBG__2ZI2W option {\n  color: black;\n}\n\n.VolumeController-module_shadowDarkBG__WHYZ- {\n  color: white;\n}\n\n.VolumeController-module_shadowDarkBG__WHYZ- option {\n  color: black;\n}\n\n.VolumeController-module_buttonBrightBG__2dstz {\n}\n\n.VolumeController-module_presetsBrightBG__3_VRC {\n  color: black;\n}\n\n.VolumeController-module_presetsBrightBG__3_VRC option {\n  color: white;\n}\n\n.VolumeController-module_shadowBrightBG__YCHpe {\n  color: black;\n}\n\n.VolumeController-module_shadowBrightBG__YCHpe option {\n  color: white;\n}\n");var BF=ZQ.rgbPresetNames.map((function(e){return'<option value="'.concat(e,'">').concat(e,"</option>")}));function QF(e,t){function n(){var e=!!Number(t.el.querySelector(".js-shadow").value);t.actor.getProperty().setShade(e),t.renderWindow.render()}function a(){var e=t.actor.getMapper().getInputData();if(e){var n=e.getPointData().getScalars()||e.getPointData().getArrays()[0],a=t.rescaleColorMap?t.colorDataRange:n.getRange(),s=ZQ.getPresetByName(t.el.querySelector(".js-color-preset").value),i=t.actor.getProperty().getRGBTransferFunction(0);i.applyColorMap(s),i.setMappingRange.apply(i,Object(r.a)(a)),i.updateRange(),t.renderWindow.render()}}function s(){var e=Number(t.el.querySelector(".js-spacing").value),n=t.actor.getMapper().getInputData(),r=.7*Math.sqrt(n.getSpacing().map((function(e){return e*e})).reduce((function(e,t){return e+t}),0));t.actor.getMapper().setSampleDistance(r*Math.pow(2,3*e-1.5)),t.renderWindow.render()}function i(){var e=Number(t.el.querySelector(".js-edge").value);if(0===e)t.actor.getProperty().setUseGradientOpacity(0,!1);else{var n=t.actor.getMapper().getInputData(),r=(n.getPointData().getScalars()||n.getPointData().getArrays()[0]).getRange();t.actor.getProperty().setUseGradientOpacity(0,!0);var a=Math.max(0,e-.3)/.7;t.actor.getProperty().setGradientOpacityMinimumValue(0,.2*(r[1]-r[0])*a*a),t.actor.getProperty().setGradientOpacityMaximumValue(0,1*(r[1]-r[0])*e*e)}t.renderWindow.render()}t.classHierarchy.push("vtkVolumeController"),t.el=document.createElement("div"),t.el.setAttribute("class",lF.container),t.widget=oF.newInstance({numberOfBins:256,size:t.size}),e.setupContent=function(r,o,l){var B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1",Q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"erdc_rainbow_bright";e.setActor(o),e.setRenderWindow(r);var c=t.actor.getMapper().getInputData(),F=c.getPointData().getScalars()||c.getPointData().getArrays()[0],U=t.actor.getProperty().getRGBTransferFunction(0),g=t.actor.getProperty().getScalarOpacity(0),d=l?"DarkBG":"BrightBG",u={};["button","presets","shadow"].forEach((function(e){u[e]=lF["".concat(e).concat(d)]})),t.el.innerHTML='\n      <div class="'.concat(lF.line,'">\n        <div class="').concat(u.button,' js-button">').concat(Vc,'</div>\n        <select class="').concat(u.shadow,' js-shadow js-toggle">\n          <option value="1">Use Shadow</option>\n          <option value="0">No Shadow</option>\n        </select>\n        <select class="').concat(u.presets,' js-color-preset js-toggle">\n          ').concat(BF,'\n        </select>\n      </div>\n      <div class="').concat(lF.line,' js-toggle">\n        <div class="').concat(lF.sliderEntry,'">\n          <div class="').concat(lF.sliderIcon,'">').concat(Ac,'</div>\n          <input type="range" min="0" max="1" value="0.4" step="0.01" class="').concat(lF.slider,' js-spacing" />\n        </div>\n        <div class="').concat(lF.sliderEntry,'">\n          <div class="').concat(lF.sliderIcon,'">').concat(Lc,'</div>\n          <input type="range" min="0" max="1" value="0.2" step="0.01" class="').concat(lF.slider,' js-edge" />\n        </div>\n      </div>\n      <div class="').concat(lF.piecewiseEditor,' js-pwf js-toggle"></div>\n    ');var I=t.el.querySelector(".js-button"),m=t.el.querySelector(".js-shadow"),C=t.el.querySelector(".js-color-preset"),b=t.el.querySelector(".js-spacing"),y=t.el.querySelector(".js-edge"),S=t.el.querySelector(".js-pwf");t.widget.updateStyle({backgroundColor:"rgba(255, 255, 255, 0.6)",histogramColor:"rgba(100, 100, 100, 0.5)",strokeColor:"rgb(0, 0, 0)",activeColor:"rgb(255, 255, 255)",handleColor:"rgb(50, 150, 50)",buttonDisableFillColor:"rgba(255, 255, 255, 0.5)",buttonDisableStrokeColor:"rgba(0, 0, 0, 0.5)",buttonStrokeColor:"rgba(0, 0, 0, 1)",buttonFillColor:"rgba(255, 255, 255, 1)",strokeWidth:2,activeStrokeWidth:3,buttonStrokeWidth:1.5,handleWidth:3,iconSize:0,padding:10}),t.widget.addGaussian(.5,1,.5,.5,.4),t.widget.setDataArray(F.getData()),t.widget.setColorTransferFunction(U),t.widget.applyOpacity(g),t.widget.setContainer(S),t.widget.bindMouseListeners(),t.colorDataRange=t.widget.getOpacityRange(),I.addEventListener("click",e.toggleVisibility),m.addEventListener("change",n),C.addEventListener("change",a),b.addEventListener("input",s),y.addEventListener("input",i),t.widget.onOpacityChange((function(){t.widget.applyOpacity(g),t.colorDataRange=t.widget.getOpacityRange(),t.rescaleColorMap&&a(),t.renderWindow.getInteractor().isAnimating()||t.renderWindow.render()})),t.widget.onAnimation((function(e){e?t.renderWindow.getInteractor().requestAnimation(t.widget):(t.renderWindow.getInteractor().cancelAnimation(t.widget),t.renderWindow.render())})),U.onModified((function(){t.widget.render(),t.renderWindow.getInteractor().isAnimating()||t.renderWindow.render()})),m.value=Number(B)?"1":"0",C.value=Q,n(),a(),s(),i()},e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.el),t.container!==n&&(t.container=n,t.container&&t.container.appendChild(t.el),e.modified())};var o=e.setRescaleColorMap;e.setRescaleColorMap=function(e){return!!o(e)&&(a(),!0)},e.toggleVisibility=function(){e.setExpanded(!e.getExpanded())},e.setExpanded=function(e){var n=t.el.querySelectorAll(".js-toggle"),r=n.length;if(t.expanded=e,t.expanded)for(;r--;)n[r].style.display="flex";else for(;r--;)n[r].style.display="none"},e.getExpanded=function(){return t.expanded},e.setSize=t.widget.setSize,e.render=t.widget.render,e.onAnimation=t.widget.onAnimation,e.onModified(e.render),e.setSize.apply(e,Object(r.a)(t.size))}var cF={size:[600,300],expanded:!0,rescaleColorMap:!1};function FF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cF,n),a.c.obj(e,t),a.c.setGet(e,t,["actor","renderWindow","rescaleColorMap"]),a.c.get(e,t,["widget"]),QF(e,t)}var UF={newInstance:a.c.newInstance(FF,"vtkVolumeController"),extend:FF};var gF=function(e){Yt(n,jt.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pt(this,n)}}(n);function n(e){var r;Object(Se.a)(this,n),(r=t.call(this,e)).subscriptions=[],r.containerRef=_t.a.createRef();var a=e.size,s=e.rescaleColorMap;return r.controller=UF.newInstance({size:a,rescaleColorMap:s}),r}return Object(he.a)(n,[{key:"render",value:function(){var e=this;return _t.a.createElement($B.Consumer,null,(function(t){return _t.a.createElement(eQ.Consumer,null,(function(n){return e.view=t,e.representation=n,_t.a.createElement("div",{ref:e.containerRef})}))}))}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e,t,n){var a;(a=this.controller).setSize.apply(a,Object(r.a)(this.props.size)),this.controller.render()}},{key:"componentWillUnmount",value:function(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.controller.setContainer(null),this.controller.delete(),this.controller=null}},{key:"init",value:function(){var e=this,t=this.containerRef.current,n=this.view,r=n.renderWindow,a=n.props,s=this.representation.volume,i=a.background[0]+a.background[1]+a.background[2]<1.5;if(s&&s.getMapper()&&s.getMapper().getInputData()){var o=s.getMapper().getInputData();this.controller.setContainer(t),this.controller.setupContent(r,s,i),this.controller.render(),this.view.resetCamera(),this.view.renderView(),this.subscriptions.push(o.onModified((function(){return e.onDataChange()}),-1))}else setTimeout((function(){return e.init()}),100)}},{key:"onDataChange",value:function(){var e=this.controller.getWidget();if(this.representation&&this.representation.volume){var t=this.representation.volume.getMapper().getInputData(),n=t.getPointData().getScalars()||t.getPointData().getArrays()[0];e.setDataArray(n.getData())}}}]),n}();gF.defaultProps={size:[400,150],rescaleColorMap:!0},gF.propTypes={id:$t.a.string,size:$t.a.arrayOf($t.a.number),rescaleColorMap:$t.a.bool};var dF=gF;function uF(e){return _t.a.createElement(tQ.Consumer,null,(function(t){return _t.a.createElement(nQ.Provider,{value:t.getPointData()},e.children)}))}uF.defaultProps={},uF.propTypes={children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var IF=uF;var mF=function(e){Yt(n,jt.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pt(this,n)}}(n);function n(e){var r;return Object(Se.a)(this,n),(r=t.call(this,e)).polydata=o.a.newInstance(),r}return Object(he.a)(n,[{key:"render",value:function(){var e=this;return _t.a.createElement(eQ.Consumer,null,(function(t){return _t.a.createElement(rQ.Consumer,null,(function(n){return e.representation=t,e.downstream||(e.downstream=n),_t.a.createElement(tQ.Provider,{value:e.polydata},_t.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}},{key:"componentDidMount",value:function(){this.update(this.props),this.downstream.setInputData(this.polydata,this.props.port)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.polydata.delete(),this.polydata=null}},{key:"update",value:function(e,t){var n=e.connectivity,r=e.points,a=e.verts,s=e.lines,i=e.polys,o=e.strips,l=!1,B=r&&r.length>196608?Uint32Array:Uint16Array;if(!r||t&&r===t.points||(this.polydata.getPoints().setData(Float64Array.from(r),3),l=!0),!a||t&&a===t.verts||(this.polydata.getVerts().setData(B.from(a)),l=!0),!s||t&&s===t.lines||(this.polydata.getLines().setData(B.from(s)),l=!0),!i||t&&i===t.polys||(this.polydata.getPolys().setData(B.from(i)),l=!0),!o||t&&o===t.strips||(this.polydata.getStrips().setData(B.from(o)),l=!0),n&&(n||!t||n!==t.connectivity)){var Q=r.length/3;switch(n){case"points":var c=new Uint32Array(Q+1);c[0]=Q;for(var F=0;F<Q;F++)c[F+1]=F;this.polydata.getVerts().setData(c),l=!0;break;case"triangles":for(var U=new Uint32Array(Q+Q/3),g=0,d=0;d<Q;d+=3)U[g++]=3,U[g++]=d+0,U[g++]=d+1,U[g++]=d+2;this.polydata.getPolys().setData(U),l=!0;break;case"strips":var u=new Uint32Array(Q+1);u[0]=Q;for(var I=0;I<Q;I++)u[I+1]=I;this.polydata.getStrips().setData(u),l=!0}}l&&(this.polydata.modified(),this.representation&&this.representation.dataChanged())}}]),n}();mF.defaultProps={port:0,points:[],connectivity:"manual"},mF.propTypes={id:$t.a.string,port:$t.a.number,points:$t.a.arrayOf($t.a.number),verts:$t.a.arrayOf($t.a.number),lines:$t.a.arrayOf($t.a.number),polys:$t.a.arrayOf($t.a.number),strips:$t.a.arrayOf($t.a.number),connectivity:$t.a.string,children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var CF=mF;var bF=function(e){Yt(n,jt.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pt(this,n)}}(n);function n(e){var r;return Object(Se.a)(this,n),(r=t.call(this,e)).reader=null,r}return Object(he.a)(n,[{key:"render",value:function(){var e=this;return _t.a.createElement($B.Consumer,null,(function(t){return _t.a.createElement(eQ.Consumer,null,(function(n){return e.representation=n,_t.a.createElement(rQ.Consumer,null,(function(n){if(!e.reader){var r=e.props.vtkClass;e.reader=Object(L.a)({vtkClass:r})}return e.downstream||(n.setInputConnection(e.reader.getOutputPort(),e.props.port),e.downstream=n),e.view=t,_t.a.createElement(rQ.Provider,{value:e.reader},_t.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.reader.delete(),this.reader=null}},{key:"update",value:function(e,t){var n=this,r=e.vtkClass,a=e.url,s=e.parseAsText,i=e.parseAsArrayBuffer;!r||t&&r===t.vtkClass||(this.reader=Object(L.a)({vtkClass:r}),this.downstream.setInputConnection(this.reader.getOutputPort(),this.props.port)),!a||t&&a===t.url||this.reader.setUrl(a).then((function(){n.representation&&n.representation.dataChanged(),n.view&&(n.props.resetCameraOnUpdate&&n.view.resetCamera(),n.props.renderOnUpdate&&n.view.renderView())})),!s||t&&s===t.parseAsText||(this.reader.parseAsText(s),this.representation&&this.representation.dataChanged()),!i||t&&i===t.parseAsArrayBuffer||(this.reader.parseAsArrayBuffer(Rt.a.toArrayBuffer(i)),this.representation&&this.representation.dataChanged()),this.view&&(this.props.resetCameraOnUpdate&&this.view.resetCamera(),this.props.renderOnUpdate&&this.view.renderView())}}]),n}();bF.defaultProps={port:0,vtkClass:"",renderOnUpdate:!0,resetCameraOnUpdate:!0},bF.propTypes={id:$t.a.string,port:$t.a.number,vtkClass:$t.a.string,url:$t.a.string,parseAsText:$t.a.string,parseAsArrayBuffer:$t.a.string,renderOnUpdate:$t.a.bool,resetCameraOnUpdate:$t.a.bool,children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var yF=bF;function SF(e,t){t.classHierarchy.push("vtkTrivialProducer"),e.requestData=function(e,t){t.length=e.length;for(var n=0;n<e.length;n++)t[n]=e[n]}}var hF=a.c.newInstance((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,n),a.c.obj(e,t),a.c.algo(e,t,1,1),SF(e,t)}),"vtkTrivialProducer"),ZF={},xF=function(e){Yt(n,jt.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pt(this,n)}}(n);function n(){return Object(Se.a)(this,n),t.apply(this,arguments)}return Object(he.a)(n,[{key:"getTrivialProducer",value:function(){var e=ZF[this.props.name];return e||(e=hF(),ZF[this.props.name]=e),e}},{key:"render",value:function(){var e=this;return _t.a.createElement(rQ.Consumer,null,(function(t){return e.downstream||(e.downstream=t),_t.a.createElement(rQ.Provider,{value:e.getTrivialProducer()},_t.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}},{key:"componentDidMount",value:function(){this.downstream&&this.downstream.setInputConnection(this.getTrivialProducer().getOutputPort(),this.props.port)}}]),n}();xF.defaultProps={port:0,name:"shared"},xF.propTypes={id:$t.a.string,port:$t.a.number,name:$t.a.string,children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var pF=xF;function GF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var RF=a.c.vtkDebugMacro;function LF(e,t){t.classHierarchy.push("vtkActor");var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GF(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);e.getActors=function(){return e},e.getIsOpaque=function(){if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.property||e.getProperty();var n=t.property.getOpacity()>=1;return(n=n&&(!t.texture||!t.texture.isTranslucent()))&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return null!==t.mapper&&(null===t.property&&e.setProperty(e.makeProperty()),!e.getIsOpaque())},e.makeProperty=Fr.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n=t.mapper.getBounds();if(!n||6!==n.length)return n;if(n[0]>n[1])return t.mapperBounds=n.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),n;if(!t.mapperBounds||n[0]!==t.mapperBounds[0]||n[1]!==t.mapperBounds[1]||n[2]!==t.mapperBounds[2]||n[3]!==t.mapperBounds[3]||n[4]!==t.mapperBounds[4]||n[5]!==t.mapperBounds[5]||e.getMTime()>t.boundsMTime.getMTime()){RF("Recomputing bounds..."),t.mapperBounds=n.concat();var r=[];st.getCorners(n,r),e.computeMatrix();var a=new Float64Array(16);Object(b.i)(a,t.matrix),r.forEach((function(e){return Object(y.q)(e,e,a)})),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map((function(e,t){return t%2==0?r.reduce((function(e,n){return e>n[t/2]?n[t/2]:e}),e):r.reduce((function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e}),e)})),t.boundsMTime.modified()}return t.bounds},e.getMTime=function(){var e=n.getMTime();if(null!==t.property){var r=t.property.getMTime();e=r>e?r:e}if(null!==t.backfaceProperty){var a=t.backfaceProperty.getMTime();e=a>e?a:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()}}var VF={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function AF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,VF,n),uQ.extend(e,t,n),t.boundsMTime={},a.c.obj(t.boundsMTime),a.c.set(e,t,["property"]),a.c.setGet(e,t,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),LF(e,t)}var fF={newInstance:a.c.newInstance(AF,"vtkActor"),extend:AF};function NF(e,t){t.classHierarchy.push("vtkPixelSpaceCallbackMapper"),t.callback||(t.callback=function(){}),e.invokeCallback=function(e,n,r,a,s){if(t.callback){var i=n.getCompositeProjectionMatrix(r,-1,1);Object(b.i)(i,i);for(var o=e.getPoints(),l=new Float64Array(3),B=a.usize,Q=a.vsize,c=B/2,F=Q/2,U=[],g=0;g<o.getNumberOfPoints();g+=1){var d=o.getPoint(g);Object(y.q)(l,d,i);var u=[l[0]*c+c,l[1]*F+F,l[2],0];if(s){var I=4*(Math.floor(u[1])*B+Math.floor(u[0])),m=(s[I]/255*256+s[I+1]/255)/257;u[3]=2*m-1}U.push(u)}t.callback(U,n,r,s,[B,Q])}}}var EF={callback:null,useZValues:!1};function DF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,EF,n),oa.extend(e,t,n),a.c.setGet(e,t,["callback","useZValues"]),NF(e,t)}var vF={newInstance:a.c.newInstance(DF,"vtkPixelSpaceCallbackMapper"),extend:DF};function JF(e,t){t.classHierarchy.push("vtkTexture"),e.imageLoaded=function(){t.image.removeEventListener("load",e.imageLoaded),t.imageLoaded=!0,e.modified()},e.setImage=function(n){t.image!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null)),t.image=n,t.imageLoaded=!1,n.complete?e.imageLoaded():n.addEventListener("load",e.imageLoaded),e.modified())}}var WF={repeat:!1,interpolate:!1,edgeClamp:!1,image:null,imageLoaded:!1};function XF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,WF,n),a.c.obj(e,t),a.c.algo(e,t,6,0),a.c.get(e,t,["imageLoaded"]),a.c.setGet(e,t,["repeat","edgeClamp","interpolate","image"]),JF(e,t)}var HF={newInstance:a.c.newInstance(XF,"vtkTexture"),extend:XF},TF=Math.sqrt(50),kF=Math.sqrt(10),MF=Math.sqrt(2);function wF(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,a);return a>=0?(s>=TF?10:s>=kF?5:s>=MF?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(s>=TF?10:s>=kF?5:s>=MF?2:1)}function YF(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function OF(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function zF(e){let t=e,n=e;function r(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){const s=r+a>>>1;n(e[s],t)<0?r=s+1:a=s}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>OF(e(t),n)}(e)),{left:r,center:function(e,n,a,s){null==a&&(a=0),null==s&&(s=e.length);const i=r(e,n,a,s-1);return i>a&&t(e[i-1],n)>-t(e[i],n)?i-1:i},right:function(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){const s=r+a>>>1;n(e[s],t)>0?a=s:r=s+1}return r}}}const PF=zF(OF).right;function KF(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function jF(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _F(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qF(){}zF((function(e){return null===e?NaN:+e})).center;var $F="\\s*([+-]?\\d+)\\s*",eU="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",tU="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nU=/^#([0-9a-f]{3,8})$/,rU=new RegExp("^rgb\\("+[$F,$F,$F]+"\\)$"),aU=new RegExp("^rgb\\("+[tU,tU,tU]+"\\)$"),sU=new RegExp("^rgba\\("+[$F,$F,$F,eU]+"\\)$"),iU=new RegExp("^rgba\\("+[tU,tU,tU,eU]+"\\)$"),oU=new RegExp("^hsl\\("+[eU,tU,tU]+"\\)$"),lU=new RegExp("^hsla\\("+[eU,tU,tU,eU]+"\\)$"),BU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function QU(){return this.rgb().formatHex()}function cU(){return this.rgb().formatRgb()}function FU(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nU.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?UU(t):3===n?new IU(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?gU(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?gU(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=rU.exec(e))?new IU(t[1],t[2],t[3],1):(t=aU.exec(e))?new IU(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=sU.exec(e))?gU(t[1],t[2],t[3],t[4]):(t=iU.exec(e))?gU(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=oU.exec(e))?yU(t[1],t[2]/100,t[3]/100,1):(t=lU.exec(e))?yU(t[1],t[2]/100,t[3]/100,t[4]):BU.hasOwnProperty(e)?UU(BU[e]):"transparent"===e?new IU(NaN,NaN,NaN,0):null}function UU(e){return new IU(e>>16&255,e>>8&255,255&e,1)}function gU(e,t,n,r){return r<=0&&(e=t=n=NaN),new IU(e,t,n,r)}function dU(e){return e instanceof qF||(e=FU(e)),e?new IU((e=e.rgb()).r,e.g,e.b,e.opacity):new IU}function uU(e,t,n,r){return 1===arguments.length?dU(e):new IU(e,t,n,null==r?1:r)}function IU(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function mU(){return"#"+bU(this.r)+bU(this.g)+bU(this.b)}function CU(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function bU(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function yU(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hU(e,t,n,r)}function SU(e){if(e instanceof hU)return new hU(e.h,e.s,e.l,e.opacity);if(e instanceof qF||(e=FU(e)),!e)return new hU;if(e instanceof hU)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,o=s-a,l=(s+a)/2;return o?(i=t===s?(n-r)/o+6*(n<r):n===s?(r-t)/o+2:(t-n)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new hU(i,o,l,e.opacity)}function hU(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ZU(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}jF(qF,FU,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:QU,formatHex:QU,formatHsl:function(){return SU(this).formatHsl()},formatRgb:cU,toString:cU}),jF(IU,uU,_F(qF,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new IU(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new IU(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mU,formatHex:mU,formatRgb:CU,toString:CU})),jF(hU,(function(e,t,n,r){return 1===arguments.length?SU(e):new hU(e,t,n,null==r?1:r)}),_F(qF,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new hU(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new hU(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new IU(ZU(e>=240?e-240:e+120,a,r),ZU(e,a,r),ZU(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var xU=e=>()=>e;function pU(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):xU(isNaN(e)?t:e)}var GU=function e(t){var n=function(e){return 1==(e=+e)?pU:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):xU(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=uU(e)).r,(t=uU(t)).r),a=n(e.g,t.g),s=n(e.b,t.b),i=pU(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=s(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function RU(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(s){for(n=0;n<r;++n)a[n]=e[n]*(1-s)+t[n]*s;return a}}function LU(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r);for(n=0;n<a;++n)s[n]=DU(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<a;++n)i[n]=s[n](e);return i}}function VU(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function AU(e,t){var n,r={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=DU(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var fU=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,NU=new RegExp(fU.source,"g");function EU(e,t){var n,r,a,s=fU.lastIndex=NU.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(n=fU.exec(e))&&(r=NU.exec(t));)(a=r.index)>s&&(a=t.slice(s,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(r=r[0])?o[i]?o[i]+=r:o[++i]=r:(o[++i]=null,l.push({i:i,x:KF(n,r)})),s=NU.lastIndex;return s<t.length&&(a=t.slice(s),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)o[(n=l[r]).i]=n.x(e);return o.join("")})}function DU(e,t){var n,r=typeof t;return null==t||"boolean"===r?xU(t):("number"===r?KF:"string"===r?(n=FU(t))?(t=n,GU):EU:t instanceof FU?GU:t instanceof Date?VU:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?RU:Array.isArray(t)?LU:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?AU:KF)(e,t)}function vU(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function JU(e){return+e}var WU=[0,1];function XU(e){return e}function HU(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function TU(e,t,n){var r=e[0],a=e[1],s=t[0],i=t[1];return a<r?(r=HU(a,r),s=n(i,s)):(r=HU(r,a),s=n(s,i)),function(e){return s(r(e))}}function kU(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),s=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)a[i]=HU(e[i],e[i+1]),s[i]=n(t[i],t[i+1]);return function(t){var n=PF(e,t,1,r)-1;return s[n](a[n](t))}}function MU(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wU(){return function(){var e,t,n,r,a,s,i=WU,o=WU,l=DU,B=XU;function Q(){var e,t,n,l=Math.min(i.length,o.length);return B!==XU&&(e=i[0],t=i[l-1],e>t&&(n=e,e=t,t=n),B=function(n){return Math.max(e,Math.min(t,n))}),r=l>2?kU:TU,a=s=null,c}function c(t){return isNaN(t=+t)?n:(a||(a=r(i.map(e),o,l)))(e(B(t)))}return c.invert=function(n){return B(t((s||(s=r(o,i.map(e),KF)))(n)))},c.domain=function(e){return arguments.length?(i=Array.from(e,JU),Q()):i.slice()},c.range=function(e){return arguments.length?(o=Array.from(e),Q()):o.slice()},c.rangeRound=function(e){return o=Array.from(e),l=vU,Q()},c.clamp=function(e){return arguments.length?(B=!!e||XU,Q()):B!==XU},c.interpolate=function(e){return arguments.length?(l=e,Q()):l},c.unknown=function(e){return arguments.length?(n=e,c):n},function(n,r){return e=n,t=r,Q()}}()(XU,XU)}var YU,OU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zU(e){if(!(t=OU.exec(e)))throw new Error("invalid format: "+e);var t;return new PU({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function PU(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function KU(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function jU(e){return(e=KU(Math.abs(e)))?e[1]:NaN}function _U(e,t){var n=KU(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}zU.prototype=PU.prototype,PU.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var qU={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>_U(100*e,t),r:_U,s:function(e,t){var n=KU(e,t);if(!n)return e+"";var r=n[0],a=n[1],s=a-(YU=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=r.length;return s===i?r:s>i?r+new Array(s-i+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+KU(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function $U(e){return e}var eg,tg,ng,rg=Array.prototype.map,ag=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function sg(e,t,n,r){var a,s=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/a;return s>=TF?a*=10:s>=kF?a*=5:s>=MF&&(a*=2),t<e?-a:a}(e,t,n);switch((r=zU(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(jU(t)/3)))-jU(Math.abs(e)))}(s,i))||(r.precision=a),ng(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jU(t)-jU(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-jU(Math.abs(e)))}(s))||(r.precision=a-2*("%"===r.type))}return tg(r)}function ig(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,a,s,i,o=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(i=wF(e,t,n))||!isFinite(i))return[];if(i>0)for(e=Math.ceil(e/i),t=Math.floor(t/i),s=new Array(a=Math.ceil(t-e+1));++o<a;)s[o]=(e+o)*i;else for(i=-i,e=Math.ceil(e*i),t=Math.floor(t*i),s=new Array(a=Math.ceil(t-e+1));++o<a;)s[o]=(e+o)/i;return r&&s.reverse(),s}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return sg(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,s=t(),i=0,o=s.length-1,l=s[i],B=s[o],Q=10;for(B<l&&(a=l,l=B,B=a,a=i,i=o,o=a);Q-- >0;){if((a=wF(l,B,n))===r)return s[i]=l,s[o]=B,t(s);if(a>0)l=Math.floor(l/a)*a,B=Math.ceil(B/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,B=Math.floor(B*a)/a}r=a}return e},e}function og(){var e=wU();return e.copy=function(){return MU(e,og())},YF.apply(e,arguments),ig(e)}function lg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lg(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}eg=function(e){var t=void 0===e.grouping||void 0===e.thousands?$U:function(e,t){return function(n,r){for(var a=n.length,s=[],i=0,o=e[0],l=0;a>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(a-=o,a+o)),!((l+=o+1)>r));)o=e[i=(i+1)%e.length];return s.reverse().join(t)}}(rg.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",r=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?$U:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(rg.call(e.numerals,String)),i=void 0===e.percent?"%":e.percent+"",o=void 0===e.minus?"":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function B(e){var B=(e=zU(e)).fill,Q=e.align,c=e.sign,F=e.symbol,U=e.zero,g=e.width,d=e.comma,u=e.precision,I=e.trim,m=e.type;"n"===m?(d=!0,m="g"):qU[m]||(void 0===u&&(u=12),I=!0,m="g"),(U||"0"===B&&"="===Q)&&(U=!0,B="0",Q="=");var C="$"===F?n:"#"===F&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===F?r:/[%p]/.test(m)?i:"",y=qU[m],S=/[defgprs%]/.test(m);function h(e){var n,r,i,F=C,h=b;if("c"===m)h=y(e)+h,e="";else{var Z=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:y(Math.abs(e),u),I&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),Z&&0==+e&&"+"!==c&&(Z=!1),F=(Z?"("===c?c:o:"-"===c||"("===c?"":c)+F,h=("s"===m?ag[8+YU/3]:"")+h+(Z&&"("===c?")":""),S)for(n=-1,r=e.length;++n<r;)if(48>(i=e.charCodeAt(n))||i>57){h=(46===i?a+e.slice(n+1):e.slice(n))+h,e=e.slice(0,n);break}}d&&!U&&(e=t(e,1/0));var x=F.length+e.length+h.length,p=x<g?new Array(g-x+1).join(B):"";switch(d&&U&&(e=t(p+e,p.length?g-h.length:1/0),p=""),Q){case"<":e=F+e+h+p;break;case"=":e=F+p+e+h;break;case"^":e=p.slice(0,x=p.length>>1)+F+e+h+p.slice(x);break;default:e=p+F+e+h}return s(e)}return u=void 0===u?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,u)):Math.max(0,Math.min(20,u)),h.toString=function(){return e+""},h}return{format:B,formatPrefix:function(e,t){var n=B(((e=zU(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(jU(t)/3))),a=Math.pow(10,-r),s=ag[8+r/3];return function(e){return n(a*e)+s}}}}({thousands:",",grouping:[3],currency:["$",""]}),tg=eg.format,ng=eg.formatPrefix;var Qg=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],cg=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],Fg=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],Ug=[0,1,0,1,0,1,0,1,2,2,2,2],gg=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],dg=new Float64Array(3),ug=new Float64Array(3),Ig=new Float64Array(3),mg=new Float64Array(3),Cg=new Float64Array(3),bg=new Float64Array(3),yg=new Float64Array(16);function Sg(e,t){e.strokeStyle=t.strokeColor,e.lineWidth=t.strokeSize,e.fillStyle=t.fontColor,e.font="".concat(t.fontStyle," ").concat(t.fontSize,"px ").concat(t.fontFamily)}function hg(e,t){t.classHierarchy.push("vtkCubeAxesActor");var n=new Map;e.setCamera=function(n){t.camera!==n&&(t.cameraModifiedSub&&(t.cameraModifiedSub.unsubscribe(),t.cameraModifiedSub=null),t.camera=n,n&&(t.cameraModifiedSub=n.onModified(e.update)),e.update(),e.modified())},e.computeFacesToDraw=function(){var e=t.camera.getViewMatrix();Object(b.i)(e,e);for(var n=!1,r=st.getDiagonalLength(t.dataBounds),a=Math.sin(t.faceVisibilityAngle*Math.PI/180),s=0;s<6;s++){var i=!1,o=Math.floor(s/2),l=(o+1)%3,B=(o+2)%3;t.dataBounds[2*l]!==t.dataBounds[2*l+1]&&t.dataBounds[2*B]!==t.dataBounds[2*B+1]&&(dg[o]=t.dataBounds[s]-.1*r*Qg[s][o],dg[l]=.5*(t.dataBounds[2*l]+t.dataBounds[2*l+1]),dg[B]=.5*(t.dataBounds[2*B]+t.dataBounds[2*B+1]),Object(y.q)(Ig,dg,e),dg[o]=t.dataBounds[s],Object(y.q)(mg,dg,e),Object(y.a)(Ig,mg,Ig),Object(y.l)(Ig,Ig),i=Ig[2]>a,t.camera.getParallelProjection()||(Object(y.l)(mg,mg),i=Object(y.d)(mg,Ig)>a)),i!==t.lastFacesToDraw[s]&&(t.lastFacesToDraw[s]=i,n=!0)}return n},e.updatePolyData=function(e,n,r){var a=0,s=0;a+=8;for(var i=0,o=0;o<12;o++)n[o]>0&&i++;if(s+=i,t.gridLines)for(var l=0;l<6;l++)e[l]&&(a+=2*r[gg[l][0]].length+2*r[gg[l][1]].length,s+=r[gg[l][0]].length+r[gg[l][1]].length);for(var B=new Float64Array(3*a),Q=new Uint32Array(3*s),c=0,F=0,U=0;U<2;U++)for(var g=0;g<2;g++)for(var d=0;d<2;d++)B[3*c]=t.dataBounds[d],B[3*c+1]=t.dataBounds[2+g],B[3*c+2]=t.dataBounds[4+U],c++;for(var u=0;u<12;u++)n[u]>0&&(Q[3*F]=2,Q[3*F+1]=Fg[u][0],Q[3*F+2]=Fg[u][1],F++);if(t.gridLines)for(var I=0;I<6;I++)if(e[I]){for(var m=Math.floor(I/2),C=r[gg[I][0]],b=0;b<C.length;b++)B[3*c+m]=t.dataBounds[I],B[3*c+gg[I][0]]=C[b],B[3*c+gg[I][1]]=t.dataBounds[2*gg[I][1]],B[3*++c+m]=t.dataBounds[I],B[3*c+gg[I][0]]=C[b],B[3*c+gg[I][1]]=t.dataBounds[2*gg[I][1]+1],c++,Q[3*F]=2,Q[3*F+1]=c-2,Q[3*F+2]=c-1,F++;C=r[gg[I][1]];for(var y=0;y<C.length;y++)B[3*c+m]=t.dataBounds[I],B[3*c+gg[I][1]]=C[y],B[3*c+gg[I][0]]=t.dataBounds[2*gg[I][0]],B[3*++c+m]=t.dataBounds[I],B[3*c+gg[I][1]]=C[y],B[3*c+gg[I][0]]=t.dataBounds[2*gg[I][0]+1],c++,Q[3*F]=2,Q[3*F+1]=c-2,Q[3*F+2]=c-1,F++}t.polyData.getPoints().setData(B,3),t.polyData.getPoints().modified(),t.polyData.getLines().setData(Q,1),t.polyData.getLines().modified(),t.polyData.modified()},e.updateTextData=function(e,n,r,a){for(var s=0,i=0;i<12;i++)1===n[i]&&(s+=2,s+=r[Ug[i]].length);for(var o=t.polyData.getPoints().getData(),l=new Float64Array(3*s),B=0,Q=0,c=0,F=0;F<6;F++)if(e[F])for(var U=0;U<4;U++){var g=cg[F][U];if(1===n[g]){var d=Ug[g],u=3*Fg[g][0],I=3*Fg[g][1];l[3*B]=.5*(o[u]+o[I]),l[3*B+1]=.5*(o[u+1]+o[I+1]),l[3*B+2]=.5*(o[u+2]+o[I+2]),l[3*++B+Math.floor(F/2)]=t.dataBounds[F],l[3*B+gg[F][0]]=.5*(t.dataBounds[2*gg[F][0]]+t.dataBounds[2*gg[F][0]+1]),l[3*B+gg[F][1]]=.5*(t.dataBounds[2*gg[F][1]]+t.dataBounds[2*gg[F][1]+1]),B++,t.textValues[Q]=t.axisLabels[d],Q++;var m=(d+1)%3,C=(d+2)%3,b=r[d],y=a[d];t.tickCounts[c]=b.length;for(var S=0;S<b.length;S++)l[3*B+d]=b[S],l[3*B+m]=o[u+m],l[3*B+C]=o[u+C],B++,t.textValues[Q]=y[S],Q++;c++}}t.textPolyData.getPoints().setData(l,3),t.textPolyData.modified()},e.update=function(){for(var n=e.computeFacesToDraw(),r=t.lastFacesToDraw,a=!1,s=0;s<6;s++)t.dataBounds[s]!==t.lastTickBounds[s]&&(a=!0,t.lastTickBounds[s]=t.dataBounds[s]);if(n||a||t.forceUpdate){for(var i=new Array(12).fill(0),o=0;o<6;o++)if(r[o])for(var l=0;l<4;l++)i[cg[o][l]]++;for(var B=[],Q=[],c=0;c<3;c++){var F=og().domain([t.dataBounds[2*c],t.dataBounds[2*c+1]]);B[c]=F.ticks(5);var U=F.tickFormat(5);Q[c]=B[c].map(U)}e.updatePolyData(r,i,B),e.updateTextData(r,i,B,Q),(a||t.forceUpdate)&&e.updateTextureAtlas(Q)}e.updateTexturePolyData(),t.forceUpdate=!1},e.updateTextureAtlas=function(e){t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",n.clear();for(var r=0,a=1,s=0;s<3;s++){if(!n.has(t.axisLabels[s])){Sg(t.tmContext,t.axisTextStyle);var i=t.tmContext.measureText(t.axisLabels[s]),o={height:i.actualBoundingBoxAscent+2,startingHeight:a,width:i.width+2,textStyle:t.axisTextStyle};n.set(t.axisLabels[s],o),a+=o.height,r<o.width&&(r=o.width)}Sg(t.tmContext,t.tickTextStyle);for(var l=0;l<e[s].length;l++)if(!n.has(e[s][l])){var B=t.tmContext.measureText(e[s][l]),Q={height:B.actualBoundingBoxAscent+2,startingHeight:a,width:B.width+2,textStyle:t.tickTextStyle};n.set(e[s][l],Q),a+=Q.height,r<Q.width&&(r=Q.width)}}r=Object(u.h)(r),a=Object(u.h)(a),n.forEach((function(e){e.tcoords=[0,(a-e.startingHeight-e.height)/a,e.width/r,(a-e.startingHeight-e.height)/a,e.width/r,(a-e.startingHeight)/a,0,(a-e.startingHeight)/a]})),t.tmCanvas.width=r,t.tmCanvas.height=a,t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t.tmContext.clearRect(0,0,r,a),n.forEach((function(e,n){Sg(t.tmContext,e.textStyle),t.tmContext.fillText(n,1,e.startingHeight+e.height-1)}));var c=new Image;c.src=t.tmCanvas.toDataURL("image/png"),t.tmTexture.setImage(c),t.tmTexture.modified()},e.createPolyDataForOneLabel=function(e,r,a,s,i,o,l){var B=n.get(e);if(B){var Q=t.textPolyData.getPoints().getData(),c=t.lastSize;dg[0]=Q[3*r],dg[1]=Q[3*r+1],dg[2]=Q[3*r+2],Object(y.q)(Ig,dg,a),Ig[0]+=.1,Object(y.q)(ug,Ig,s),Object(y.a)(Cg,ug,dg),Ig[0]-=.1,Ig[1]+=.1,Object(y.q)(ug,Ig,s),Object(y.a)(bg,ug,dg);for(var F=0;F<3;F++)Cg[F]/=.05*c[0],bg[F]/=.05*c[1];var U=l.ptIdx,g=l.cellIdx;dg[0]=Q[3*r],dg[1]=Q[3*r+1],dg[2]=Q[3*r+2],i[0]<-.5?Object(y.b)(Ig,Cg,i[0]*o-B.width):i[0]>.5?Object(y.b)(Ig,Cg,i[0]*o):Object(y.b)(Ig,Cg,i[0]*o-B.width/2),Object(y.g)(dg,dg,Ig),Object(y.b)(Ig,bg,i[1]*o-B.height/2),Object(y.g)(dg,dg,Ig),l.points[3*U]=dg[0],l.points[3*U+1]=dg[1],l.points[3*U+2]=dg[2],l.tcoords[2*U]=B.tcoords[0],l.tcoords[2*U+1]=B.tcoords[1],U++,Object(y.b)(Ig,Cg,B.width),Object(y.g)(dg,dg,Ig),l.points[3*U]=dg[0],l.points[3*U+1]=dg[1],l.points[3*U+2]=dg[2],l.tcoords[2*U]=B.tcoords[2],l.tcoords[2*U+1]=B.tcoords[3],U++,Object(y.b)(Ig,bg,B.height),Object(y.g)(dg,dg,Ig),l.points[3*U]=dg[0],l.points[3*U+1]=dg[1],l.points[3*U+2]=dg[2],l.tcoords[2*U]=B.tcoords[4],l.tcoords[2*U+1]=B.tcoords[5],U++,Object(y.b)(Ig,Cg,B.width),Object(y.a)(dg,dg,Ig),l.points[3*U]=dg[0],l.points[3*U+1]=dg[1],l.points[3*U+2]=dg[2],l.tcoords[2*U]=B.tcoords[6],l.tcoords[2*U+1]=B.tcoords[7],U++,l.polys[4*g]=3,l.polys[4*g+1]=U-4,l.polys[4*g+2]=U-3,l.polys[4*g+3]=U-2,g++,l.polys[4*g]=3,l.polys[4*g+1]=U-4,l.polys[4*g+2]=U-2,l.polys[4*g+3]=U-1,l.ptIdx+=4,l.cellIdx+=2}},e.updateTexturePolyData=function(){var n=t.camera.getCompositeProjectionMatrix(t.lastAspectRatio,-1,1);Object(b.i)(n,n);var r=t.textValues.length,a=4*r,i=2*r,o=new Float64Array(3*a),l=new Uint16Array(4*i),B=new Float32Array(2*a);Object(b.g)(yg,n);for(var Q={ptIdx:0,cellIdx:0,polys:l,points:o,tcoords:B},c=0,F=0,U=0,g=t.textPolyData.getPoints().getData();c<g.length/3;){dg[0]=g[3*c],dg[1]=g[3*c+1],dg[2]=g[3*c+2],Object(y.q)(Ig,dg,n),dg[0]=g[3*c+3],dg[1]=g[3*c+4],dg[2]=g[3*c+5],Object(y.q)(mg,dg,n),Object(y.a)(Ig,Ig,mg);var d=[Ig[0],Ig[1]];Object(u.i)(d),e.createPolyDataForOneLabel(t.textValues[F],c,n,yg,d,t.axisTitlePixelOffset,Q),c+=2,F++;for(var I=0;I<t.tickCounts[U];I++)e.createPolyDataForOneLabel(t.textValues[F],c,n,yg,d,t.tickLabelPixelOffset,Q),c++,F++;U++}var m=s.a.newInstance({numberOfComponents:2,values:B,name:"TextureCoordinates"});t.tmPolyData.getPointData().setTCoords(m),t.tmPolyData.getPoints().setData(o,3),t.tmPolyData.getPoints().modified(),t.tmPolyData.getPolys().setData(l,1),t.tmPolyData.getPolys().modified(),t.tmPolyData.modified()},e.getActors=function(){return[t.pixelActor,t.tmActor]},e.getNestedProps=function(){return e.getActors()},e.onModified((function(){t.forceUpdate=!0,e.update()})),e.setTickTextStyle=function(n){t.tickTextStyle=Bg(Bg({},t.tickTextStyle),n),e.modified()},e.setAxisTextStyle=function(n){t.axisTextStyle=Bg(Bg({},t.axisTextStyle),n),e.modified()}}function Zg(e){return Bg({camera:null,dataBounds:Object(r.a)(st.INIT_BOUNDS),faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:12,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"}},e)}function xg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zg(n)),fF.extend(e,t,n),t.lastSize=[800,800],t.lastAspectRatio=1,t.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],t.axisLabels=["X-Axis","Y-Axis","Z-Axis"],t.tickCounts=[],t.textValues=[],t.lastTickBounds=[],t.mapper=oa.newInstance(),t.polyData=o.a.newInstance(),t.mapper.setInputData(t.polyData),e.getProperty().setDiffuse(0),e.getProperty().setAmbient(1),t.textPolyData=o.a.newInstance(),t.tmPolyData=o.a.newInstance(),t.tmMapper=oa.newInstance(),t.tmMapper.setInputData(t.tmPolyData),t.tmTexture=HF.newInstance(),t.tmTexture.setInterpolate(!1),t.tmActor=fF.newInstance(),t.tmActor.setMapper(t.tmMapper),t.tmActor.addTexture(t.tmTexture),t.tmCanvas=document.createElement("canvas"),t.tmContext=t.tmCanvas.getContext("2d"),t.pixelMapper=vF.newInstance(),t.pixelMapperPolyData=o.a.newInstance(),t.pixelMapper.setInputData(t.pixelMapperPolyData),t.pixelMapper.setCallback((function(e,n,r,a,s){t.lastSize=s,t.lastAspectRatio=s[0]/s[1]})),t.pixelActor=fF.newInstance(),t.pixelActor.setMapper(t.pixelMapper),a.c.setGet(e,t,["axisTitlePixelOffset","faceVisibilityAngle","gridLines","tickLabelPixelOffset"]),a.c.setGetArray(e,t,["dataBounds"],6),a.c.setGetArray(e,t,["axisLabels"],3),a.c.get(e,t,["axisTextStyle","tickTextStyle","camera"]),hg(e,t)}var pg={newInstance:a.c.newInstance(xg,"vtkCubeAxesActor"),extend:xg};var Gg=function(e){Yt(n,jt.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pt(this,n)}}(n);function n(e){var r;return Object(Se.a)(this,n),(r=t.call(this,e)).actor=fF.newInstance({representationId:e.id}),r.lookupTable=XQ.newInstance(),r.mapper=oa.newInstance({lookupTable:r.lookupTable,useLookupTableScalarRange:!0}),r.actor.setMapper(r.mapper),r.cubeAxes=pg.newInstance({visibility:!1,dataBounds:[-1,1,-1,1,-1,1]}),r.cubeAxes.getActors().forEach((function(e){return(0,e.setVisibility)(!1)})),r.subscriptions=[],r.subscriptions.push(r.mapper.onModified((function e(){if(r.mapper.getInputData()){1===r.subscriptions.length&&r.subscriptions.push(r.mapper.getInputData().onModified(e));var t=r.mapper.getInputData().getBounds();t[0]<t[1]&&(r.cubeAxes.setDataBounds(t),r.view&&r.view.renderView())}}))),r}return Object(he.a)(n,[{key:"render",value:function(){var e=this;return _t.a.createElement($B.Consumer,null,(function(t){return e.view||(e.cubeAxes.setCamera(t.renderer.getActiveCamera()),t.renderer.addActor(e.cubeAxes),t.renderer.addActor(e.actor),e.view=t),_t.a.createElement(eQ.Provider,{value:e},_t.a.createElement(rQ.Provider,{value:e.mapper},_t.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.view&&this.view.renderer&&(this.view.renderer.removeActor(this.cubeAxes),this.view.renderer.removeActor(this.actor)),this.actor.delete(),this.actor=null,this.mapper.delete(),this.mapper=null,this.lookupTable.delete(),this.lookupTable=null}},{key:"update",value:function(e,t){var n,a=0,s=e.cubeAxesStyle,i=e.showCubeAxes,o=e.actor,l=e.mapper,B=e.property,Q=e.colorMapPreset,c=e.colorDataRange;if(!o||t&&o===t.actor||this.actor.set(o),!l||t&&l===t.mapper||this.mapper.set(l),!B||t&&B===t.property||this.actor.getProperty().set(B),Q&&(!t||Q!==t.colorMapPreset)){var F,U=ZQ.getPresetByName(Q);this.lookupTable.applyColorMap(U),(F=this.lookupTable).setMappingRange.apply(F,Object(r.a)(c)),this.lookupTable.updateRange()}!c||t&&c===t.colorDataRange||((n=this.lookupTable).setMappingRange.apply(n,Object(r.a)(c)),this.lookupTable.updateRange()),!s||t&&s===t.cubeAxesStyle||(this.cubeAxes.set(s),a++),i!==this.cubeAxes.getVisibility()&&(this.cubeAxes.setVisibility(i),this.cubeAxes.getActors().forEach((function(e){return(0,e.setVisibility)(i)})),a++),this.view&&a&&this.view.renderView()}},{key:"dataChanged",value:function(){this.view&&this.view.renderView()}}]),n}();Gg.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1],showCubeAxes:!1},Gg.propTypes={id:$t.a.string,actor:$t.a.object,mapper:$t.a.object,property:$t.a.object,colorMapPreset:$t.a.string,colorDataRange:$t.a.arrayOf($t.a.number),showCubeAxes:$t.a.bool,cubeAxesStyle:$t.a.object,children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var Rg=Gg,Lg={OrientationModes:{DIRECTION:0,ROTATION:1,MATRIX:2},ScaleModes:{SCALE_BY_CONSTANT:0,SCALE_BY_MAGNITUDE:1,SCALE_BY_COMPONENTS:2}};function Vg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ag=Lg.OrientationModes,fg=Lg.ScaleModes,Ng=a.c.vtkErrorMacro;function Eg(e,t){t.classHierarchy.push("vtkGlyph3DMapper"),e.getOrientationModeAsString=function(){return a.c.enumToString(Ag,t.orientationMode)},e.setOrientationModeToDirection=function(){return e.setOrientationMode(Ag.DIRECTION)},e.setOrientationModeToRotation=function(){return e.setOrientationMode(Ag.ROTATION)},e.setOrientationModeToMatrix=function(){return e.setOrientationMode(Ag.MATRIX)},e.getOrientationArrayData=function(){var n=e.getInputData(0);return n&&n.getPointData()?t.orientationArray?n.getPointData().getArray(t.orientationArray):n.getPointData().getVectors():null},e.getScaleModeAsString=function(){return a.c.enumToString(fg,t.scaleMode)},e.setScaleModeToScaleByMagnitude=function(){return e.setScaleMode(fg.SCALE_BY_MAGNITUDE)},e.setScaleModeToScaleByComponents=function(){return e.setScaleMode(fg.SCALE_BY_COMPONENTS)},e.setScaleModeToScaleByConstant=function(){return e.setScaleMode(fg.SCALE_BY_CONSTANT)},e.getScaleArrayData=function(){var n=e.getInputData(0);return n&&n.getPointData()?t.scaleArray?n.getPointData().getArray(t.scaleArray):n.getPointData().getScalars():null},e.getBounds=function(){var n=e.getInputData(0),r=e.getInputData(1);return n&&r?(e.buildArrays(),t.bounds):Object(u.j)()},e.buildArrays=function(){var n=e.getInputData(0),a=e.getInputData(1);if(t.buildTime.getMTime()<a.getMTime()||t.buildTime.getMTime()<n.getMTime()||t.buildTime.getMTime()<e.getMTime()){var s=n.getPoints().getData(),i=e.getScaleArrayData(),o=null,l=0;i&&(o=i.getData(),l=i.getNumberOfComponents()),t.scaling&&i&&t.scaleMode===fg.SCALE_BY_COMPONENTS&&3!==i.getNumberOfComponents()&&(Ng("Cannot scale by components since scale array does not have 3 components."),i=null);var B=a.getBounds(),Q=[];st.getCorners(B,Q),t.bounds[0]=st.INIT_BOUNDS[0],t.bounds[1]=st.INIT_BOUNDS[1],t.bounds[2]=st.INIT_BOUNDS[2],t.bounds[3]=st.INIT_BOUNDS[3],t.bounds[4]=st.INIT_BOUNDS[4],t.bounds[5]=st.INIT_BOUNDS[5];var c=new Float64Array(3),F=e.getOrientationArrayData(),U=Object(b.h)(new Float64Array(16)),g=[],d=[],I=s.length/3;t.matrixArray=new Float32Array(16*I);var m=t.matrixArray.buffer;t.normalArray=new Float32Array(9*I);for(var C=t.normalArray.buffer,S=[],h=0;h<I;++h){var Z=new Float32Array(m,64*h,16);if(g[0]=s[3*h],g[1]=s[3*h+1],g[2]=s[3*h+2],Object(b.s)(Z,U,g),F){var x=[];switch(F.getTuple(h,x),t.orientationMode){case Ag.MATRIX:var p=[].concat(Object(r.a)(x.slice(0,3)),[0],Object(r.a)(x.slice(3,6)),[0],Object(r.a)(x.slice(6,9)),[0,0,0,0,1]);Object(b.l)(Z,Z,p);break;case Ag.ROTATION:Object(b.c)(Z,Z,x[2]),Object(b.a)(Z,Z,x[0]),Object(b.b)(Z,Z,x[1]);break;case Ag.DIRECTION:if(0===x[1]&&0===x[2])x[0]<0&&Object(b.b)(Z,Z,3.1415926);else{var G=Object(u.A)(x),R=[];R[0]=(x[0]+G)/2,R[1]=x[1]/2,R[2]=x[2]/2,Object(b.q)(Z,Z,3.1415926,R)}}}if(t.scaling){if(d[0]=t.scaleFactor,d[1]=t.scaleFactor,d[2]=t.scaleFactor,i)switch(t.scaleMode){case fg.SCALE_BY_MAGNITUDE:for(var L=0;L<l;++L)S[L]=o[h*l+L];d[0]*=Object(u.A)(S,l),d[1]=d[0],d[2]=d[0];break;case fg.SCALE_BY_COMPONENTS:for(var V=0;V<l;++V)S[V]=o[h*l+V];d[0]*=S[0],d[1]*=S[1],d[2]*=S[2];break;case fg.SCALE_BY_CONSTANT:}0===d[0]&&(d[0]=1e-10),0===d[1]&&(d[1]=1e-10),0===d[2]&&(d[2]=1e-10),Object(b.r)(Z,Z,d)}for(var A=0;A<8;++A)Object(y.q)(c,Q[A],Z),c[0]<t.bounds[0]&&(t.bounds[0]=c[0]),c[1]<t.bounds[2]&&(t.bounds[2]=c[1]),c[2]<t.bounds[4]&&(t.bounds[4]=c[2]),c[0]>t.bounds[1]&&(t.bounds[1]=c[0]),c[1]>t.bounds[3]&&(t.bounds[3]=c[1]),c[2]>t.bounds[5]&&(t.bounds[5]=c[2]);var f=new Float32Array(C,36*h,9);gt(f,Z),It(f,f),ut(f,f)}var N=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),t.colorArray=null;var E=e.getLookupTable();E&&N&&(E.build(),t.colorArray=E.mapScalars(N,t.colorMode,0)),t.buildTime.modified()}},e.getPrimitiveCount=function(){var t=e.getInputData(1),n=e.getInputData().getPoints().getNumberOfValues()/3;return{points:n*t.getPoints().getNumberOfValues()/3,verts:n*(t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells()),lines:n*(t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells()),triangles:n*(t.getPolys().getNumberOfValues()-3*t.getLines().getNumberOfCells())}}}var Dg={orient:!0,orientationMode:Ag.DIRECTION,orientationArray:null,scaling:!0,scaleFactor:1,scaleMode:fg.SCALE_BY_MAGNITUDE,scaleArray:null,matrixArray:null,normalArray:null,colorArray:null};function vg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dg,n),oa.extend(e,t,n),a.c.algo(e,t,2,0),t.buildTime={},a.c.obj(t.buildTime,{mtime:0}),t.boundsTime={},a.c.obj(t.boundsTime,{mtime:0}),a.c.setGet(e,t,["orient","orientationMode","orientationArray","scaleArray","scaleFactor","scaleMode","scaling"]),a.c.get(e,t,["colorArray","matrixArray","normalArray","buildTime"]),Eg(e,t)}var Jg=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vg(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(vg,"vtkGlyph3DMapper"),extend:vg},Lg);var Wg=function(e){Yt(n,jt.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pt(this,n)}}(n);function n(e){var r;return Object(Se.a)(this,n),(r=t.call(this,e)).actor=fF.newInstance(),r.lookupTable=XQ.newInstance(),r.mapper=Jg.newInstance({lookupTable:r.lookupTable,useLookupTableScalarRange:!0}),r.actor.setMapper(r.mapper),r}return Object(he.a)(n,[{key:"render",value:function(){var e=this;return _t.a.createElement($B.Consumer,null,(function(t){return e.view||(t.renderer.addActor(e.actor),e.view=t),_t.a.createElement(eQ.Provider,{value:e},_t.a.createElement(rQ.Provider,{value:e.mapper},_t.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.view&&this.view.renderer.removeActor(this.actor),this.actor.delete(),this.actor=null,this.mapper.delete(),this.mapper=null,this.lookupTable.delete(),this.lookupTable=null}},{key:"update",value:function(e,t){var n,a=e.actor,s=e.mapper,i=e.property,o=e.colorMapPreset,l=e.colorDataRange;if(!a||t&&a===t.actor||this.actor.set(a),!s||t&&s===t.mapper||this.mapper.set(s),!i||t&&i===t.property||this.actor.getProperty().set(i),o&&(!t||o!==t.colorMapPreset)){var B,Q=ZQ.getPresetByName(o);this.lookupTable.applyColorMap(Q),(B=this.lookupTable).setMappingRange.apply(B,Object(r.a)(l)),this.lookupTable.updateRange()}!l||t&&l===t.colorDataRange||((n=this.lookupTable).setMappingRange.apply(n,Object(r.a)(l)),this.lookupTable.updateRange())}},{key:"dataChanged",value:function(){this.view&&this.view.renderView()}}]),n}();Wg.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1]},Wg.propTypes={id:$t.a.string,actor:$t.a.object,mapper:$t.a.object,property:$t.a.object,colorMapPreset:$t.a.string,colorDataRange:$t.a.arrayOf($t.a.number),children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var Xg=Wg;var Hg=function(e){Yt(n,jt.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pt(this,n)}}(n);function n(e){var r;return Object(Se.a)(this,n),(r=t.call(this,e)).imageData=Gt.newInstance(),r}return Object(he.a)(n,[{key:"render",value:function(){var e=this;return _t.a.createElement(eQ.Consumer,null,(function(t){return _t.a.createElement(rQ.Consumer,null,(function(n){return e.representation=t,e.downstream||(e.downstream=n),_t.a.createElement(tQ.Provider,{value:e.imageData},_t.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}},{key:"componentDidMount",value:function(){this.update(this.props),this.downstream.setInputData(this.imageData,this.props.port)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.imageData.delete(),this.imageData=null}},{key:"update",value:function(e,t){var n=e.dimensions,r=e.spacing,a=e.origin,s=e.direction;this.imageData.set({dimensions:n,spacing:r,origin:a,direction:s})}}]),n}();Hg.defaultProps={port:0,dimensions:[1,1,1],spacing:[1,1,1],origin:[0,0,0],direction:[1,0,0,0,1,0,0,0,1]},Hg.propTypes={id:$t.a.string,port:$t.a.number,dimensions:$t.a.arrayOf($t.a.number),spacing:$t.a.arrayOf($t.a.number),origin:$t.a.arrayOf($t.a.number),direction:$t.a.arrayOf($t.a.number),children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var Tg=Hg;var kg=function(e){Yt(n,jt.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pt(this,n)}}(n);function n(e){var r;return Object(Se.a)(this,n),(r=t.call(this,e)).array=s.a.newInstance({empty:!0}),r}return Object(he.a)(n,[{key:"render",value:function(){var e=this;return _t.a.createElement(eQ.Consumer,null,(function(t){return _t.a.createElement(tQ.Consumer,null,(function(n){return e.representation=t,e.dataset=n,_t.a.createElement(nQ.Consumer,null,(function(t){return e.fields||(e.fields=t),_t.a.createElement("div",{key:e.props.id,name:e.props.name})}))}))}))}},{key:"componentDidMount",value:function(){this.update(this.props),this.fields[this.props.registration](this.array)}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.fields.removeArray(this.array),this.array.delete(),this.array=null}},{key:"update",value:function(e,t){var n=e.name,r=e.type,s=e.values,i=e.numberOfComponents,o=a.a[r],l=!1;this.array.setName(n),!r||t&&r===t.type||(l=!0),!i||t&&i===t.numberOfComponents||(l=!0),!s||!l&&t&&s===t.values||(this.array.setData(o.from(s),i),this.dataset&&this.dataset.modified(),this.representation&&this.representation.dataChanged())}}]),n}();kg.defaultProps={name:"scalars",type:"Float32Array",values:[],numberOfComponents:1,registration:"addArray"},kg.propTypes={id:$t.a.string,type:$t.a.string,name:$t.a.string,values:$t.a.arrayOf($t.a.number),numberOfComponents:$t.a.number,registration:$t.a.string};var Mg=kg;function wg(e){return _t.a.createElement(tQ.Consumer,null,(function(t){return _t.a.createElement(nQ.Provider,{value:t.getFieldData()},e.children)}))}wg.defaultProps={},wg.propTypes={children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var Yg=wg;function Og(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Og(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Og(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pg=function(e){Yt(n,jt.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pt(this,n)}}(n);function n(e){var r;return Object(Se.a)(this,n),(r=t.call(this,e)).algo=null,r}return Object(he.a)(n,[{key:"render",value:function(){var e=this;return _t.a.createElement(eQ.Consumer,null,(function(t){return _t.a.createElement(rQ.Consumer,null,(function(n){if(e.representation=t,!e.algo){var r=e.props,a=r.vtkClass,s=r.state;e.algo=Object(L.a)(zg({vtkClass:a},s))}return e.downstream||(n.setInputConnection(e.algo.getOutputPort(),e.props.port),e.downstream=n),_t.a.createElement(rQ.Provider,{value:e.algo},_t.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}},{key:"componentDidUpdate",value:function(e,t,n){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.algo.delete(),this.algo=null}},{key:"update",value:function(e,t){var n=e.vtkClass,r=e.state;!n||t&&n===t.vtkClass||(this.algo=Object(L.a)(zg({vtkClass:n},r)),this.downstream.setInputConnection(this.algo.getOutputPort(),this.props.port)),!r||t&&r===t.state||(this.algo.set(r),this.representation&&this.representation.dataChanged())}}]),n}();Pg.defaultProps={port:0,vtkClass:"vtkConeSource",state:{}},Pg.propTypes={id:$t.a.string,port:$t.a.number,vtkClass:$t.a.string,state:$t.a.object,children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var Kg=Pg;function jg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _g=a.c.vtkWarningMacro;function qg(e,t){t.classHierarchy.push("vtkCalculator"),e.setFormula=function(n){return n!==t.formula&&(t.formula=n,e.modified(),!0)},e.getFormula=function(){return t.formula},e.augmentInputArrays=function(e,t){var n=t.slice(0);return e!==jB.b.POINT&&e!==jB.b.VERTEX||n.push({location:jB.b.COORDINATE}),n},e.createSimpleFormulaObject=function(t,n,a,s){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{getArrays:function(){return{input:e.augmentInputArrays(t,n.map((function(e){return{location:t,name:e}}))),output:[{location:t,name:a,attribute:"outputAttributeType"in i?i.outputAttributeType:J.a.SCALARS,numberOfComponents:"numberOfOutputComponents"in i?i.numberOfOutputComponents:1}]}},evaluate:function(e,t){var n=new Array(e.length),a=e.map((function(e,t){var r=e.getNumberOfComponents(),a=e.getData();return 1===r?function(e){return a[e]}:function(r){return e.getTuple(r,n[t])}})),i=t[0],o=i.getData(),l=i.getNumberOfComponents(),B=new Array(l);if(1===l)o.forEach((function(e,t){o[t]=s.apply(void 0,Object(r.a)(a.map((function(e){return e(t)}))).concat([t,B]))}));else for(var Q=i.getNumberOfTuples(),c=function(e){B=s.apply(void 0,Object(r.a)(a.map((function(t){return t(e)}))).concat([e,B])),i.setTuple(e,B)},F=0;F<Q;++F)c(F)}}},e.setFormulaSimple=function(t,n,r,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e.setFormula(e.createSimpleFormulaObject(t,n,r,a,s))},e.prepareArrays=function(e,t,n){var r=[],a=[];return e.input.forEach((function(e){if(e.location===jB.b.COORDINATE)r.push(t.getPoints());else{var n=[[jB.b.UNIFORM,function(e){return e.getFieldData()}],[jB.b.POINT,function(e){return e.getPointData()}],[jB.b.CELL,function(e){return e.getCellData()}],[jB.b.VERTEX,function(e){return e.getVertexData()}],[jB.b.EDGE,function(e){return e.getEdgeData()}],[jB.b.ROW,function(e){return e.getRowData()}]].reduce((function(e,t){return e[t[0]]=t[1],e}),{}),a="location"in e&&e.location in n?n[e.location](t):null;a?e.name?r.push(a.getArrayByName(e.name)):"index"in e?r.push(a.getArrayByIndex(e.index)):"attribute"in e&&e.location!==jB.b.UNIFORM?r.push(a.getActiveAttribute(e.attribute)):(_g('No matching array for specifier "'.concat(JSON.stringify(e),'".')),r.push(null)):(_g('Specifier "'.concat(JSON.stringify(e),'" did not provide a usable location.')),r.push(null))}})),e.output.forEach((function(e){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jg(Object(n),!0).forEach((function(t){Object(ye.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),i="numberOfComponents"in r?r.numberOfComponents:1;if(e.location===jB.b.UNIFORM&&"tuples"in r&&(r.size=i*r.tuples),e.location===jB.b.COORDINATE){var o=t.getPoints(),l=V.a.newInstance({dataType:o.getDataType()});l.setNumberOfPoints(o.getNumberOfPoints(),o.getNumberOfComponents()),n.setPoints(l),a.push(l)}else{var B=[[jB.b.UNIFORM,function(e){return e.getFieldData()},function(e,t){return"tuples"in t?t.tuples:0}],[jB.b.POINT,function(e){return e.getPointData()},function(e){return e.getPoints().getNumberOfPoints()}],[jB.b.CELL,function(e){return e.getCellData()},function(e){return e.getNumberOfCells()}],[jB.b.VERTEX,function(e){return e.getVertexData()},function(e){return e.getNumberOfVertices()}],[jB.b.EDGE,function(e){return e.getEdgeData()},function(e){return e.getNumberOfEdges()}],[jB.b.ROW,function(e){return e.getRowData()},function(e){return e.getNumberOfRows()}]].reduce((function(e,t){return e[t[0]]={getData:t[1],getSize:t[2]},e}),{}),Q=null,c=0;if("location"in e&&e.location in B&&(Q=B[e.location].getData(n),c=B[e.location].getSize(t,r)),c<=0)_g("Output array size could not be determined for ".concat(JSON.stringify(e),".")),a.push(null);else if(Q){r.size=i*c;var F=s.a.newInstance(r),U=Q.addArray(F);"attribute"in r&&e.location!==jB.b.UNIFORM&&Q.setActiveAttributeByIndex(U,r.attribute),a.push(F)}else _g('Specifier "'.concat(JSON.stringify(e),'" did not provide a usable location.')),a.push(null)}})),{arraysIn:r,arraysOut:a}},e.requestData=function(n,r){if(!t.formula)return 0;var a=t.formula.getArrays(n),s=Object(L.a)({vtkClass:n[0].getClassName()});s.shallowCopy(n[0]),r[0]=s;var i=e.prepareArrays(a,n[0],r[0]);return t.formula.evaluate(i.arraysIn,i.arraysOut),1}}var $g={formula:{getArrays:function(){return{input:[],output:[]}},evaluate:function(){return null}}};function ed(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$g,n),a.c.obj(e,t),a.c.algo(e,t,1,1),qg(e,t)}var td={newInstance:a.c.newInstance(ed,"vtkCalculator"),extend:ed};var nd=it.a.FieldDataTypes,rd=function(e){Yt(n,jt.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pt(this,n)}}(n);function n(e){var r;return Object(Se.a)(this,n),(r=t.call(this,e)).calculator=td.newInstance(),r}return Object(he.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.arrays,a=t.location,s=t.formula;return this.calculator.setFormulaSimple(nd[a],r,n,s),_t.a.createElement(rQ.Consumer,null,(function(t){return e.downstream||(t.setInputConnection(e.calculator.getOutputPort(),e.props.port),e.downstream=t),_t.a.createElement(rQ.Provider,{value:e.calculator},_t.a.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}},{key:"componentWillUnmount",value:function(){this.calculator.delete(),this.calculator=null}}]),n}();rd.defaultProps={port:0,name:"scalars",location:"POINT",arrays:[],formula:function(e){return e[0]}},rd.propTypes={id:$t.a.string,port:$t.a.number,name:$t.a.string,location:$t.a.string,arrays:$t.a.arrayOf($t.a.string),formula:$t.a.func,children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var ad=rd;function sd(e){return _t.a.createElement(tQ.Consumer,null,(function(t){return _t.a.createElement(nQ.Provider,{value:t.getCellData()},e.children)}))}sd.defaultProps={},sd.propTypes={children:$t.a.oneOfType([$t.a.arrayOf($t.a.node),$t.a.node])};var id={VolumeRepresentation:sc,SliceRepresentation:Rc,VolumeController:dF,PointData:IF,PolyData:CF,Reader:yF,ShareDataSet:pF,View:oQ,GeometryRepresentation:Rg,GlyphRepresentation:Xg,ImageData:Tg,DataArray:Mg,FieldData:Yg,Algorithm:Kg,Calculator:ad,CellData:sd};function od(e){var t=0,n=null,r=null;return e.rgb&&(n=e.rgb,t=3,r="Uint8Array"),e.rgba&&(n=e.rgb,t=4,r="Uint8Array"),e.scalars&&(n=e.scalars,t=1,r="Float32Array"),console.log("nbComponents",t),_t.a.createElement(Rg,{id:e.id,colorMapPreset:e.colorMapPreset,colorDataRange:e.colorDataRange,property:e.property},_t.a.createElement(CF,{points:e.xyz,connectivity:"points"},t&&_t.a.createElement(IF,null,_t.a.createElement(Mg,{registration:"setScalars",numberOfComponents:t,values:n,type:r}))))}od.defaultProps={xyz:[0,0,0],colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1]},od.propTypes={id:$t.a.string,xyz:$t.a.arrayOf($t.a.number),rgb:$t.a.arrayOf($t.a.number),rgba:$t.a.arrayOf($t.a.number),scalars:$t.a.arrayOf($t.a.number),colorMapPreset:$t.a.string,colorDataRange:$t.a.arrayOf($t.a.number),property:$t.a.object};var ld=od;function Bd(e){var t=0,n=null,r=null;return e.rgb&&(n=e.rgb,t=3,r="Uint8Array"),e.rgba&&(n=e.rgb,t=4,r="Uint8Array"),e.scalars&&(n=e.scalars,t=1,r=e.scalarsType),_t.a.createElement(sc,{id:e.id,colorMapPreset:e.colorMapPreset,colorDataRange:e.colorDataRange,property:e.property,mapper:e.mapper,volume:e.volume},e.volumeController&&_t.a.createElement(dF,{rescaleColorMap:e.rescaleColorMap,size:e.controllerSize}),_t.a.createElement(Tg,{dimensions:e.dimensions,origin:e.origin,spacing:e.spacing},_t.a.createElement(IF,null,_t.a.createElement(Mg,{registration:"setScalars",numberOfComponents:t,values:n,type:r}))))}Bd.defaultProps={scalarsType:"Float32Array",colorMapPreset:"erdc_rainbow_bright",colorDataRange:"auto",volumeController:!0,rescaleColorMap:!0,controllerSize:[400,150]},Bd.propTypes={id:$t.a.string,dimensions:$t.a.arrayOf($t.a.number),spacing:$t.a.arrayOf($t.a.number),origin:$t.a.arrayOf($t.a.number),rgb:$t.a.arrayOf($t.a.number),rgba:$t.a.arrayOf($t.a.number),scalars:$t.a.arrayOf($t.a.number),scalarsType:$t.a.string,mapper:$t.a.object,volume:$t.a.object,property:$t.a.object,colorMapPreset:$t.a.string,volumeController:$t.a.bool,controllerSize:$t.a.arrayOf($t.a.number),rescaleColorMap:$t.a.bool,colorDataRange:$t.a.oneOfType([$t.a.arrayOf($t.a.number),$t.a.string])};var Qd={PointCloudRepresentation:ld,VolumeDataRepresentation:Bd};n.d(t,"a",(function(){return Zd})),n.d(t,"b",(function(){return xd})),n.d(t,"c",(function(){return pd})),n.d(t,"d",(function(){return Sd})),n.d(t,"e",(function(){return hd})),n.d(t,"f",(function(){return Cd})),n.d(t,"g",(function(){return bd})),n.d(t,"h",(function(){return yd})),n.d(t,"i",(function(){return Gd})),n.d(t,"j",(function(){return gd})),n.d(t,"k",(function(){return dd})),n.d(t,"l",(function(){return ud})),n.d(t,"m",(function(){return Id})),n.d(t,"n",(function(){return Fd})),n.d(t,"o",(function(){return md})),n.d(t,"p",(function(){return Ud})),n.d(t,"q",(function(){return Rd})),n.d(t,"r",(function(){return cd}));var cd=id.VolumeRepresentation,Fd=id.SliceRepresentation,Ud=id.VolumeController,gd=id.PointData,dd=id.PolyData,ud=id.Reader,Id=id.ShareDataSet,md=id.View,Cd=id.GeometryRepresentation,bd=id.GlyphRepresentation,yd=id.ImageData,Sd=id.DataArray,hd=id.FieldData,Zd=id.Algorithm,xd=id.Calculator,pd=id.CellData,Gd=Qd.PointCloudRepresentation,Rd=Qd.VolumeDataRepresentation},function(e,t,n){"use strict";var r=function(e){if(Array.isArray(e))return e},a=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,s=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}return n}},s=n(48),i=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};t.a=function(e,t){return r(e)||a(e,t)||Object(s.a)(e,t)||i()}},function(e,t,n){"use strict";var r=n(9),a=(n(5),n(22)),s=n(0),i=n(40),o=n(7),l=n(2),B=n(29);function Q(e,t){t.classHierarchy.push("vtkCell"),e.initialize=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n){t.pointsIds=n;var r=t.points.getData();r.length!==3*t.pointsIds.length&&(r=new(window[e.getDataType()])(3*t.pointsIds.length));var a=e.getData();t.pointsIds.forEach((function(e,t){var n=3*e,s=3*t;r[s]=a[n],r[++s]=a[++n],r[++s]=a[++n]})),t.points.setData(r)}else{t.points=e,t.pointsIds=new Array(e.getNumberOfPoints());for(var s=e.getNumberOfPoints()-1;s>=0;--s)t.pointsIds[s]=s}},e.getBounds=function(){var e=t.points.getNumberOfPoints(),n=[];if(e){t.points.getPoint(0,n),t.bounds[0]=n[0],t.bounds[1]=n[0],t.bounds[2]=n[1],t.bounds[3]=n[1],t.bounds[4]=n[2],t.bounds[5]=n[2];for(var r=1;r<e;r++)t.points.getPoint(r,n),t.bounds[0]=n[0]<t.bounds[0]?n[0]:t.bounds[0],t.bounds[1]=n[0]>t.bounds[1]?n[0]:t.bounds[1],t.bounds[2]=n[1]<t.bounds[2]?n[1]:t.bounds[2],t.bounds[3]=n[1]>t.bounds[3]?n[1]:t.bounds[3],t.bounds[4]=n[2]<t.bounds[4]?n[2]:t.bounds[4],t.bounds[5]=n[2]>t.bounds[5]?n[2]:t.bounds[5]}else Object(l.D)(t.bounds);return t.bounds},e.getLength2=function(){e.getBounds();for(var n=0,r=0,a=0;a<3;a++)n+=(r=t.bounds[2*a+1]-t.bounds[2*a])*r;return n},e.getParametricDistance=function(e){for(var t,n=0,r=0;r<3;r++)(t=e[r]<0?-e[r]:e[r]>1?e[r]-1:0)>n&&(n=t);return n},e.getNumberOfPoints=function(){return t.points.getNumberOfPoints()},e.deepCopy=function(e){e.initialize(t.points,t.pointsIds)},e.getCellDimension=function(){},e.intersectWithLine=function(e,t,n,r,a,s,i){},e.evaluatePosition=function(e,t,n,r,a,s){}}var c={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c,n),s.c.obj(e,t),t.points||(t.points=B.a.newInstance()),s.c.get(e,t,["points","pointsIds"]),Q(e,t)}var U={newInstance:s.c.newInstance(F,"vtkCell"),extend:F};function g(e,t){t.classHierarchy.push("vtkCellLinks"),e.buildLinks=function(n){var r=n.getPoints().getNumberOfPoints(),a=n.getNumberOfCells(),s=new Uint32Array(r);if(n.isA("vtkPolyData")){for(var i=0;i<a;++i)n.getCellPoints(i).cellPointIds.forEach((function(t){e.incrementLinkCount(t)}));e.allocateLinks(r),t.maxId=r-1;for(var o=function(t){n.getCellPoints(t).cellPointIds.forEach((function(n){e.insertCellReference(n,s[n]++,t)}))},l=0;l<a;++l)o(l)}else{for(var B=0;B<a;B++)U.newInstance().getPointsIds().forEach((function(t){e.incrementLinkCount(t)}));e.allocateLinks(r),t.maxId=r-1;for(var Q=function(t){U.newInstance().getPointsIds().forEach((function(n){e.insertCellReference(n,s[n]++,t)}))},c=0;c<a;++c)Q(c)}},e.allocate=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.array=Array(e).fill().map((function(){return{ncells:0,cells:null}})),t.extend=n,t.maxId=-1},e.initialize=function(){t.array=null},e.getLink=function(e){return t.array[e]},e.getNcells=function(e){return t.array[e].ncells},e.getCells=function(e){return t.array[e].cells},e.insertNextPoint=function(e){t.array.push({ncells:e,cells:Array(e)}),++t.maxId},e.insertNextCellReference=function(e,n){t.array[e].cells[t.array[e].ncells++]=n},e.deletePoint=function(e){t.array[e].ncells=0,t.array[e].cells=null},e.removeCellReference=function(e,n){t.array[n].cells=t.array[n].cells.filter((function(t){return t!==e})),t.array[n].ncells=t.array[n].cells.length},e.addCellReference=function(e,n){t.array[n].cells[t.array[n].ncells++]=e},e.resizeCellList=function(e,n){t.array[e].cells.length=n},e.squeeze=function(){!function(e,t){var n=t;for(t>=e.array.length&&(n+=e.array.length);n>e.array.length;)e.array.push({ncells:0,cells:null});e.array.length=n}(t,t.maxId+1)},e.reset=function(){t.maxId=-1},e.deepCopy=function(e){t.array=Object(o.a)(e.array),t.extend=e.extend,t.maxId=e.maxId},e.incrementLinkCount=function(e){++t.array[e].ncells},e.allocateLinks=function(e){for(var n=0;n<e;++n)t.array[n].cells=new Array(t.array[n].ncells)},e.insertCellReference=function(e,n,r){t.array[e].cells[n]=r}}var d={array:null,maxId:0,extend:0};function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d,n),s.c.obj(e,t),g(e,t)}var I={newInstance:s.c.newInstance(u,"vtkCellLinks"),extend:u},m=0,C=1,b=2,y=3,S=4,h=5,Z=6,x=7,p=9,G=21,R=41,L=42,V=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f={getClassNameFromTypeId:function(e){return e<V.length?V[e]:"UnknownClass"},getTypeIdFromClassName:function(e){return V.findIndex(e)},isLinear:function(e){return e<G||e===R||e===L}};function N(e,t){t.classHierarchy.push("vtkCellTypes"),e.allocate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.size=e>0?e:1,t.extend=n>0?n:1,t.maxId=-1,t.typeArray=new Uint8Array(e),t.locationArray=new Uint32Array(e)},e.insertCell=function(e,n,r){t.typeArray[e]=n,t.locationArray[e]=r,e>t.maxId&&(t.maxId=e)},e.insertNextCell=function(n,r){return e.insertCell(++t.maxId,n,r),t.maxId},e.setCellTypes=function(e,n,r){t.size=e,t.typeArray=n,t.locationArray=r,t.maxId=e-1},e.getCellLocation=function(e){return t.locationArray[e]},e.deleteCell=function(e){t.typeArray[e]=m},e.getNumberOfTypes=function(){return t.maxId+1},e.isType=function(t){for(var n=e.getNumberOfTypes(),r=0;r<n;++r)if(t===e.getCellType(r))return!0;return!1},e.insertNextType=function(t){return e.insertNextCell(t,-1)},e.getCellType=function(e){return t.typeArray[e]},e.reset=function(){t.maxId=-1},e.deepCopy=function(n){e.allocate(n.getSize(),n.getExtend()),t.typeArray.set(n.getTypeArray()),t.locationArray.set(n.getLocationArray()),t.maxId=n.getMaxId()}}var E={size:0,maxId:-1,extend:1e3};function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,E,n),s.c.obj(e,t),s.c.get(e,t,["size","maxId","extend"]),s.c.getArray(e,t,["typeArray","locationArray"]),N(e,t)}var v=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:s.c.newInstance(D,"vtkCellTypes"),extend:D},f),J={IntersectionState:{NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2}};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=J.IntersectionState;function T(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s={t:Number.MIN_VALUE,distance:0},i=[];i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2];var o=i[0]*(e[0]-t[0])+i[1]*(e[1]-t[1])+i[2]*(e[2]-t[2]),B=Object(l.q)(i,i),Q=1e-5*o;return 0!==B&&(s.t=o/B),Q<0&&(Q=-Q),-Q<B&&B<Q||B<=0||s.t<0?r=t:s.t>1?r=n:(r=i,i[0]=t[0]+s.t*i[0],i[1]=t[1]+s.t*i[1],i[2]=t[2]+s.t*i[2]),a&&(a[0]=r[0],a[1]=r[1],a[2]=r[2]),s.distance=Object(l.s)(r,e),s}function k(e,t,n,r,a,s){var i=[],o=[],B=[];a[0]=0,s[0]=0,i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2],o[0]=r[0]-n[0],o[1]=r[1]-n[1],o[2]=r[2]-n[2],B[0]=n[0]-e[0],B[1]=n[1]-e[1],B[2]=n[2]-e[2];var Q=[];Q[0]=[Object(l.q)(i,i),-Object(l.q)(i,o)],Q[1]=[Q[0][1],Object(l.q)(o,o)];var c=[];if(c[0]=Object(l.q)(i,B),c[1]=-Object(l.q)(o,B),0===Object(l.C)(Q,c,2)){for(var F,U=Number.MAX_VALUE,g=[e,t,n,r],d=[n,n,e,e],u=[r,r,t,t],I=[s[0],s[0],a[0],a[0]],m=[a[0],a[0],s[0],s[0]],C=0;C<4;C++)(F=T(g[C],d[C],u[C])).distance<U&&(U=F.distance,I[C]=F.t,m[C]=C%2);return H.ON_LINE}return a[0]=c[0],s[0]=c[1],a[0]>=0&&a[0]<=1&&s[0]>=0&&s[0]<=1?H.YES_INTERSECTION:H.NO_INTERSECTION}var M={distanceToLine:T,intersection:k};function w(e,t){t.classHierarchy.push("vtkLine"),e.getCellDimension=function(){return 1},e.intersectWithLine=function(e,n,r,a,s){var i={intersect:0,t:Number.MIN_VALUE,subId:0};s[1]=0,s[2]=0;var o=[],B=[],Q=[];t.points.getPoint(0,B),t.points.getPoint(1,Q);var c=[],F=[],U=k(e,n,B,Q,c,F);if(i.t=c[0],s[0]=F[0],U===H.YES_INTERSECTION){for(var g=0;g<3;g++)a[g]=B[g]+s[0]*(Q[g]-B[g]),o[g]=e[g]+i.t*(n[g]-e[g]);if(Object(l.s)(a,o)<=r*r)return i.intersect=1,i}else{var d;if(i.t<0)return i.t=0,d=T(e,B,Q,a),s[0]=d.t,d.distance<=r*r?(i.intersect=1,i):i;if(i.t>1)return i.t=1,d=T(n,B,Q,a),s[0]=d.t,d.distance<=r*r?(i.intersect=1,i):i;if(s[0]<0)return s[0]=0,d=T(B,e,n,a),i.t=d.t,d.distance<=r*r?(i.intersect=1,i):i;if(s[1]>1)return s[1]=1,d=T(Q,e,n,a),i.t=d.t,d.distance<=r*r?(i.intersect=1,i):i}return i},e.evaluatePosition=function(e,t,n,r,a,s){}}var Y={};function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Y,n),U.extend(e,t,n),w(e,t)}var z=X(X({newInstance:s.c.newInstance(O,"vtkLine"),extend:O},M),J),P=n(34);function K(e,t){t.classHierarchy.push("vtkPointSet"),t.points?t.points=Object(a.a)(t.points):t.points=B.a.newInstance(),e.getNumberOfPoints=function(){return t.points.getNumberOfPoints()},e.getBounds=function(){return t.points.getBounds()},e.computeBounds=function(){e.getBounds()};var n=e.shallowCopy;e.shallowCopy=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,r),t.points=B.a.newInstance(),t.points.shallowCopy(e.getPoints())}}var j={};function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,j,n),P.a.extend(e,t,n),s.c.setGet(e,t,["points"]),K(e,t)}var q={newInstance:s.c.newInstance(_,"vtkPointSet"),extend:_},$=n(36);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e,t,n,r){var a=n[0]-t[0],s=n[1]-t[1],i=n[2]-t[2],o=e[0]-t[0],l=e[1]-t[1],B=e[2]-t[2];r[0]=s*B-i*l,r[1]=i*o-a*B,r[2]=a*l-s*o}function ne(e,t,n,r){te(e,t,n,r);var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);0!==a&&(r[0]/=a,r[1]/=a,r[2]/=a)}var re={computeNormalDirection:te,computeNormal:ne};function ae(e,t){t.classHierarchy.push("vtkTriangle"),e.getCellDimension=function(){return 2},e.intersectWithLine=function(n,r,a,s,i){var o={subId:0,t:0,intersect:-1};i[2]=0;var B=a*a,Q=[],c=[],F=[];t.points.getPoint(0,Q),t.points.getPoint(1,c),t.points.getPoint(2,F);var U=[];if(ne(Q,c,F,U),0!==U[0]||0!==U[1]||0!==U[2]){var g=$.a.intersectWithLine(n,r,Q,U);if(o.t=g.t,s[0]=g.x[0],s[1]=g.x[1],s[2]=g.x[2],!g.intersection)return i[0]=0,i[1]=0,o.intersect=0,o;var d=e.evaluatePosition(s,[],i,[]);if(d.evaluation>=0)return d.dist2<=B?(o.intersect=1,o):(o.intersect=d.evaluation,o)}var u=Object(l.s)(Q,c),I=Object(l.s)(c,F),m=Object(l.s)(F,Q);if(t.line||(t.line=z.newInstance()),u>I&&u>m?(t.line.getPoints().setPoint(0,Q),t.line.getPoints().setPoint(1,c)):I>m&&I>u?(t.line.getPoints().setPoint(0,c),t.line.getPoints().setPoint(1,F)):(t.line.getPoints().setPoint(0,F),t.line.getPoints().setPoint(1,Q)),t.line.intersectWithLine(n,r,a,s,i).intersect){for(var C=[],b=[],y=[],S=0;S<3;S++)C[S]=Q[S]-F[S],b[S]=c[S]-F[S],y[S]=s[S]-F[S];return i[0]=Object(l.q)(y,C)/m,i[1]=Object(l.q)(y,b)/I,o.evaluation=1,o}return i[0]=0,i[1]=0,o.evaluation=0,o},e.evaluatePosition=function(e,n,r,a){var s,i,o,B,Q,c,F,U={subId:0,dist2:0,evaluation:-1},g=[],d=[],u=[],I=[],m=[],C=[],b=[],y=0,S=[],h=[],Z=[],x=[],p=[];U.subId=0,r[2]=0,t.points.getPoint(1,g),t.points.getPoint(2,d),t.points.getPoint(0,u),te(g,d,u,I),$.a.generalizedProjectPoint(e,g,I,p);var G=0;for(s=0;s<3;s++)(o=I[s]<0?-I[s]:I[s])>G&&(G=o,y=s);for(i=0,s=0;s<3;s++)s!==y&&(S[i++]=s);for(s=0;s<2;s++)m[s]=p[S[s]]-u[S[s]],C[s]=g[S[s]]-u[S[s]],b[s]=d[S[s]]-u[S[s]];if(0===(B=Object(l.z)(C,b)))return r[0]=0,r[1]=0,U.evaluation=-1,U;if(r[0]=Object(l.z)(m,b)/B,r[1]=Object(l.z)(C,m)/B,a[0]=1-(r[0]+r[1]),a[1]=r[0],a[2]=r[1],a[0]>=0&&a[0]<=1&&a[1]>=0&&a[1]<=1&&a[2]>=0&&a[2]<=1)n&&(U.dist2=Object(l.s)(p,e),n[0]=p[0],n[1]=p[1],n[2]=p[2]),U.evaluation=1;else{var R;if(n)if(a[1]<0&&a[2]<0)for(Q=Object(l.s)(e,u),c=z.distanceToLine(e,g,u,R,Z),F=z.distanceToLine(e,u,d,R,x),Q<c?(U.dist2=Q,h=u):(U.dist2=c,h=Z),F<U.dist2&&(U.dist2=F,h=x),s=0;s<3;s++)n[s]=h[s];else if(a[2]<0&&a[0]<0)for(Q=Object(l.s)(e,g),c=z.distanceToLine(e,g,u,R,Z),F=z.distanceToLine(e,g,d,R,x),Q<c?(U.dist2=Q,h=g):(U.dist2=c,h=Z),F<U.dist2&&(U.dist2=F,h=x),s=0;s<3;s++)n[s]=h[s];else if(a[1]<0&&a[0]<0)for(Q=Object(l.s)(e,d),c=z.distanceToLine(e,d,u,R,Z),F=z.distanceToLine(e,g,d,R,x),Q<c?(U.dist2=Q,h=d):(U.dist2=c,h=Z),F<U.dist2&&(U.dist2=F,h=x),s=0;s<3;s++)n[s]=h[s];else if(a[0]<0){var L=z.distanceToLine(e,g,d,n);U.dist2=L.distance}else if(a[1]<0){var V=z.distanceToLine(e,d,u,n);U.dist2=V.distance}else if(a[2]<0){var A=z.distanceToLine(e,g,u,n);U.dist2=A.distance}U.evaluation=0}return U},e.evaluateLocation=function(e,n,r){var a=[],s=[],i=[];t.points.getPoint(0,a),t.points.getPoint(1,s),t.points.getPoint(2,i);for(var o=1-e[0]-e[1],l=0;l<3;l++)n[l]=a[l]*o+s[l]*e[0]+i[l]*e[1];r[0]=o,r[1]=e[0],r[2]=e[1]},e.getParametricDistance=function(e){var t,n=0,r=[];r[0]=e[0],r[1]=e[1],r[2]=1-e[0]-e[1];for(var a=0;a<3;a++)(t=r[a]<0?-r[a]:r[a]>1?r[a]-1:0)>n&&(n=t);return n}}var se={};function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,se,n),U.extend(e,t,n),ae(e,t)}var oe,le=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:s.c.newInstance(ie,"vtkTriangle"),extend:ie},re),Be=["verts","lines","polys","strips"],Qe=s.c.vtkWarningMacro,ce=(Object(r.a)(oe={},y,z),Object(r.a)(oe,S,z),Object(r.a)(oe,h,le),oe);function Fe(e,t){t.classHierarchy.push("vtkPolyData"),Be.forEach((function(n){var r;e["getNumberOf".concat((r=n,r.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e){return e.toUpperCase()})).replace(/\s+/g,"")))]=function(){return t[n].getNumberOfCells()},t[n]?t[n]=Object(a.a)(t[n]):t[n]=i.a.newInstance()})),e.getNumberOfCells=function(){return Be.reduce((function(e,n){return e+t[n].getNumberOfCells()}),0)};var n=e.shallowCopy;e.shallowCopy=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,r),Be.forEach((function(n){t[n]=i.a.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))}))},e.buildCells=function(){var n=e.getNumberOfVerts(),r=e.getNumberOfLines(),a=e.getNumberOfPolys(),s=e.getNumberOfStrips(),i=n+r+a+s,o=new Uint8Array(i),l=o,B=new Uint32Array(i),Q=B;if(n){var c=0;t.verts.getCellSizes().forEach((function(e,t){Q[t]=c,l[t]=e>1?b:C,c+=e+1})),Q=Q.subarray(n),l=l.subarray(n)}if(r){var F=0;t.lines.getCellSizes().forEach((function(e,t){Q[t]=F,l[t]=e>2?S:y,1===e&&Qe("Building VTK_LINE ",t," with only one point, but VTK_LINE needs at least two points. Check the input."),F+=e+1})),Q=Q.subarray(r),l=l.subarray(r)}if(a){var U=0;t.polys.getCellSizes().forEach((function(e,t){switch(Q[t]=U,e){case 3:l[t]=h;break;case 4:l[t]=p;break;default:l[t]=x}e<3&&Qe("Building VTK_TRIANGLE ",t," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),U+=e+1})),Q+=Q.subarray(a),l+=l.subarray(a)}if(s){var g=0;l.fill(Z,0,s),t.strips.getCellSizes().forEach((function(e,t){Q[t]=g,g+=e+1}))}t.cells=v.newInstance(),t.cells.setCellTypes(i,o,B)},e.buildLinks=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;void 0===t.cells&&e.buildCells(),t.links=I.newInstance(),n>0?t.links.allocate(n):t.links.allocate(e.getPoints().getNumberOfPoints()),t.links.buildLinks(e)},e.getCellPoints=function(e){var n=t.cells.getCellType(e),r=null;switch(n){case C:case b:r=t.verts;break;case y:case S:r=t.lines;break;case h:case p:case x:r=t.polys;break;case Z:r=t.strips;break;default:return r=null,{type:0,cellPointIds:null}}var a=t.cells.getCellLocation(e);return{cellType:n,cellPointIds:r.getCell(a)}},e.getPointCells=function(e){return t.links.getCells(e)},e.getCellEdgeNeighbors=function(e,n,r){var a=t.links.getLink(n),s=t.links.getLink(r);return a.cells.filter((function(t){return t!==e&&-1!==s.cells.indexOf(t)}))},e.getCell=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.getCellPoints(t),a=n||ce[r.cellType].newInstance();return a.initialize(e.getPoints(),r.cellPointIds),a}}var Ue={};function ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ue,n),q.extend(e,t,n),s.c.get(e,t,["cells","links"]),s.c.setGet(e,t,["verts","lines","polys","strips"]),Fe(e,t)}var de={newInstance:s.c.newInstance(ge,"vtkPolyData"),extend:ge};t.a=de},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));n(5);var r={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},a={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},s={DefaultDataType:a.FLOAT,DataTypeByteSize:r,VtkDataTypes:a};t.c=s},function(e,t,n){"use strict";t.a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.a=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(11),a=n(54),s=Object(r.d)((function(t,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==e,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(t){try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(r),n.blob=0===s.getBlob("application/zip").size}catch(t){n.blob=!1}}}try{n.nodestream=!!a.a.Readable}catch(t){n.nodestream=!1}}),"/$$rollup_base$$/node_modules/jszip/lib")}).call(this,n(55).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));n(5);var r={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},a={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7},s={FieldDataTypes:r,FieldAssociations:a};t.c=s},function(e,t,n){"use strict";(function(e){var r=n(35),a=n(9);n(5);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var i={vtkObject:function(){return null}};function o(t){if(null==t)return t;if(t.isA)return t;if(!t.vtkClass)return e.console&&e.console.error&&e.console.error("Invalid VTK object"),null;var n=i[t.vtkClass];if(!n)return e.console&&e.console.error&&e.console.error("No vtk class found for Object of type ".concat(t.vtkClass)),null;var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);Object.keys(l).forEach((function(e){l[e]&&"object"===Object(r.a)(l[e])&&l[e].vtkClass&&(l[e]=o(l[e]))}));var B=n(l);return B&&B.modified&&B.modified(),B}o.register=function(e,t){i[e]=t},t.a=o}).call(this,n(39))},function(e,t,n){"use strict";function r(e){let t=e.length;for(;--t>=0;)e[t]=0}n.d(t,"a",(function(){return rn}));const a=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),s=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=new Array(576);r(l);const B=new Array(60);r(B);const Q=new Array(512);r(Q);const c=new Array(256);r(c);const F=new Array(29);r(F);const U=new Array(30);function g(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}let d,u,I;function m(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}r(U);const C=e=>e<256?Q[e]:Q[256+(e>>>7)],b=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},y=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,b(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},S=(e,t,n)=>{y(e,n[2*t],n[2*t+1])},h=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},Z=(e,t,n)=>{const r=new Array(16);let a,s,i=0;for(a=1;a<=15;a++)r[a]=i=i+n[a-1]<<1;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=h(r[t]++,t))}},x=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},p=e=>{e.bi_valid>8?b(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},G=(e,t,n,r)=>{const a=2*t,s=2*n;return e[a]<e[s]||e[a]===e[s]&&r[t]<=r[n]},R=(e,t,n)=>{const r=e.heap[n];let a=n<<1;for(;a<=e.heap_len&&(a<e.heap_len&&G(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!G(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r},L=(e,t,n)=>{let r,i,o,l,B=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*B]<<8|e.pending_buf[e.d_buf+2*B+1],i=e.pending_buf[e.l_buf+B],B++,0===r?S(e,i,t):(o=c[i],S(e,o+256+1,t),l=a[o],0!==l&&(i-=F[o],y(e,i,l)),r--,o=C(r),S(e,o,n),l=s[o],0!==l&&(r-=U[o],y(e,r,l)))}while(B<e.last_lit);S(e,256,t)},V=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.elems;let i,o,l,B=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<s;i++)0!==n[2*i]?(e.heap[++e.heap_len]=B=i,e.depth[i]=0):n[2*i+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=B<2?++B:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=r[2*l+1]);for(t.max_code=B,i=e.heap_len>>1;i>=1;i--)R(e,n,i);l=s;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],R(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,n[2*l]=n[2*i]+n[2*o],e.depth[l]=(e.depth[i]>=e.depth[o]?e.depth[i]:e.depth[o])+1,n[2*i+1]=n[2*o+1]=l,e.heap[1]=l++,R(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let B,Q,c,F,U,g,d=0;for(F=0;F<=15;F++)e.bl_count[F]=0;for(n[2*e.heap[e.heap_max]+1]=0,B=e.heap_max+1;B<573;B++)Q=e.heap[B],F=n[2*n[2*Q+1]+1]+1,F>l&&(F=l,d++),n[2*Q+1]=F,Q>r||(e.bl_count[F]++,U=0,Q>=o&&(U=i[Q-o]),g=n[2*Q],e.opt_len+=g*(F+U),s&&(e.static_len+=g*(a[2*Q+1]+U)));if(0!==d){do{for(F=l-1;0===e.bl_count[F];)F--;e.bl_count[F]--,e.bl_count[F+1]+=2,e.bl_count[l]--,d-=2}while(d>0);for(F=l;0!==F;F--)for(Q=e.bl_count[F];0!==Q;)c=e.heap[--B],c>r||(n[2*c+1]!==F&&(e.opt_len+=(F-n[2*c+1])*n[2*c],n[2*c+1]=F),Q--)}})(e,t),Z(n,B,e.bl_count)},A=(e,t,n)=>{let r,a,s=-1,i=t[1],o=0,l=7,B=4;for(0===i&&(l=138,B=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=i,i=t[2*(r+1)+1],++o<l&&a===i||(o<B?e.bl_tree[2*a]+=o:0!==a?(a!==s&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,s=a,0===i?(l=138,B=3):a===i?(l=6,B=3):(l=7,B=4))},f=(e,t,n)=>{let r,a,s=-1,i=t[1],o=0,l=7,B=4;for(0===i&&(l=138,B=3),r=0;r<=n;r++)if(a=i,i=t[2*(r+1)+1],!(++o<l&&a===i)){if(o<B)do{S(e,a,e.bl_tree)}while(0!=--o);else 0!==a?(a!==s&&(S(e,a,e.bl_tree),o--),S(e,16,e.bl_tree),y(e,o-3,2)):o<=10?(S(e,17,e.bl_tree),y(e,o-3,3)):(S(e,18,e.bl_tree),y(e,o-11,7));o=0,s=a,0===i?(l=138,B=3):a===i?(l=6,B=3):(l=7,B=4)}};let N=!1;const E=(e,t,n,r)=>{y(e,0+(r?1:0),3),((e,t,n,r)=>{p(e),b(e,n),b(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n)};var D={_tr_init:e=>{N||((()=>{let e,t,n,r,o;const m=new Array(16);for(n=0,r=0;r<28;r++)for(F[r]=n,e=0;e<1<<a[r];e++)c[n++]=r;for(c[n-1]=r,o=0,r=0;r<16;r++)for(U[r]=o,e=0;e<1<<s[r];e++)Q[o++]=r;for(o>>=7;r<30;r++)for(U[r]=o<<7,e=0;e<1<<s[r]-7;e++)Q[256+o++]=r;for(t=0;t<=15;t++)m[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,m[8]++;for(;e<=255;)l[2*e+1]=9,e++,m[9]++;for(;e<=279;)l[2*e+1]=7,e++,m[7]++;for(;e<=287;)l[2*e+1]=8,e++,m[8]++;for(Z(l,287,m),e=0;e<30;e++)B[2*e+1]=5,B[2*e]=h(e,5);d=new g(l,a,257,286,15),u=new g(B,s,0,30,15),I=new g(new Array(0),i,0,19,7)})(),N=!0),e.l_desc=new m(e.dyn_ltree,d),e.d_desc=new m(e.dyn_dtree,u),e.bl_desc=new m(e.bl_tree,I),e.bi_buf=0,e.bi_valid=0,x(e)},_tr_stored_block:E,_tr_flush_block:(e,t,n,r)=>{let a,s,i=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),V(e,e.l_desc),V(e,e.d_desc),i=(e=>{let t;for(A(e,e.dyn_ltree,e.l_desc.max_code),A(e,e.dyn_dtree,e.d_desc.max_code),V(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*o[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?E(e,t,n,r):4===e.strategy||s===a?(y(e,2+(r?1:0),3),L(e,l,B)):(y(e,4+(r?1:0),3),((e,t,n,r)=>{let a;for(y(e,t-257,5),y(e,n-1,5),y(e,r-4,4),a=0;a<r;a++)y(e,e.bl_tree[2*o[a]+1],3);f(e,e.dyn_ltree,t-1),f(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),L(e,e.dyn_ltree,e.dyn_dtree)),x(e),r&&p(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(c[n]+256+1)]++,e.dyn_dtree[2*C(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{y(e,2,3),S(e,256,l),(e=>{16===e.bi_valid?(b(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},v=(e,t,n,r)=>{let a=65535&e|0,s=e>>>16&65535|0,i=0;for(;0!==n;){i=n>2e3?2e3:n,n-=i;do{a=a+t[r++]|0,s=s+a|0}while(--i);a%=65521,s%=65521}return a|s<<16|0};const J=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var W=(e,t,n,r)=>{const a=J,s=r+n;e^=-1;for(let n=r;n<s;n++)e=e>>>8^a[255&(e^t[n])];return-1^e},X={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:T,_tr_stored_block:k,_tr_flush_block:M,_tr_tally:w,_tr_align:Y}=D,{Z_NO_FLUSH:O,Z_PARTIAL_FLUSH:z,Z_FULL_FLUSH:P,Z_FINISH:K,Z_BLOCK:j,Z_OK:_,Z_STREAM_END:q,Z_STREAM_ERROR:$,Z_DATA_ERROR:ee,Z_BUF_ERROR:te,Z_DEFAULT_COMPRESSION:ne,Z_FILTERED:re,Z_HUFFMAN_ONLY:ae,Z_RLE:se,Z_FIXED:ie,Z_DEFAULT_STRATEGY:oe,Z_UNKNOWN:le,Z_DEFLATED:Be}=H,Qe=(e,t)=>(e.msg=X[t],t),ce=e=>(e<<1)-(e>4?9:0),Fe=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let Ue=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const ge=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},de=(e,t)=>{M(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ge(e.strm)},ue=(e,t)=>{e.pending_buf[e.pending++]=t},Ie=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},me=(e,t,n,r)=>{let a=e.avail_in;return a>r&&(a=r),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),n),1===e.state.wrap?e.adler=v(e.adler,t,a,n):2===e.state.wrap&&(e.adler=W(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)},Ce=(e,t)=>{let n,r,a=e.max_chain_length,s=e.strstart,i=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,B=e.window,Q=e.w_mask,c=e.prev,F=e.strstart+258;let U=B[s+i-1],g=B[s+i];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,B[n+i]===g&&B[n+i-1]===U&&B[n]===B[s]&&B[++n]===B[s+1]){s+=2,n++;do{}while(B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&s<F);if(r=258-(F-s),s=F-258,r>i){if(e.match_start=t,i=r,r>=o)break;U=B[s+i-1],g=B[s+i]}}}while((t=c[t&Q])>l&&0!=--a);return i<=e.lookahead?i:e.lookahead},be=e=>{const t=e.w_size;let n,r,a,s,i;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do{a=e.head[--n],e.head[n]=a>=t?a-t:0}while(--r);r=t,n=r;do{a=e.prev[--n],e.prev[n]=a>=t?a-t:0}while(--r);s+=t}if(0===e.strm.avail_in)break;if(r=me(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Ue(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Ue(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},ye=(e,t)=>{let n,r;for(;;){if(e.lookahead<262){if(be(e),e.lookahead<262&&t===O)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=Ce(e,n)),e.match_length>=3)if(r=w(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+1]);else r=w(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(de(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===K?(de(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(de(e,!1),0===e.strm.avail_out)?1:2},Se=(e,t)=>{let n,r,a;for(;;){if(e.lookahead<262){if(be(e),e.lookahead<262&&t===O)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=Ce(e,n),e.match_length<=5&&(e.strategy===re||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=w(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(de(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=w(e,0,e.window[e.strstart-1]),r&&de(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=w(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===K?(de(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(de(e,!1),0===e.strm.avail_out)?1:2};function he(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}const Ze=[new he(0,0,0,0,(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(be(e),0===e.lookahead&&t===O)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,de(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(de(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===K?(de(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(de(e,!1),e.strm.avail_out),1)}),new he(4,4,8,4,ye),new he(4,5,16,8,ye),new he(4,6,32,32,ye),new he(4,4,16,16,Se),new he(8,16,32,32,Se),new he(8,16,128,128,Se),new he(8,32,128,256,Se),new he(32,128,258,1024,Se),new he(32,258,258,4096,Se)];function xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Be,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Fe(this.dyn_ltree),Fe(this.dyn_dtree),Fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Fe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const pe=e=>{if(!e||!e.state)return Qe(e,$);e.total_in=e.total_out=0,e.data_type=le;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=O,T(t),_},Ge=e=>{const t=pe(e);var n;return t===_&&((n=e.state).window_size=2*n.w_size,Fe(n.head),n.max_lazy_match=Ze[n.level].max_lazy,n.good_match=Ze[n.level].good_length,n.nice_match=Ze[n.level].nice_length,n.max_chain_length=Ze[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Re=(e,t,n,r,a,s)=>{if(!e)return $;let i=1;if(t===ne&&(t=6),r<0?(i=0,r=-r):r>15&&(i=2,r-=16),a<1||a>9||n!==Be||r<8||r>15||t<0||t>9||s<0||s>ie)return Qe(e,$);8===r&&(r=9);const o=new xe;return e.state=o,o.strm=e,o.wrap=i,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=s,o.method=n,Ge(e)};var Le=Re,Ve=(e,t)=>e&&e.state?2!==e.state.wrap?$:(e.state.gzhead=t,_):$,Ae=(e,t)=>{let n,r;if(!e||!e.state||t>j||t<0)return e?Qe(e,$):$;const a=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===a.status&&t!==K)return Qe(e,0===e.avail_out?te:$);a.strm=e;const s=a.last_flush;if(a.last_flush=t,42===a.status)if(2===a.wrap)e.adler=0,ue(a,31),ue(a,139),ue(a,8),a.gzhead?(ue(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),ue(a,255&a.gzhead.time),ue(a,a.gzhead.time>>8&255),ue(a,a.gzhead.time>>16&255),ue(a,a.gzhead.time>>24&255),ue(a,9===a.level?2:a.strategy>=ae||a.level<2?4:0),ue(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(ue(a,255&a.gzhead.extra.length),ue(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=W(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(ue(a,0),ue(a,0),ue(a,0),ue(a,0),ue(a,0),ue(a,9===a.level?2:a.strategy>=ae||a.level<2?4:0),ue(a,3),a.status=113);else{let t=Be+(a.w_bits-8<<4)<<8,n=-1;n=a.strategy>=ae||a.level<2?0:a.level<6?1:6===a.level?2:3,t|=n<<6,0!==a.strstart&&(t|=32),t+=31-t%31,a.status=113,Ie(a,t),0!==a.strstart&&(Ie(a,e.adler>>>16),Ie(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(n=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>n&&(e.adler=W(e.adler,a.pending_buf,a.pending-n,n)),ge(e),n=a.pending,a.pending!==a.pending_buf_size));)ue(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>n&&(e.adler=W(e.adler,a.pending_buf,a.pending-n,n)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){n=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>n&&(e.adler=W(e.adler,a.pending_buf,a.pending-n,n)),ge(e),n=a.pending,a.pending===a.pending_buf_size)){r=1;break}r=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,ue(a,r)}while(0!==r);a.gzhead.hcrc&&a.pending>n&&(e.adler=W(e.adler,a.pending_buf,a.pending-n,n)),0===r&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){n=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>n&&(e.adler=W(e.adler,a.pending_buf,a.pending-n,n)),ge(e),n=a.pending,a.pending===a.pending_buf_size)){r=1;break}r=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,ue(a,r)}while(0!==r);a.gzhead.hcrc&&a.pending>n&&(e.adler=W(e.adler,a.pending_buf,a.pending-n,n)),0===r&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&ge(e),a.pending+2<=a.pending_buf_size&&(ue(a,255&e.adler),ue(a,e.adler>>8&255),e.adler=0,a.status=113)):a.status=113),0!==a.pending){if(ge(e),0===e.avail_out)return a.last_flush=-1,_}else if(0===e.avail_in&&ce(t)<=ce(s)&&t!==K)return Qe(e,te);if(666===a.status&&0!==e.avail_in)return Qe(e,te);if(0!==e.avail_in||0!==a.lookahead||t!==O&&666!==a.status){let n=a.strategy===ae?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(be(e),0===e.lookahead)){if(t===O)return 1;break}if(e.match_length=0,n=w(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(de(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===K?(de(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(de(e,!1),0===e.strm.avail_out)?1:2})(a,t):a.strategy===se?((e,t)=>{let n,r,a,s;const i=e.window;for(;;){if(e.lookahead<=258){if(be(e),e.lookahead<=258&&t===O)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(a=e.strstart-1,r=i[a],r===i[++a]&&r===i[++a]&&r===i[++a])){s=e.strstart+258;do{}while(r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&a<s);e.match_length=258-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=w(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=w(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(de(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===K?(de(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(de(e,!1),0===e.strm.avail_out)?1:2})(a,t):Ze[a.level].func(a,t);if(3!==n&&4!==n||(a.status=666),1===n||3===n)return 0===e.avail_out&&(a.last_flush=-1),_;if(2===n&&(t===z?Y(a):t!==j&&(k(a,0,0,!1),t===P&&(Fe(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),ge(e),0===e.avail_out))return a.last_flush=-1,_}return t!==K?_:a.wrap<=0?q:(2===a.wrap?(ue(a,255&e.adler),ue(a,e.adler>>8&255),ue(a,e.adler>>16&255),ue(a,e.adler>>24&255),ue(a,255&e.total_in),ue(a,e.total_in>>8&255),ue(a,e.total_in>>16&255),ue(a,e.total_in>>24&255)):(Ie(a,e.adler>>>16),Ie(a,65535&e.adler)),ge(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?_:q)},fe=e=>{if(!e||!e.state)return $;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?Qe(e,$):(e.state=null,113===t?Qe(e,ee):_)},Ne=(e,t)=>{let n=t.length;if(!e||!e.state)return $;const r=e.state,a=r.wrap;if(2===a||1===a&&42!==r.status||r.lookahead)return $;if(1===a&&(e.adler=v(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===a&&(Fe(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const s=e.avail_in,i=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,be(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=Ue(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,be(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=i,e.input=o,e.avail_in=s,r.wrap=a,_};const Ee=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var De=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Ee(n,t)&&(e[t]=n[t])}}return e},ve=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,a=e.length;t<a;t++){let a=e[t];n.set(a,r),r+=a.length}return n};let Je=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){Je=!1}const We=new Uint8Array(256);for(let e=0;e<256;e++)We[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;We[254]=We[254]=1;var Xe=e=>{let t,n,r,a,s,i=e.length,o=0;for(a=0;a<i;a++)n=e.charCodeAt(a),55296==(64512&n)&&a+1<i&&(r=e.charCodeAt(a+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),s=0,a=0;s<o;a++)n=e.charCodeAt(a),55296==(64512&n)&&a+1<i&&(r=e.charCodeAt(a+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},He=(e,t)=>{let n,r;const a=t||e.length,s=new Array(2*a);for(r=0,n=0;n<a;){let t=e[n++];if(t<128){s[r++]=t;continue}let i=We[t];if(i>4)s[r++]=65533,n+=i-1;else{for(t&=2===i?31:3===i?15:7;i>1&&n<a;)t=t<<6|63&e[n++],i--;i>1?s[r++]=65533:t<65536?s[r++]=t:(t-=65536,s[r++]=55296|t>>10&1023,s[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Je)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(s,r)},Te=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+We[e[n]]>t?n:t},ke=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Me=Object.prototype.toString,{Z_NO_FLUSH:we,Z_SYNC_FLUSH:Ye,Z_FULL_FLUSH:Oe,Z_FINISH:ze,Z_OK:Pe,Z_STREAM_END:Ke,Z_DEFAULT_COMPRESSION:je,Z_DEFAULT_STRATEGY:_e,Z_DEFLATED:qe}=H;function $e(e){this.options=De({level:je,method:qe,chunkSize:16384,windowBits:15,memLevel:8,strategy:_e},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ke,this.strm.avail_out=0;let n=Le(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Pe)throw new Error(X[n]);if(t.header&&Ve(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Xe(t.dictionary):"[object ArrayBuffer]"===Me.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Ne(this.strm,e),n!==Pe)throw new Error(X[n]);this._dict_set=!0}}function et(e,t){const n=new $e(t);if(n.push(e,!0),n.err)throw n.msg||X[n.err];return n.result}$e.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let a,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?ze:we,"string"==typeof e?n.input=Xe(e):"[object ArrayBuffer]"===Me.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===Ye||s===Oe)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(a=Ae(n,s),a===Ke)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),a=fe(this.strm),this.onEnd(a),this.ended=!0,a===Pe;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},$e.prototype.onData=function(e){this.chunks.push(e)},$e.prototype.onEnd=function(e){e===Pe&&(this.result=ve(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var tt={Deflate:$e,deflate:et,deflateRaw:function(e,t){return(t=t||{}).raw=!0,et(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,et(e,t)},constants:H},nt=function(e,t){let n,r,a,s,i,o,l,B,Q,c,F,U,g,d,u,I,m,C,b,y,S,h,Z,x;const p=e.state;n=e.next_in,Z=e.input,r=n+(e.avail_in-5),a=e.next_out,x=e.output,s=a-(t-e.avail_out),i=a+(e.avail_out-257),o=p.dmax,l=p.wsize,B=p.whave,Q=p.wnext,c=p.window,F=p.hold,U=p.bits,g=p.lencode,d=p.distcode,u=(1<<p.lenbits)-1,I=(1<<p.distbits)-1;e:do{U<15&&(F+=Z[n++]<<U,U+=8,F+=Z[n++]<<U,U+=8),m=g[F&u];t:for(;;){if(C=m>>>24,F>>>=C,U-=C,C=m>>>16&255,0===C)x[a++]=65535&m;else{if(!(16&C)){if(0==(64&C)){m=g[(65535&m)+(F&(1<<C)-1)];continue t}if(32&C){p.mode=12;break e}e.msg="invalid literal/length code",p.mode=30;break e}b=65535&m,C&=15,C&&(U<C&&(F+=Z[n++]<<U,U+=8),b+=F&(1<<C)-1,F>>>=C,U-=C),U<15&&(F+=Z[n++]<<U,U+=8,F+=Z[n++]<<U,U+=8),m=d[F&I];n:for(;;){if(C=m>>>24,F>>>=C,U-=C,C=m>>>16&255,!(16&C)){if(0==(64&C)){m=d[(65535&m)+(F&(1<<C)-1)];continue n}e.msg="invalid distance code",p.mode=30;break e}if(y=65535&m,C&=15,U<C&&(F+=Z[n++]<<U,U+=8,U<C&&(F+=Z[n++]<<U,U+=8)),y+=F&(1<<C)-1,y>o){e.msg="invalid distance too far back",p.mode=30;break e}if(F>>>=C,U-=C,C=a-s,y>C){if(C=y-C,C>B&&p.sane){e.msg="invalid distance too far back",p.mode=30;break e}if(S=0,h=c,0===Q){if(S+=l-C,C<b){b-=C;do{x[a++]=c[S++]}while(--C);S=a-y,h=x}}else if(Q<C){if(S+=l+Q-C,C-=Q,C<b){b-=C;do{x[a++]=c[S++]}while(--C);if(S=0,Q<b){C=Q,b-=C;do{x[a++]=c[S++]}while(--C);S=a-y,h=x}}}else if(S+=Q-C,C<b){b-=C;do{x[a++]=c[S++]}while(--C);S=a-y,h=x}for(;b>2;)x[a++]=h[S++],x[a++]=h[S++],x[a++]=h[S++],b-=3;b&&(x[a++]=h[S++],b>1&&(x[a++]=h[S++]))}else{S=a-y;do{x[a++]=x[S++],x[a++]=x[S++],x[a++]=x[S++],b-=3}while(b>2);b&&(x[a++]=x[S++],b>1&&(x[a++]=x[S++]))}break}}break}}while(n<r&&a<i);b=U>>3,n-=b,U-=b<<3,F&=(1<<U)-1,e.next_in=n,e.next_out=a,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=a<i?i-a+257:257-(a-i),p.hold=F,p.bits=U};const rt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),at=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),st=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),it=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ot=(e,t,n,r,a,s,i,o)=>{const l=o.bits;let B,Q,c,F,U,g,d=0,u=0,I=0,m=0,C=0,b=0,y=0,S=0,h=0,Z=0,x=null,p=0;const G=new Uint16Array(16),R=new Uint16Array(16);let L,V,A,f=null,N=0;for(d=0;d<=15;d++)G[d]=0;for(u=0;u<r;u++)G[t[n+u]]++;for(C=l,m=15;m>=1&&0===G[m];m--);if(C>m&&(C=m),0===m)return a[s++]=20971520,a[s++]=20971520,o.bits=1,0;for(I=1;I<m&&0===G[I];I++);for(C<I&&(C=I),S=1,d=1;d<=15;d++)if(S<<=1,S-=G[d],S<0)return-1;if(S>0&&(0===e||1!==m))return-1;for(R[1]=0,d=1;d<15;d++)R[d+1]=R[d]+G[d];for(u=0;u<r;u++)0!==t[n+u]&&(i[R[t[n+u]]++]=u);if(0===e?(x=f=i,g=19):1===e?(x=rt,p-=257,f=at,N-=257,g=256):(x=st,f=it,g=-1),Z=0,u=0,d=I,U=s,b=C,y=0,c=-1,h=1<<C,F=h-1,1===e&&h>852||2===e&&h>592)return 1;for(;;){L=d-y,i[u]<g?(V=0,A=i[u]):i[u]>g?(V=f[N+i[u]],A=x[p+i[u]]):(V=96,A=0),B=1<<d-y,Q=1<<b,I=Q;do{Q-=B,a[U+(Z>>y)+Q]=L<<24|V<<16|A|0}while(0!==Q);for(B=1<<d-1;Z&B;)B>>=1;if(0!==B?(Z&=B-1,Z+=B):Z=0,u++,0==--G[d]){if(d===m)break;d=t[n+i[u]]}if(d>C&&(Z&F)!==c){for(0===y&&(y=C),U+=I,b=d-y,S=1<<b;b+y<m&&(S-=G[b+y],!(S<=0));)b++,S<<=1;if(h+=1<<b,1===e&&h>852||2===e&&h>592)return 1;c=Z&F,a[c]=C<<24|b<<16|U-s|0}}return 0!==Z&&(a[U+Z]=d-y<<24|64<<16|0),o.bits=C,0};const{Z_FINISH:lt,Z_BLOCK:Bt,Z_TREES:Qt,Z_OK:ct,Z_STREAM_END:Ft,Z_NEED_DICT:Ut,Z_STREAM_ERROR:gt,Z_DATA_ERROR:dt,Z_MEM_ERROR:ut,Z_BUF_ERROR:It,Z_DEFLATED:mt}=H,Ct=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function bt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const yt=e=>{if(!e||!e.state)return gt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,ct},St=e=>{if(!e||!e.state)return gt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,yt(e)},ht=(e,t)=>{let n;if(!e||!e.state)return gt;const r=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?gt:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,St(e))},Zt=(e,t)=>{if(!e)return gt;const n=new bt;e.state=n,n.window=null;const r=ht(e,t);return r!==ct&&(e.state=null),r};let xt,pt,Gt=!0;const Rt=e=>{if(Gt){xt=new Int32Array(512),pt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ot(1,e.lens,0,288,xt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ot(2,e.lens,0,32,pt,0,e.work,{bits:5}),Gt=!1}e.lencode=xt,e.lenbits=9,e.distcode=pt,e.distbits=5},Lt=(e,t,n,r)=>{let a;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>r&&(a=r),s.window.set(t.subarray(n-r,n-r+a),s.wnext),(r-=a)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0};var Vt=St,At=Zt,ft=(e,t)=>{let n,r,a,s,i,o,l,B,Q,c,F,U,g,d,u,I,m,C,b,y,S,h,Z=0;const x=new Uint8Array(4);let p,G;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return gt;n=e.state,12===n.mode&&(n.mode=13),i=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,B=n.hold,Q=n.bits,c=o,F=l,h=ct;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;Q<16;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(2&n.wrap&&35615===B){n.check=0,x[0]=255&B,x[1]=B>>>8&255,n.check=W(n.check,x,2,0),B=0,Q=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&B)<<8)+(B>>8))%31){e.msg="incorrect header check",n.mode=30;break}if((15&B)!==mt){e.msg="unknown compression method",n.mode=30;break}if(B>>>=4,Q-=4,S=8+(15&B),0===n.wbits)n.wbits=S;else if(S>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&B?10:12,B=0,Q=0;break;case 2:for(;Q<16;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(n.flags=B,(255&n.flags)!==mt){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=B>>8&1),512&n.flags&&(x[0]=255&B,x[1]=B>>>8&255,n.check=W(n.check,x,2,0)),B=0,Q=0,n.mode=3;case 3:for(;Q<32;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.head&&(n.head.time=B),512&n.flags&&(x[0]=255&B,x[1]=B>>>8&255,x[2]=B>>>16&255,x[3]=B>>>24&255,n.check=W(n.check,x,4,0)),B=0,Q=0,n.mode=4;case 4:for(;Q<16;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.head&&(n.head.xflags=255&B,n.head.os=B>>8),512&n.flags&&(x[0]=255&B,x[1]=B>>>8&255,n.check=W(n.check,x,2,0)),B=0,Q=0,n.mode=5;case 5:if(1024&n.flags){for(;Q<16;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.length=B,n.head&&(n.head.extra_len=B),512&n.flags&&(x[0]=255&B,x[1]=B>>>8&255,n.check=W(n.check,x,2,0)),B=0,Q=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(U=n.length,U>o&&(U=o),U&&(n.head&&(S=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+U),S)),512&n.flags&&(n.check=W(n.check,r,U,s)),o-=U,s+=U,n.length-=U),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break e;U=0;do{S=r[s+U++],n.head&&S&&n.length<65536&&(n.head.name+=String.fromCharCode(S))}while(S&&U<o);if(512&n.flags&&(n.check=W(n.check,r,U,s)),o-=U,s+=U,S)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break e;U=0;do{S=r[s+U++],n.head&&S&&n.length<65536&&(n.head.comment+=String.fromCharCode(S))}while(S&&U<o);if(512&n.flags&&(n.check=W(n.check,r,U,s)),o-=U,s+=U,S)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;Q<16;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(B!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}B=0,Q=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;Q<32;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}e.adler=n.check=Ct(B),B=0,Q=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=B,n.bits=Q,Ut;e.adler=n.check=1,n.mode=12;case 12:if(t===Bt||t===Qt)break e;case 13:if(n.last){B>>>=7&Q,Q-=7&Q,n.mode=27;break}for(;Q<3;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}switch(n.last=1&B,B>>>=1,Q-=1,3&B){case 0:n.mode=14;break;case 1:if(Rt(n),n.mode=20,t===Qt){B>>>=2,Q-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}B>>>=2,Q-=2;break;case 14:for(B>>>=7&Q,Q-=7&Q;Q<32;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if((65535&B)!=(B>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&B,B=0,Q=0,n.mode=15,t===Qt)break e;case 15:n.mode=16;case 16:if(U=n.length,U){if(U>o&&(U=o),U>l&&(U=l),0===U)break e;a.set(r.subarray(s,s+U),i),o-=U,s+=U,l-=U,i+=U,n.length-=U;break}n.mode=12;break;case 17:for(;Q<14;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(n.nlen=257+(31&B),B>>>=5,Q-=5,n.ndist=1+(31&B),B>>>=5,Q-=5,n.ncode=4+(15&B),B>>>=4,Q-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;Q<3;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.lens[R[n.have++]]=7&B,B>>>=3,Q-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,p={bits:n.lenbits},h=ot(0,n.lens,0,19,n.lencode,0,n.work,p),n.lenbits=p.bits,h){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;Z=n.lencode[B&(1<<n.lenbits)-1],u=Z>>>24,I=Z>>>16&255,m=65535&Z,!(u<=Q);){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(m<16)B>>>=u,Q-=u,n.lens[n.have++]=m;else{if(16===m){for(G=u+2;Q<G;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(B>>>=u,Q-=u,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}S=n.lens[n.have-1],U=3+(3&B),B>>>=2,Q-=2}else if(17===m){for(G=u+3;Q<G;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}B>>>=u,Q-=u,S=0,U=3+(7&B),B>>>=3,Q-=3}else{for(G=u+7;Q<G;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}B>>>=u,Q-=u,S=0,U=11+(127&B),B>>>=7,Q-=7}if(n.have+U>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;U--;)n.lens[n.have++]=S}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,p={bits:n.lenbits},h=ot(1,n.lens,0,n.nlen,n.lencode,0,n.work,p),n.lenbits=p.bits,h){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,p={bits:n.distbits},h=ot(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,p),n.distbits=p.bits,h){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,t===Qt)break e;case 20:n.mode=21;case 21:if(o>=6&&l>=258){e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=B,n.bits=Q,nt(e,F),i=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,B=n.hold,Q=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;Z=n.lencode[B&(1<<n.lenbits)-1],u=Z>>>24,I=Z>>>16&255,m=65535&Z,!(u<=Q);){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(I&&0==(240&I)){for(C=u,b=I,y=m;Z=n.lencode[y+((B&(1<<C+b)-1)>>C)],u=Z>>>24,I=Z>>>16&255,m=65535&Z,!(C+u<=Q);){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}B>>>=C,Q-=C,n.back+=C}if(B>>>=u,Q-=u,n.back+=u,n.length=m,0===I){n.mode=26;break}if(32&I){n.back=-1,n.mode=12;break}if(64&I){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&I,n.mode=22;case 22:if(n.extra){for(G=n.extra;Q<G;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.length+=B&(1<<n.extra)-1,B>>>=n.extra,Q-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;Z=n.distcode[B&(1<<n.distbits)-1],u=Z>>>24,I=Z>>>16&255,m=65535&Z,!(u<=Q);){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(0==(240&I)){for(C=u,b=I,y=m;Z=n.distcode[y+((B&(1<<C+b)-1)>>C)],u=Z>>>24,I=Z>>>16&255,m=65535&Z,!(C+u<=Q);){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}B>>>=C,Q-=C,n.back+=C}if(B>>>=u,Q-=u,n.back+=u,64&I){e.msg="invalid distance code",n.mode=30;break}n.offset=m,n.extra=15&I,n.mode=24;case 24:if(n.extra){for(G=n.extra;Q<G;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.offset+=B&(1<<n.extra)-1,B>>>=n.extra,Q-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break e;if(U=F-l,n.offset>U){if(U=n.offset-U,U>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}U>n.wnext?(U-=n.wnext,g=n.wsize-U):g=n.wnext-U,U>n.length&&(U=n.length),d=n.window}else d=a,g=i-n.offset,U=n.length;U>l&&(U=l),l-=U,n.length-=U;do{a[i++]=d[g++]}while(--U);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;a[i++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;Q<32;){if(0===o)break e;o--,B|=r[s++]<<Q,Q+=8}if(F-=l,e.total_out+=F,n.total+=F,F&&(e.adler=n.check=n.flags?W(n.check,a,F,i-F):v(n.check,a,F,i-F)),F=l,(n.flags?B:Ct(B))!==n.check){e.msg="incorrect data check",n.mode=30;break}B=0,Q=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;Q<32;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(B!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}B=0,Q=0}n.mode=29;case 29:h=Ft;break e;case 30:h=dt;break e;case 31:return ut;case 32:default:return gt}return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=B,n.bits=Q,(n.wsize||F!==e.avail_out&&n.mode<30&&(n.mode<27||t!==lt))&&Lt(e,e.output,e.next_out,F-e.avail_out),c-=e.avail_in,F-=e.avail_out,e.total_in+=c,e.total_out+=F,n.total+=F,n.wrap&&F&&(e.adler=n.check=n.flags?W(n.check,a,F,e.next_out-F):v(n.check,a,F,e.next_out-F)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===c&&0===F||t===lt)&&h===ct&&(h=It),h},Nt=e=>{if(!e||!e.state)return gt;let t=e.state;return t.window&&(t.window=null),e.state=null,ct},Et=(e,t)=>{if(!e||!e.state)return gt;const n=e.state;return 0==(2&n.wrap)?gt:(n.head=t,t.done=!1,ct)},Dt=(e,t)=>{const n=t.length;let r,a,s;return e&&e.state?(r=e.state,0!==r.wrap&&11!==r.mode?gt:11===r.mode&&(a=1,a=v(a,t,n,0),a!==r.check)?dt:(s=Lt(e,t,n,n),s?(r.mode=31,ut):(r.havedict=1,ct))):gt},vt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Jt=Object.prototype.toString,{Z_NO_FLUSH:Wt,Z_FINISH:Xt,Z_OK:Ht,Z_STREAM_END:Tt,Z_NEED_DICT:kt,Z_STREAM_ERROR:Mt,Z_DATA_ERROR:wt,Z_MEM_ERROR:Yt}=H;function Ot(e){this.options=De({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ke,this.strm.avail_out=0;let n=At(this.strm,t.windowBits);if(n!==Ht)throw new Error(X[n]);if(this.header=new vt,Et(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Xe(t.dictionary):"[object ArrayBuffer]"===Jt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Dt(this.strm,t.dictionary),n!==Ht)))throw new Error(X[n])}function zt(e,t){const n=new Ot(t);if(n.push(e),n.err)throw n.msg||X[n.err];return n.result}Ot.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let s,i,o;if(this.ended)return!1;for(i=t===~~t?t:!0===t?Xt:Wt,"[object ArrayBuffer]"===Jt.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=ft(n,i),s===kt&&a&&(s=Dt(n,a),s===Ht?s=ft(n,i):s===wt&&(s=kt));n.avail_in>0&&s===Tt&&n.state.wrap>0&&0!==e[n.next_in];)Vt(n),s=ft(n,i);switch(s){case Mt:case wt:case kt:case Yt:return this.onEnd(s),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||s===Tt))if("string"===this.options.to){let e=Te(n.output,n.next_out),t=n.next_out-e,a=He(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(a)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==Ht||0!==o){if(s===Tt)return s=Nt(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Ot.prototype.onData=function(e){this.chunks.push(e)},Ot.prototype.onEnd=function(e){e===Ht&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ve(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Pt={Inflate:Ot,inflate:zt,inflateRaw:function(e,t){return(t=t||{}).raw=!0,zt(e,t)},ungzip:zt,constants:H};const{Deflate:Kt,deflate:jt,deflateRaw:_t,gzip:qt}=tt,{Inflate:$t,inflate:en,inflateRaw:tn,ungzip:nn}=Pt;var rn={Deflate:Kt,deflate:jt,deflateRaw:_t,gzip:qt,Inflate:$t,inflate:en,inflateRaw:tn,ungzip:nn,constants:H}},function(e,t,n){"use strict";var r,a,s=n(11),i=s.b.MutationObserver||s.b.WebKitMutationObserver;if(i){var o=0,l=new i(F),B=s.b.document.createTextNode("");l.observe(B,{characterData:!0}),r=function(){B.data=o=++o%2}}else if(s.b.setImmediate||void 0===s.b.MessageChannel)r="document"in s.b&&"onreadystatechange"in s.b.document.createElement("script")?function(){var e=s.b.document.createElement("script");e.onreadystatechange=function(){F(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},s.b.document.documentElement.appendChild(e)}:function(){setTimeout(F,0)};else{var Q=new s.b.MessageChannel;Q.port1.onmessage=F,r=function(){Q.port2.postMessage(0)}}var c=[];function F(){var e,t;a=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}a=!1}function U(){}var g={},d=["REJECTED"],u=["FULFILLED"],I=["PENDING"],m=C;function C(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=I,this.queue=[],this.outcome=void 0,e!==U&&h(this,e)}function b(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function y(e,t,n){!function(e){1!==c.push(e)||a||r()}((function(){var r;try{r=t(n)}catch(r){return g.reject(e,r)}r===e?g.reject(e,new TypeError("Cannot resolve promise with itself")):g.resolve(e,r)}))}function S(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,g.reject(e,t))}function a(t){n||(n=!0,g.resolve(e,t))}var s=Z((function(){t(a,r)}));"error"===s.status&&r(s.value)}function Z(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}C.prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},C.prototype.catch=function(e){return this.then(null,e)},C.prototype.then=function(e,t){if("function"!=typeof e&&this.state===u||"function"!=typeof t&&this.state===d)return this;var n=new this.constructor(U);return this.state!==I?y(n,this.state===u?e:t,this.outcome):this.queue.push(new b(n,e,t)),n},b.prototype.callFulfilled=function(e){g.resolve(this.promise,e)},b.prototype.otherCallFulfilled=function(e){y(this.promise,this.onFulfilled,e)},b.prototype.callRejected=function(e){g.reject(this.promise,e)},b.prototype.otherCallRejected=function(e){y(this.promise,this.onRejected,e)},g.resolve=function(e,t){var n=Z(S,t);if("error"===n.status)return g.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=u,e.outcome=t;for(var a=-1,s=e.queue.length;++a<s;)e.queue[a].callFulfilled(t)}return e},g.reject=function(e,t){e.state=d,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},C.resolve=function(e){return e instanceof this?e:g.resolve(new this(U),e)},C.reject=function(e){var t=new this(U);return g.reject(t,e)},C.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,i=-1,o=new this(U);++i<n;)l(e[i],i);return o;function l(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==n||r||(r=!0,g.resolve(o,a))}),(function(e){r||(r=!0,g.reject(o,e))}))}},C.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,a=-1,s=new this(U);++a<t;)r=e[a],this.resolve(r).then((function(e){n||(n=!0,g.resolve(s,e))}),(function(e){n||(n=!0,g.reject(s,e))}));return s},n.d(t,"a",(function(){return x}));var x={Promise:"undefined"!=typeof Promise?Promise:m}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var r={isNode:void 0!==e,newBufferFrom:function(t,n){if(e.from&&e.from!==Uint8Array.from)return e.from(t,n);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new e(t,n)},allocBuffer:function(t){if(e.alloc)return e.alloc(t);var n=new e(t);return n.fill(0),n},isBuffer:function(t){return e.isBuffer(t)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,n(55).Buffer)},function(e,t,n){"use strict";var r=n(7),a=(n(5),n(2)),s=n(18),i=n(19),o=n(12),l=n(3),B=n(6),Q=function(e){return e},c=Object(l.h)(new Float64Array(16)),F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(s.a)(this,e),this.matrix=Object(l.h)(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=t?o.d:Q}return Object(i.a)(e,[{key:"rotateFromDirections",value:function(e,t){var n=new Float64Array(3),r=new Float64Array(3),a=new Float64Array(16);Object(B.p)(n,e[0],e[1],e[2]),Object(B.p)(r,t[0],t[1],t[2]),Object(B.l)(n,n),Object(B.l)(r,r);var s=Object(B.d)(n,r);return s>=1||(Object(B.c)(this.tmp,n,r),Object(B.j)(this.tmp)<1e-6&&(Object(B.c)(this.tmp,[1,0,0],e),Object(B.j)(this.tmp)<1e-6&&Object(B.c)(this.tmp,[0,1,0],e)),Object(l.f)(a,Math.acos(s),this.tmp),Object(l.l)(this.matrix,this.matrix,a)),this}},{key:"rotate",value:function(e,t){return B.p.apply(B.r,[this.tmp].concat(Object(r.a)(t))),Object(B.l)(this.tmp,this.tmp),Object(l.q)(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}},{key:"rotateX",value:function(e){return Object(l.a)(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateY",value:function(e){return Object(l.b)(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateZ",value:function(e){return Object(l.c)(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"translate",value:function(e,t,n){return Object(B.p)(this.tmp,e,t,n),Object(l.s)(this.matrix,this.matrix,this.tmp),this}},{key:"scale",value:function(e,t,n){return Object(B.p)(this.tmp,e,t,n),Object(l.r)(this.matrix,this.matrix,this.tmp),this}},{key:"multiply",value:function(e){return Object(l.l)(this.matrix,this.matrix,e),this}},{key:"identity",value:function(){return Object(l.h)(this.matrix),this}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(Object(a.n)(c,this.matrix))return this;for(var r=-1===n?e.length:t+3*n,s=t;s<r;s+=3)Object(B.p)(this.tmp,e[s],e[s+1],e[s+2]),Object(B.q)(this.tmp,this.tmp,this.matrix),e[s]=this.tmp[0],e[s+1]=this.tmp[1],e[s+2]=this.tmp[2];return this}},{key:"getMatrix",value:function(){return this.matrix}},{key:"setMatrix",value:function(e){return e&&16===e.length&&Object(l.d)(this.matrix,e),this}}]),e}(),U={buildFromDegree:function(){return new F(!0)},buildFromRadian:function(){return new F(!1)}};t.a=U},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r={};function a(e,t,n){n||(n=Error);var a=function(e){var n,r;function a(n,r,a){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,a))||this}return r=e,(n=a).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,a}(n);a.prototype.name=n.name,a.prototype.code=e,r[e]=a}function s(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}a("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),a("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,a,i;if("string"==typeof t&&(a="not ",t.substr(0,a.length)===a)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))i="The ".concat(e," ").concat(r," ").concat(s(t,"type"));else{var o=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+".".length>e.length)&&-1!==e.indexOf(".",n)}(e)?"property":"argument";i='The "'.concat(e,'" ').concat(o," ").concat(r," ").concat(s(t,"type"))}return i+". Received type ".concat(typeof n)}),TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");var i={codes:r}},function(e,t,n){"use strict";n(5);var r=n(0),a=n(41),s=n(17);function i(){var e=new ArrayBuffer(4),t=new Uint8Array(e),n=new Uint32Array(e);return t[0]=161,t[1]=178,t[2]=195,t[3]=212,3569595041===n[0]?"LittleEndian":2712847316===n[0]?"BigEndian":null}var o={ENDIANNESS:i(),getEndianness:i,swapBytes:function(e,t){if(!(t<2))for(var n=new Int8Array(e),r=n.length,a=[],s=0;s<r;s+=t){for(var i=0;i<t;i++)a.push(n[s+i]);for(var o=0;o<t;o++)n[s+o]=a.pop()}}},l=n(23),B=r.c.vtkErrorMacro,Q=r.c.vtkDebugMacro,c=0;function F(e){var t=document.querySelector('.webResource[data-url="'.concat(e,'"]'));return t?t.innerHTML:null}function U(e){return document.querySelector('.webResource[data-url="'.concat(e,'"]'))}function g(e){return"/"===e[0]?e.substr(1):e}var d={fetchJSON:function(){var e=arguments.length>1?arguments[1]:void 0;return new Promise((function(t,n){var r=F(g(e));null===r?n(new Error("No such JSON ".concat(e))):t(JSON.parse(r))}))},fetchText:function(){var e=arguments.length>1?arguments[1]:void 0;return new Promise((function(t,n){var r=F(e);null===r?n(new Error("No such text ".concat(e))):t(r)}))},fetchArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(i,U){var d=g([t,n.ref.basepath,r.compression?"".concat(n.ref.id,".gz"):n.ref.id].join("/")),u=F(d);if(null===u)U(new Error("No such array ".concat(d)));else{if("string"===n.dataType){var I=atob(u);r.compression&&(I=l.a.inflate(I,{to:"string"})),n.values=JSON.parse(I)}else{var m=new Uint8Array(a.a.toArrayBuffer(u));n.buffer=new ArrayBuffer(m.length),new Uint8Array(n.buffer).set(m),r.compression&&("string"===n.dataType||"JSON"===n.dataType?n.buffer=l.a.inflate(new Uint8Array(n.buffer),{to:"string"}):n.buffer=l.a.inflate(new Uint8Array(n.buffer)).buffer),"JSON"===n.ref.encode?n.values=JSON.parse(n.buffer):(o.ENDIANNESS!==n.ref.encode&&o.ENDIANNESS&&(Q("Swap bytes of ".concat(n.name)),o.swapBytes(n.buffer,s.a[n.dataType])),n.values=new window[n.dataType](n.buffer)),n.values.length!==n.size&&B("Error in FetchArray: ".concat(n.name," does not have the proper array size. Got ").concat(n.values.length,", instead of ").concat(n.size))}delete n.ref,0==--c&&e.invokeBusy&&e.invokeBusy(!1),e.modified&&e.modified(),i(n)}}))},fetchImage:function(){var e=arguments.length>1?arguments[1]:void 0;return new Promise((function(t,n){var r=U(e);r?t(r):n(new Error("No such image ".concat(e)))}))}},u=n(15),I=r.c.vtkErrorMacro,m=r.c.vtkDebugMacro,C=0;function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new XMLHttpRequest;return r.open(e,t,!0),n.headers&&Object.entries(n.headers).forEach((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return r.setRequestHeader(n,a)})),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}var y={fetchArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.ref&&!n.ref.pending?new Promise((function(a,i){var B=b("GET",[t,n.ref.basepath,r.compression?"".concat(n.ref.id,".gz"):n.ref.id].join("/"),r);B.onreadystatechange=function(t){1===B.readyState&&(n.ref.pending=!0,1==++C&&e.invokeBusy&&e.invokeBusy(!0)),4===B.readyState&&(n.ref.pending=!1,200===B.status||0===B.status?(n.buffer=B.response,r.compression&&("string"===n.dataType||"JSON"===n.dataType?n.buffer=l.a.inflate(new Uint8Array(n.buffer),{to:"string"}):n.buffer=l.a.inflate(new Uint8Array(n.buffer)).buffer),"JSON"===n.ref.encode?n.values=JSON.parse(n.buffer):(o.ENDIANNESS!==n.ref.encode&&o.ENDIANNESS&&(m("Swap bytes of ".concat(n.name)),o.swapBytes(n.buffer,s.a[n.dataType])),n.values=new window[n.dataType](n.buffer)),n.values.length!==n.size&&I("Error in FetchArray: ".concat(n.name,", does not have the proper array size. Got ").concat(n.values.length,", instead of ").concat(n.size)),delete n.ref,0==--C&&e.invokeBusy&&e.invokeBusy(!1),e.modified&&e.modified(),a(n)):i({xhr:B,e:t}))},B.responseType=r.compression||"string"!==n.dataType?"arraybuffer":"text",B.send()})):Promise.resolve(n)},fetchJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,a){var s=b("GET",t,n);s.onreadystatechange=function(t){1===s.readyState&&1==++C&&e.invokeBusy&&e.invokeBusy(!0),4===s.readyState&&(0==--C&&e.invokeBusy&&e.invokeBusy(!1),200===s.status||0===s.status?n.compression?r(JSON.parse(l.a.inflate(new Uint8Array(s.response),{to:"string"}))):r(JSON.parse(s.responseText)):a({xhr:s,e:t}))},s.responseType=n.compression?"arraybuffer":"text",s.send()}))},fetchText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n&&n.compression&&"gz"!==n.compression&&(I("Supported algorithms are: [gz]"),I("Unkown compression algorithm: ".concat(n.compression))),new Promise((function(r,a){var s=b("GET",t,n);s.onreadystatechange=function(t){1===s.readyState&&1==++C&&e.invokeBusy&&e.invokeBusy(!0),4===s.readyState&&(0==--C&&e.invokeBusy&&e.invokeBusy(!1),200===s.status||0===s.status?n.compression?r(l.a.inflate(new Uint8Array(s.response),{to:"string"})):r(s.responseText):a({xhr:s,e:t}))},s.responseType=n.compression?"arraybuffer":"text",s.send()}))},fetchBinary:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){var a=b("GET",e,t);a.onreadystatechange=function(e){4===a.readyState&&(200===a.status||0===a.status?n(a.response):r({xhr:a,e:e}))},a.responseType="arraybuffer",a.send()}))},fetchImage:function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(n,r){var a=new Image;t.crossOrigin&&(a.crossOrigin=t.crossOrigin),a.onload=function(){return n(a)},a.onerror=r,a.src=e}))}},S=n(20),h=n(24),Z={base64:!1,binary:!1,dir:!1,createFolders:!0,date:null,compression:null,compressionOptions:null,comment:null,unixPermissions:null,dosPermissions:null},x=n(25),p=n(8),G=n(13),R=n(11),L=Object(R.d)((function(e,t){for(var n=new Array(256),r=0;r<256;r++)n[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;function a(){G.a.call(this,"utf-8 decode"),this.leftOver=null}function s(){G.a.call(this,"utf-8 encode")}n[254]=n[254]=1,t.utf8encode=function(e){return S.a.nodebuffer?x.a.newBufferFrom(e,"utf-8"):function(e){var t,n,r,a,s,i=e.length,o=0;for(a=0;a<i;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=S.a.uint8array?new Uint8Array(o):new Array(o),s=0,a=0;s<o;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t}(e)},t.utf8decode=function(e){return S.a.nodebuffer?p.a.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,a,s,i=e.length,o=new Array(2*i);for(r=0,t=0;t<i;)if((a=e[t++])<128)o[r++]=a;else if((s=n[a])>4)o[r++]=65533,t+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&t<i;)a=a<<6|63&e[t++],s--;s>1?o[r++]=65533:a<65536?o[r++]=a:(a-=65536,o[r++]=55296|a>>10&1023,o[r++]=56320|1023&a)}return o.length!==r&&(o.subarray?o=o.subarray(0,r):o.length=r),p.a.applyFromCharCode(o)}(e=p.a.transformTo(S.a.uint8array?"uint8array":"array",e))},p.a.inherits(a,G.a),a.prototype.processChunk=function(e){var r=p.a.transformTo(S.a.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(S.a.uint8array){var a=r;(r=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),r.set(a,this.leftOver.length)}else r=this.leftOver.concat(r);this.leftOver=null}var s=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+n[e[r]]>t?r:t}(r),i=r;s!==r.length&&(S.a.uint8array?(i=r.subarray(0,s),this.leftOver=r.subarray(s,r.length)):(i=r.slice(0,s),this.leftOver=r.slice(s,r.length))),this.push({data:t.utf8decode(i),meta:e.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=a,p.a.inherits(s,G.a),s.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=s}),"/$$rollup_base$$/node_modules/jszip/lib"),V=n(53);function A(e){G.a.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=p.a.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}p.a.inherits(A,G.a),A.prototype.cleanUp=function(){G.a.prototype.cleanUp.call(this),this.data=null},A.prototype.resume=function(){return!!G.a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,p.a.delay(this._tickAndRepeat,[],this)),!0)},A.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(p.a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},A.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})};var f=A;function N(e){G.a.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}p.a.inherits(N,G.a),N.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}G.a.prototype.processChunk.call(this,e)};var E=N,D=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}(),v=function(e,t){return void 0!==e&&e.length?"string"!==p.a.getTypeOf(e)?function(e,t,n,r){var a=D,s=0+n;e^=-1;for(var i=0;i<s;i++)e=e>>>8^a[255&(e^t[i])];return-1^e}(0|t,e,e.length):function(e,t,n,r){var a=D,s=0+n;e^=-1;for(var i=0;i<s;i++)e=e>>>8^a[255&(e^t.charCodeAt(i))];return-1^e}(0|t,e,e.length):0};function J(){G.a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}p.a.inherits(J,G.a),J.prototype.processChunk=function(e){this.streamInfo.crc32=v(e.data,this.streamInfo.crc32||0),this.push(e)};var W=J;function X(e,t,n,r,a){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=a}X.prototype={getContentWorker:function(){var e=new f(h.a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new E("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new f(h.a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},X.createWorkerFrom=function(e,t,n){return e.pipe(new W).pipe(new E("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new E("compressedSize")).withStreamInfo("compression",t)};var H=X,T=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};T.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!r&&(t=t.pipe(new L.Utf8EncodeWorker)),!a&&r&&(t=t.pipe(new L.Utf8DecodeWorker))}catch(e){(t=new G.a("error")).error(e)}return new V.a(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof H&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new L.Utf8EncodeWorker)),H.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof H?this._data.getContentWorker():this._data instanceof G.a?this._data:new f(this._data)}};for(var k=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],M=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},w=0;w<k.length;w++)T.prototype[k[w]]=M;var Y=T,O=Object(R.d)((function(e,t){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var a in n)r(n,a)&&(e[a]=n[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),a);else for(var s=0;s<r;s++)e[a+s]=t[n+s]},flattenChunks:function(e){var t,n,r,a,s,i;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(i=new Uint8Array(r),a=0,t=0,n=e.length;t<n;t++)s=e[t],i.set(s,a),a+=s.length;return i}},s={arraySet:function(e,t,n,r,a){for(var s=0;s<r;s++)e[a+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(n)}),"/$$rollup_base$$/node_modules/jszip/node_modules/pako/lib/utils"),z={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function P(e){for(var t=e.length;--t>=0;)e[t]=0}var K=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(576);P($);var ee=new Array(60);P(ee);var te=new Array(512);P(te);var ne=new Array(256);P(ne);var re=new Array(29);P(re);var ae,se,ie,oe=new Array(30);function le(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function Be(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Qe(e){return e<256?te[e]:te[256+(e>>>7)]}function ce(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function Fe(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,ce(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function Ue(e,t,n){Fe(e,n[2*t],n[2*t+1])}function ge(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function de(e,t,n){var r,a,s=new Array(16),i=0;for(r=1;r<=15;r++)s[r]=i=i+n[r-1]<<1;for(a=0;a<=t;a++){var o=e[2*a+1];0!==o&&(e[2*a]=ge(s[o]++,o))}}function ue(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Ie(e){e.bi_valid>8?ce(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function me(e,t,n,r){var a=2*t,s=2*n;return e[a]<e[s]||e[a]===e[s]&&r[t]<=r[n]}function Ce(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&me(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!me(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r}function be(e,t,n){var r,a,s,i,o=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],a=e.pending_buf[e.l_buf+o],o++,0===r?Ue(e,a,t):(Ue(e,(s=ne[a])+256+1,t),0!==(i=K[s])&&Fe(e,a-=re[s],i),Ue(e,s=Qe(--r),n),0!==(i=j[s])&&Fe(e,r-=oe[s],i))}while(o<e.last_lit);Ue(e,256,t)}function ye(e,t){var n,r,a,s=t.dyn_tree,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,B=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<l;n++)0!==s[2*n]?(e.heap[++e.heap_len]=B=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(a=e.heap[++e.heap_len]=B<2?++B:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=i[2*a+1]);for(t.max_code=B,n=e.heap_len>>1;n>=1;n--)Ce(e,s,n);a=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ce(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,s[2*a]=s[2*n]+s[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,s[2*n+1]=s[2*r+1]=a,e.heap[1]=a++,Ce(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,a,s,i,o,l=t.dyn_tree,B=t.max_code,Q=t.stat_desc.static_tree,c=t.stat_desc.has_stree,F=t.stat_desc.extra_bits,U=t.stat_desc.extra_base,g=t.stat_desc.max_length,d=0;for(s=0;s<=15;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(s=l[2*l[2*(r=e.heap[n])+1]+1]+1)>g&&(s=g,d++),l[2*r+1]=s,r>B||(e.bl_count[s]++,i=0,r>=U&&(i=F[r-U]),o=l[2*r],e.opt_len+=o*(s+i),c&&(e.static_len+=o*(Q[2*r+1]+i)));if(0!==d){do{for(s=g-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[g]--,d-=2}while(d>0);for(s=g;0!==s;s--)for(r=e.bl_count[s];0!==r;)(a=e.heap[--n])>B||(l[2*a+1]!==s&&(e.opt_len+=(s-l[2*a+1])*l[2*a],l[2*a+1]=s),r--)}}(e,t),de(s,B,e.bl_count)}function Se(e,t,n){var r,a,s=-1,i=t[1],o=0,l=7,B=4;for(0===i&&(l=138,B=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=i,i=t[2*(r+1)+1],++o<l&&a===i||(o<B?e.bl_tree[2*a]+=o:0!==a?(a!==s&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,s=a,0===i?(l=138,B=3):a===i?(l=6,B=3):(l=7,B=4))}function he(e,t,n){var r,a,s=-1,i=t[1],o=0,l=7,B=4;for(0===i&&(l=138,B=3),r=0;r<=n;r++)if(a=i,i=t[2*(r+1)+1],!(++o<l&&a===i)){if(o<B)do{Ue(e,a,e.bl_tree)}while(0!=--o);else 0!==a?(a!==s&&(Ue(e,a,e.bl_tree),o--),Ue(e,16,e.bl_tree),Fe(e,o-3,2)):o<=10?(Ue(e,17,e.bl_tree),Fe(e,o-3,3)):(Ue(e,18,e.bl_tree),Fe(e,o-11,7));o=0,s=a,0===i?(l=138,B=3):a===i?(l=6,B=3):(l=7,B=4)}}P(oe);var Ze=!1;function xe(e,t,n,r){Fe(e,0+(r?1:0),3),function(e,t,n,r){Ie(e),ce(e,n),ce(e,~n),O.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}var pe,Ge={_tr_init:function(e){Ze||(function(){var e,t,n,r,a,s=new Array(16);for(n=0,r=0;r<28;r++)for(re[r]=n,e=0;e<1<<K[r];e++)ne[n++]=r;for(ne[n-1]=r,a=0,r=0;r<16;r++)for(oe[r]=a,e=0;e<1<<j[r];e++)te[a++]=r;for(a>>=7;r<30;r++)for(oe[r]=a<<7,e=0;e<1<<j[r]-7;e++)te[256+a++]=r;for(t=0;t<=15;t++)s[t]=0;for(e=0;e<=143;)$[2*e+1]=8,e++,s[8]++;for(;e<=255;)$[2*e+1]=9,e++,s[9]++;for(;e<=279;)$[2*e+1]=7,e++,s[7]++;for(;e<=287;)$[2*e+1]=8,e++,s[8]++;for(de($,287,s),e=0;e<30;e++)ee[2*e+1]=5,ee[2*e]=ge(e,5);ae=new le($,K,257,286,15),se=new le(ee,j,0,30,15),ie=new le(new Array(0),_,0,19,7)}(),Ze=!0),e.l_desc=new Be(e.dyn_ltree,ae),e.d_desc=new Be(e.dyn_dtree,se),e.bl_desc=new Be(e.bl_tree,ie),e.bi_buf=0,e.bi_valid=0,ue(e)},_tr_stored_block:xe,_tr_flush_block:function(e,t,n,r){var a,s,i=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),ye(e,e.l_desc),ye(e,e.d_desc),i=function(e){var t;for(Se(e,e.dyn_ltree,e.l_desc.max_code),Se(e,e.dyn_dtree,e.d_desc.max_code),ye(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*q[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?xe(e,t,n,r):4===e.strategy||s===a?(Fe(e,2+(r?1:0),3),be(e,$,ee)):(Fe(e,4+(r?1:0),3),function(e,t,n,r){var a;for(Fe(e,t-257,5),Fe(e,n-1,5),Fe(e,r-4,4),a=0;a<r;a++)Fe(e,e.bl_tree[2*q[a]+1],3);he(e,e.dyn_ltree,t-1),he(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),be(e,e.dyn_ltree,e.dyn_dtree)),ue(e),r&&Ie(e)},_tr_tally:function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ne[n]+256+1)]++,e.dyn_dtree[2*Qe(t)]++),e.last_lit===e.lit_bufsize-1},_tr_align:function(e){Fe(e,2,3),Ue(e,256,$),function(e){16===e.bi_valid?(ce(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},Re=function(e,t,n,r){for(var a=65535&e|0,s=e>>>16&65535|0,i=0;0!==n;){n-=i=n>2e3?2e3:n;do{s=s+(a=a+t[r++]|0)|0}while(--i);a%=65521,s%=65521}return a|s<<16|0},Le=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}(),Ve=function(e,t,n,r){var a=Le,s=r+n;e^=-1;for(var i=r;i<s;i++)e=e>>>8^a[255&(e^t[i])];return-1^e};function Ae(e,t){return e.msg=z[t],t}function fe(e){return(e<<1)-(e>4?9:0)}function Ne(e){for(var t=e.length;--t>=0;)e[t]=0}function Ee(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(O.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function De(e,t){Ge._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ee(e.strm)}function ve(e,t){e.pending_buf[e.pending++]=t}function Je(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function We(e,t){var n,r,a=e.max_chain_length,s=e.strstart,i=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,B=e.window,Q=e.w_mask,c=e.prev,F=e.strstart+258,U=B[s+i-1],g=B[s+i];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(B[(n=t)+i]===g&&B[n+i-1]===U&&B[n]===B[s]&&B[++n]===B[s+1]){s+=2,n++;do{}while(B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&B[++s]===B[++n]&&s<F);if(r=258-(F-s),s=F-258,r>i){if(e.match_start=t,i=r,r>=o)break;U=B[s+i-1],g=B[s+i]}}}while((t=c[t&Q])>l&&0!=--a);return i<=e.lookahead?i:e.lookahead}function Xe(e){var t,n,r,a,s,i,o,l,B,Q,c=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=c+(c-262)){O.arraySet(e.window,e.window,c,c,0),e.match_start-=c,e.strstart-=c,e.block_start-=c,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=c?r-c:0}while(--n);t=n=c;do{r=e.prev[--t],e.prev[t]=r>=c?r-c:0}while(--n);a+=c}if(0===e.strm.avail_in)break;if(i=e.strm,o=e.window,l=e.strstart+e.lookahead,B=a,Q=void 0,(Q=i.avail_in)>B&&(Q=B),n=0===Q?0:(i.avail_in-=Q,O.arraySet(o,i.input,i.next_in,Q,l),1===i.state.wrap?i.adler=Re(i.adler,o,Q,l):2===i.state.wrap&&(i.adler=Ve(i.adler,o,Q,l)),i.next_in+=Q,i.total_in+=Q,Q),e.lookahead+=n,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+3-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function He(e,t){for(var n,r;;){if(e.lookahead<262){if(Xe(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=We(e,n)),e.match_length>=3)if(r=Ge._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=Ge._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(De(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(De(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(De(e,!1),0===e.strm.avail_out)?1:2}function Te(e,t){for(var n,r,a;;){if(e.lookahead<262){if(Xe(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=We(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=Ge._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(De(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=Ge._tr_tally(e,0,e.window[e.strstart-1]))&&De(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Ge._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(De(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(De(e,!1),0===e.strm.avail_out)?1:2}function ke(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}function Me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new O.Buf16(1146),this.dyn_dtree=new O.Buf16(122),this.bl_tree=new O.Buf16(78),Ne(this.dyn_ltree),Ne(this.dyn_dtree),Ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new O.Buf16(16),this.heap=new O.Buf16(573),Ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new O.Buf16(573),Ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function we(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,Ge._tr_init(t),0):Ae(e,-2)}function Ye(e){var t,n=we(e);return 0===n&&((t=e.state).window_size=2*t.w_size,Ne(t.head),t.max_lazy_match=pe[t.level].max_lazy,t.good_match=pe[t.level].good_length,t.nice_match=pe[t.level].nice_length,t.max_chain_length=pe[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function Oe(e,t,n,r,a,s){if(!e)return-2;var i=1;if(-1===t&&(t=6),r<0?(i=0,r=-r):r>15&&(i=2,r-=16),a<1||a>9||8!==n||r<8||r>15||t<0||t>9||s<0||s>4)return Ae(e,-2);8===r&&(r=9);var o=new Me;return e.state=o,o.strm=e,o.wrap=i,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new O.Buf8(2*o.w_size),o.head=new O.Buf16(o.hash_size),o.prev=new O.Buf16(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new O.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=s,o.method=n,Ye(e)}pe=[new ke(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Xe(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,De(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(De(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(De(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(De(e,!1),e.strm.avail_out),1)})),new ke(4,4,8,4,He),new ke(4,5,16,8,He),new ke(4,6,32,32,He),new ke(4,4,16,16,Te),new ke(8,16,32,32,Te),new ke(8,16,128,128,Te),new ke(8,32,128,256,Te),new ke(32,128,258,1024,Te),new ke(32,258,258,4096,Te)];var ze={deflateInit:function(e,t){return Oe(e,t,8,15,8,0)},deflateInit2:Oe,deflateReset:Ye,deflateResetKeep:we,deflateSetHeader:function(e,t){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=t,0):-2},deflate:function(e,t){var n,r,a,s;if(!e||!e.state||t>5||t<0)return e?Ae(e,-2):-2;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&4!==t)return Ae(e,0===e.avail_out?-5:-2);if(r.strm=e,n=r.last_flush,r.last_flush=t,42===r.status)if(2===r.wrap)e.adler=0,ve(r,31),ve(r,139),ve(r,8),r.gzhead?(ve(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ve(r,255&r.gzhead.time),ve(r,r.gzhead.time>>8&255),ve(r,r.gzhead.time>>16&255),ve(r,r.gzhead.time>>24&255),ve(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),ve(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(ve(r,255&r.gzhead.extra.length),ve(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Ve(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(ve(r,0),ve(r,0),ve(r,0),ve(r,0),ve(r,0),ve(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),ve(r,3),r.status=113);else{var i=8+(r.w_bits-8<<4)<<8;i|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(i|=32),i+=31-i%31,r.status=113,Je(r,i),0!==r.strstart&&(Je(r,e.adler>>>16),Je(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(e.adler=Ve(e.adler,r.pending_buf,r.pending-a,a)),Ee(e),a=r.pending,r.pending!==r.pending_buf_size));)ve(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(e.adler=Ve(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(e.adler=Ve(e.adler,r.pending_buf,r.pending-a,a)),Ee(e),a=r.pending,r.pending===r.pending_buf_size)){s=1;break}s=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,ve(r,s)}while(0!==s);r.gzhead.hcrc&&r.pending>a&&(e.adler=Ve(e.adler,r.pending_buf,r.pending-a,a)),0===s&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(e.adler=Ve(e.adler,r.pending_buf,r.pending-a,a)),Ee(e),a=r.pending,r.pending===r.pending_buf_size)){s=1;break}s=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,ve(r,s)}while(0!==s);r.gzhead.hcrc&&r.pending>a&&(e.adler=Ve(e.adler,r.pending_buf,r.pending-a,a)),0===s&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Ee(e),r.pending+2<=r.pending_buf_size&&(ve(r,255&e.adler),ve(r,e.adler>>8&255),e.adler=0,r.status=113)):r.status=113),0!==r.pending){if(Ee(e),0===e.avail_out)return r.last_flush=-1,0}else if(0===e.avail_in&&fe(t)<=fe(n)&&4!==t)return Ae(e,-5);if(666===r.status&&0!==e.avail_in)return Ae(e,-5);if(0!==e.avail_in||0!==r.lookahead||0!==t&&666!==r.status){var o=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(Xe(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=Ge._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(De(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(De(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(De(e,!1),0===e.strm.avail_out)?1:2}(r,t):3===r.strategy?function(e,t){for(var n,r,a,s,i=e.window;;){if(e.lookahead<=258){if(Xe(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=i[a=e.strstart-1])===i[++a]&&r===i[++a]&&r===i[++a]){s=e.strstart+258;do{}while(r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&a<s);e.match_length=258-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Ge._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ge._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(De(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(De(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(De(e,!1),0===e.strm.avail_out)?1:2}(r,t):pe[r.level].func(r,t);if(3!==o&&4!==o||(r.status=666),1===o||3===o)return 0===e.avail_out&&(r.last_flush=-1),0;if(2===o&&(1===t?Ge._tr_align(r):5!==t&&(Ge._tr_stored_block(r,0,0,!1),3===t&&(Ne(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Ee(e),0===e.avail_out))return r.last_flush=-1,0}return 4!==t?0:r.wrap<=0?1:(2===r.wrap?(ve(r,255&e.adler),ve(r,e.adler>>8&255),ve(r,e.adler>>16&255),ve(r,e.adler>>24&255),ve(r,255&e.total_in),ve(r,e.total_in>>8&255),ve(r,e.total_in>>16&255),ve(r,e.total_in>>24&255)):(Je(r,e.adler>>>16),Je(r,65535&e.adler)),Ee(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},deflateEnd:function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?Ae(e,-2):(e.state=null,113===t?Ae(e,-3):0):-2},deflateSetDictionary:function(e,t){var n,r,a,s,i,o,l,B,Q=t.length;if(!e||!e.state)return-2;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return-2;for(1===s&&(e.adler=Re(e.adler,t,Q,0)),n.wrap=0,Q>=n.w_size&&(0===s&&(Ne(n.head),n.strstart=0,n.block_start=0,n.insert=0),B=new O.Buf8(n.w_size),O.arraySet(B,t,Q-n.w_size,n.w_size,0),t=B,Q=n.w_size),i=e.avail_in,o=e.next_in,l=e.input,e.avail_in=Q,e.next_in=0,e.input=t,Xe(n);n.lookahead>=3;){r=n.strstart,a=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=2,Xe(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=o,e.input=l,e.avail_in=i,n.wrap=s,0},deflateInfo:"pako deflate (from Nodeca project)"},Pe=!0,Ke=!0;try{String.fromCharCode.apply(null,[0])}catch(e){Pe=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ke=!1}for(var je=new O.Buf8(256),_e=0;_e<256;_e++)je[_e]=_e>=252?6:_e>=248?5:_e>=240?4:_e>=224?3:_e>=192?2:1;function qe(e,t){if(t<65534&&(e.subarray&&Ke||!e.subarray&&Pe))return String.fromCharCode.apply(null,O.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}je[254]=je[254]=1;var $e=function(e){var t,n,r,a,s,i=e.length,o=0;for(a=0;a<i;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new O.Buf8(o),s=0,a=0;s<o;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<i&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},et=function(e){return qe(e,e.length)},tt=function(e){for(var t=new O.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},nt=function(e,t){var n,r,a,s,i=t||e.length,o=new Array(2*i);for(r=0,n=0;n<i;)if((a=e[n++])<128)o[r++]=a;else if((s=je[a])>4)o[r++]=65533,n+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&n<i;)a=a<<6|63&e[n++],s--;s>1?o[r++]=65533:a<65536?o[r++]=a:(a-=65536,o[r++]=55296|a>>10&1023,o[r++]=56320|1023&a)}return qe(o,r)},rt=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+je[e[n]]>t?n:t},at=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},st=Object.prototype.toString;function it(e){if(!(this instanceof it))return new it(e);this.options=O.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new at,this.strm.avail_out=0;var n=ze.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(z[n]);if(t.header&&ze.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?$e(t.dictionary):"[object ArrayBuffer]"===st.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=ze.deflateSetDictionary(this.strm,r)))throw new Error(z[n]);this._dict_set=!0}}function ot(e,t){var n=new it(t);if(n.push(e,!0),n.err)throw n.msg||z[n.err];return n.result}it.prototype.push=function(e,t){var n,r,a=this.strm,s=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=$e(e):"[object ArrayBuffer]"===st.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new O.Buf8(s),a.next_out=0,a.avail_out=s),1!==(n=ze.deflate(a,r))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(et(O.shrinkBuf(a.output,a.next_out))):this.onData(O.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==n);return 4===r?(n=ze.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==r||(this.onEnd(0),a.avail_out=0,!0)},it.prototype.onData=function(e){this.chunks.push(e)},it.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=O.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var lt={Deflate:it,deflate:ot,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ot(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ot(e,t)}},Bt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Qt=function(e,t){var n,r,a,s,i,o,l,B,Q,c,F,U,g,d,u,I,m,C,b,y,S,h,Z,x,p;n=e.state,r=e.next_in,x=e.input,a=r+(e.avail_in-5),s=e.next_out,p=e.output,i=s-(t-e.avail_out),o=s+(e.avail_out-257),l=n.dmax,B=n.wsize,Q=n.whave,c=n.wnext,F=n.window,U=n.hold,g=n.bits,d=n.lencode,u=n.distcode,I=(1<<n.lenbits)-1,m=(1<<n.distbits)-1;e:do{g<15&&(U+=x[r++]<<g,g+=8,U+=x[r++]<<g,g+=8),C=d[U&I];t:for(;;){if(U>>>=b=C>>>24,g-=b,0==(b=C>>>16&255))p[s++]=65535&C;else{if(!(16&b)){if(0==(64&b)){C=d[(65535&C)+(U&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}y=65535&C,(b&=15)&&(g<b&&(U+=x[r++]<<g,g+=8),y+=U&(1<<b)-1,U>>>=b,g-=b),g<15&&(U+=x[r++]<<g,g+=8,U+=x[r++]<<g,g+=8),C=u[U&m];n:for(;;){if(U>>>=b=C>>>24,g-=b,!(16&(b=C>>>16&255))){if(0==(64&b)){C=u[(65535&C)+(U&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(S=65535&C,g<(b&=15)&&(U+=x[r++]<<g,(g+=8)<b&&(U+=x[r++]<<g,g+=8)),(S+=U&(1<<b)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(U>>>=b,g-=b,S>(b=s-i)){if((b=S-b)>Q&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(h=0,Z=F,0===c){if(h+=B-b,b<y){y-=b;do{p[s++]=F[h++]}while(--b);h=s-S,Z=p}}else if(c<b){if(h+=B+c-b,(b-=c)<y){y-=b;do{p[s++]=F[h++]}while(--b);if(h=0,c<y){y-=b=c;do{p[s++]=F[h++]}while(--b);h=s-S,Z=p}}}else if(h+=c-b,b<y){y-=b;do{p[s++]=F[h++]}while(--b);h=s-S,Z=p}for(;y>2;)p[s++]=Z[h++],p[s++]=Z[h++],p[s++]=Z[h++],y-=3;y&&(p[s++]=Z[h++],y>1&&(p[s++]=Z[h++]))}else{h=s-S;do{p[s++]=p[h++],p[s++]=p[h++],p[s++]=p[h++],y-=3}while(y>2);y&&(p[s++]=p[h++],y>1&&(p[s++]=p[h++]))}break}}break}}while(r<a&&s<o);r-=y=g>>3,U&=(1<<(g-=y<<3))-1,e.next_in=r,e.next_out=s,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=s<o?o-s+257:257-(s-o),n.hold=U,n.bits=g},ct=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Ft=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Ut=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],gt=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],dt=function(e,t,n,r,a,s,i,o){var l,B,Q,c,F,U,g,d,u,I=o.bits,m=0,C=0,b=0,y=0,S=0,h=0,Z=0,x=0,p=0,G=0,R=null,L=0,V=new O.Buf16(16),A=new O.Buf16(16),f=null,N=0;for(m=0;m<=15;m++)V[m]=0;for(C=0;C<r;C++)V[t[n+C]]++;for(S=I,y=15;y>=1&&0===V[y];y--);if(S>y&&(S=y),0===y)return a[s++]=20971520,a[s++]=20971520,o.bits=1,0;for(b=1;b<y&&0===V[b];b++);for(S<b&&(S=b),x=1,m=1;m<=15;m++)if(x<<=1,(x-=V[m])<0)return-1;if(x>0&&(0===e||1!==y))return-1;for(A[1]=0,m=1;m<15;m++)A[m+1]=A[m]+V[m];for(C=0;C<r;C++)0!==t[n+C]&&(i[A[t[n+C]]++]=C);if(0===e?(R=f=i,U=19):1===e?(R=ct,L-=257,f=Ft,N-=257,U=256):(R=Ut,f=gt,U=-1),G=0,C=0,m=b,F=s,h=S,Z=0,Q=-1,c=(p=1<<S)-1,1===e&&p>852||2===e&&p>592)return 1;for(;;){g=m-Z,i[C]<U?(d=0,u=i[C]):i[C]>U?(d=f[N+i[C]],u=R[L+i[C]]):(d=96,u=0),l=1<<m-Z,b=B=1<<h;do{a[F+(G>>Z)+(B-=l)]=g<<24|d<<16|u|0}while(0!==B);for(l=1<<m-1;G&l;)l>>=1;if(0!==l?(G&=l-1,G+=l):G=0,C++,0==--V[m]){if(m===y)break;m=t[n+i[C]]}if(m>S&&(G&c)!==Q){for(0===Z&&(Z=S),F+=b,x=1<<(h=m-Z);h+Z<y&&!((x-=V[h+Z])<=0);)h++,x<<=1;if(p+=1<<h,1===e&&p>852||2===e&&p>592)return 1;a[Q=G&c]=S<<24|h<<16|F-s|0}}return 0!==G&&(a[F+G]=m-Z<<24|64<<16|0),o.bits=S,0};function ut(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function It(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new O.Buf16(320),this.work=new O.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function mt(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new O.Buf32(852),t.distcode=t.distdyn=new O.Buf32(592),t.sane=1,t.back=-1,0):-2}function Ct(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,mt(e)):-2}function bt(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Ct(e))):-2}function yt(e,t){var n,r;return e?(r=new It,e.state=r,r.window=null,0!==(n=bt(e,t))&&(e.state=null),n):-2}var St,ht,Zt=!0;function xt(e){if(Zt){var t;for(St=new O.Buf32(512),ht=new O.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(dt(1,e.lens,0,288,St,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;dt(2,e.lens,0,32,ht,0,e.work,{bits:5}),Zt=!1}e.lencode=St,e.lenbits=9,e.distcode=ht,e.distbits=5}function pt(e,t,n,r){var a,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new O.Buf8(s.wsize)),r>=s.wsize?(O.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((a=s.wsize-s.wnext)>r&&(a=r),O.arraySet(s.window,t,n-r,a,s.wnext),(r-=a)?(O.arraySet(s.window,t,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}var Gt={inflateReset:Ct,inflateReset2:bt,inflateResetKeep:mt,inflateInit:function(e){return yt(e,15)},inflateInit2:yt,inflate:function(e,t){var n,r,a,s,i,o,l,B,Q,c,F,U,g,d,u,I,m,C,b,y,S,h,Z,x,p=0,G=new O.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(n=e.state).mode&&(n.mode=13),i=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,B=n.hold,Q=n.bits,c=o,F=l,h=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;Q<16;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(2&n.wrap&&35615===B){n.check=0,G[0]=255&B,G[1]=B>>>8&255,n.check=Ve(n.check,G,2,0),B=0,Q=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&B)<<8)+(B>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&B)){e.msg="unknown compression method",n.mode=30;break}if(Q-=4,S=8+(15&(B>>>=4)),0===n.wbits)n.wbits=S;else if(S>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<S,e.adler=n.check=1,n.mode=512&B?10:12,B=0,Q=0;break;case 2:for(;Q<16;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(n.flags=B,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=B>>8&1),512&n.flags&&(G[0]=255&B,G[1]=B>>>8&255,n.check=Ve(n.check,G,2,0)),B=0,Q=0,n.mode=3;case 3:for(;Q<32;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.head&&(n.head.time=B),512&n.flags&&(G[0]=255&B,G[1]=B>>>8&255,G[2]=B>>>16&255,G[3]=B>>>24&255,n.check=Ve(n.check,G,4,0)),B=0,Q=0,n.mode=4;case 4:for(;Q<16;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.head&&(n.head.xflags=255&B,n.head.os=B>>8),512&n.flags&&(G[0]=255&B,G[1]=B>>>8&255,n.check=Ve(n.check,G,2,0)),B=0,Q=0,n.mode=5;case 5:if(1024&n.flags){for(;Q<16;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.length=B,n.head&&(n.head.extra_len=B),512&n.flags&&(G[0]=255&B,G[1]=B>>>8&255,n.check=Ve(n.check,G,2,0)),B=0,Q=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((U=n.length)>o&&(U=o),U&&(n.head&&(S=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),O.arraySet(n.head.extra,r,s,U,S)),512&n.flags&&(n.check=Ve(n.check,r,U,s)),o-=U,s+=U,n.length-=U),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break e;U=0;do{S=r[s+U++],n.head&&S&&n.length<65536&&(n.head.name+=String.fromCharCode(S))}while(S&&U<o);if(512&n.flags&&(n.check=Ve(n.check,r,U,s)),o-=U,s+=U,S)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break e;U=0;do{S=r[s+U++],n.head&&S&&n.length<65536&&(n.head.comment+=String.fromCharCode(S))}while(S&&U<o);if(512&n.flags&&(n.check=Ve(n.check,r,U,s)),o-=U,s+=U,S)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;Q<16;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(B!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}B=0,Q=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;Q<32;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}e.adler=n.check=ut(B),B=0,Q=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=B,n.bits=Q,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){B>>>=7&Q,Q-=7&Q,n.mode=27;break}for(;Q<3;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}switch(n.last=1&B,Q-=1,3&(B>>>=1)){case 0:n.mode=14;break;case 1:if(xt(n),n.mode=20,6===t){B>>>=2,Q-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}B>>>=2,Q-=2;break;case 14:for(B>>>=7&Q,Q-=7&Q;Q<32;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if((65535&B)!=(B>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&B,B=0,Q=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(U=n.length){if(U>o&&(U=o),U>l&&(U=l),0===U)break e;O.arraySet(a,r,s,U,i),o-=U,s+=U,l-=U,i+=U,n.length-=U;break}n.mode=12;break;case 17:for(;Q<14;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(n.nlen=257+(31&B),B>>>=5,Q-=5,n.ndist=1+(31&B),B>>>=5,Q-=5,n.ncode=4+(15&B),B>>>=4,Q-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;Q<3;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.lens[R[n.have++]]=7&B,B>>>=3,Q-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Z={bits:n.lenbits},h=dt(0,n.lens,0,19,n.lencode,0,n.work,Z),n.lenbits=Z.bits,h){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;I=(p=n.lencode[B&(1<<n.lenbits)-1])>>>16&255,m=65535&p,!((u=p>>>24)<=Q);){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(m<16)B>>>=u,Q-=u,n.lens[n.have++]=m;else{if(16===m){for(x=u+2;Q<x;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(B>>>=u,Q-=u,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}S=n.lens[n.have-1],U=3+(3&B),B>>>=2,Q-=2}else if(17===m){for(x=u+3;Q<x;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}Q-=u,S=0,U=3+(7&(B>>>=u)),B>>>=3,Q-=3}else{for(x=u+7;Q<x;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}Q-=u,S=0,U=11+(127&(B>>>=u)),B>>>=7,Q-=7}if(n.have+U>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;U--;)n.lens[n.have++]=S}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,Z={bits:n.lenbits},h=dt(1,n.lens,0,n.nlen,n.lencode,0,n.work,Z),n.lenbits=Z.bits,h){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,Z={bits:n.distbits},h=dt(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Z),n.distbits=Z.bits,h){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(o>=6&&l>=258){e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=B,n.bits=Q,Qt(e,F),i=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,B=n.hold,Q=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;I=(p=n.lencode[B&(1<<n.lenbits)-1])>>>16&255,m=65535&p,!((u=p>>>24)<=Q);){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(I&&0==(240&I)){for(C=u,b=I,y=m;I=(p=n.lencode[y+((B&(1<<C+b)-1)>>C)])>>>16&255,m=65535&p,!(C+(u=p>>>24)<=Q);){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}B>>>=C,Q-=C,n.back+=C}if(B>>>=u,Q-=u,n.back+=u,n.length=m,0===I){n.mode=26;break}if(32&I){n.back=-1,n.mode=12;break}if(64&I){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&I,n.mode=22;case 22:if(n.extra){for(x=n.extra;Q<x;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.length+=B&(1<<n.extra)-1,B>>>=n.extra,Q-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;I=(p=n.distcode[B&(1<<n.distbits)-1])>>>16&255,m=65535&p,!((u=p>>>24)<=Q);){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(0==(240&I)){for(C=u,b=I,y=m;I=(p=n.distcode[y+((B&(1<<C+b)-1)>>C)])>>>16&255,m=65535&p,!(C+(u=p>>>24)<=Q);){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}B>>>=C,Q-=C,n.back+=C}if(B>>>=u,Q-=u,n.back+=u,64&I){e.msg="invalid distance code",n.mode=30;break}n.offset=m,n.extra=15&I,n.mode=24;case 24:if(n.extra){for(x=n.extra;Q<x;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}n.offset+=B&(1<<n.extra)-1,B>>>=n.extra,Q-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break e;if(U=F-l,n.offset>U){if((U=n.offset-U)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}U>n.wnext?(U-=n.wnext,g=n.wsize-U):g=n.wnext-U,U>n.length&&(U=n.length),d=n.window}else d=a,g=i-n.offset,U=n.length;U>l&&(U=l),l-=U,n.length-=U;do{a[i++]=d[g++]}while(--U);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;a[i++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;Q<32;){if(0===o)break e;o--,B|=r[s++]<<Q,Q+=8}if(F-=l,e.total_out+=F,n.total+=F,F&&(e.adler=n.check=n.flags?Ve(n.check,a,F,i-F):Re(n.check,a,F,i-F)),F=l,(n.flags?B:ut(B))!==n.check){e.msg="incorrect data check",n.mode=30;break}B=0,Q=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;Q<32;){if(0===o)break e;o--,B+=r[s++]<<Q,Q+=8}if(B!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}B=0,Q=0}n.mode=29;case 29:h=1;break e;case 30:h=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=B,n.bits=Q,(n.wsize||F!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&pt(e,e.output,e.next_out,F-e.avail_out),c-=e.avail_in,F-=e.avail_out,e.total_in+=c,e.total_out+=F,n.total+=F,n.wrap&&F&&(e.adler=n.check=n.flags?Ve(n.check,a,F,e.next_out-F):Re(n.check,a,F,e.next_out-F)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===c&&0===F||4===t)&&0===h&&(h=-5),h},inflateEnd:function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},inflateGetHeader:function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?-2:(n.head=t,t.done=!1,0):-2},inflateSetDictionary:function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?-2:11===n.mode&&Re(1,t,r,0)!==n.check?-3:pt(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},Rt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Lt=Object.prototype.toString;function Vt(e){if(!(this instanceof Vt))return new Vt(e);this.options=O.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new at,this.strm.avail_out=0;var n=Gt.inflateInit2(this.strm,t.windowBits);if(n!==Bt.Z_OK)throw new Error(z[n]);if(this.header=new Rt,Gt.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=$e(t.dictionary):"[object ArrayBuffer]"===Lt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Gt.inflateSetDictionary(this.strm,t.dictionary))!==Bt.Z_OK))throw new Error(z[n])}function At(e,t){var n=new Vt(t);if(n.push(e,!0),n.err)throw n.msg||z[n.err];return n.result}Vt.prototype.push=function(e,t){var n,r,a,s,i,o=this.strm,l=this.options.chunkSize,B=this.options.dictionary,Q=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?Bt.Z_FINISH:Bt.Z_NO_FLUSH,"string"==typeof e?o.input=tt(e):"[object ArrayBuffer]"===Lt.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new O.Buf8(l),o.next_out=0,o.avail_out=l),(n=Gt.inflate(o,Bt.Z_NO_FLUSH))===Bt.Z_NEED_DICT&&B&&(n=Gt.inflateSetDictionary(this.strm,B)),n===Bt.Z_BUF_ERROR&&!0===Q&&(n=Bt.Z_OK,Q=!1),n!==Bt.Z_STREAM_END&&n!==Bt.Z_OK)return this.onEnd(n),this.ended=!0,!1;o.next_out&&(0!==o.avail_out&&n!==Bt.Z_STREAM_END&&(0!==o.avail_in||r!==Bt.Z_FINISH&&r!==Bt.Z_SYNC_FLUSH)||("string"===this.options.to?(a=rt(o.output,o.next_out),s=o.next_out-a,i=nt(o.output,a),o.next_out=s,o.avail_out=l-s,s&&O.arraySet(o.output,o.output,a,s,0),this.onData(i)):this.onData(O.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(Q=!0)}while((o.avail_in>0||0===o.avail_out)&&n!==Bt.Z_STREAM_END);return n===Bt.Z_STREAM_END&&(r=Bt.Z_FINISH),r===Bt.Z_FINISH?(n=Gt.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Bt.Z_OK):r!==Bt.Z_SYNC_FLUSH||(this.onEnd(Bt.Z_OK),o.avail_out=0,!0)},Vt.prototype.onData=function(e){this.chunks.push(e)},Vt.prototype.onEnd=function(e){e===Bt.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=O.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ft={Inflate:Vt,inflate:At,inflateRaw:function(e,t){return(t=t||{}).raw=!0,At(e,t)},ungzip:At},Nt={};(0,O.assign)(Nt,lt,ft,Bt);var Et=Nt,Dt="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array?"uint8array":"array";function vt(e,t){G.a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}p.a.inherits(vt,G.a),vt.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(p.a.transformTo(Dt,e.data),!1)},vt.prototype.flush=function(){G.a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},vt.prototype.cleanUp=function(){G.a.prototype.cleanUp.call(this),this._pako=null},vt.prototype._createPako=function(){this._pako=new Et[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}};var Jt={STORE:{magic:"\0\0",compressWorker:function(e){return new G.a("STORE compression")},uncompressWorker:function(){return new G.a("STORE decompression")}},DEFLATE:{magic:"\b\0",compressWorker:function(e){return new vt("Deflate",e)},uncompressWorker:function(){return new vt("Inflate",{})}}},Wt="PK",Xt="PK",Ht="PK",Tt="PK",kt="PK",Mt="PK\b",wt=function(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r},Yt=function(e,t,n,r,a,s){var i,o,l=e.file,B=e.compression,Q=s!==L.utf8encode,c=p.a.transformTo("string",s(l.name)),F=p.a.transformTo("string",L.utf8encode(l.name)),U=l.comment,g=p.a.transformTo("string",s(U)),d=p.a.transformTo("string",L.utf8encode(U)),u=F.length!==l.name.length,I=d.length!==U.length,m="",C="",b="",y=l.dir,S=l.date,h={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(h.crc32=e.crc32,h.compressedSize=e.compressedSize,h.uncompressedSize=e.uncompressedSize);var Z=0;t&&(Z|=8),Q||!u&&!I||(Z|=2048);var x,G,R=0,V=0;y&&(R|=16),"UNIX"===a?(V=798,R|=(G=x=l.unixPermissions,x||(G=y?16893:33204),(65535&G)<<16)):(V=20,R|=63&(l.dosPermissions||0)),i=S.getUTCHours(),i<<=6,i|=S.getUTCMinutes(),i<<=5,i|=S.getUTCSeconds()/2,o=S.getUTCFullYear()-1980,o<<=4,o|=S.getUTCMonth()+1,o<<=5,o|=S.getUTCDate(),u&&(C=wt(1,1)+wt(v(c),4)+F,m+="up"+wt(C.length,2)+C),I&&(b=wt(1,1)+wt(v(g),4)+d,m+="uc"+wt(b.length,2)+b);var A="";return A+="\n\0",A+=wt(Z,2),A+=B.magic,A+=wt(i,2),A+=wt(o,2),A+=wt(h.crc32,4),A+=wt(h.compressedSize,4),A+=wt(h.uncompressedSize,4),A+=wt(c.length,2),A+=wt(m.length,2),{fileRecord:Wt+A+c+m,dirRecord:Xt+wt(V,2)+A+wt(g.length,2)+"\0\0\0\0"+wt(R,4)+wt(r,4)+c+m+g}},Ot=function(e){return Mt+wt(e.crc32,4)+wt(e.compressedSize,4)+wt(e.uncompressedSize,4)};function zt(e,t,n,r){G.a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}p.a.inherits(zt,G.a),zt.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,G.a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},zt.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=Yt(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},zt.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=Yt(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:Ot(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},zt.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,r=function(e,t,n,r,a){var s=p.a.transformTo("string",a(r));return Ht+"\0\0\0\0"+wt(e,2)+wt(e,2)+wt(t,4)+wt(n,4)+wt(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},zt.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},zt.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},zt.prototype.resume=function(){return!!G.a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},zt.prototype.error=function(e){var t=this._sources;if(!G.a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},zt.prototype.lock=function(){G.a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()};var Pt=zt,Kt=function(e,t,n){var r=new Pt(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var s=function(e,t){var n=e||t,r=Jt[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,t.compression),i=n.options.compressionOptions||t.compressionOptions||{},o=n.dir,l=n.date;n._compressWorker(s,i).withStreamInfo("file",{name:e,dir:o,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(r)})),r.entriesCount=a}catch(e){r.error(e)}return r};function jt(e,t){G.a.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}p.a.inherits(jt,G.a),jt.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},jt.prototype.pause=function(){return!!G.a.prototype.pause.call(this)&&(this._stream.pause(),!0)},jt.prototype.resume=function(){return!!G.a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)};var _t=jt,qt=function(e,t,n){var r,a=p.a.getTypeOf(t),s=p.a.extend(n||{},Z);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=en(e)),s.createFolders&&(r=$t(e))&&tn.call(this,r,!0);var i="string"===a&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!i),(t instanceof H&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",a="string");var o;o=t instanceof H||t instanceof G.a?t:x.a.isNode&&x.a.isStream(t)?new _t(e,t):p.a.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var l=new Y(e,o,s);this.files[e]=l},$t=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},en=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},tn=function(e,t){return t=void 0!==t?t:Z.createFolders,e=en(e),this.files[e]||qt.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function nn(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var rn={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r))},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1===arguments.length){if(nn(e)){var r=e;return this.filter((function(e,t){return!t.dir&&r.test(e)}))}var a=this.files[this.root+e];return a&&!a.dir?a:null}return e=this.root+e,qt.call(this,e,t,n),this},folder:function(e){if(!e)return this;if(nn(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=tn.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=p.a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:L.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");p.a.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=Kt(this,n,r)}catch(e){(t=new G.a("error")).error(e)}return new V.a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};function an(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}an.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return p.a.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}};var sn=an;function on(e){sn.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}p.a.inherits(on,sn),on.prototype.byteAt=function(e){return this.data[this.zero+e]},on.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===t&&this.data[s+1]===n&&this.data[s+2]===r&&this.data[s+3]===a)return s-this.zero;return-1},on.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&n===s[1]&&r===s[2]&&a===s[3]},on.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var ln=on;function Bn(e){sn.call(this,e)}p.a.inherits(Bn,sn),Bn.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},Bn.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},Bn.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},Bn.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var Qn=Bn;function cn(e){ln.call(this,e)}p.a.inherits(cn,ln),cn.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var Fn=cn;function Un(e){Fn.call(this,e)}p.a.inherits(Un,Fn),Un.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};var gn=Un,dn=function(e){var t=p.a.getTypeOf(e);return p.a.checkSupport(t),"string"!==t||S.a.uint8array?"nodebuffer"===t?new gn(e):S.a.uint8array?new Fn(p.a.transformTo("uint8array",e)):new ln(p.a.transformTo("array",e)):new Qn(e)};function un(e,t){this.options=e,this.loadOptions=t}un.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in Jt)if(Jt.hasOwnProperty(t)&&Jt[t].magic===e)return Jt[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+p.a.pretty(this.compressionMethod)+" unknown (inner file : "+p.a.transformTo("string",this.fileName)+")");this.decompressed=new H(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=dn(this.extraFields[1].value);this.uncompressedSize===p.a.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===p.a.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===p.a.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===p.a.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,a=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<a;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r}},handleUTF8:function(){var e=S.a.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=L.utf8decode(this.fileName),this.fileCommentStr=L.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=p.a.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var a=p.a.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=dn(e.value);return 1!==t.readInt(1)||v(this.fileName)!==t.readInt(4)?null:L.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=dn(e.value);return 1!==t.readInt(1)||v(this.fileComment)!==t.readInt(4)?null:L.utf8decode(t.readData(e.length-5))}return null}};var In=un;function mn(e){this.files=[],this.loadOptions=e}mn.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+p.a.pretty(t)+", expected "+p.a.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=S.a.uint8array?"uint8array":"array",n=p.a.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(Wt),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(Xt);)(e=new In({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(Ht);if(e<0)throw this.isSignature(0,Wt)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(Ht),this.readBlockEndOfCentral(),this.diskNumber===p.a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===p.a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===p.a.MAX_VALUE_16BITS||this.centralDirRecords===p.a.MAX_VALUE_16BITS||this.centralDirSize===p.a.MAX_VALUE_32BITS||this.centralDirOffset===p.a.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(Tt))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(Tt),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,kt)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(kt),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(kt),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(r>0)this.isSignature(t,Xt)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=dn(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};var Cn=mn;function bn(e){return new h.a.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new W);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}function yn(){if(!(this instanceof yn))return new yn;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new yn;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}yn.prototype=rn,yn.prototype.loadAsync=function(e,t){var n=this;return t=p.a.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:L.utf8decode}),x.a.isNode&&x.a.isStream(e)?h.a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):p.a.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new Cn(t);return n.load(e),n})).then((function(e){var n=[h.a.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var a=0;a<r.length;a++)n.push(bn(r[a]));return h.a.Promise.all(n)})).then((function(e){for(var r=e.shift(),a=r.files,s=0;s<a.length;s++){var i=a[s];n.file(i.fileNameStr,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:t.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))},yn.support=S.a,yn.defaults=Z,yn.version="3.2.0",yn.loadAsync=function(e,t){return(new yn).loadAsync(e,t)},yn.external=h.a;var Sn=yn,hn=r.c.vtkErrorMacro,Zn=r.c.vtkDebugMacro;function xn(e){var t=e.split(".").pop().toLowerCase();return"jpg"===t?"jpeg":t}var pn={uint8array:function(e,t,n){return function(r){e.buffer=new ArrayBuffer(r.length),new Uint8Array(e.buffer).set(r),t&&("string"===e.dataType||"JSON"===e.dataType?e.buffer=l.a.inflate(new Uint8Array(e.buffer),{to:"string"}):e.buffer=l.a.inflate(new Uint8Array(e.buffer)).buffer),"JSON"===e.ref.encode?e.values=JSON.parse(e.buffer):(o.ENDIANNESS!==e.ref.encode&&o.ENDIANNESS&&(Zn("Swap bytes of ".concat(e.name)),o.swapBytes(e.buffer,s.a[e.dataType])),e.values=new window[e.dataType](e.buffer)),e.values.length!==e.size&&hn("Error in FetchArray: ".concat(e.name," does not have the proper array size. Got ").concat(e.values.length,", instead of ").concat(e.size)),n()}},string:function(e,t,n){return function(r){e.values=t?JSON.parse(l.a.inflate(r,{to:"string"})):JSON.parse(r),n()}}};function Gn(e){return function(e){return"/"===e[0]?e.substr(1):e}(function(e){return new URL(e,"http://any").pathname}(e))}var Rn={create:function(e){var t=!1,n=0,r=new Sn,a=r;return r.loadAsync(e.zipContent).then((function(){t=!0;var n=[];r.forEach((function(e,t){-1!==e.indexOf("index.json")&&n.push(e)})),n.sort((function(e,t){return e.length-t.length}));for(var s=n[0].split("/");s.length>1;){var i=s.shift();a=a.folder(i)}e.callback&&e.callback(r)})),{fetchArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,l){t||hn("ERROR!!! zip not ready...");var B=Gn([r,s.ref.basepath,i.compression?"".concat(s.ref.id,".gz"):s.ref.id].join("/"));1==++n&&e.invokeBusy&&e.invokeBusy(!0);var Q="string"!==s.dataType||i.compression?"uint8array":"string",c=pn[Q](s,i.compression,(function(){delete s.ref,0==--n&&e.invokeBusy&&e.invokeBusy(!1),e.modified&&e.modified(),o(s)}));a.file(B).async(Q).then(c)}))},fetchJSON:function(){var e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Gn(e);return t||hn("ERROR!!! zip not ready..."),n.compression?"gz"===n.compression?a.file(r).async("uint8array").then((function(e){var t=l.a.inflate(e,{to:"string"});return Promise.resolve(JSON.parse(t))})):Promise.reject(new Error("Invalid compression")):a.file(r).async("string").then((function(e){return Promise.resolve(JSON.parse(e))}))},fetchText:function(){var e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Gn(e);return t||hn("ERROR!!! zip not ready..."),n.compression?"gz"===n.compression?a.file(r).async("uint8array").then((function(e){var t=l.a.inflate(e,{to:"string"});return Promise.resolve(t)})):Promise.reject(new Error("Invalid compression")):a.file(r).async("string").then((function(e){return Promise.resolve(e)}))},fetchImage:function(){var e=arguments.length>1?arguments[1]:void 0,n=Gn(e);return t||hn("ERROR!!! zip not ready..."),new Promise((function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,a.file(n).async("base64").then((function(e){r.src="data:image/".concat(xn(n),";base64,").concat(e)}))}))},fetchBinary:function(){var e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Gn(e);return t||hn("ERROR!!! zip not ready..."),n.compression?"gz"===n.compression?a.file(r).then((function(e){var t=l.a.inflate(e).buffer;return Promise.resolve(t)})):Promise.reject(new Error("Invalid compression")):a.file(r).async("arraybuffer").then((function(e){return Promise.resolve(e)}))}}}},Ln={http:function(e){return y},zip:function(e){return Rn.create(e)},html:function(e){return d}},Vn={get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ln[e](t)}};t.a=Vn},function(e,t,n){"use strict";n(5);var r=n(0),a=n(17),s=n(10),i=r.c.vtkErrorMacro,o=[1,-1,1,-1,1,-1];function l(e,t){t.classHierarchy.push("vtkPoints"),e.getNumberOfPoints=e.getNumberOfTuples,e.setNumberOfPoints=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e.getNumberOfPoints()!==n&&(t.size=n*r,t.values=new window[t.dataType](t.size),e.setNumberOfComponents(r),e.modified())},e.setPoint=function(e){for(var n=e*t.numberOfComponents,r=0;r<t.numberOfComponents;r++)t.values[n+r]=r+1<1||arguments.length<=r+1?void 0:arguments[r+1]},e.getPoint=e.getTuple,e.getBounds=function(){if(3===e.getNumberOfComponents()){var n=e.getRange(0);t.bounds[0]=n[0],t.bounds[1]=n[1];var r=e.getRange(1);t.bounds[2]=r[0],t.bounds[3]=r[1];var a=e.getRange(2);return t.bounds[4]=a[0],t.bounds[5]=a[1],t.bounds}if(2!==e.getNumberOfComponents())return i("getBounds called on an array with components of\n        ".concat(e.getNumberOfComponents())),o;var s=e.getRange(0);t.bounds[0]=s[0],t.bounds[1]=s[1];var l=e.getRange(1);return t.bounds[2]=l[0],t.bounds[3]=l[1],t.bounds[4]=0,t.bounds[5]=0,t.bounds},e.computeBounds=e.getBounds,e.setNumberOfComponents(t.numberOfComponents<2?3:t.numberOfComponents)}var B={empty:!0,numberOfComponents:3,dataType:a.b.FLOAT,bounds:[1,-1,1,-1,1,-1]};function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,B,n),s.a.extend(e,t,n),l(e,t)}var c={newInstance:r.c.newInstance(Q,"vtkPoints"),extend:Q};t.a=c},function(e,t,n){"use strict";for(var r=n(11),a=[],s=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,B=o.length;l<B;++l)a[l]=o[l],s[o.charCodeAt(l)]=l;function Q(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var r,s,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(a[(s=r)>>18&63]+a[s>>12&63]+a[s>>6&63]+a[63&s]);return i.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63;var F=function(e){var t,n,r=Q(e),a=r[0],o=r[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,o)),B=0,c=o>0?a-4:a;for(n=0;n<c;n+=4)t=s[e.charCodeAt(n)]<<18|s[e.charCodeAt(n+1)]<<12|s[e.charCodeAt(n+2)]<<6|s[e.charCodeAt(n+3)],l[B++]=t>>16&255,l[B++]=t>>8&255,l[B++]=255&t;return 2===o&&(t=s[e.charCodeAt(n)]<<2|s[e.charCodeAt(n+1)]>>4,l[B++]=255&t),1===o&&(t=s[e.charCodeAt(n)]<<10|s[e.charCodeAt(n+1)]<<4|s[e.charCodeAt(n+2)]>>2,l[B++]=t>>8&255,l[B++]=255&t),l},U=function(e){for(var t,n=e.length,r=n%3,s=[],i=16383,o=0,l=n-r;o<l;o+=i)s.push(c(e,o,o+i>l?l:o+i));return 1===r?(t=e[n-1],s.push(a[t>>2]+a[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],s.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"=")),s.join("")},g=function(e,t,n,r,a){var s,i,o=8*a-r-1,l=(1<<o)-1,B=l>>1,Q=-7,c=n?a-1:0,F=n?-1:1,U=e[t+c];for(c+=F,s=U&(1<<-Q)-1,U>>=-Q,Q+=o;Q>0;s=256*s+e[t+c],c+=F,Q-=8);for(i=s&(1<<-Q)-1,s>>=-Q,Q+=r;Q>0;i=256*i+e[t+c],c+=F,Q-=8);if(0===s)s=1-B;else{if(s===l)return i?NaN:1/0*(U?-1:1);i+=Math.pow(2,r),s-=B}return(U?-1:1)*i*Math.pow(2,s-r)},d=function(e,t,n,r,a,s){var i,o,l,B=8*s-a-1,Q=(1<<B)-1,c=Q>>1,F=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,U=r?0:s-1,g=r?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=Q):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+c>=1?F/l:F*Math.pow(2,1-c))*l>=2&&(i++,l/=2),i+c>=Q?(o=0,i=Q):i+c>=1?(o=(t*l-1)*Math.pow(2,a),i+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,a),i=0));a>=8;e[n+U]=255&o,U+=g,o/=256,a-=8);for(i=i<<a|o,B+=a;B>0;e[n+U]=255&i,U+=g,i/=256,B-=8);e[n+U-g]|=128*d};n.d(t,"a",(function(){return u}));var u=Object(r.d)((function(e,t){const n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},t.INSPECT_MAX_BYTES=50;const r=2147483647;function a(e){if(e>r)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return i(e,t,n)}function i(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|u(e,t);let r=a(n);const i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(j(e,Uint8Array)){const t=new Uint8Array(e);return Q(t.buffer,t.byteOffset,t.byteLength)}return B(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer))return Q(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return Q(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return s.from(r,t,n);const i=function(e){if(s.isBuffer(e)){const t=0|c(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||_(e.length)?a(0):B(e):"Buffer"===e.type&&Array.isArray(e.data)?B(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return o(e),a(e<0?0:0|c(e))}function B(e){const t=e.length<0?0:0|c(e.length),n=a(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function Q(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,s.prototype),r}function c(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function u(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(e).length;default:if(a)return r?-1:z(e).length;t=(""+t).toLowerCase(),a=!0}}function I(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return G(this,t,n);case"ascii":return L(this,t,n);case"latin1":case"binary":return V(this,t,n);case"base64":return p(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function C(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),_(n=+n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,a){let s,i=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,o/=2,l/=2,n/=2}function B(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a){let r=-1;for(s=n;s<o;s++)if(B(e,s)===B(t,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===l)return r*i}else-1!==r&&(s-=s-r),r=-1}else for(n+l>o&&(n=o-l),s=n;s>=0;s--){let n=!0;for(let r=0;r<l;r++)if(B(e,s+r)!==B(t,r)){n=!1;break}if(n)return s}return-1}function y(e,t,n,r){n=Number(n)||0;const a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;const s=t.length;let i;for(r>s/2&&(r=s/2),i=0;i<r;++i){const r=parseInt(t.substr(2*i,2),16);if(_(r))return i;e[n+i]=r}return i}function S(e,t,n,r){return K(z(t,e.length-n),e,n,r)}function h(e,t,n,r){return K(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Z(e,t,n,r){return K(P(t),e,n,r)}function x(e,t,n,r){return K(function(e,t){let n,r,a;const s=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,a=n%256,s.push(a),s.push(r);return s}(t,e.length-n),e,n,r)}function p(e,t,n){return 0===t&&n===e.length?U(e):U(e.slice(t,n))}function G(e,t,n){n=Math.min(e.length,n);const r=[];let a=t;for(;a<n;){const t=e[a];let s=null,i=t>239?4:t>223?3:t>191?2:1;if(a+i<=n){let n,r,o,l;switch(i){case 1:t<128&&(s=t);break;case 2:n=e[a+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(s=l));break;case 3:n=e[a+1],r=e[a+2],128==(192&n)&&128==(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:n=e[a+1],r=e[a+2],o=e[a+3],128==(192&n)&&128==(192&r)&&128==(192&o)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&o,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,i=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),a+=i}return function(e){const t=e.length;if(t<=R)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=R));return n}(r)}t.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,n){return i(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return function(e,t,n){return o(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},s.allocUnsafe=function(e){return l(e)},s.allocUnsafeSlow=function(e){return l(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(j(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let a=0,s=Math.min(n,r);a<s;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=s.allocUnsafe(t);let a=0;for(n=0;n<e.length;++n){let t=e[n];if(j(t,Uint8Array))a+t.length>r.length?(s.isBuffer(t)||(t=s.from(t)),t.copy(r,a)):Uint8Array.prototype.set.call(r,t,a);else{if(!s.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,a)}a+=t.length}return r},s.byteLength=u,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},s.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},s.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},s.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?G(this,0,e):I.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,a){if(j(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;let i=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0);const l=Math.min(i,o),B=this.slice(r,a),Q=e.slice(t,n);for(let e=0;e<l;++e)if(B[e]!==Q[e]){i=B[e],o=Q[e];break}return i<o?-1:o<i?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return C(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return C(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":case"latin1":case"binary":return h(this,e,t,n);case"base64":return Z(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function L(e,t,n){let r="";n=Math.min(e.length,n);for(let a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function V(e,t,n){let r="";n=Math.min(e.length,n);for(let a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function A(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let a="";for(let r=t;r<n;++r)a+=q[e[r]];return a}function f(e,t,n){const r=e.slice(t,n);let a="";for(let e=0;e<r.length-1;e+=2)a+=String.fromCharCode(r[e]+256*r[e+1]);return a}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,n,r,a,i){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r,a){M(t,r,a,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function v(e,t,n,r,a){M(t,r,a,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s>>=8,e[n+6]=s,s>>=8,e[n+5]=s,s>>=8,e[n+4]=s;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function J(e,t,n,r,a,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(e,t,n,r,a){return t=+t,n>>>=0,a||J(e,0,n,4),d(e,t,n,r,23,4),n+4}function X(e,t,n,r,a){return t=+t,n>>>=0,a||J(e,0,n,8),d(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e],a=1,s=0;for(;++s<t&&(a*=256);)r+=this[e+s]*a;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e+--t],a=1;for(;t>0&&(a*=256);)r+=this[e+--t]*a;return r},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=$((function(e){w(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,a=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(a)<<BigInt(32))})),s.prototype.readBigUInt64BE=$((function(e){w(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],a=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(a)})),s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e],a=1,s=0;for(;++s<t&&(a*=256);)r+=this[e+s]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=t,a=1,s=this[e+--r];for(;r>0&&(a*=256);)s+=this[e+--r]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*t)),s},s.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=$((function(e){w(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),s.prototype.readBigInt64BE=$((function(e){w(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),g(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),g(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),g(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),g(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);let a=1,s=0;for(this[t]=255&e;++s<n&&(a*=256);)this[t+s]=e/a&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);let a=n-1,s=1;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigUInt64LE=$((function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=$((function(e,t=0){return v(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);E(this,e,t,n,r-1,-r)}let a=0,s=1,i=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===i&&0!==this[t+a-1]&&(i=1),this[t+a]=(e/s>>0)-i&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);E(this,e,t,n,r-1,-r)}let a=n-1,s=1,i=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===i&&0!==this[t+a+1]&&(i=1),this[t+a]=(e/s>>0)-i&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigInt64LE=$((function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=$((function(e,t=0){return v(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(e,t,n){return W(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return W(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return X(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return X(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const a=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),a},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{const i=s.isBuffer(e)?e:s.from(e,r),o=i.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=i[a%o]}return this};const H={};function T(e,t,n){H[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function k(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function M(e,t,n,r,a,s){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let a;throw a=s>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new H.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){w(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Y(t,e.length-(n+1))}(r,a,s)}function w(e,t){if("number"!=typeof e)throw new H.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,n){if(Math.floor(e)!==e)throw w(e,n),new H.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new H.ERR_BUFFER_OUT_OF_BOUNDS;throw new H.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}T("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?e+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"}),RangeError),T("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),T("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,a=n;return Number.isInteger(n)&&Math.abs(n)>2**32?a=k(String(n)):"bigint"==typeof n&&(a=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(a=k(a)),a+="n"),r+=` It must be ${t}. Received ${a}`,r}),RangeError);const O=/[^+/0-9A-Za-z-_]/g;function z(e,t){let n;t=t||1/0;const r=e.length;let a=null;const s=[];for(let i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&s.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&s.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function P(e){return F(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,n,r){let a;for(a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function _(e){return e!=e}const q=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let a=0;a<16;++a)t[r+a]=e[n]+e[a]}return t}();function $(e){return"undefined"==typeof BigInt?ee:e}function ee(){throw new Error("BigInt not supported")}}),"/$$rollup_base$$/node_modules/buffer")},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(11),a=Object(r.d)((function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),"/$$rollup_base$$/node_modules/inherits")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));n(5);var r={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},a={DEFAULT:0,SINGLE:1,DOUBLE:2},s={AttributeCopyOperations:{COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},AttributeLimitTypes:{MAX:0,EXACT:1,NOLIMIT:2},AttributeTypes:r,CellGhostTypes:{DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},DesiredOutputPrecision:a,PointGhostTypes:{DUPLICATEPOINT:1,HIDDENPOINT:2},ghostArrayName:"vtkGhostType"};t.c=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=n(46).a.EventEmitter},function(e,t,n){"use strict";var r=n(9),a=(n(5),n(22)),s=n(0),i=n(10);function o(e,t){t.classHierarchy.push("vtkFieldData");var n=e.getState;t.arrays&&(t.arrays=t.arrays.map((function(e){return{data:Object(a.a)(e.data)}}))),e.initialize=function(){e.initializeFields(),e.copyAllOn(),e.clearFieldFlags()},e.initializeFields=function(){t.arrays=[],t.copyFieldFlags={},e.modified()},e.copyStructure=function(n){e.initializeFields(),t.copyFieldFlags=n.getCopyFieldFlags().map((function(e){return e})),t.arrays=n.arrays().map((function(e){return{array:e}}))},e.getNumberOfArrays=function(){return t.arrays.length},e.getNumberOfActiveArrays=function(){return t.arrays.length},e.addArray=function(e){return t.arrays=[].concat(t.arrays,{data:e}),t.arrays.length-1},e.removeAllArrays=function(){t.arrays=[]},e.removeArray=function(e){t.arrays=t.arrays.filter((function(t){return e!==t.data.getName()}))},e.removeArrayByIndex=function(e){t.arrays=t.arrays.filter((function(t,n){return n!==e}))},e.getArrays=function(){return t.arrays.map((function(e){return e.data}))},e.getArray=function(t){return"number"==typeof t?e.getArrayByIndex(t):e.getArrayByName(t)},e.getArrayByName=function(e){return t.arrays.reduce((function(t,n,r){return n.data.getName()===e?n.data:t}),null)},e.getArrayWithIndex=function(e){return t.arrays.reduce((function(t,n,r){return n.data&&n.data.getName()===e?{array:n.data,index:r}:t}),{array:null,index:-1})},e.getArrayByIndex=function(e){return e>=0&&e<t.arrays.length?t.arrays[e].data:null},e.hasArray=function(t){return e.getArrayWithIndex(t).index>=0},e.getArrayName=function(e){var n=t.arrays[e];return n?n.data.getName():""},e.getCopyFieldFlags=function(){return t.copyFieldFlags},e.getFlag=function(e){return t.copyFieldFlags[e]},e.passData=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;n.getArrays().forEach((function(n){var s=e.getFlag(n.getName());if(!1!==s&&(!t.doCopyAllOff||!0===s)&&n){var o=e.getArrayByName(n.getName());if(o){if(n.getNumberOfComponents()===o.getNumberOfComponents())if(r>-1&&r<n.getNumberOfTuples()){var l=a>-1?a:r;o.setTuple(l,n.getTuple(r))}else for(var B=0;B<n.getNumberOfTuples();++B)o.setTuple(B,n.getTuple(B))}else if(r<0||r>n.getNumberOfTuples())e.addArray(n);else{var Q=n.getNumberOfComponents(),c=n.getNumberOfValues(),F=a>-1?a:r;c<F*Q&&(c=(F+1)*Q),(o=i.a.newInstance({name:n.getName(),dataType:n.getDataType(),numberOfComponents:n.getNumberOfComponents(),size:c})).setTuple(F,n.getTuple(r)),e.addArray(o)}}}))},e.copyFieldOn=function(e){t.copyFieldFlags[e]=!0},e.copyFieldOff=function(e){t.copyFieldFlags[e]=!1},e.copyAllOn=function(){t.doCopyAllOn&&!t.doCopyAllOff||(t.doCopyAllOn=!0,t.doCopyAllOff=!1,e.modified())},e.copyAllOff=function(){!t.doCopyAllOn&&t.doCopyAllOff||(t.doCopyAllOn=!1,t.doCopyAllOff=!0,e.modified())},e.clearFieldFlags=function(){t.copyFieldFlags={}},e.deepCopy=function(e){t.arrays=e.getArrays().map((function(e){var t=e.newClone();return t.deepCopy(e),{data:t}}))},e.copyFlags=function(e){return e.getCopyFieldFlags().map((function(e){return e}))},e.reset=function(){return t.arrays.forEach((function(e){return e.data.reset()}))},e.getMTime=function(){return t.arrays.reduce((function(e,t){return t.data.getMTime()>e?t.data.getMTime():e}),t.mtime)},e.getNumberOfComponents=function(){return t.arrays.reduce((function(e,t){return e+t.data.getNumberOfComponents()}),0)},e.getNumberOfTuples=function(){return t.arrays.length>0?t.arrays[0].getNumberOfTuples():0},e.getState=function(){var e=n();return e.arrays=t.arrays.map((function(e){return{data:e.data.getState()}})),e}}var l={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,l,n),s.c.obj(e,t),o(e,t)}var Q={newInstance:s.c.newInstance(B,"vtkFieldData"),extend:B},c=n(32);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var U=c.c.AttributeTypes,g=c.c.AttributeCopyOperations,d=s.c.vtkWarningMacro;function u(e,t){var n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(e){var t=n.find((function(t){return U[t.toUpperCase()]===e||"number"!=typeof e&&t.toLowerCase()===e.toLowerCase()}));return void 0===t&&(t=null),t}t.classHierarchy.push("vtkDataSetAttributes"),e.checkNumberOfComponents=function(e){return!0},e.setAttribute=function(n,a){var s=r(a);if(n&&"PEDIGREEIDS"===s.toUpperCase()&&!n.isA("vtkDataArray"))return d("Cannot set attribute ".concat(s,". The attribute must be a vtkDataArray.")),-1;if(n&&!e.checkNumberOfComponents(n,s))return d("Cannot set attribute ".concat(s,". Incorrect number of components.")),-1;var i=t["active".concat(s)];if(i>=0&&i<t.arrays.length){if(t.arrays[i]===n)return i;e.removeArrayByIndex(i)}return n?(i=e.addArray(n),t["active".concat(s)]=i):t["active".concat(s)]=-1,e.modified(),t["active".concat(s)]},e.setActiveAttributeByName=function(t,n){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n)},e.setActiveAttributeByIndex=function(n,a){var s=r(a);if(n>=0&&n<t.arrays.length){if("PEDIGREEIDS"!==s.toUpperCase()){var i=e.getArrayByIndex(n);if(!i.isA("vtkDataArray"))return d("Cannot set attribute ".concat(s,". Only vtkDataArray subclasses can be set as active attributes.")),-1;if(!e.checkNumberOfComponents(i,s))return d("Cannot set attribute ".concat(s,". Incorrect number of components.")),-1}return t["active".concat(s)]=n,e.modified(),n}return-1===n&&(t["active".concat(s)]=n,e.modified()),-1},e.getActiveAttribute=function(t){var n=r(t);return e["get".concat(n)]()},e.removeAllArrays=function(){t.arrays=[],n.forEach((function(e){t["active".concat(e)]=-1}))},e.removeArray=function(e){t.arrays=t.arrays.filter((function(r,a){return e!==r.data.getName()||(n.forEach((function(e){a===t["active".concat(e)]&&(t["active".concat(e)]=-1)})),!1)}))},e.removeArrayByIndex=function(e){t.arrays=t.arrays.filter((function(t,n){return n!==e})),n.forEach((function(n){e===t["active".concat(n)]&&(t["active".concat(n)]=-1)}))},n.forEach((function(n){var r="active".concat(n);e["get".concat(n)]=function(){return e.getArrayByIndex(t[r])},e["set".concat(n)]=function(t){return e.setAttribute(t,n)},e["setActive".concat(n)]=function(t){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n)},e["copy".concat(n,"Off")]=function(){var e=n.toUpperCase();t.copyAttributeFlags[g.PASSDATA][U[e]]=!1}})),e.initializeAttributeCopyFlags=function(){t.copyAttributeFlags=[],Object.keys(g).filter((function(e){return"ALLCOPY"!==e})).forEach((function(e){t.copyAttributeFlags[g[e]]=Object.keys(U).filter((function(e){return"NUM_ATTRIBUTES"!==e})).reduce((function(e,t){return e[U[t]]=!0,e}),[])})),t.copyAttributeFlags[g.COPYTUPLE][U.GLOBALIDS]=!1,t.copyAttributeFlags[g.INTERPOLATE][U.GLOBALIDS]=!1,t.copyAttributeFlags[g.COPYTUPLE][U.PEDIGREEIDS]=!1},e.initialize=s.c.chain(e.initialize,e.initializeAttributeCopyFlags),t.dataArrays&&Object.keys(t.dataArrays).length&&Object.keys(t.dataArrays).forEach((function(n){t.dataArrays[n].ref||"vtkDataArray"!==t.dataArrays[n].type||e.addArray(i.a.newInstance(t.dataArrays[n]))}));var a=e.shallowCopy;e.shallowCopy=function(e,n){a(e,n),t.arrays=e.getArrays().map((function(e){var t=e.newClone();return t.shallowCopy(e,n),{data:t}}))},e.initializeAttributeCopyFlags()}var I={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,I,n),Q.extend(e,t,n),s.c.setGet(e,t,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),t.arrays||(t.arrays={}),u(e,t)}var C=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:s.c.newInstance(m,"vtkDataSetAttributes"),extend:m},c.c),b=n(21);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var S=["pointData","cellData","fieldData"];function h(e,t){t.classHierarchy.push("vtkDataSet"),S.forEach((function(e){t[e]?t[e]=Object(a.a)(t[e]):t[e]=C.newInstance()}));var n=e.shallowCopy;e.shallowCopy=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,r),S.forEach((function(n){t[n]=C.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))}))}}var Z={};function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Z,n),s.c.obj(e,t),s.c.setGet(e,t,S),h(e,t)}var p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:s.c.newInstance(x,"vtkDataSet"),extend:x},b.c);t.a=p},function(e,t,n){"use strict";var r=n(44),a=Object(r.a)((function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t}));t.a=a},function(e,t,n){"use strict";var r=n(9),a=(n(5),n(0)),s=n(2);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){var r=n[0]*(e[0]-t[0])+n[1]*(e[1]-t[1])+n[2]*(e[2]-t[2]);return Math.abs(r)}function l(e,t,n,r){var a=[];Object(s.t)(e,t,a);var i=Object(s.q)(n,a);r[0]=e[0]-i*n[0],r[1]=e[1]-i*n[1],r[2]=e[2]-i*n[2]}function B(e,t,n){var r=Object(s.q)(e,t),a=Object(s.q)(t,t);return 0===a&&(a=1),n[0]=e[0]-r*t[0]/a,n[1]=e[1]-r*t[1]/a,n[2]=e[2]-r*t[2]/a,n}function Q(e,t,n,r){var a=[];Object(s.t)(e,t,a);var i=Object(s.q)(n,a),o=Object(s.q)(n,n);0!==o?(r[0]=e[0]-i*n[0]/o,r[1]=e[1]-i*n[1]/o,r[2]=e[2]-i*n[2]/o):(r[0]=e[0],r[1]=e[1],r[2]=e[2])}function c(e,t,n,r){var a={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},i=[],o=[];Object(s.t)(t,e,i),Object(s.t)(n,e,o);var l=Object(s.q)(r,o),B=Object(s.q)(r,i);return(B<0?-B:B)<=(l<0?1e-6*-l:1e-6*l)||(a.t=l/B,a.x[0]=e[0]+a.t*i[0],a.x[1]=e[1]+a.t*i[1],a.x[2]=e[2]+a.t*i[2],a.intersection=!0,a.betweenPoints=a.t>=0&&a.t<=1),a}function F(e,t,n,r){var a={intersection:!1,l0:[],l1:[],error:null},i=[];Object(s.w)(t,r,i);var o,l=i.map((function(e){return Math.abs(e)}));if(l[0]+l[1]+l[2]<1e-6){var B=[];return Object(s.t)(e,n,B),0===Object(s.q)(t,B)?a.error="coincide":a.error="disjoint",a}o=l[0]>l[1]&&l[0]>l[2]?"x":l[1]>l[2]?"y":"z";var Q=[],c=-Object(s.q)(t,e),F=-Object(s.q)(r,n);switch(o){case"x":Q[0]=0,Q[1]=(F*t[2]-c*r[2])/i[0],Q[2]=(c*r[1]-F*t[1])/i[0];break;case"y":Q[0]=(c*r[2]-F*t[2])/i[1],Q[1]=0,Q[2]=(F*t[0]-c*r[0])/i[1];break;case"z":Q[0]=(F*t[1]-c*r[1])/i[2],Q[1]=(c*r[0]-F*t[0])/i[2],Q[2]=0}return a.l0=Q,Object(s.x)(Q,i,a.l1),a.intersection=!0,a}var U={evaluate:function(e,t,n){return e[0]*(n[0]-t[0])+e[1]*(n[1]-t[1])+e[2]*(n[2]-t[2])},distanceToPlane:o,projectPoint:l,projectVector:B,generalizedProjectPoint:Q,intersectWithLine:c,intersectWithPlane:F,DISJOINT:"disjoint",COINCIDE:"coincide"};function g(e,t){t.classHierarchy.push("vtkPlane"),e.distanceToPlane=function(e){return o(e,t.origin,t.normal)},e.projectPoint=function(e,n){l(e,t.origin,t.normal,n)},e.projectVector=function(e,n){return B(e,t.normal,n)},e.push=function(e){if(0!==e)for(var n=0;n<3;n++)t.origin[n]+=e*t.normal[n]},e.generalizedProjectPoint=function(e,n){Q(e,t.origin,t.normal,n)},e.evaluateFunction=function(e,n,r){return Array.isArray(e)?t.normal[0]*(e[0]-t.origin[0])+t.normal[1]*(e[1]-t.origin[1])+t.normal[2]*(e[2]-t.origin[2]):t.normal[0]*(e-t.origin[0])+t.normal[1]*(n-t.origin[1])+t.normal[2]*(r-t.origin[2])},e.evaluateGradient=function(e){return[t.normal[0],t.normal[1],t.normal[2]]},e.intersectWithLine=function(e,n){return c(e,n,t.origin,t.normal)},e.intersectWithPlane=function(e,n){return F(e,n,t.origin,t.normal)}}var d={normal:[0,0,1],origin:[0,0,0]};function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d,n),a.c.obj(e,t),a.c.setGetArray(e,t,["normal","origin"],3),g(e,t)}var I=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({newInstance:a.c.newInstance(u,"vtkPlane"),extend:u},U);t.a=I},function(e,t,n){"use strict";n(5);function r(e){if("TextDecoder"in window)return new TextDecoder("latin1").decode(e);for(var t=new Uint8Array(e),n=[],r=0;r<t.length;++r)n[r]=String.fromCharCode(t[r]);return n.join("")}var a={arrayBufferToString:r,extractBinary:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=r(e),s=t.exec(a);if(!s)return{text:a};var i=s.index+s[0].length,o=a.substring(0,i),l=null,B=n?n.exec(a):null;if(B){var Q=a.substr(B.index);l={text:o+Q,binaryBuffer:e.slice(i,B.index)}}else l={text:o,binaryBuffer:e.slice(i)};return l}};t.a=a},function(e,t,n){"use strict";(function(e){function r(e,t){s(e,t),a(e)}function a(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}n.d(t,"a",(function(){return i}));var i={destroy:function(t,n){var i=this,o=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return o||l?(n?n(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(s,this,t)):e.nextTick(s,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!n&&t?i._writableState?i._writableState.errorEmitted?e.nextTick(a,i):(i._writableState.errorEmitted=!0,e.nextTick(r,i,t)):e.nextTick(r,i,t):n?(e.nextTick(a,i),n(t)):e.nextTick(a,i)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,n(42))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(9),a=(n(5),n(0)),s=n(17),i=n(10);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){var t=0;return e.filter((function(e,n){return n===t&&(t+=e+1,!0)}))}var Q={extractCellSizes:B,getNumberOfCells:function(e){return B(e).length}};function c(e,t){t.classHierarchy.push("vtkCellArray"),e.getNumberOfCells=function(e){return void 0===t.numberOfCells||e?(t.cellSizes=B(t.values),t.numberOfCells=t.cellSizes.length,t.numberOfCells):t.numberOfCells},e.getCellSizes=function(e){return void 0===t.cellSizes||e?(t.cellSizes=B(t.values),t.cellSizes):t.cellSizes};var n=e.setData;e.setData=function(e){n(e,1),t.numberOfCells=void 0,t.cellSizes=void 0},e.getCell=function(e){var n=e,r=t.values[n++];return t.values.subarray(n,n+r)}}function F(e){return l({empty:!0,numberOfComponents:1,dataType:s.b.UNSIGNED_INT},e)}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.a.extend(e,t,F(n)),c(e,t)}var g=l({newInstance:a.c.newInstance(U,"vtkCellArray"),extend:U},Q);t.a=g},function(e,t,n){"use strict";n(5);var r=[];r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<a.length;s++)r[a.charCodeAt(s)]=s;function i(e){return void 0!==r[e.charCodeAt(0)]}function o(e,t,n,a){for(var s=t.start,o=t.count,l=o%4,B=Math.floor(o/4),Q=s,c=null,F=n,U=0;U<B;U++){for(;!i(e[Q]);)Q++;for(c=r[e.charCodeAt(Q++)]<<18;!i(e[Q]);)Q++;for(c|=r[e.charCodeAt(Q++)]<<12;!i(e[Q]);)Q++;for(c|=r[e.charCodeAt(Q++)]<<6;!i(e[Q]);)Q++;c|=r[e.charCodeAt(Q++)],a[F++]=c>>16&255,a[F++]=c>>8&255,a[F++]=255&c}switch(l){case 3:for(;!i(e[Q]);)Q++;for(c=r[e.charCodeAt(Q++)]<<10;!i(e[Q]);)Q++;for(c|=r[e.charCodeAt(Q++)]<<4;!i(e[Q]);)Q++;c|=r[e.charCodeAt(Q++)]>>2,a[F++]=c>>8&255,a[F++]=255&c;break;case 2:for(;!i(e[Q]);)Q++;for(c=r[e.charCodeAt(Q++)]<<2;!i(e[Q]);)Q++;c|=r[e.charCodeAt(Q++)]>>4,a[F++]=255&c;break;case 1:throw new Error("BASE64: remain 1 should not happen")}return F}var l={toArrayBuffer:function(e){for(var t=function(e){for(var t=e.length,n=[],r=null,a=0;a<t;a++)i(e[a])?(r||(r={start:a,count:0}),r.count++,r.end=a):"="===e[a]&&r&&(n.push(r),r=null);return r&&n.push(r),n}(e),n=t[t.length-1].end+1,r=(4-n%4)%4,a=new ArrayBuffer(3*(n+r)/4-r),s=new Uint8Array(a),l=0,B=0;B<t.length;B++)l+=o(e,t[B],l,s),l+=(4-t[B].count%4)%4;return a}};t.a=l},function(e,t){var n,r,a=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var l,B=[],Q=!1,c=-1;function F(){Q&&l&&(Q=!1,l.length?B=l.concat(B):c=-1,B.length&&U())}function U(){if(!Q){var e=o(F);Q=!0;for(var t=B.length;t;){for(l=B,B=[];++c<t;)l&&l[c].run();c=-1,t=B.length}l=null,Q=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function d(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];B.push(new g(e,t)),1!==B.length||Q||o(U)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=d,a.addListener=d,a.once=d,a.off=d,a.removeListener=d,a.removeAllListeners=d,a.emit=d,a.prependListener=d,a.prependOnceListener=d,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(27).a.codes.ERR_STREAM_PREMATURE_CLOSE;function a(){}var s=function e(t,n,s){if("function"==typeof n)return e(t,null,n);n||(n={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r)}}}(s||a);var i=n.readable||!1!==n.readable&&t.readable,o=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||Q()},B=t._writableState&&t._writableState.finished,Q=function(){o=!1,B=!0,i||s.call(t)},c=t._readableState&&t._readableState.endEmitted,F=function(){i=!1,c=!0,o||s.call(t)},U=function(e){s.call(t,e)},g=function(){var e;return i&&!c?(t._readableState&&t._readableState.ended||(e=new r),s.call(t,e)):o&&!B?(t._writableState&&t._writableState.ended||(e=new r),s.call(t,e)):void 0},d=function(){t.req.on("finish",Q)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",Q),t.on("abort",g),t.req?d():t.on("request",d)):o&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",F),t.on("finish",Q),!1!==n.error&&t.on("error",U),t.on("close",g),function(){t.removeListener("complete",Q),t.removeListener("abort",g),t.removeListener("request",d),t.req&&t.req.removeListener("finish",Q),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",Q),t.removeListener("end",F),t.removeListener("error",U),t.removeListener("close",g)}}},function(e,t,n){"use strict";function r(e){var t={exports:{}};return e(t,t.exports),t.exports}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(11),a=Object.freeze({__proto__:null,default:{}});n.d(t,"a",(function(){return s}));var s=Object(r.e)(a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,a="object"==typeof Reflect?Reflect:null,s=a&&"function"==typeof a.apply?a.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}var l=o;o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var B=10;function Q(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function F(e,t,n,r){var a,s,i,o;if(Q(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),i=s[t]),void 0===i)i=s[t]=n,++e._eventsCount;else if("function"==typeof i?i=s[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(a=c(e))>0&&i.length>a&&!i.warned){i.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=i.length,o=l,console&&console.warn&&console.warn(o)}return e}function U(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=U.bind(r);return a.listener=n,r.wrapFn=a,a}function d(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):I(a,a.length)}function u(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function I(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");B=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var o=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw o.context=i,o}var l=a[e];if(void 0===l)return!1;if("function"==typeof l)s(l,this,t);else{var B=l.length,Q=I(l,B);for(n=0;n<B;++n)s(Q[n],this,t)}return!0},o.prototype.addListener=function(e,t){return F(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return F(this,e,t,!0)},o.prototype.once=function(e,t){return Q(t),this.on(e,g(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return Q(t),this.prependListener(e,g(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,a,s,i;if(Q(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){i=n[s].listener,a=s;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(a=s[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):u.call(e,t)},o.prototype.listenerCount=u,o.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]},l.once=function(e,t){return new Promise((function(n,r){function a(){void 0!==s&&e.removeListener("error",s),n([].slice.call(arguments))}var s;"error"!==t&&(s=function(n){e.removeListener(t,a),r(n)},e.once("error",s)),e.once(t,a)}))}},function(e,t,n){"use strict";t.a=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){"use strict";var r=n(47);t.a=function(e,t){if(e){if("string"==typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r,a=n(11),s=(n(46),n(33)),i=n(30),o=n(45),l=n(58),B=n(38),Q=n(27),c=n(50),F=n(31),U=n(57),g=n(59),d=n(60),u=N;N.ReadableState=f;var I,m=function(e,t){return e.listeners(t).length},C=i.a.Buffer,b=a.b.Uint8Array||function(){};I=o.a&&o.a.debuglog?o.a.debuglog("stream"):function(){};var y,S,h,Z=c.a.getHighWaterMark,x=Q.a.codes,p=x.ERR_INVALID_ARG_TYPE,G=x.ERR_STREAM_PUSH_AFTER_EOF,R=x.ERR_METHOD_NOT_IMPLEMENTED,L=x.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Object(F.a)(N,s.a);var V=B.a.errorOrDestroy,A=["error","close","destroy","pause","resume"];function f(e,t,n){r=r||Object(a.a)("./_stream_duplex","/$$rollup_base$$/node_modules/readable-stream/lib"),e=e||{},"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=Z(this,e,"readableHighWaterMark",n),this.buffer=new l.a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(y||(y=U.a.StringDecoder),this.decoder=new y(e.encoding),this.encoding=e.encoding)}function N(e){if(r=r||Object(a.a)("./_stream_duplex","/$$rollup_base$$/node_modules/readable-stream/lib"),!(this instanceof N))return new N(e);var t=this instanceof r;this._readableState=new f(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.a.call(this)}function E(e,t,n,r,a){I("readableAddChunk",t);var s,i=e._readableState;if(null===t)i.reading=!1,function(e,t){if(I("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?J(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,W(e)))}}(e,i);else if(a||(s=function(e,t){var n,r;return r=t,C.isBuffer(r)||r instanceof b||"string"==typeof t||void 0===t||e.objectMode||(n=new p("chunk",["string","Buffer","Uint8Array"],t)),n}(i,t)),s)V(e,s);else if(i.objectMode||t&&t.length>0)if("string"==typeof t||i.objectMode||Object.getPrototypeOf(t)===C.prototype||(t=function(e){return C.from(e)}(t)),r)i.endEmitted?V(e,new L):D(e,i,t,!0);else if(i.ended)V(e,new G);else{if(i.destroyed)return!1;i.reading=!1,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||0!==t.length?D(e,i,t,!1):X(e,i)):D(e,i,t,!1)}else r||(i.reading=!1,X(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function D(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&J(e)),X(e,t)}function v(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function J(t){var n=t._readableState;I("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(I("emitReadable",n.flowing),n.emittedReadable=!0,e.nextTick(W,t))}function W(e){var t=e._readableState;I("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,w(e)}function X(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(H,t,n))}function H(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(I("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function T(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function k(e){I("readable nexttick read 0"),e.read(0)}function M(e,t){I("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),w(e),t.flowing&&!t.reading&&e.read(0)}function w(e){var t=e._readableState;for(I("flow",t.flowing);t.flowing&&null!==e.read(););}function Y(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function O(t){var n=t._readableState;I("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,e.nextTick(z,n,t))}function z(e,t){if(I("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function P(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),N.prototype.destroy=B.a.destroy,N.prototype._undestroy=B.a.undestroy,N.prototype._destroy=function(e,t){t(e)},N.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=C.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},N.prototype.unshift=function(e){return E(this,e,null,!0,!1)},N.prototype.isPaused=function(){return!1===this._readableState.flowing},N.prototype.setEncoding=function(e){y||(y=U.a.StringDecoder);var t=new y(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this},N.prototype.read=function(e){I("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return I("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):J(this),null;if(0===(e=v(e,t))&&t.ended)return 0===t.length&&O(this),null;var r,a=t.needReadable;return I("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&I("length less than watermark",a=!0),t.ended||t.reading?I("reading or ended",a=!1):a&&(I("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=v(n,t))),null===(r=e>0?Y(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==r&&this.emit("data",r),r},N.prototype._read=function(e){V(this,new R("_read()"))},N.prototype.pipe=function(t,n){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,I("pipe count=%d opts=%j",a.pipesCount,n);var s=n&&!1===n.end||t===e.stdout||t===e.stderr?U:i;function i(){I("onend"),t.end()}a.endEmitted?e.nextTick(s):r.once("end",s),t.on("unpipe",(function e(n,s){I("onunpipe"),n===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,I("cleanup"),t.removeListener("close",c),t.removeListener("finish",F),t.removeListener("drain",o),t.removeListener("error",Q),t.removeListener("unpipe",e),r.removeListener("end",i),r.removeListener("end",U),r.removeListener("data",B),l=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||o())}));var o=function(e){return function(){var t=e._readableState;I("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&m(e,"data")&&(t.flowing=!0,w(e))}}(r);t.on("drain",o);var l=!1;function B(e){I("ondata");var n=t.write(e);I("dest.write",n),!1===n&&((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==P(a.pipes,t))&&!l&&(I("false write response, pause",a.awaitDrain),a.awaitDrain++),r.pause())}function Q(e){I("onerror",e),U(),t.removeListener("error",Q),0===m(t,"error")&&V(t,e)}function c(){t.removeListener("finish",F),U()}function F(){I("onfinish"),t.removeListener("close",c),U()}function U(){I("unpipe"),r.unpipe(t)}return r.on("data",B),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(t,"error",Q),t.once("close",c),t.once("finish",F),t.emit("pipe",r),a.flowing||(I("pipe resume"),r.resume()),t},N.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<a;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var i=P(t.pipes,e);return-1===i||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},N.prototype.on=function(t,n){var r=s.a.prototype.on.call(this,t,n),a=this._readableState;return"data"===t?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===t&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,I("on readable",a.length,a.reading),a.length?J(this):a.reading||e.nextTick(k,this))),r},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(t,n){var r=s.a.prototype.removeListener.call(this,t,n);return"readable"===t&&e.nextTick(T,this),r},N.prototype.removeAllListeners=function(t){var n=s.a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||e.nextTick(T,this),n},N.prototype.resume=function(){var t=this._readableState;return t.flowing||(I("resume"),t.flowing=!t.readableListening,function(t,n){n.resumeScheduled||(n.resumeScheduled=!0,e.nextTick(M,t,n))}(this,t)),t.paused=!1,this},N.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},N.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var a in e.on("end",(function(){if(I("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){I("wrapped data"),n.decoder&&(a=n.decoder.write(a)),n.objectMode&&null==a||(n.objectMode||a&&a.length)&&(t.push(a)||(r=!0,e.pause()))})),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var s=0;s<A.length;s++)e.on(A[s],this.emit.bind(this,A[s]));return this._read=function(t){I("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(N.prototype[Symbol.asyncIterator]=function(){return void 0===S&&(S=g.a),S(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),N._fromList=Y,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(N.from=function(e,t){return void 0===h&&(h=d.a),h(N,e,t)})}).call(this,n(42))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(27).a.codes.ERR_INVALID_OPT_VALUE,a={getHighWaterMark:function(e,t,n,a){var s=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,a,n);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new r(a?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return F}));var r,a=n(11),s=n(33),i=n(30),o=n(38),l=n(27),B=n(50),Q=n(31),c=n(61),F=A;function U(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var a=r.callback;t.pendingcb--,a(void 0),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}A.WritableState=V;var g,d={deprecate:c.a},u=i.a.Buffer,I=a.b.Uint8Array||function(){},m=B.a.getHighWaterMark,C=l.a.codes,b=C.ERR_INVALID_ARG_TYPE,y=C.ERR_METHOD_NOT_IMPLEMENTED,S=C.ERR_MULTIPLE_CALLBACK,h=C.ERR_STREAM_CANNOT_PIPE,Z=C.ERR_STREAM_DESTROYED,x=C.ERR_STREAM_NULL_VALUES,p=C.ERR_STREAM_WRITE_AFTER_END,G=C.ERR_UNKNOWN_ENCODING,R=o.a.errorOrDestroy;function L(){}function V(t,n,s){r=r||Object(a.a)("./_stream_duplex","/$$rollup_base$$/node_modules/readable-stream/lib"),t=t||{},"boolean"!=typeof s&&(s=n instanceof r),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=m(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=!1===t.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,n){var r=t._writableState,a=r.sync,s=r.writecb;if("function"!=typeof s)throw new S;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),n)!function(t,n,r,a,s){--n.pendingcb,r?(e.nextTick(s,a),e.nextTick(J,t,n),t._writableState.errorEmitted=!0,R(t,a)):(s(a),t._writableState.errorEmitted=!0,R(t,a),J(t,n))}(t,r,a,n,s);else{var i=D(r)||t.destroyed;i||r.corked||r.bufferProcessing||!r.bufferedRequest||E(t,r),a?e.nextTick(N,t,r,i,s):N(t,r,i,s)}}(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new U(this)}function A(e){var t=this instanceof(r=r||Object(a.a)("./_stream_duplex","/$$rollup_base$$/node_modules/readable-stream/lib"));if(!t&&!g.call(A,this))return new A(e);this._writableState=new V(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.a.call(this)}function f(e,t,n,r,a,s,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new Z("write")):n?e._writev(a,t.onwrite):e._write(a,s,t.onwrite),t.sync=!1}function N(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),J(e,t)}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,a=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var i=0,o=!0;n;)a[i]=n,n.isBuf||(o=!1),n=n.next,i+=1;a.allBuffers=o,f(e,t,!0,t.length,a,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new U(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,B=n.encoding,Q=n.callback;if(f(e,t,!1,t.objectMode?1:l.length,l,B,Q),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function D(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function v(e,t){e._final((function(n){t.pendingcb--,n&&R(e,n),t.prefinished=!0,e.emit("prefinish"),J(e,t)}))}function J(t,n){var r=D(n);if(r&&(function(t,n){n.prefinished||n.finalCalled||("function"!=typeof t._final||n.destroyed?(n.prefinished=!0,t.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,e.nextTick(v,t,n)))}(t,n),0===n.pendingcb&&(n.finished=!0,t.emit("finish"),n.autoDestroy))){var a=t._readableState;(!a||a.autoDestroy&&a.endEmitted)&&t.destroy()}return r}Object(Q.a)(A,s.a),V.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(V.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(e){return!!g.call(this,e)||this===A&&e&&e._writableState instanceof V}})):g=function(e){return e instanceof this},A.prototype.pipe=function(){R(this,new h)},A.prototype.write=function(t,n,r){var a,s=this._writableState,i=!1,o=!s.objectMode&&(a=t,u.isBuffer(a)||a instanceof I);return o&&!u.isBuffer(t)&&(t=function(e){return u.from(e)}(t)),"function"==typeof n&&(r=n,n=null),o?n="buffer":n||(n=s.defaultEncoding),"function"!=typeof r&&(r=L),s.ending?function(t,n){var r=new p;R(t,r),e.nextTick(n,r)}(this,r):(o||function(t,n,r,a){var s;return null===r?s=new x:"string"==typeof r||n.objectMode||(s=new b("chunk",["string","Buffer"],r)),!s||(R(t,s),e.nextTick(a,s),!1)}(this,s,t,r))&&(s.pendingcb++,i=function(e,t,n,r,a,s){if(!n){var i=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n)),t}(t,r,a);r!==i&&(n=!0,a="buffer",r=i)}var o=t.objectMode?1:r.length;t.length+=o;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var B=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:s,next:null},B?B.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else f(e,t,!1,o,r,a,s);return l}(this,s,o,t,n,r)),i},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||E(this,e))},A.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new G(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function(e,t,n){n(new y("_write()"))},A.prototype._writev=null,A.prototype.end=function(t,n,r){var a=this._writableState;return"function"==typeof t?(r=t,t=null,n=null):"function"==typeof n&&(r=n,n=null),null!=t&&this.write(t,n),a.corked&&(a.corked=1,this.uncork()),a.ending||function(t,n,r){n.ending=!0,J(t,n),r&&(n.finished?e.nextTick(r):t.once("finish",r)),n.ended=!0,t.writable=!1}(this,a,r),this},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),A.prototype.destroy=o.a.destroy,A.prototype._undestroy=o.a.undestroy,A.prototype._destroy=function(e,t){t(e)}}).call(this,n(42))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(20),a=n(8),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i={encode:function(e){for(var t,n,r,i,o,l,B,Q=[],c=0,F=e.length,U=F,g="string"!==a.a.getTypeOf(e);c<e.length;)U=F-c,g?(t=e[c++],n=c<F?e[c++]:0,r=c<F?e[c++]:0):(t=e.charCodeAt(c++),n=c<F?e.charCodeAt(c++):0,r=c<F?e.charCodeAt(c++):0),i=t>>2,o=(3&t)<<4|n>>4,l=U>1?(15&n)<<2|r>>6:64,B=U>2?63&r:64,Q.push(s.charAt(i)+s.charAt(o)+s.charAt(l)+s.charAt(B));return Q.join("")},decode:function(e){var t,n,a,i,o,l,B=0,Q=0,c="data:";if(e.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var F,U=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&U--,e.charAt(e.length-2)===s.charAt(64)&&U--,U%1!=0)throw new Error("Invalid base64 input, bad content length.");for(F=r.a.uint8array?new Uint8Array(0|U):new Array(0|U);B<e.length;)t=s.indexOf(e.charAt(B++))<<2|(i=s.indexOf(e.charAt(B++)))>>4,n=(15&i)<<4|(o=s.indexOf(e.charAt(B++)))>>2,a=(3&o)<<6|(l=s.indexOf(e.charAt(B++))),F[Q++]=t,64!==o&&(F[Q++]=n),64!==l&&(F[Q++]=a);return F}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return F}));var r=n(20),a=n(52),s=n(24),i=n(8),o=n(13),l=n(63),B=n(64),Q=null;if(r.a.nodestream)try{Q=B.a}catch(e){}function c(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,i.a.checkSupport(r),this._worker=e.pipe(new l.a(r)),e.lock()}catch(e){this._worker=new o.a("error"),this._worker.error(e)}}c.prototype={accumulate:function(t){return function(t,n){return new s.a.Promise((function(r,s){var o=[],l=t._internalType,B=t._outputType,Q=t._mimeType;t.on("data",(function(e,t){o.push(e),n&&n(t)})).on("error",(function(e){o=[],s(e)})).on("end",(function(){try{var t=function(e,t,n){switch(e){case"blob":return i.a.newBlob(i.a.transformTo("arraybuffer",t),n);case"base64":return a.a.encode(t);default:return i.a.transformTo(e,t)}}(B,function(t,n){var r,a=0,s=null,i=0;for(r=0;r<n.length;r++)i+=n[r].length;switch(t){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(s=new Uint8Array(i),r=0;r<n.length;r++)s.set(n[r],a),a+=n[r].length;return s;case"nodebuffer":return e.concat(n);default:throw new Error("concat : unsupported type '"+t+"'")}}(l,o),Q);r(t)}catch(t){s(t)}o=[]})).resume()}))}(this,t)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.a.delay(t,arguments,n)})),this},resume:function(){return i.a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.a.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new Q(this,{objectMode:"nodebuffer"!==this._outputType},e)}};var F=c}).call(this,n(55).Buffer)},function(e,t,n){"use strict";var r=n(11),a=n(46),s=n(43),i=n(49),o=n(51),l=Object(r.d)((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}}),"/$$rollup_base$$/node_modules/stream-browserify/node_modules/inherits"),B=n(27),Q=n(31),c=C,F=B.a.codes,U=F.ERR_METHOD_NOT_IMPLEMENTED,g=F.ERR_MULTIPLE_CALLBACK,d=F.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=F.ERR_TRANSFORM_WITH_LENGTH_0,I=Object(r.a)("./_stream_duplex","/$$rollup_base$$/node_modules/readable-stream/lib");function m(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new g);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function C(e){if(!(this instanceof C))return new C(e);I.call(this,e),this._transformState={afterTransform:m.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",b)}function b(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?y(this,null,null):this._flush((function(t,n){y(e,t,n)}))}function y(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new u;if(e._transformState.transforming)throw new d;return e.push(null)}Object(Q.a)(C,I),C.prototype.push=function(e,t){return this._transformState.needTransform=!1,I.prototype.push.call(this,e,t)},C.prototype._transform=function(e,t,n){n(new U("_transform()"))},C.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},C.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},C.prototype._destroy=function(e,t){I.prototype._destroy.call(this,e,(function(e){t(e)}))};var S,h=Z;function Z(e){if(!(this instanceof Z))return new Z(e);c.call(this,e)}Object(Q.a)(Z,c),Z.prototype._transform=function(e,t,n){n(null,e)};var x=B.a.codes,p=x.ERR_MISSING_ARGS,G=x.ERR_STREAM_DESTROYED;function R(e){if(e)throw e}function L(e,t,n,r){r=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(r);var a=!1;e.on("close",(function(){a=!0})),void 0===S&&(S=s.a),S(e,{readable:t,writable:n},(function(e){if(e)return r(e);a=!0,r()}));var i=!1;return function(t){if(!a&&!i)return i=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void r(t||new G("pipe"))}}function V(e){e()}function A(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?R:e.pop():R}var N=D,E=a.a.EventEmitter;function D(){E.call(this)}l(D,E),D.Readable=i.a,D.Writable=o.a,D.Duplex=Object(r.a)("readable-stream/lib/_stream_duplex.js","/$$rollup_base$$/node_modules/stream-browserify"),D.Transform=c,D.PassThrough=h,D.finished=s.a,D.pipeline=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new p("streams");var s=t.map((function(e,n){var i=n<t.length-1;return L(e,i,n>0,(function(e){r||(r=e),e&&s.forEach(V),i||(s.forEach(V),a(r))}))}));return t.reduce(A)},D.Stream=D,D.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",i),n.on("close",o));var s=!1;function i(){s||(s=!0,e.end())}function o(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(B(),0===E.listenerCount(this,"error"))throw e}function B(){n.removeListener("data",r),e.removeListener("drain",a),n.removeListener("end",i),n.removeListener("close",o),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",B),n.removeListener("close",B),e.removeListener("close",B)}return n.on("error",l),e.on("error",l),n.on("end",B),n.on("close",B),e.on("close",B),e.emit("pipe",n),e},n.d(t,"a",(function(){return v}));var v=N},function(e,t,n){"use strict";(function(e){var r=n(66),a=n(67),s=n(68);function i(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return B(this,e,t,n)}function B(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=F(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(t,n),a=(e=o(e,r)).write(t,n);a!==r&&(e=e.slice(0,a));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|U(t.length);return 0===(e=o(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?o(e,0):F(e,t);if("Buffer"===t.type&&s(t.data))return F(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Q(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t){if(Q(t),e=o(e,t<0?0:0|U(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function F(e,t){var n=t.length<0?0:0|U(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function U(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return T(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function d(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return p(this,t,n);case"ascii":return G(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function u(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function I(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,a);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,a){var s,i=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,o/=2,l/=2,n/=2}function B(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a){var Q=-1;for(s=n;s<o;s++)if(B(e,s)===B(t,-1===Q?0:s-Q)){if(-1===Q&&(Q=s),s-Q+1===l)return Q*i}else-1!==Q&&(s-=s-Q),Q=-1}else for(n+l>o&&(n=o-l),s=n;s>=0;s--){for(var c=!0,F=0;F<l;F++)if(B(e,s+F)!==B(t,F)){c=!1;break}if(c)return s}return-1}function C(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var i=0;i<r;++i){var o=parseInt(t.substr(2*i,2),16);if(isNaN(o))return i;e[n+i]=o}return i}function b(e,t,n,r){return k(H(t,e.length-n),e,n,r)}function y(e,t,n,r){return k(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return y(e,t,n,r)}function h(e,t,n,r){return k(T(t),e,n,r)}function Z(e,t,n,r){return k(function(e,t){for(var n,r,a,s=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,a=n%256,s.push(a),s.push(r);return s}(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function p(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var s,i,o,l,B=e[a],Q=null,c=B>239?4:B>223?3:B>191?2:1;if(a+c<=n)switch(c){case 1:B<128&&(Q=B);break;case 2:128==(192&(s=e[a+1]))&&(l=(31&B)<<6|63&s)>127&&(Q=l);break;case 3:s=e[a+1],i=e[a+2],128==(192&s)&&128==(192&i)&&(l=(15&B)<<12|(63&s)<<6|63&i)>2047&&(l<55296||l>57343)&&(Q=l);break;case 4:s=e[a+1],i=e[a+2],o=e[a+3],128==(192&s)&&128==(192&i)&&128==(192&o)&&(l=(15&B)<<18|(63&s)<<12|(63&i)<<6|63&o)>65535&&l<1114112&&(Q=l)}null===Q?(Q=65533,c=1):Q>65535&&(Q-=65536,r.push(Q>>>10&1023|55296),Q=56320|1023&Q),r.push(Q),a+=c}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return B(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return Q(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return c(null,e)},l.allocUnsafeSlow=function(e){return c(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,s=Math.min(n,r);a<s;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(!l.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)u(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)u(this,t,t+3),u(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)u(this,t,t+7),u(this,t+1,t+6),u(this,t+2,t+5),u(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?p(this,0,e):d.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,a){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(a>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0),o=Math.min(s,i),B=this.slice(r,a),Q=e.slice(t,n),c=0;c<o;++c)if(B[c]!==Q[c]){s=B[c],i=Q[c];break}return s<i?-1:i<s?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return I(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return I(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return C(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return h(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function G(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function L(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",s=t;s<n;++s)a+=X(e[s]);return a}function V(e,t,n){for(var r=e.slice(t,n),a="",s=0;s<r.length;s+=2)a+=String.fromCharCode(r[s]+256*r[s+1]);return a}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function f(e,t,n,r,a,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,s=Math.min(e.length-n,2);a<s;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function E(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,s=Math.min(e.length-n,4);a<s;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function D(e,t,n,r,a,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function v(e,t,n,r,s){return s||D(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function J(e,t,n,r,s){return s||D(e,0,n,8),a.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var a=t-e;n=new l(a,void 0);for(var s=0;s<a;++s)n[s]=this[s+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],a=1,s=0;++s<t&&(a*=256);)r+=this[e+s]*a;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},l.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],a=1,s=0;++s<t&&(a*=256);)r+=this[e+s]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=t,a=1,s=this[e+--r];r>0&&(a*=256);)s+=this[e+--r]*a;return s>=(a*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),a.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),a.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),a.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),a.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||f(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,s=0;for(this[t]=255&e;++s<n&&(a*=256);)this[t+s]=e/a&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||f(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,s=1;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||f(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||f(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||f(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||f(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):E(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||f(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):E(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);f(this,e,t,n,a-1,-a)}var s=0,i=1,o=0;for(this[t]=255&e;++s<n&&(i*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/i>>0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);f(this,e,t,n,a-1,-a)}var s=n-1,i=1,o=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/i>>0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||f(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||f(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||f(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||f(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):E(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||f(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):E(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return v(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return v(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return J(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return J(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,s=r-n;if(this===e&&n<t&&t<r)for(a=s-1;a>=0;--a)e[a+t]=this[a+n];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var i=l.isBuffer(e)?e:H(new l(e,r).toString()),o=i.length;for(s=0;s<n-t;++s)this[s+t]=i[s%o]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var n;t=t||1/0;for(var r=e.length,a=null,s=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&s.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&s.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function T(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function k(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}}).call(this,n(39))},function(e,t,n){"use strict";var r=n(11),a=Object(r.d)((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new r(e),s=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:this.alea=s}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),s=Object(r.d)((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:this.xor128=s}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),i=Object(r.d)((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:this.xorwow=s}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),o=Object(r.d)((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&(s.x&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:this.xorshift7=s}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),l=Object(r.d)((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,s=t.i;return t.w=r=r+1640531527|0,n=a[s+34&127],e=a[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[s]=n^e,t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,a,s,i,o=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(i=i+1640531527|0,a=0==(n=o[127&s]^=r+i)?a+1:0);for(a>=128&&(o[127&(t&&t.length||0)]=-1),a=127,s=512;s>0;--s)r=o[a+34&127],n=o[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,o[a]=r^n;e.w=i,e.X=o,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&(s.X&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:this.xor4096=s}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),B=Object(r.d)((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new r(e),s=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,s&&("object"==typeof s&&a(s,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=s:this.tychei=s}(0,e)}),"/$$rollup_base$$/node_modules/seedrandom/lib"),Q=Object.freeze({__proto__:null,default:{}}),c=Object(r.e)(Q),F=Object(r.d)((function(e){!function(t,n,r){var a,s=256,i=r.pow(s,6),o=r.pow(2,52),l=2*o,B=255;function Q(e,B,Q){var c=[],u=g(function e(t,n){var r,a=[],s=typeof t;if(n&&"object"==s)for(r in t)try{a.push(e(t[r],n-1))}catch(t){}return a.length?a:"string"==s?t:t+"\0"}((B=1==B?{entropy:!0}:B||{}).entropy?[e,d(n)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(s):(e=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(e)),d(e)}catch(e){var r=t.navigator,i=r&&r.plugins;return[+new Date,t,i,t.screen,d(n)]}}():e,3),c),I=new F(c),m=function(){for(var e=I.g(6),t=i,n=0;e<o;)e=(e+n)*s,t*=s,n=I.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return m.int32=function(){return 0|I.g(4)},m.quick=function(){return I.g(4)/4294967296},m.double=m,g(d(I.S),n),(B.pass||Q||function(e,t,n,a){return a&&(a.S&&U(a,I),e.state=function(){return U(I,{})}),n?(r.random=e,t):e})(m,u,"global"in B?B.global:this==r,B.state)}function F(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<s;)o[a]=a++;for(a=0;a<s;a++)o[a]=o[i=B&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=B&a+1],n=n*s+o[B&(o[a]=o[i=B&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(s)}function U(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[B&a]=B&(n^=19*t[B&a])+r.charCodeAt(a++);return d(t)}function d(e){return String.fromCharCode.apply(0,e)}if(g(r.random(),n),e.exports){e.exports=Q;try{a=c}catch(e){}}else r.seedrandom=Q}("undefined"!=typeof self?self:r.b,[],Math)}),"/$$rollup_base$$/node_modules/seedrandom");n.d(t,"a",(function(){return U})),F.alea=a,F.xor128=s,F.xorwow=i,F.xorshift7=o,F.xor4096=l,F.tychei=B;var U=F},function(e,t,n){"use strict";var r=n(11),a=n(30),s=Object(r.d)((function(e,t){var n=a.a.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function s(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=a.a:(r(a.a,t),t.Buffer=s),r(n,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var a=n(e);return void 0!==t?"string"==typeof r?a.fill(t,r):a.fill(t):a.fill(0),a},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.a.SlowBuffer(e)}}),"/$$rollup_base$$/node_modules/safe-buffer");n.d(t,"a",(function(){return m}));var i=s.Buffer,o=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=B;function B(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=F,this.end=U,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=g,this.end=d,t=3;break;default:return this.write=u,void(this.end=I)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function Q(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function c(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function F(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function U(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function g(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function I(e){return e&&e.length?this.write(e):""}B.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},B.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},B.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var a=Q(t[r]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--r<n||-2===a?0:(a=Q(t[r]))>=0?(a>0&&(e.lastNeed=a-2),a):--r<n||-2===a?0:(a=Q(t[r]))>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},B.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var m={StringDecoder:l}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var r=n(30),a=n(45);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=r.a.Buffer,l=a.a.inspect,B=l&&l.custom||"inspect",Q=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},t.concat=function(e){if(0===this.length)return o.alloc(0);for(var t,n,r,a=o.allocUnsafe(e>>>0),s=this.head,i=0;s;)t=s.data,n=a,r=i,o.prototype.copy.call(t,n,r),i+=s.data.length,s=s.next;return a},t.consume=function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var a=t.data,s=e>a.length?a.length:e;if(s===a.length?r+=a:r+=a.slice(0,e),0==(e-=s)){s===a.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=a.slice(s));break}++n}return this.length-=n,r},t._getBuffer=function(e){var t=o.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var a=n.data,s=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,s),0==(e-=s)){s===a.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(s));break}++r}return this.length-=r,t},t[B]=function(e,t){return l(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))},e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var r,a=n(43);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=Symbol("lastResolve"),o=Symbol("lastReject"),l=Symbol("error"),B=Symbol("ended"),Q=Symbol("lastPromise"),c=Symbol("handlePromise"),F=Symbol("stream");function U(e,t){return{value:e,done:t}}function g(e){var t=e[i];if(null!==t){var n=e[F].read();null!==n&&(e[Q]=null,e[i]=null,e[o]=null,t(U(n,!1)))}}function d(t){e.nextTick(g,t)}var u=Object.getPrototypeOf((function(){})),I=Object.setPrototypeOf((s(r={get stream(){return this[F]},next:function(){var t=this,n=this[l];if(null!==n)return Promise.reject(n);if(this[B])return Promise.resolve(U(void 0,!0));if(this[F].destroyed)return new Promise((function(n,r){e.nextTick((function(){t[l]?r(t[l]):n(U(void 0,!0))}))}));var r,a=this[Q];if(a)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[B]?n(U(void 0,!0)):t[c](n,r)}),r)}}(a,this));else{var s=this[F].read();if(null!==s)return Promise.resolve(U(s,!1));r=new Promise(this[c])}return this[Q]=r,r}},Symbol.asyncIterator,(function(){return this})),s(r,"return",(function(){var e=this;return new Promise((function(t,n){e[F].destroy(null,(function(e){e?n(e):t(U(void 0,!0))}))}))})),r),u),m=function(e){var t,n=Object.create(I,(s(t={},F,{value:e,writable:!0}),s(t,i,{value:null,writable:!0}),s(t,o,{value:null,writable:!0}),s(t,l,{value:null,writable:!0}),s(t,B,{value:e._readableState.endEmitted,writable:!0}),s(t,c,{value:function(e,t){var r=n[F].read();r?(n[Q]=null,n[i]=null,n[o]=null,e(U(r,!1))):(n[i]=e,n[o]=t)},writable:!0}),t));return n[Q]=null,Object(a.a)(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[o];return null!==t&&(n[Q]=null,n[i]=null,n[o]=null,t(e)),void(n[l]=e)}var r=n[i];null!==r&&(n[Q]=null,n[i]=null,n[o]=null,r(U(void 0,!0))),n[B]=!0})),e.on("readable",d.bind(null,n)),n}}).call(this,n(42))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(11),a=function(e,t){if(s("noDeprecation"))return e;var n=!1;return function(){if(!n){if(s("throwDeprecation"))throw new Error(t);s("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}};function s(e){try{if(!r.b.localStorage)return!1}catch(e){return!1}var t=r.b.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var r="function"==typeof e?e:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}}).call(this,n(69).setImmediate)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(8),a=n(13);function s(e){a.a.call(this,"ConvertWorker to "+e),this.destType=e}r.a.inherits(s,a.a),s.prototype.processChunk=function(e){this.push({data:r.a.transformTo(this.destType,e.data),meta:e.meta})};var i=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(54),a=n(8),s=r.a.Readable;function i(e,t,n){s.call(this,t),this._helper=e;var r=this;e.on("data",(function(e,t){r.push(e)||r._helper.pause(),n&&n(t)})).on("error",(function(e){r.emit("error",e)})).on("end",(function(){r.push(null)}))}a.a.inherits(i,s),i.prototype._read=function(){this._helper.resume()};var o=i},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=65},function(e,t,n){"use strict";t.byteLength=function(e){var t=B(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=B(e),i=r[0],o=r[1],l=new s(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),Q=0,c=o>0?i-4:i;for(n=0;n<c;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],l[Q++]=t>>16&255,l[Q++]=t>>8&255,l[Q++]=255&t;2===o&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,l[Q++]=255&t);1===o&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,l[Q++]=t>>8&255,l[Q++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,s=[],i=0,o=n-a;i<o;i+=16383)s.push(Q(e,i,i+16383>o?o:i+16383));1===a?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return s.join("")};for(var r=[],a=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=i.length;o<l;++o)r[o]=i[o],a[i.charCodeAt(o)]=o;function B(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function Q(e,t,n){for(var a,s,i=[],o=t;o<n;o+=3)a=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(r[(s=a)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return i.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,a){var s,i,o=8*a-r-1,l=(1<<o)-1,B=l>>1,Q=-7,c=n?a-1:0,F=n?-1:1,U=e[t+c];for(c+=F,s=U&(1<<-Q)-1,U>>=-Q,Q+=o;Q>0;s=256*s+e[t+c],c+=F,Q-=8);for(i=s&(1<<-Q)-1,s>>=-Q,Q+=r;Q>0;i=256*i+e[t+c],c+=F,Q-=8);if(0===s)s=1-B;else{if(s===l)return i?NaN:1/0*(U?-1:1);i+=Math.pow(2,r),s-=B}return(U?-1:1)*i*Math.pow(2,s-r)},t.write=function(e,t,n,r,a,s){var i,o,l,B=8*s-a-1,Q=(1<<B)-1,c=Q>>1,F=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,U=r?0:s-1,g=r?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=Q):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+c>=1?F/l:F*Math.pow(2,1-c))*l>=2&&(i++,l/=2),i+c>=Q?(o=0,i=Q):i+c>=1?(o=(t*l-1)*Math.pow(2,a),i+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,a),i=0));a>=8;e[n+U]=255&o,U+=g,o/=256,a-=8);for(i=i<<a|o,B+=a;B>0;e[n+U]=255&i,U+=g,i/=256,B-=8);e[n+U-g]|=128*d}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(a.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new s(a.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(70),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(39))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,a,s,i,o,l=1,B={},Q=!1,c=e.document,F=Object.getPrototypeOf&&Object.getPrototypeOf(e);F=F&&F.setTimeout?F:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){g(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){g(e.data)},r=function(e){s.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(a=c.documentElement,r=function(e){var t=c.createElement("script");t.onreadystatechange=function(){g(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):r=function(e){setTimeout(g,0,e)}:(i="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&g(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),r=function(t){e.postMessage(i+t,"*")}),F.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return B[l]=a,r(l),l++},F.clearImmediate=U}function U(e){delete B[e]}function g(e){if(Q)setTimeout(g,0,e);else{var t=B[e];if(t){Q=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{U(e),Q=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(39),n(42))},function(e,t,n){"use strict";(function(e){n(5);var t=n(0),r=n(10),a=n(26),s=n(16),i=n(37),o=n(28),l=t.c.vtkErrorMacro;function B(e,t){for(var n=0;n<e.length;n++)t.push(e[n])}function Q(e,t,n,r,a){var s=e[t];if(void 0===s)return-1;if(-1!==s.indexOf("endfacet"))return t+1;if(-1===s.indexOf("facet"))return t+1;var i=0,o=2,l=n.length/3;for(B(s.split(/[ \t]+/).filter((function(e){return e})).slice(-3).map(Number),a);-1!==e[t+o].indexOf("vertex");)B(e[t+o].split(/[ \t]+/).filter((function(e){return e})).slice(-3).map(Number),n),i++,o++;r.push(i);for(var Q=0;Q<i;Q++)r.push(l+Q);for(;e[t+o]&&-1!==e[t+o].indexOf("endfacet");)o++;return t+o+2}function c(t,n){function B(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.compression,s=n.progressCallback;return r.binary?n.dataAccessHelper.fetchBinary(e,{compression:a,progressCallback:s}):n.dataAccessHelper.fetchText(t,e,{compression:a,progressCallback:s})}n.classHierarchy.push("vtkSTLReader"),n.dataAccessHelper||(n.dataAccessHelper=o.a.get("http")),t.setUrl=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{binary:!0};n.url=e;var a=e.split("/");return a.pop(),n.baseURL=a.join("/"),n.compression=r.compression,t.loadData({progressCallback:r.progressCallback,binary:!!r.binary})},t.loadData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=B(n.url,e);return r.then(t.parse),r},t.parse=function(e){"string"==typeof e?t.parseAsText(e):t.parseAsArrayBuffer(e)},t.parseAsArrayBuffer=function(o){if(o&&o!==n.parseData)if(t.modified(),n.parseData=o,84+50*new DataView(o,0,84).getUint32(80,!0)===o.byteLength){var B=o.slice(0,80),Q=function(e){for(var t=e.split(" ").filter((function(e){return e.indexOf("=")>-1})),n={},r=0;r<t.length;++r){var a=t[r].split("=");2===a.length&&(n[a[0]]=a[1])}return n}(i.a.arrayBufferToString(B)),c=new DataView(o,84);e.dataview=c;for(var F=(o.byteLength-84)/50,U=new Float32Array(9*F),g=new Float32Array(3*F),d=new Uint32Array(4*F),u=new Uint16Array(F),I=0,m=0;m<F;m++){var C=50*m;g[3*m+0]=c.getFloat32(C+0,!0),g[3*m+1]=c.getFloat32(C+4,!0),g[3*m+2]=c.getFloat32(C+8,!0),U[9*m+0]=c.getFloat32(C+12,!0),U[9*m+1]=c.getFloat32(C+16,!0),U[9*m+2]=c.getFloat32(C+20,!0),U[9*m+3]=c.getFloat32(C+24,!0),U[9*m+4]=c.getFloat32(C+28,!0),U[9*m+5]=c.getFloat32(C+32,!0),U[9*m+6]=c.getFloat32(C+36,!0),U[9*m+7]=c.getFloat32(C+40,!0),U[9*m+8]=c.getFloat32(C+44,!0),d[I++]=3,d[I++]=3*m+0,d[I++]=3*m+1,d[I++]=3*m+2,u[m]=c.getUint16(C+48,!0)}if("SPACE"in Q&&"LPS"!==Q.SPACE){var b=Q.SPACE,y=new Float32Array(16);switch(y[15]=1,b[0]){case"L":y[0]=1;break;case"R":y[0]=-1;break;default:return void l("Can not convert STL file from ".concat(b," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}switch(b[1]){case"P":y[5]=1;break;case"A":y[5]=-1;break;default:return void l("Can not convert STL file from ".concat(b," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}switch(b[2]){case"S":y[10]=1;break;case"I":y[10]=-1;break;default:return void l("Can not convert STL file from ".concat(b," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}a.a.buildFromDegree().setMatrix(y).apply(U).apply(g)}var S=s.a.newInstance();S.getPoints().setData(U,3),S.getPolys().setData(d),S.getCellData().setScalars(r.a.newInstance({name:"Attribute",values:u})),S.getCellData().setNormals(r.a.newInstance({name:"Normals",values:g,numberOfComponents:3})),n.output[0]=S}else t.parseAsText(i.a.arrayBufferToString(o))},t.parseAsText=function(e){if(e&&e!==n.parseData){t.modified(),n.parseData=e;for(var a=e.split("\n"),i=1,o=[],l=[],B=[];-1!==i;)i=Q(a,i,o,l,B);var c=s.a.newInstance();c.getPoints().setData(Float32Array.from(o),3),c.getPolys().setData(Uint32Array.from(l)),c.getCellData().setNormals(r.a.newInstance({name:"Normals",values:Float32Array.from(B),numberOfComponents:3})),n.output[0]=c}},t.requestData=function(e,r){t.parse(n.parseData)}}var F={};t.c.newInstance((function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,F,r),t.c.obj(e,n),t.c.get(e,n,["url","baseURL"]),t.c.setGet(e,n,["dataAccessHelper"]),t.c.algo(e,n,0,1),c(e,n),n.compression||(n.compression=null),n.progressCallback||(n.progressCallback=null)}),"vtkSTLReader")}).call(this,n(39))},function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),s=n(1),i=n.n(s),o=Object(r.lazy)((function(){return n.e(0).then(n.bind(null,73))}));function l(e){return a.a.createElement(a.a.Suspense,null,a.a.createElement(o,e))}l.defaultProps={port:0,vtkClass:"vtkConeSource",state:{}},l.propTypes={id:i.a.string,port:i.a.number,vtkClass:i.a.string,state:i.a.object,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])};var B=n(14);function Q(e){return a.a.createElement(B.b,e)}function c(e){return a.a.createElement(B.c,e)}function F(e){return a.a.createElement(B.d,e)}function U(e){return a.a.createElement(B.e,e)}function g(e){return a.a.createElement(B.f,e)}function d(e){return a.a.createElement(B.g,e)}function u(e){return a.a.createElement(B.h,e)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){return a.a.createElement(B.k,I({id:e.id,port:e.port},e.state.mesh),a.a.createElement(B.j,null,e.state.field&&"PointData"===e.state.field.location&&a.a.createElement(B.d,I({registration:"setScalars"},e.state.field)),e.state.pointArrays&&e.state.pointArrays.map((function(e){return a.a.createElement(B.d,I({key:e.name},e))}))),a.a.createElement(B.c,null,e.state.field&&"CellData"===e.state.field.location&&a.a.createElement(B.d,I({registration:"setScalars"},e.state.field)),e.state.cellArrays&&e.state.cellArrays.map((function(e){return a.a.createElement(B.d,I({key:e.name},e))}))))}function C(e){return a.a.createElement(B.i,e)}function b(e){return a.a.createElement(B.j,e)}function y(e){return a.a.createElement(B.k,e)}function S(e){return a.a.createElement(B.l,e)}function h(e){return a.a.createElement(B.m,e)}function Z(e){return a.a.createElement(B.n,e)}Q.defaultProps={port:0,name:"scalars",location:"POINT",arrays:[],formula:function(e){return e[0]}},Q.propTypes={id:i.a.string,port:i.a.number,name:i.a.string,location:i.a.string,arrays:i.a.arrayOf(i.a.string),formula:i.a.func,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},c.defaultProps={},c.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},F.defaultProps={name:"scalars",type:"Float32Array",values:[],numberOfComponents:1,registration:"addArray"},F.propTypes={id:i.a.string,type:i.a.string,name:i.a.string,values:i.a.arrayOf(i.a.number),numberOfComponents:i.a.number,registration:i.a.string},U.defaultProps={},U.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},g.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1]},g.propTypes={id:i.a.string,actor:i.a.object,mapper:i.a.object,property:i.a.object,colorMapPreset:i.a.string,colorDataRange:i.a.arrayOf(i.a.number),showCubeAxes:i.a.bool,cubeAxesStyle:i.a.object,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},d.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1]},d.propTypes={id:i.a.string,actor:i.a.object,mapper:i.a.object,property:i.a.object,colorMapPreset:i.a.string,colorDataRange:i.a.arrayOf(i.a.number),children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},u.defaultProps={port:0,dimensions:[1,1,1],spacing:[1,1,1],origin:[0,0,0],direction:[1,0,0,0,1,0,0,0,1]},u.propTypes={id:i.a.string,port:i.a.number,dimensions:i.a.arrayOf(i.a.number),spacing:i.a.arrayOf(i.a.number),origin:i.a.arrayOf(i.a.number),direction:i.a.arrayOf(i.a.number),children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},m.defaultProps={port:0,state:{mesh:{points:[]}}},m.propTypes={id:i.a.string,port:i.a.number,state:i.a.object},C.defaultProps={xyz:[0,0,0],colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1]},C.propTypes={xyz:i.a.arrayOf(i.a.number),rgb:i.a.arrayOf(i.a.number),rgba:i.a.arrayOf(i.a.number),scalars:i.a.arrayOf(i.a.number),colorMapPreset:i.a.string,colorDataRange:i.a.arrayOf(i.a.number),property:i.a.object},b.defaultProps={},b.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},y.defaultProps={port:0,points:[],connectivity:"manual"},y.propTypes={id:i.a.string,port:i.a.number,points:i.a.arrayOf(i.a.number),verts:i.a.arrayOf(i.a.number),lines:i.a.arrayOf(i.a.number),polys:i.a.arrayOf(i.a.number),strips:i.a.arrayOf(i.a.number),connectivity:i.a.string,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},S.defaultProps={port:0,vtkClass:"",renderOnUpdate:!0,resetCameraOnUpdate:!0},S.propTypes={id:i.a.string,port:i.a.number,vtkClass:i.a.string,url:i.a.string,parseAsText:i.a.string,parseAsArrayBuffer:i.a.string,renderOnUpdate:i.a.bool,resetCameraOnUpdate:i.a.bool,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},h.defaultProps={port:0,name:"shared"},h.propTypes={id:i.a.string,port:i.a.number,name:i.a.string,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},Z.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:"auto"},Z.propTypes={id:i.a.string,mapper:i.a.object,actor:i.a.object,property:i.a.object,colorMapPreset:i.a.string,colorDataRange:i.a.oneOfType([i.a.arrayOf(i.a.number),i.a.string]),iSlice:i.a.number,jSlice:i.a.number,kSlice:i.a.number,xSlice:i.a.number,ySlice:i.a.number,zSlice:i.a.number,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])};var x=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,74))}));function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(o,e);var t,n,s,i=V(o);function o(){return G(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){return a.a.createElement(r.Suspense,{fallback:null},a.a.createElement(x,this.props))}}])&&R(t.prototype,n),s&&R(t,s),o}(a.a.Component);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e){return a.a.createElement(B.h,E({id:e.id,port:e.port},e.state.image),e.state.field&&a.a.createElement(B.j,null,a.a.createElement(B.d,E({registration:"setScalars"},e.state.field))))}function v(e){return a.a.createElement(B.p,e)}function J(e){return a.a.createElement(B.q,e)}function W(e){return a.a.createElement(B.r,e)}N.defaultProps={style:{width:"100%",height:"100%"},triggerRender:0,triggerResetCamera:0,background:[.2,.3,.4],cameraPosition:[0,0,1],cameraViewUp:[0,1,0],cameraParallelProjection:!1,interactorSettings:[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",shift:!0},{button:1,action:"Zoom",alt:!0},{button:1,action:"ZoomToMouse",control:!0},{button:1,action:"Roll",alt:!0,shift:!0}]},N.propTypes={id:i.a.string,style:i.a.object,className:i.a.string,background:i.a.array,interactorSettings:i.a.array,cameraPosition:i.a.array,cameraViewUp:i.a.array,cameraParallelProjection:i.a.bool,triggerRender:i.a.number,triggerResetCamera:i.a.number,pickingModes:i.a.arrayOf(i.a.string),clickInfo:i.a.object,hoverInfo:i.a.object,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},D.defaultProps={port:0,state:{image:{dimension:[10,10,10]}}},D.propTypes={id:i.a.string,port:i.a.number,state:i.a.object},v.defaultProps={size:[400,150],rescaleColorMap:!0},v.propTypes={id:i.a.string,size:i.a.arrayOf(i.a.number),rescaleColorMap:i.a.bool},J.defaultProps={scalarsType:"Float32Array",colorMapPreset:"erdc_rainbow_bright",colorDataRange:"auto",volumeController:!0,rescaleColorMap:!0,controllerSize:[400,150]},J.propTypes={id:i.a.string,dimensions:i.a.arrayOf(i.a.number),spacing:i.a.arrayOf(i.a.number),origin:i.a.arrayOf(i.a.number),rgb:i.a.arrayOf(i.a.number),rgba:i.a.arrayOf(i.a.number),scalars:i.a.arrayOf(i.a.number),scalarsType:i.a.string,mapper:i.a.object,volume:i.a.object,property:i.a.object,colorMapPreset:i.a.string,volumeController:i.a.bool,controllerSize:i.a.arrayOf(i.a.number),rescaleColorMap:i.a.bool,colorDataRange:i.a.oneOfType([i.a.arrayOf(i.a.number),i.a.string])},W.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:"auto"},W.propTypes={id:i.a.string,mapper:i.a.object,volume:i.a.object,property:i.a.object,colorMapPreset:i.a.string,colorDataRange:i.a.oneOfType([i.a.arrayOf(i.a.number),i.a.string]),children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node])},n.d(t,"Algorithm",(function(){return l})),n.d(t,"Calculator",(function(){return Q})),n.d(t,"CellData",(function(){return c})),n.d(t,"DataArray",(function(){return F})),n.d(t,"FieldData",(function(){return U})),n.d(t,"GeometryRepresentation",(function(){return g})),n.d(t,"GlyphRepresentation",(function(){return d})),n.d(t,"ImageData",(function(){return u})),n.d(t,"Mesh",(function(){return m})),n.d(t,"PointCloudRepresentation",(function(){return C})),n.d(t,"PointData",(function(){return b})),n.d(t,"PolyData",(function(){return y})),n.d(t,"Reader",(function(){return S})),n.d(t,"ShareDataSet",(function(){return h})),n.d(t,"SliceRepresentation",(function(){return Z})),n.d(t,"View",(function(){return N})),n.d(t,"Volume",(function(){return D})),n.d(t,"VolumeController",(function(){return v})),n.d(t,"VolumeDataRepresentation",(function(){return J})),n.d(t,"VolumeRepresentation",(function(){return W}))}]);
//# sourceMappingURL=dash_vtk.min.js.map
//# sourceMappingURL=dash_vtk.min.js.map